{
  "comments": [
    {
      "key": {
        "uuid": "d1ebf82e_9f4012e3",
        "filename": "content/browser/frame_host/render_frame_host_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 524,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-24T11:41:48Z",
      "side": 1,
      "message": "If my understanding is correct (that we only use this interface on local roots), widget_request.is_pending() should match the state of widget_routing_id !\u003d MSG_ROUTING_NONE, no?",
      "range": {
        "startLine": 522,
        "startChar": 0,
        "endLine": 524,
        "endChar": 3
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "381b4c5b_6d9d3709",
        "filename": "content/browser/frame_host/render_frame_host_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 524,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-24T13:40:19Z",
      "side": 1,
      "message": "The RenderWidgetHostImpl\u0027s widget interface is used to retrieve the WidgetInputHandler interface.\nThe WidgetInputHandler interface is used for two types of widgets:\n1) WebPagePopups\n2) LocalFrameRoots",
      "parentUuid": "d1ebf82e_9f4012e3",
      "range": {
        "startLine": 522,
        "startChar": 0,
        "endLine": 524,
        "endChar": 3
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8de11ccc_4d547c48",
        "filename": "content/browser/frame_host/render_frame_host_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 524,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-24T19:15:25Z",
      "side": 1,
      "message": "Right, but in the RFH case, it will never be for WebPagePopup, right? So in that case, widget request should only be present if widget routing ID is not null?",
      "parentUuid": "381b4c5b_6d9d3709",
      "range": {
        "startLine": 522,
        "startChar": 0,
        "endLine": 524,
        "endChar": 3
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "655f0418_b6edcfa3",
        "filename": "content/browser/frame_host/render_frame_host_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 524,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-24T21:09:49Z",
      "side": 1,
      "message": "Yes I believe so. Do you want me to move this code down into the if block?",
      "parentUuid": "8de11ccc_4d547c48",
      "range": {
        "startLine": 522,
        "startChar": 0,
        "endLine": 524,
        "endChar": 3
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4dddf651_7b7cb450",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1700,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-24T11:41:48Z",
      "side": 1,
      "message": "I\u0027m not sure we should be doing this: if we have a RVH created already, this message pipe should already be set up.",
      "range": {
        "startLine": 1700,
        "startChar": 4,
        "endLine": 1700,
        "endChar": 64
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4385815d_779a61a5",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1700,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-24T13:40:19Z",
      "side": 1,
      "message": "The browser side of the binding wasn\u0027t retained; see the code path for CreateSpeculativeRenderFrameHost.. the WidgetRequest isn\u0027t stored anywhere. So the channel won\u0027t really be established.",
      "parentUuid": "4dddf651_7b7cb450",
      "range": {
        "startLine": 1700,
        "startChar": 4,
        "endLine": 1700,
        "endChar": 64
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a588126_ca831c5b",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1700,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-24T19:15:25Z",
      "side": 1,
      "message": "Why call it at all then?",
      "parentUuid": "4385815d_779a61a5",
      "range": {
        "startLine": 1700,
        "startChar": 4,
        "endLine": 1700,
        "endChar": 64
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70f797f2_8ee849e6",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1700,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-24T21:09:49Z",
      "side": 1,
      "message": "Because the code in the RenderWidgetHostImpl was changed to always assume it had a WidgetPtr ie; it can\u0027t have a non-null object. What are you suggesting here?",
      "parentUuid": "9a588126_ca831c5b",
      "range": {
        "startLine": 1700,
        "startChar": 4,
        "endLine": 1700,
        "endChar": 64
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f44e135_755a46cb",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1700,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-25T03:55:59Z",
      "side": 1,
      "message": "OK, I think I understand what this code is going for... this is the rebinding logic that I was confused by. However, shouldn\u0027t this only apply for main frames? I\u0027m also uncertain of how this will work in conjunction with the comment below.",
      "parentUuid": "70f797f2_8ee849e6",
      "range": {
        "startLine": 1700,
        "startChar": 4,
        "endLine": 1700,
        "endChar": 64
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bb3eb5a_1f5dd03e",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-24T11:41:48Z",
      "side": 1,
      "message": "So maybe the caller should be passing the WidgetRequest to makes things simpler at this layer.",
      "range": {
        "startLine": 1706,
        "startChar": 25,
        "endLine": 1706,
        "endChar": 58
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56e5b0a3_2cf62f38",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-24T13:40:19Z",
      "side": 1,
      "message": "There were a few calls to CreateRenderFrameHost so I\u0027d need to duplicate the MakeRequest logic.",
      "parentUuid": "5bb3eb5a_1f5dd03e",
      "range": {
        "startLine": 1706,
        "startChar": 25,
        "endLine": 1706,
        "endChar": 58
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d738ff91_05ef6859",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-25T03:55:59Z",
      "side": 1,
      "message": "Unconditionally creating a request here seems contradictory to my understanding that this is for local roots though. I would have expected an extra statement around https://cs.chromium.org/chromium/src/content/browser/frame_host/render_frame_host_manager.cc?rcl\u003d42961a709a98270314645b43febd3e86addc57e6\u0026l\u003d1749 to populate a widget request if needed.\n\n(This also binds local roots with remote main frames to the widget of the RVH, which I think we don\u0027t want?)",
      "parentUuid": "56e5b0a3_2cf62f38",
      "range": {
        "startLine": 1706,
        "startChar": 25,
        "endLine": 1706,
        "endChar": 58
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e87f9712_9317c2b2",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-25T17:29:31Z",
      "side": 1,
      "message": "Aren\u0027t there code paths like: https://cs.chromium.org/chromium/src/content/browser/frame_host/render_frame_host_manager.cc?l\u003d86 that have a routing id but require input messages (interstitial page?) So doing it on like 1749 might not encompass all those code paths.\n\nMy ultimate idea was if there is a widget routing id there should be a widget ptr/channel request. There is a lot of code complexity in these classes and I\u0027m not sure I fully understand it all. \n\nI\u0027m not sure how a path forward for making this sane is.",
      "parentUuid": "d738ff91_05ef6859",
      "range": {
        "startLine": 1706,
        "startChar": 25,
        "endLine": 1706,
        "endChar": 58
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4988e8b_4b3b4224",
        "filename": "content/browser/frame_host/render_frame_host_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-26T11:13:45Z",
      "side": 1,
      "message": "I think interstitials are passing a widget routing ID in, so it should be OK.\n\nI think your ultimate idea is correct, but I also think that it\u0027s implemented (for legacy IPC). There\u0027s only 3 calls that codesearch knows about: one is for interstitials (which does set the widget routing ID [1]), another is for the main frame (which also sets the widget routing ID [2]), and the final one is for child frame creation (on line 1749, which only populates widget routing ID if we\u0027re crossing a process boundary).\n\n[1] https://cs.chromium.org/chromium/src/content/browser/frame_host/interstitial_page_impl.cc?rcl\u003d43915b4ca70e63ba092db92a55cae20769ab00b5\u0026l\u003d600\n[2] https://cs.chromium.org/chromium/src/content/browser/web_contents/web_contents_impl.cc?rcl\u003d43915b4ca70e63ba092db92a55cae20769ab00b5\u0026l\u003d1691",
      "parentUuid": "e87f9712_9317c2b2",
      "range": {
        "startLine": 1706,
        "startChar": 25,
        "endLine": 1706,
        "endChar": 58
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8e85ddc_7e977135",
        "filename": "content/browser/renderer_host/render_widget_host_view_aura_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 587,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-07-24T11:41:48Z",
      "side": 1,
      "message": "FWIW, this is considered a reasonable place to use auto.",
      "range": {
        "startLine": 587,
        "startChar": 4,
        "endLine": 587,
        "endChar": 35
      },
      "revId": "bcf7377a5b32bd0ee7d7303596274722d1508b75",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}