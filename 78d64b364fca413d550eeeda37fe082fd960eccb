{
  "comments": [
    {
      "key": {
        "uuid": "640e5675_ca95c7e4",
        "filename": "cc/tiles/tile_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 798,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-08-12T01:34:21Z",
      "side": 1,
      "message": "vmpstr@: I hope this new patch is more clear.\nBasically I want to accumulate the total amount of memory is required for pre-paint, which I believe is the case where if (!tile_is_needed_now). And I want to see how much that total memory would exceed the soft limit.\n\nFor example, in the case where the soft limit is 1MB, and we saw that 80% users are exceeding 2.5MB, that tells us we should set the soft limit to 3.5MB.\n\nDoes that make sense?",
      "range": {
        "startLine": 796,
        "startChar": 4,
        "endLine": 798,
        "endChar": 65
      },
      "revId": "78d64b364fca413d550eeeda37fe082fd960eccb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82997a10_bc1e1a6a",
        "filename": "cc/tiles/tile_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 798,
      "author": {
        "id": 1221484
      },
      "writtenOn": "2017-08-14T21:58:58Z",
      "side": 1,
      "message": "With the lower soft limit, we\u0027ll stop iterating on line 768, so we probably won\u0027t ever hit this for pre-paint tiles when we\u0027ve exceeded the soft limit.\n\nI actually think it\u0027s fine to just see how often scheduling of NOW tiles exceeds the limits - I think you can just log \"memory_usage.memory_bytes() - soft_memory_limit.memory_bytes()\"\n\nThis will tell us if we are allowing any prepaint at all.",
      "parentUuid": "640e5675_ca95c7e4",
      "range": {
        "startLine": 796,
        "startChar": 4,
        "endLine": 798,
        "endChar": 65
      },
      "revId": "78d64b364fca413d550eeeda37fe082fd960eccb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0487f92d_33fed209",
        "filename": "cc/tiles/tile_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 798,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-08-15T02:12:31Z",
      "side": 1,
      "message": "Done. In the new patch, I changed it to record for the NOW tiles. We might as well just show how much memory we exceed the limit, so that we can have a better idea what should be the limit. Does that make sense?",
      "parentUuid": "82997a10_bc1e1a6a",
      "range": {
        "startLine": 796,
        "startChar": 4,
        "endLine": 798,
        "endChar": 65
      },
      "revId": "78d64b364fca413d550eeeda37fe082fd960eccb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b1a7b07c_b32b512f",
        "filename": "cc/tiles/tile_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 850,
      "author": {
        "id": 1221484
      },
      "writtenOn": "2017-08-14T21:58:58Z",
      "side": 1,
      "message": "Unfortunately, you can\u0027t log the same histogram with two different bucketizations - it will confuse the UMA backend. I would just always log the 8000 max version. You can always filter the data by experiment enabled/disabled in UMA.",
      "range": {
        "startLine": 850,
        "startChar": 66,
        "endLine": 850,
        "endChar": 70
      },
      "revId": "78d64b364fca413d550eeeda37fe082fd960eccb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "493692a4_462208bc",
        "filename": "cc/tiles/tile_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 850,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-08-15T02:12:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b1a7b07c_b32b512f",
      "range": {
        "startLine": 850,
        "startChar": 66,
        "endLine": 850,
        "endChar": 70
      },
      "revId": "78d64b364fca413d550eeeda37fe082fd960eccb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d910c7a_86c4c1ed",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 6
      },
      "lineNbr": 81572,
      "author": {
        "id": 1002483
      },
      "writtenOn": "2017-08-14T19:41:29Z",
      "side": 1,
      "message": "Can you define these using histogram suffixes.",
      "revId": "78d64b364fca413d550eeeda37fe082fd960eccb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22de1276_0a73a3df",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 6
      },
      "lineNbr": 81572,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-08-15T17:44:26Z",
      "side": 1,
      "message": "jwd@: we are now using only one histogram in the latest patch.",
      "parentUuid": "5d910c7a_86c4c1ed",
      "revId": "78d64b364fca413d550eeeda37fe082fd960eccb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}