{
  "comments": [
    {
      "key": {
        "uuid": "abdde188_97a4f466",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 382,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T08:53:02Z",
      "side": 1,
      "message": "I think this condition is not complete.\n\nLet\u0027s say available space is 20MB and we want to import following photos.\nPhoto A (10MB)\nPhoto B (10MB)\nPhoto C (20MB)\n\nIn the 1st pass, photo A and B will be copied and copying C will fail.\nIn the 2nd pass (triggered by the COMPLETED_EVENT of A), copying C will still fail.\nHowever, we should not give up.\nIn the 3rd pass (triggered by the COMPLETED_EVENT of B), copying C will succeed.\n\nCurrent code will give up the import in the 2nd pass.\nMaybe we should keep the |importEntries_| until the user cancel the operation or Files app is quit, and retry the copy every time we receive COMPLETED_EVENT.",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88f7ec44_6d1f2057",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 382,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-27T09:11:32Z",
      "side": 1,
      "message": "https://cs.chromium.org/chromium/src/ui/file_manager/file_manager/common/js/async_util.js?l\u003d21\u0026rcl\u003d29b4eb1337618fba084123e89444875775206244\nhttps://cs.chromium.org/chromium/src/ui/file_manager/file_manager/background/js/drive_sync_handler.js?l\u003d145\u0026rcl\u003d29b4eb1337618fba084123e89444875775206244\n\nBoth this function and DriveSyncHandler.COMPLETED_EVENT only trigger after a complete try and not per file. So in the current scenario, as long as their is at least 512MB of space available (that Drive magical number), they will all be backed up, then this check will happen, realize it is done, and resolve the try.",
      "parentUuid": "abdde188_97a4f466",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46551b43_fa87ddc0",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 382,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T09:27:53Z",
      "side": 1,
      "message": "\u003e DriveSyncHandler.COMPLETED_EVENT only trigger after a complete try\nDo you mean, COMPLETE_EVENT is dispatched only when all copied files are uploaded?\nIIUC, it is dispatched every time uploading a file is done and dismiss the progress notification only when the event for the last file is dispatched.\nhttps://cs.chromium.org/chromium/src/ui/file_manager/file_manager/background/js/drive_sync_handler.js?type\u003dcs\u0026l\u003d147\nCould you double check the actual behavior?",
      "parentUuid": "88f7ec44_6d1f2057",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6decf56_2dafd9b0",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 382,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T09:30:08Z",
      "side": 1,
      "message": "Ah, never mind!\nThere are two types of COMPLETED event...!",
      "parentUuid": "46551b43_fa87ddc0",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9305df1e_47e13637",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 431,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T08:53:02Z",
      "side": 1,
      "message": "Really? I expected that if we pass |entries| of Array\u003c!FileEntry\u003e in AsyncUtil.forEach() the |entry| is !FileEntry.\nCould you try casting |sourceEntries| to Array\u003c!FileEntry\u003e in tryImportScanEntries_ and see if the compile error goes?\nIf it doesn\u0027t work, just one assert(entry) in the beginning of importOne_ will work.",
      "range": {
        "startLine": 430,
        "startChar": 49,
        "endLine": 431,
        "endChar": 71
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb4f91f8_a399a827",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 431,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-27T09:11:32Z",
      "side": 1,
      "message": "closure_compiler complains about both approaches.\n1. The signature that AsyncUtil.forEach requires: https://cs.chromium.org/chromium/src/ui/file_manager/file_manager/common/js/async_util.js?l\u003d18\u0026rcl\u003d29b4eb1337618fba084123e89444875775206244\n2. I have tried having just one assert at the beginning, and closure_compiler complained, so I put one into each function call.",
      "parentUuid": "9305df1e_47e13637",
      "range": {
        "startLine": 430,
        "startChar": 49,
        "endLine": 431,
        "endChar": 71
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "653aa348_59f576b9",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 431,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T10:36:41Z",
      "side": 1,
      "message": "\"T\" can be non-nullable type like !FileEntry.\nCould you try typing {!FileEntry} for |entry| in line #430 and {Array\u003c!FileEntry\u003e} for |all| in line #433?",
      "parentUuid": "bb4f91f8_a399a827",
      "range": {
        "startLine": 430,
        "startChar": 49,
        "endLine": 431,
        "endChar": 71
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a597a50f_15b09b25",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 431,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-28T06:10:58Z",
      "side": 1,
      "message": "I don\u0027t know what I missed last time I tried this, but this time, it did work!",
      "parentUuid": "653aa348_59f576b9",
      "range": {
        "startLine": 430,
        "startChar": 49,
        "endLine": 431,
        "endChar": 71
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e09a165_cfef96de",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 462,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T08:53:02Z",
      "side": 1,
      "message": "this \u0027(\u0027 and \u0027)\u0027 in #469 look redundant.",
      "range": {
        "startLine": 462,
        "startChar": 13,
        "endLine": 462,
        "endChar": 14
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4cfd0a5_c7a8d5a2",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 462,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-27T09:11:32Z",
      "side": 1,
      "message": "Again, it is closure_compiler that made me add them: it was something about that @param comment not being attached to a function and whether some paranthesis are missing..",
      "parentUuid": "8e09a165_cfef96de",
      "range": {
        "startLine": 462,
        "startChar": 13,
        "endLine": 462,
        "endChar": 14
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a891fc57_c7eaf132",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 467,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T08:53:02Z",
      "side": 1,
      "message": "We should retry copy operations only when it is due to insufficient disk space.\nIf passing the reason from backend to frontend is done separately, could you leave a TODO comment and/or file a bug?",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3aa03a6_d5c4c74f",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 467,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-27T09:11:32Z",
      "side": 1,
      "message": "Yep - see my comment discussion with oka@ on PS 5 (I think). Who should I assign it to? Since this is my last week.",
      "parentUuid": "a891fc57_c7eaf132",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16e72de0_9727f76e",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 467,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T10:36:41Z",
      "side": 1,
      "message": "Leaving TODO with asignee:oka@ SGTM. Thanks!",
      "parentUuid": "f3aa03a6_d5c4c74f",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "25957576_a10da7dd",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler.js",
        "patchSetId": 7
      },
      "lineNbr": 467,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-28T06:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "16e72de0_9727f76e",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0a66f227_34311cb8",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler_unittest.html",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T08:53:02Z",
      "side": 1,
      "message": "Do you need the real DriveSyncHandler even when you have MockDriveSyncHandler?",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13f08222_d02e59a5",
        "filename": "ui/file_manager/file_manager/background/js/media_import_handler_unittest.html",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-27T09:11:32Z",
      "side": 1,
      "message": "Yes, because of DriveSyncHandler.COMPLETED_EVENT.",
      "parentUuid": "0a66f227_34311cb8",
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9223692f_bdb3a812",
        "filename": "ui/file_manager/file_manager/common/js/progress_center_common.js",
        "patchSetId": 7
      },
      "lineNbr": 56,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-11-27T08:53:02Z",
      "side": 1,
      "message": "I prefer CLOUD_IMPORT if it is used only in cloud import.",
      "range": {
        "startLine": 56,
        "startChar": 2,
        "endLine": 56,
        "endChar": 8
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19a66915_040c6fd1",
        "filename": "ui/file_manager/file_manager/common/js/progress_center_common.js",
        "patchSetId": 7
      },
      "lineNbr": 56,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-11-27T09:11:32Z",
      "side": 1,
      "message": "Actually, it was decided to remove it for now (see comments in PS 5) - I think I forgot this occurrence, let me fix it!",
      "parentUuid": "9223692f_bdb3a812",
      "range": {
        "startLine": 56,
        "startChar": 2,
        "endLine": 56,
        "endChar": 8
      },
      "revId": "7532ee422235e704a4749e1183ed68fdcd2da1ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}