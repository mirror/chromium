{
  "comments": [
    {
      "key": {
        "uuid": "0188a136_af1058ac",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.cc",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Optional: would it make sense to own the task tracker within this object? In the end the weakptr below has an overlapping goal. I\u0027m not sure how expensive it can be to construct and destruct these trackers.",
      "range": {
        "startLine": 27,
        "startChar": 1,
        "endLine": 27,
        "endChar": 2
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec70195a_74141adf",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.cc",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "What\u0027s the reason for two-step initialization? Can\u0027t you make this a private function and call it from the constructor?",
      "range": {
        "startLine": 27,
        "startChar": 7,
        "endLine": 27,
        "endChar": 32
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "808a95c4_5411626e",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.cc",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "I decided to keep the task tracker from the TopSitesImpl, since that\u0027s what the DefaultTopSitesProvider also uses.",
      "parentUuid": "0188a136_af1058ac",
      "range": {
        "startLine": 27,
        "startChar": 1,
        "endLine": 27,
        "endChar": 2
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf4b1fc4_50ea0f25",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.cc",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "This wasn\u0027t really initialization - it\u0027s the object doing work - and it didn\u0027t feel right having it in the constructor.",
      "parentUuid": "ec70195a_74141adf",
      "range": {
        "startLine": 27,
        "startChar": 7,
        "endLine": 27,
        "endChar": 32
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3431530c_3056fd43",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.cc",
        "patchSetId": 9
      },
      "lineNbr": 52,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-10-16T08:02:14Z",
      "side": 1,
      "message": "nitty nit: NumURLs, to match the capitalization of AddURL",
      "range": {
        "startLine": 52,
        "startChar": 6,
        "endLine": 52,
        "endChar": 13
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "630af677_3b878dce",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.cc",
        "patchSetId": 9
      },
      "lineNbr": 52,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3431530c_3056fd43",
      "range": {
        "startLine": 52,
        "startChar": 6,
        "endLine": 52,
        "endChar": 13
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9da3609c_07710e35",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.h",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Unused?",
      "range": {
        "startLine": 12,
        "startChar": 33,
        "endLine": 12,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b46ef00b_03824b4b",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider.h",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9da3609c_07710e35",
      "range": {
        "startLine": 12,
        "startChar": 33,
        "endLine": 12,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c3336fa_e75ac467",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 33,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Optional: it seems to me that the main purpose of this class is to wait. Hence, and analogously to other test classes, I\u0027d name it xxxWaiter, possibly TopSitesProviderWaiter.",
      "range": {
        "startLine": 33,
        "startChar": 21,
        "endLine": 33,
        "endChar": 22
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97c6d029_a2059469",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 33,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c3336fa_e75ac467",
      "range": {
        "startLine": 33,
        "startChar": 21,
        "endLine": 33,
        "endChar": 22
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f12f4fee_c1048e2d",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-10-16T08:02:14Z",
      "side": 1,
      "message": "I think expected_calls is always equal to the number of calls to QueryTopSites, right? Then it doesn\u0027t need to be passed in. Just initialize to 0, and increment it in QueryTopSites. Or am I missing something?",
      "range": {
        "startLine": 36,
        "startChar": 22,
        "endLine": 36,
        "endChar": 36
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dc29f10_83507b4c",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Is this parameter really needed, or is it always the number of calls to this-\u003eQueryTopSites() from the test? Also, if it\u0027s the latter, consider using BarrierClosure within Wait(), together with QuitClosure.",
      "range": {
        "startLine": 36,
        "startChar": 37,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98cf6c5c_e04bf74a",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9dc29f10_83507b4c",
      "range": {
        "startLine": 36,
        "startChar": 37,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3e492555_375dec69",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "We only want to quit the run loop once we have finished |expected_calls|. When we repeatedly call QueryTopSites(), we\u0027re not guaranteed that the first call won\u0027t still be outstanding when the completion callback is run (which would then exit early).\n\nI\u0027ve migrated this to a barrier closure to make it clearer.",
      "parentUuid": "f12f4fee_c1048e2d",
      "range": {
        "startLine": 36,
        "startChar": 22,
        "endLine": 36,
        "endChar": 36
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce078836_3a49c92a",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T09:53:21Z",
      "side": 1,
      "message": "I think this issue doesn\u0027t exist because the callback will not be called until the runloop is called within Wait(), so it\u0027s perfectly fine to document that Wait() will block until a response is received for every preceding call to QueryTopSites(). Am I missing something?",
      "parentUuid": "3e492555_375dec69",
      "range": {
        "startLine": 36,
        "startChar": 22,
        "endLine": 36,
        "endChar": 36
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b295102_2b821287",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T23:16:39Z",
      "side": 1,
      "message": "Doing it this way crashes when we get no URLs from site engagement, because no queries to the history service are issued and we run the callback synchronously (i.e. before Wait() is called and the barrier closure initialized).",
      "parentUuid": "ce078836_3a49c92a",
      "range": {
        "startLine": 36,
        "startChar": 22,
        "endLine": 36,
        "endChar": 36
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b2422dd_b4408edd",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 53,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "How about exposing a vector of MostVisitedURL? You can always use custom matchers like https://cs.chromium.org/chromium/src/components/ntp_tiles/most_visited_sites_unittest.cc?q\u003dmost_visited_sites_unittest.cc\u0026sq\u003dpackage:chromium\u0026dr\u0026l\u003d90",
      "range": {
        "startLine": 53,
        "startChar": 63,
        "endLine": 53,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c97ce3f_d5af94c8",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 53,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "That\u0027s a *lot* of refactoring in this test file for possibly not much gain? Do you feel really strongly about it?",
      "parentUuid": "0b2422dd_b4408edd",
      "range": {
        "startLine": 53,
        "startChar": 63,
        "endLine": 53,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31cfaf90_e6eca60d",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 124,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Is there any test that doesn\u0027t call this exactly once? If no, please remove function and initialize member variable in constructor.",
      "range": {
        "startLine": 124,
        "startChar": 68,
        "endLine": 124,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3fa42dc_4f5a714c",
        "filename": "chrome/browser/engagement/site_engagement_top_sites_provider_unittest.cc",
        "patchSetId": 9
      },
      "lineNbr": 124,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "31cfaf90_e6eca60d",
      "range": {
        "startLine": 124,
        "startChar": 68,
        "endLine": 124,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "253ae485_a67d4bee",
        "filename": "chrome/browser/history/top_sites_factory.cc",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Can you please add a comment referencing the experimental feature? I might be useful in case there\u0027s cleanup work in the future.",
      "range": {
        "startLine": 139,
        "startChar": 57,
        "endLine": 139,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "395bd235_24c210ee",
        "filename": "chrome/browser/history/top_sites_factory.cc",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "253ae485_a67d4bee",
      "range": {
        "startLine": 139,
        "startChar": 57,
        "endLine": 139,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdcccfab_794c3217",
        "filename": "components/history/core/browser/history_types.cc",
        "patchSetId": 9
      },
      "lineNbr": 207,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Nit: s/url/URL/. Similar occurrences exist.",
      "range": {
        "startLine": 207,
        "startChar": 54,
        "endLine": 207,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e587389e_0050d230",
        "filename": "components/history/core/browser/history_types.cc",
        "patchSetId": 9
      },
      "lineNbr": 207,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cdcccfab_794c3217",
      "range": {
        "startLine": 207,
        "startChar": 54,
        "endLine": 207,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9950299_c6a79489",
        "filename": "components/history/core/browser/history_types.h",
        "patchSetId": 9
      },
      "lineNbr": 317,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-16T08:40:07Z",
      "side": 1,
      "message": "Please add documentation and move up before the member variables as per style guide.\n\nOptionally, I suggest renaming s/redirects_from/preceding_redirects/ or simply |redirects|, because the concept \u0027from\u0027 is IMO a bit misleading (and used in other History APIs in a different context and purpose).",
      "range": {
        "startLine": 317,
        "startChar": 57,
        "endLine": 317,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8447b98b_d2cf4740",
        "filename": "components/history/core/browser/history_types.h",
        "patchSetId": 9
      },
      "lineNbr": 317,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-16T09:28:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a9950299_c6a79489",
      "range": {
        "startLine": 317,
        "startChar": 57,
        "endLine": 317,
        "endChar": 0
      },
      "revId": "4c3b49252fe044756d3ca4c92b62f6d6458bbee2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}