{
  "comments": [
    {
      "key": {
        "uuid": "2fb6255c_4a4bc1fc",
        "filename": "chrome/browser/ui/startup/startup_browser_creator_impl.cc",
        "patchSetId": 9
      },
      "lineNbr": 191,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-10-04T07:59:43Z",
      "side": 1,
      "message": "I\u0027m curious about this. SPARSE_SLOWLY still seems like the wrong thing to me here since we\u0027re logging values in an enum. mpearson: If this is correct (and not just \"it\u0027ll work\"), would you please update the guidance in https://chromium.googlesource.com/chromium/src/+/de5e4bf1c32c92265c69735a240d46ee198e3a72/tools/metrics/histograms/README.md#Enum-Histograms and https://chromium.googlesource.com/chromium/src/+/de5e4bf1c32c92265c69735a240d46ee198e3a72/tools/metrics/histograms/README.md#When-To-Use-Sparse-Histograms to make it more clear when to use one over the other? For example, maybe sparse is better when only a single value will be logged for the lifetime of the process. Thanks.",
      "revId": "742b35eda68f5798857b0dcaec84efd2092febf7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6095ae56_c665f965",
        "filename": "chrome/browser/ui/startup/startup_browser_creator_impl.cc",
        "patchSetId": 9
      },
      "lineNbr": 191,
      "author": {
        "id": 1001310
      },
      "writtenOn": "2017-10-04T18:39:42Z",
      "side": 1,
      "message": "\u003e I\u0027m curious about this. SPARSE_SLOWLY still seems like the wrong thing to me here since we\u0027re logging values in an enum. mpearson: If this is correct (and not just \"it\u0027ll work\"), would you please update the guidance in https://chromium.googlesource.com/chromium/src/+/de5e4bf1c32c92265c69735a240d46ee198e3a72/tools/metrics/histograms/README.md#Enum-Histograms and https://chromium.googlesource.com/chromium/src/+/de5e4bf1c32c92265c69735a240d46ee198e3a72/tools/metrics/histograms/README.md#When-To-Use-Sparse-Histograms to make it more clear when to use one over the other? \n\nI\u0027ll update the docs to make it clear that enums can be used with sparse histograms, and that sometimes it\u0027s a fine option.\n\n\u003e For example, maybe sparse is better when only a single value will be logged for\n\u003e the lifetime of the process. Thanks.\n\nSparse histograms aren\u0027t necessarily preferred.  For example, regular histograms nowadays if I recall correctly don\u0027t instantiate their buckets until we have two distinct values emitted to them.  So in a case like this where only one value is emitted, I believe the enum histogram and the sparse histogram would have the same memory impact (though different cpu impacts, which is trivial).  But for two values with a huge enum, sparse histograms might be a good choice.",
      "parentUuid": "2fb6255c_4a4bc1fc",
      "revId": "742b35eda68f5798857b0dcaec84efd2092febf7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}