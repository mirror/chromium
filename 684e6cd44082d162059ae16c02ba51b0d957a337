{
  "comments": [
    {
      "key": {
        "uuid": "08b7f8c8_22bae70e",
        "filename": "content/browser/frame_host/render_frame_host_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 3012,
      "author": {
        "id": 1115688
      },
      "writtenOn": "2017-08-22T10:09:12Z",
      "side": 1,
      "message": "this proxy should be used only by GenericSenor implementation",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e716608e_9bcf6e6b",
        "filename": "content/browser/frame_host/render_frame_host_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 3012,
      "author": {
        "id": 1149144
      },
      "writtenOn": "2017-08-23T00:03:35Z",
      "side": 1,
      "message": "The DeviceMotion event needs to be able to directly use three sensors without permission check and generic sensor feature flag.",
      "parentUuid": "08b7f8c8_22bae70e",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4508853_47bc3a9d",
        "filename": "content/browser/frame_host/render_frame_host_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 3012,
      "author": {
        "id": 1149144
      },
      "writtenOn": "2017-08-23T03:28:57Z",
      "side": 1,
      "message": "The SensorProviderProxyImpl provides sensors that are needed to implement DeviceMotion event, and since the DeviceMotion event is an already-shipped feature that has existed for a while, it is OK to add SensorProviderProxyImpl to the interface here.",
      "parentUuid": "e716608e_9bcf6e6b",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0dc8b2f_eb10689d",
        "filename": "content/browser/generic_sensor/sensor_provider_proxy_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 63,
      "author": {
        "id": 1115688
      },
      "writtenOn": "2017-08-22T10:09:12Z",
      "side": 1,
      "message": "Instead, DeviceMotion implementation could just directly access SensorProvider, thus obviating permissions check.",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c14a6dd_33325bf8",
        "filename": "content/browser/generic_sensor/sensor_provider_proxy_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 63,
      "author": {
        "id": 1149144
      },
      "writtenOn": "2017-08-23T00:03:35Z",
      "side": 1,
      "message": "Tried that, the SensorProvider can not be accessed directly since it is not added in the //content/browser/frame_host/render_frame_host_impl.cc",
      "parentUuid": "a0dc8b2f_eb10689d",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d3d3369_7619f2f5",
        "filename": "content/browser/generic_sensor/sensor_provider_proxy_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 63,
      "author": {
        "id": 1149144
      },
      "writtenOn": "2017-08-23T03:28:57Z",
      "side": 1,
      "message": "Update: the changes in this file have been removed. So no change to this file.",
      "parentUuid": "5c14a6dd_33325bf8",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "655f0ed0_e73c07c2",
        "filename": "content/browser/generic_sensor/sensor_provider_proxy_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 63,
      "author": {
        "id": 1115688
      },
      "writtenOn": "2017-08-23T12:35:52Z",
      "side": 1,
      "message": "I think DeviceMotion/Orientation implementation should not affect permissions\nmanagement for Generic Sensor API: for example, what if in future we need to\ndeny access to Accelerometer or Gyroscope but keep DeviceMotion events working?\n\nI see the following alternatives:\n1) Renderer part of DeviceMotion implementation somehow accesses SensorProvider directly from device service without passing through RenderFrameHostImpl.\nNote, one SensorProvider instance can be shared between several frames for DeviceMotion/Orientation since in this case sensor readings are always delivered at the same rate for all clients (unlike Generic Sensor API).\n\n2) It is possible to create and register an analogue of SensorProviderProxyImpl that will return only the sensor classes involved in DeviceMotion/Orientation.\n\n3) Simultaneously register SensorProvider for DeviceMotion/Orientation and SensorProviderProxyImpl (by different name) for Generic Sensor",
      "parentUuid": "9d3d3369_7619f2f5",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18ea031f_e0fb5e80",
        "filename": "content/browser/generic_sensor/sensor_provider_proxy_impl.cc",
        "patchSetId": 7
      },
      "lineNbr": 63,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-08-23T17:01:16Z",
      "side": 1,
      "message": "Mojo doesn\u0027t allow registering the same interface twice so we would have to provide a new interface, probably one with a BindSensorProviderForLegacySensors and BindSensorProviderForGenericSensors or something similarly awkward.\n\nGiven that these new permissions default to allow precisely because we are providing the same data through the old and new APIs I don\u0027t see any value in bypassing the permission check. In fact, if we did bypass the permission check that would provide a reverse incentive for developers to continue to use the old API because it doesn\u0027t require permission.\n\nOver the long term the data provided by DeviceOrientation Events should be the same as the data provided by Generic Sensors when only default permissions are granted.",
      "parentUuid": "655f0ed0_e73c07c2",
      "revId": "684e6cd44082d162059ae16c02ba51b0d957a337",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}