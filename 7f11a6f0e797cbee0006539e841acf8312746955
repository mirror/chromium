{
  "comments": [
    {
      "key": {
        "uuid": "6935b7c1_e0a0a9b9",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 3741,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "minor nit: Why ii?  I don\u0027t see another i in scope.",
      "range": {
        "startLine": 3741,
        "startChar": 14,
        "endLine": 3741,
        "endChar": 16
      },
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fab4db6_e8260df2",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 3741,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e minor nit: Why ii?  I don\u0027t see another i in scope.\n\nchanged to i :p",
      "parentUuid": "6935b7c1_e0a0a9b9",
      "range": {
        "startLine": 3741,
        "startChar": 14,
        "endLine": 3741,
        "endChar": 16
      },
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8ce76bc_67f83471",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 3742,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Let\u0027s DCHECK that each value in the array can\u0027t be negative, to catch any other bookkeeping bugs we might have (like the DCHECKs you have above).",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "841f760d_a6b2a145",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 3742,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a8ce76bc_67f83471",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "955ff50a_56b3e788",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 3743,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "s/Most highest/Highest/",
      "range": {
        "startLine": 3743,
        "startChar": 23,
        "endLine": 3743,
        "endChar": 35
      },
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2514ce77_2d29043d",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 3743,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "955ff50a_56b3e788",
      "range": {
        "startLine": 3743,
        "startChar": 23,
        "endLine": 3743,
        "endChar": 35
      },
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d7ddf54_4d60bba5",
        "filename": "content/browser/renderer_host/render_process_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 242,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Let\u0027s add a comment here.",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2dc7c6dd_fdc8a843",
        "filename": "content/browser/renderer_host/render_process_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 242,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6d7ddf54_4d60bba5",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d10c1275_c3256761",
        "filename": "content/browser/renderer_host/render_process_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 587,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Needs a comment, like:\nTracks the number of widgets in this process that currently have each possible ChildProcessImportance value.",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "011fcad8_7d55b126",
        "filename": "content/browser/renderer_host/render_process_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 587,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d10c1275_c3256761",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b8c4c2d_e200cd84",
        "filename": "content/browser/renderer_host/render_process_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 590,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Rephrase: Highest importance of any widget in the process.",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f5db856_a033c81a",
        "filename": "content/browser/renderer_host/render_process_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 590,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b8c4c2d_e200cd84",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "00fb5600_aa56fee2",
        "filename": "content/browser/renderer_host/render_widget_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 683,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "This is not a safe cast in unit tests, unfortunately.  MockRenderProcessHost is not a RenderProcessHostImpl.  You\u0027ll probably need to define this on RenderProcessHost (even though it\u0027s not used outside content).",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96152769_65df09c4",
        "filename": "content/browser/renderer_host/render_widget_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 683,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e This is not a safe cast in unit tests, unfortunately.  MockRenderProcessHost is not a RenderProcessHostImpl.  You\u0027ll probably need to define this on RenderProcessHost (even though it\u0027s not used outside content).\n\nDone, although had to update DEPS to allow public to include the importance.h header. Should the header just move to public..?",
      "parentUuid": "00fb5600_aa56fee2",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99dd0723_9655ffe9",
        "filename": "content/browser/renderer_host/render_widget_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 683,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-11T22:28:50Z",
      "side": 1,
      "message": "\u003e \u003e This is not a safe cast in unit tests, unfortunately.  MockRenderProcessHost is not a RenderProcessHostImpl.  You\u0027ll probably need to define this on RenderProcessHost (even though it\u0027s not used outside content).\n\u003e \n\u003e Done, although had to update DEPS to allow public to include the importance.h header. Should the header just move to public..?\n\nAh, shoot.  We shouldn\u0027t change DEPS for this, and I don\u0027t think we should expose ChildProcessImportance itself without having uses of it outside content.  Can you forward declare the enum class in the public RenderProcessHost file?  It seems to compile for me locally.  If not, we\u0027ll have to find another way around it.\n\n(MockRenderProcessHost is pretty frustrating for this type of thing.)",
      "parentUuid": "96152769_65df09c4",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da31b102_dfbfff4d",
        "filename": "content/browser/renderer_host/render_widget_host_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 683,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-14T14:45:03Z",
      "side": 1,
      "message": "\u003e \u003e \u003e This is not a safe cast in unit tests, unfortunately.  MockRenderProcessHost is not a RenderProcessHostImpl.  You\u0027ll probably need to define this on RenderProcessHost (even though it\u0027s not used outside content).\n\u003e \u003e \n\u003e \u003e Done, although had to update DEPS to allow public to include the importance.h header. Should the header just move to public..?\n\u003e \n\u003e Ah, shoot.  We shouldn\u0027t change DEPS for this, and I don\u0027t think we should expose ChildProcessImportance itself without having uses of it outside content.  Can you forward declare the enum class in the public RenderProcessHost file?  It seems to compile for me locally.  If not, we\u0027ll have to find another way around it.\n\u003e \n\u003e (MockRenderProcessHost is pretty frustrating for this type of thing.)\n\nOh I didn\u0027t know forward declaring c++11 enum class is possible now. Done",
      "parentUuid": "99dd0723_9655ffe9",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e12c2d3a_6f54a1bc",
        "filename": "content/browser/renderer_host/render_widget_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 279,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Let\u0027s add a comment similar to below, indicating that RenderProcessHost tracks this across all of its widgets.",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bace92f4_decb0d95",
        "filename": "content/browser/renderer_host/render_widget_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 279,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e12c2d3a_6f54a1bc",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b488847_89686adb",
        "filename": "content/browser/renderer_host/render_widget_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 280,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "nit: Since this is not public and trivial, it should be named importance() and can be defined inline (similar to is_hidden() below).",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37da4f7f_691b913d",
        "filename": "content/browser/renderer_host/render_widget_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 280,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2b488847_89686adb",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b9b6dbf_9665c207",
        "filename": "content/browser/renderer_host/render_widget_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 807,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Add a comment like: Tracks the process importance that this widget currently requires, for informing RenderProcessHost.",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b829216_803d88b6",
        "filename": "content/browser/renderer_host/render_widget_host_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 807,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0b9b6dbf_9665c207",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c991fdc9_575b9136",
        "filename": "content/browser/renderer_host/render_widget_host_view_base.h",
        "patchSetId": 12
      },
      "lineNbr": 166,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "I think we can skip changes to this class by just getting to the widget directly in WebContentsImpl.  (Also, I\u0027m not sure it needed to be virtual.)",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f736312_2293c654",
        "filename": "content/browser/renderer_host/render_widget_host_view_base.h",
        "patchSetId": 12
      },
      "lineNbr": 166,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c991fdc9_575b9136",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "521c6876_8c013dd9",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1543,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Can we assume the main frame\u0027s widget is not out of date, so that we can avoid storing importance_ on WebContents itself?  It just seems like we\u0027re storing it in a lot of places.",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72607d8b_c85c0dbc",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1543,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e Can we assume the main frame\u0027s widget is not out of date, so that we can avoid storing importance_ on WebContents itself?  It just seems like we\u0027re storing it in a lot of places.\n\nI think the only edge case with that and using NotifyFrameSwapped is that the handling for the root frame/widget swap needs to be a bit different, since GetMainFrame frame now. So made the change in NotifySwappedFromRenderManager instead.\n\nActually looking at NotifySwappedFromRenderManager, is it possible to have no root host, since there\u0027s a null check for null old root host?",
      "parentUuid": "521c6876_8c013dd9",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e22938a0_06e2bf9e",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1549,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "I\u0027m not sure this needs to be its own method, given my comment below in NotifyViewSwapped.  Maybe it can just be part of SetImportance?",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36405e18_68e303f3",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1549,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e I\u0027m not sure this needs to be its own method, given my comment below in NotifyViewSwapped.  Maybe it can just be part of SetImportance?\n\nYes, done",
      "parentUuid": "e22938a0_06e2bf9e",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5a86157_cf2d78c5",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1551,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Can we just call view-\u003eGetRenderWidgetHost() and cast it to RenderWidgetHostImpl here, so we can call SetImportance on it?",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6ce9bcf_de408df5",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1551,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e Can we just call view-\u003eGetRenderWidgetHost() and cast it to RenderWidgetHostImpl here, so we can call SetImportance on it?\n\nDone, but I also added a null check because view_base used to do a null check, which was copied from other places in view_base. Not sure if it\u0027s actually needed",
      "parentUuid": "b5a86157_cf2d78c5",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4e2bdc0_fc2b0213",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1551,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-11T22:28:50Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d6ce9bcf_de408df5",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c43ddc9_1053663d",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1552,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Can you add a TODO to notify all the inner WebContents as well, if this importance value ever gets used on a platform other than Android?  (That way GuestViews like Chrome Apps \u003cwebview\u003e will inherit the value as well.)",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f073b8be_78f8b82c",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1552,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e Can you add a TODO to notify all the inner WebContents as well, if this importance value ever gets used on a platform other than Android?  (That way GuestViews like Chrome Apps \u003cwebview\u003e will inherit the value as well.)\n\nDone\n\nThis also reminds me about interstitials. Looks like GetRenderWidgetHostViewsInTree doesn\u0027t do the right thing when interstitial is showing, ie don\u0027t want to ignore the page in the background in that case. So inlined and rewrote it.\n\nHmm, would it be easier to just iterate over created_widgets_ instead?",
      "parentUuid": "6c43ddc9_1053663d",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c72e16bd_aa149dce",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 1552,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-11T22:28:50Z",
      "side": 1,
      "message": "\u003e \u003e Can you add a TODO to notify all the inner WebContents as well, if this importance value ever gets used on a platform other than Android?  (That way GuestViews like Chrome Apps \u003cwebview\u003e will inherit the value as well.)\n\u003e \n\u003e Done\n\u003e \n\u003e This also reminds me about interstitials. Looks like GetRenderWidgetHostViewsInTree doesn\u0027t do the right thing when interstitial is showing, ie don\u0027t want to ignore the page in the background in that case. So inlined and rewrote it.\n\u003e \n\u003e Hmm, would it be easier to just iterate over created_widgets_ instead?\n\nI noticed created_widgets_ when looking over the CL earlier and decided it wasn\u0027t a good fit-- that seems to include widgets like select menus, etc, and things that may outlive the tab.  We probably want to limit the concept to things in the frame tree, right?  (And for that matter, I\u0027m not sure whether created_widgets_ includes those, since it\u0027s not obvious at first glance.)",
      "parentUuid": "f073b8be_78f8b82c",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "affe38ca_75f12f6f",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 4448,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "NotifyViewSwapped isn\u0027t sufficient-- it won\u0027t catch process swaps in subframes.  If we want to update the importance of the widget after a cross-process navigation in a frame, then we should do it in NotifyFrameSwapped below.\n\nIt also seems like we should only need to tell the new_host\u0027s widget about the current importance value (which we could grab from the old_host).  I don\u0027t think we need to update the whole tree here, since it won\u0027t have changed.  Plus, any subframes that were destroyed by the navigation would have their widgets deleted and RPH would react accordingly.",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f8335a3_6e0e0581",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 4448,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e NotifyViewSwapped isn\u0027t sufficient-- it won\u0027t catch process swaps in subframes.  If we want to update the importance of the widget after a cross-process navigation in a frame, then we should do it in NotifyFrameSwapped below.\n\u003e \n\u003e It also seems like we should only need to tell the new_host\u0027s widget about the current importance value (which we could grab from the old_host).  I don\u0027t think we need to update the whole tree here, since it won\u0027t have changed.  Plus, any subframes that were destroyed by the navigation would have their widgets deleted and RPH would react accordingly.\n\nDone, more or less",
      "parentUuid": "affe38ca_75f12f6f",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4397c897_67d8114b",
        "filename": "content/browser/web_contents/web_contents_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 303,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "nit: If this is",
      "range": {
        "startLine": 303,
        "startChar": 34,
        "endLine": 303,
        "endChar": 38
      },
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab632624_54e32578",
        "filename": "content/browser/web_contents/web_contents_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 303,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4397c897_67d8114b",
      "range": {
        "startLine": 303,
        "startChar": 34,
        "endLine": 303,
        "endChar": 38
      },
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45e7e5ca_e97282dc",
        "filename": "content/browser/web_contents_importance.h",
        "patchSetId": 12
      },
      "lineNbr": 11,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Is there some reference to what values are supported that you can link to?",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08433053_10b54c85",
        "filename": "content/browser/web_contents_importance.h",
        "patchSetId": 12
      },
      "lineNbr": 11,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "\u003e Is there some reference to what values are supported that you can link to?\n\nThese are roughly the words we use in chrome code to describe the service bindings from android sdk.\nNormal means no hint from the importance subsystem.\nModerate means add the binding with no special flags set\nImportant means the binding with BIND_IMPORTANT flag set: https://developer.android.com/reference/android/content/Context.html#BIND_IMPORTANT\n\nAndroid uses these hints when killing processes to free memory\n\nSince this is cross-platform code, it\u0027s totally legit to give these enum values more intuitive names/descriptions, if you have better suggestions. For the same reason, I don\u0027t really want to actually link to android docs.",
      "parentUuid": "45e7e5ca_e97282dc",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5371a8f4_47e63065",
        "filename": "content/browser/web_contents_importance.h",
        "patchSetId": 12
      },
      "lineNbr": 11,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-11T22:28:50Z",
      "side": 1,
      "message": "\u003e \u003e Is there some reference to what values are supported that you can link to?\n\u003e \n\u003e These are roughly the words we use in chrome code to describe the service bindings from android sdk.\n\u003e Normal means no hint from the importance subsystem.\n\u003e Moderate means add the binding with no special flags set\n\u003e Important means the binding with BIND_IMPORTANT flag set: https://developer.android.com/reference/android/content/Context.html#BIND_IMPORTANT\n\u003e \n\u003e Android uses these hints when killing processes to free memory\n\u003e \n\u003e Since this is cross-platform code, it\u0027s totally legit to give these enum values more intuitive names/descriptions, if you have better suggestions. For the same reason, I don\u0027t really want to actually link to android docs.\n\nOk, I suppose we can get by without mentioning it in the code.  Maybe you can include that link in the CL description, to give context to Chromium developers who aren\u0027t familiar with Android?",
      "parentUuid": "08433053_10b54c85",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c0cb5c3_5843f53a",
        "filename": "content/browser/web_contents_importance.h",
        "patchSetId": 12
      },
      "lineNbr": 19,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "We should probably call this something more like ChildProcessImportance.  That fits better in ChildProcessLauncher and RenderProcessHost (which don\u0027t know about WebContents) and with this file not being in the content/browser/web_contents/ directory.  It\u0027s also a reasonable thing for an API on WebContents, which would be expected to iterate over all the processes in the WebContents to update them (as you\u0027re doing).",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f374173_9ecaf997",
        "filename": "content/browser/web_contents_importance.h",
        "patchSetId": 12
      },
      "lineNbr": 19,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9c0cb5c3_5843f53a",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f23d61f3_adba07fc",
        "filename": "content/browser/web_contents_importance.h",
        "patchSetId": 12
      },
      "lineNbr": 24,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-10T23:25:52Z",
      "side": 1,
      "message": "Can you distinguish this one with a comment to make it clear it\u0027s not a real value (e.g., \"Placeholder to represent the number of possible values.\")?",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a482eb3_96aeff32",
        "filename": "content/browser/web_contents_importance.h",
        "patchSetId": 12
      },
      "lineNbr": 24,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-11T15:33:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f23d61f3_adba07fc",
      "revId": "7f11a6f0e797cbee0006539e841acf8312746955",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}