{
  "comments": [
    {
      "key": {
        "uuid": "c4b67208_86a276ff",
        "filename": "chrome/browser/chromeos/platform_keys/platform_keys_nss.cc",
        "patchSetId": 7
      },
      "lineNbr": 835,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-11-28T20:11:51Z",
      "side": 1,
      "message": "Seems like this could be updated to take a CRYPTO_BUFFER rather than a base::StringPiece (perhaps as a cleanup for the future), given all of the usages extract the DER to a StringPiece.\n\nDo we have a good sense for when an API should prefer CRYPTO_BUFFER over StringPiece? They seem fairly interchangable.",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9cf1e25_baf87390",
        "filename": "chrome/browser/chromeos/platform_keys/platform_keys_nss.cc",
        "patchSetId": 7
      },
      "lineNbr": 835,
      "author": {
        "id": 1002844
      },
      "writtenOn": "2017-11-29T22:49:48Z",
      "side": 1,
      "message": "I would go the opposite way: functions should prefer to take a StringPiece (or really, a span\u003cconst uint8_t\u003e) unless they have some reason to care about crypto-buffer-ness.\n\nThe main reasons to use a CRYPTO_BUFFER are ref-counting and de-duping, but a simple parsing function like this doesn\u0027t care about either, so I think it makes more sense to just take a stringpiece or span.",
      "parentUuid": "c4b67208_86a276ff",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a207492a_79335b28",
        "filename": "chrome/browser/chromeos/platform_keys/platform_keys_nss.cc",
        "patchSetId": 7
      },
      "lineNbr": 835,
      "author": {
        "id": 1002844
      },
      "writtenOn": "2017-11-29T22:49:48Z",
      "side": 1,
      "message": "I would go the opposite way: functions should prefer to take a StringPiece (or really, a span\u003cconst uint8_t\u003e) unless they have some reason to care about crypto-buffer-ness.\n\nThe main reasons to use a CRYPTO_BUFFER are ref-counting and de-duping, but a simple parsing function like this doesn\u0027t care about either, so I think it makes more sense to just take a stringpiece or span.",
      "parentUuid": "c4b67208_86a276ff",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18232634_9cbd9db4",
        "filename": "chrome/browser/extensions/api/enterprise_platform_keys/enterprise_platform_keys_api.cc",
        "patchSetId": 7
      },
      "lineNbr": 124,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-11-28T20:11:51Z",
      "side": 1,
      "message": "I think our old call (CreateWithCopiedBuffer) was wrong, and we should have been doing base::Value(std::move(der_encoding))\n\nWith this new code, std::make_unique\u003cbase::Value\u003e(der_encoding) seems like it\u0027d suffice?",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9de627bf_6a54bba9",
        "filename": "chrome/browser/extensions/api/enterprise_platform_keys/enterprise_platform_keys_api.cc",
        "patchSetId": 7
      },
      "lineNbr": 124,
      "author": {
        "id": 1002844
      },
      "writtenOn": "2017-11-29T22:49:48Z",
      "side": 1,
      "message": "It turns out that for base::Value a string type is assumed to be UTF-8. To handle arbitrary data you need to use the (deprecated) CreateWithCopiedBuffer or the BlobStorage constructor.",
      "parentUuid": "18232634_9cbd9db4",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93d98fc6_31c69f51",
        "filename": "chrome/browser/safe_browsing/download_protection/download_protection_service.cc",
        "patchSetId": 7
      },
      "lineNbr": 349,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-11-28T20:11:51Z",
      "side": 1,
      "message": "Bah, we should fix base::SHA1HashString to use a StringPiece to avoid this spurious copy.",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc0fb1ff_cf98c203",
        "filename": "chrome/browser/safe_browsing/download_protection/download_protection_service.cc",
        "patchSetId": 7
      },
      "lineNbr": 349,
      "author": {
        "id": 1002844
      },
      "writtenOn": "2017-11-29T22:49:48Z",
      "side": 1,
      "message": "indeed. I\u0027ll do that separately.",
      "parentUuid": "93d98fc6_31c69f51",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d82bd075_33c886de",
        "filename": "content/browser/renderer_host/pepper/pepper_socket_utils.cc",
        "patchSetId": 7
      },
      "lineNbr": 130,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-11-28T20:11:51Z",
      "side": 1,
      "message": "Same remarks about base::Value(StringPiece)",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "077ce4ad_7cf0b9e4",
        "filename": "net/cert/cert_verify_proc.cc",
        "patchSetId": 7
      },
      "lineNbr": 240,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-11-28T20:11:51Z",
      "side": 1,
      "message": "Another good candidate for StringPiece -\u003e CRYPTO_BUFFER conversion",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4cb7605d_f3561b4e",
        "filename": "net/cert/x509_certificate.cc",
        "patchSetId": 7
      },
      "lineNbr": 606,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-11-28T20:11:51Z",
      "side": 1,
      "message": "It seems like this could have been CRYPTO_BUFFER converted",
      "revId": "68a2499069861e24eacd6b9c4d3056d5903d4012",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}