{
  "comments": [
    {
      "key": {
        "uuid": "c28fed18_620512de",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-11-10T07:43:55Z",
      "side": 1,
      "message": "What\u0027s the difference between Uri.parse(url).getScheme() and this except GURL uses native code? If we use Uri instead, can the test be run on Robolectric?\n\nLooks like GURLUtils.getScheme() was introduced to avoid parsing error in \"new URI()\". See https://bugs.chromium.org/p/chromium/issues/detail?id\u003d223930.",
      "range": {
        "startLine": 77,
        "startChar": 46,
        "endLine": 77,
        "endChar": 86
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "810a64c6_db3f5981",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T17:25:42Z",
      "side": 1,
      "message": "We likely need a broader discussion around handlings of schemes in java.  Ideally, we have a single path that handles everything, and I\u0027m not entirely sure which way is approved by security.\n\nIn particular, we want to expose the equivalent of:\n\nGURL::SchemeIsCryptographic\n  bool SchemeIsCryptographic() const {\n    return SchemeIs(url::kHttpsScheme) || SchemeIs(url::kWssScheme) ||\n           SchemeIs(url::kHttpsSuboriginScheme);\n  }\n\nI\u0027m all for unifying it, but this method already exists in the codebase, so I\u0027m hardpressed to say I shouldn\u0027t be using it.\n\nAdded a TODO and filed a bug.  Will happily move all the tests to pure unit tests if we can.",
      "parentUuid": "c28fed18_620512de",
      "range": {
        "startLine": 77,
        "startChar": 46,
        "endLine": 77,
        "endChar": 86
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34ef1b8b_dfe58d67",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-11-10T18:51:27Z",
      "side": 1,
      "message": "The benefit of GURLUtils.getScheme() over Uri.getScheme() might be stricter checking. In this particular case, since the URL is from GURL in the native side, it is already kind of validated.\n\nThis is indeed a broader issue, so let\u0027s leave it as is for now.",
      "parentUuid": "810a64c6_db3f5981",
      "range": {
        "startLine": 77,
        "startChar": 46,
        "endLine": 77,
        "endChar": 86
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f45d76f4_7d7ab9a0",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T18:59:21Z",
      "side": 1,
      "message": "Oh, I really want to find a path to support the same level of scheme validation in java that we have in GURL.  Having this require native to test is very said (really, I just want mockito in instrumentation tests as that would save me hundreds of lines of boilerplate).\n\nI would actually like to use Uri.parse and happily will if I can convince security.  It would make this and many other places much clearer IMO.",
      "parentUuid": "34ef1b8b_dfe58d67",
      "range": {
        "startLine": 77,
        "startChar": 46,
        "endLine": 77,
        "endChar": 86
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea0d2322_9ad52e9f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-11-10T14:00:56Z",
      "side": 1,
      "message": "Nit: given all these checks, it\u0027s not clear to me that RFHI::GetCanonicalUrlForSharing needs to check that frame_ is bound (since I would expect a main frame with a dead process to be showing the sad tab).",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 83,
        "endChar": 9
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf2a3be6_93485e1f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T17:25:42Z",
      "side": 1,
      "message": "Moved to a DCHECK(frame_) for now.",
      "parentUuid": "ea0d2322_9ad52e9f",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 83,
        "endChar": 9
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "583c4453_9c5ee4e7",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-11-10T07:43:55Z",
      "side": 1,
      "message": "nit: extract as a var to reuse? isOfflinePage() goes through JNI bridge, so doesn\u0027t look extremely cheap.",
      "range": {
        "startLine": 100,
        "startChar": 53,
        "endLine": 100,
        "endChar": 95
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "917548e8_0b2fdca9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T17:25:42Z",
      "side": 1,
      "message": "Done, but this was simply moved code.",
      "parentUuid": "583c4453_9c5ee4e7",
      "range": {
        "startLine": 100,
        "startChar": 53,
        "endLine": 100,
        "endChar": 95
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d4e76fe_80c5d025",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 153,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-11-10T07:43:55Z",
      "side": 1,
      "message": "Looks like cl format is not good at lambda expressions.",
      "range": {
        "startLine": 152,
        "startChar": 41,
        "endLine": 153,
        "endChar": 25
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "310e6346_f09b9aaf",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/share/ShareMenuActionHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 153,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T17:25:42Z",
      "side": 1,
      "message": "Reformatted like it was...although I find it to be totally unreadable in it\u0027s current state (double nested lambdas don\u0027t seem like a great win here)",
      "parentUuid": "7d4e76fe_80c5d025",
      "range": {
        "startLine": 152,
        "startChar": 41,
        "endLine": 153,
        "endChar": 25
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2cb29e0_71baaa6c",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/share/ShareMenuActionHandlerTest.java",
        "patchSetId": 4
      },
      "lineNbr": 67,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-11-10T07:43:55Z",
      "side": 1,
      "message": "Add one more with http?",
      "range": {
        "startLine": 67,
        "startChar": 23,
        "endLine": 67,
        "endChar": 28
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56705275_12ec4d5b",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/share/ShareMenuActionHandlerTest.java",
        "patchSetId": 4
      },
      "lineNbr": 67,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T17:25:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d2cb29e0_71baaa6c",
      "range": {
        "startLine": 67,
        "startChar": 23,
        "endLine": 67,
        "endChar": 28
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea252c79_4c5b6835",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/share/ShareMenuActionHandlerTest.java",
        "patchSetId": 4
      },
      "lineNbr": 97,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-11-10T07:43:55Z",
      "side": 1,
      "message": "Using otherHttpUrl might better express what you want.",
      "range": {
        "startLine": 97,
        "startChar": 83,
        "endLine": 97,
        "endChar": 90
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dac3f97_64a326a0",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/share/ShareMenuActionHandlerTest.java",
        "patchSetId": 4
      },
      "lineNbr": 97,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T17:25:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ea252c79_4c5b6835",
      "range": {
        "startLine": 97,
        "startChar": 83,
        "endLine": 97,
        "endChar": 90
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68c8d4b3_a735a091",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/share/ShareMenuActionHandlerTest.java",
        "patchSetId": 4
      },
      "lineNbr": 101,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-11-10T07:43:55Z",
      "side": 1,
      "message": "Should this be httpsUrl?",
      "range": {
        "startLine": 101,
        "startChar": 28,
        "endLine": 101,
        "endChar": 35
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f82829d9_9b7a96a4",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/share/ShareMenuActionHandlerTest.java",
        "patchSetId": 4
      },
      "lineNbr": 101,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T17:25:42Z",
      "side": 1,
      "message": "Indeed!",
      "parentUuid": "68c8d4b3_a735a091",
      "range": {
        "startLine": 101,
        "startChar": 28,
        "endLine": 101,
        "endChar": 35
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e8b22f0_9a2dc130",
        "filename": "content/browser/frame_host/render_frame_host_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 314,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T01:00:20Z",
      "side": 1,
      "message": "@dcheng, obviously I didn\u0027t look close enough at your CL as you already added this in your patch.  nvm my comment towards you.  I\u0027ll just remove this and switch to your implementation:\n\nhttps://chromium-review.googlesource.com/c/chromium/src/+/755526/2/content/renderer/render_frame_impl.h",
      "range": {
        "startLine": 314,
        "startChar": 7,
        "endLine": 314,
        "endChar": 32
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84bb9d0d_c792a13a",
        "filename": "content/browser/frame_host/render_frame_host_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 314,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-11-10T01:03:24Z",
      "side": 1,
      "message": "Wow...comedy of errors here.  That file is render_frame_impl.h, not render_frame[_host]_impl.h.\n\nI guess a general question about naming then.  It looks like most places in chromium use capital URL vs Url.  The Url formatting is actually more inline with our java formatting, but I guess we should be consistent one way or the other.",
      "parentUuid": "3e8b22f0_9a2dc130",
      "range": {
        "startLine": 314,
        "startChar": 7,
        "endLine": 314,
        "endChar": 32
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c29a680d_6be19b6b",
        "filename": "content/browser/frame_host/render_frame_host_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 314,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-11-10T14:00:56Z",
      "side": 1,
      "message": "I intentionally chose Url since that\u0027s consistent with the current C++ style recommendations, even though that means global inconsistency as things change over time. I think that\u0027s OK...",
      "parentUuid": "84bb9d0d_c792a13a",
      "range": {
        "startLine": 314,
        "startChar": 7,
        "endLine": 314,
        "endChar": 32
      },
      "revId": "18fbac8cfac5a71addaa7bbfae4a0c5e73045f39",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}