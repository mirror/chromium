{
  "comments": [
    {
      "key": {
        "uuid": "c697ef7f_dc58b01d",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 227,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "Hm, I still find this slightly confusing, with the two OnTokenValidated calls, where in this one, it wasn\u0027t actually validated...\nHow about:\n\nbase::Optional\u003cbool\u003e was_token_valid;\nif (result \u003d\u003d InstantID::SUCCESS) {\n  ...\n  was_token_valid \u003d old_token \u003d\u003d new_token;\n}\nmetrics::OnTokenValidated(was_token_valid);\n\nWDYT?\n\nI\u0027m also trying to come up with a better name for OnTokenValidated, since it\u0027s also called in places where nothing was actually validated, but I can\u0027t come up with anything... if you can\u0027t either, then it\u0027s okay as is.",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "153db907_d7c63a63",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 227,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Done.\n\nOnTokenValidation feels better, but then it is inconsistent with other functions. So I leave it as it is.",
      "parentUuid": "c697ef7f_dc58b01d",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "93e41fa5_06550e43",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 227,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T10:11:10Z",
      "side": 1,
      "message": "I guess OnTokenValidationAttempted would be more accurate, but also longer...",
      "parentUuid": "153db907_d7c63a63",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a83efad0_d49529d0",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 227,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T14:00:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "93e41fa5_06550e43",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd717942_93a66d47",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "optional: Make a\nbool contains_pushed_news \u003d it \u003d\u003d message.data.end();\nand then you can have only a single call to OnMessageReceived(contains_pushed_news).",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fb605dd_e8315753",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dd717942_93a66d47",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "33d32f5b_156d94c4",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 826,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "nit: Mention in a comment what the \"0\" bucket means?",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17935a39_a8e4a882",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 826,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "33d32f5b_156d94c4",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b43a02f_01bdff81",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 848,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "Similar here. Also, add some newlines as above?",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a7ac5c1_afc4a62f",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 848,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b43a02f_01bdff81",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06a4e8e2_41e5e236",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 950,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "nitty nit: double \".\"",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89780a9d_1a8d625d",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_gcm_app_handler_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 950,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "06a4e8e2_41e5e236",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "519585fc_b6a419c3",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_metrics.cc",
        "patchSetId": 5
      },
      "lineNbr": 31,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "optional: If these are all used just once, it\u0027s also okay to directly inline the strings below.",
      "range": {
        "startLine": 31,
        "startChar": 79,
        "endLine": 31,
        "endChar": 0
      },
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ff1e613_5cb382b8",
        "filename": "components/ntp_snippets/breaking_news/breaking_news_metrics.cc",
        "patchSetId": 5
      },
      "lineNbr": 31,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "519585fc_b6a419c3",
      "range": {
        "startLine": 31,
        "startChar": 79,
        "endLine": 31,
        "endChar": 0
      },
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9dfd978_420e4421",
        "filename": "components/ntp_snippets/breaking_news/subscription_manager_impl_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 356,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "What\u0027s \"-320\"? Is there some constant we could use instead?",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f64824d6_182ce290",
        "filename": "components/ntp_snippets/breaking_news/subscription_manager_impl_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 356,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Done.\n\nERR_INVALID_RESPONSE",
      "parentUuid": "d9dfd978_420e4421",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3387bfa8_a5579dda",
        "filename": "tools/metrics/histograms/enums.xml",
        "patchSetId": 5
      },
      "lineNbr": 5945,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "Is the \"possibly empty\" very important? IMO it\u0027s a bit confusing; what\u0027s the difference between \"no pushed news\" and \"contains empty pushed news\"?",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "774434b0_da88253f",
        "filename": "tools/metrics/histograms/enums.xml",
        "patchSetId": 5
      },
      "lineNbr": 5945,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "ACK.\n\nI just wanted to make it clear that this does not check the JSON itself.\n\nA message is just a map\u003cstring, string\u003e.\n\"no pushed news\" -\u003e map.count(\"payload\") \u003d\u003d 0\n\"contains empty pushed news -\u003e map.count(\"payload\") \u003d\u003d 1 \u0026\u0026 map[\"payload\"].empty()",
      "parentUuid": "3387bfa8_a5579dda",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca0a38a7_65bef445",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 5
      },
      "lineNbr": 46815,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "Also here, the \"possibly empty\" is confusing to me. Maybe at least put parens around it, to make clear it\u0027s not the main point?",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a25f5b3_44b30a78",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 5
      },
      "lineNbr": 46815,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "Done.\n\nI rewrote this bit.\n\nIt became:\n\nNumber of received messages and whether they contain pushed news. A\n    message contains pushed news if the payload key exists in the message. The\n    payload content is not checked at all (e.g. it may be empty). Recorded when\n    a message is received.",
      "parentUuid": "ca0a38a7_65bef445",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "32ca78de_2ae4d816",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 5
      },
      "lineNbr": 46837,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T08:58:54Z",
      "side": 1,
      "message": "I think the \"outside of a validation\" part doesn\u0027t apply anymore?",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1dfd63d_123d96bf",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 5
      },
      "lineNbr": 46837,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T10:02:18Z",
      "side": 1,
      "message": "ACK.\n\nIt still applies.\n\nI am trying to say that any successful token retrieval counts as a validation.",
      "parentUuid": "32ca78de_2ae4d816",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02b2ea45_4513905c",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 5
      },
      "lineNbr": 46837,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-28T10:11:10Z",
      "side": 1,
      "message": "When would a token be retrieved outside of a validation, if we did have a token before?\nShould this just say\nWhenever a GCM token is retrieved, records the time since the previous validation (if any)?",
      "parentUuid": "d1dfd63d_123d96bf",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "17bec3ec_0328c615",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 5
      },
      "lineNbr": 46837,
      "author": {
        "id": 1163944
      },
      "writtenOn": "2017-08-28T14:00:13Z",
      "side": 1,
      "message": "Done.\n\nAs per our discussion, I rewrote it as:\n\n    Android: Time between a token validation and the last successful token\n    retrieval from InstanceID. Recorded when InstanceID answers our token\n    request for a validation either with a token or an error. If the token was\n    never received before the validation, the metric is not recorded.",
      "parentUuid": "02b2ea45_4513905c",
      "revId": "ce1e05debb24c7ef3e6d3cbaf6b0b378093f035b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}