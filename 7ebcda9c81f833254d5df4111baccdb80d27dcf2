{
  "comments": [
    {
      "key": {
        "uuid": "f42f2273_65880cf4",
        "filename": "chrome/test/data/webui/webui_test_util.js",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1115893
      },
      "writtenOn": "2017-10-24T01:40:06Z",
      "side": 1,
      "message": "Can we preserve the file name as test_util.js? The webui_ prefix seems redundant since it already resides on webui/ folder.",
      "revId": "7ebcda9c81f833254d5df4111baccdb80d27dcf2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df8d2ce2_1771f140",
        "filename": "chrome/test/data/webui/webui_test_util.js",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-10-24T18:29:41Z",
      "side": 1,
      "message": "May I prefix with something else? I had trouble trying to workout which file was which because we have many files named test_util. I\u0027d like something unique enough that it can easily be found/identified. I\u0027m really open to what the name becomes.",
      "parentUuid": "f42f2273_65880cf4",
      "revId": "7ebcda9c81f833254d5df4111baccdb80d27dcf2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97872bbd_39d6f20c",
        "filename": "chrome/test/data/webui/webui_test_util.js",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1115893
      },
      "writtenOn": "2017-10-24T20:20:47Z",
      "side": 1,
      "message": "Does the filename itself need to be unique enough? Given that the path is already unique. For example webui/test_util.js different than webui/pdf/test_util.js and they can be easily located by searching for the path instead of searching for the filename only.\n\nThe current status (see https://cs.chromium.org/search/?q\u003dtest_util.js\u0026sq\u003dpackage:chromium\u0026type\u003dcs) seems preferable to me.\n\nAs a counter example, see https://cs.chromium.org/chromium/src/chrome/test/data/webui/extensions/, where most files are prefixed with \"extensions_\" which I find a bit redundant and cumbersome (and was planning to remove the prefixes).",
      "parentUuid": "df8d2ce2_1771f140",
      "revId": "7ebcda9c81f833254d5df4111baccdb80d27dcf2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c296e556_073892b5",
        "filename": "chrome/test/data/webui/webui_test_util.js",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-10-24T20:37:21Z",
      "side": 1,
      "message": "Sure, the path would be great! Sadly we don\u0027t get the path in an assertion stack trace. We get something like this:\n\n  at assertTrue (test_util.js:853:17)\n\nAnd I\u0027m left looking at test_util.js until I find one that has something sensible (like the assertTrue) on line 853.\n\nIf we got the full paths, that would address the issue.",
      "parentUuid": "97872bbd_39d6f20c",
      "revId": "7ebcda9c81f833254d5df4111baccdb80d27dcf2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bef8034e_28f88fc9",
        "filename": "chrome/test/data/webui/webui_test_util.js",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1115893
      },
      "writtenOn": "2017-10-24T22:08:42Z",
      "side": 1,
      "message": "Full paths would be nice, although I don\u0027t know off the top of my head how this could be fixed. The processing we do on the provided stack trace is at https://cs.chromium.org/chromium/src/chrome/test/data/webui/mocha_adapter.js?q\u003dmocha_adapter.js\u0026sq\u003dpackage:chromium\u0026dr\u003dC\u0026l\u003d38,48.\n\nAlso, I simulated an error locally and the message I am getting is as shown at https://imgur.com/a/DDRdI. Specifically the line of interest is\n\"at Object.whenAttributeIs (test_util.js:15:5)\"\n\nIMO this seems enough information to locate which test_util.js file is referred here. I\u0027d rather avoid having non-optimal (redundant) file names, to compensate for a non-optimal error stack. This approach does not scale-able. We would have to rename multiple files following the same pattern (webui/test_util.js -\u003e webui/webui_test_util.js) which I don\u0027t think is worth the churn.",
      "parentUuid": "c296e556_073892b5",
      "revId": "7ebcda9c81f833254d5df4111baccdb80d27dcf2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b62e1e66_5bc8cd0a",
        "filename": "chrome/test/data/webui/webui_test_util.js",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-10-25T05:07:55Z",
      "side": 1,
      "message": "mocha does some weird stuff with stack traces.\n\nhttps://github.com/mochajs/mocha/blob/16ffca210267b06300c9c54f886a031ea6a9030d/lib/runner.js#L234\n\nthe filter function tries to remove the CWD from the file path: https://github.com/mochajs/mocha/blob/92beda983f0cfa98541a816b6a1beaf0b64f260e/lib/utils.js#L600\n\nand I don\u0027t even know how our js2gtest importing affects what the test file names are.\n\nyou can try setting the fullTrace option in our mocha.setup() call, but that might generate a really ugly stack trace with a bunch of mocha-internal stuff. we already try to remove some of it in BrowserTestReporter.\n\nAnyway, I don\u0027t think it necessitates using parts of the path in the file name. And personally I\u0027d prefer to keep file names short. It might be different if we were using a \"webui\" namespace or had a \u003cwebui-test-util\u003e element or something, but this is the only place we use cr.define(\u0027test_util\u0027, ... which makes sense from the top-level webui test directory.",
      "parentUuid": "bef8034e_28f88fc9",
      "revId": "7ebcda9c81f833254d5df4111baccdb80d27dcf2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}