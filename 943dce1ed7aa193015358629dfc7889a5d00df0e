{
  "comments": [
    {
      "key": {
        "uuid": "1a325cb6_11733bc0",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 31,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-11-02T23:59:33Z",
      "side": 1,
      "message": "You can call WebStateObserver callbacks by simply interacting with TestWebState (see TestWebState::OnNavigationStarted() as example). There is no need to expose webStateObserverBridge for testing.",
      "range": {
        "startLine": 31,
        "startChar": 33,
        "endLine": 31,
        "endChar": 55
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c24416ab_b26984e0",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 31,
      "author": {
        "id": 1193409
      },
      "writtenOn": "2017-11-03T20:03:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1a325cb6_11733bc0",
      "range": {
        "startLine": 31,
        "startChar": 33,
        "endLine": 31,
        "endChar": 55
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36a6e9ba_87a6781b",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 34,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-11-02T23:59:33Z",
      "side": 1,
      "message": "This looks like a backdoor just for testing: http://go/unit-test-practices#public-apis\n\nHow about injecting the objects via initializer instead of creating them inside the class? This way we will not have API which is only used in tests and will be able to inject mocks for testing. Initializer will only take objects which we have to mock in tests. The rest of the objects can be created internally, but they should not be exposed as properties just for testing.",
      "range": {
        "startLine": 34,
        "startChar": 41,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62ef51d3_cef837df",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 34,
      "author": {
        "id": 1193409
      },
      "writtenOn": "2017-11-03T20:03:37Z",
      "side": 1,
      "message": "If we use init, how do we get around having to recreate a CWVAutofillController due to state restoration? The client would need to set the delegate again. I suppose we could have a proxy object that just sets the delegate on the new object. WDYT?",
      "parentUuid": "36a6e9ba_87a6781b",
      "range": {
        "startLine": 34,
        "startChar": 41,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b165b7cc_605fb7f5",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 34,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-11-03T20:24:31Z",
      "side": 1,
      "message": "Could be like this:\n\n- (CWVAutofillController*)autofillController {\n  if (!autofillController_) {\n    autofillController \u003d [[CWVAutofillController alloc] init...];\n  }\n  return autofillController_;\n}\n\n- (void)recreateWebState {\n  autofillController \u003d nil;\n}",
      "parentUuid": "62ef51d3_cef837df",
      "range": {
        "startLine": 34,
        "startChar": 41,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "97bb9ecd_66b50e2e",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 34,
      "author": {
        "id": 1193409
      },
      "writtenOn": "2017-11-03T20:31:35Z",
      "side": 1,
      "message": "I guess we can do\nid\u003cCWVAutofillControllerDelegate\u003e delegate \u003d _autofillController.delegate\n_autofillController \u003d \u003cnew one\u003e\n_autofillController.delegate \u003d delegate.\n\nThoughts?",
      "parentUuid": "b165b7cc_605fb7f5",
      "range": {
        "startLine": 34,
        "startChar": 41,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a4f1b60_101bb42a",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 34,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-11-03T23:42:03Z",
      "side": 1,
      "message": "SGTM.",
      "parentUuid": "97bb9ecd_66b50e2e",
      "range": {
        "startLine": 34,
        "startChar": 41,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7d9ad6b_bfe737f8",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
        "patchSetId": 8
      },
      "lineNbr": 34,
      "author": {
        "id": 1148810
      },
      "writtenOn": "2017-11-04T00:07:52Z",
      "side": 1,
      "message": "Sorry, I\u0027m not sure I follow where this would go. Where does the delegate come from initially, maybe store it in it\u0027s own property, otherwise _autofillController must always exist, because the delegate would be lost if it was ever nil.",
      "parentUuid": "97bb9ecd_66b50e2e",
      "range": {
        "startLine": 34,
        "startChar": 41,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2ada35a_38a6d66d",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_unittest.mm",
        "patchSetId": 8
      },
      "lineNbr": 57,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-11-02T23:59:33Z",
      "side": 1,
      "message": "There is no need to test dependency injections. In tests we should test API contracts of CWVAutofillController: tests call public methods, check the results or the calls and verify that expected CWVAutofillControllerDelegate callbacks were called.",
      "range": {
        "startLine": 57,
        "startChar": 7,
        "endLine": 57,
        "endChar": 32
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4306ff1c_14da8da4",
        "filename": "ios/web_view/internal/autofill/cwv_autofill_controller_unittest.mm",
        "patchSetId": 8
      },
      "lineNbr": 57,
      "author": {
        "id": 1193409
      },
      "writtenOn": "2017-11-03T20:03:37Z",
      "side": 1,
      "message": "Ok. I updated with some other tests here.",
      "parentUuid": "e2ada35a_38a6d66d",
      "range": {
        "startLine": 57,
        "startChar": 7,
        "endLine": 57,
        "endChar": 32
      },
      "revId": "943dce1ed7aa193015358629dfc7889a5d00df0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}