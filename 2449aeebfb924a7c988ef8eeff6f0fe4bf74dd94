{
  "comments": [
    {
      "key": {
        "uuid": "70d2dece_9a197b3b",
        "filename": "chrome/browser/metrics/process_memory_metrics_emitter.cc",
        "patchSetId": 3
      },
      "lineNbr": 294,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-08-30T21:39:58Z",
      "side": 1,
      "message": "why set the URL to empty string (as opposed to just leaving it unset)?",
      "revId": "2449aeebfb924a7c988ef8eeff6f0fe4bf74dd94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f34c0164_9a92ef1c",
        "filename": "chrome/browser/metrics/process_memory_metrics_emitter.cc",
        "patchSetId": 3
      },
      "lineNbr": 294,
      "author": {
        "id": 1115906
      },
      "writtenOn": "2017-08-30T22:18:38Z",
      "side": 1,
      "message": "UpdateSourceURL is the code that actually updates sources_.\n\nhttps://cs.chromium.org/chromium/src/components/ukm/ukm_recorder_impl.cc?type\u003dcs\u0026l\u003d143",
      "parentUuid": "70d2dece_9a197b3b",
      "revId": "2449aeebfb924a7c988ef8eeff6f0fe4bf74dd94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05b0a15c_89ea9618",
        "filename": "chrome/browser/metrics/process_memory_metrics_emitter.cc",
        "patchSetId": 3
      },
      "lineNbr": 294,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-08-31T01:09:28Z",
      "side": 1,
      "message": "Interesting, thanks! I did not realize this.\n\nIs it an intended use case for UKM that metrics may be logged w/o a URL? If so it seems odd that callers have to call UpdateSourceURL just to trigger generation of a source.\n\nCan we add a comment here to explain why the UpdateSourceURL() with empty GURL is needed?\n\nAlso can you pass GURL::EmptyGURL() rather than GURL(\"\")?",
      "parentUuid": "f34c0164_9a92ef1c",
      "revId": "2449aeebfb924a7c988ef8eeff6f0fe4bf74dd94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1034a6f0_90c060f3",
        "filename": "chrome/browser/metrics/process_memory_metrics_emitter.cc",
        "patchSetId": 3
      },
      "lineNbr": 294,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-08-31T01:10:31Z",
      "side": 1,
      "message": "Actually, sorry, reading the docs it sounds like you should pass GURL() rather than GURL(\"\") here.",
      "parentUuid": "05b0a15c_89ea9618",
      "revId": "2449aeebfb924a7c988ef8eeff6f0fe4bf74dd94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "964429f0_4c57e999",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-08-30T21:39:58Z",
      "side": 1,
      "message": "URLs need to be set in only one place for source ids allocated via ConvertToSourceId. otherwise we run the risk of stomping on updates to the URL between different setter locations (URL can be set and updated multiple times for a single source id in UKM, and we store the original and final URL for each source).\n\nthe URL is currently set in page_load_metrics but we will be moving it to a dedicated webcontentsobserver soon. could we remove this and count on the core ukm code (currently page_load_metrics, but will move soon) to do this?\n\nif you need to have the code that sets the source id run in tests, you might be able to instantiate the page load metrics code for now, and we can switch to the ukm url setter when it is available.",
      "revId": "2449aeebfb924a7c988ef8eeff6f0fe4bf74dd94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b8d640d_9c55c0d8",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-30T22:02:39Z",
      "side": 1,
      "message": "That introduces a dependency for resource_coordinator to page load metrics code. Could you please point me to the code of the dedicated webcontentsobserver?\n\nI am not against setting source id in one place, but I think it\u0027s better not to have dependency between webcontentsobserver.",
      "parentUuid": "964429f0_4c57e999",
      "revId": "2449aeebfb924a7c988ef8eeff6f0fe4bf74dd94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a445f2d2_9cd7148b",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1115906
      },
      "writtenOn": "2017-08-30T22:18:38Z",
      "side": 1,
      "message": "Can you fix this then, once you move the URL setting to \"a dedicated webcontentsobserver\"",
      "parentUuid": "9b8d640d_9c55c0d8",
      "revId": "2449aeebfb924a7c988ef8eeff6f0fe4bf74dd94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}