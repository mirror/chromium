{
  "comments": [
    {
      "key": {
        "uuid": "529b1675_059fd4e5",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 95,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-24T18:11:46Z",
      "side": 1,
      "message": "This seems like more buckets than is strictly useful. Can we limit it to around 5?\n\nAlso, there\u0027s no numeric histogram that does what we want?",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9828f8f6_cd44c4d4",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 95,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "There\u0027s no ready made histogram format that does what we want. I switched to a uniformly distributed histogram ranging from 0 to 200% (including the 100%/match case) with a special case bucket for when archive_body_length is 0.",
      "parentUuid": "529b1675_059fd4e5",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19bdd141_1c2e2406",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 96,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-24T18:11:46Z",
      "side": 1,
      "message": "These numbers aren\u0027t consistent. LESS_THAN_50 should be 0.",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b07bf8aa_e0e3dcb1",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 96,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Arguably... :) But not applicable anymore.",
      "parentUuid": "19bdd141_1c2e2406",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfe87c04_8c7d417e",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-24T18:11:46Z",
      "side": 1,
      "message": "Can it be even easier?  Just return int(ratio * 100) capped betwseen 0 and 201",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73def7ab_7a25c302",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "This wouldn\u0027t fit the enum I had. But N/A anymore.",
      "parentUuid": "cfe87c04_8c7d417e",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c7e7cb7_0f82101b",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 110,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-24T18:11:46Z",
      "side": 1,
      "message": "This DCHECK seems unnecessary.  The function works even if it\u0027s 1.0 and then we won\u0027t be crashing in debug for weird double precision bugs.",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3cac89dc_1501944a",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 110,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0c7e7cb7_0f82101b",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4bb27289_e102abf7",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 122,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-24T18:11:46Z",
      "side": 1,
      "message": "This is really confusing.  I\u0027d rather be consistent across all the enum values.",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "561b124f_e6dcabc4",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 122,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4bb27289_e102abf7",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c50c491_c0de8723",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2017-08-24T17:57:09Z",
      "side": 1,
      "message": "Nit: Use base::TimeDelta::FromDays(28).InSeconds()\n\nAlso, kFourWeeksInSeconds",
      "range": {
        "startLine": 137,
        "startChar": 19,
        "endLine": 137,
        "endChar": 40
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0752ff3_4440998d",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0c50c491_c0de8723",
      "range": {
        "startLine": 137,
        "startChar": 19,
        "endLine": 137,
        "endChar": 40
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c93747c_3d10a0c5",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 152,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2017-08-24T17:57:09Z",
      "side": 1,
      "message": "Use sparse histogram here too, since error codes are sparse.",
      "range": {
        "startLine": 152,
        "startChar": 20,
        "endLine": 152,
        "endChar": 21
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7848b9a_bd8bdc38",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 152,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0c93747c_3d10a0c5",
      "range": {
        "startLine": 152,
        "startChar": 20,
        "endLine": 152,
        "endChar": 21
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1038d044_e167f629",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2017-08-24T17:57:09Z",
      "side": 1,
      "message": "If you want to keep the values as they are in this enum, please use UMA_HISTOGRAM_SPARSE_SLOWLY(). This a version of the histogram that won\u0027t allocate MAX buckets - which is wasteful with the enum values you have - and instead is good at logging sparse values.\n\nThe enum you have is OK otherwise. You could consider just having an array you iterate through rather than 40 lines of enums and if statements.",
      "range": {
        "startLine": 161,
        "startChar": 53,
        "endLine": 161,
        "endChar": 0
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0889ebe9_3ee1e76d",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Thanks. I finally switched to a simpler solution using uniform 10%-sized buckets.",
      "parentUuid": "1038d044_e167f629",
      "range": {
        "startLine": 161,
        "startChar": 53,
        "endLine": 161,
        "endChar": 0
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe39b91a_8d94ab60",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2017-08-24T17:57:09Z",
      "side": 1,
      "message": "Nit: kMaxRetriesEver",
      "range": {
        "startLine": 165,
        "startChar": 19,
        "endLine": 165,
        "endChar": 35
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "836e52cb_00f041dc",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-24T18:11:46Z",
      "side": 1,
      "message": "kMaxPossibleRetries?",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b5d5ab1_05dc575d",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe39b91a_8d94ab60",
      "range": {
        "startLine": 165,
        "startChar": 19,
        "endLine": 165,
        "endChar": 35
      },
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a67e179a_999569d4",
        "filename": "components/offline_pages/core/prefetch/metrics_finalization_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-24T22:05:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "836e52cb_00f041dc",
      "revId": "33f960dfd49c0acc9b8892e1a520d96d5d870a5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}