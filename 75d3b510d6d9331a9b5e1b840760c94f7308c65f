{
  "comments": [
    {
      "key": {
        "uuid": "2f113ca5_4bab99af",
        "filename": "base/android/android_hardware_buffer_compat.cc",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1178490
      },
      "writtenOn": "2018-01-16T14:34:08Z",
      "side": 1,
      "message": "I am also not sure what to do here. AHardwareBuffer_ stuff should be available in NDK r16, but I think I am missing something. :)",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 29,
        "endChar": 41
      },
      "revId": "75d3b510d6d9331a9b5e1b840760c94f7308c65f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59633c66_9d415709",
        "filename": "base/android/android_hardware_buffer_compat.cc",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1126674
      },
      "writtenOn": "2018-01-16T15:25:52Z",
      "side": 1,
      "message": "I believe these will only be made available if we also tell it \"the minimum supported android version is 26\". Right now we set that value to 16 for 32-bit and 21 for 64-bit:\n\nhttps://cs.chromium.org/chromium/src/build/config/android/BUILD.gn?rcl\u003d5c58e8edcd5bd47c926b59b541d644a49d6a03c5\u0026l\u003d82",
      "parentUuid": "2f113ca5_4bab99af",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 29,
        "endChar": 41
      },
      "revId": "75d3b510d6d9331a9b5e1b840760c94f7308c65f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42389006_ebba958d",
        "filename": "base/android/android_hardware_buffer_compat.cc",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1178490
      },
      "writtenOn": "2018-01-16T15:44:29Z",
      "side": 1,
      "message": "Aren\u0027t they defined in android/hardware_buffer.h (which lives in third_party/android_ndk/sysroot/usr/include/android/)?\n\nI mean, the comment in base/android/android_hardware_buffer_abi.h says:\n// TODO(crbug.com/771171): Delete this file when third_party/android_ndk/\n// is updated to a version that contains the android/hardware_buffer.h file.\n\nThis is why I am trying to get rid of this code.",
      "parentUuid": "59633c66_9d415709",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 29,
        "endChar": 41
      },
      "revId": "75d3b510d6d9331a9b5e1b840760c94f7308c65f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15ca0a1d_d94a0550",
        "filename": "base/android/android_hardware_buffer_compat.cc",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1126674
      },
      "writtenOn": "2018-01-16T16:01:53Z",
      "side": 1,
      "message": "Hmm, you\u0027re right that they are clearly there. Maybe this works fine then so long as you ensure not to call them on older androids?",
      "parentUuid": "42389006_ebba958d",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 29,
        "endChar": 41
      },
      "revId": "75d3b510d6d9331a9b5e1b840760c94f7308c65f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50fea42c_d5cc67a0",
        "filename": "base/android/android_hardware_buffer_compat.cc",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1178490
      },
      "writtenOn": "2018-01-17T08:06:38Z",
      "side": 1,
      "message": "I think this has something to do with unified headers (https://android.googlesource.com/platform/ndk/+/ndk-release-r16/docs/UnifiedHeaders.md).\n\nAnyway, I am sure I am missing something, maybe the comment in \"base/android/android_hardware_buffer_abi.h\" needs to be updated because this also depends on __ANDROID_API__. Let\u0027s ask to klausw@ who recently worked on this.",
      "parentUuid": "15ca0a1d_d94a0550",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 29,
        "endChar": 41
      },
      "revId": "75d3b510d6d9331a9b5e1b840760c94f7308c65f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77077897_3907fa69",
        "filename": "base/android/android_hardware_buffer_compat.cc",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1187745
      },
      "writtenOn": "2018-01-22T22:44:34Z",
      "side": 1,
      "message": "My rough understanding (which may be incorrect) is that there are three separate issues here:\n\n(A) do function prototypes exist in a header file?\n(B) are the functions defined, in other words does the build link successfully?\n(C) are the functions present at runtime?\n\nWith the old NDK, all three of these were false, hence the workarounds.\n\nThe base/android/android_hardware_buffer_abi.h file was intended to address (A). Now we have third_party/android_tools/ndk/sysroot/usr/include/android/hardware_buffer.h which should be a drop-in replacement for that, and (unless there\u0027s secret magic happening) it unconditionally provides declarations (prototypes) independent of __ANDROID_API_.\n\nI\u0027m fairly sure that (B) and (C) are still not solved by the new SDK. We only get function definitions by setting the platform level to 26+, and that would make the Chrome application disappear from the Play Store for devices older than that because those older devices aren\u0027t able to run it. So we\u0027ll still need to use dlsym for dynamic symbol loading.",
      "parentUuid": "50fea42c_d5cc67a0",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 29,
        "endChar": 41
      },
      "revId": "75d3b510d6d9331a9b5e1b840760c94f7308c65f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}