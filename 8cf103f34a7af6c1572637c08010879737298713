{
  "comments": [
    {
      "key": {
        "uuid": "df415b5a_431b5fae",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.cc",
        "patchSetId": 6
      },
      "lineNbr": 92,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T01:27:02Z",
      "side": 1,
      "message": "I am not sure this is the best place to start timer, but not other place works. The ctor is always called twice because that StoragePartitionImpl is created twice, I don\u0027t know why. Then the job_queues_\u0027s address is different so that OnJobTimeoutTimer never be executed actually.\n\nHowever, I think it\u0027s ok start timer here, because the first step is to register, am I right?",
      "range": {
        "startLine": 92,
        "startChar": 25,
        "endLine": 92,
        "endChar": 0
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d342731_8ad3ad50",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.cc",
        "patchSetId": 6
      },
      "lineNbr": 92,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-07-25T01:47:03Z",
      "side": 1,
      "message": "Hmm, I don\u0027t think it\u0027s necessarily true that Registration is always the first step. You could have empty job queues and then trigger unregister or update. Could we have a function like PushOnJobQueue(pattern, job) which starts the timeout timer, and call that instead of pushing to the job_queues_ directly?",
      "parentUuid": "df415b5a_431b5fae",
      "range": {
        "startLine": 92,
        "startChar": 25,
        "endLine": 92,
        "endChar": 0
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d031c104_331285bb",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.cc",
        "patchSetId": 6
      },
      "lineNbr": 92,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T08:03:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4d342731_8ad3ad50",
      "range": {
        "startLine": 92,
        "startChar": 25,
        "endLine": 92,
        "endChar": 0
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4784bc35_3823510f",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.cc",
        "patchSetId": 6
      },
      "lineNbr": 149,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T01:27:02Z",
      "side": 1,
      "message": "I am thinking if the timer interval should be 30min, but the timeout time should be 5min?\nBecause if both of them are 30min, if a job is resister just after one timer cycle, and blocked, then the job will be aborted after ~30min+30min, is it too long?",
      "range": {
        "startLine": 149,
        "startChar": 29,
        "endLine": 149,
        "endChar": 43
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d01e2b22_0280e360",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.cc",
        "patchSetId": 6
      },
      "lineNbr": 149,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-07-25T01:47:03Z",
      "side": 1,
      "message": "Hm.. yea maybe 5 min timer is better especially now that the timout timer is for all the queues.",
      "parentUuid": "4784bc35_3823510f",
      "range": {
        "startLine": 149,
        "startChar": 29,
        "endLine": 149,
        "endChar": 43
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98d2b641_5a515916",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.cc",
        "patchSetId": 6
      },
      "lineNbr": 149,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T08:03:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d01e2b22_0280e360",
      "range": {
        "startLine": 149,
        "startChar": 29,
        "endLine": 149,
        "endChar": 43
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b62491d_c6dad2fa",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.h",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-07-25T01:47:03Z",
      "side": 1,
      "message": "Simple getters like this are usually in lower_case and omit the word get. In this case I think you can name it front().",
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5ef7b6f_35d9285c",
        "filename": "content/browser/service_worker/service_worker_job_coordinator.h",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T08:03:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b62491d_c6dad2fa",
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d2899ff_b6d67e15",
        "filename": "content/browser/service_worker/service_worker_job_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 188,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T01:27:02Z",
      "side": 1,
      "message": "It seems the timer\u0027s user_task can\u0027t have parameter, so here can\u0027t make the  ServiceWorkerJobCoordinator::OnJobTimeoutTimer() run finish soon, it depends on the timeout value.\nCould you give some advice?",
      "range": {
        "startLine": 188,
        "startChar": 33,
        "endLine": 188,
        "endChar": 51
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38e7da63_21adbbf5",
        "filename": "content/browser/service_worker/service_worker_job_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 188,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-07-25T01:47:03Z",
      "side": 1,
      "message": "I\u0027m not too sure what you are trying to do. You could manually call OnJobTimeoutTimer() if you need to by making ServiceWorkerJobTest a friend of SWJobCoordinator.",
      "parentUuid": "6d2899ff_b6d67e15",
      "range": {
        "startLine": 188,
        "startChar": 33,
        "endLine": 188,
        "endChar": 51
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ace27fb4_b6bacd52",
        "filename": "content/browser/service_worker/service_worker_job_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 188,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T02:29:18Z",
      "side": 1,
      "message": "Sorry for unclear.\nAs you said: 1) starting a job -\u003e 2) verifying the timer has started --\u003e 3) then manually calling the timer\u0027s task --\u003e 4)verifying the right stuff happens.\n\nI mean that if the timer timeout time is 5min, how we check step4? or waiting 5 min to see the result?",
      "parentUuid": "38e7da63_21adbbf5",
      "range": {
        "startLine": 188,
        "startChar": 33,
        "endLine": 188,
        "endChar": 51
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ba5ca0b_e655817f",
        "filename": "content/browser/service_worker/service_worker_job_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 188,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-07-25T03:36:20Z",
      "side": 1,
      "message": "Can you set the start_time of the job 5 minutes in the past and then call OnJobTimeoutTimer() and verify that the job gets Aborted?",
      "parentUuid": "ace27fb4_b6bacd52",
      "range": {
        "startLine": 188,
        "startChar": 33,
        "endLine": 188,
        "endChar": 51
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce1a97ac_a37c24e2",
        "filename": "content/browser/service_worker/service_worker_job_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 188,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T08:03:05Z",
      "side": 1,
      "message": "Thanks a lot! Done.",
      "parentUuid": "6ba5ca0b_e655817f",
      "range": {
        "startLine": 188,
        "startChar": 33,
        "endLine": 188,
        "endChar": 51
      },
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c71e481e_5324173f",
        "filename": "content/browser/service_worker/service_worker_register_job.h",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-07-25T01:47:03Z",
      "side": 1,
      "message": "Would simplify this:\n\n// Returns the time the job started.\nbase::TimeTicks start_time() const { return start_time_; }",
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25548b69_7360d5f8",
        "filename": "content/browser/service_worker/service_worker_register_job.h",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1223459
      },
      "writtenOn": "2017-07-25T08:03:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c71e481e_5324173f",
      "revId": "8cf103f34a7af6c1572637c08010879737298713",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}