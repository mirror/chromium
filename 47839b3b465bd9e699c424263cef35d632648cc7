{
  "comments": [
    {
      "key": {
        "uuid": "c4143a69_957f7289",
        "filename": "chrome/browser/resources/settings/site_settings/site_details_permission.js",
        "patchSetId": 6
      },
      "lineNbr": 140,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-12-15T22:08:46Z",
      "side": 1,
      "message": "Consider making a new function that works with hasPermissionInfoString_() and permissionInfoString_(). I\u0027ll call it permissionInfoStringIndex_ but feel free to call it something else.\n\npermissionInfoStringIndex_(source, category, setting) will have most of the guts of permissionInfoString_(), but it will not take any of the i18n values as args and it will return a {number}. The number will be which i18n string to use, N for the this.i18nAdvanced() value, or -1 (or null if you prefer) to signal that no string applies.\n\nLine 134 would turn into something like:\nreturn this.permissionInfoStringIndex_(source, category, setting) \u003e\u003d 0;\n\nThe permissionInfoString_() function would get much smaller, it would call permissionInfoStringIndex_() to get the index for the string to use and return that string (or make the his.i18nAdvanced() call) or return \u0027\u0027 if the index is invalid.\n\n(It may also help to pass in the i18n strings as an array in one parameter than separate parameters for each string, but that\u0027s entirely optional).\n\nThere are other ways to arrange this code. The above is just an idea, feel free to suggest something else.",
      "revId": "47839b3b465bd9e699c424263cef35d632648cc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c96d81a9_ec9314ce",
        "filename": "chrome/browser/resources/settings/site_settings/site_details_permission.js",
        "patchSetId": 6
      },
      "lineNbr": 140,
      "author": {
        "id": 1160861
      },
      "writtenOn": "2017-12-18T06:21:41Z",
      "side": 1,
      "message": "I\u0027m not sure what you mean by converting the i18nAdvanced string ids into numbers - do you mean adding an array of the string ids and returning the indexes of that array in permissionInfoStringIndex_()? This sounds like it no longer uses the automatic translation in the HTML via i18nPolymer(), so if we\u0027re trying to reduce the number of parameters passed in here, it might be simpler to just to do all the translations via i18nAdvanced() in the JS.\n\nI\u0027ve gone ahead and done that in the next patchset, but let me know if I\u0027ve misunderstood something or you still think it\u0027s worth having the translations pre-done in the HTML.",
      "parentUuid": "c4143a69_957f7289",
      "revId": "47839b3b465bd9e699c424263cef35d632648cc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}