{
  "comments": [
    {
      "key": {
        "uuid": "f50cf178_6b2bfb90",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.cc",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-10-16T21:35:29Z",
      "side": 1,
      "message": "Could we use MainThreadTaskQueue::NameForQueueType instead?",
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec821a1d_c281e556",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.cc",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1162220
      },
      "writtenOn": "2017-10-16T21:52:49Z",
      "side": 1,
      "message": "I don\u0027t think so. First, this is in scheduler/base. Despite there being no DEPS complaining about it, I\u0027d assume we don\u0027t want includes from scheduler/renderer in here. Also, I now changed the strings to now include the whole message. Finally, I think that the format of MainThreadTaskQueue::NameForQueueType is not good for UMA reporting.",
      "parentUuid": "f50cf178_6b2bfb90",
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21b60e5c_eb49faea",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.cc",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-10-17T13:47:32Z",
      "side": 1,
      "message": "I believe that QueuingTimeEstimator does not belong in base/. Given that it\u0027s only RendererScheduler which uses it, let\u0027s move it into renderer/ directory. This means that we could use MainThreadTaskQueue::QueueType there.\n\nAlso we can probably change MainThreadTaskQueue::NameForQueueType format to something which suits UMA reporting.",
      "parentUuid": "ec821a1d_c281e556",
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c3665f0_08d42dfc",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.cc",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1162220
      },
      "writtenOn": "2017-10-17T17:02:13Z",
      "side": 1,
      "message": "I agree with moving into renderer/ but that can be a followup CL. Regarding using MainThreadTaskQueue::NameForQueueType, I don\u0027t see how to do it without falling back into the problem you pointed out of creating new object strings. That is, I\u0027d have to add \"ExpectedQueueingTimeByTaskQueueType.\" to the MainThreadTaskQueue::NameForQueueType to get the string I want for UMA reporting.",
      "parentUuid": "21b60e5c_eb49faea",
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23c3263a_0cfbad9d",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.cc",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-10-18T09:57:09Z",
      "side": 1,
      "message": "I really, really don\u0027t like having one more histogram for task types. Let\u0027s try our best to avoid having an extra enum here. If we can\u0027t automatically create new object strings (constexpr string concatenation, anyone? :) ) let\u0027s just have a helper function returning histogram name for a given QueueType.",
      "parentUuid": "2c3665f0_08d42dfc",
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc7c9edc_98361800",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.cc",
        "patchSetId": 6
      },
      "lineNbr": 139,
      "author": {
        "id": 1162220
      },
      "writtenOn": "2017-10-18T18:08:33Z",
      "side": 1,
      "message": "Done. The drawback is now I have to use MainThreadTaskQueue::QueueType::COUNT as the \"other\" category. And of course string construction when reporting.",
      "parentUuid": "23c3263a_0cfbad9d",
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5d66cc6_2be2fc01",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.h",
        "patchSetId": 6
      },
      "lineNbr": 26,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-10-16T21:35:29Z",
      "side": 1,
      "message": "We could use const char* here and avoid creating new objects, right?",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 26,
        "endChar": 44
      },
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89dd0387_94bb762e",
        "filename": "third_party/WebKit/Source/platform/scheduler/base/queueing_time_estimator.h",
        "patchSetId": 6
      },
      "lineNbr": 26,
      "author": {
        "id": 1162220
      },
      "writtenOn": "2017-10-16T21:52:49Z",
      "side": 1,
      "message": "const char* variables cannot be added, but I think we do want creating new objects every time we report, so I just modified the char[] to contain the complete message.",
      "parentUuid": "b5d66cc6_2be2fc01",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 26,
        "endChar": 44
      },
      "revId": "8aebd96f0769746efedc09b75b457941dcf18afb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}