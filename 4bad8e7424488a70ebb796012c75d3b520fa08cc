{
  "comments": [
    {
      "key": {
        "uuid": "7f11900b_0d39d36e",
        "filename": "ios/chrome/browser/metrics/tab_usage_recorder.mm",
        "patchSetId": 2
      },
      "lineNbr": 373,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-12-08T18:55:48Z",
      "side": 1,
      "message": "AFAIK, Offline pages have https:// virtual URL and chrome:// URLs, so I believe this CL actually changes the counting.\n\nIs there another way to filter out session restoring web states?",
      "range": {
        "startLine": 373,
        "startChar": 25,
        "endLine": 373,
        "endChar": 38
      },
      "revId": "4bad8e7424488a70ebb796012c75d3b520fa08cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9136eca3_04adbd81",
        "filename": "ios/chrome/browser/metrics/tab_usage_recorder.mm",
        "patchSetId": 2
      },
      "lineNbr": 373,
      "author": {
        "id": 1190590
      },
      "writtenOn": "2017-12-08T19:23:56Z",
      "side": 1,
      "message": "How about if either URL of virtual URL is chrome://?\n\nThe other option I tried (but shot down) was to detect if this is a file:///...restore_session.html. It doesn\u0027t work because whether to count or not depends on which page is being restored.",
      "parentUuid": "7f11900b_0d39d36e",
      "range": {
        "startLine": 373,
        "startChar": 25,
        "endLine": 373,
        "endChar": 38
      },
      "revId": "4bad8e7424488a70ebb796012c75d3b520fa08cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab56e533_a5c40950",
        "filename": "ios/chrome/browser/metrics/tab_usage_recorder.mm",
        "patchSetId": 2
      },
      "lineNbr": 373,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2017-12-11T14:54:42Z",
      "side": 1,
      "message": "I don\u0027t think offline pages should be ignored. If user is online, even opening an offline page will cause a reload (at least it looks like there is a reload). The test is mostly there for chrome://newtab.",
      "parentUuid": "9136eca3_04adbd81",
      "range": {
        "startLine": 373,
        "startChar": 25,
        "endLine": 373,
        "endChar": 38
      },
      "revId": "4bad8e7424488a70ebb796012c75d3b520fa08cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33988a22_b4aa764f",
        "filename": "ios/chrome/browser/metrics/tab_usage_recorder.mm",
        "patchSetId": 2
      },
      "lineNbr": 373,
      "author": {
        "id": 1190590
      },
      "writtenOn": "2017-12-11T17:23:30Z",
      "side": 1,
      "message": "If I understand Sylvain\u0027s other comment correctly, I think this metric is trying to measure how \"far\" a user can go (in terms of number of page loads) before switching to an evicted tab. Higher is better because the cost of reviving of evicted tab is incurred less frequently.\n\nAssuming this, I agree with Sylvain that it seems more correct to count offline page as a page load because it appears to the user like one. Eugene, would you agree that this is the correct end state?\n\nSeparately there\u0027s the question of how to roll out this change. Is anyone looking at this UMA metric regularly that we need to notify of the expected change? I\u0027m not sure how noticeable the change will be. For example, the bug was shipped in M61. There is only a mild decrease in the metric in 95th percentile compared to M60, and it\u0027s hard to tell if it\u0027s due to the bug or part of the larger decreasing trend that seemed to have started around M56. I wonder if the impact on UMA metric for fixing this bug would be like a tree falling in a forest no one knows about... in which case, I think we should probably just ship the fix.",
      "parentUuid": "ab56e533_a5c40950",
      "range": {
        "startLine": 373,
        "startChar": 25,
        "endLine": 373,
        "endChar": 38
      },
      "revId": "4bad8e7424488a70ebb796012c75d3b520fa08cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}