{
  "comments": [
    {
      "key": {
        "uuid": "df693319_a3f31665",
        "filename": "third_party/WebKit/Source/platform/graphics/VideoFrameSubmitter.cpp",
        "patchSetId": 24
      },
      "lineNbr": 27,
      "author": {
        "id": 1130490
      },
      "writtenOn": "2017-11-06T17:28:43Z",
      "side": 1,
      "message": "if the media factory is constructing this on the main thread, then initializing |binding_| during construction is going to get the wrong task runner, isn\u0027t it?\n\nfrom what i can tell, mojo bindings get the task runner here:\n\nhttps://cs.chromium.org/chromium/src/mojo/public/cpp/bindings/lib/binding_state.cc?rcl\u003d1500d1ca2245d1cede18195c33036ed963d7f9c0\u0026l\u003d93\n\nif |runner| is null, then it uses SequencedTaskRunnerHandle::Get().\n\ni don\u0027t see how that works with the thread checks when OnBeginFrame calls SubmitFrame, for example.  at some point earlier, we\u0027ve gotten (e.g.) StartRendering on the media thread, which should bind the checker there.\n\nseems like there has to be a mix of main and media thread calls, and something should be tripping a thread check.  i\u0027d very much like to understand this better.",
      "revId": "2e374042e3911d64f597e82d1c0f4225e4255ba9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22f6d0b2_287e8aaa",
        "filename": "third_party/WebKit/Source/platform/graphics/VideoFrameSubmitter.cpp",
        "patchSetId": 24
      },
      "lineNbr": 27,
      "author": {
        "id": 1215059
      },
      "writtenOn": "2017-11-06T23:02:09Z",
      "side": 1,
      "message": "We bind line 100 tho. So we are on the correct thread.",
      "parentUuid": "df693319_a3f31665",
      "revId": "2e374042e3911d64f597e82d1c0f4225e4255ba9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3179190_6ba38ef5",
        "filename": "third_party/WebKit/Source/platform/graphics/VideoFrameSubmitter.cpp",
        "patchSetId": 24
      },
      "lineNbr": 27,
      "author": {
        "id": 1130490
      },
      "writtenOn": "2017-11-07T21:24:13Z",
      "side": 1,
      "message": "oh, i think that i misread the constructors in Binding.  the one you\u0027re using doesn\u0027t remember the thread.  thanks for explaining!",
      "parentUuid": "22f6d0b2_287e8aaa",
      "revId": "2e374042e3911d64f597e82d1c0f4225e4255ba9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d383a573_58e20716",
        "filename": "third_party/WebKit/Source/platform/graphics/VideoFrameSubmitter.h",
        "patchSetId": 24
      },
      "lineNbr": 22,
      "author": {
        "id": 1130490
      },
      "writtenOn": "2017-11-06T17:28:43Z",
      "side": 1,
      "message": "not sure that this conveys what you\u0027re trying to say.  just about every class is created on some sequenced task runner.  :)\n\nis the intended meaning \"All calls into instances of this class, except construction, should occur from the same SingleThreadTaskRunner.\" ?\n\nsince this class has thread affinity, \"sequence\" isn\u0027t strong enough.\n\nmaybe move the comment @82 up here, in that case, to explain why it has thread affinity.",
      "range": {
        "startLine": 21,
        "startChar": 40,
        "endLine": 22,
        "endChar": 22
      },
      "revId": "2e374042e3911d64f597e82d1c0f4225e4255ba9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c847aec_8119e814",
        "filename": "third_party/WebKit/Source/platform/graphics/VideoFrameSubmitter.h",
        "patchSetId": 24
      },
      "lineNbr": 22,
      "author": {
        "id": 1215059
      },
      "writtenOn": "2017-11-06T23:02:09Z",
      "side": 1,
      "message": "Actually this was originally talking about how the mojo calls must be ran from a sequenced task runner, since I ran into that trouble while testing. And now that I look at it, it is outdated! (Since we no longer do mojo stuff on construction). \n\nLet me fix this..",
      "parentUuid": "d383a573_58e20716",
      "range": {
        "startLine": 21,
        "startChar": 40,
        "endLine": 22,
        "endChar": 22
      },
      "revId": "2e374042e3911d64f597e82d1c0f4225e4255ba9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20686b7d_ca7e3acb",
        "filename": "third_party/WebKit/Source/platform/graphics/VideoFrameSubmitter.h",
        "patchSetId": 24
      },
      "lineNbr": 57,
      "author": {
        "id": 1130490
      },
      "writtenOn": "2017-11-06T17:28:43Z",
      "side": 1,
      "message": "not sure that i understand this one.  if the class is has thread affinity, then you can probably just delete the \"Run...sequence\" part of the comment.",
      "range": {
        "startLine": 57,
        "startChar": 18,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "2e374042e3911d64f597e82d1c0f4225e4255ba9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ece0d8ff_a81aa42d",
        "filename": "third_party/WebKit/Source/platform/graphics/VideoFrameSubmitter.h",
        "patchSetId": 24
      },
      "lineNbr": 57,
      "author": {
        "id": 1215059
      },
      "writtenOn": "2017-11-06T23:02:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "20686b7d_ca7e3acb",
      "range": {
        "startLine": 57,
        "startChar": 18,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "2e374042e3911d64f597e82d1c0f4225e4255ba9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}