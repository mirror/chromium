{
  "comments": [
    {
      "key": {
        "uuid": "1bc35e3c_ab3ecdc3",
        "filename": "chrome/browser/ui/passwords/password_manager_porter.h",
        "patchSetId": 15
      },
      "lineNbr": 38,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-11-30T19:04:49Z",
      "side": 1,
      "message": "remove \u0027explicit\u0027\n\nAlso, I realize this pre-exists, but there is no comment for the second constructor, and it is unclear when each constructor is used. (Normally I would recommend avoiding multiple constructors and use well named static CreatePasswordManagerPorter{For|With|...}... methods instead).\n\nEither way, using a SetExportedCallback method instead might make be more clear?",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e040497_ba6fd190",
        "filename": "chrome/browser/ui/passwords/password_manager_porter.h",
        "patchSetId": 15
      },
      "lineNbr": 38,
      "author": {
        "id": 1168044
      },
      "writtenOn": "2018-01-10T20:38:33Z",
      "side": 1,
      "message": "I moved this constructor to a static method, as recommended.\n\nI did not use SetExportedCallback, since there is currently no scenario, where we would want to export without a callback.",
      "parentUuid": "1bc35e3c_ab3ecdc3",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "34e63d01_f030dc87",
        "filename": "chrome/common/extensions/api/passwords_private.idl",
        "patchSetId": 15
      },
      "lineNbr": 126,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-11-30T19:04:49Z",
      "side": 1,
      "message": "This is problematic if there is more than one page open implementing this API.\n\nWe should add an optional |callback| argument to \u0027exportPasswords\u0027 instead.",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f95a6e2_a96a05ce",
        "filename": "chrome/common/extensions/api/passwords_private.idl",
        "patchSetId": 15
      },
      "lineNbr": 126,
      "author": {
        "id": 1168044
      },
      "writtenOn": "2017-12-05T14:35:27Z",
      "side": 1,
      "message": "I understand your point. However, we need two callbacks in total in the current design (one to trigger the progress bar after the user selects a file and one on completion). If I\u0027m reading https://cs.chromium.org/chromium/src/extensions/browser/extension_function.h?rcl\u003d5e84f2f57f92d07f35a27eaccd25c5ef00bf9826\u0026l\u003d412 correctly, two callbacks per call isn\u0027t allowed. Do I understand correctly? What other option would you recommend?",
      "parentUuid": "34e63d01_f030dc87",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5c8d3d9_01ead3f0",
        "filename": "chrome/common/extensions/api/passwords_private.idl",
        "patchSetId": 15
      },
      "lineNbr": 126,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-12-05T19:59:39Z",
      "side": 1,
      "message": "If there are two different events we should have separate event callbacks, or at least an argument to distinguish them. Relying on the number and ordering of identical events is extremely fragile.\n\nIt sounds like we need \u0027onPasswordsFileExportStarted\u0027 and \u0027onPaswordsFileExportCompleted\u0027, or (better I think), \u0027onPasswordsFileExportProgress(status)\u0027 which would allow us to pass e.g. \u0027in-progress\u0027, \u0027completed\u0027, \u0027canceled\u0027, \u0027failed\u0027 (or \u0027failed{Reason}\u0027). (Those would be defined as an enum).\n\nWe should also update the documentation to \u0027exportPasswords\u0027, which should still include a \"completion\" void callback that would be called when the request is processed and allow the UI to check chrome.runtime.lastError in case the export request failed (e.g. an export was already in progress). importPasswords should really also have a similar callback.",
      "parentUuid": "7f95a6e2_a96a05ce",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71a85c0d_65a0e6da",
        "filename": "chrome/common/extensions/api/passwords_private.idl",
        "patchSetId": 15
      },
      "lineNbr": 126,
      "author": {
        "id": 1168044
      },
      "writtenOn": "2018-01-10T20:38:33Z",
      "side": 1,
      "message": "I repurposed this event signal the progress of the export. Only one export is allowed at a time. Export() will reject the request if another export is in progress, by returning an error on its callback.",
      "parentUuid": "d5c8d3d9_01ead3f0",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c81b17d_2cce14fa",
        "filename": "components/password_manager/core/browser/export/password_manager_exporter.cc",
        "patchSetId": 15
      },
      "lineNbr": 93,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-11-30T19:04:49Z",
      "side": 1,
      "message": "The error message should be a constant defined at the top of the file. Also since it is not directly user facing (i.e. some JS will be parsing it), it might be better to use something simpler, e.g. \"write failed\".",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc8390c0_f290bc5a",
        "filename": "components/password_manager/core/browser/export/password_manager_exporter.cc",
        "patchSetId": 15
      },
      "lineNbr": 93,
      "author": {
        "id": 1168044
      },
      "writtenOn": "2018-01-10T20:38:33Z",
      "side": 1,
      "message": "We are now returning the folder name and we will construct the user-facing message on the page.",
      "parentUuid": "1c81b17d_2cce14fa",
      "revId": "b246ff90d5869bb1277d1b27787894ab32f23407",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}