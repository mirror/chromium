{
  "comments": [
    {
      "key": {
        "uuid": "abc3a489_b016ee6c",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 245,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-11-08T19:53:04Z",
      "side": 1,
      "message": "Fixed waits in tests are good to avoid, if we can; they slow down the test runs and will flake whenever the test happens to run on a slow or congested device.\n\nWhat are we actually waiting for at this point? Is there some other signal we can wait for here, instead of just a fixed delay?\n\n(Not for this CL: We should at least rename Wait(), to make clear that it spins the message-loop while waiting, but preferably we should just replace it with more specific event-driven waits).",
      "range": {
        "startLine": 242,
        "startChar": 0,
        "endLine": 245,
        "endChar": 40
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "719a87b1_ab3b4040",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 245,
      "author": {
        "id": 1190572
      },
      "writtenOn": "2017-11-08T22:37:03Z",
      "side": 1,
      "message": "We\u0027re waiting for the Mojo callback for MediaRouteProvider::CreateRoute() to be called, and for MediaRouter to receive an OnRoutesUpdated() call with the created route, if any. The latter can be observed by adding a MediaRoutesObserver, but the former is not as straightforward.\n\nDo you have a recommendation for what Wait() should be called instead?",
      "parentUuid": "abc3a489_b016ee6c",
      "range": {
        "startLine": 242,
        "startChar": 0,
        "endLine": 245,
        "endChar": 40
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7953d25_655bcb31",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 245,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-11-09T00:29:52Z",
      "side": 1,
      "message": "IIUC the thing we are waiting for is that the MediaRouter receives the OnRoutesUpdated - if we see that then CreateRoute must have been called?  So can we just add the MediaRoutesObserver and use that to watch for OnRoutesUpdated for this case?",
      "parentUuid": "719a87b1_ab3b4040",
      "range": {
        "startLine": 242,
        "startChar": 0,
        "endLine": 245,
        "endChar": 40
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ab1fb9b_48bae4c0",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 245,
      "author": {
        "id": 1190572
      },
      "writtenOn": "2017-11-09T18:14:59Z",
      "side": 1,
      "message": "That would work for cases in which we\u0027re expecting a route to be created, but not for cases where we\u0027re expecting the CreateRoute() callback to be called with an error and OnRoutesUpdated() doesn\u0027t get called.",
      "parentUuid": "d7953d25_655bcb31",
      "range": {
        "startLine": 242,
        "startChar": 0,
        "endLine": 245,
        "endChar": 40
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8dc63dc4_4b4eb18e",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 245,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-11-09T20:53:45Z",
      "side": 1,
      "message": "Would it be possible to add a OnCreateRouteFailed() hook for that purpose, even if only for testing?  What is it that we go and query to verify that CreateRoute was called, at present?\n\nIf not then can we at least have call-sites which expect OnRoutesUpdated to wait for that, and only call-sites which essentially wait-for-nothing do the multi-second wait?",
      "parentUuid": "0ab1fb9b_48bae4c0",
      "range": {
        "startLine": 242,
        "startChar": 0,
        "endLine": 245,
        "endChar": 40
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca43190a_4c644712",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 735,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-11-08T19:53:04Z",
      "side": 1,
      "message": "nit: The test is already MANUAL; why does it need to also be DISABLED?",
      "range": {
        "startLine": 735,
        "startChar": 0,
        "endLine": 735,
        "endChar": 71
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c60ef8c1_f67ca6d4",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 735,
      "author": {
        "id": 1190572
      },
      "writtenOn": "2017-11-08T22:37:03Z",
      "side": 1,
      "message": "We run these tests in MediaRouter\u0027s own buildbots. When integration tests fail telemetry tests don\u0027t get run.",
      "parentUuid": "ca43190a_4c644712",
      "range": {
        "startLine": 735,
        "startChar": 0,
        "endLine": 735,
        "endChar": 71
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bbf153d_a0cefe52",
        "filename": "chrome/test/media_router/media_router_integration_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 735,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-11-09T00:29:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c60ef8c1_f67ca6d4",
      "range": {
        "startLine": 735,
        "startChar": 0,
        "endLine": 735,
        "endChar": 71
      },
      "revId": "3d55b14c5ef805de56f8aa5d562cb0784d6b4ffd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}