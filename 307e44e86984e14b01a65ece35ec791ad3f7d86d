{
  "comments": [
    {
      "key": {
        "uuid": "c0301e36_11876124",
        "filename": "ash/system/power/power_button_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-10-20T01:06:02Z",
      "side": 1,
      "message": "what does \"not blocked\" mean here? the lock screen isn\u0027t shown? if so, please change \"user session is not blocked\" to something like \"screen is unlocked\".\n\nbut maybe it means something like \"the login process is complete\" instead.",
      "range": {
        "startLine": 33,
        "startChar": 14,
        "endLine": 33,
        "endChar": 25
      },
      "revId": "307e44e86984e14b01a65ece35ec791ad3f7d86d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "994c85a7_0ece1f05",
        "filename": "ash/system/power/power_button_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1147616
      },
      "writtenOn": "2017-10-20T02:35:54Z",
      "side": 1,
      "message": "I cited from: https://cs.chromium.org/chromium/src/components/session_manager/session_manager_types.h?type\u003dcs\u0026sq\u003dpackage:chromium\u0026l\u003d30\n\nAnd from here: https://cs.chromium.org/chromium/src/ash/session/session_controller.cc?type\u003dcs\u0026l\u003d104, it says \"user sessions are blocked when session state is not ACTIVE\". So I think ACTIVE means it is user session and no overlay UI.\n\n+xiyuan for confirmation:\n\nI have seen this in code base: https://cs.chromium.org/chromium/src/ash/system/palette/palette_utils.cc?type\u003dcs\u0026q\u003disinusersession\u0026l\u003d30, could we add this API in session_controller?\n\nbool SessionController::IsInUserSession() {\n  return state_ \u003d\u003d SessionState::ACTIVE \u0026\u0026 !IsRunningInAppMode();\n}  // we don\u0027t need !session_controller-\u003eIsUserSessionBlocked(). It is redundant.",
      "parentUuid": "c0301e36_11876124",
      "range": {
        "startLine": 33,
        "startChar": 14,
        "endLine": 33,
        "endChar": 25
      },
      "revId": "307e44e86984e14b01a65ece35ec791ad3f7d86d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aad36485_8655293d",
        "filename": "ash/system/power/power_button_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000101
      },
      "writtenOn": "2017-10-20T16:21:16Z",
      "side": 1,
      "message": "Why not just say:\n  // Returns true if a user session is active, i.e. ash is showing the\n  // desktop of the active user session.\n\nIsUserSessionBlocked() has the two exceptions (LOGGED_IN_NOT_ACTIVE and running unlock animation) to allow ash properly activate browser window at the last stage of login and when screen lock window is going away during unlock animation. The two exceptions are supposed to be transient. Play ToS screen breaks this assumption that it could hold the login process in LOGGED_IN_NOT_ACTIVE state arbitrarily long.\n\nOne possible fix is to move setting LOGGED_IN_NOT_ACTIVE in UserSessionManager from FinalizePrepareProfile to DoBrowserLaunch. So that ToS and other post login screens are considered as part of login. And LOGGED_IN_NOT_ACTIVE is set before we launch browser windows where it is needed. If this works, I would prefer to fix this way.",
      "parentUuid": "994c85a7_0ece1f05",
      "range": {
        "startLine": 33,
        "startChar": 14,
        "endLine": 33,
        "endChar": 25
      },
      "revId": "307e44e86984e14b01a65ece35ec791ad3f7d86d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2db61d8c_bbf00465",
        "filename": "ash/system/power/power_button_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1147616
      },
      "writtenOn": "2017-10-20T19:21:02Z",
      "side": 1,
      "message": "Yes, last suggestion could fix the problem. Please check if my change, and comments make sense.\n\nI am not sure how to write test coverage for this. Looks like it is not easy to do.",
      "parentUuid": "aad36485_8655293d",
      "range": {
        "startLine": 33,
        "startChar": 14,
        "endLine": 33,
        "endChar": 25
      },
      "revId": "307e44e86984e14b01a65ece35ec791ad3f7d86d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f71c66db_81effac0",
        "filename": "ash/wm/lock_state_controller_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1026,
      "author": {
        "id": 1147616
      },
      "writtenOn": "2017-10-20T00:18:35Z",
      "side": 1,
      "message": "shall we add coverage for legacy button? probably not?",
      "revId": "307e44e86984e14b01a65ece35ec791ad3f7d86d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}