{
  "comments": [
    {
      "key": {
        "uuid": "5d19cd1b_b907cbc0",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_text_field_paste_delegate.mm",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1144530
      },
      "writtenOn": "2017-09-01T08:20:58Z",
      "side": 1,
      "message": "Should we not favor the URL one?\nIs the order deterministic?\nAlso, if an application share a title and a URL, you will end up pasting URL\\ntitle.",
      "range": {
        "startLine": 20,
        "startChar": 44,
        "endLine": 20,
        "endChar": 55
      },
      "revId": "dfe63527c33d35d9a0353c2b0cb0b09ea92f45ad",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6507729_743b4d54",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_text_field_paste_delegate.mm",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1148126
      },
      "writtenOn": "2017-09-01T12:21:30Z",
      "side": 1,
      "message": "It\u0027s not clear to me how to get the URL one. It seems to solve our current problem (copy URL in Chrome, paste it in Chrome and get it once and not twice). I don\u0027t see why it would paste \"URL\\ntitle\" since I\u0027m not combining any strings with \"\\n\" as a separator. I have an idea for a better, more robust fix, but I\u0027d like to land this for now (and ideally revert this CL if this is fixed in the final iOS 11.0 release).",
      "parentUuid": "5d19cd1b_b907cbc0",
      "range": {
        "startLine": 20,
        "startChar": 44,
        "endLine": 20,
        "endChar": 55
      },
      "revId": "dfe63527c33d35d9a0353c2b0cb0b09ea92f45ad",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c078ea4d_4a92589e",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_text_field_paste_delegate.mm",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1144530
      },
      "writtenOn": "2017-09-01T12:50:59Z",
      "side": 1,
      "message": "I am OK to land this as it is to solve the issue of copying in Chrome/ pasting in Chrome.\nBut I think we will have to keep this delegate eventually to handle copy/paste from other applications.\n\nThe bug we reported to Apple is on the copy bug (a nil item is replaced by a URL at copy time), not a paste bug.\nIt is totally possible for an application to copy some items to end with a state where the pasteboard will contain multiple item.\n\nIn that case, we will need to implement \n(void)textPasteConfigurationSupporting:(id\u003cUITextPasteConfigurationSupporting\u003e)textPasteConfigurationSupporting\n                       transformPasteItem:(id\u003cUITextPasteItem\u003e)item;\n\nCheck which items contain URL, then only paste this one.\n\nFor a temporary fix, you may want to consider:\n- take only the first line if the item is multiple lines\n- try to convert each item to NSURL and take the first one which succeeds.",
      "parentUuid": "a6507729_743b4d54",
      "range": {
        "startLine": 20,
        "startChar": 44,
        "endLine": 20,
        "endChar": 55
      },
      "revId": "dfe63527c33d35d9a0353c2b0cb0b09ea92f45ad",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f314034_897bd56d",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_text_field_paste_delegate.mm",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1148126
      },
      "writtenOn": "2017-09-01T13:29:53Z",
      "side": 1,
      "message": "Per offline discussion: This solves the particular issue when copying from Chrome and pasting into Chrome, but it\u0027s still possible to have a pasteboard state that will paste twice. The better fix would be to rely on the fact that transformPasteItem: is called N times before finally combineItemAttributedStrings: is called.",
      "parentUuid": "a6507729_743b4d54",
      "range": {
        "startLine": 20,
        "startChar": 44,
        "endLine": 20,
        "endChar": 55
      },
      "revId": "dfe63527c33d35d9a0353c2b0cb0b09ea92f45ad",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}