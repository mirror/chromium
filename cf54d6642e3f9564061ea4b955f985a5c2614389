{
  "comments": [
    {
      "key": {
        "uuid": "305a1a36_d9683eaf",
        "filename": "ios/chrome/browser/tabs/tab.mm",
        "patchSetId": 1
      },
      "lineNbr": 331,
      "author": {
        "id": 1000119
      },
      "writtenOn": "2017-10-24T01:29:25Z",
      "side": 1,
      "message": "This is something that will likely be unique to the voicesearch tab helper.  None of the others need to be instantiated this early.\n\nWhat happens if this tab helper is created later and missed some navigation observer calls?",
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08883a20_23596cd5",
        "filename": "ios/chrome/browser/tabs/tab.mm",
        "patchSetId": 1
      },
      "lineNbr": 331,
      "author": {
        "id": 1133065
      },
      "writtenOn": "2017-10-25T20:13:24Z",
      "side": 1,
      "message": "Tab\u0027s implementation of WebStateObserver callbacks sends out |-notifyTabChanged:|, and receivers of that callback expect isVoiceSearchResultsTab to be correct.  This means that VoiceSearchNavigations needs to finish the model updates in its WebStateObserve callbacks before Tab.  Since VoiceSearchNavigations registers itself as a WebStateObserver when created, that means it needs to get initialized here.",
      "parentUuid": "305a1a36_d9683eaf",
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a76f1d0_c5cfda9f",
        "filename": "ios/chrome/browser/tabs/tab.mm",
        "patchSetId": 1
      },
      "lineNbr": 331,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2017-10-25T20:57:52Z",
      "side": 1,
      "message": "If the callback needs to be invoked before Tab\u0027s then it is better to create the tab helper in AttachTabHelper method (in tab_helper_util.mm), and put the call to VoiceSearchNavigations::CreateForWebState() before LegacyTabHelper::CreateForWebState(). You\u0027ll also have to put a comment explaining why it is created before LegacyTabHelper.\n\nIn general it is an error to create tab helpers outside of AttachTabHelper.",
      "parentUuid": "08883a20_23596cd5",
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcad76ae_18c6e058",
        "filename": "ios/chrome/browser/tabs/tab.mm",
        "patchSetId": 1
      },
      "lineNbr": 393,
      "author": {
        "id": 1000119
      },
      "writtenOn": "2017-10-24T01:29:25Z",
      "side": 1,
      "message": "Is this logic that could move into the tab helper too?",
      "range": {
        "startLine": 384,
        "startChar": 0,
        "endLine": 393,
        "endChar": 14
      },
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a029383_1ef8b151",
        "filename": "ios/chrome/browser/tabs/tab.mm",
        "patchSetId": 1
      },
      "lineNbr": 393,
      "author": {
        "id": 1133065
      },
      "writtenOn": "2017-10-25T20:13:24Z",
      "side": 1,
      "message": "I think it\u0027s better to leave that logic as-is.  That way, VoiceSearchNavigations clearly has an intended purpose of storing which NavigationItems were created for voice searches.  This specific logic of not using history navigations is specific to the UI and whether to display the voice search bar.  This will ultimately be moved to the VoiceSearchBarCoordinator\u0027s parent coordinator.",
      "parentUuid": "dcad76ae_18c6e058",
      "range": {
        "startLine": 384,
        "startChar": 0,
        "endLine": 393,
        "endChar": 14
      },
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22c4f8f5_a2488b14",
        "filename": "ios/chrome/browser/ui/browser_view_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 3942,
      "author": {
        "id": 1000119
      },
      "writtenOn": "2017-10-24T01:29:25Z",
      "side": 1,
      "message": "Is this replacing the notifyTabChanged call that was removed from tab.mm?",
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b6179cf_5dbe3bb9",
        "filename": "ios/chrome/browser/ui/browser_view_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 3942,
      "author": {
        "id": 1133065
      },
      "writtenOn": "2017-10-25T20:13:24Z",
      "side": 1,
      "message": "Yep, that\u0027s correct.  This also fixes a long-standing UI glitch where sometimes we were attempting to animate in the voice search bar while the voice input view was being dismissed.",
      "parentUuid": "22c4f8f5_a2488b14",
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6153a4b1_934e7c75",
        "filename": "ios/chrome/browser/voice/voice_search_navigations.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-10-24T15:08:42Z",
      "side": 1,
      "message": "Should this be a TabHelper?",
      "range": {
        "startLine": 17,
        "startChar": 6,
        "endLine": 17,
        "endChar": 28
      },
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "131bc5cf_3bc1f63a",
        "filename": "ios/chrome/browser/voice/voice_search_navigations.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1133065
      },
      "writtenOn": "2017-10-25T20:13:24Z",
      "side": 1,
      "message": "It\u0027s performing the logic of a \"tab helper\", but is not explicitly named as such.  I\u0027m not really sure what value is added by renaming this class to reference Tab since A) we\u0027re trying to eliminate Tab, and B) in the future WebStateListDelegate will set up a bunch of WebStateUserData objects, so it\u0027s not even related to Tab at all.  If anything, maybe we should start calling these classes WebStateHelpers?",
      "parentUuid": "6153a4b1_934e7c75",
      "range": {
        "startLine": 17,
        "startChar": 6,
        "endLine": 17,
        "endChar": 28
      },
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fdc577a9_6c62eb38",
        "filename": "ios/chrome/browser/voice/voice_search_navigations.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-10-25T20:29:53Z",
      "side": 1,
      "message": "If something performs logic of a \"tab helper\" then it should probably be named as TabHelper. The value would be consistent naming. It is true that Tab will be removed, but all TabHelpers are part of chrome architecture in //chrome layer, so TabHelper pattern will stay.",
      "parentUuid": "131bc5cf_3bc1f63a",
      "range": {
        "startLine": 17,
        "startChar": 6,
        "endLine": 17,
        "endChar": 28
      },
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1471a10c_386a4a15",
        "filename": "ios/chrome/browser/voice/voice_search_navigations_unittest.mm",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-10-24T15:08:42Z",
      "side": 1,
      "message": "nit: Add a linebreak after this include.",
      "range": {
        "startLine": 5,
        "startChar": 61,
        "endLine": 5,
        "endChar": 0
      },
      "revId": "cf54d6642e3f9564061ea4b955f985a5c2614389",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}