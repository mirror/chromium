<h1>User Interface</h1>

<p>
  Extension user interface should be purposeful and minimal.
  Just like the extensions themselves,
  the UI should customize or enhance the browsing experience,
  not distract from it.
</p>

<p>
  While there are several different ways to implement a UI within an extension,
  only one or a few may be relevant to its functionality.
</p>

<h2 id="action">Browser Action and Page Action</h2>
<p>
  Declaring
  <a href="/browserAction"><code>browser_action</code></a> or
  <a href="/pageAction"><code>page_action</code></a>
  dictates the availability of an extension to the user
  and toolbar icon behavior.
</p>
<h3 id="browser">Browser Action</h2>
<p>
  Declare browser_action
  if the extension has features that make sense on most pages.
  This keeps the toolbar icon in full color and accessible.
</p>
<pre data-filename="manifest.json">
  {
    "name": "My Awesome browserAction Extension",
    ...
    "browser_action": {

        }
    ...
  }
</pre>


<h3 id="page">Page Action</h3>
<p>
  If the extension is only usable on certian websites,
  declare page_action in manifest.
</p>
<pre data-filename="manifest.json">
  {
    "name": "My Awesome pageAction Extension",
    ...
    "page_action": {

        }
    ...
  }
</pre>
<p>
  Using page_action will grey out the toolbar icon
  when the extension is unusable.
</p>
<img src="{{static}}/images/user_interface/page_action_inactive.png"
  width="72" height="72"
  alt="Badge On" />
  <img src="{{static}}/images/user_interface/page_action_active.png"
    width="72" height="72"
    alt="Badge On" />

<p>
  Declare rules usability rules with <a href="/declarativeContent">
  <code>chrome.declarativeContent</code></a> under the
  <a href="/runtime#event-onInstalled"><code>runtime.onInstalled</code></a>
  listener in a <a href="/background_pages">background script</a>.
  The <a href="/samples#search:page%20action%20by%20url">Page action by URL</a>
  sample extension calls <a href="/pageAction#method-show">
  <code>ShowPageAction()</code></a>
  under actions when the current page url contains a 'g':
</p>
<pre data-filename="background.js">
  chrome.runtime.onInstalled.addListener(function() {
    // Replace all rules ...
    chrome.declarativeContent.onPageChanged.removeRules(undefined, function() {
      // With a new rule ...
      chrome.declarativeContent.onPageChanged.addRules([
        {
          // That fires when a page's URL contains a 'g' ...
          conditions: [
            new chrome.declarativeContent.PageStateMatcher({
              pageUrl: { urlContains: 'g' },
            })
          ],
          // And shows the extension's page action.
          actions: [ new chrome.declarativeContent.ShowPageAction() ]
        }
      ]);
    });
  });
</pre>


<h2 id="icons">Icons</h2>
<p>
  Extensions require at least one icon to represent it.
  For the best visual results,
  it should be provided as a png in at least the following sizes:
  <ul>
    <li>
      16x16 - this will be used as the favicon for the extensions pages
    </li>
    <li>
      32 x 32 - Windows computers often require this size.
      Providing this option will prevent size distortion when shrinking
      the 48 x 48 option.
    </li>
    <li>
      48 x 48 - displayed in the extension management page
    </li>
    <li>
      128 x 128 - used to display during installation and in the Chrome Web Store
    </li>
  </ul>
</p>
<p>
  They are registered in the manifest under the icons field:
</p>

<pre data-filename="manifest.json">

  {
    "name": "My Awesome Extension",
    ...
    "icons": {
      "16": "extension_icon16.png",
      "32": "extension_icon32.png",
      "48": "extension_icon48.png",
      "128": "extension_icon128.png"
    }
    ...
  }
</pre>
<p>
  Icons specific to the toolbar can be registered under
  <a href="/browserAction"><code>browser_action</code></a> or
  <a href="/pageAction"><code>page_action</code></a> in the manifest.
  Multiple sizes are encourage to help scale for the 16-dip space.
  At minimum, 16x16 and 32x32 are recommended.
</p>
<pre data-filename="manifest.json">
  {
    "name": "My Awesome browserAction Extension",
    ...
    "browser_action": {
        "default_icon": {
          "16": "extension_toolbar_icon16.png",
          "32": "extension_toolbar_icon32.png"
          }
        }
    ...
  }
</pre>

<pre data-filename="manifest.json">
  {
    "name": "My Awesome pageAction Extension",
    ...
    "page_action": {
        "default_icon": {
          "16": "extension_toolbar_icon16.png",
          "32": "extension_toolbar_icon32.png"
          }
        }
    ...
  }
</pre>
<p>
  Any additional sizes are allowed,
  but ensure that all icons are square or they may be distorted.
  Use big and colorful icons with alpha transparency to soften the edges.
  If no icons are supplied, chrome will add a generic one to the toolbar.
</p>

<p>
  Additional <a href="https://developer.chrome.com/webstore/images">images</a>
  such as screenshots and promotional material are provided
  when uploading to the developer dashboard,
  but these will not need to be registered in the manifest.
</p>

<h2 id="popup">Popup</h2>
<p>
  A popup is an HTML file that is displayed
  when the user clicks on the toolbar icon.
  A popup works very similarly to a web page;
  it can contain script tags and any HTML elements needed,
  but does not allow inline JavaScript.
  In the case of the
  <a href="https://developer.chrome.com/extensions/samples#search:drink">
  Drink Water Event</a> sample,
  the popup is used for the user to set the time
  for their reminder to stay hydrated.
</p>
<img src="{{static}}/images/user_interface/popup.png"
  height="300"
  alt="Popup" />
<pre data-filename="popup.html">
  &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;Water Popup&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;img src='./stay_hydrated.png' id='hydrateImage'&gt;
        &lt;button id='sampleSecond' value='0.1'&gt;Sample Second&lt;/button&gt;
        &lt;button id='15min' value='15'>15 Minutes&lt;/button&gt;
        &lt;button id='30min' value='30'>30 Minutes&lt;/button&gt;
        &lt;button id='cancelAlarm'>Cancel Alarm&lt;/button&gt;
     &lt;script src="popup.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
  &lt;/html&gt;
</pre>
<p>
The popup can be registered in the manifest, under browser action or page action:
</p>
<pre data-filename="manifest.json">
  {
    "name": "Drink Water Event",
    ...
    "browser_action": {
      "default_popup": "popup.html"
    }
    ...
  }
</pre>
<p>
  Popups can also be dynamically by calling
  <a href="/browserAction#method-setPopup">
    <code>browserAction.setPopup</code></a> or
  <a href="/pageAction#method-setPopup"><code>pageAction.setPopup</code></a>
</p>

<pre data-filename="background.js">
  chrome.storage.local.get("signed_in", function(data) {
    if(data.signed_in) {
      chrome.browserAction.setPopup({popup: "popup.html"});
    } else {
      chrome.browserAction.setPopup({popup: "popup_sign_in.html"});
    }
  });
</pre>

<h2 id="tooltip">Tooltip</h1>
<p>
 Use the tooltip to give a short description or instructions to the user
 when they hover over the browser icon.
</p>
<img src="{{static}}/images/user_interface/tooltip.png"
  alt="Tooltip" />
<p>
  Tooltips are registered in the <code>default_title</code> field
  under <code>browser_action</code> or <code>page_action</code>.
</p>
<pre data-filename="manifest.json">
  {
  "name": "Tab Flipper",
   ...
    "browser_action": {
      "default_title": "Press Ctrl(Win)/Command(Mac)+Shift+Right/Left to flip tabs"
    }
  ...
 }
</pre>
<p>
  Tooltips can also be set or updated by calling
  <a href="/browserAction#method-setTitle">
  <code>browserAction.setTitle</code></a> and
  <a href="/pageAction#method-setTitle">
  <code>pageAction.setTitle</code></a>.
</p>
<pre data-filename="background.js">
  chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.browserAction.setTitle({tabId: tab.id, title: "You are on tab:" + tab.id});
  });
</pre>
<p>
  Specialized locale strings are implimented with
  <a href="/i18n">Internationalization</a>.
</p>

<h2 id="badge">Badge</h2>
<p>
  Badges display up to four characters on top of the browser icon
  and can only be used by extensions that declare <code>browser_action</code>
  in their manifest.
  Use them to indicate the state of the extension.
  The
  <a href="https://developer.chrome.com/extensions/samples#search:drink">
  Drink Water Event</a> sample has no badge when there is not an alarm set,
  but shows "ON" to let the user know they haven't missed the notification.
</p>
<img src="{{static}}/images/user_interface/badge_off_example.png"
  width="72" height="72"
  alt="Badge Off" />
<img src="{{static}}/images/user_interface/badge_on_example.png"
  width="72" height="72"
  alt="Badge On" />
</p>
  Set the text of the badge by calling
  <a href="/browserAction#method-setBadgeText">
    <code>chrome.browserAction.setBadgeText</code>
  </a>
  and the background color by calling
  <a href="/browserAction#method-setBadgeBackgroundColor">
    <code>chrome.browserAction.setBadgeBackgroundColor</code>
  </a>.
</p>
<pre data-filename="background.js">
  chrome.browserAction.setBadgeText({text: 'ON'});
  chrome.browserAction.setBadgeBackgroundColor({color: '#4688F1'});
</pre>

<h2 id="omnibox">Omnibox</h2>
<p>
  Users can interact with an extension through the
  <a href="/omnibox">omnibox</a>
  by including the omnibox field in the manifest
  and registering a keyword.
  <!-- TODO include link to sample when live -->
  The <a href=#>Omnibox New Tab Search</a>
  sample extension uses "nt" as the keyword.
</p>
<!-- Possible reduce example to relevant fields -->
<pre data-filename="manifest.json">
  {
    "name": "Omnibox New Tab Search",
    "description": "Type 'nt' plus a search term into the Omnibox to open search in new tab.",
    "version": "1.0",
    "background": {
      "scripts": ["background.js"],
      "persistent": false
    },
    <b>"omnibox": { "keyword" : "nt" },</b>
    "manifest_version": 2,
    "browser_action": {
      "default_icon": {
        <b>"16": "newtab_search16.png",</b>
        "32": "newtab_search32.png"
        }
    },
    "icons": {
      "16": "newtab_search16.png",
      "32": "newtab_search32.png",
      "48": "newtab_search48.png",
      "128": "newtab_search128.png"
    }
  }
</pre>
<p>
  When the user types "nt" into the omnibox,
  it activates the extension.
  To signal this to the user,
  it greyscales the provided 16x16 icon
  and includes it in the omnibox next to the extension name.
</p>
<img src="{{static}}/images/user_interface/omnibox.png"
  alt="Active Omnibox" />

<p>
  The extension then executes code listening to
  <a href="/omnibox#event-onInputEntered">
    <code>omnibox.onInputEntered</code></a> event
  in the <a href="/background_pages">background script</a>.
</p>
<pre data-filename="background.js">
chrome.omnibox.onInputEntered.addListener(function(text) {
  // Encode user input for special characters , / ? : @ & = + $ #
  var newURL = 'https://www.google.com/search?q=' + encodeURIComponent(text);
  chrome.tabs.create({ url: newURL });
});
</pre>

<h2 id="context_menu">Context Menu</h2>
<p>
  Users can interact with an extension through a
  <a href="/contextMenus">context menu</a> opion by
  granting permission to API in the manifest.
  The 16x16 icon is displayed next to the new menu entry.
</p>
<pre data-filename="manifest.json">
  {
    "name": "Global Google Search",
    "description": "Use the context menu to search a different country's Google",
    "version": "1.0",
    "manifest_version": 2,
    "options_page": "options.html",
    <b>"permissions": ["contextMenus",</b> "storage"],
    "background": {
      "scripts": [ "locales.js", "background.js"],
      "persistent": false
    },
    "browser_action": {
      "default_popup": "options.html",
      <b>"default_icon": {
        "16": "globalGoogle16.png",</b>
        "32": "globalGoogle32.png",
      }
    },
    "icons": {
     <b>"16": "globalGoogle16.png",</b>
     "48": "globalGoogle48.png",
    "128": "globalGoogle128.png"
   }
  }
</pre>
<img src="{{static}}/images/user_interface/contexticon.png"
  height="300"
  alt="Context Menu Icon" />
<p>
  An extension create a context menu by calling
  <a href="/contextMenus#method-create"><code>contextMenus.create</code></a>
  in the background script.
  This should be done under the
  <a href="/runtime#event-onInstalled"><code>runtime.onInstalled</code></a>
  listener event.
</p>
<pre data-filename="background.js">
  chrome.runtime.onInstalled.addListener(function() {
    for (let key of Object.keys(kLocales)) {
      chrome.contextMenus.create({
        id: key,
        title: kLocales[key],
        type: 'normal',
        contexts: ['selection'],
      });
    }
  });
</pre>

<p>
  The Global Google Search context menu example
  creates multiple options from the list in
  <a
  href="/extensions/examples/api/contextMenus/global_context_search/locales.js">
    locales.js</a>.
  When an extension contains more than one context menu,
  Google Chrome automatically collapses them into a single parent menu.
</p>
<img src="{{static}}/images/user_interface/contextmenu.png"
  height="300"
  alt="Context Menu Icon" />
