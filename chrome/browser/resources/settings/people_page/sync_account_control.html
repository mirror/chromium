<link rel="import" href="chrome://resources/html/polymer.html">

<link rel="import" href="chrome://resources/cr_elements/icons.html">
<link rel="import" href="chrome://resources/html/assert.html">
<link rel="import" href="chrome://resources/html/cr/ui/focus_without_ink.html">
<link rel="import" href="chrome://resources/html/i18n_behavior.html">
<link rel="import" href="chrome://resources/html/icon.html">
<link rel="import" href="chrome://resources/html/util.html">
<link rel="import" href="chrome://resources/html/web_ui_listener_behavior.html">
<link rel="import" href="chrome://resources/polymer/v1_0/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="chrome://resources/polymer/v1_0/paper-button/paper-button.html">
<link rel="import" href="../controls/settings_toggle_button.html">
<link rel="import" href="sync_page.html">
<link rel="import" href="profile_info_browser_proxy.html">
<link rel="import" href="sync_browser_proxy.html">
<link rel="import" href="../route.html">
<link rel="import" href="../settings_page/settings_animated_pages.html">
<link rel="import" href="../settings_page/settings_subpage.html">
<link rel="import" href="../settings_shared_css.html">


<link rel="import" href="import_data_dialog.html">
<link rel="import" href="manage_profile.html">


<dom-module id="settings-sync-account-control">
  <template>
    <style include="settings-shared iron-flex">
      setting-box.middle {
        /* Per spec, middle text is indented 20px in this section. */
        -webkit-margin-start: 20px;
      }

      #profile-icon {
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        border-radius: 20px;
        flex-shrink: 0;
        height: 40px;
        width: 40px;
      }
    </style>
    <div id="picture-subpage-trigger" class="settings-box first two-line">
      <template is="dom-if" if="[[syncStatus]]">
        <div id="profile-icon"
            style="background-image: [[getIconImageSet_(profileIconUrl_)]]">
        </div>

        <div class="middle two-line no-min-width">

          <div class="flex text-elide">
            <span id="profile-name">[[profileName_]]</span>
            <div class="secondary" hidden="[[!syncStatus.signedIn]]">
              [[syncStatus.signedInUsername]]
            </div>
          </div>
        </div>

        <template is="dom-if" if="[[showSignin_(syncStatus)]]">
          <paper-button class="primary-button" on-tap="onSigninTap_"
              disabled="[[syncStatus.setupInProgress]]">
            $i18n{syncSignin}
          </paper-button>
        </template>
        <template is="dom-if" if="[[syncStatus.signedIn]]">
          <div class="separator"></div>
          <paper-button id="disconnectButton" class="secondary-button"
              on-tap="onDisconnectTap_"
              disabled="[[syncStatus.setupInProgress]]">
            $i18n{syncDisconnect}
          </paper-button>
        </template>
      </template>
    </div>
  </template>
  <script src="sync_account_control.js"></script>
</dom-module>
