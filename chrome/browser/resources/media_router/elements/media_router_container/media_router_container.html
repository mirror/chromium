<link rel="import" href="chrome://resources/polymer/polymer/polymer.html">
<link rel="import" href="chrome://resources/polymer/core-icon/core-icon.html">
<link rel="import" href="chrome://resources/polymer/core-icons/hardware-icons.html">
<link rel="import" href="chrome://resources/polymer/core-menu/core-menu.html">
<link rel="import" href="chrome://resources/polymer/core-toolbar/core-toolbar.html">
<link rel="import" href="chrome://resources/polymer/paper-item/paper-item.html">
<link rel="import" href="chrome://resources/polymer/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../cast_mode_picker/cast_mode_picker.html">
<link rel="import" href="../drop_down_button/drop_down_button.html">
<link rel="import" href="../issue_banner/issue_banner.html">
<link rel="import" href="../route_details/route_details.html">
<polymer-element name="media-router-container">
<template>
  <link rel="stylesheet" href="media_router_container.css">
  <div id="transparent-overlay"
      class="{{ {castModeHidden: castModeHidden_} | isCastModeHidden }}"
      on-click="{{hideCastMode}}">
  </div>
  <core-toolbar id="container-header"
      class="{{ {state: currentView_} | isSinkPickerHidden}}">
    <div id="router-header-text">{{headerText}}</div>
    <drop-down-button id="drop-down-button"
        on-click="{{toggleCastMode}}">
    </drop-down-button>
    <cast-mode-picker id="cast-modes"
        class="{{ {castModeHidden: castModeHidden_} | isCastModeHidden }}"
        castModeList="{{castModeList}}"
        selectedCastModeValue="{{selectedCastModeValue_}}">
    </cast-mode-picker>
    <paper-icon-button id="close-button" on-click="{{closeButtonClicked}}">
    </paper-icon-button>
  </core-toolbar>
  <issue-banner id="issue-banner" issue="{{issue}}"
      class="{{ {state: currentView_, issue: issue} | isIssueBannerHidden}}">
  </issue-banner>
  <route-details id="route-details"
      class="{{ {state: currentView_} | isRouteDetailsHidden}}"
      route="{{currentRoute_}}" sink="{{sinkMap_[[currentRoute_.sinkId]]}}"
      on-back-click="{{showSinkPickerView}}"
      on-close-route-click="{{showSinkPickerView}}">
  </route-details>
  <!-- TODO(apacible): selectedAttribute here is a workaround for
     https://github.com/Polymer/polymer/issues/946. Remove when core-menu
     is updated. -->
  <core-menu id="sink-list" selectedAttribute=""
      class="{{ {state: currentView_} | isSinkPickerHidden}}">
    <template repeat="{{sink in sinkList}}">
      <paper-item class="sink" on-click="{{onSinkClick}}">
        <!-- TODO(apacible): Show device icon based on device type. -->
        <core-icon class="sink-icon" icon="hardware:chromecast"></core-icon>
        <div>
          {{sink.name}}
          <template bind="{{sinkToRouteMap_[sink.id] as route}}">
            <template if="{{route}}">
              <div class="route">
                {{route.title}}
              </div>
            </template>
          </template>
        </div>
      </paper-item>
    </template>
  </core-menu>
</template>
<script src="media_router_container.js"></script>
</polymer-element>
