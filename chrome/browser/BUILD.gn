# Copyright 2014 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/chrome_build.gni")
import("//build/config/crypto.gni")
import("//build/config/features.gni")
import("//build/config/ui.gni")
import("//build/split_static_library.gni")
import("//chrome/common/features.gni")
import("//components/os_crypt/features.gni")
import("//media/media_options.gni")
import("//third_party/protobuf/proto_library.gni")

# //build/config/android/rules.gni imports //tools/grit/grit_rule.gni, which
# produces a conflict for the "grit" template so we have to only include one.
if (is_android) {
  import("//build/config/android/rules.gni")
} else {
  import("//tools/grit/grit_rule.gni")
}

additional_modules_list_file =
    "$root_gen_dir/chrome/browser/internal/additional_modules_list.txt"

gypi_values = exec_script("//build/gypi_to_gn.py",
                          [ rebase_path("../chrome_browser.gypi") ],
                          "scope",
                          [ "../chrome_browser.gypi" ])

if (is_win) {
  # This is in a separate config so the flags can be applied to dependents.
  # ldflags in GN aren't automatically inherited.
  config("browser_win_linker_flags") {
    libs = [
      "credui.lib",
      "cryptui.lib",
      "dwmapi.lib",
      "netapi32.lib",
      "ndfapi.lib",  # Used by browser/net/net_error_diagnostics_dialog_win.h
      "pdh.lib",  # Used by browser/private_working_set_snapshot.h
    ]
    ldflags = [
      "/DELAYLOAD:ndfapi.dll",
      "/DELAYLOAD:pdh.dll",  # The task manager is rarely used.
    ]
  }
}

# Use a static library here because many test binaries depend on this but don't
# require many files from it. This makes linking more efficient.
split_static_library("browser") {
  # Split into multiple static libraries on Windows official builds, where we
  # run into a 2GB max size limit.
  if (is_win && is_official_build) {
    split_count = 5
  } else {
    split_count = 1
  }

  sources = [
    "about_flags.cc",
    "about_flags.h",
    "after_startup_task_utils.cc",
    "after_startup_task_utils.h",
    "app_controller_mac.h",
    "app_controller_mac.mm",
    "app_mode/app_mode_utils.cc",
    "app_mode/app_mode_utils.h",
    "autocomplete/autocomplete_classifier_factory.cc",
    "autocomplete/autocomplete_classifier_factory.h",
    "autocomplete/chrome_autocomplete_provider_client.cc",
    "autocomplete/chrome_autocomplete_provider_client.h",
    "autocomplete/chrome_autocomplete_scheme_classifier.cc",
    "autocomplete/chrome_autocomplete_scheme_classifier.h",
    "autocomplete/in_memory_url_index_factory.cc",
    "autocomplete/in_memory_url_index_factory.h",
    "autocomplete/shortcuts_backend_factory.cc",
    "autocomplete/shortcuts_backend_factory.h",
    "autocomplete/shortcuts_extensions_manager.cc",
    "autocomplete/shortcuts_extensions_manager.h",
    "autofill/personal_data_manager_factory.cc",
    "autofill/personal_data_manager_factory.h",
    "autofill/risk_util.cc",
    "autofill/risk_util.h",
    "autofill/validation_rules_storage_factory.cc",
    "autofill/validation_rules_storage_factory.h",
    "background_sync/background_sync_controller_factory.cc",
    "background_sync/background_sync_controller_factory.h",
    "background_sync/background_sync_controller_impl.cc",
    "background_sync/background_sync_controller_impl.h",
    "background_sync/background_sync_permission_context.cc",
    "background_sync/background_sync_permission_context.h",
    "bad_message.cc",
    "bad_message.h",
    "banners/app_banner_manager.cc",
    "banners/app_banner_manager.h",
    "banners/app_banner_metrics.cc",
    "banners/app_banner_metrics.h",
    "banners/app_banner_settings_helper.cc",
    "banners/app_banner_settings_helper.h",
    "bitmap_fetcher/bitmap_fetcher.cc",
    "bitmap_fetcher/bitmap_fetcher.h",
    "bitmap_fetcher/bitmap_fetcher_delegate.h",
    "bitmap_fetcher/bitmap_fetcher_service.cc",
    "bitmap_fetcher/bitmap_fetcher_service.h",
    "bitmap_fetcher/bitmap_fetcher_service_factory.cc",
    "bitmap_fetcher/bitmap_fetcher_service_factory.h",
    "bookmarks/bookmark_model_factory.cc",
    "bookmarks/bookmark_model_factory.h",
    "bookmarks/bookmark_stats.cc",
    "bookmarks/bookmark_stats.h",
    "bookmarks/chrome_bookmark_client.cc",
    "bookmarks/chrome_bookmark_client.h",
    "bookmarks/managed_bookmark_service_factory.cc",
    "bookmarks/managed_bookmark_service_factory.h",
    "bookmarks/startup_task_runner_service_factory.cc",
    "bookmarks/startup_task_runner_service_factory.h",
    "browser_about_handler.cc",
    "browser_about_handler.h",
    "browser_process.cc",
    "browser_process.h",
    "browser_process_impl.cc",
    "browser_process_impl.h",
    "browser_process_platform_part.h",
    "browser_process_platform_part_android.cc",
    "browser_process_platform_part_android.h",
    "browser_process_platform_part_base.cc",
    "browser_process_platform_part_base.h",
    "browser_process_platform_part_chromeos.cc",
    "browser_process_platform_part_chromeos.h",
    "browser_process_platform_part_mac.h",
    "browser_process_platform_part_mac.mm",
    "browser_shutdown.cc",
    "browser_shutdown.h",
    "browsing_data/browsing_data_appcache_helper.cc",
    "browsing_data/browsing_data_appcache_helper.h",
    "browsing_data/browsing_data_cache_storage_helper.cc",
    "browsing_data/browsing_data_cache_storage_helper.h",
    "browsing_data/browsing_data_channel_id_helper.cc",
    "browsing_data/browsing_data_channel_id_helper.h",
    "browsing_data/browsing_data_cookie_helper.cc",
    "browsing_data/browsing_data_cookie_helper.h",
    "browsing_data/browsing_data_counter_factory.cc",
    "browsing_data/browsing_data_counter_factory.h",
    "browsing_data/browsing_data_counter_utils.cc",
    "browsing_data/browsing_data_counter_utils.h",
    "browsing_data/browsing_data_database_helper.cc",
    "browsing_data/browsing_data_database_helper.h",
    "browsing_data/browsing_data_file_system_helper.cc",
    "browsing_data/browsing_data_file_system_helper.h",
    "browsing_data/browsing_data_filter_builder.cc",
    "browsing_data/browsing_data_filter_builder.h",
    "browsing_data/browsing_data_helper.cc",
    "browsing_data/browsing_data_helper.h",
    "browsing_data/browsing_data_indexed_db_helper.cc",
    "browsing_data/browsing_data_indexed_db_helper.h",
    "browsing_data/browsing_data_local_storage_helper.cc",
    "browsing_data/browsing_data_local_storage_helper.h",
    "browsing_data/browsing_data_quota_helper.cc",
    "browsing_data/browsing_data_quota_helper.h",
    "browsing_data/browsing_data_quota_helper_impl.cc",
    "browsing_data/browsing_data_quota_helper_impl.h",
    "browsing_data/browsing_data_remover.cc",
    "browsing_data/browsing_data_remover.h",
    "browsing_data/browsing_data_remover_factory.cc",
    "browsing_data/browsing_data_remover_factory.h",
    "browsing_data/browsing_data_service_worker_helper.cc",
    "browsing_data/browsing_data_service_worker_helper.h",
    "browsing_data/cache_counter.cc",
    "browsing_data/cache_counter.h",
    "browsing_data/canonical_cookie_hash.cc",
    "browsing_data/canonical_cookie_hash.h",
    "browsing_data/cookies_tree_model.cc",
    "browsing_data/cookies_tree_model.h",
    "browsing_data/downloads_counter.cc",
    "browsing_data/downloads_counter.h",
    "browsing_data/local_data_container.cc",
    "browsing_data/local_data_container.h",
    "browsing_data/media_licenses_counter.cc",
    "browsing_data/media_licenses_counter.h",
    "browsing_data/origin_filter_builder.cc",
    "browsing_data/origin_filter_builder.h",
    "browsing_data/registrable_domain_filter_builder.cc",
    "browsing_data/site_data_size_collector.cc",
    "browsing_data/site_data_size_collector.h",
    "budget_service/budget_database.cc",
    "budget_service/budget_database.h",
    "budget_service/budget_manager.cc",
    "budget_service/budget_manager.h",
    "budget_service/budget_manager_factory.cc",
    "budget_service/budget_manager_factory.h",
    "budget_service/budget_service_impl.cc",
    "budget_service/budget_service_impl.h",
    "character_encoding.cc",
    "character_encoding.h",
    "chrome_browser_application_mac.h",
    "chrome_browser_application_mac.mm",
    "chrome_browser_field_trials.cc",
    "chrome_browser_field_trials.h",
    "chrome_browser_main.cc",
    "chrome_browser_main.h",
    "chrome_browser_main_android.cc",
    "chrome_browser_main_android.h",
    "chrome_browser_main_extra_parts.h",
    "chrome_browser_main_linux.cc",
    "chrome_browser_main_linux.h",
    "chrome_browser_main_mac.h",
    "chrome_browser_main_mac.mm",
    "chrome_browser_main_win.cc",
    "chrome_browser_main_win.h",
    "chrome_child_process_watcher.cc",
    "chrome_child_process_watcher.h",
    "chrome_content_browser_client.cc",
    "chrome_content_browser_client.h",
    "chrome_content_browser_client_parts.h",
    "chrome_device_client.cc",
    "chrome_device_client.h",
    "chrome_net_benchmarking_message_filter.cc",
    "chrome_net_benchmarking_message_filter.h",
    "chrome_notification_types.h",
    "chrome_quota_permission_context.cc",
    "chrome_quota_permission_context.h",
    "command_observer.h",
    "command_updater.cc",
    "command_updater.h",
    "command_updater_delegate.h",
    "component_updater/chrome_component_updater_configurator.cc",
    "component_updater/chrome_component_updater_configurator.h",
    "component_updater/component_patcher_operation_out_of_process.cc",
    "component_updater/component_patcher_operation_out_of_process.h",
    "component_updater/component_updater_prefs.cc",
    "component_updater/component_updater_prefs.h",
    "component_updater/component_updater_resource_throttle.cc",
    "component_updater/component_updater_resource_throttle.h",
    "component_updater/ev_whitelist_component_installer.cc",
    "component_updater/ev_whitelist_component_installer.h",
    "component_updater/file_type_policies_component_installer.cc",
    "component_updater/file_type_policies_component_installer.h",
    "component_updater/origin_trials_component_installer.cc",
    "component_updater/origin_trials_component_installer.h",
    "component_updater/pnacl_component_installer.cc",
    "component_updater/pnacl_component_installer.h",
    "component_updater/recovery_component_installer.cc",
    "component_updater/recovery_component_installer.h",
    "component_updater/sth_set_component_installer.cc",
    "component_updater/sth_set_component_installer.h",
    "component_updater/subresource_filter_component_installer.cc",
    "component_updater/subresource_filter_component_installer.h",
    "component_updater/supervised_user_whitelist_installer.cc",
    "component_updater/supervised_user_whitelist_installer.h",
    "component_updater/sw_reporter_installer_win.cc",
    "component_updater/sw_reporter_installer_win.h",
    "component_updater/swiftshader_component_installer.cc",
    "component_updater/swiftshader_component_installer.h",
    "content_settings/chrome_content_settings_client.cc",
    "content_settings/chrome_content_settings_client.h",
    "content_settings/chrome_content_settings_utils.cc",
    "content_settings/chrome_content_settings_utils.h",
    "content_settings/cookie_settings_factory.cc",
    "content_settings/cookie_settings_factory.h",
    "content_settings/host_content_settings_map_factory.cc",
    "content_settings/host_content_settings_map_factory.h",
    "content_settings/local_shared_objects_container.cc",
    "content_settings/local_shared_objects_container.h",
    "content_settings/tab_specific_content_settings.cc",
    "content_settings/tab_specific_content_settings.h",
    "content_settings/web_site_settings_uma_util.cc",
    "content_settings/web_site_settings_uma_util.h",
    "crash_upload_list/crash_upload_list.cc",
    "crash_upload_list/crash_upload_list.h",
    "custom_handlers/protocol_handler_registry.cc",
    "custom_handlers/protocol_handler_registry.h",
    "custom_handlers/protocol_handler_registry_factory.cc",
    "custom_handlers/protocol_handler_registry_factory.h",
    "data_usage/tab_id_annotator.cc",
    "data_usage/tab_id_annotator.h",
    "data_usage/tab_id_provider.cc",
    "data_usage/tab_id_provider.h",
    "defaults.cc",
    "defaults.h",
    "dom_distiller/dom_distiller_service_factory.cc",
    "dom_distiller/dom_distiller_service_factory.h",
    "dom_distiller/lazy_dom_distiller_service.cc",
    "dom_distiller/lazy_dom_distiller_service.h",
    "dom_distiller/profile_utils.cc",
    "dom_distiller/profile_utils.h",
    "dom_distiller/tab_utils.cc",
    "dom_distiller/tab_utils.h",
    "domain_reliability/service_factory.cc",
    "domain_reliability/service_factory.h",
    "download/all_download_item_notifier.cc",
    "download/all_download_item_notifier.h",
    "download/chrome_download_manager_delegate.cc",
    "download/chrome_download_manager_delegate.h",
    "download/download_crx_util_android.cc",
    "download/download_file_picker.cc",
    "download/download_file_picker.h",
    "download/download_history.cc",
    "download/download_history.h",
    "download/download_item_model.cc",
    "download/download_item_model.h",
    "download/download_path_reservation_tracker.cc",
    "download/download_path_reservation_tracker.h",
    "download/download_prefs.cc",
    "download/download_prefs.h",
    "download/download_query.cc",
    "download/download_query.h",
    "download/download_request_limiter.cc",
    "download/download_request_limiter.h",
    "download/download_resource_throttle.cc",
    "download/download_resource_throttle.h",
    "download/download_service.cc",
    "download/download_service.h",
    "download/download_service_factory.cc",
    "download/download_service_factory.h",
    "download/download_service_impl.cc",
    "download/download_service_impl.h",
    "download/download_started_animation.h",
    "download/download_stats.cc",
    "download/download_stats.h",
    "download/download_status_updater.cc",
    "download/download_status_updater.h",
    "download/download_status_updater_mac.mm",
    "download/download_status_updater_win.cc",
    "download/download_target_determiner.cc",
    "download/download_target_determiner.h",
    "download/download_target_determiner_delegate.h",
    "download/download_target_info.h",
    "download/download_ui_controller.cc",
    "download/download_ui_controller.h",
    "download/drag_download_item.h",
    "download/save_package_file_picker.cc",
    "download/save_package_file_picker.h",
    "engagement/site_engagement_eviction_policy.cc",
    "engagement/site_engagement_eviction_policy.h",
    "engagement/site_engagement_helper.cc",
    "engagement/site_engagement_helper.h",
    "engagement/site_engagement_metrics.cc",
    "engagement/site_engagement_metrics.h",
    "engagement/site_engagement_observer.cc",
    "engagement/site_engagement_observer.h",
    "engagement/site_engagement_score.cc",
    "engagement/site_engagement_score.h",
    "engagement/site_engagement_service.cc",
    "engagement/site_engagement_service.h",
    "engagement/site_engagement_service_factory.cc",
    "engagement/site_engagement_service_factory.h",

    # Oh hey, all the cool browser/extensions files are hanging out in
    # //chrome/browser/extensions/BUILD.gn
    "external_protocol/external_protocol_handler.cc",
    "external_protocol/external_protocol_handler.h",
    "external_protocol/external_protocol_observer.cc",
    "external_protocol/external_protocol_observer.h",
    "favicon/chrome_fallback_icon_client.cc",
    "favicon/chrome_fallback_icon_client.h",
    "favicon/chrome_fallback_icon_client_factory.cc",
    "favicon/chrome_fallback_icon_client_factory.h",
    "favicon/chrome_favicon_client.cc",
    "favicon/chrome_favicon_client.h",
    "favicon/fallback_icon_service_factory.cc",
    "favicon/fallback_icon_service_factory.h",
    "favicon/favicon_service_factory.cc",
    "favicon/favicon_service_factory.h",
    "favicon/favicon_utils.cc",
    "favicon/favicon_utils.h",
    "favicon/large_icon_service_factory.cc",
    "favicon/large_icon_service_factory.h",
    "file_select_helper.cc",
    "file_select_helper.h",
    "file_select_helper_mac.mm",
    "fullscreen.h",
    "fullscreen_chromeos.cc",
    "fullscreen_mac.mm",
    "fullscreen_win.cc",
    "geolocation/chrome_access_token_store.cc",
    "geolocation/chrome_access_token_store.h",
    "geolocation/geolocation_permission_context.cc",
    "geolocation/geolocation_permission_context.h",
    "geolocation/geolocation_permission_context_android.cc",
    "geolocation/geolocation_permission_context_android.h",
    "geolocation/geolocation_permission_context_extensions.cc",
    "geolocation/geolocation_permission_context_extensions.h",
    "geolocation/geolocation_prefs.cc",
    "geolocation/geolocation_prefs.h",
    "global_keyboard_shortcuts_mac.h",
    "global_keyboard_shortcuts_mac.mm",
    "google/chrome_google_url_tracker_client.cc",
    "google/chrome_google_url_tracker_client.h",
    "google/google_brand.cc",
    "google/google_brand.h",
    "google/google_brand_chromeos.cc",
    "google/google_brand_chromeos.h",
    "google/google_update_settings_posix.cc",
    "google/google_update_win.cc",
    "google/google_update_win.h",
    "google/google_url_tracker_factory.cc",
    "google/google_url_tracker_factory.h",
    "gpu/gpu_feature_checker.cc",
    "gpu/gpu_feature_checker.h",
    "gpu/gpu_mode_manager.cc",
    "gpu/gpu_mode_manager.h",
    "gpu/gpu_profile_cache.h",
    "gpu/three_d_api_observer.cc",
    "gpu/three_d_api_observer.h",
    "history/chrome_history_backend_client.cc",
    "history/chrome_history_backend_client.h",
    "history/chrome_history_client.cc",
    "history/chrome_history_client.h",
    "history/history_service_factory.cc",
    "history/history_service_factory.h",
    "history/history_tab_helper.cc",
    "history/history_tab_helper.h",
    "history/history_utils.cc",
    "history/history_utils.h",
    "history/top_sites_factory.cc",
    "history/top_sites_factory.h",
    "history/web_history_service_factory.cc",
    "history/web_history_service_factory.h",
    "icon_loader.cc",
    "icon_loader.h",
    "icon_loader_android.cc",
    "icon_loader_chromeos.cc",
    "icon_loader_mac.mm",
    "icon_loader_win.cc",
    "icon_manager.cc",
    "icon_manager.h",
    "image_decoder.cc",
    "image_decoder.h",
    "image_holder.cc",
    "image_holder.h",
    "infobars/infobar_responder.cc",
    "infobars/infobar_responder.h",
    "infobars/infobar_service.cc",
    "infobars/infobar_service.h",
    "install_verification/win/install_verification.cc",
    "install_verification/win/install_verification.h",
    "install_verification/win/loaded_module_verification.cc",
    "install_verification/win/loaded_module_verification.h",
    "install_verification/win/module_ids.cc",
    "install_verification/win/module_ids.h",
    "install_verification/win/module_info.h",
    "install_verification/win/module_list.cc",
    "install_verification/win/module_list.h",
    "install_verification/win/module_verification_common.cc",
    "install_verification/win/module_verification_common.h",
    "installable/installable_logging.cc",
    "installable/installable_logging.h",
    "installable/installable_manager.cc",
    "installable/installable_manager.h",
    "internal_auth.cc",
    "internal_auth.h",
    "interstitials/chrome_controller_client.cc",
    "interstitials/chrome_controller_client.h",
    "interstitials/chrome_metrics_helper.cc",
    "interstitials/chrome_metrics_helper.h",
    "interstitials/security_interstitial_page.cc",
    "interstitials/security_interstitial_page.h",
    "intranet_redirect_detector.cc",
    "intranet_redirect_detector.h",
    "invalidation/profile_invalidation_provider_factory.cc",
    "invalidation/profile_invalidation_provider_factory.h",
    "io_thread.cc",
    "io_thread.h",
    "lifetime/application_lifetime.cc",
    "lifetime/application_lifetime.h",
    "lifetime/application_lifetime_mac.mm",
    "mac/bluetooth_utility.h",
    "mac/bluetooth_utility.mm",
    "mac/dock.h",
    "mac/dock.mm",
    "mac/install_from_dmg.h",
    "mac/install_from_dmg.mm",
    "mac/keystone_glue.h",
    "mac/keystone_glue.mm",
    "mac/keystone_registration.h",
    "mac/keystone_registration.mm",
    "mac/mac_startup_profiler.cc",
    "mac/mac_startup_profiler.h",
    "mac/master_prefs.h",
    "mac/master_prefs.mm",
    "mac/nsprocessinfo_additions.h",
    "mac/nsprocessinfo_additions.mm",
    "mac/relauncher.h",
    "mac/relauncher.mm",
    "mac/security_wrappers.cc",
    "mac/security_wrappers.h",
    "manifest/manifest_icon_downloader.cc",
    "manifest/manifest_icon_downloader.h",
    "manifest/manifest_icon_selector.cc",
    "manifest/manifest_icon_selector.h",
    "media/combined_desktop_media_list.cc",
    "media/combined_desktop_media_list.h",
    "media/desktop_media_list.h",
    "media/desktop_media_list_base.cc",
    "media/desktop_media_list_base.h",
    "media/desktop_media_picker.h",
    "media/desktop_streams_registry.cc",
    "media/desktop_streams_registry.h",
    "media/media_access_handler.h",
    "media/media_capture_devices_dispatcher.cc",
    "media/media_capture_devices_dispatcher.h",
    "media/media_device_id_salt.cc",
    "media/media_device_id_salt.h",
    "media/media_permission.cc",
    "media/media_permission.h",
    "media/media_stream_capture_indicator.cc",
    "media/media_stream_capture_indicator.h",
    "media/media_stream_device_permission_context.cc",
    "media/media_stream_device_permission_context.h",
    "media/media_stream_device_permissions.cc",
    "media/media_stream_device_permissions.h",
    "media/media_stream_devices_controller.cc",
    "media/media_stream_devices_controller.h",
    "media/media_url_constants.cc",
    "media/media_url_constants.h",
    "media/midi_permission_context.cc",
    "media/midi_permission_context.h",
    "media/native_desktop_media_list.cc",
    "media/native_desktop_media_list.h",
    "media/output_protection_proxy.cc",
    "media/output_protection_proxy.h",
    "media/permission_bubble_media_access_handler.cc",
    "media/permission_bubble_media_access_handler.h",
    "media/router/media_router_feature.cc",
    "media/router/media_router_feature.h",

    # TODO(brettw) should this go with the webrtc sources?
    "media/webrtc_log_list.cc",
    "media/webrtc_log_list.h",
    "media/window_icon_util.h",
    "memory_details.cc",
    "memory_details.h",
    "memory_details_android.cc",
    "memory_details_linux.cc",
    "memory_details_mac.cc",
    "memory_details_win.cc",
    "metrics/chrome_browser_main_extra_parts_metrics.cc",
    "metrics/chrome_browser_main_extra_parts_metrics.h",
    "metrics/chrome_browser_main_extra_parts_metrics_mac.mm",
    "metrics/chrome_metrics_service_accessor.cc",
    "metrics/chrome_metrics_service_accessor.h",
    "metrics/chrome_metrics_service_client.cc",
    "metrics/chrome_metrics_service_client.h",
    "metrics/chrome_metrics_services_manager_client.cc",
    "metrics/chrome_metrics_services_manager_client.h",
    "metrics/chrome_stability_metrics_provider.cc",
    "metrics/chrome_stability_metrics_provider.h",
    "metrics/field_trial_synchronizer.cc",
    "metrics/field_trial_synchronizer.h",
    "metrics/google_update_metrics_provider_win.cc",
    "metrics/google_update_metrics_provider_win.h",
    "metrics/https_engagement_metrics_provider.cc",
    "metrics/https_engagement_metrics_provider.h",
    "metrics/jumplist_metrics_win.cc",
    "metrics/jumplist_metrics_win.h",
    "metrics/metrics_memory_details.cc",
    "metrics/metrics_memory_details.h",
    "metrics/metrics_reporting_state.cc",
    "metrics/metrics_reporting_state.h",
    "metrics/perf/perf_provider_chromeos.cc",
    "metrics/perf/perf_provider_chromeos.h",
    "metrics/sampling_metrics_provider.cc",
    "metrics/sampling_metrics_provider.h",
    "metrics/subprocess_metrics_provider.cc",
    "metrics/subprocess_metrics_provider.h",
    "metrics/thread_watcher.cc",
    "metrics/thread_watcher.h",
    "metrics/thread_watcher_android.cc",
    "metrics/thread_watcher_android.h",
    "metrics/thread_watcher_report_hang.cc",
    "metrics/thread_watcher_report_hang.h",
    "metrics/time_ticks_experiment_win.cc",
    "metrics/time_ticks_experiment_win.h",
    "metrics/variations/chrome_variations_service_client.cc",
    "metrics/variations/chrome_variations_service_client.h",
    "metrics/variations/variations_registry_syncer_win.cc",
    "metrics/variations/variations_registry_syncer_win.h",
    "mod_pagespeed/mod_pagespeed_metrics.cc",
    "mod_pagespeed/mod_pagespeed_metrics.h",
    "native_window_notification_source.h",
    "net/async_dns_field_trial.cc",
    "net/async_dns_field_trial.h",
    "net/chrome_cookie_notification_details.h",
    "net/chrome_extensions_network_delegate.cc",
    "net/chrome_extensions_network_delegate.h",
    "net/chrome_http_user_agent_settings.cc",
    "net/chrome_http_user_agent_settings.h",
    "net/chrome_net_log_helper.cc",
    "net/chrome_net_log_helper.h",
    "net/chrome_network_delegate.cc",
    "net/chrome_network_delegate.h",
    "net/chrome_url_request_context_getter.cc",
    "net/chrome_url_request_context_getter.h",
    "net/crl_set_fetcher.cc",
    "net/crl_set_fetcher.h",
    "net/dns_probe_runner.cc",
    "net/dns_probe_runner.h",
    "net/dns_probe_service.cc",
    "net/dns_probe_service.h",
    "net/file_downloader.cc",
    "net/file_downloader.h",
    "net/http_server_properties_manager_factory.cc",
    "net/http_server_properties_manager_factory.h",
    "net/net_error_diagnostics_dialog.h",
    "net/net_error_diagnostics_dialog_mac.cc",
    "net/net_error_diagnostics_dialog_win.cc",
    "net/net_error_tab_helper.cc",
    "net/net_error_tab_helper.h",
    "net/nqe/ui_network_quality_estimator_service.cc",
    "net/nqe/ui_network_quality_estimator_service.h",
    "net/nqe/ui_network_quality_estimator_service_factory.cc",
    "net/nqe/ui_network_quality_estimator_service_factory.h",
    "net/prediction_options.cc",
    "net/prediction_options.h",
    "net/predictor.cc",
    "net/predictor.h",
    "net/predictor_tab_helper.cc",
    "net/predictor_tab_helper.h",
    "net/probe_message.cc",
    "net/probe_message.h",
    "net/proxy_service_factory.cc",
    "net/proxy_service_factory.h",
    "net/quota_policy_channel_id_store.cc",
    "net/quota_policy_channel_id_store.h",
    "net/referrer.cc",
    "net/referrer.h",
    "net/request_source_bandwidth_histograms.cc",
    "net/request_source_bandwidth_histograms.h",
    "net/resource_prefetch_predictor_observer.cc",
    "net/resource_prefetch_predictor_observer.h",
    "net/safe_search_util.cc",
    "net/safe_search_util.h",
    "net/sdch_owner_pref_storage.cc",
    "net/sdch_owner_pref_storage.h",
    "net/service_providers_win.cc",
    "net/service_providers_win.h",
    "net/spdyproxy/chrome_data_use_group.cc",
    "net/spdyproxy/chrome_data_use_group.h",
    "net/spdyproxy/chrome_data_use_group_provider.cc",
    "net/spdyproxy/chrome_data_use_group_provider.h",
    "net/spdyproxy/data_reduction_proxy_chrome_io_data.cc",
    "net/spdyproxy/data_reduction_proxy_chrome_io_data.h",
    "net/spdyproxy/data_reduction_proxy_chrome_settings.cc",
    "net/spdyproxy/data_reduction_proxy_chrome_settings.h",
    "net/spdyproxy/data_reduction_proxy_chrome_settings_factory.cc",
    "net/spdyproxy/data_reduction_proxy_chrome_settings_factory.h",
    "net/sth_distributor_provider.cc",
    "net/sth_distributor_provider.h",
    "net/timed_cache.cc",
    "net/timed_cache.h",
    "net/url_info.cc",
    "net/url_info.h",
    "ntp_snippets/bookmark_last_visit_updater.cc",
    "ntp_snippets/bookmark_last_visit_updater.h",
    "ntp_snippets/content_suggestions_service_factory.cc",
    "ntp_snippets/content_suggestions_service_factory.h",
    "page_load_metrics/metrics_navigation_throttle.cc",
    "page_load_metrics/metrics_navigation_throttle.h",
    "page_load_metrics/metrics_web_contents_observer.cc",
    "page_load_metrics/metrics_web_contents_observer.h",
    "page_load_metrics/observers/aborts_page_load_metrics_observer.cc",
    "page_load_metrics/observers/aborts_page_load_metrics_observer.h",
    "page_load_metrics/observers/core_page_load_metrics_observer.cc",
    "page_load_metrics/observers/core_page_load_metrics_observer.h",
    "page_load_metrics/observers/data_reduction_proxy_metrics_observer.cc",
    "page_load_metrics/observers/data_reduction_proxy_metrics_observer.h",
    "page_load_metrics/observers/document_write_page_load_metrics_observer.cc",
    "page_load_metrics/observers/document_write_page_load_metrics_observer.h",
    "page_load_metrics/observers/from_gws_page_load_metrics_observer.cc",
    "page_load_metrics/observers/from_gws_page_load_metrics_observer.h",
    "page_load_metrics/observers/google_captcha_observer.cc",
    "page_load_metrics/observers/google_captcha_observer.h",
    "page_load_metrics/observers/https_engagement_metrics/https_engagement_page_load_metrics_observer.cc",
    "page_load_metrics/observers/https_engagement_metrics/https_engagement_page_load_metrics_observer.h",
    "page_load_metrics/observers/https_engagement_metrics/https_engagement_service.cc",
    "page_load_metrics/observers/https_engagement_metrics/https_engagement_service.h",
    "page_load_metrics/observers/https_engagement_metrics/https_engagement_service_factory.cc",
    "page_load_metrics/observers/https_engagement_metrics/https_engagement_service_factory.h",
    "page_load_metrics/observers/previews_page_load_metrics_observer.cc",
    "page_load_metrics/observers/previews_page_load_metrics_observer.h",
    "page_load_metrics/observers/service_worker_page_load_metrics_observer.cc",
    "page_load_metrics/observers/service_worker_page_load_metrics_observer.h",
    "page_load_metrics/observers/stale_while_revalidate_metrics_observer.cc",
    "page_load_metrics/observers/stale_while_revalidate_metrics_observer.h",
    "page_load_metrics/page_load_metrics_initialize.cc",
    "page_load_metrics/page_load_metrics_initialize.h",
    "page_load_metrics/page_load_metrics_observer.cc",
    "page_load_metrics/page_load_metrics_observer.h",
    "page_load_metrics/page_load_metrics_util.cc",
    "page_load_metrics/page_load_metrics_util.h",
    "password_manager/chrome_password_manager_client.cc",
    "password_manager/chrome_password_manager_client.h",
    "password_manager/password_manager_setting_migrator_service_factory.cc",
    "password_manager/password_manager_setting_migrator_service_factory.h",
    "password_manager/password_store_factory.cc",
    "password_manager/password_store_factory.h",
    "password_manager/password_store_mac.cc",
    "password_manager/password_store_mac.h",
    "password_manager/password_store_mac_internal.h",
    "password_manager/password_store_proxy_mac.cc",
    "password_manager/password_store_proxy_mac.h",
    "password_manager/password_store_win.cc",
    "password_manager/password_store_win.h",
    "password_manager/password_store_x.cc",
    "password_manager/password_store_x.h",
    "password_manager/simple_password_store_mac.cc",
    "password_manager/simple_password_store_mac.h",
    "performance_monitor/performance_monitor.cc",
    "performance_monitor/performance_monitor.h",
    "performance_monitor/process_metrics_history.cc",
    "performance_monitor/process_metrics_history.h",
    "permissions/chooser_context_base.cc",
    "permissions/chooser_context_base.h",
    "permissions/delegation_tracker.cc",
    "permissions/delegation_tracker.h",
    "permissions/permission_context_base.cc",
    "permissions/permission_context_base.h",
    "permissions/permission_decision_auto_blocker.cc",
    "permissions/permission_decision_auto_blocker.h",
    "permissions/permission_infobar_delegate.cc",
    "permissions/permission_infobar_delegate.h",
    "permissions/permission_manager.cc",
    "permissions/permission_manager.h",
    "permissions/permission_manager_factory.cc",
    "permissions/permission_manager_factory.h",
    "permissions/permission_request.cc",
    "permissions/permission_request.h",
    "permissions/permission_request_id.cc",
    "permissions/permission_request_id.h",
    "permissions/permission_request_impl.cc",
    "permissions/permission_request_impl.h",
    "permissions/permission_request_manager.cc",
    "permissions/permission_request_manager.h",
    "permissions/permission_uma_util.cc",
    "permissions/permission_uma_util.h",
    "permissions/permission_util.cc",
    "permissions/permission_util.h",
    "platform_util.h",
    "platform_util_chromeos.cc",
    "platform_util_internal.h",
    "platform_util_mac.mm",
    "platform_util_win.cc",
    "policy/chrome_browser_policy_connector.cc",
    "policy/chrome_browser_policy_connector.h",
    "policy/cloud/cloud_policy_invalidator.cc",
    "policy/cloud/cloud_policy_invalidator.h",
    "policy/cloud/policy_header_service_factory.cc",
    "policy/cloud/policy_header_service_factory.h",
    "policy/cloud/remote_commands_invalidator.cc",
    "policy/cloud/remote_commands_invalidator.h",
    "policy/cloud/remote_commands_invalidator_impl.cc",
    "policy/cloud/remote_commands_invalidator_impl.h",
    "policy/cloud/user_cloud_policy_invalidator.cc",
    "policy/cloud/user_cloud_policy_invalidator.h",
    "policy/cloud/user_cloud_policy_invalidator_factory.cc",
    "policy/cloud/user_cloud_policy_invalidator_factory.h",
    "policy/configuration_policy_handler_list_factory.cc",
    "policy/configuration_policy_handler_list_factory.h",
    "policy/device_management_service_configuration.cc",
    "policy/device_management_service_configuration.h",
    "policy/file_selection_dialogs_policy_handler.cc",
    "policy/file_selection_dialogs_policy_handler.h",
    "policy/javascript_policy_handler.cc",
    "policy/javascript_policy_handler.h",
    "policy/managed_bookmarks_policy_handler.cc",
    "policy/managed_bookmarks_policy_handler.h",
    "policy/network_prediction_policy_handler.cc",
    "policy/network_prediction_policy_handler.h",
    "policy/policy_helpers.cc",
    "policy/policy_helpers.h",
    "policy/profile_policy_connector.cc",
    "policy/profile_policy_connector.h",
    "policy/profile_policy_connector_factory.cc",
    "policy/profile_policy_connector_factory.h",
    "policy/schema_registry_service.cc",
    "policy/schema_registry_service.h",
    "policy/schema_registry_service_factory.cc",
    "policy/schema_registry_service_factory.h",
    "predictors/autocomplete_action_predictor.cc",
    "predictors/autocomplete_action_predictor.h",
    "predictors/autocomplete_action_predictor_factory.cc",
    "predictors/autocomplete_action_predictor_factory.h",
    "predictors/autocomplete_action_predictor_table.cc",
    "predictors/autocomplete_action_predictor_table.h",
    "predictors/predictor_database.cc",
    "predictors/predictor_database.h",
    "predictors/predictor_database_factory.cc",
    "predictors/predictor_database_factory.h",
    "predictors/predictor_table_base.cc",
    "predictors/predictor_table_base.h",
    "predictors/resource_prefetch_common.cc",
    "predictors/resource_prefetch_common.h",
    "predictors/resource_prefetch_predictor.cc",
    "predictors/resource_prefetch_predictor.h",
    "predictors/resource_prefetch_predictor_factory.cc",
    "predictors/resource_prefetch_predictor_factory.h",
    "predictors/resource_prefetch_predictor_tab_helper.cc",
    "predictors/resource_prefetch_predictor_tab_helper.h",
    "predictors/resource_prefetch_predictor_tables.cc",
    "predictors/resource_prefetch_predictor_tables.h",
    "predictors/resource_prefetcher.cc",
    "predictors/resource_prefetcher.h",
    "predictors/resource_prefetcher_manager.cc",
    "predictors/resource_prefetcher_manager.h",
    "prefs/browser_prefs.cc",
    "prefs/browser_prefs.h",
    "prefs/chrome_pref_model_associator_client.cc",
    "prefs/chrome_pref_model_associator_client.h",
    "prefs/chrome_pref_service_factory.cc",
    "prefs/chrome_pref_service_factory.h",
    "prefs/command_line_pref_store.cc",
    "prefs/command_line_pref_store.h",
    "prefs/incognito_mode_prefs.cc",
    "prefs/incognito_mode_prefs.h",
    "prefs/origin_trial_prefs.cc",
    "prefs/origin_trial_prefs.h",
    "prefs/pref_metrics_service.cc",
    "prefs/pref_metrics_service.h",
    "prefs/pref_service_syncable_util.cc",
    "prefs/pref_service_syncable_util.h",
    "prefs/profile_pref_store_manager.cc",
    "prefs/profile_pref_store_manager.h",
    "prefs/session_startup_pref.cc",
    "prefs/session_startup_pref.h",
    "prerender/prerender_config.cc",
    "prerender/prerender_config.h",
    "prerender/prerender_contents.cc",
    "prerender/prerender_contents.h",
    "prerender/prerender_field_trial.cc",
    "prerender/prerender_field_trial.h",
    "prerender/prerender_final_status.cc",
    "prerender/prerender_final_status.h",
    "prerender/prerender_handle.cc",
    "prerender/prerender_handle.h",
    "prerender/prerender_histograms.cc",
    "prerender/prerender_histograms.h",
    "prerender/prerender_history.cc",
    "prerender/prerender_history.h",
    "prerender/prerender_link_manager.cc",
    "prerender/prerender_link_manager.h",
    "prerender/prerender_link_manager_factory.cc",
    "prerender/prerender_link_manager_factory.h",
    "prerender/prerender_manager.cc",
    "prerender/prerender_manager.h",
    "prerender/prerender_manager_factory.cc",
    "prerender/prerender_manager_factory.h",
    "prerender/prerender_message_filter.cc",
    "prerender/prerender_message_filter.h",
    "prerender/prerender_origin.cc",
    "prerender/prerender_origin.h",
    "prerender/prerender_resource_throttle.cc",
    "prerender/prerender_resource_throttle.h",
    "prerender/prerender_tab_helper.cc",
    "prerender/prerender_tab_helper.h",
    "prerender/prerender_util.cc",
    "prerender/prerender_util.h",
    "process_resource_usage.cc",
    "process_resource_usage.h",
    "process_singleton.h",
    "process_singleton_win.cc",
    "profiles/avatar_menu_actions.h",
    "profiles/bookmark_model_loaded_observer.cc",
    "profiles/bookmark_model_loaded_observer.h",
    "profiles/chrome_browser_main_extra_parts_profiles.cc",
    "profiles/chrome_browser_main_extra_parts_profiles.h",
    "profiles/chrome_version_service.cc",
    "profiles/chrome_version_service.h",
    "profiles/gaia_info_update_service.cc",
    "profiles/gaia_info_update_service.h",
    "profiles/gaia_info_update_service_factory.cc",
    "profiles/gaia_info_update_service_factory.h",
    "profiles/incognito_helpers.cc",
    "profiles/incognito_helpers.h",
    "profiles/incognito_mode_policy_handler.cc",
    "profiles/incognito_mode_policy_handler.h",
    "profiles/off_the_record_profile_impl.cc",
    "profiles/off_the_record_profile_impl.h",
    "profiles/off_the_record_profile_io_data.cc",
    "profiles/off_the_record_profile_io_data.h",
    "profiles/profile.cc",
    "profiles/profile.h",
    "profiles/profile_attributes_entry.cc",
    "profiles/profile_attributes_entry.h",
    "profiles/profile_attributes_storage.cc",
    "profiles/profile_attributes_storage.h",
    "profiles/profile_avatar_downloader.cc",
    "profiles/profile_avatar_downloader.h",
    "profiles/profile_avatar_icon_util.cc",
    "profiles/profile_avatar_icon_util.h",
    "profiles/profile_destroyer.cc",
    "profiles/profile_destroyer.h",
    "profiles/profile_downloader.cc",
    "profiles/profile_downloader.h",
    "profiles/profile_downloader_delegate.h",
    "profiles/profile_impl.cc",
    "profiles/profile_impl.h",
    "profiles/profile_impl_io_data.cc",
    "profiles/profile_impl_io_data.h",
    "profiles/profile_info_cache.cc",
    "profiles/profile_info_cache.h",
    "profiles/profile_info_cache_observer.h",
    "profiles/profile_info_interface.h",
    "profiles/profile_io_data.cc",
    "profiles/profile_io_data.h",
    "profiles/profile_list.h",
    "profiles/profile_manager.cc",
    "profiles/profile_manager.h",
    "profiles/profile_metrics.cc",
    "profiles/profile_metrics.h",
    "profiles/profile_metrics_mac.mm",
    "profiles/profile_shortcut_manager_win.cc",
    "profiles/profile_shortcut_manager_win.h",
    "profiles/profiles_state.cc",
    "profiles/profiles_state.h",
    "profiles/sql_init_error_message_ids.cc",
    "profiles/sql_init_error_message_ids.h",
    "profiles/storage_partition_descriptor.h",
    "push_messaging/push_messaging_app_identifier.cc",
    "push_messaging/push_messaging_app_identifier.h",
    "push_messaging/push_messaging_constants.cc",
    "push_messaging/push_messaging_constants.h",
    "push_messaging/push_messaging_service_factory.cc",
    "push_messaging/push_messaging_service_factory.h",
    "push_messaging/push_messaging_service_impl.cc",
    "push_messaging/push_messaging_service_impl.h",
    "push_messaging/push_messaging_service_observer.cc",
    "push_messaging/push_messaging_service_observer.h",
    "push_messaging/push_messaging_service_observer_android.cc",
    "push_messaging/push_messaging_service_observer_android.h",
    "renderer_context_menu/context_menu_content_type_factory.cc",
    "renderer_context_menu/context_menu_content_type_factory.h",
    "renderer_context_menu/context_menu_content_type_panel.cc",
    "renderer_context_menu/context_menu_content_type_panel.h",
    "renderer_host/chrome_navigation_data.cc",
    "renderer_host/chrome_navigation_data.h",
    "renderer_host/chrome_render_message_filter.cc",
    "renderer_host/chrome_render_message_filter.h",
    "renderer_host/chrome_render_widget_host_view_mac_delegate.h",
    "renderer_host/chrome_render_widget_host_view_mac_delegate.mm",
    "renderer_host/chrome_render_widget_host_view_mac_history_swiper.h",
    "renderer_host/chrome_render_widget_host_view_mac_history_swiper.mm",
    "renderer_host/chrome_resource_dispatcher_host_delegate.cc",
    "renderer_host/chrome_resource_dispatcher_host_delegate.h",
    "renderer_host/predictor_resource_throttle.cc",
    "renderer_host/predictor_resource_throttle.h",
    "renderer_preferences_util.cc",
    "renderer_preferences_util.h",
    "resource_delegate_mac.h",
    "resource_delegate_mac.mm",
    "resources_util.cc",
    "resources_util.h",
    "safe_browsing/safe_browsing_tab_observer.cc",
    "safe_browsing/safe_browsing_tab_observer.h",
    "safe_browsing/srt_fetcher_win.cc",
    "safe_browsing/srt_fetcher_win.h",
    "safe_browsing/srt_field_trial_win.cc",
    "safe_browsing/srt_field_trial_win.h",
    "safe_browsing/srt_global_error_win.cc",
    "safe_browsing/srt_global_error_win.h",
    "search/iframe_source.cc",
    "search/iframe_source.h",
    "search/instant_io_context.cc",
    "search/instant_io_context.h",
    "search/instant_service.cc",
    "search/instant_service.h",
    "search/instant_service_factory.cc",
    "search/instant_service_factory.h",
    "search/instant_service_observer.cc",
    "search/instant_service_observer.h",
    "search/most_visited_iframe_source.cc",
    "search/most_visited_iframe_source.h",
    "search/search.cc",
    "search/search.h",
    "search/suggestions/image_decoder_impl.cc",
    "search/suggestions/image_decoder_impl.h",
    "search/suggestions/suggestions_service_factory.cc",
    "search/suggestions/suggestions_service_factory.h",
    "search/suggestions/suggestions_ui.cc",
    "search/suggestions/suggestions_ui.h",
    "search/thumbnail_source.cc",
    "search/thumbnail_source.h",
    "search_engines/chrome_template_url_service_client.cc",
    "search_engines/chrome_template_url_service_client.h",
    "search_engines/template_url_fetcher_factory.cc",
    "search_engines/template_url_fetcher_factory.h",
    "search_engines/template_url_service_factory.cc",
    "search_engines/template_url_service_factory.h",
    "search_engines/ui_thread_search_terms_data.cc",
    "search_engines/ui_thread_search_terms_data.h",
    "search_engines/ui_thread_search_terms_data_android.cc",
    "search_engines/ui_thread_search_terms_data_android.h",
    "services/gcm/gcm_product_util.cc",
    "services/gcm/gcm_product_util.h",
    "services/gcm/gcm_profile_service_factory.cc",
    "services/gcm/gcm_profile_service_factory.h",
    "services/gcm/instance_id/instance_id_profile_service.cc",
    "services/gcm/instance_id/instance_id_profile_service.h",
    "services/gcm/instance_id/instance_id_profile_service_factory.cc",
    "services/gcm/instance_id/instance_id_profile_service_factory.h",
    "sessions/chrome_tab_restore_service_client.cc",
    "sessions/chrome_tab_restore_service_client.h",
    "sessions/restore_on_startup_policy_handler.cc",
    "sessions/restore_on_startup_policy_handler.h",
    "sessions/session_common_utils.cc",
    "sessions/session_common_utils.h",
    "sessions/session_data_deleter.cc",
    "sessions/session_data_deleter.h",
    "sessions/session_restore_android.cc",
    "sessions/session_tab_helper.cc",
    "sessions/session_tab_helper.h",
    "sessions/tab_restore_service_factory.cc",
    "sessions/tab_restore_service_factory.h",
    "shell_integration.cc",
    "shell_integration.h",
    "shell_integration_android.cc",
    "shell_integration_chromeos.cc",
    "shell_integration_mac.mm",
    "shell_integration_win.cc",
    "shell_integration_win.h",
    "signin/about_signin_internals_factory.cc",
    "signin/about_signin_internals_factory.h",
    "signin/account_fetcher_service_factory.cc",
    "signin/account_fetcher_service_factory.h",
    "signin/account_investigator_factory.cc",
    "signin/account_investigator_factory.h",
    "signin/account_reconcilor_factory.cc",
    "signin/account_reconcilor_factory.h",
    "signin/account_tracker_service_factory.cc",
    "signin/account_tracker_service_factory.h",
    "signin/chrome_signin_client.cc",
    "signin/chrome_signin_client.h",
    "signin/chrome_signin_client_factory.cc",
    "signin/chrome_signin_client_factory.h",
    "signin/chrome_signin_helper.cc",
    "signin/chrome_signin_helper.h",
    "signin/chrome_signin_status_metrics_provider_delegate.cc",
    "signin/chrome_signin_status_metrics_provider_delegate.h",
    "signin/gaia_cookie_manager_service_factory.cc",
    "signin/gaia_cookie_manager_service_factory.h",
    "signin/investigator_dependency_provider.cc",
    "signin/investigator_dependency_provider.h",
    "signin/local_auth.cc",
    "signin/local_auth.h",
    "signin/mutable_profile_oauth2_token_service_delegate.cc",
    "signin/mutable_profile_oauth2_token_service_delegate.h",
    "signin/profile_oauth2_token_service_factory.cc",
    "signin/profile_oauth2_token_service_factory.h",
    "signin/signin_error_controller_factory.cc",
    "signin/signin_error_controller_factory.h",
    "signin/signin_manager_factory.cc",
    "signin/signin_manager_factory.h",
    "signin/signin_promo_util.cc",
    "signin/signin_promo_util.h",
    "signin/signin_status_metrics_provider_chromeos.cc",
    "signin/signin_status_metrics_provider_chromeos.h",
    "signin/signin_tracker_factory.cc",
    "signin/signin_tracker_factory.h",
    "site_details.cc",
    "site_details.h",
    "speech/chrome_speech_recognition_manager_delegate.cc",
    "speech/chrome_speech_recognition_manager_delegate.h",
    "speech/tts_android.cc",
    "speech/tts_android.h",
    "speech/tts_chromeos.cc",
    "speech/tts_controller.h",
    "speech/tts_controller_impl.cc",
    "speech/tts_controller_impl.h",
    "speech/tts_mac.mm",
    "speech/tts_message_filter.cc",
    "speech/tts_message_filter.h",
    "speech/tts_platform.cc",
    "speech/tts_platform.h",
    "speech/tts_win.cc",
    "ssl/bad_clock_blocking_page.cc",
    "ssl/bad_clock_blocking_page.h",
    "ssl/cert_report_helper.cc",
    "ssl/cert_report_helper.h",
    "ssl/chrome_expect_ct_reporter.cc",
    "ssl/chrome_expect_ct_reporter.h",
    "ssl/chrome_security_state_model_client.cc",
    "ssl/chrome_security_state_model_client.h",
    "ssl/chrome_ssl_host_state_delegate.cc",
    "ssl/chrome_ssl_host_state_delegate.h",
    "ssl/chrome_ssl_host_state_delegate_factory.cc",
    "ssl/chrome_ssl_host_state_delegate_factory.h",
    "ssl/common_name_mismatch_handler.cc",
    "ssl/common_name_mismatch_handler.h",
    "ssl/ssl_blocking_page.cc",
    "ssl/ssl_blocking_page.h",
    "ssl/ssl_cert_reporter.h",
    "ssl/ssl_client_certificate_selector.h",
    "ssl/ssl_error_handler.cc",
    "ssl/ssl_error_handler.h",
    "stack_sampling_configuration.cc",
    "stack_sampling_configuration.h",
    "status_icons/status_icon.cc",
    "status_icons/status_icon.h",
    "status_icons/status_icon_menu_model.cc",
    "status_icons/status_icon_menu_model.h",
    "status_icons/status_icon_observer.h",
    "status_icons/status_tray.cc",
    "status_icons/status_tray.h",
    "storage/durable_storage_permission_context.cc",
    "storage/durable_storage_permission_context.h",
    "storage/storage_info_fetcher.cc",
    "storage/storage_info_fetcher.h",
    "subresource_filter/chrome_subresource_filter_client.cc",
    "subresource_filter/chrome_subresource_filter_client.h",
    "sync/chrome_sync_client.cc",
    "sync/chrome_sync_client.h",
    "sync/glue/extensions_activity_monitor.cc",
    "sync/glue/extensions_activity_monitor.h",
    "sync/glue/sync_start_util.cc",
    "sync/glue/sync_start_util.h",
    "sync/profile_sync_service_factory.cc",
    "sync/profile_sync_service_factory.h",
    "sync/sessions/notification_service_sessions_router.cc",
    "sync/sessions/notification_service_sessions_router.h",
    "sync/supervised_user_signin_manager_wrapper.cc",
    "sync/supervised_user_signin_manager_wrapper.h",
    "sync/sync_startup_tracker.cc",
    "sync/sync_startup_tracker.h",
    "tab_contents/navigation_metrics_recorder.cc",
    "tab_contents/navigation_metrics_recorder.h",
    "tab_contents/origins_seen_service_factory.cc",
    "tab_contents/origins_seen_service_factory.h",
    "tab_contents/retargeting_details.h",
    "tab_contents/tab_util.cc",
    "tab_contents/tab_util.h",
    "task_manager/web_contents_tags.cc",
    "task_manager/web_contents_tags.h",
    "task_profiler/task_profiler_data_serializer.cc",
    "task_profiler/task_profiler_data_serializer.h",
    "thumbnails/content_analysis.cc",
    "thumbnails/content_analysis.h",
    "thumbnails/content_based_thumbnailing_algorithm.cc",
    "thumbnails/content_based_thumbnailing_algorithm.h",
    "thumbnails/simple_thumbnail_crop.cc",
    "thumbnails/simple_thumbnail_crop.h",
    "thumbnails/thumbnail_list_source.cc",
    "thumbnails/thumbnail_list_source.h",
    "thumbnails/thumbnail_service.h",
    "thumbnails/thumbnail_service_factory.cc",
    "thumbnails/thumbnail_service_factory.h",
    "thumbnails/thumbnail_service_impl.cc",
    "thumbnails/thumbnail_service_impl.h",
    "thumbnails/thumbnail_tab_helper.cc",
    "thumbnails/thumbnail_tab_helper.h",
    "thumbnails/thumbnailing_algorithm.h",
    "thumbnails/thumbnailing_context.cc",
    "thumbnails/thumbnailing_context.h",
    "tracing/background_tracing_field_trial.cc",
    "tracing/background_tracing_field_trial.h",
    "tracing/chrome_tracing_delegate.cc",
    "tracing/chrome_tracing_delegate.h",
    "tracing/crash_service_uploader.cc",
    "tracing/crash_service_uploader.h",
    "tracing/navigation_tracing.cc",
    "tracing/navigation_tracing.h",
    "translate/chrome_translate_client.cc",
    "translate/chrome_translate_client.h",
    "translate/translate_accept_languages_factory.cc",
    "translate/translate_accept_languages_factory.h",
    "translate/translate_service.cc",
    "translate/translate_service.h",
    "undo/bookmark_undo_service_factory.cc",
    "undo/bookmark_undo_service_factory.h",
    "update_client/chrome_update_query_params_delegate.cc",
    "update_client/chrome_update_query_params_delegate.h",
    "usb/usb_chooser_context.cc",
    "usb/usb_chooser_context.h",
    "usb/usb_chooser_context_factory.cc",
    "usb/usb_chooser_context_factory.h",
    "usb/usb_tab_helper.cc",
    "usb/usb_tab_helper.h",
    "usb/web_usb_histograms.cc",
    "usb/web_usb_histograms.h",
    "usb/web_usb_permission_provider.cc",
    "usb/web_usb_permission_provider.h",
    "web_data_service_factory.cc",
    "web_data_service_factory.h",
    "win/app_icon.cc",
    "win/app_icon.h",
    "win/browser_util.cc",
    "win/browser_util.h",
    "win/chrome_elf_init.cc",
    "win/chrome_elf_init.h",
    "win/chrome_select_file_dialog_factory.cc",
    "win/chrome_select_file_dialog_factory.h",
    "win/enumerate_modules_model.cc",
    "win/enumerate_modules_model.h",
    "win/jumplist.cc",
    "win/jumplist.h",
    "win/jumplist_updater.cc",
    "win/jumplist_updater.h",
    "win/settings_app_monitor.cc",
    "win/settings_app_monitor.h",
  ]

  configs += [
    "//build/config/compiler:wexit_time_destructors",
    "//build/config:precompiled_headers",
    "//third_party/WebKit/public:debug_devtools",
  ]
  defines = []
  libs = []
  ldflags = []

  allow_circular_includes_from = [ "//chrome/browser/ui" ]

  # iOS/non-iOS shared deps. New dependencies should generally be added in the
  # non-iOS deps below.
  public_deps = [
    "//chrome/common",
    "//components/autofill/core/browser",
    "//components/sync",
    "//content/public/browser",
    "//sql",
  ]
  deps = [
    ":resource_prefetch_predictor_proto",
    "//cc",
    "//chrome:extra_resources",
    "//chrome:resources",
    "//chrome:strings",
    "//chrome/app/resources:platform_locale_settings",
    "//chrome/app/theme:theme_resources",
    "//chrome/app/theme:theme_resources",
    "//chrome/browser/budget_service:budget_proto",
    "//chrome/browser/devtools",
    "//chrome/browser/metrics/variations:chrome_ui_string_overrider_factory",
    "//chrome/browser/metrics/variations:chrome_ui_string_overrider_factory",
    "//chrome/browser/net:probe_message_proto",
    "//chrome/browser/resources:component_extension_resources",
    "//chrome/browser/ui",
    "//chrome/common/net",
    "//chrome/installer/util:with_no_strings",
    "//components/about_handler",
    "//components/app_modal",
    "//components/autofill/content/browser",
    "//components/autofill/core/browser",
    "//components/bookmarks/browser",
    "//components/bookmarks/managed",
    "//components/browser_sync/browser",
    "//components/browser_sync/common",
    "//components/browsing_data/content",
    "//components/browsing_data/core",
    "//components/captive_portal",
    "//components/certificate_reporting",
    "//components/certificate_transparency",
    "//components/cloud_devices/common",
    "//components/component_updater",
    "//components/content_settings/content/common",
    "//components/content_settings/core/browser",
    "//components/content_settings/core/common",
    "//components/contextual_search:browser",
    "//components/cookie_config",
    "//components/crx_file",
    "//components/data_reduction_proxy/content/browser",
    "//components/data_reduction_proxy/core/browser",
    "//components/data_usage/core",
    "//components/data_use_measurement/content",
    "//components/data_use_measurement/core",
    "//components/device_event_log",
    "//components/devtools_http_handler",
    "//components/dom_distiller/content/browser",
    "//components/domain_reliability",
    "//components/error_page/common",
    "//components/favicon/content",
    "//components/favicon/core",
    "//components/favicon_base",
    "//components/flags_ui",
    "//components/gcm_driver",
    "//components/google/core/browser",
    "//components/guest_view/browser",
    "//components/handoff",
    "//components/history/content/browser",
    "//components/history/core/browser",
    "//components/history/core/common",
    "//components/infobars/core",
    "//components/invalidation/impl",
    "//components/keyed_service/content",
    "//components/metrics:gpu",
    "//components/metrics:net",
    "//components/metrics:profiler",
    "//components/metrics:profiler_content",
    "//components/metrics:ui",
    "//components/metrics/proto:proto",
    "//components/metrics_services_manager",
    "//components/mime_util",
    "//components/navigation_interception",
    "//components/navigation_metrics",
    "//components/net_log",
    "//components/network_hints/common",
    "//components/network_session_configurator",
    "//components/network_time",
    "//components/ntp_snippets",
    "//components/ntp_tiles",
    "//components/offline_pages",
    "//components/offline_pages/background:background_offliner",
    "//components/offline_pages/downloads:offline_pages_ui_adapter",
    "//components/omnibox/browser",
    "//components/os_crypt",
    "//components/packed_ct_ev_whitelist",
    "//components/password_manager/content/browser",
    "//components/password_manager/core/browser",
    "//components/password_manager/core/common",
    "//components/password_manager/sync/browser",
    "//components/policy:generated",
    "//components/policy/core/browser",
    "//components/policy/proto",
    "//components/previews",
    "//components/profile_metrics",
    "//components/proxy_config",
    "//components/proxy_config",
    "//components/query_parser",
    "//components/rappor",
    "//components/renderer_context_menu",
    "//components/resources",
    "//components/safe_browsing_db",
    "//components/safe_json",
    "//components/search",
    "//components/search_engines",
    "//components/search_provider_logos",
    "//components/security_interstitials/core",
    "//components/security_state",
    "//components/sessions",
    "//components/signin/core/browser",
    "//components/ssl_config",
    "//components/ssl_errors",
    "//components/startup_metric_utils/browser:host",
    "//components/startup_metric_utils/browser:lib",

    # TODO(fdoray): Remove this once the PreRead field trial has expired.
    # crbug.com/577698
    "//components/startup_metric_utils/common",
    "//components/storage_monitor",
    "//components/strings",
    "//components/subresource_filter/content/browser",
    "//components/subresource_filter/core/browser",
    "//components/suggestions",
    "//components/supervised_user_error_page",
    "//components/sync",
    "//components/sync_bookmarks",
    "//components/sync_sessions",
    "//components/syncable_prefs",
    "//components/tracing:startup_tracing",
    "//components/translate/content/browser",
    "//components/translate/core/browser",
    "//components/translate/core/common",
    "//components/undo",
    "//components/update_client",
    "//components/upload_list",
    "//components/url_formatter",
    "//components/url_matcher",
    "//components/user_prefs",
    "//components/user_prefs/tracked:user_prefs_tracked",
    "//components/variations",
    "//components/variations/net",
    "//components/variations/service",
    "//components/visitedlink/browser",
    "//components/visitedlink/common",
    "//components/web_cache/browser",
    "//components/web_resource",
    "//components/webdata/common",
    "//components/webdata_services",
    "//components/zoom",
    "//content/app/resources",
    "//content/public/browser",
    "//content/public/common",
    "//content/public/common:feature_h264_with_openh264_ffmpeg",
    "//content/public/common:features",
    "//courgette:courgette_lib",
    "//crypto",
    "//crypto:platform",
    "//device/core",
    "//device/usb/mojo",
    "//device/usb/public/interfaces",
    "//google_apis",
    "//gpu/config",
    "//media",
    "//media/midi",
    "//mojo/common",
    "//mojo/edk/system",
    "//mojo/public/cpp/bindings",
    "//mojo/public/js",
    "//net:extras",
    "//net:net_with_v8",
    "//services/shell/public/cpp",
    "//skia",
    "//sql",
    "//storage/browser",
    "//storage/common",
    "//third_party/WebKit/public:image_resources",
    "//third_party/WebKit/public:resources",
    "//third_party/cacheinvalidation",
    "//third_party/icu",
    "//third_party/kasko",
    "//third_party/leveldatabase",
    "//third_party/libaddressinput",
    "//third_party/libjingle",
    "//third_party/libxml",
    "//third_party/libyuv",
    "//third_party/re2",
    "//third_party/smhasher:cityhash",
    "//third_party/webrtc/modules/desktop_capture",
    "//third_party/widevine/cdm:version_h",
    "//third_party/zlib",
    "//third_party/zlib:compression_utils",
    "//third_party/zlib:minizip",
    "//third_party/zlib:zip",
    "//ui/base",
    "//ui/base:ui_data_pack",
    "//ui/base/ime",
    "//ui/events:events_base",
    "//ui/gfx",
    "//ui/gfx/geometry",
    "//ui/gl",
    "//ui/message_center",
    "//ui/resources",
    "//ui/resources",
    "//ui/shell_dialogs",
    "//ui/strings",
    "//ui/surface",
    "//ui/web_dialogs",
    "//v8",
  ]
  data_deps = []

  if (is_chromeos && use_cras) {
    defines += [ "USE_CRAS" ]
  }

  if (android_java_ui) {
    sources +=
        rebase_path(gypi_values.chrome_browser_sync_android_java_ui_sources,
                    ".",
                    "//chrome")
    sources +=
        rebase_path(gypi_values.chrome_browser_ssl_android_java_ui_sources,
                    ".",
                    "//chrome")
    sources +=
        rebase_path(gypi_values.chrome_browser_history_android_java_ui_sources,
                    ".",
                    "//chrome")
    sources += rebase_path(
            gypi_values.chrome_browser_permissions_android_java_ui_sources,
            ".",
            "//chrome")
    sources += rebase_path(
            gypi_values.chrome_browser_search_engines_android_java_ui_sources,
            ".",
            "//chrome")
    if (enable_supervised_users) {
      sources += rebase_path(
              gypi_values.chrome_browser_supervised_user_android_java_ui_sources,
              ".",
              "//chrome")
    }
  }

  if (toolkit_views) {
    deps += [ "//ui/views" ]
  }

  if (is_win || is_mac) {
    sources +=
        rebase_path(gypi_values.chrome_browser_win_mac_sources, ".", "//chrome")
  }
  if (!is_win && !is_mac) {
    sources += [ "net/net_error_diagnostics_dialog_generic.cc" ]
  }
  if (!is_android && !is_chromeos) {
    sources += [
      "net/disk_cache_dir_policy_handler.cc",
      "net/disk_cache_dir_policy_handler.h",
    ]
  }
  if (is_mac) {
    sources +=
        rebase_path(gypi_values.chrome_browser_mac_sources, ".", "//chrome")
    deps += [
      "//chrome/app_shim",
      "//chrome/browser/apps/app_shim",
    ]
  }
  if (enable_extensions) {
    public_deps += [ "//chrome/browser/extensions" ]
    allow_circular_includes_from += [ "//chrome/browser/extensions" ]
    deps += [
      "//chrome/browser/sync_file_system/drive_backend:sync_file_system_drive_proto",
      "//chrome/common/extensions/api",
      "//chrome/common/extensions/api:api_registration",
      "//chrome/common/extensions/api:extensions_features",
      "//components/drive",
      "//components/proximity_auth/ble",
      "//components/proximity_auth/cryptauth",
      "//extensions/components/javascript_dialog_extensions_client",
      "//media/cast:net",
    ]
    sources += rebase_path(gypi_values.chrome_browser_extensions_sources,
                           ".",
                           "//chrome")
  }
  if (enable_background) {
    sources += rebase_path(gypi_values.chrome_browser_background_sources,
                           ".",
                           "//chrome")
    if (!use_aura || is_win || is_chromeos) {
      sources -= [ "background/background_mode_manager_aura.cc" ]
    }
  }
  if (enable_task_manager) {
    sources += rebase_path(gypi_values.chrome_browser_task_manager_sources,
                           ".",
                           "//chrome")
    if (is_chromeos) {
      sources +=
          rebase_path(gypi_values.chrome_browser_task_manager_chromeos_sources,
                      ".",
                      "//chrome")
    }
  }
  if (enable_spellcheck) {
    sources += rebase_path(gypi_values.chrome_browser_spellchecker_sources,
                           ".",
                           "//chrome")
    deps += [
      "//components/spellcheck/browser",
      "//components/spellcheck/common:common",
    ]

    if (!is_android) {
      deps += [ "//third_party/hunspell" ]
    }
  }
  if (enable_nacl) {
    sources +=
        rebase_path(gypi_values.chrome_browser_nacl_sources, ".", "//chrome")
    deps += [ "//components/nacl/browser" ]
  }

  if (enable_plugins) {
    sources +=
        rebase_path(gypi_values.chrome_browser_plugins_sources, ".", "//chrome")
    deps += [
      "//components/pdf/browser",
      "//ppapi/proxy:ipc",
      "//third_party/adobe/flash:flapper_version_h",
    ]
  }
  if (safe_browsing_mode != 0) {
    sources +=
        rebase_path(gypi_values.chrome_browser_safe_browsing_basic_sources,
                    ".",
                    "//chrome")
    deps += [
      "//chrome/browser/safe_browsing:chunk_proto",
      "//chrome/common/safe_browsing:proto",
      "//components/safe_browsing_db:metadata_proto",
    ]
    if (safe_browsing_mode == 1) {
      sources +=
          rebase_path(gypi_values.chrome_browser_safe_browsing_full_sources,
                      ".",
                      "//chrome")
      if (is_win) {
        deps += [ "//chrome/browser/safe_browsing/incident_reporting:state_store_data_proto" ]
      }
    } else if (safe_browsing_mode == 2) {
      sources +=
          rebase_path(gypi_values.chrome_browser_safe_browsing_mobile_sources,
                      ".",
                      "//chrome")
      deps += [ "//components/safe_browsing_db:safe_browsing_db_mobile" ]
    }
  }

  if (enable_hotwording) {
    defines += [ "ENABLE_HOTWORDING" ]
  }

  if (is_linux) {
    deps += [ "//device/media_transfer_protocol" ]
  }

  if (use_udev) {
    deps += [ "//device/udev_linux" ]
  }

  if (is_linux && !is_chromeos) {
    deps += [ "//third_party/speech-dispatcher" ]
  }

  if (is_chromeos) {
    sources += rebase_path(gypi_values.chrome_browser_chromeos_sources,
                           ".",
                           "//chrome")
    deps += [ "//chrome/browser/chromeos" ]
  } else {  # Non-ChromeOS.
    sources += rebase_path(gypi_values.chrome_browser_non_chromeos_sources,
                           ".",
                           "//chrome")
  }

  if (is_chromeos) {
    sources -= [
      "signin/chrome_signin_status_metrics_provider_delegate.cc",
      "signin/chrome_signin_status_metrics_provider_delegate.h",
    ]
  }

  if (is_chromeos) {
    sources += [
      "metrics/leak_detector/leak_detector_controller.cc",
      "metrics/leak_detector/leak_detector_controller.h",
      "metrics/leak_detector/leak_detector_remote_controller.cc",
      "metrics/leak_detector/leak_detector_remote_controller.h",
    ]
    public_deps += [
      "//components/metrics/leak_detector:interfaces",
      "//components/metrics/leak_detector:leak_detector",
    ]
  }

  if (use_cups) {
    configs += [ "//printing:cups" ]
  }
  if (use_gnome_keyring) {
    sources += rebase_path(gypi_values.chrome_browser_gnome_keyring_sources,
                           ".",
                           "//chrome")
    configs += [ "//components/os_crypt:gnome_keyring" ]
  }
  if (is_desktop_linux) {
    sources += rebase_path(gypi_values.chrome_browser_libsecret_sources,
                           ".",
                           "//chrome")
    defines += [ "USE_LIBSECRET" ]
    deps += [ "//third_party/libsecret" ]
  }
  if (use_aura) {
    sources +=
        rebase_path(gypi_values.chrome_browser_aura_sources, ".", "//chrome")

    # These files are only built in a GN build because they bring in
    # dependencies that don't build with GYP.
    sources += [
      "ui/views/frame/browser_frame_mus.cc",
      "ui/views/frame/browser_frame_mus.h",
      "ui/views/frame/browser_non_client_frame_view_mus.cc",
      "ui/views/frame/browser_non_client_frame_view_mus.h",
    ]
    deps += [
      "//content/public/common",
      "//services/ui/public/cpp",
      "//services/ui/public/cpp/input_devices",
      "//ui/aura",
      "//ui/compositor",
      "//ui/views/mus",
    ]
  }
  if (ui_compositor_image_transport) {
    deps += [ "//ui/gl" ]
  }

  if (use_ash) {
    sources +=
        rebase_path(gypi_values.chrome_browser_ash_sources, ".", "//chrome")
    deps += [ "//ash" ]
  }

  if (use_x11) {
    sources +=
        rebase_path(gypi_values.chrome_browser_x11_sources, ".", "//chrome")
  } else {
    sources -= [ "password_manager/password_store_x.cc" ]
  }
  if (use_aura && !use_ozone && is_desktop_linux) {
    deps += [ "//chrome/browser/ui/libgtk2ui" ]
    allow_circular_includes_from += [ "//chrome/browser/ui/libgtk2ui" ]
  }
  if (is_posix && !is_mac) {
    sources += [
      "//chrome/app/chrome_crash_reporter_client.cc",
      "//chrome/app/chrome_crash_reporter_client.h",
    ]
    deps += [
      "//components/crash/content/app",
      "//components/crash/content/browser",
      "//components/version_info:generate_version_info",
    ]
  }
  if (use_nss_certs) {
    sources +=
        rebase_path(gypi_values.chrome_browser_nss_sources, ".", "//chrome")
    if (is_chromeos) {
      sources -= [ "net/nss_context_linux.cc" ]
    }
  }
  if (enable_notifications) {
    sources += rebase_path(gypi_values.chrome_browser_notifications_sources,
                           ".",
                           "//chrome")
    if (android_java_ui) {
      sources += rebase_path(
              gypi_values.chrome_browser_notifications_android_java_ui_sources,
              ".",
              "//chrome")
    } else {
      sources += rebase_path(
              gypi_values.chrome_browser_notifications_non_android_sources,
              ".",
              "//chrome")
    }
    if (is_mac) {
      deps += [ "//chrome/browser/ui/cocoa/notifications:common" ]
    }
  }
  if (enable_themes) {
    sources +=
        rebase_path(gypi_values.chrome_browser_themes_sources, ".", "//chrome")
  }

  if (enable_basic_printing || enable_print_preview) {
    # Some form of printing support.
    sources += rebase_path(gypi_values.chrome_browser_printing_basic_sources,
                           ".",
                           "//chrome")
    deps += [
      "//components/printing/browser",
      "//printing",
    ]

    if (is_win) {
      sources += rebase_path(gypi_values.chrome_browser_printing_emf_sources,
                             ".",
                             "//chrome")
    }
    if (enable_print_preview) {
      # Full printing on top of the above.
      sources += rebase_path(gypi_values.chrome_browser_printing_full_sources,
                             ".",
                             "//chrome")
    } else {
      # Partial-only printing support.
      sources +=
          rebase_path(gypi_values.chrome_browser_printing_basic_only_sources,
                      ".",
                      "//chrome")
    }
  }
  if (enable_captive_portal_detection) {
    sources += rebase_path(gypi_values.chrome_browser_captive_portal_sources,
                           ".",
                           "//chrome")
  }
  if (enable_session_service) {
    sources += rebase_path(gypi_values.chrome_browser_session_service_sources,
                           ".",
                           "//chrome")
  }

  if (!is_android && !is_chromeos) {
    sources +=
        rebase_path(gypi_values.chrome_browser_desktop_sources, ".", "//chrome")
  }

  if (is_android) {
    # Mobile.
    sources +=
        rebase_path(gypi_values.chrome_browser_mobile_sources, ".", "//chrome")
  } else {
    # Non-mobile.
    deps += [
      "//apps",
      "//chrome/browser/policy:path_parser",
      "//chrome/browser/profile_resetter:profile_reset_report_proto",
      "//components/feedback",
      "//components/web_modal",
      "//net:net_browser_services",
    ]
    sources += rebase_path(gypi_values.chrome_browser_non_mobile_sources,
                           ".",
                           "//chrome")
  }

  if (!is_chrome_branded) {
    sources += [
      "search/local_files_ntp_source.cc",
      "search/local_files_ntp_source.h",
    ]
  }

  if (is_android) {
    sources +=
        rebase_path(gypi_values.chrome_browser_android_sources, ".", "//chrome")
  }

  if (android_java_ui) {
    sources += rebase_path(gypi_values.chrome_browser_android_java_ui_sources,
                           ".",
                           "//chrome")
    sources += rebase_path(gypi_values.chrome_browser_offline_pages_sources,
                           ".",
                           "//chrome")
    deps += [
      ":client_discourse_context_proto",
      ":delta_file_proto",
      ":jni_headers",
      "//blimp/client/public",
      "//chrome/browser/android/webapk:proto",
      "//components/data_usage/android",
      "//components/precache/content",
      "//components/precache/core",
      "//components/resources:components_resources",
      "//components/toolbar",
      "//components/web_contents_delegate_android",
      "//third_party/smhasher:murmurhash2",
    ]
  }

  if (enable_vr_shell && android_java_ui) {
    defines += [ "ENABLE_VR_SHELL" ]
    deps += [ "android/vr_shell:vr_shell" ]
    configs += [ "//third_party/gvr-android-sdk:libgvr_config" ]
  }

  if (is_android) {
    deps += [
      "//components/cdm/browser",
      "//components/resources:components_resources",
      "//third_party/android_opengl/etc1",
      "//third_party/android_tools:cpu_features",
      "//third_party/libaddressinput:util",
    ]

    deps -= [
      "//components/storage_monitor",
      "//third_party/libaddressinput",
    ]

    if (use_seccomp_bpf) {
      defines += [ "USE_SECCOMP_BPF" ]
      deps += [ "//sandbox/linux:seccomp_bpf" ]
    }
  }

  if (is_mac) {
    deps += [
      "//third_party/google_toolbox_for_mac",
      "//third_party/mozilla",
    ]
    libs += [
      "Accelerate.framework",
      "AddressBook.framework",
      "AudioUnit.framework",
      "DiskArbitration.framework",
      "IOKit.framework",
      "ImageCaptureCore.framework",
      "OpenGL.framework",
      "QuartzCore.framework",
      "SecurityInterface.framework",
    ]
  }

  if (enable_rlz) {
    deps += [ ":rlz" ]
  }

  if (is_win) {
    sources +=
        rebase_path(gypi_values.chrome_browser_win_sources, ".", "//chrome")
    public_deps += [
      "//ui/views",
      "//ui/views/controls/webview",
    ]
    deps += [
      ":chrome_process_finder",
      "//chrome:file_pre_reader",
      "//chrome/chrome_watcher:client",
      "//chrome/common:metrics_constants_util_win",
      "//chrome/common:version_header",
      "//chrome_elf:blacklist",
      "//chrome_elf:constants",
      "//chrome_elf:dll_hash",
      "//components/browser_watcher",
      "//components/browser_watcher:browser_watcher_client",
      "//components/startup_metric_utils/common",
      "//google_update",
      "//third_party/iaccessible2",
      "//third_party/isimpledom",
      "//third_party/wtl",
    ]

    all_dependent_configs = [ ":browser_win_linker_flags" ]

    if (!is_chrome_branded) {
      deps -= [ "//google_update" ]
      sources -= [
        "google/did_run_updater_win.cc",
        "google/did_run_updater_win.h",
        "google/google_update_win.cc",
        "google/google_update_win.h",
      ]
    }
  } else {
    # Non-Windows.
    sources +=
        rebase_path(gypi_values.chrome_browser_non_win_sources, ".", "//chrome")
    if (toolkit_views) {
      deps += [
        "//ui/views",
        "//ui/views/controls/webview",
      ]
    }
  }

  if (is_linux) {
    if (use_aura) {
      deps += [ "//build/linux:fontconfig" ]
      if (use_dbus) {
        deps += [ "//dbus" ]
      }
    }
    if (use_x11) {
      configs += [ "//build/config/linux:x11" ]
      deps += [ "//ui/gfx/x" ]
    }
  }

  if (is_linux || is_win) {
    sources += rebase_path(gypi_values.chrome_browser_non_mac_desktop_sources,
                           ".",
                           "//chrome")
  }

  if (is_desktop_linux) {
    sources += rebase_path(gypi_values.chrome_browser_linux_desktop_sources,
                           ".",
                           "//chrome")
  }
  if (enable_plugin_installation) {
    sources +=
        rebase_path(gypi_values.chrome_browser_plugin_installation_sources,
                    ".",
                    "//chrome")
  }
  if (enable_app_list) {
    deps += [ "//ui/app_list" ]
  }
  if (enable_supervised_users) {
    sources += rebase_path(gypi_values.chrome_browser_supervised_user_sources,
                           ".",
                           "//chrome")
  }
  if (enable_supervised_users && !is_android) {
    sources +=
        rebase_path(gypi_values.chrome_browser_supervised_user_legacy_sources,
                    ".",
                    "//chrome")
  }
  if (enable_supervised_users && enable_themes) {
    sources += rebase_path(
            gypi_values.chrome_browser_supervised_user_and_themes_sources,
            ".",
            "//chrome")
  }
  if (enable_webrtc) {
    sources +=
        rebase_path(gypi_values.chrome_browser_webrtc_sources, ".", "//chrome")
  }
  if (enable_service_discovery) {
    sources += rebase_path(gypi_values.chrome_browser_service_discovery_sources,
                           ".",
                           "//chrome")
  }
  if (enable_mdns) {
    sources +=
        rebase_path(gypi_values.chrome_browser_mdns_sources, ".", "//chrome")
  }
  if (is_android) {
    sources -= [
      "autofill/validation_rules_storage_factory.cc",
      "autofill/validation_rules_storage_factory.h",
    ]
  }
  if (enable_media_router) {
    deps += [ "//chrome/browser/media/router" ]
  }

  if (enable_mojo_media) {
    configs += [ "//media/mojo/services:mojo_media_config" ]
    sources += [
      "media/output_protection_impl.cc",
      "media/output_protection_impl.h",
    ]
    deps += [ "//media/mojo/interfaces" ]
    if (mojo_media_host == "browser") {
      deps += [ "//media/mojo/services" ]
    }
  }

  if (enable_wayland_server) {
    deps += [
      "//components/exo",
      "//components/exo/wayland",
    ]
    sources += [
      "chrome_browser_main_extra_parts_exo.cc",
      "chrome_browser_main_extra_parts_exo.h",
    ]
  }
}

if (android_java_ui) {
  # GYP version: chrome/chrome_browser.gypi:chrome_browser_jni_headers
  generate_jni("jni_headers") {
    sources =
        rebase_path(gypi_values.chrome_browser_jni_sources, ".", "//chrome")
    jni_package = "chrome"
  }

  #GYP: '//chrome/chrome_browser.gypi:client_discourse_context_proto'
  proto_library("client_discourse_context_proto") {
    sources = [
      "android/proto/client_discourse_context.proto",
    ]
  }

  #GYP: '//chrome/chrome_browser.gypi:delta_file_proto'
  proto_library("delta_file_proto") {
    sources = [
      "android/proto/delta_file.proto",
    ]
  }
}

if (is_win) {
  static_library("chrome_process_finder") {
    sources = [
      "win/chrome_process_finder.cc",
      "win/chrome_process_finder.h",
    ]
    deps = [
      "//base",
      "//chrome/common:constants",
    ]
    if (enable_configuration_policy) {
      deps += [ "//chrome/browser/policy:path_parser" ]
    }
  }
}

proto_library("resource_prefetch_predictor_proto") {
  sources = [
    "predictors/resource_prefetch_predictor.proto",
  ]
}

# GYP version: chrome/chrome_resources.gyp:chrome_resources
# (generate_browser_resources action)
grit("resources") {
  source = "browser_resources.grd"
  use_qualified_include = true
  defines = chrome_grit_defines
  output_dir = "$root_gen_dir/chrome"
  outputs = [
    "grit/browser_resources.h",
    "browser_resources.pak",
  ]

  grit_flags = [
    "-E",
    "additional_modules_list_file=" +
        rebase_path(additional_modules_list_file, root_build_dir),
    "-E",
    "root_gen_dir=" + rebase_path(root_gen_dir, root_build_dir),
  ]

  deps = [
    ":chrome_internal_resources_gen",
    "//chrome/browser/resources/safe_browsing:make_file_types_protobuf",

    # Depend only on the generated mojo bindings since we read the .mojom.js
    # file, rather than the whole mojo target which will link the C++ bindings.
    "//chrome/browser/ui/webui/engagement:mojo_bindings__generator",
    "//chrome/browser/ui/webui/omnibox:mojo_bindings__generator",
    "//chrome/browser/ui/webui/plugins:mojo_bindings__generator",
    "//chrome/browser/ui/webui/usb_internals:mojo_bindings__generator",
    "//url/mojo:url_mojom_gurl__generator",
    "//url/mojo:url_mojom_origin__generator",
  ]
}

# GYP version: chrome/chrome_resource.gyp:chrome_internal_resources_gen
if (is_chrome_branded) {
  action("chrome_internal_resources_gen") {
    script = "internal/transform_additional_modules_list.py"
    sources = [
      "internal/resources/additional_modules_list.input",
    ]
    outputs = [
      additional_modules_list_file,
    ]
    args = rebase_path(sources, root_build_dir) +
           rebase_path(outputs, root_build_dir)
  }
} else {
  group("chrome_internal_resources_gen") {
    # Empty placeholder.
  }
}

# In GYP this is part of test_support_common.
#
# Use a static library here because many test binaries depend on this but don't
# require many files from it. This makes linking more efficient.
static_library("test_support") {
  testonly = true

  # Always include this via the main test support target.
  visibility = [ "//chrome/test:test_support" ]

  sources = [
    "browsing_data/mock_browsing_data_appcache_helper.cc",
    "browsing_data/mock_browsing_data_appcache_helper.h",
    "browsing_data/mock_browsing_data_cache_storage_helper.cc",
    "browsing_data/mock_browsing_data_cache_storage_helper.h",
    "browsing_data/mock_browsing_data_channel_id_helper.cc",
    "browsing_data/mock_browsing_data_channel_id_helper.h",
    "browsing_data/mock_browsing_data_cookie_helper.cc",
    "browsing_data/mock_browsing_data_cookie_helper.h",
    "browsing_data/mock_browsing_data_database_helper.cc",
    "browsing_data/mock_browsing_data_database_helper.h",
    "browsing_data/mock_browsing_data_file_system_helper.cc",
    "browsing_data/mock_browsing_data_file_system_helper.h",
    "browsing_data/mock_browsing_data_flash_lso_helper.cc",
    "browsing_data/mock_browsing_data_flash_lso_helper.h",
    "browsing_data/mock_browsing_data_indexed_db_helper.cc",
    "browsing_data/mock_browsing_data_indexed_db_helper.h",
    "browsing_data/mock_browsing_data_local_storage_helper.cc",
    "browsing_data/mock_browsing_data_local_storage_helper.h",
    "browsing_data/mock_browsing_data_quota_helper.cc",
    "browsing_data/mock_browsing_data_quota_helper.h",
    "browsing_data/mock_browsing_data_service_worker_helper.cc",
    "browsing_data/mock_browsing_data_service_worker_helper.h",
    "download/download_test_file_activity_observer.cc",
    "download/download_test_file_activity_observer.h",
    "media/fake_desktop_media_list.cc",
    "media/fake_desktop_media_list.h",
    "net/dns_probe_test_util.cc",
    "net/dns_probe_test_util.h",
    "net/url_request_mock_util.cc",
    "net/url_request_mock_util.h",
    "notifications/notification_test_util.cc",
    "notifications/notification_test_util.h",
    "notifications/stub_notification_platform_bridge.cc",
    "notifications/stub_notification_platform_bridge.h",
    "search_engines/template_url_service_factory_test_util.cc",
    "search_engines/template_url_service_factory_test_util.h",
    "search_engines/template_url_service_test_util.cc",
    "search_engines/template_url_service_test_util.h",
    "signin/fake_account_fetcher_service_builder.cc",
    "signin/fake_account_fetcher_service_builder.h",
    "signin/fake_gaia_cookie_manager_service_builder.cc",
    "signin/fake_gaia_cookie_manager_service_builder.h",
    "signin/fake_profile_oauth2_token_service_builder.cc",
    "signin/fake_profile_oauth2_token_service_builder.h",
    "signin/fake_signin_manager_builder.cc",
    "signin/fake_signin_manager_builder.h",
    "ssl/ssl_client_auth_requestor_mock.cc",
    "ssl/ssl_client_auth_requestor_mock.h",
    "sync/profile_sync_test_util.cc",
    "sync/profile_sync_test_util.h",
  ]

  configs += [ "//build/config:precompiled_headers" ]

  public_deps = [
    ":browser",
    "//chrome/browser/ui:test_support",
  ]
  deps = [
    "//chrome/app/theme:theme_resources",
    "//chrome/browser",
    "//chrome/common",
    "//chrome/common/safe_browsing:proto",
    "//components/browser_sync/browser:test_support",
    "//components/invalidation/impl",
    "//components/invalidation/impl:test_support",
    "//components/password_manager/core/browser:test_support",
    "//components/prefs:test_support",
    "//components/search_engines:test_support",
    "//components/sessions:test_support",
    "//components/subresource_filter/core/browser:test_support",
    "//components/subresource_filter/core/common:test_support",
    "//components/syncable_prefs:test_support",
    "//components/user_prefs/tracked:user_prefs_tracked_test_support",
    "//content/test:test_support",
    "//google_apis:test_support",
    "//net:test_support",
    "//skia",
    "//testing/gmock",
    "//testing/gtest",
    "//ui/gfx",
  ]

  if (!is_android) {
    sources += [
      "chooser_controller/mock_chooser_controller.cc",
      "chooser_controller/mock_chooser_controller.h",
      "download/test_download_shelf.cc",
      "download/test_download_shelf.h",
      "permissions/mock_permission_request.cc",
      "permissions/mock_permission_request.h",
      "profile_resetter/profile_resetter_test_base.cc",
      "profile_resetter/profile_resetter_test_base.h",
      "sessions/session_restore_test_helper.cc",
      "sessions/session_restore_test_helper.h",
      "sessions/session_service_test_helper.cc",
      "sessions/session_service_test_helper.h",
    ]
  }

  if (enable_extensions) {
    sources += [
      "extensions/extension_action_test_util.cc",
      "extensions/extension_action_test_util.h",
    ]
    deps += [ "//extensions:test_support" ]
  }

  if (is_chromeos) {
    sources += [
      "chromeos/app_mode/fake_cws.cc",
      "chromeos/app_mode/fake_cws.h",
      "chromeos/file_manager/fake_disk_mount_manager.cc",
      "chromeos/file_manager/fake_disk_mount_manager.h",
      "chromeos/input_method/mock_candidate_window_controller.cc",
      "chromeos/input_method/mock_candidate_window_controller.h",
      "chromeos/input_method/mock_input_method_engine.cc",
      "chromeos/input_method/mock_input_method_engine.h",
      "chromeos/input_method/mock_input_method_manager.cc",
      "chromeos/input_method/mock_input_method_manager.h",
      "chromeos/login/screens/mock_device_disabled_screen_actor.cc",
      "chromeos/login/screens/mock_device_disabled_screen_actor.h",
      "chromeos/login/session/user_session_manager_test_api.cc",
      "chromeos/login/session/user_session_manager_test_api.h",
      "chromeos/login/test/js_checker.cc",
      "chromeos/login/test/js_checker.h",
      "chromeos/login/test/oobe_screen_waiter.cc",
      "chromeos/login/test/oobe_screen_waiter.h",
      "chromeos/login/ui/mock_login_display.cc",
      "chromeos/login/ui/mock_login_display.h",
      "chromeos/login/ui/mock_login_display_host.cc",
      "chromeos/login/ui/mock_login_display_host.h",
      "chromeos/login/users/avatar/mock_user_image_manager.cc",
      "chromeos/login/users/avatar/mock_user_image_manager.h",
      "chromeos/login/users/fake_chrome_user_manager.cc",
      "chromeos/login/users/fake_chrome_user_manager.h",
      "chromeos/login/users/fake_supervised_user_manager.cc",
      "chromeos/login/users/fake_supervised_user_manager.h",
      "chromeos/login/users/mock_user_manager.cc",
      "chromeos/login/users/mock_user_manager.h",
      "chromeos/net/network_portal_detector_test_utils.cc",
      "chromeos/net/network_portal_detector_test_utils.h",
      "chromeos/policy/cloud_external_data_manager_base_test_util.cc",
      "chromeos/policy/cloud_external_data_manager_base_test_util.h",
      "chromeos/policy/device_policy_builder.cc",
      "chromeos/policy/device_policy_builder.h",
      "chromeos/policy/fake_device_cloud_policy_initializer.cc",
      "chromeos/policy/fake_device_cloud_policy_initializer.h",
      "chromeos/policy/fake_device_cloud_policy_manager.cc",
      "chromeos/policy/fake_device_cloud_policy_manager.h",
      "chromeos/policy/stub_enterprise_install_attributes.cc",
      "chromeos/policy/stub_enterprise_install_attributes.h",
      "chromeos/settings/device_settings_test_helper.cc",
      "chromeos/settings/device_settings_test_helper.h",
    ]
    configs += [ "//build/config/linux/dbus" ]
    deps += [ "//chromeos:test_support" ]
  }

  if (enable_configuration_policy) {
    sources += [
      "policy/test/local_policy_test_server.cc",
      "policy/test/local_policy_test_server.h",
    ]
    public_deps += [ "//components/policy/core/browser:test_support" ]
  }

  if (safe_browsing_mode == 1) {
    sources += [
      "extensions/fake_safe_browsing_database_manager.cc",
      "extensions/fake_safe_browsing_database_manager.h",
    ]
  }

  if (enable_extensions) {
    sources += [
      "extensions/api/messaging/native_messaging_test_util.cc",
      "extensions/api/messaging/native_messaging_test_util.h",
      "extensions/mock_extension_special_storage_policy.cc",
      "extensions/mock_extension_special_storage_policy.h",
      "extensions/test_blacklist.cc",
      "extensions/test_blacklist.h",
      "extensions/test_blacklist_state_fetcher.cc",
      "extensions/test_blacklist_state_fetcher.h",
      "extensions/test_extension_dir.cc",
      "extensions/test_extension_dir.h",
      "extensions/test_extension_environment.cc",
      "extensions/test_extension_environment.h",
      "extensions/test_extension_prefs.cc",
      "extensions/test_extension_prefs.h",
      "extensions/test_extension_service.cc",
      "extensions/test_extension_service.h",
      "extensions/test_extension_system.cc",
      "extensions/test_extension_system.h",
      "media_galleries/media_galleries_test_util.cc",
      "media_galleries/media_galleries_test_util.h",
    ]
    deps += [
      "//components/drive:test_support",
      "//components/storage_monitor:test_support",
    ]
  }

  if (enable_mdns) {
    sources += [
      "local_discovery/test_service_discovery_client.cc",
      "local_discovery/test_service_discovery_client.h",
    ]
  }

  if (enable_app_list) {
    sources += [
      "ui/app_list/test/chrome_app_list_test_support.cc",
      "ui/app_list/test/chrome_app_list_test_support.h",
      "ui/app_list/test/test_app_list_controller_delegate.cc",
      "ui/app_list/test/test_app_list_controller_delegate.h",
    ]
  }

  if (enable_pepper_cdms) {
    sources += [
      "media/pepper_cdm_test_helper.cc",
      "media/pepper_cdm_test_helper.h",
    ]
    deps += [
      ":pepper_cdm_test_constants",
      "//media:cdm_paths",
    ]
  }
}

# In GYP this is part of test_support_ui.
static_library("test_support_ui") {
  testonly = true

  # Always include this via the main test support UI target.
  visibility = [ "//chrome/test:test_support_ui" ]

  sources = [
    "password_manager/password_manager_test_base.cc",
    "password_manager/password_manager_test_base.h",
    "signin/token_revoker_test_utils.cc",
    "signin/token_revoker_test_utils.h",
    "ui/webui/signin/login_ui_test_utils.cc",
    "ui/webui/signin/login_ui_test_utils.h",
  ]

  configs += [ "//build/config:precompiled_headers" ]

  deps = [
    "//components/metrics:test_support",
    "//components/password_manager/content/public/interfaces",
    "//components/password_manager/core/browser:test_support",
    "//components/translate/content/common",
    "//skia",
    "//testing/gtest",
  ]
}

if (enable_rlz_support) {
  static_library("rlz") {
    sources =
        rebase_path(gypi_values.chrome_browser_rlz_sources, ".", "//chrome")
    deps = [
      "//components/google/core/browser",
      "//components/omnibox/browser",
      "//components/rlz",
      "//components/search_engines",
      "//rlz:rlz_lib",
    ]
  }
}

if (enable_pepper_cdms) {
  # These constants are separated so that test binaries can use them without
  # linking all of the test support.
  static_library("pepper_cdm_test_constants") {
    testonly = true
    visibility = [ "//chrome/*" ]
    sources = [
      "media/pepper_cdm_test_constants.cc",
      "media/pepper_cdm_test_constants.h",
    ]
  }
}
