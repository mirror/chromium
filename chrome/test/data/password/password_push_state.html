<html>
<head>
<script>

function handleSubmitFormEvent(e) {
    e.preventDefault();
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
      history.pushState({}, "", "password_push_state.html"); };
    xhr.open("GET", "password_push_state.html", true);
    xhr.send(null);
}

window.onload = function() {
  document.getElementById("testform")
          .addEventListener("submit", handleSubmitFormEvent);
  document.getElementById("chg_testform")
          .addEventListener("submit", handleSubmitFormEvent);
  document.getElementById("mark_chg_testform")
          .addEventListener("submit", handleSubmitFormEvent);
}

</script>
</head>
<body>
<form action="password_push_state.html"
      id="testform">
  <input type="text" id="username_field" name="username_field">
  <input type="password" id="password_field" name="password_field">
  <input type="submit" id="submit_button" name="submit_button">
</form>

<!-- Change password form without the username explicitly marked. -->
<form action="password_push_state.html" id="chg_testform">
  <!-- No autocomplete=username. -->
  <input type="text" id="chg_not_username_field" name="chg_not_username_field">
  <input type="password" id="chg_password_field" name="chg_password_field"
         autocomplete="current-password">
  <input type="password" id="chg_new_password_1" name="chg_new_password_1"
         autocomplete="new-password">
  <input type="password" id="chg_new_password_2" name="chg_new_password_2"
         autocomplete="new-password">
  <input type="submit" id="chg_submit_button" name="chg_submit_button">
</form>

<!-- Change password form with the username explicitly marked. -->
<form action="password_push_state.html" id="mark_chg_testform">
  <input type="text" id="mark_chg_username_field" name="mark_chg_username_field"
         autocomplete="username">
  <input type="password" id="mark_chg_password_field"
         name="mark_chg_password_field" autocomplete="current-password">
  <input type="password" id="mark_chg_new_password_1"
         name="mark_chg_new_password_1" autocomplete="new-password">
  <input type="password" id="mark_chg_new_password_2"
         name="mark_chg_new_password_2" autocomplete="new-password">
  <input type="submit" id="mark_chg_submit_button"
         name="mark_chg_submit_button">
</form>

</body>
</html>

<html>
