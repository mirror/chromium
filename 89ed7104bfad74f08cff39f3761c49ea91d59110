{
  "comments": [
    {
      "key": {
        "uuid": "fe941bea_c4cb80c1",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletProcessor.cpp",
        "patchSetId": 14
      },
      "lineNbr": 29,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-11-03T22:39:50Z",
      "side": 1,
      "message": "The issue here is that ToWorkerGlobalScope() fails on AudioWorkletGlobalScope.\n\nToWorkerGlobalScope() is in blink::V8AbstractEventListener, so the event listener (port.onmessage) checks if the scope is a valid WorkerGlobalScope. AudioWorkletGlobalScope does not qualify for that, hence DCHECK fails.\n\nI need some advice how to resolve this from the perspective of V8 binding and Worker infra.",
      "range": {
        "startLine": 29,
        "startChar": 2,
        "endLine": 29,
        "endChar": 78
      },
      "revId": "89ed7104bfad74f08cff39f3761c49ea91d59110",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99ad53bd_e23d3b17",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletProcessor.cpp",
        "patchSetId": 14
      },
      "lineNbr": 29,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-11-06T01:45:36Z",
      "side": 1,
      "message": "Specifically, what DCHECK are you hitting?\n\nnhiroki@: Maybe do we need to replace ToWorkerGlobalScope() with ToWorkletOrWorkerGlobalScope()? Then we\u0027ll need to move a bunch of methods from WorkerGlobalScope to WorkletOrWorkerGlobalScope though (but I think this makes sense).",
      "parentUuid": "fe941bea_c4cb80c1",
      "range": {
        "startLine": 29,
        "startChar": 2,
        "endLine": 29,
        "endChar": 78
      },
      "revId": "89ed7104bfad74f08cff39f3761c49ea91d59110",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0e683e2_402554c5",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletProcessor.cpp",
        "patchSetId": 14
      },
      "lineNbr": 29,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-11-06T03:59:32Z",
      "side": 1,
      "message": "I was originally using ToWorkletGlobalScope(global_scope) here, but it\u0027s failing at:\nhttps://cs.chromium.org/chromium/src/third_party/WebKit/Source/bindings/core/v8/V8AbstractEventListener.cpp?sq\u003dpackage:chromium\u0026l\u003d63",
      "parentUuid": "99ad53bd_e23d3b17",
      "range": {
        "startLine": 29,
        "startChar": 2,
        "endLine": 29,
        "endChar": 78
      },
      "revId": "89ed7104bfad74f08cff39f3761c49ea91d59110",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33fe5493_6c470f5a",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletProcessor.cpp",
        "patchSetId": 14
      },
      "lineNbr": 29,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-06T06:34:42Z",
      "side": 1,
      "message": "haraken@\u0027s suggestion sounds good.\n\nThis is the first attempt to introduce an Event in Worklets. We may need to relax such the checks in several places and move a bunch of things to upper classes :)",
      "parentUuid": "b0e683e2_402554c5",
      "range": {
        "startLine": 29,
        "startChar": 2,
        "endLine": 29,
        "endChar": 78
      },
      "revId": "89ed7104bfad74f08cff39f3761c49ea91d59110",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2337ea28_dcea33e0",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletProcessor.cpp",
        "patchSetId": 14
      },
      "lineNbr": 29,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-11-06T17:31:54Z",
      "side": 1,
      "message": "Okay, then I should hold this CL wait until the infra change is landed.",
      "parentUuid": "33fe5493_6c470f5a",
      "range": {
        "startLine": 29,
        "startChar": 2,
        "endLine": 29,
        "endChar": 78
      },
      "revId": "89ed7104bfad74f08cff39f3761c49ea91d59110",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}