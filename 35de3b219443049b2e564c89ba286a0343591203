{
  "comments": [
    {
      "key": {
        "uuid": "cded8163_43976465",
        "filename": "ios/web/web_state/navigation_callbacks_inttest.mm",
        "patchSetId": 2
      },
      "lineNbr": 788,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-11-11T01:05:25Z",
      "side": 1,
      "message": "Please note that slim NM will not call DidStartLoading if ShouldAllowRequest rejected the load, which is more than just ordering. Page Load counter depends on current behavior of DidStartLoading. This change is correct, but it will affect Page Load counter and we will loose the value of CPM metric for one release. If we have to change the contract for DidStartLoading, then we have to migrate Page Load metric to a different callback (DidStartNavigation would be a reasonable choice) by running 50% experiment for Page Load counter. This way we can still compare CPM across the releases. \n\nWe can talk offline if my proposal and comment do not make sense :)",
      "range": {
        "startLine": 788,
        "startChar": 27,
        "endLine": 788,
        "endChar": 57
      },
      "revId": "35de3b219443049b2e564c89ba286a0343591203",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfcd85d0_290b6d9e",
        "filename": "ios/web/web_state/navigation_callbacks_inttest.mm",
        "patchSetId": 2
      },
      "lineNbr": 788,
      "author": {
        "id": 1190590
      },
      "writtenOn": "2017-11-13T22:57:03Z",
      "side": 1,
      "message": "Ah good catch. I was hoping to not have to do this as a prerequisite for slim NM experiment...\n\nI documented all options I can think of here: https://docs.google.com/document/d/1xa0LYij6kVyJLpEHQMuMBVm_HIa9lJZcwFqzYLabOEU/edit#\n\nThe two options for preserving current DidStartLoading behavior both seem very brittle... and the 3rd option of changing the metric before slim NM experiment doesn\u0027t seem as complex as I originally thought. So maybe (3) is the least effort and \"right\" way. What do you think? Is there a lower effort way?",
      "parentUuid": "cded8163_43976465",
      "range": {
        "startLine": 788,
        "startChar": 27,
        "endLine": 788,
        "endChar": 57
      },
      "revId": "35de3b219443049b2e564c89ba286a0343591203",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88cec576_760165c3",
        "filename": "ios/web/web_state/navigation_callbacks_inttest.mm",
        "patchSetId": 2
      },
      "lineNbr": 788,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-11-14T01:35:26Z",
      "side": 1,
      "message": "Thanks for this doc! # 3 sounds indeed list the least effort and \"the right\" way (at least to me). I will add pkl@ to the linked doc, as he will be a decision maker on CPM changes.",
      "parentUuid": "bfcd85d0_290b6d9e",
      "range": {
        "startLine": 788,
        "startChar": 27,
        "endLine": 788,
        "endChar": 57
      },
      "revId": "35de3b219443049b2e564c89ba286a0343591203",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}