{
  "comments": [
    {
      "key": {
        "uuid": "be0f9d1d_261ce2cc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-12-20T21:06:57Z",
      "side": 1,
      "message": "My initial impression is that is better for Chromium to crash when an expected preference is missing so that we catch the (likely erroneous removal) immediately or have a clear signal that more code clean-up work is needed.\n\nAre there currently scenarios where we want to/need to be tolerant of non-existent preferences?",
      "range": {
        "startLine": 13,
        "startChar": 21,
        "endLine": 13,
        "endChar": 75
      },
      "revId": "b0f84844e10134c0423e2d196bcbe411267a5af1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e249cca3_3c649f34",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1191450
      },
      "writtenOn": "2017-12-20T22:27:14Z",
      "side": 1,
      "message": "Hi Theresa, thank you for reviewing this. I understand you concerns.\n\nThe point of this patch is to make the chromium more robust and NPE-proof. For the sake of testing, maybe we want it to crash so that we can notice the missing preference. But for the sake of production to actual users, crash could be very bad user experience. So, I would like propose this approach in production code and catch the missing preference error in testing.\n\nAs for current scenarios where we may be missing preference, there isn\u0027t any for chromium so far. But other browsers which are based on chromium, they may remove many preference on purpose and crash every time updating preference \u003d_\u003d\n\nPlease take a second thought. If crashing for non-existing preference is still preferred approach, then I totally understand.\n\nBtw, for the code change, the current code may seems a little cluttered because it\u0027s calling findPreference method twice when changing. I can introduce an interface to avoid that if you preferred :)\n\nThank you",
      "parentUuid": "be0f9d1d_261ce2cc",
      "range": {
        "startLine": 13,
        "startChar": 21,
        "endLine": 13,
        "endChar": 75
      },
      "revId": "b0f84844e10134c0423e2d196bcbe411267a5af1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc06f16c_1ee9ec40",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-12-21T17:07:14Z",
      "side": 1,
      "message": "Could/should other browsers built on top of Chromium also remove the Java code related to the non-existent preferences?",
      "parentUuid": "e249cca3_3c649f34",
      "range": {
        "startLine": 13,
        "startChar": 21,
        "endLine": 13,
        "endChar": 75
      },
      "revId": "b0f84844e10134c0423e2d196bcbe411267a5af1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35acb6ca_205ad23a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1191450
      },
      "writtenOn": "2017-12-21T18:41:13Z",
      "side": 1,
      "message": "This is a good point. The thing is that for other browsers built on top of Chromium, they may be overriding Chromium\u0027s method, such as updatePreference method. In the overriding, the super\u0027s method is called instead of totally forking the method, which would result in crash on these non-existent preference. \n\nI understand it may seem not that beneficial for Chromium, I respect your concerns and defer to your opinions too.",
      "parentUuid": "bc06f16c_1ee9ec40",
      "range": {
        "startLine": 13,
        "startChar": 21,
        "endLine": 13,
        "endChar": 75
      },
      "revId": "b0f84844e10134c0423e2d196bcbe411267a5af1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2be25000_1d2b6617",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2018-01-05T17:59:28Z",
      "side": 1,
      "message": "I think executing changes as a runnable adds a layer of indirection that makes the code more confusing and may make stack traces harder to follow.\n\nAlso, in this CL #changePreference is called inconsistently. There are several preferences that aren\u0027t checked, e.g. PREF_AUTOFILL_SETTINGS, PREF_SAVED_PASSWORDS, PREF_DATA_REDUCTION, PREF_LANGUAGES, PREF_DOWNLOADS.\n\nIf there are specific things that a sub-class needs to override, I suggest creating smaller methods that update specific preference then overriding in the browser built on top of Chromium, e.g. #updateSearchEnginePreference() could be protected and overridden to remove the preference.",
      "parentUuid": "35acb6ca_205ad23a",
      "range": {
        "startLine": 13,
        "startChar": 21,
        "endLine": 13,
        "endChar": 75
      },
      "revId": "b0f84844e10134c0423e2d196bcbe411267a5af1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}