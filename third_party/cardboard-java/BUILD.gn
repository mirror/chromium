# Copyright 2015 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/android/rules.gni")

# GYP: //third_party/cardboard-java/cardboard.gyp:cardboard_jar
android_java_prebuilt("cardboard-java") {
  jar_path = "$root_out_dir/cardboard.jar"
  #jar_path = "cardboard.jar"
  deps = [
    ":cardboard_extract_aar",
  ]
}

# A special version of common.jar protobuf related classes have been deleted
# manually.
android_java_prebuilt("cardboard-common-java") {
  jar_path = "common.jar"
}

# need to extract res too. Note there were some deperactaed property that
# I updated to solve compiler errors. The custom package is also in vr.cardbaord
# not in vrtoolkit.cardboard although the folder is in core.aar
android_resources("cardboard-core-res") {
  resource_dirs = ["res"]
  custom_package = "com.google.vr.cardboard"
}

action("cardboard_extract_aar") {
  script = "extract_aar_lib.py"
  sources = [
    "src/libraries/core/core.aar",
  ]
  outputs = [
    "$root_out_dir/cardboard.jar",
    "$root_out_dir/libvrtoolkit.so",
  ]
  args = [ android_app_abi ]
  args += rebase_path(sources, root_build_dir)
  args += rebase_path(outputs, root_build_dir)
}
