Name: Apache2 (+ PHP)
Short Name: httpd
URL: http://www.apache.org
Version: 2.4.27
Security Critical: no
License: Apache Version 2.0
License File: LICENSE.txt

Description:

This is a checked-in copy of Apache2 with OpenSSL and PHP5 for Win32.
It is used by the Blink layout tests.

To update, you'll need to fetch Apache2 and PHP5. https://www.apache.org no
longer hosts binaries of the latest stable version, but you can find Apache2
win32 binaries in other places, such as https://www.apachehaus.com/.
PHP5 can be found at http://windows.php.net/downloads/releases/archives/.

To update:
 
1. Go to the Chromium third_party directory and back up apache-win32,
   for example by renaming it as apache-win32.bak.

2. Download Apache2, unpack, and move to "apache-win32". This directory
   should contain metadata files and bin/ and modules/ subdirectories.

3. Copy README.chromium and remove_files_not_needed_for_chromium.sh
   to the new apache-win32 directory.

4. Download PHP5 and unpack; copy "php5ts.dll "to bin/ and copy
   "php5apache2_*.dll" to modules/.

5. Verify that Apache2 works, for example by running "run-blink-httpd"
   in the Blink tools directory. Update the win-httpd.conf configuration
   file if necessary.

6. Delete files that aren't need for Chromium by running:
   
   % remove_files_not_needed_for_chromium.sh

7. Upload the executables and DLLs to Google Storage, to the
   chrome-apache-win32 bucket. Contact chrome-infrastructure-team@google.com
   in order to get permission to upload:

   % find apache-win32/bin -name '*.exe' -o -name '*.dll' -o -name '*.so' | upload_to_google_storage.py --bucket chromium-apache-win32 -
   % find apache-win32/modules -name '*.so'  | upload_to_google_storage.py --bucket chromium-apache-win32 -

To prune the files that were uploaded so that we can check in the rest:

  % find apache-win32/bin -name '*.exe' -o -name '*.dll' -o -name '*.so' | xargs rm
  % find apache-win32/modules -name '*.so' | xargs rm
  % git add apache-win32

And, to clean up the temp files used in the above:

  % rm -fr httpd.msi php apache-win32.bak

You might need to uninstall apache via the control panel as well.
