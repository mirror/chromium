// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

module blink.mojom;

import "mojo/common/time.mojom";
import "services/network/public/interfaces/request_context_frame_type.mojom";
import "third_party/WebKit/common/page/page_visibility_state.mojom";
import "url/mojo/url.mojom";

// Indicates the service worker client type.
// See https://w3c.github.io/ServiceWorker/#service-worker-client-concept
// and https://w3c.github.io/ServiceWorker/#dom-clientqueryoptions-type.
enum ServiceWorkerClientType {
  kWindow,
  kSharedWorker,
  kAll,
  kLast = kAll
};

// Holds the information related to a service worker window or non-window
// client.
// https://w3c.github.io/ServiceWorker/#client
struct ServiceWorkerClientInfo {
  // Client#url
  url.mojom.Url url;

  // Client#id
  string client_uuid;

  // Client#type
  ServiceWorkerClientType client_type = ServiceWorkerClientType.kLast;

  // WindowClient#visibilityState
  // Set to |kHidden| if it's non window client.
  PageVisibilityState page_visibility_state = PageVisibilityState.kLast;

  // WindowClient#focused
  // Set to false if it's non window client.
  bool is_focused = false;

  network.mojom.RequestContextFrameType frame_type = network.mojom.RequestContextFrameType.kLast;
  mojo.common.mojom.TimeTicks last_focus_time;
  mojo.common.mojom.TimeTicks creation_time;
};
