<!DOCTYPE html>
<html>
<head>
    <script src="../resources/runner.js"></script>
    <script src="resources/utils.js"></script>
</head>
<body>
</body>
    <script>
        function applyCSSRule(rule) {
            var css = document.createElement("style");
            css.type = "text/css";
            css.innerHTML = rule;
            document.body.appendChild(css);
            return css;
        }
        createRegularDOMTree();
        PerfTestRunner.measureTime({
            description: "Measures the performance of changing the style by using a solo pseudo selector.",
            run: function() {
                var rule = applyCSSRule("div div div:after { content: 'after'; }");
                PerfTestRunner.forceLayout(document.body);
                rule.remove();
                PerfTestRunner.forceLayout(document.body);
            },
            tracingCategories: 'blink',
            traceEventsToMeasure: [
                'Document::updateStyle',
                'Document::recalcStyle',
                'Document::rebuildLayoutTree'
            ]
        });
    </script>
</html>