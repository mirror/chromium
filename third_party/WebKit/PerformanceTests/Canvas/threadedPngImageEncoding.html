<!DOCTYPE html>
<html>
<body>
<script src = "../resources/runner.js"></script>
<script src = "./asyncPngImageEncoding.js"></script>
<script>

var canvas_threaded = null;

window.onload = function () {
    window.internals.settings.setIdleCanvasImageEncodingEnabled(false);
    canvas_threaded = createCanvas4kBy4k("canvas_threaded");
    PerfTestRunner.prepareToMeasureValuesAsync({
        unit: 'ms',
        done: function () {
            isDone = true;
        },
        description: "Measures performance of canvas." + 
            "toBlob that has png image encoding performed on a separate thread."
    });
    runTest(canvas_threaded);
};
</script>
</body>
</html>

