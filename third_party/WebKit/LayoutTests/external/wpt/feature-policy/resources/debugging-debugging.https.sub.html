<!DOCTYPE html>
<body>
<script>
'use strict';
var same_origin_src = '/feature-policy/resources/feature-policy-allowedfeatures.html';

var cross_origin_src = 'http://{{domains[www1]}}:{{ports[http][0]}}' + same_origin_src;

var subframe_header_policy = '?pipe=header(Feature-Policy, fullscreen ';
var policy_all = '*';

let remote_frame_all = document.createElement('iframe');
remote_frame_all.src = cross_origin_src + subframe_header_policy + policy_all + ';)';

window.addEventListener('message', function(evt) {
  if (evt.source === remote_frame_all.contentWindow) {
    parent.postMessage({frame: 'remote', policy: policy_all, allowedfeatures: evt.data}, '*');
  }
});

document.body.appendChild(remote_frame_all);
</script>
</body>

