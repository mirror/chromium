<!DOCTYPE html>
<html>
<head>
<script src="../../../resources/js-test.js"></script>
<script src="../resources/multiple-fields-ax-aria-attributes.js"></script>
</head>
<body>
<label>
  TestLabel
  <input id="test" type="date" title="TestTitle">
</label>
<script>
description('This test checks accessible field labels in multiple fields date input UI.');

var testInput = document.getElementById('test');

if (!window.accessibilityController || !window.eventSender)
    debug('Please run inside DRT or WTR.');
else {
    testInput.focus();
    debug('Initial empty state');
    checkFocusedElementAXAttributes('Month TestLabel, mm, TestTitle, intValue:0, range:1-12');
    eventSender.keyDown('\t');
    checkFocusedElementAXAttributes('Day TestLabel, dd, TestTitle, intValue:0, range:1-31');
    eventSender.keyDown('\t');
    checkFocusedElementAXAttributes('Year TestLabel, yyyy, TestTitle, intValue:0, range:1-275760');

    eventSender.keyDown('\t', ['shiftKey']);
    eventSender.keyDown('\t', ['shiftKey']);
    debug('Non-empty value');
    testInput.value = "2012-10-09";
    checkFocusedElementAXAttributes('Month TestLabel, 10, TestTitle, intValue:10, range:1-12');
    eventSender.keyDown('\t');
    checkFocusedElementAXAttributes('Day TestLabel, 09, TestTitle, intValue:9, range:1-31');
    eventSender.keyDown('\t');
    checkFocusedElementAXAttributes('Year TestLabel, 2012, TestTitle, intValue:2012, range:1-275760');

    debug('Empty value');
    eventSender.keyDown('Backspace');
    checkFocusedElementAXAttributes('Year TestLabel, yyyy, TestTitle, intValue:0, range:1-275760');
    eventSender.keyDown('\t', ['shiftKey']);
    eventSender.keyDown('Backspace');
    checkFocusedElementAXAttributes('Day TestLabel, dd, TestTitle, intValue:0, range:1-31');
    eventSender.keyDown('\t', ['shiftKey']);
    eventSender.keyDown('Backspace');
    checkFocusedElementAXAttributes('Month TestLabel, mm, TestTitle, intValue:0, range:1-12');

    debug('');
    testInput.parentNode.removeChild(testInput);
}
</script>
</body>
</html>
