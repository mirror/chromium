<!DOCTYPE html>
<script src="../../resources/testharness.js"></script>
<script src="../../resources/testharnessreport.js"></script>
<script src="../assert_selection.js"></script>
<script>
// This tests smart paste of a fragment that ends in a select element.
// There should be no spaces added because the paste is performed in an empty
// paragraph.
selection_test(
    [
      '<div contenteditable id="copy">',
        '^foo<select><option>1</option><option>2</option></select>|',
      '</div>',
      '<div contenteditable id="paste"></div>',
    ],
    selection => {
      if (!window.testRunner)
        throw 'This test requires to execute copy and paste command by script.';
      selection.document.execCommand('copy');
      const paste = selection.document.getElementById('paste');
      selection.collapse(paste, 0);
      selection.document.execCommand('paste');
    },
    [
      '<div contenteditable id="copy">',
        'foo<select><option>1</option><option>2</option></select>',
      '</div>',
      '<div contenteditable id="paste">',
        'foo<select><option>1</option><option>2</option></select>|',
      '</div>',
    ],
    'Smart paste with a fragment ends with SELECT');
</script>
