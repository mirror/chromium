<!DOCTYPE html>
<html>
<body>
<script src="../../resources/testharness.js"></script>
<script src="../../resources/testharnessreport.js"></script>
<script src="../resources/device-orientation-helpers.js"></script>
<script>
'use strict';

async_test(test => {
  assertTestRunner();
  var motionData1 = generateMotionData(null, null, null,
                                       null, null, null,
                                       null, null, null,
                                       0);

  var motionData2 = generateMotionData(1, 2, 3,
                                       null, null, null,
                                       null, null, null,
                                       100);

  var motionData3 = generateMotionData(null, null, null,
                                       1, 2, 3,
                                       null, null, null,
                                       100);

  var motionData4 = generateMotionData(null, null, null,
                                       null, null, null,
                                       1, 2, 3,
                                       100);

  function firstListener(event) {
    checkMotion(event, motionData1);
    window.removeEventListener('devicemotion', firstListener);
    setTimeout(function(){initSecondListener();}, 0);
  }

  function initSecondListener() {
    setMockMotion(motionData2);
    window.addEventListener('devicemotion', secondListener);
  }

  function secondListener(event) {
    checkMotion(event, motionData2);
    window.removeEventListener('devicemotion', secondListener);
    setTimeout(function(){initThirdListener();}, 0);
  }

  function initThirdListener() {
    setMockMotion(motionData3);
    window.addEventListener('devicemotion', thirdListener);
  }

  function thirdListener(event) {
    checkMotion(event, motionData3);
    window.removeEventListener('devicemotion', thirdListener);
    setTimeout(function(){initFourthListener();}, 0);
  }

  function initFourthListener() {
    setMockMotion(motionData4);
    window.addEventListener('devicemotion', fourthListener);
  }

  function fourthListener(event) {
    checkMotion(event, motionData4);
    test.done();
  }

  setMockMotion(motionData1);
  window.addEventListener('devicemotion', firstListener);
}, 'Tests using null values for some or all of the event properties.');
</script>
</body>
</html>
