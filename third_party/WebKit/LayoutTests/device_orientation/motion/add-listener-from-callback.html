<!DOCTYPE html>
<html>
<body>
<script src="../../resources/testharness.js"></script>
<script src="../../resources/testharnessreport.js"></script>
<script src="../resources/device-orientation-helpers.js"></script>
<script>
'use strict';

async_test(test => {
  assertTestRunner();
  var motionData = generateMotionData(1.1, 2.1, 3.1,
                                      1.2, 2.2, 3.2,
                                      1.3, 2.3, 3.3,
                                      100);
  function listener(event) {
    checkMotion(event, motionData);
  }

  setMockMotion(motionData);
  window.addEventListener('devicemotion', test.step_func_done(listener));
}, 'Tests that adding a new devicemotion event listener from a callback works as expected.');
</script>
</body>
</html>
