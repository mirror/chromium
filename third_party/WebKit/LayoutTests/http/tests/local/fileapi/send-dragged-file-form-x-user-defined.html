<!DOCTYPE html>
<meta charset="utf-8">
<title>Upload files in x-user-defined form</title>
<link rel="help"
      href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#multipart-form-data">
<link rel="author" title="Benjamin C. Wiley Sittler"
      href="mailto:bsittler@chromium.org">
<script src="../../../../resources/testharness.js"></script>
<script src="../../../../resources/testharnessreport.js"></script>
<script src="resources/send-dragged-file-form-helper.js"></script>
<script>
'use strict';

formPostFileUploadTest({
  fileNameEncoding: 'ASCII',
  fileBaseName: 'file-for-drag-to-send3.txt',
  formEncoding: 'x-user-defined',
  expectedEncodedBaseName: 'file-for-drag-to-send3.txt',
});

formPostFileUploadTest({
  fileNameEncoding: 'x-user-defined',
  fileBaseName: 'file-for-drag-to-send3-\uF7F0\uF793\uF783\uF7A0.txt',
  formEncoding: 'x-user-defined',
  expectedEncodedBaseName: 'file-for-drag-to-send3-ð“ƒ .txt',
});

formPostFileUploadTest({
  fileNameEncoding: 'windows-1252',
  fileBaseName: 'file-for-drag-to-send3-Ã¢ËœÂºÃ°Å¸Ëœâ€š.txt',
  formEncoding: 'x-user-defined',
  expectedEncodedBaseName: ('file-for-drag-to-send3-' +
                            '&#226;&#732;&#186;&#240;&#376;&#732;&#8218;.txt'),
});

formPostFileUploadTest({
  fileNameEncoding: 'ISO-2022-JP',
  fileBaseName: 'file-for-drag-to-send3-â˜…æ˜Ÿâ˜….txt',
  formEncoding: 'x-user-defined',
  expectedEncodedBaseName: 'file-for-drag-to-send3-&#9733;&#26143;&#9733;.txt',
});

formPostFileUploadTest({
  fileNameEncoding: 'windows-1252',
  fileBaseName: 'file-for-drag-to-send3-â˜ºðŸ˜‚.txt',
  formEncoding: 'x-user-defined',
  expectedEncodedBaseName: 'file-for-drag-to-send3-&#9786;&#128514;.txt',
});

formPostFileUploadTest({
  fileNameEncoding: 'UTF-8',
  fileBaseName: `file-for-drag-to-send3-${kTestChars}.txt`,
  formEncoding: 'x-user-defined',
  expectedEncodedBaseName: `file-for-drag-to-send3-${
      kTestFallbackXUserDefined
  }.txt`,
});

</script>
