enum FlagMode { "shared", "exclusive" };

dictionary FlagOptions {
  DOMTimeStamp timeout;
};

partial interface WindowOrWorkerGlobalScope {
  Promise<Flag> requestFlag((DOMString or sequence<DOMString>) scope, FlagMode mode, optional FlagOptions options);
};

[Exposed=(Window,Worker)]
interface Flag {
  readonly attribute FrozenArray<DOMString> scope;
  readonly attribute FlagMode mode;
  //readonly attribute Promise<void> released;

  void waitUntil(Promise<any> p);
};
