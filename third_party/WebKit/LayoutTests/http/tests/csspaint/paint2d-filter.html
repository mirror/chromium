<!DOCTYPE html>
<html>
<head>
<script src="../resources/run-after-layout-and-paint.js"></script>
<script src="resources/test-runner-paint-worklet.js"></script>
<style>
    div {
        display: inline-block;
        width: 100px;
        height: 100px;
    }
    #filter-none { background-image: paint(filter-none); }
    #filter-blur { background-image: paint(filter-blur); }
    #filter-brightness { background-image: paint(filter-brightness); }
    #filter-contrast { background-image: paint(filter-contrast); }
    #filter-drop-shadow { background-image: paint(filter-drop-shadow); }
    #filter-grayscale { background-image: paint(filter-grayscale); }
    #filter-invert { background-image: paint(filter-invert); }
    #filter-opacity { background-image: paint(filter-opacity); }
    #filter-saturate { background-image: paint(filter-saturate); }
    #filter-sepia { background-image: paint(filter-sepia); }
    #filter-hue-rotate { background-image: paint(filter-hue-rotate); }
    #filter-url { background-image: paint(filter-url); }
</style>
</head>
<body>
<div id="filter-none"></div>
<div id="filter-blur"></div>
<div id="filter-brightness"></div>
<div id="filter-contrast"></div>
<div id="filter-drop-shadow"></div>
<div id="filter-grayscale"></div>
<div id="filter-invert"></div>
<div id="filter-opacity"></div>
<div id="filter-saturate"></div>
<div id="filter-sepia"></div>
<div id="filter-hue-rotate"></div>
<div id="filter-url"></div>

<script id="code" type="text/worklet">
var paintNames = [
    'filter-none',
    'filter-blur',
    'filter-brightness',
    'filter-contrast',
    'filter-drop-shadow',
    'filter-grayscale',
    'filter-invert',
    'filter-opacity',
    'filter-saturate',
    'filter-sepia',
    'filter-hue-rotate',
    'filter-url'
];

var filterOps = [
    'none',
    'blur(10px)',
    'brightness(40%)',
    'contrast(20%)',
    'drop-shadow(0 0 5px green)',
    'grayscale(100%)',
    'invert(100%)',
    'opacity(50%)',
    'saturate(20%)',
    'sepia(100%)',
    'sepia(1) hue-rotate(200deg)',
    'url(#url)'
];

function doPaint(ctx, op) {
  ctx.filter = op;
  console.log(op);
  ctx.fillStyle = '#A00';
  ctx.fillRect(0, 0, 15, 15);
  ctx.fillStyle = '#0A0';
  ctx.fillRect(15, 0, 15, 15);
  ctx.fillStyle = '#00A';
  ctx.fillRect(0, 15, 15, 15);
  ctx.fillStyle = "#AA0";
  ctx.fillRect(15, 15, 15, 15);
};

for (var i = 0; i < filterOps.length; i++) {
  let op = filterOps[i];
  registerPaint(paintNames[i], class { paint(ctx, geom) { doPaint(ctx, op); } });
}

paint('output0', "none");
paint('output1', "blur(10px)");
paint('output2', "brightness(40%)");
paint('output3', "contrast(20%)");
paint('output4', "drop-shadow(0 0 5px green)");
paint('output5', "grayscale(100%)");
paint('output6', "invert(100%)");
paint('output7', "opacity(50%)");
paint('output8', "saturate(20%)");
paint('output9', "sepia(100%)");
paint('output10', "sepia(1) hue-rotate(200deg)");
paint('output11', "url(#url)");
</script>

<script>
    importPaintWorkletAndTerminateTestAfterAsyncPaint(document.getElementById('code').textContent);
</script>
</body>
</html>
