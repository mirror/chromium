<html>
  <head>
    <script src="../../http/tests/inspector/inspector-test.js"></script>
    <style>
      /** This combination may cause an infinite loop in the contrast ratio line code */
      .test {
        background-color: rgba(157, 83, 95, 255);
        color: white;
      }

      .color-container {
        position: absolute;
        width: 100px;
        height: 100px;
      }
    </style>
    <script type="text/javascript">
      window.debugTest = true;
      async function test() {
        await self.runtime.loadModulePromise("color_picker");
        var colorElement = document.createElement('div')
        var contentElement = document.createElement('div');
        var overlay = new ColorPicker.ContrastOverlay(colorElement, contentElement);
        var svg = colorElement.firstChild;
        InspectorTest.assertTrue(svg != null);
        InspectorTest.assertEquals(svg.tagName, 'svg');
        var path = svg.firstChild;
        InspectorTest.assertTrue(path != null);
        InspectorTest.assertEquals(path.tagName, 'path');
        overlay._width = 100;
        overlay._height = 100;
        var contrastInfo = { backgroundColors: ['rgba(157, 83, 95, 255)'],
                             computedFontSize: '16px',
                             computedFontWeight: '400',
                             computedBodyFontSize: '16px' };
        overlay.setContrastInfo(contrastInfo);
        overlay.setColor([0, 0, 1, 1], 'rgba(255, 255, 255, 1)');
        overlay._drawContrastRatioLine();
        InspectorTest.assertTrue(path.getAttribute('d') !== '');
        InspectorTest.completeTest();
      }
    </script>
  </head>
  <body onload="runTest()">
    <div class="test">Test</div>
    <div class="color-container"></div>
    <div class="content-container-unused"></div>
  </body>
</html>
