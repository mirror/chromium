{
  "comments": [
    {
      "key": {
        "uuid": "422ba38f_2629918c",
        "filename": "base/win/shortcut.cc",
        "patchSetId": 15
      },
      "lineNbr": 314,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-10-31T14:36:49Z",
      "side": 1,
      "message": "nit: CLSID_NULL thoughout",
      "range": {
        "startLine": 314,
        "startChar": 48,
        "endLine": 314,
        "endChar": 57
      },
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e27cce01_ceeee71f",
        "filename": "base/win/shortcut.cc",
        "patchSetId": 15
      },
      "lineNbr": 314,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-31T17:23:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "422ba38f_2629918c",
      "range": {
        "startLine": 314,
        "startChar": 48,
        "endLine": 314,
        "endChar": 57
      },
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "53f92017_7a239cc3",
        "filename": "chrome/install_static/install_constants.h",
        "patchSetId": 15
      },
      "lineNbr": 96,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-10-31T14:36:49Z",
      "side": 1,
      "message": "what do you think about making this a CLSID rather than a const wchar_t* so that there\u0027s no need for CLSIDFromString in install.cc.",
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d1d13ad_dd727d70",
        "filename": "chrome/install_static/install_constants.h",
        "patchSetId": 15
      },
      "lineNbr": 96,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-31T17:23:54Z",
      "side": 1,
      "message": "I prefer to keep wchar_t* here. Later on, we need to write reg key to path Software\\Classes\\CLSID\\{toast_activator_clsid}. That means, we need a wchar_t* (or similar) to assemble the path.\n\nAFAIK, there are two common ways to initialize a CLSID. One is through CLSIDFromString, the other is using the following pattern:\nclass __declspec(uuid(\"{557cf406-1a04-11d3-9a73-0000f81ef32e}\")) Foo;\nstatic const CLSID CLSID_Foo \u003d __uuidof(Foo);\n\nI am not a fan of the latter method, as it looks like a overkill if we don\u0027t want class Foo at all. If we choose CLSIDFromString, then we need to use it at least once in our code. Making wchar_t* here avoids converting back from CLSID to string.",
      "parentUuid": "53f92017_7a239cc3",
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88147514_fcfc788d",
        "filename": "chrome/install_static/install_constants.h",
        "patchSetId": 15
      },
      "lineNbr": 96,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-11-01T08:05:16Z",
      "side": 1,
      "message": "i meant like this:\n  constexpr CLSID kFoo \u003d {0x8A69D345, 0xD564, 0x463c, {0xAF, 0xF1, 0xA6, 0x9D, 0x9E, 0x53, 0x0F, 0x96}};\n\nthe idea of doing a conversion every time the value is needed bugs me -- it means extra error handling and extra overhead to convert a constant into something else. it seems conceptually easier to convert from a CLSID to a string, though i haven\u0027t looked at the code. how about this:\n- change from string to CLSID\n- convert from CLSID to string in the unittest to be sure that each value can be converted/represented\n- remove error handling from the product since, as far as i know, a CLSID cannot be malformed (whereas a string representing one can be), and we\u0027ll have test coverage to be sure that the conversion won\u0027t fail.\n\nwhat do you think?",
      "parentUuid": "2d1d13ad_dd727d70",
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb02e418_ee351cd2",
        "filename": "chrome/install_static/install_constants.h",
        "patchSetId": 15
      },
      "lineNbr": 96,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-11-01T18:36:20Z",
      "side": 1,
      "message": "Thanks for reminding me that we can define CLSID via hexadecimal. \n\nI was trying to update this patch set based on your suggestions. However, the assertion in InstallDetails::GetPayload() fails after I changed wchar_t* to CLSID.\n\nstatic_assert(std::is_pod\u003cInstallConstants\u003e::value,\n                \"InstallConstants must be a POD-struct\"); \n\nI think this is because CLSID is not POD type so putting a CLSID in InstallConstants is not allowed?\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nAnother concern is that, in InstallConstants we use wchar_t* for legacy_command_execute_clsid and a couple of other guid-type variables. Using CLSID for toast_activator_clsid breaks the consistency.\n\nHow do you think please?",
      "parentUuid": "88147514_fcfc788d",
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e34e36ad_438527dd",
        "filename": "chrome/install_static/install_constants.h",
        "patchSetId": 15
      },
      "lineNbr": 96,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-11-01T21:18:25Z",
      "side": 1,
      "message": "I\u0027m less concerned about consistency if there\u0027s a better way for certain members. The POD thing is an issue, though. I\u0027d have thought a CLSID is a POD type:\n\ntypedef struct _GUID {\n    unsigned long  Data1;\n    unsigned short Data2;\n    unsigned short Data3;\n    unsigned char  Data4[ 8 ];\n} GUID;\ntypedef GUID CLSID;\n\nDo you see what makes that non-POD?",
      "parentUuid": "cb02e418_ee351cd2",
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "866d29d3_bee373ba",
        "filename": "chrome/install_static/install_constants.h",
        "patchSetId": 15
      },
      "lineNbr": 96,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-11-02T14:51:52Z",
      "side": 1,
      "message": "Sorry I made a mistake. I somehow typed \"const\" before CLSID, which makes it non-POD.\n\nI\u0027ve changed wchar_t to CLSID, and added unit tests for the conversion. All ClsidFromString calls are removed, together with the error handling.",
      "parentUuid": "e34e36ad_438527dd",
      "revId": "c8e9bc612a66c84e4eeaffc3a3a9ca74f663c06a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}