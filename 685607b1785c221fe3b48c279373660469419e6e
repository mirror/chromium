{
  "comments": [
    {
      "key": {
        "uuid": "6d42871d_6fe41ea3",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerPainterTest.cpp",
        "patchSetId": 10
      },
      "lineNbr": 605,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-06-16T00:14:56Z",
      "side": 1,
      "message": "Xianzhu, this expectation is failing with this patch in the SPv1 and RootLayerScrolls configuration. The reason is that this patch forces the root layer in RLS to be composited and have composited scrolling layers.\n\nWhen we go to paint the self_painting_layer LayoutObject, it\u0027s painted into the scrolling contents layer so in CompositedLayerMapping::PaintContents we set kPaintLayerPaintingSkipRootBackground. This causes us to avoid calling SetPreviousPaintPhaseDescendantBlockBackgroundsEmpty in PaintForegroundForFragments where without the patch we did call it since both foreground and background are painted into the same GraphicsLayer. \n\nI don\u0027t understand whether the behavior is broken in this case or if I just changed an assumption the test was making. Is it ok to skip this check for the RLS+SPv1 case? Or is there a modification to the check I should make. The test passes in SPv2.",
      "range": {
        "startLine": 605,
        "startChar": 15,
        "endLine": 605,
        "endChar": 34
      },
      "revId": "685607b1785c221fe3b48c279373660469419e6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "833ecc9e_f4aabee7",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerPainterTest.cpp",
        "patchSetId": 10
      },
      "lineNbr": 605,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-06-16T00:29:03Z",
      "side": 1,
      "message": "This actually exposes a bug about NeedsPaintPhaseDescendantBlockBackgrounds() for composited scrolling contents layer. The bug is not about functionality, but just the optimization not applied to the layer, so I would like to leave it as-is.\n\nYou can skip the check for RLS+SPv1 and comment that the empty paint phase optimization doesn\u0027t apply to composited scrolling layer.",
      "parentUuid": "6d42871d_6fe41ea3",
      "range": {
        "startLine": 605,
        "startChar": 15,
        "endLine": 605,
        "endChar": 34
      },
      "revId": "685607b1785c221fe3b48c279373660469419e6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44272299_d22503d0",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerPainterTest.cpp",
        "patchSetId": 10
      },
      "lineNbr": 605,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-06-20T22:42:26Z",
      "side": 1,
      "message": "Done, thanks Xianzhu!",
      "parentUuid": "833ecc9e_f4aabee7",
      "range": {
        "startLine": 605,
        "startChar": 15,
        "endLine": 605,
        "endChar": 34
      },
      "revId": "685607b1785c221fe3b48c279373660469419e6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}