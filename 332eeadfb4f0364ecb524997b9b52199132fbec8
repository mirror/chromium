{
  "comments": [
    {
      "key": {
        "uuid": "99600a22_08b8e954",
        "filename": "content/browser/notifications/blink_notification_service_impl.cc",
        "patchSetId": 8
      },
      "lineNbr": 86,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T17:47:36Z",
      "side": 1,
      "message": "Having a bunch of TODOs here about the remaining work would make it clear that this is temporary.",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f03b844b_e1e77ae3",
        "filename": "content/browser/notifications/blink_notification_service_impl.cc",
        "patchSetId": 8
      },
      "lineNbr": 86,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-27T18:35:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "99600a22_08b8e954",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8a0a186b_d43921c9",
        "filename": "content/browser/notifications/blink_notification_service_impl.h",
        "patchSetId": 8
      },
      "lineNbr": 33,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T17:47:36Z",
      "side": 1,
      "message": "Would you mind updating this too? In a separate CL if you wish.",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6d29d79_002283d3",
        "filename": "content/browser/notifications/blink_notification_service_impl.h",
        "patchSetId": 8
      },
      "lineNbr": 33,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-29T14:42:01Z",
      "side": 1,
      "message": "\u003e Would you mind updating this too? In a separate CL if you wish.\n\nno longer applies",
      "parentUuid": "8a0a186b_d43921c9",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f41d262_92d57d10",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 46,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T17:47:36Z",
      "side": 1,
      "message": "nit: no preference, but everything in this file calls it |execution_context|, the new code calls it |context|. We should pick one and use is consistently.",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f42b8655_4879931c",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 46,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-27T18:35:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f41d262_92d57d10",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e1c835d_5165c10c",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T17:47:36Z",
      "side": 1,
      "message": "nit: drop ExecutionContext* here too? Can be a separate CL :)",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab0e96d9_a4b4e302",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-27T18:35:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4e1c835d_5165c10c",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e070d91b_e9e54b4c",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-11-27T18:09:16Z",
      "side": 1,
      "message": "Maybe do we want to use a per-frame InterfaceProvider?",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15a4d121_561287cc",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-27T18:35:51Z",
      "side": 1,
      "message": "Can you explain what that means, and how I get one?",
      "parentUuid": "e070d91b_e9e54b4c",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31761cc6_5ca901d0",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-11-27T18:45:20Z",
      "side": 1,
      "message": "execution_context-\u003eGetFrame()-\u003eGetInterfaceProvider() will give you a per-frame InterfaceProvider.\n\nPlatform::Current()-\u003eGetInterfaceProvider() (the default interface provider) is not encouraged.",
      "parentUuid": "15a4d121_561287cc",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1b76f92_bf692c3f",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T19:06:30Z",
      "side": 1,
      "message": "Should the first example read ToDocument(execution_context)-\u003eGetFrame() or execution_context-\u003eGetInterfaceProvider()?\n\nThe methods on this interface will be available not just for documents, but also all sorts of workers. While we can find a frame for dedicated and (less ideally) shared workers, there is none for service workers. If the latter works that\u0027d be grand.\n\n(Also we should remove the duplication, and just add GetNotificationService() or something that issues the request if necessary.",
      "parentUuid": "31761cc6_5ca901d0",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74999d51_0672ddf5",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-11-27T19:10:14Z",
      "side": 1,
      "message": "Ah, good point. Given that this is used by workers as well, we should use execution_context-\u003eGetInterfaceProvider(). Will it work?",
      "parentUuid": "d1b76f92_bf692c3f",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49f3fe23_3f52194c",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T19:35:51Z",
      "side": 1,
      "message": "I hope so :D\n\nhttps://chromium-review.googlesource.com/c/chromium/src/+/791550",
      "parentUuid": "74999d51_0672ddf5",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "256cd4a8_cc928ec3",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-29T14:42:01Z",
      "side": 1,
      "message": "Done - Changed to execution_context-\u003eGetInterfaceProvider()",
      "parentUuid": "49f3fe23_3f52194c",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f77cbe4_20031ace",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 119,
      "author": {
        "id": 1211509
      },
      "writtenOn": "2017-11-27T18:07:53Z",
      "side": 1,
      "message": "This is apparently not a new thing, given the non-mojo implementation, but it seems like it would be better for us to avoid trusting the renderer\u0027s assertion about the origin for which it\u0027s empowered to deliver notifications. Can you look at the frame tree from the browser side to determine what origin the notification should be associated with? Or at least reject origins that couldn\u0027t possible be represented by the process that delivered the notification as bad messages?",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b6ee254_b2c4b529",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 119,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-27T18:35:51Z",
      "side": 1,
      "message": "Good question! I don\u0027t know.. Peter?",
      "parentUuid": "2f77cbe4_20031ace",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d824265_59845953",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 119,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T19:06:30Z",
      "side": 1,
      "message": "Extending on my answer to haraken\u0027s question:\n\nYes, definitively knowing the origin on the browser side would be much better. I\u0027m not familiar with the latest infrastructure though -- is renderer_interface_binders.cc where we should be looking? If so, we probably should update a bunch of other features too.",
      "parentUuid": "4b6ee254_b2c4b529",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2813ed89_96092a6a",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.cpp",
        "patchSetId": 8
      },
      "lineNbr": 119,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-29T14:42:01Z",
      "side": 1,
      "message": "Done - Removed origin parameter from the interface method, now it is a parameter constructor from the browser-side thanks to Peter\u0027s patch.",
      "parentUuid": "6d824265_59845953",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f39378af_b5ea6153",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.h",
        "patchSetId": 8
      },
      "lineNbr": 46,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T17:47:36Z",
      "side": 1,
      "message": "As a point of thought, and I realise this was my suggestion, would DisplayNonPersistentNotification() be clearer despite being potentially repetitive?",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebd21b4d_314e839e",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.h",
        "patchSetId": 8
      },
      "lineNbr": 46,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-27T18:35:51Z",
      "side": 1,
      "message": "Done.\n\nI\u0027ve left the NotificationService method as DisplayNonPersistent because I figure the deeper into the notification internals we are the more okay it is to drop the word \u0027notification\u0027, but happy to change this if you prefer consistency.",
      "parentUuid": "f39378af_b5ea6153",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6901498b_72d8f2a7",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.h",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-27T17:47:36Z",
      "side": 1,
      "message": "nit: explicit",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9732242_c4436539",
        "filename": "third_party/WebKit/Source/modules/notifications/NotificationManager.h",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1187649
      },
      "writtenOn": "2017-11-27T18:35:51Z",
      "side": 1,
      "message": "Aahh this always gets me. Thanks.",
      "parentUuid": "6901498b_72d8f2a7",
      "revId": "332eeadfb4f0364ecb524997b9b52199132fbec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}