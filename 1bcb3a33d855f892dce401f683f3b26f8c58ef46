{
  "comments": [
    {
      "key": {
        "uuid": "1ff07edb_22087363",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.cc",
        "patchSetId": 29
      },
      "lineNbr": 352,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "maybe just personal style, but I\u0027d prefer to reserve On*() for external things calling into us to notify something. I\u0027d just call this Fail() or something, or better yet just use CommitCompleted(error) directly (and have that set the state_).",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ac764be_48f8033d",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.cc",
        "patchSetId": 29
      },
      "lineNbr": 352,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "I was slightly feeling the same thing. Replaced OnFailed() with CommitCompleted().",
      "parentUuid": "1ff07edb_22087363",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcefcd95_6cdb016f",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.cc",
        "patchSetId": 29
      },
      "lineNbr": 361,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "I think it\u0027d work better if CommitCompleted does advance state to kCompleted.\n\nI\u0027d just have kCompleted and get rid of kCancelled. If you want to keep the status, you can have keep a net::Error completion_status_ member. WDYT?",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb4b7ede_eb3feb16",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.cc",
        "patchSetId": 29
      },
      "lineNbr": 361,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "SG. I think only one end state is clearer. Done.",
      "parentUuid": "fcefcd95_6cdb016f",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f7887f0_49046cff",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 127,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "It\u0027s confusing that resource_type_ and resource_id_ are not about the same \"resource\".\n\nservice_worker_resource_id_? with some comment?",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90596024_9bf3fc6e",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 127,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "Added a comment here.\n\nI feel \"(incumbent_)service_worker_resource_id\" is lengthy. How about \"(incumbent_)resource_entry_id\", or just keeping as is because this is not public?\n\n... ah, I just notice your another comment. |cache_resource_id_| would be simpler (using |cache_| prefix is controversial though). I renamed this to |cache_resource_id_| for now.",
      "parentUuid": "1f7887f0_49046cff",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c794daf_13ec044c",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 129,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "can this be network_load_completed_ and moved to the network_ stuff?",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d638adf0_daef9d29",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 129,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8c794daf_13ec044c",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95f28a68_59250745",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 132,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "resource_id_ seems better in this group. If we\u0027re going to use the name |cache_writer_|, maybe |cache_resource_id_| then :(\n\nProbably should just change SWCacheWriter name  (not in this patch)",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc77cef9_cb9128ae",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 132,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "Renamed to |cache_resource_id_| and moved to here.\n\nI\u0027ll try to rename SWCacheWriter etc later.",
      "parentUuid": "95f28a68_59250745",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21146acb_95d420a3",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 146,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "Could this be used as a non-class member instead? This class is a bit busy with members, and keeping track of the state by DCHECK(!pending_read_) at the beginning of OnDataAvailable() and resetting it to nullptr OnWriteDataComplete() makes it looks like there\u0027s a sequence of functions it just needs to live for, rather than for the lifetime of the class.",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a95faff_8c25b065",
        "filename": "content/browser/service_worker/service_worker_script_url_loader.h",
        "patchSetId": 29
      },
      "lineNbr": 146,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "It\u0027s feasible. I bound it with a callback for WriteData() instead of keeping it as a member.",
      "parentUuid": "21146acb_95d420a3",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4985a6e_c2dfeb97",
        "filename": "content/browser/service_worker/service_worker_script_url_loader_unittest.cc",
        "patchSetId": 29
      },
      "lineNbr": 198,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "this is pretty easy to do:\n\n  std::string response;\n  EXPECT_TRUE(client_.response_body().is_valid());\n  EXPECT_TRUE(mojo::common::BlockingCopyToString(\n      client_.response_body_release(), \u0026response));\n  EXPECT_EQ(\"this body came from the network\", response);",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d6774bb_b43dfccb",
        "filename": "content/browser/service_worker/service_worker_script_url_loader_unittest.cc",
        "patchSetId": 29
      },
      "lineNbr": 198,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "Done.\n\nInitial implementation hard-coded a dummy body in SWScriptURLLoaderFactory and doesn\u0027t have a reference to that, so added a TODO comment to implement this once the MockHTTPServer etc is introduced. Now we place the dummy body in the global space and can do this without copy-and-pasting the raw string.\n\nBy the way, I noticed I forgot to forward the data to the client :p I added the logic in WriteData() and verified it by these new expectations. Thanks!",
      "parentUuid": "a4985a6e_c2dfeb97",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "895041ab_56fd856e",
        "filename": "content/browser/service_worker/service_worker_script_url_loader_unittest.cc",
        "patchSetId": 29
      },
      "lineNbr": 213,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-09-14T13:11:28Z",
      "side": 1,
      "message": "this seems to fit at line 217 still",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "296c6759_229140a3",
        "filename": "content/browser/service_worker/service_worker_script_url_loader_unittest.cc",
        "patchSetId": 29
      },
      "lineNbr": 213,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-15T00:01:14Z",
      "side": 1,
      "message": "Done (moved this to line 216 because completion_status() would be more generic status than has_received_response() and checking the generic status first seems straightforward)",
      "parentUuid": "895041ab_56fd856e",
      "revId": "1bcb3a33d855f892dce401f683f3b26f8c58ef46",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}