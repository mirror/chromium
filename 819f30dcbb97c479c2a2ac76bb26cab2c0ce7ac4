{
  "comments": [
    {
      "key": {
        "uuid": "1eecaa2b_ca855cd4",
        "filename": "chrome/browser/extensions/api/web_request/web_request_apitest.cc",
        "patchSetId": 5
      },
      "lineNbr": 232,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "I\u0027d actually be supportive of adding this as a property to the chrome.test.testConfig object, instead of passing it in as a custom arg everywhere.",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49c83d5e_877f26ce",
        "filename": "chrome/browser/extensions/api/web_request/web_request_apitest.cc",
        "patchSetId": 5
      },
      "lineNbr": 232,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1eecaa2b_ca855cd4",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab247dcc_9eab24f4",
        "filename": "chrome/test/data/extensions/api_test/webrequest/framework.js",
        "patchSetId": 5
      },
      "lineNbr": 81,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "This is a bit weird... when and why would we want to use |invariant|?  It seems like each place we do this would benefit more from a comment explaining why, and just passing undefined as the expected initiator instead.  Ditto for below.\n\nAdditionally, this means that with PlzNavigate (Browser-side navigation), 90%ish of these checks are checking that the initiator is undefined.  PlzNavigate is close to launching; does that mean that this behavior won\u0027t be that useful, since most initiators will be hidden?",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de3ceaf3_0a8122e8",
        "filename": "chrome/test/data/extensions/api_test/webrequest/framework.js",
        "patchSetId": 5
      },
      "lineNbr": 81,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "The same browser tests are run multiple times and one of those runs adds the argument \u0027--enable-browser-side-navigation\u0027. The |invariant| parameter is used when browser-side-navigation (PlzNavigate) doesn\u0027t affect the initiator. For example, if a webpage initiates an XHR request this will always have an initiator.\n\nA fair number of the navigation in tests are done to setup a test. Most of these are done with APIs like chrome.tabs.update which has no initiator when run with browser side navigation. If we were to put \u0027initiator: undefined\u0027 in these instances the tests would pass when run with browser side navigation but fail when the tests are run without it.\n\n\nWe don\u0027t really care about things like users typing in a domain to the omnibar, or navigating via bookmark. We\u0027re more interested in things like XHR requests, javascript loading via \u003cscript\u003e tags, form posts, or navigation via href links. The reason we\u0027re more concerned about these is because they are potentially attacker controlled.",
      "parentUuid": "ab247dcc_9eab24f4",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7c7e401_1af09f31",
        "filename": "chrome/test/data/extensions/api_test/webrequest/framework.js",
        "patchSetId": 5
      },
      "lineNbr": 81,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-21T23:02:05Z",
      "side": 1,
      "message": "having |invariant| still strikes me as a bit funny, if only because it\u0027s not really clear (from looking at the call sites) what the implications of it are.  Although part of that may just be the naming and anonymous nature of the bool.  I think, at minimum, this would be more readable with an enum like BROWSER_INITIATED and WEB_INITIATED (feel free to bikeshed), and then have comments in this code indicating what the significance of that is.\n\nI\u0027m also curious - what do we see for the initiator in these different cases?  I\u0027m not just wondering about this CL, but around the larger implications, and if there\u0027s anything else we\u0027ll need to account for.",
      "parentUuid": "de3ceaf3_0a8122e8",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1782134_581ccb90",
        "filename": "chrome/test/data/extensions/api_test/webrequest/framework.js",
        "patchSetId": 5
      },
      "lineNbr": 81,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-25T21:12:30Z",
      "side": 1,
      "message": "Reworked this using an ENUM and added comments to clarify.\n\nThere are four main situations:\n1. Extension causes navigation, and we\u0027re not running in browser side navigation mode. The initiator is something like chrome-extension://aohghmighlieiainnegkcijnfilokake\n2. Extension causes navigtion, and we ARE running in browser side navigation mode. The initiator is not included.\n3. Webpage causes navigation (e.g. XHR) regardless of whether we\u0027re running in browser side navigation mode. The initiator is the origin of the webpage. It looks something like http://www.a.com:52485\n4. Webpage causes navigation, from a website where we have no host permission to a website where we do have a host permission. In this case, the initiator is not shown.",
      "parentUuid": "e7c7e401_1af09f31",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27958803_e58b2009",
        "filename": "chrome/test/data/extensions/api_test/webrequest/framework.js",
        "patchSetId": 5
      },
      "lineNbr": 81,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-29T18:53:46Z",
      "side": 1,
      "message": "Interesting!  I didn\u0027t know PlzNavigate would affect extension-initiated navigations like this.  I don\u0027t think it\u0027ll be a problem, but +Nasko as FYI.",
      "parentUuid": "a1782134_581ccb90",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9d1429e_79f84231",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "nit: extra newline",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "471e01c7_dd566743",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9d1429e_79f84231",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3e639f7_8f5ffb37",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 12,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "unused",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4349ad41_2f5e3651",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 12,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3e639f7_8f5ffb37",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5753d71b_df5e181e",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "when is host null?",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2aa08261_2745d674",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Host is undefined when we don\u0027t expect an initiator to be present. This is used in the third test \u0027crossDomainInvisible\u0027.\n\nIf we\u0027re on a website that the extension doesn\u0027t have a permission for, and the site makes an XHR request to a site the extension does have permission for we withhold the initiator.",
      "parentUuid": "5753d71b_df5e181e",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1d19670_974e3034",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "no else after return",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a3101cc_a8e92a17",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e1d19670_974e3034",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b81bf81_84102a2a",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 32,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "arguments.callee is discouraged.  Instead, use the pattern:\nfoo.addListener(function listener(...) {\n  ...\n  foo.removeListener(listener);\n}",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5404a2f8_ecaec440",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 32,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b81bf81_84102a2a",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b708b0e_88c430b0",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 40,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "nit:\nfunction beforeRequestListener(details,\n                               expectedDestination,\n                               expectedInitiator) {\n  \u003ccode starts here\u003e\n};\n\n(fixing indentation and JS style)",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "149edf25_14fbb3a4",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 40,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b708b0e_88c430b0",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68f495a9_43f0e2ab",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 62,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-08-17T22:06:50Z",
      "side": 1,
      "message": "throughout this file: use jsStyleVariables",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2b6737f_8cdd9900",
        "filename": "chrome/test/data/extensions/api_test/webrequest_permissions/initiator/test_initiator.js",
        "patchSetId": 5
      },
      "lineNbr": 62,
      "author": {
        "id": 1146654
      },
      "writtenOn": "2017-08-18T22:02:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68f495a9_43f0e2ab",
      "revId": "819f30dcbb97c479c2a2ac76bb26cab2c0ce7ac4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}