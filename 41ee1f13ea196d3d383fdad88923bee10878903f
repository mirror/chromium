{
  "comments": [
    {
      "key": {
        "uuid": "94561628_7591b302",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "corrupt\n\nShould any action be taken here? DVLOG?",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d19f0e7_3bf414cf",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done.\n\nDecryptSpecifics will LOG(ERROR) if it fails to decrypt. I don\u0027t think we need to log here in addition to that.",
      "parentUuid": "94561628_7591b302",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3592d0a4_03f964da",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 271,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "This method should never be invoked before initial sync is done, though, right? DCHECK?",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6610eea4_cf5b4184",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 271,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3592d0a4_03f964da",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59702496_efb5f89e",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 285,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "This seems wrong. You don\u0027t know if hit max_entries or not, right?",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01961d3e_bc316fbf",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 285,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "The code works correctly just because syncer keeps asking for commit contribution and sends it to server until all contributors say they have nothing left. But you are right, it is absolutely not obvious from looking at this particular line.",
      "parentUuid": "59702496_efb5f89e",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "920c8dd1_af4b6c64",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 292,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "Can you rewrite this into the DCHECK? ie\n\nDCHECK(data.is_deleted() || type_ \u003d\u003d GetModelTypeFromSpecifics(data.specifics)) \u003c\u003c \"Non-deleted data had wrong type, expected \" \u003c\u003c type_ \u003c\u003c \" found \" \u003c\u003c GetModelTypeFromSpecifics(data.specifics);",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e426042d_3976174b",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 292,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "920c8dd1_af4b6c64",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80f217f3_67703d41",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 301,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "Is this TODO obsolete now?",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ae4df81_928fbabb",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 301,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "It is.",
      "parentUuid": "80f217f3_67703d41",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "47afce95_9733d270",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 304,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "When would this return false? I vaguely remember you saying something about deleting the WorkerEntityTracker class, did you decide not to do that?",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c8d0c86_3be02d22",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 304,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "I converted \"if\" into DCHECK.\n\nWorkerEntityTracker shares responsibility of tracking commit data during commit and updates data during GU. They used to interleave and now they are completely separate. It would be better to create two separate datastructures for it. In this change I want to make interaction with processor work.",
      "parentUuid": "47afce95_9733d270",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "49102d5c_dee95c97",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 309,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "This whole second loop seems unnecessary, can you combine with the above for loop, unless I\u0027m mistaken of course :)",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47ac4be1_295709a3",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 309,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "49102d5c_dee95c97",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5134a2b_2e5f299c",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 330,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "I think this continue is against our style guide. Can you rewrite this as DCHECK(entity) \u003c\u003c \"Blah\"",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1360ba3_a19d26ca",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 330,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "We receive client_tag_hash from network. Removing this check would mean we trust the server.",
      "parentUuid": "b5134a2b_2e5f299c",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cd59462_6706d2a6",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 330,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-23T22:06:24Z",
      "side": 1,
      "message": "If we don\u0027t want to trust the server, NOTREACHED is the wrong thing to do, then, right?",
      "parentUuid": "e1360ba3_a19d26ca",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a721986_ee456efe",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 330,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-24T17:16:58Z",
      "side": 1,
      "message": "The idea of this code:\n- Worker should track entities that are in process of being committed. It shouldn\u0027t remove entity before receiving commit response about it. We should catch such occurrences during testing.\n- When we receive corrupt response from network we should just sip it and keep going instead of crashing.\n\nI\u0027m Ok with removing \"continue\", network corruptions shouldn\u0027t happen that often and client would simply crash, restart and recover.\nI\u0027m not comfortable removing NOTREACHED(). If we write a bug that removes entities then response wouldn\u0027t reach processor and it will keep recommitting the same entity.\n\nWhat do you think?",
      "parentUuid": "0cd59462_6706d2a6",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10dfefde_7be0903f",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 330,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-24T17:48:57Z",
      "side": 1,
      "message": "If we think it\u0027s possible that we\u0027ll receive a corrupt response from the network, and we don\u0027t want to crash the browser, that\u0027s dealing with an \"exceptional\" scenario, and we should not be [D]CHECKing. The guidance is pretty clear on this [1].\n\nHowever, I don\u0027t think you\u0027re in that scenario. Your client_tag_hash is being set by NonBlockingTypeCommitContribution, from pre-commit data. I\u0027d be perfectly happy if you kept the NOTREACHED() and removed the continue.\n\nAlternatively, you could go the other way here, and say this piece of code shouldn\u0027t completely trust it\u0027s callers to always do exactly the right thing.\n\n[1] https://chromium.googlesource.com/chromium/src/+/master/styleguide/c++/c++.md#check_dcheck_and-notreached",
      "parentUuid": "2a721986_ee456efe",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a17b0617_b0165889",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 330,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-24T19:46:37Z",
      "side": 1,
      "message": "I removed continue.",
      "parentUuid": "10dfefde_7be0903f",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46c013e5_b32c3061",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 336,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-24T17:48:57Z",
      "side": 1,
      "message": "This is going to get hit on any non-success entry response type, right? Doesn\u0027t seem like DCHECK is correct, especially given we\u0027re still going to get called here when all response entries are in an error state.",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd533346_92f999e6",
        "filename": "components/sync/engine_impl/model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 336,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-24T19:46:37Z",
      "side": 1,
      "message": "This DCHECK no longer exists in the last patchset.",
      "parentUuid": "46c013e5_b32c3061",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d664f8af_eb2e0305",
        "filename": "components/sync/engine_impl/model_type_worker.h",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "Are we not doing the | | thing anymore?",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b2f8a97_e65c016e",
        "filename": "components/sync/engine_impl/model_type_worker.h",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d664f8af_eb2e0305",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bfefde43_d026b476",
        "filename": "components/sync/engine_impl/model_type_worker.h",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "Ready to encrypt them makes it sound like you must have encryption enabled for this to do anything.",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "787dd88a_55f87988",
        "filename": "components/sync/engine_impl/model_type_worker.h",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bfefde43_d026b476",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f57a25d0_77ba3ae7",
        "filename": "components/sync/test/engine/mock_model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "Your two CaptureCommitRequest methods don\u0027t use a consistent naming convention for the second parameter, not that it really matters.",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea89aed3_3c7bccfc",
        "filename": "components/sync/test/engine/mock_model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f57a25d0_77ba3ae7",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0988128e_10c5a714",
        "filename": "components/sync/test/engine/mock_model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "Same",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7574600c_3671c0ba",
        "filename": "components/sync/test/engine/mock_model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0988128e_10c5a714",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cba82fe6_54eee506",
        "filename": "components/sync/test/engine/mock_model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 217,
      "author": {
        "id": 1153420
      },
      "writtenOn": "2017-10-20T00:31:44Z",
      "side": 1,
      "message": "This is about to crash if you fail the expect, right? Would it make more sense to return true/false early if something is going wrong?",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "857a9847_47d80402",
        "filename": "components/sync/test/engine/mock_model_type_worker.cc",
        "patchSetId": 1
      },
      "lineNbr": 217,
      "author": {
        "id": 1115991
      },
      "writtenOn": "2017-10-20T22:07:44Z",
      "side": 1,
      "message": "Changed it to ASSERT_FALSE. It will return early and the test will fail expectations about commit response.",
      "parentUuid": "cba82fe6_54eee506",
      "revId": "41ee1f13ea196d3d383fdad88923bee10878903f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}