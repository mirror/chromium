{
  "comments": [
    {
      "key": {
        "uuid": "23e9476c_cee88363",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-22T05:59:46Z",
      "side": 1,
      "message": "Nit: perhaps:\n\n\"Redispatch beforeinstallprompt event on installation cancellation or failure\"",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 8
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36a041c9_b4ead53b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1174915
      },
      "writtenOn": "2017-11-29T03:28:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "23e9476c_cee88363",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 8
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e20dc885_150fbdcd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-22T05:59:46Z",
      "side": 1,
      "message": "Please file a bug for this - usually BUG\u003dNone is only for things like adding/removing owners, dependency rolls, moving files from one place to another, and other mechanical things. :)",
      "range": {
        "startLine": 19,
        "startChar": 4,
        "endLine": 19,
        "endChar": 0
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33a7ac6f_f659db2e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1174915
      },
      "writtenOn": "2017-11-29T03:28:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e20dc885_150fbdcd",
      "range": {
        "startLine": 19,
        "startChar": 4,
        "endLine": 19,
        "endChar": 0
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0cfc2d09_a6f00266",
        "filename": "chrome/browser/banners/app_banner_manager.h",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-22T05:59:46Z",
      "side": 1,
      "message": "The \"Reprompt\" name is a bit difficult because it implies that we\u0027re showing a prompt, not sending the event. WDYT of ResendBannerPromptRequest?\n\nAnother option could be to add this to the start of SendBannerPromptRequest():\n\nif (kExperimentalAppBannersEnabled)\n  ResetBindings()\n\nAnd then just call SendBannerPromptRequest instead of Reprompt(). I *think* this would work identically for experimental banners on and off.",
      "range": {
        "startLine": 129,
        "startChar": 7,
        "endLine": 129,
        "endChar": 15
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebeb5778_5c4dd34f",
        "filename": "chrome/browser/banners/app_banner_manager.h",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1174915
      },
      "writtenOn": "2017-11-24T00:30:44Z",
      "side": 1,
      "message": "I looks like it would also be correct to call ResetBindings in SendBannerPromptRequest in the non-experimental case.\n\nWould you be OK with that? In conjunction with that I would delete the\n\n  binding_.Close();\n\nin RequestAppBanner.",
      "parentUuid": "0cfc2d09_a6f00266",
      "range": {
        "startLine": 129,
        "startChar": 7,
        "endLine": 129,
        "endChar": 15
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94a7a79d_4b07d608",
        "filename": "chrome/browser/banners/app_banner_manager_desktop.cc",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-22T05:59:46Z",
      "side": 1,
      "message": "What\u0027s the reason for reprompting here? From the user\u0027s point of view, they\u0027ve already installed the site, and it didn\u0027t work for some reason beyond their control or beyond the site\u0027s control.  I think the proper way of doing this is giving the site some feedback so it can show appropriate UI (\"install didn\u0027t work, please try again\") so that the user isn\u0027t confused. Otherwise repeated failures will just have the install button seeming like it doesn\u0027t work. which isn\u0027t ideal.\n\nThat probably needs some spec-related work to figure out the best way of informing the site what the installation result is.",
      "range": {
        "startLine": 55,
        "startChar": 8,
        "endLine": 55,
        "endChar": 28
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c4308ca_f64e0524",
        "filename": "chrome/browser/banners/app_banner_manager_desktop.cc",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1174915
      },
      "writtenOn": "2017-11-24T00:17:02Z",
      "side": 1,
      "message": "There are actually two cases here:\n\n1. the extension installation failed.\n2. the user clicked \"cancel\" in the  confirmation dialog.\n\nI don\u0027t think it would be too much trouble to distinguish between these cases by passing more information to BookmarkAppHelper::callback_, but then we need to decide to do in each of these cases:\n\nfor #1: It looks like this only happened due to crbug.com/545541, which is fixed such that this should not happen any more anyway. So I don\u0027t think it makes much difference whether we reprompt or not.\n\nfor #2: I think we should reprompt to give the user another chance to install the app (they may have accidentally clicked cancel).\n\nAssuming that reprompting is correct for #2 and acceptable for #1, do you think it\u0027s worth distinguishing between these cases in the callback parameters?",
      "parentUuid": "94a7a79d_4b07d608",
      "range": {
        "startLine": 55,
        "startChar": 8,
        "endLine": 55,
        "endChar": 28
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7c47d31_f8a45739",
        "filename": "chrome/browser/banners/app_banner_manager_desktop.cc",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1174915
      },
      "writtenOn": "2017-11-29T03:28:13Z",
      "side": 1,
      "message": "I tried refactoring this code to have a consistent way of notifying AppBannerManager of the outcome of an installation prompt (i.e. whether it was accepted, and if so, whether the installation was successful) for both android and desktop. It was painful, so I\u0027ve abandoned it for now, but I\u0027ve added a TODO and bug to plumb more information through.\n \nFor now, since extension\u003d\u003dnull is primarily used to signal that the user clicked cancel in the confirmation dialog, I think it\u0027s correct to reprompt here.",
      "parentUuid": "6c4308ca_f64e0524",
      "range": {
        "startLine": 55,
        "startChar": 8,
        "endLine": 55,
        "endChar": 28
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a9028bc_684b6c1f",
        "filename": "chrome/browser/banners/app_banner_manager_desktop.cc",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-22T05:59:46Z",
      "side": 1,
      "message": "Should this still call Terminate() if ExperimentalAppBanners is off?",
      "range": {
        "startLine": 56,
        "startChar": 6,
        "endLine": 56,
        "endChar": 14
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a82af2a_c1369480",
        "filename": "chrome/browser/banners/app_banner_manager_desktop.cc",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1174915
      },
      "writtenOn": "2017-11-29T03:28:13Z",
      "side": 1,
      "message": "Yes. Fixed.",
      "parentUuid": "5a9028bc_684b6c1f",
      "range": {
        "startLine": 56,
        "startChar": 6,
        "endLine": 56,
        "endChar": 14
      },
      "revId": "5354ab9904ba20e3bcf572db0cd44bf30613b133",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}