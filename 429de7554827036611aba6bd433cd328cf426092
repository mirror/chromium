{
  "comments": [
    {
      "key": {
        "uuid": "23b77d41_2435238b",
        "filename": "chrome/browser/password_manager/chrome_password_manager_client.cc",
        "patchSetId": 4
      },
      "lineNbr": 286,
      "author": {
        "id": 1003152
      },
      "writtenOn": "2017-07-07T08:39:49Z",
      "side": 1,
      "message": "Instead of plumbing the value of |trigger| to the chrome/ layer and back, have you considered relying on the return value of PromptUserToSaveOrUpdatePassword and calling RecordSavingPrompt from the call site of the former, i.e PasswordManager/CredentialManagerImpl? Seems like it would allow removing a lot of boilerplate.",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28e11a39_b04924af",
        "filename": "chrome/browser/password_manager/chrome_password_manager_client.cc",
        "patchSetId": 4
      },
      "lineNbr": 286,
      "author": {
        "id": 1002543
      },
      "writtenOn": "2017-07-07T10:38:52Z",
      "side": 1,
      "message": "I have. I chosen this path because of having a single choke point that ensures that we record a trigger reason in all cases. It felt to me that recording by the caller is too brittle.\n\nvabr@ do you have an opinion?",
      "parentUuid": "23b77d41_2435238b",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "751be6d2_dbd7f268",
        "filename": "chrome/browser/password_manager/chrome_password_manager_client.cc",
        "patchSetId": 4
      },
      "lineNbr": 286,
      "author": {
        "id": 1003152
      },
      "writtenOn": "2017-07-07T10:50:12Z",
      "side": 1,
      "message": "Ack.",
      "parentUuid": "28e11a39_b04924af",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "09ceeca2_50c292fe",
        "filename": "chrome/browser/password_manager/chrome_password_manager_client.cc",
        "patchSetId": 4
      },
      "lineNbr": 286,
      "author": {
        "id": 1002541
      },
      "writtenOn": "2017-07-07T10:57:02Z",
      "side": 1,
      "message": "As for the single choke point -- having the recording call in the embedder is actually also not completely fool-proof, because there are more embedders (well, one more: iOS).\nConceptually, PromptUserToSaveOrUpdatePassword should be a call outside of the password_manager, limited to just performing the action, so recording the metrics would make more sense inside the password_manager component.\nI\u0027m not feeling too strongly about this, but I slightly prefer Bal√°zs\u0027 suggestion here.",
      "parentUuid": "28e11a39_b04924af",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a043101_b1e56095",
        "filename": "chrome/browser/password_manager/chrome_password_manager_client.cc",
        "patchSetId": 4
      },
      "lineNbr": 286,
      "author": {
        "id": 1002543
      },
      "writtenOn": "2017-07-07T14:43:07Z",
      "side": 1,
      "message": "Vasilii, could you take a look at this as well, please? I\u0027d be curious about your opinion.\n\nI have elaborated what we discussed:\n- Revive the old CredentialSourceType: https://chromium-review.googlesource.com/c/563392\n- Plumb it through: https://chromium-review.googlesource.com/c/563411/ (this CL is in draft state)\n\nI could now fairly easily record metrics about the disposition and dismissal of the dialog in the respective UI classes. Is this desirable or do you consider the plumbing too excessive?",
      "parentUuid": "09ceeca2_50c292fe",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec92dd41_bf422d3c",
        "filename": "chrome/browser/password_manager/chrome_password_manager_client.cc",
        "patchSetId": 4
      },
      "lineNbr": 463,
      "author": {
        "id": 1003152
      },
      "writtenOn": "2017-07-07T08:39:49Z",
      "side": 1,
      "message": "nit: Is this change intentional?",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4742f29_7c5f59e1",
        "filename": "chrome/browser/password_manager/chrome_password_manager_client.cc",
        "patchSetId": 4
      },
      "lineNbr": 463,
      "author": {
        "id": 1002543
      },
      "writtenOn": "2017-07-07T10:38:52Z",
      "side": 1,
      "message": "Fixed. I have figured out a way to inject the ukm_recorder into the g_browser_process.",
      "parentUuid": "ec92dd41_bf422d3c",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "69fa690f_0c10dd52",
        "filename": "components/password_manager/core/browser/password_form_metrics_recorder.cc",
        "patchSetId": 4
      },
      "lineNbr": 237,
      "author": {
        "id": 1003152
      },
      "writtenOn": "2017-07-07T08:39:49Z",
      "side": 1,
      "message": "Did you verify if we can show a saving prompt multiple times for a form? Or are we fine with \u003e1 PromptTrigger samples?",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4bb8e08_903115bb",
        "filename": "components/password_manager/core/browser/password_form_metrics_recorder.cc",
        "patchSetId": 4
      },
      "lineNbr": 237,
      "author": {
        "id": 1002543
      },
      "writtenOn": "2017-07-07T10:38:52Z",
      "side": 1,
      "message": "This was intentional. I intend to record one PromptTrigger and one UIDismissalReason for every time the bubble is shown. I wanted to record a single boolean to indicate whether the bubble was ever shown.",
      "parentUuid": "69fa690f_0c10dd52",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bf7fb54_5e0f4c64",
        "filename": "components/password_manager/core/browser/password_form_metrics_recorder.cc",
        "patchSetId": 4
      },
      "lineNbr": 237,
      "author": {
        "id": 1003152
      },
      "writtenOn": "2017-07-07T10:50:12Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e4bb8e08_903115bb",
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bdd2769c_dc2f8b76",
        "filename": "components/password_manager/core/browser/password_form_metrics_recorder.h",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 1003152
      },
      "writtenOn": "2017-07-07T08:39:49Z",
      "side": 1,
      "message": "phrasing nit: ... a boolean value indicating ...\n\nSame below.",
      "range": {
        "startLine": 39,
        "startChar": 23,
        "endLine": 39,
        "endChar": 41
      },
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d6f0daa_36240422",
        "filename": "components/password_manager/core/browser/password_form_metrics_recorder.h",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 1002543
      },
      "writtenOn": "2017-07-07T10:38:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bdd2769c_dc2f8b76",
      "range": {
        "startLine": 39,
        "startChar": 23,
        "endLine": 39,
        "endChar": 41
      },
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c97921f_db2ad830",
        "filename": "components/password_manager/core/browser/password_form_metrics_recorder.h",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1003152
      },
      "writtenOn": "2017-07-07T08:39:49Z",
      "side": 1,
      "message": "optional phrasing nit: ... was shown to ask the user for ...",
      "range": {
        "startLine": 43,
        "startChar": 72,
        "endLine": 44,
        "endChar": 8
      },
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d540acfb_cbfcc323",
        "filename": "components/password_manager/core/browser/password_form_metrics_recorder.h",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1002543
      },
      "writtenOn": "2017-07-07T10:38:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0c97921f_db2ad830",
      "range": {
        "startLine": 43,
        "startChar": 72,
        "endLine": 44,
        "endChar": 8
      },
      "revId": "429de7554827036611aba6bd433cd328cf426092",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}