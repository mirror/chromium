{
  "comments": [
    {
      "key": {
        "uuid": "351e8e2c_161f0e0e",
        "filename": "components/previews/core/previews_black_list.h",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1147716
      },
      "writtenOn": "2017-07-20T16:33:31Z",
      "side": 1,
      "message": "Are you thinking you want to be able to distinguish between field trial blacklist and cacao blacklist later (so we would ass HOST_BLACKLISTED_FROM_SERVER or such later)?",
      "range": {
        "startLine": 56,
        "startChar": 2,
        "endLine": 56,
        "endChar": 34
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c74d5f76_73ee8e6d",
        "filename": "components/previews/core/previews_black_list.h",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1116492
      },
      "writtenOn": "2017-07-20T20:09:26Z",
      "side": 1,
      "message": "Changed to HOST_BLACKLISTED_BY_SERVER.",
      "parentUuid": "351e8e2c_161f0e0e",
      "range": {
        "startLine": 56,
        "startChar": 2,
        "endLine": 56,
        "endChar": 34
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b55025df_15f0e530",
        "filename": "components/previews/core/previews_io_data.cc",
        "patchSetId": 1
      },
      "lineNbr": 63,
      "author": {
        "id": 1166490
      },
      "writtenOn": "2017-07-20T17:49:58Z",
      "side": 1,
      "message": "small nit: can you parse this string once and pass a vector\u0026 around? It would have to be stored somewhere like PreviewsIOData during initialization, so whatever seems cleaner to you; just presenting an alternative. This change also works with Doug\u0027s suggested change below.",
      "range": {
        "startLine": 63,
        "startChar": 13,
        "endLine": 63,
        "endChar": 29
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "906419b4_649a2d0e",
        "filename": "components/previews/core/previews_io_data.cc",
        "patchSetId": 1
      },
      "lineNbr": 63,
      "author": {
        "id": 1116492
      },
      "writtenOn": "2017-07-20T20:09:26Z",
      "side": 1,
      "message": "We could parse it once during init, but we\u0027d still have to figure out how to differentiate between client lofi and server lofi in ShouldAllowPreviewAtECT that way; see my comment below. Also, since we should keep the list short anyways, parsing it each navigation isn\u0027t a big issue. See the design doc for more info: https://docs.google.com/document/d/19Hmb0ozBymSi2S7sPXxI-ACtk4U_FYoxWVZd7TsyVlQ/edit\n\nI\u0027ve changed it to pass around a std::vector\u003cstd::string\u003e though, since that\u0027s probably a little cleaner.",
      "parentUuid": "b55025df_15f0e530",
      "range": {
        "startLine": 63,
        "startChar": 13,
        "endLine": 63,
        "endChar": 29
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ff62fcc_7efffc1e",
        "filename": "components/previews/core/previews_io_data.cc",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1147716
      },
      "writtenOn": "2017-07-20T16:33:31Z",
      "side": 1,
      "message": "Why make caller pass this in. This object holds the local blacklist so can it also access the finch blacklist as well?",
      "range": {
        "startLine": 132,
        "startChar": 22,
        "endLine": 132,
        "endChar": 64
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82941185_6c4608d3",
        "filename": "components/previews/core/previews_io_data.cc",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1116492
      },
      "writtenOn": "2017-07-20T20:09:26Z",
      "side": 1,
      "message": "The main trickiness here is that ideally we want the field trial param blacklist to apply to Client LoFi, but not to Server LoFi, since Server LoFi can already make finer-grained per-image decisions about whether or not to replace the image.\n\nClient LoFi makes these decisions on the client, so it has to resort to either trying to replace all images or none on the page.\n\nRight now, there\u0027s just a general PreviewsType::LOFI value and not individual CLIENT_LOFI or SERVER_LOFI values, which makes sense in the context of stuff like the infobar and the local blacklist, but we don\u0027t have a way of choosing to use the server blacklist for only client lofi unless we pass in a parameter, and this seemed to be the simplest way to do it.\n\nWDYT? Suggestions are welcome :)",
      "parentUuid": "8ff62fcc_7efffc1e",
      "range": {
        "startLine": 132,
        "startChar": 22,
        "endLine": 132,
        "endChar": 64
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8dee716_f86b02d6",
        "filename": "components/previews/core/previews_io_data.cc",
        "patchSetId": 1
      },
      "lineNbr": 150,
      "author": {
        "id": 1147716
      },
      "writtenOn": "2017-07-20T16:33:31Z",
      "side": 1,
      "message": "Consider doing ECT check before this one that does a bit more work?\n[I guess I also wonder about ECT check before local blacklist check as well.]",
      "range": {
        "startLine": 150,
        "startChar": 6,
        "endLine": 150,
        "endChar": 44
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a783473_5aacfde3",
        "filename": "components/previews/core/previews_io_data.cc",
        "patchSetId": 1
      },
      "lineNbr": 150,
      "author": {
        "id": 1116492
      },
      "writtenOn": "2017-07-20T20:09:26Z",
      "side": 1,
      "message": "I\u0027d prefer to keep this blacklist check near the earlier blacklist check for consistency, plus since e.g. Offline previews is already rolling out, moving the ECT check up before the blacklist checks here could muck up UMA data, and even if that\u0027s totally worth it, seems like something for a separate CL.\n\nI don\u0027t feel strongly about this though, and I don\u0027t mind moving it if you think it\u0027s worth it.",
      "parentUuid": "d8dee716_f86b02d6",
      "range": {
        "startLine": 150,
        "startChar": 6,
        "endLine": 150,
        "endChar": 44
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba895674_80a640ae",
        "filename": "tools/metrics/histograms/enums.xml",
        "patchSetId": 1
      },
      "lineNbr": 30439,
      "author": {
        "id": 1147716
      },
      "writtenOn": "2017-07-20T16:33:31Z",
      "side": 1,
      "message": "This description is more general than the enum name (...BY_FIELD_TRIAL)",
      "range": {
        "startLine": 30439,
        "startChar": 41,
        "endLine": 30439,
        "endChar": 56
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1261d50d_b8209e7c",
        "filename": "tools/metrics/histograms/enums.xml",
        "patchSetId": 1
      },
      "lineNbr": 30439,
      "author": {
        "id": 1116492
      },
      "writtenOn": "2017-07-20T20:09:26Z",
      "side": 1,
      "message": "Good point, I\u0027ve changed the c++ enum value to HOST_BLACKLISTED_BY_SERVER.",
      "parentUuid": "ba895674_80a640ae",
      "range": {
        "startLine": 30439,
        "startChar": 41,
        "endLine": 30439,
        "endChar": 56
      },
      "revId": "efb2f699e346feb24286ec0a833d930500a37b88",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}