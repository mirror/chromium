{
  "comments": [
    {
      "key": {
        "uuid": "4c6036a7_6cd524f5",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1405,
      "author": {
        "id": 1245462
      },
      "writtenOn": "2017-12-21T10:12:31Z",
      "side": 1,
      "message": "\u003e If focused element is not offscreen, it\u0027s node rect is used.\n\nThis is not true because we always use the focused element\u0027s container\u0027s box, right? It\u0027s NodeRectInAbsoluteCoordinates(container), not NodeRectInAbsoluteCoordinates(FocusedElement()).\n\nHmm, let\u0027s skip adding this comment. The called functions had some good comments already. Renaming the variable should give enough hint.",
      "range": {
        "startLine": 1403,
        "startChar": 0,
        "endLine": 1405,
        "endChar": 76
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58a7f789_b3485d64",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1405,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-12-27T12:29:27Z",
      "side": 1,
      "message": "Comment was removed.\n\n\u003e This is not true because we always use the focused element\u0027s container\u0027s box, right?\n\nNo, We use container\u0027s box when focused element is offscreen.\n\nbool FocusController::AdvanceFocusDirectionally(WebFocusType type) {\n...\n  if (focused_element) {\n    if (!HasOffscreenRect(focused_element)) {\n      starting_rect \u003d NodeRectInAbsoluteCoordinates(focused_element,\n                                                    true /* ignore border */);\n...\n}",
      "parentUuid": "4c6036a7_6cd524f5",
      "range": {
        "startLine": 1403,
        "startChar": 0,
        "endLine": 1405,
        "endChar": 76
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c982e40a_4ffcac26",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1405,
      "author": {
        "id": 1245462
      },
      "writtenOn": "2017-12-28T19:08:15Z",
      "side": 1,
      "message": "Do you know why we don\u0027t always use the focused element as the algorithm\u0027s starting rectangle? I changed the code into:\n\n  -    if (!HasOffscreenRect(focused_element)) {\n  -      starting_rect \u003d NodeRectInAbsoluteCoordinates(focused_element,\n  -                                                    true /* ignore border */);\n  -    } else if (auto* area \u003d ToHTMLAreaElementOrNull(*focused_element)) {\n  +    starting_rect \u003d NodeRectInAbsoluteCoordinates(focused_element,\n  +                                                  true /* ignore border */);\n  +    if (auto* area \u003d ToHTMLAreaElementOrNull(*focused_element)) {\n\n... and it seems to work :) LayoutTests pass at least...",
      "parentUuid": "58a7f789_b3485d64",
      "range": {
        "startLine": 1403,
        "startChar": 0,
        "endLine": 1405,
        "endChar": 76
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b4d9a94_398e66b6",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1405,
      "author": {
        "id": 1245462
      },
      "writtenOn": "2018-01-03T11:40:02Z",
      "side": 1,
      "message": "Oh, I now understand why we need this... It is for use cases like crbug.com/796493. I landed a test for the container\u003d\u003cbody\u003e case in https://chromium-review.googlesource.com/c/chromium/src/+/847513.",
      "parentUuid": "c982e40a_4ffcac26",
      "range": {
        "startLine": 1403,
        "startChar": 0,
        "endLine": 1405,
        "endChar": 76
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8ba5ecd_9e1eed71",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1405,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2018-01-03T12:01:31Z",
      "side": 1,
      "message": "Imagine following situation:\n\u003ca\u003e - child of scrollable area, offscreen, focused element\n\u003cb\u003e - outside element of scrollable area, focusable\n\u003cscrollable area\u003e\n\nIf we use focused element\u0027s rect, then focus will moved to \u003cb\u003e when we hit down arrow key. I think this is unintuitve behavior.",
      "parentUuid": "c982e40a_4ffcac26",
      "range": {
        "startLine": 1403,
        "startChar": 0,
        "endLine": 1405,
        "endChar": 76
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "449bddd0_d245f1dc",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1405,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2018-01-03T12:34:59Z",
      "side": 1,
      "message": "\u003e Oh, I now understand why we need this... It is for use cases like crbug.com/796493. I landed a test for the container\u003d\u003cbody\u003e case in https://chromium-review.googlesource.com/c/chromium/src/+/847513.\n\nIt seems crbug.com/796493 also good reason.",
      "parentUuid": "c8ba5ecd_9e1eed71",
      "range": {
        "startLine": 1403,
        "startChar": 0,
        "endLine": 1405,
        "endChar": 76
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df14ad06_ce0a7935",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1406,
      "author": {
        "id": 1245462
      },
      "writtenOn": "2017-12-21T10:12:31Z",
      "side": 1,
      "message": "Let\u0027s rename to virtual_rect or even heuristic_rect? The latter might help readers understand that this is indeed heuristics (\u003d logic that might not deliver the correct result)?",
      "range": {
        "startLine": 1406,
        "startChar": 15,
        "endLine": 1406,
        "endChar": 25
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf19f764_cd947447",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1406,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-12-27T12:29:27Z",
      "side": 1,
      "message": "I choose latter :) Done",
      "parentUuid": "df14ad06_ce0a7935",
      "range": {
        "startLine": 1406,
        "startChar": 15,
        "endLine": 1406,
        "endChar": 25
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "029d3dd0_8d51e4a2",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1447,
      "author": {
        "id": 1245462
      },
      "writtenOn": "2017-12-21T10:12:31Z",
      "side": 1,
      "message": "// We now dig into a navigable container. Mark it |already_checked| so we\n// can skip this sub tree in case FindFocusCandidateInContainer() returns it\n// again.",
      "range": {
        "startLine": 1441,
        "startChar": 0,
        "endLine": 1447,
        "endChar": 29
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4cecd86_b4aeca1b",
        "filename": "third_party/WebKit/Source/core/page/FocusController.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1447,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-12-27T12:29:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "029d3dd0_8d51e4a2",
      "range": {
        "startLine": 1441,
        "startChar": 0,
        "endLine": 1447,
        "endChar": 29
      },
      "revId": "91d428881bc3566034f1bcf407f7a433b0f8b331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}