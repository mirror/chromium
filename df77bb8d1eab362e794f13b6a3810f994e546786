{
  "comments": [
    {
      "key": {
        "uuid": "83135bac_5c3db2f5",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 246,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "AutofillManager is getting big. We should move Form importing functions (including uploading) to another file. What do you think?",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bef6d6ee_a8f29df8",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 246,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "I think we maybe should have done that a while ago, haha.  Will follow up in CL-level comment.",
      "parentUuid": "83135bac_5c3db2f5",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "467161ab_2530d7f5",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1106,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "Looking at line 1317, we could be here because the experiment to request CVC is disabled, which doesn\u0027t appear to be in the condition?",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e7891a5_1271818b",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1106,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Does it need to be?  It feels irrelevant.  This else clause boils down to:\n\"If I\u0027m not requesting CVC from the user, then either I:\n- found the CVC value in the checkout flow (formerly always true), or\n- we\u0027re in the detected values experiment (which means ask Payments if we can offer to save even if CVC is missing)\"",
      "parentUuid": "467161ab_2530d7f5",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9bc78c2_0a1a4963",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1166,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "no curlies?",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "406b1a91_e138207d",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1166,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9bc78c2_0a1a4963",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06cbf251_9c68e797",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1176,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "was this a bug? Is it necessary?",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9931feaa_95451180",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1176,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Not a bug.  Necessary due to this change.  See my reply in payments_client.cc or my response to Shanfeng who actually asked the same thing: https://chromium-review.googlesource.com/c/chromium/src/+/688678/4/components/autofill/core/browser/autofill_manager.cc#1164",
      "parentUuid": "06cbf251_9c68e797",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "47091157_5c2ccacb",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1260,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "return here and avoid the huge else?",
      "range": {
        "startLine": 1260,
        "startChar": 8,
        "endLine": 1260,
        "endChar": 9
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4783c225_eff9dd82",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1260,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "47091157_5c2ccacb",
      "range": {
        "startLine": 1260,
        "startChar": 8,
        "endLine": 1260,
        "endChar": 9
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89e47cf1_62480937",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1318,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "It\u0027s not obvious why |upload_decision_metrics_| would be 0 here. Can you make it clearer by perhaps bringing your comment from 1328",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cea3aeac_2880f825",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1318,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Thanks for pointing out where things aren\u0027t clear.  Added a comment like the one at 1328, but more tailored for this spot (updated the 1328 comment to match).",
      "parentUuid": "89e47cf1_62480937",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ae12af6_568a2086",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1370,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "do you need this line?",
      "range": {
        "startLine": 1370,
        "startChar": 6,
        "endLine": 1370,
        "endChar": 60
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28984849_57f35d0f",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1370,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Yes.  upload_request_.cvc will be empty if CVC was not found, period.  If the CVC fix flow is enabled, we can assume we *will* always have CVC because the user will be asked to provide it before save is allowed, so Chrome can tell Payments it\u0027s guaranteed to exist.",
      "parentUuid": "0ae12af6_568a2086",
      "range": {
        "startLine": 1370,
        "startChar": 6,
        "endLine": 1370,
        "endChar": 60
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7348724_d1524fa9",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1395,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "In your model, is it ok to have different profiles contribute to detected_values? I\u0027m not entirely sure I know why we send many |profiles|, so I\u0027m curious.",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36d70cff_572d015c",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1395,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "1) We send all |profiles| because we don\u0027t want Chrome (or Payments!) guessing at which one might be billing and which one might be shipping, which would implicitly happen if we only sent a single address.\n\n2) In my model, what we care *most* about is CVC, name, and postal code.  Those are relayed only if they\u0027re found and unique, and are the backbone of whether we decide to offer to save.  The other four address fields (address line, city, state, and country code) don\u0027t currently trigger any sort of abort-save logic, but they might be useful for save confidence/validation in the future, so in this case we\u0027re relaying what was found.",
      "parentUuid": "e7348724_d1524fa9",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8bc06e62_e33d9cce",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1436,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "why not upload_decision_metrics_?",
      "range": {
        "startLine": 1436,
        "startChar": 6,
        "endLine": 1436,
        "endChar": 29
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce481eab_3dee0429",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1436,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "I kept it because \"SetProfilesForCreditCardUpload\" doesn\u0027t feel like it implies it\u0027s changing upload_decision_metrics_, and it can be unclear to the reader where that\u0027s happening.  I\u0027m okay with changing this, but I feel like it would be better suited to the refactor CL.  Let me know if you want it done now.",
      "parentUuid": "8bc06e62_e33d9cce",
      "range": {
        "startLine": 1436,
        "startChar": 6,
        "endLine": 1436,
        "endChar": 29
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "522704f7_d5d2caf1",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1600,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "Why is this here, gated by |upload_decision_metrics|?",
      "range": {
        "startLine": 1600,
        "startChar": 13,
        "endLine": 1600,
        "endChar": 14
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12e3888f_77aebb6d",
        "filename": "components/autofill/core/browser/autofill_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1600,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Sashi added it in https://codereview.chromium.org/2864363004/, so I\u0027m not 100% sure.  My assumption is that if we have conflicting profiles and we *don\u0027t* intend to offer upload because of it, we don\u0027t care how long it\u0027s been since they were used.\n\nHowever, since the detected values experiment is intended to be a full rollout, this will eventually become a moot point.",
      "parentUuid": "522704f7_d5d2caf1",
      "range": {
        "startLine": 1600,
        "startChar": 13,
        "endLine": 1600,
        "endChar": 14
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0265d76_a8b0ef2a",
        "filename": "components/autofill/core/browser/autofill_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 466,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "nit: I would avoid function names in comments, because things can change.\n\n\"Analyzes the decisions made in importing form data and blah...\"",
      "range": {
        "startLine": 466,
        "startChar": 36,
        "endLine": 466,
        "endChar": 50
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c48a15a_ff59c39e",
        "filename": "components/autofill/core/browser/autofill_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 466,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "That\u0027s a great point; not a nit at all IMO.  Done.",
      "parentUuid": "f0265d76_a8b0ef2a",
      "range": {
        "startLine": 466,
        "startChar": 36,
        "endLine": 466,
        "endChar": 50
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8cd9e0bc_b96f9132",
        "filename": "components/autofill/core/browser/autofill_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 469,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "Looks like it\u0027s credit card specific, so should have a credit card specific name",
      "range": {
        "startLine": 469,
        "startChar": 6,
        "endLine": 469,
        "endChar": 33
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3511116_f2b0ff8e",
        "filename": "components/autofill/core/browser/autofill_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 469,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "It\u0027s specific to the credit card upload save flow, BUT it deals with address profiles.  I feel like this would be better resolved by moving these to a new file specific to credit card uploading, but keeping the function name.  Thoughts?",
      "parentUuid": "8cd9e0bc_b96f9132",
      "range": {
        "startLine": 469,
        "startChar": 6,
        "endLine": 469,
        "endChar": 33
      },
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cdefb4da_77f65469",
        "filename": "components/autofill/core/browser/payments/payments_client.cc",
        "patchSetId": 6
      },
      "lineNbr": 370,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "was this a bug? Should this be a separate change?",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "521cb980_091aceee",
        "filename": "components/autofill/core/browser/payments/payments_client.cc",
        "patchSetId": 6
      },
      "lineNbr": 370,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Not a bug; Shanfeng mentioned something similar.\n\nBefore this CL, Chrome *only* asked Payments if it could offer to save if it had all information (CVC, name, address).  With this CL, Chrome *always* asks Payments if it can offer to save.  This opens up the brand-new opportunity of Payments saying \"yes\" even if Chrome doesn\u0027t have all the data, so the UploadCardRequest needs to be able to not crash if some things are missing.\n\n- If names are missing, they\u0027re just not set, that\u0027s already standard.\n- If addresses are missing, it\u0027s just an empty array, that\u0027s fine.\n- CVC was always expected and now needs to be explicitly handled, so that\u0027s the only one that\u0027s changing.",
      "parentUuid": "cdefb4da_77f65469",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ae81dc0_0afb179a",
        "filename": "components/autofill/core/browser/payments/payments_client.h",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-09-29T14:25:38Z",
      "side": 1,
      "message": "mention detected_values and its \"type\"",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "582806b0_39b23caf",
        "filename": "components/autofill/core/browser/payments/payments_client.h",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-09-29T20:38:22Z",
      "side": 1,
      "message": "Done, thanks.",
      "parentUuid": "8ae81dc0_0afb179a",
      "revId": "df77bb8d1eab362e794f13b6a3810f994e546786",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}