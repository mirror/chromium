{
  "comments": [
    {
      "key": {
        "uuid": "5707a7b5_e01922b1",
        "filename": "content/network/url_loader_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-09-20T15:03:01Z",
      "side": 1,
      "message": "Actually, I think my suggestion was wrong - we should probably call OnResponseBodyStreamClosed if the result is not MOJO_RESULT_OK.",
      "range": {
        "startLine": 459,
        "startChar": 13,
        "endLine": 459,
        "endChar": 0
      },
      "revId": "26ea974e185c14e2dc1d76540f87408ec52f6b8a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d35948d2_447eedf2",
        "filename": "content/network/url_loader_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-09-20T15:07:19Z",
      "side": 1,
      "message": "Oh, and the reason for this is:  What if we just send the last chunk of the body?  We\u0027ll think it was sent successfully (It may have been, or may not have).  Then we\u0027ll send the request complete method...Sure, it is, as always, up to the other side to figure out if it got anything, but I think we should be consistent between the two messages we can get when the stream is closed.",
      "parentUuid": "5707a7b5_e01922b1",
      "range": {
        "startLine": 459,
        "startChar": 13,
        "endLine": 459,
        "endChar": 0
      },
      "revId": "26ea974e185c14e2dc1d76540f87408ec52f6b8a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e07d603_f881ae0b",
        "filename": "content/network/url_loader_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1104639
      },
      "writtenOn": "2017-09-20T17:01:50Z",
      "side": 1,
      "message": "Yeah, I think calling OnResponseBodyStreamClosed() here makes sense.\nPlease help me to understand: how \"we just send the last chunk of the body\" will cause us to get to OnResponseBodyStreamReady() with a failure? I think when we finish sending the body, we cancel |writable_handle_watcher_|, which guarantees that OnResponseBodyStreamReady won\u0027t be called.\n\nI am also thinking to use OnResponseBodyStreamClosed() wherever we need to reset the data pipe (including successful completion). Please see my latest patch and let me know whether that makes sense.",
      "parentUuid": "d35948d2_447eedf2",
      "range": {
        "startLine": 459,
        "startChar": 13,
        "endLine": 459,
        "endChar": 0
      },
      "revId": "26ea974e185c14e2dc1d76540f87408ec52f6b8a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd6b84c2_cc5dc3a9",
        "filename": "content/network/url_loader_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-09-20T18:40:53Z",
      "side": 1,
      "message": "Oops - I guess pending_write_ will always be nullptr in that case - I was thinking that if it wasn\u0027t, we\u0027ve move ahead to next next URLRequest::Read, which would get us into that situation, but since pending_write_ is always null, we\u0027d run into the next BeginWrite, which should fail (So my comments on the bug were right).  Anyhow, seems fine either way.",
      "parentUuid": "8e07d603_f881ae0b",
      "range": {
        "startLine": 459,
        "startChar": 13,
        "endLine": 459,
        "endChar": 0
      },
      "revId": "26ea974e185c14e2dc1d76540f87408ec52f6b8a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff675691_fb210fde",
        "filename": "content/network/url_loader_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 500,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-09-20T14:52:07Z",
      "side": 1,
      "message": "So this can go through either the OnResponseBodyStreamClosed or OnResponseBodyStreamReady paths?  Think that\u0027s worth a comment.",
      "range": {
        "startLine": 500,
        "startChar": 26,
        "endLine": 500,
        "endChar": 65
      },
      "revId": "26ea974e185c14e2dc1d76540f87408ec52f6b8a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f48d333d_0bace6bb",
        "filename": "content/network/url_loader_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 500,
      "author": {
        "id": 1104639
      },
      "writtenOn": "2017-09-20T17:01:50Z",
      "side": 1,
      "message": "Now they both go to OnStreamBodyStreamClosed() for cleanup, so I think a comment is not needed anymore.",
      "parentUuid": "ff675691_fb210fde",
      "range": {
        "startLine": 500,
        "startChar": 26,
        "endLine": 500,
        "endChar": 65
      },
      "revId": "26ea974e185c14e2dc1d76540f87408ec52f6b8a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}