{
  "comments": [
    {
      "key": {
        "uuid": "d95de770_cdbb7311",
        "filename": "third_party/WebKit/Source/core/html/custom/CustomElementReactionStack.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-07-11T09:06:39Z",
      "side": 1,
      "message": "How does this work with incremental marking? \n\nE.g. We trace the CustomElementRegistry before allocating a CustomElementReactionStack. The registry will be black and not visited again. The stack will not be visited again (https://cs.chromium.org/chromium/src/third_party/WebKit/Source/core/html/custom/CustomElementReactionStack.cpp?l\u003d36) and anything reachable would not be seen.\n\nI agree that it\u0027s weird but this one should have a manual WB in the current design as far as I can see.",
      "range": {
        "startLine": 119,
        "startChar": 16,
        "endLine": 119,
        "endChar": 42
      },
      "revId": "06bf6028e42a2ee85b107ef8f1e76f860a25ede4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9251a03_fcaa9bbd",
        "filename": "third_party/WebKit/Source/core/html/custom/CustomElementReactionStack.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-07-11T09:19:48Z",
      "side": 1,
      "message": "Nice catch!\n\nCan we probably forbid TraceWrappers() to trace raw pointers? I think we want to force developers to:\n\n- Use TraceWrappers() only for tracing TraceWrapperMember.\n- Use TraceWrappersWithManualWriteBarrier() otherwise.\n\nThat way we can detect a programming error like this.",
      "parentUuid": "d95de770_cdbb7311",
      "range": {
        "startLine": 119,
        "startChar": 16,
        "endLine": 119,
        "endChar": 42
      },
      "revId": "06bf6028e42a2ee85b107ef8f1e76f860a25ede4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b8cdbb13_ba195d36",
        "filename": "third_party/WebKit/Source/core/html/custom/CustomElementReactionStack.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-07-11T19:50:12Z",
      "side": 1,
      "message": "That was the whole intention behind the current design :) Developers should be forced to use TraceWrappersWithManualWriteBarrier with raw pointers so they get reminded.\n\nI see that the TraceWrappers that takes raw pointers is on the public interface of WrapperVisitor. Moving this one to the private section should be enough to actually enforce this policy.",
      "parentUuid": "d9251a03_fcaa9bbd",
      "range": {
        "startLine": 119,
        "startChar": 16,
        "endLine": 119,
        "endChar": 42
      },
      "revId": "06bf6028e42a2ee85b107ef8f1e76f860a25ede4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}