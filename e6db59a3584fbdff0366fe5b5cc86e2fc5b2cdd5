{
  "comments": [
    {
      "key": {
        "uuid": "ac6aae26_e826331f",
        "filename": "content/renderer/render_frame_impl.cc",
        "patchSetId": 24
      },
      "lineNbr": 4004,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2017-11-13T18:17:25Z",
      "side": 1,
      "message": "AFAIU (please correct me if I misunderstood something) with a cross-document, same-frame navigation, the sequence of events will look as follows:\n\n10. Browser sends to the Renderer a FrameMsg_Navigate\n20. Renderer runs unload handler.\n30. At this point old remote interfaces are still applicable.\n40. Renderer installs a new Document.\n50. !!! at this point old remote interfaces are no longer applicable\n60. Renderer calls |remote_interfaces_.Close()| (on line 4004 above)\n70. Renderer binds new |remote_interfaces_| (on line 4005 below)\n\nThe gap between 40-60 seems undesirable - at that point the frame is associated with a new document, but remote interfaces are still associated with the old document.  Would it be possible to call |remote_interfaces_.Close()| earlier.  Maybe not in this CL, but in a follow-up?",
      "range": {
        "startLine": 4004,
        "startChar": 4,
        "endLine": 4004,
        "endChar": 31
      },
      "revId": "e6db59a3584fbdff0366fe5b5cc86e2fc5b2cdd5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6520b9f_b11ba197",
        "filename": "content/renderer/render_frame_impl.cc",
        "patchSetId": 24
      },
      "lineNbr": 4004,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-11-14T14:23:32Z",
      "side": 1,
      "message": "It\u0027s true that the current design gives a lot of ways to mess things up, but I think the right solution is to provide better determinism around these callbacks. I\u0027ll write up a short doc on how we can do this... Once I\u0027m not limited to code reviewing by phone...",
      "parentUuid": "ac6aae26_e826331f",
      "range": {
        "startLine": 4004,
        "startChar": 4,
        "endLine": 4004,
        "endChar": 31
      },
      "revId": "e6db59a3584fbdff0366fe5b5cc86e2fc5b2cdd5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07a97b96_f5277609",
        "filename": "content/renderer/render_frame_impl.cc",
        "patchSetId": 24
      },
      "lineNbr": 4004,
      "author": {
        "id": 1000379
      },
      "writtenOn": "2017-11-14T16:06:58Z",
      "side": 1,
      "message": "That would be wonderful! For example, do we even need both DidCommitProvisionalLoad and DidClearWindowObject? IIUC, provisional load will go away with PlzNavigate cleanup, so would there be an entirely different callback (or at least, named differently)?",
      "parentUuid": "c6520b9f_b11ba197",
      "range": {
        "startLine": 4004,
        "startChar": 4,
        "endLine": 4004,
        "endChar": 31
      },
      "revId": "e6db59a3584fbdff0366fe5b5cc86e2fc5b2cdd5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}