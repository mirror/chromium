{
  "comments": [
    {
      "key": {
        "uuid": "437e6c98_4a750130",
        "filename": "ui/events/event_constants.h",
        "patchSetId": 1
      },
      "lineNbr": 151,
      "author": {
        "id": 1000111
      },
      "writtenOn": "2017-07-19T08:32:37Z",
      "side": 1,
      "message": "dtapuska@: any opinions about this? (for example, is this how we would do this on Windows too?)",
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1144d12d_f7ecbbba",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev.cc",
        "patchSetId": 1
      },
      "lineNbr": 510,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-19T14:40:04Z",
      "side": 1,
      "message": "Is this event dispatched after ProcessKey is called? ie; we want the touchmove event to occur when the button goes down not on the first move after the button goes down.",
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a1d351b_6cf07141",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev.cc",
        "patchSetId": 1
      },
      "lineNbr": 510,
      "author": {
        "id": 1001564
      },
      "writtenOn": "2017-08-08T00:18:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1144d12d_f7ecbbba",
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6cf4d07_3c991cd6",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1190,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-07-19T14:40:04Z",
      "side": 1,
      "message": "This test case seems indicate hover state. Does ozone expose this hover state? On windows we will get notification of barrel buttons when in the hover state yet the pen is not in contact with the digitizer.",
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a14f77a0_7157d80a",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1190,
      "author": {
        "id": 1163594
      },
      "writtenOn": "2017-07-20T19:39:40Z",
      "side": 1,
      "message": "To add something to this on Windows (with stylus supporting hover) when stylus is hovering in addition to getting events when buttons are changing we also get move events when it moves around. I assume we should either get both or none.",
      "parentUuid": "d6cf4d07_3c991cd6",
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73a02dab_9325c361",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1190,
      "author": {
        "id": 1001563
      },
      "writtenOn": "2017-07-20T19:40:45Z",
      "side": 1,
      "message": "We do not report hover states right now as they are not supported by our TouchEvent types. The consequence is that the button state will only be reported when the pen is touching the screen, which is good enough for our use cases (The button is going to invoke functionality in Chrome UI and is not exposed to APIs).",
      "parentUuid": "d6cf4d07_3c991cd6",
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c3f5905_fc28549b",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1218,
      "author": {
        "id": 1001794
      },
      "writtenOn": "2017-07-19T16:57:33Z",
      "side": 1,
      "message": "I think this should be 4, or 6 if hovers can be reported via touchevent. Since this is reported through touch events now, please dirty the touch slot state whenever the button state changes so that an event goes out at the end of the report.",
      "range": {
        "startLine": 1218,
        "startChar": 16,
        "endLine": 1218,
        "endChar": 20
      },
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d1e730f_9800d73f",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1218,
      "author": {
        "id": 1001563
      },
      "writtenOn": "2017-07-20T19:40:45Z",
      "side": 1,
      "message": "I am afraid that this would break things somewhere higher up since we would be reporting \u0027empty\u0027 touch events. We currently don\u0027t have even types for hover. \n\nWe could add those and add full support for hover events in ozone, but I am afraid that would come with quite the rats tail that goes beyond the scope of reporting the button state with touch events.",
      "parentUuid": "2c3f5905_fc28549b",
      "range": {
        "startLine": 1218,
        "startChar": 16,
        "endLine": 1218,
        "endChar": 20
      },
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f3c3b48_57f12c2a",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1218,
      "author": {
        "id": 1001794
      },
      "writtenOn": "2017-07-20T22:39:19Z",
      "side": 1,
      "message": "It should be fine, each move event should be understood to mean\n\n\"at time T, the position of the finger is X,Y with pressure P .. etc .. and barrel button state B\"\n\nWhich, given the device report containing only a button change, is a true statement and won\u0027t break any sane event handling code.",
      "parentUuid": "9d1e730f_9800d73f",
      "range": {
        "startLine": 1218,
        "startChar": 16,
        "endLine": 1218,
        "endChar": 20
      },
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1aa037cf_aac68fc0",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1218,
      "author": {
        "id": 1001564
      },
      "writtenOn": "2017-08-08T00:18:14Z",
      "side": 1,
      "message": "The problem is that the button press is registered before the touch is down. So we would generate a sequence such as:\n\nTOUCH_MOVE (button down)\nTOUCH_PRESSED\nTOUCH_MOVE (movement while pen is down)\nTOUCH_RELEASED\nTOUCH_MOVE (button released)\n\ngenerating touch move events when pressed has not been sent seems like an inconsistent event stream to me. It seems to work, the MOVE events are just filtered somewhere at the higher level before passing it into chrome UI. If that\u0027s the route you would like to go please let me know, it seems rather hacky to me. \n\nEither way, I updated the code to set the touch slot state to dirty. That will at least force  a TOUCH_MOVE event when the pen is already down, but did not move in the same SYN report.",
      "parentUuid": "2f3c3b48_57f12c2a",
      "range": {
        "startLine": 1218,
        "startChar": 16,
        "endLine": 1218,
        "endChar": 20
      },
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45f63551_cc61b19b",
        "filename": "ui/events/ozone/evdev/touch_event_converter_evdev_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 1218,
      "author": {
        "id": 1001794
      },
      "writtenOn": "2017-08-08T23:00:04Z",
      "side": 1,
      "message": "Hm, good point. I agree that sequence wasn\u0027t possible before and thus might invalidate an assumption somewhere.\n\nSounds reasonable to be conservative initially by only reporting during a touch.",
      "parentUuid": "1aa037cf_aac68fc0",
      "range": {
        "startLine": 1218,
        "startChar": 16,
        "endLine": 1218,
        "endChar": 20
      },
      "revId": "f25b289bbc41250d6868729d80499699f0261a65",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}