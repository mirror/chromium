{
  "comments": [
    {
      "key": {
        "uuid": "3a5d8023_e9ccf57e",
        "filename": "chrome/browser/ui/autofill/chrome_autofill_client.cc",
        "patchSetId": 11
      },
      "lineNbr": 204,
      "author": {
        "id": 1002376
      },
      "writtenOn": "2017-12-07T20:22:52Z",
      "side": 1,
      "message": "this guarantees that controller !\u003d nullptr below (and at line ~235)?",
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0a00a26_911f9e04",
        "filename": "chrome/browser/ui/autofill/chrome_autofill_client.cc",
        "patchSetId": 11
      },
      "lineNbr": 209,
      "author": {
        "id": 1175253
      },
      "writtenOn": "2017-12-05T06:09:30Z",
      "side": 1,
      "message": "Looks this can be nullptr? https://cs.chromium.org/chromium/src/content/public/browser/web_contents_user_data.h?l\u003d44\u0026rcl\u003dec814212b97416cff7c277f3eecf418d326471b8",
      "range": {
        "startLine": 209,
        "startChar": 4,
        "endLine": 209,
        "endChar": 14
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1793a5b0_5e636515",
        "filename": "chrome/browser/ui/autofill/chrome_autofill_client.cc",
        "patchSetId": 11
      },
      "lineNbr": 209,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-12-06T00:40:51Z",
      "side": 1,
      "message": "Not going to fix this one, because if it was nullptr then the very next line would fail anyway. :) I believe it\u0027s assumed controller is never nullptr in this situation.",
      "parentUuid": "b0a00a26_911f9e04",
      "range": {
        "startLine": 209,
        "startChar": 4,
        "endLine": 209,
        "endChar": 14
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b96d5832_784543af",
        "filename": "chrome/browser/ui/views/autofill/save_card_bubble_views.cc",
        "patchSetId": 11
      },
      "lineNbr": 348,
      "author": {
        "id": 1002376
      },
      "writtenOn": "2017-12-07T20:22:52Z",
      "side": 1,
      "message": "should this be BankOrNetworkAndLastFourDigits, post shanfeng\u0027s updates?",
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c35a0f59_5c649670",
        "filename": "chrome/browser/ui/views/autofill/save_card_bubble_views.h",
        "patchSetId": 11
      },
      "lineNbr": 98,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-05T17:32:06Z",
      "side": 1,
      "message": "nit: GetFootnoteViewForTesting (\"ForTesting\" provides some assurance it\u0027s only used in tests since there\u0027s a presubmit warning if you use it from production)\n\nalso, if it allows you to not friend anything, you can make it public.",
      "range": {
        "startLine": 98,
        "startChar": 15,
        "endLine": 98,
        "endChar": 30
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4f51aa9_df5da3f6",
        "filename": "chrome/browser/ui/views/autofill/save_card_bubble_views.h",
        "patchSetId": 11
      },
      "lineNbr": 98,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-12-06T00:40:51Z",
      "side": 1,
      "message": "Oh neat, I didn\u0027t know that about the ForTesting suffix!  Done.",
      "parentUuid": "c35a0f59_5c649670",
      "range": {
        "startLine": 98,
        "startChar": 15,
        "endLine": 98,
        "endChar": 30
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "11890e33_a316030b",
        "filename": "chrome/browser/ui/views/autofill/save_card_bubble_views_browsertest.cc",
        "patchSetId": 11
      },
      "lineNbr": 48,
      "author": {
        "id": 1002376
      },
      "writtenOn": "2017-12-07T20:22:52Z",
      "side": 1,
      "message": "So, if the user accepts the prompt to upstream, but the upstream fails, they\u0027re re-prompted for local save? Or is this the RPC that checks if upstream should be offerred?",
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d867253_fb900767",
        "filename": "chrome/browser/ui/views/autofill/save_card_bubble_views_browsertest_base.h",
        "patchSetId": 11
      },
      "lineNbr": 39,
      "author": {
        "id": 1175253
      },
      "writtenOn": "2017-12-05T06:09:30Z",
      "side": 1,
      "message": "enum class?",
      "range": {
        "startLine": 39,
        "startChar": 2,
        "endLine": 39,
        "endChar": 6
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95fbeae3_855e5b0b",
        "filename": "chrome/browser/ui/views/autofill/save_card_bubble_views_browsertest_base.h",
        "patchSetId": 11
      },
      "lineNbr": 39,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-12-06T00:40:51Z",
      "side": 1,
      "message": "Not sure.  I think the goal was that this was it\u0027s really just an int.  Now that DialogEventWaiter is a templated class, I don\u0027t know if it matters.  +Mathieu, thoughts?",
      "parentUuid": "0d867253_fb900767",
      "range": {
        "startLine": 39,
        "startChar": 2,
        "endLine": 39,
        "endChar": 6
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1fe53717_dc9b2999",
        "filename": "components/autofill/core/browser/ui/save_card_bubble_controller.h",
        "patchSetId": 11
      },
      "lineNbr": 76,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-05T17:32:06Z",
      "side": 1,
      "message": "I don\u0027t think these make sense as part of the controller interface. Overall this patch adds way more test-only code than I would prefer. The problems with this are:\n\n1) it can add complexity to production code\n2) it can be confusing what complexity is only there for testing vs. what\u0027s there for production\n3) you\u0027re mainly verifying that your test code works (i.e. it\u0027s too easy to break something but keep the test working, for example you could delete the part where you actually change the footer visibility but keep calling these methods and thereby fool the test)\n\nInstead can you check state? For example, it should be easy enough to check the visibility of the footer view from inside the test with little to no extra code needed in production (save maybe an accessor or setting an id).",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 76,
        "endChar": 42
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f005eb38_3ef2d3ac",
        "filename": "components/autofill/core/browser/ui/save_card_bubble_controller.h",
        "patchSetId": 11
      },
      "lineNbr": 76,
      "author": {
        "id": 1171614
      },
      "writtenOn": "2017-12-06T00:40:51Z",
      "side": 1,
      "message": "Done; removed the OnFooterShown/OnFooterHidden observer code.  You\u0027re right in that those parts can be tested via the GetFootnoteViewForTesting() state.\n\nI was also originally wary of the added complexity to production code through this approach, but after syncing with mathp@ and hearing about why he and rouslan@ settled on this method for PaymentRequest browsertests, it made sense.  A lot of things like BUBBLE_ACCEPTED vs. BUBBLE_CANCELLED and whether RPCs were sent afterward aren\u0027t something that can be tested purely through state.\n\nThanks!",
      "parentUuid": "1fe53717_dc9b2999",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 76,
        "endChar": 42
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5555dfdc_8d0d9fa9",
        "filename": "components/autofill/core/browser/ui/save_card_bubble_controller.h",
        "patchSetId": 11
      },
      "lineNbr": 76,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-06T01:16:11Z",
      "side": 1,
      "message": "I still see many places where you\u0027re adding test-only hooks to production code where it doesn\u0027t seem necessary to me (see other comments). Very tight coupling of code and tests will make future changes slow and difficult, and makes the tests fragile.",
      "parentUuid": "f005eb38_3ef2d3ac",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 76,
        "endChar": 42
      },
      "revId": "69bb183a0c090882ef87769b1d4cf35b610be742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}