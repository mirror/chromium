{
  "comments": [
    {
      "key": {
        "uuid": "a9cb84fa_117c5b26",
        "filename": "chrome/browser/autocomplete/keyword_extensions_delegate_impl.cc",
        "patchSetId": 13
      },
      "lineNbr": 225,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-12-02T06:13:46Z",
      "side": 1,
      "message": "Lines 217 - 225 adds a placeholder item labeled with the extension name for OnKeywordEntered only.\n\nAlong with this change, the change on line 238 fixes the issue where the google search term gets ranked first. Now it is ranked last. Setting |supports_replacement| to true gives a lower rank of the suggestion result than the google search. [1]\n\n[1] https://chromium.googlesource.com/chromium/src/+/1743273d0ea5d0d73e4ba5cbdc1c9acb684e21ff/components/omnibox/browser/keyword_provider.cc#409",
      "revId": "0bca1ebd8d134987aadfa3d1031b935d35f3050a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "251d7375_9bd80528",
        "filename": "chrome/browser/autocomplete/keyword_extensions_delegate_impl.cc",
        "patchSetId": 13
      },
      "lineNbr": 259,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-12-02T06:13:46Z",
      "side": 1,
      "message": "Unintentional change. Will remove in next patch.",
      "revId": "0bca1ebd8d134987aadfa3d1031b935d35f3050a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d42cc191_624dff33",
        "filename": "chrome/browser/autocomplete/keyword_extensions_delegate_impl.cc",
        "patchSetId": 13
      },
      "lineNbr": 270,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-12-02T06:13:46Z",
      "side": 1,
      "message": "Bug 2:  \n\nWhen this method returns false, it means that OnKeywordEntered will eventually be called so OnInputStarted and OnInputChanged should not be called. The problem occurs when this method incorrectly returns true, meaning we think that OnKeywordEntered will not be called given the input. As a result, OnInputStarted and OnInputChanged are called, but later so is OnKeywordEntered. Now the omnibox result box has matches from *both* OnInputChanged and OnKeywordEntered. \n\nIn attempts to resolve this issue, my approach has been to check the input in all its forms to determine if it means OnKeywordEntered should be called, but there are several edge cases with input. Overall, these checks seems too fine grained and really fragile, esp. if since some cases might be missing. Plus adding a check here may fix bug 2, but break and introduce bug 1 (discussed above).\n\nAny thoughts?",
      "range": {
        "startLine": 270,
        "startChar": 36,
        "endLine": 270,
        "endChar": 63
      },
      "revId": "0bca1ebd8d134987aadfa3d1031b935d35f3050a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}