{
  "comments": [
    {
      "key": {
        "uuid": "ea490826_0e41b65b",
        "filename": "media/audio/alsa/alsa_input.cc",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1153409
      },
      "writtenOn": "2017-09-11T12:31:51Z",
      "side": 1,
      "message": "Actually, now I\u0027m thinking this line together with l.164 looks confusing.\nWould it be enough to get frames ones at l.164 and to adjust the value here basing on how many frames we\u0027ve read in the \u0027while\u0027 loop so far?",
      "revId": "c73379d1a241a238c7022bcefc7e777d1df4063d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5108bb99_11cf9301",
        "filename": "media/audio/alsa/alsa_input.cc",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1001872
      },
      "writtenOn": "2017-09-11T17:25:36Z",
      "side": 1,
      "message": "This is a very good question. I am not 100% sure myself.\nFrom my experiments on a single machine it looks like number of frames did not change within this while loop. However, if it does happen new frames count will give us more accurate time estimation.\n(not sure if alsa can get new frames asynchronously, but I don\u0027t see reasons why not)",
      "parentUuid": "ea490826_0e41b65b",
      "revId": "c73379d1a241a238c7022bcefc7e777d1df4063d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bee93c08_6b017202",
        "filename": "media/audio/alsa/alsa_input.cc",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1153409
      },
      "writtenOn": "2017-09-13T14:46:31Z",
      "side": 1,
      "message": "My understanding is that at the moment ReadAudio() is called we estimate the delay by the number of frames queued up to this moment. When we popped first n frames from the queue and called OnData(), the delay for the next portion and next OnData() is \"n frames\" smaller (they were queued later).\nIf new frames arrive while we are going through the queue, it should not affect the delay of already queued frames.\nSo if alsa can get new frames asynchronously it\u0027s even more the reason to not call PcmAvailUpdate() on each iteration.",
      "parentUuid": "5108bb99_11cf9301",
      "revId": "c73379d1a241a238c7022bcefc7e777d1df4063d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}