{
  "comments": [
    {
      "key": {
        "uuid": "f62b4874_77fda46e",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 16
      },
      "lineNbr": 446,
      "author": {
        "id": 1002258
      },
      "writtenOn": "2018-01-15T03:54:17Z",
      "side": 0,
      "message": "I think we should dispatch \"compositionend\" after moving selection,\notherwise selection movement by \"compositionend\" event handler doesn\u0027t\naffect.",
      "revId": "bd083f78a214c4cfdd297d1711c56c9a8e9d509a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e44b076_f0dadadb",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 16
      },
      "lineNbr": 446,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2018-01-15T06:46:55Z",
      "side": 0,
      "message": "It *is* getting dispatched after moving the selection, due to the use of ScopedEventQueue, and my change in DispatchCompositionEndEvent() to make it use EventDispatcher::DispatchScopedEvent(). The reason I’m moving the event into the !is_too_long block is because we were previously dispatching compositionend twice for the is_too_long case.\n\nAnother way to write this would be to do this after MoveCaret():\n\nif (!is_too_long)\n  DispatchCompositionEndEvent();\n\nI feel like this code is misleading regardless of how it’s written unless you understand that EventQueueScope is changing the behavior. Maybe I should add some more comments?",
      "parentUuid": "f62b4874_77fda46e",
      "revId": "bd083f78a214c4cfdd297d1711c56c9a8e9d509a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0898109_799d245f",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 16
      },
      "lineNbr": 446,
      "author": {
        "id": 1002258
      },
      "writtenOn": "2018-01-15T07:05:57Z",
      "side": 0,
      "message": "Thanks for explanation.\nCould you add a comment before MoveCaret() call to help readers who miss ScopedEventQueue\nat L404?",
      "parentUuid": "9e44b076_f0dadadb",
      "revId": "bd083f78a214c4cfdd297d1711c56c9a8e9d509a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}