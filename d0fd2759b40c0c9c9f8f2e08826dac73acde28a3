{
  "comments": [
    {
      "key": {
        "uuid": "bd9af6bd_64a797c8",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorklet.cpp",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-28T09:34:30Z",
      "side": 1,
      "message": "WorkletMessagingProxy() sounds like a simple getter function and it always returns the same proxy. How about FindAvailableMessagingProxy() etc?",
      "range": {
        "startLine": 40,
        "startChar": 42,
        "endLine": 40,
        "endChar": 63
      },
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2dce6096_a1ce34c3",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorklet.cpp",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bd9af6bd_64a797c8",
      "range": {
        "startLine": 40,
        "startChar": 42,
        "endLine": 40,
        "endChar": 63
      },
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "413bd20d_3e18b775",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.cpp",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-09-28T13:14:20Z",
      "side": 1,
      "message": "Can we add a DCHECK to check that ClearWorkerBackingThread() has been called before reaching the destructor?",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0e32acb_4eeb764b",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.cpp",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "413bd20d_3e18b775",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bfe60506_a6abb81a",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.cpp",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-09-28T13:14:20Z",
      "side": 1,
      "message": "Shouldn\u0027t this be:\n\n  if (--s_ref_count \u003d\u003d 0)\n\n?",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55a0fe40_60c2a971",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.cpp",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Oops. Done.",
      "parentUuid": "bfe60506_a6abb81a",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfc6bdb5_1f00b6d1",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.cpp",
        "patchSetId": 4
      },
      "lineNbr": 53,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-09-28T13:14:20Z",
      "side": 1,
      "message": "Just to confirm: There is no issue in recreating the backing thread after the ref count becomes 0, right? (e.g., the ref count changes like 0 \u003d\u003e 1 \u003d\u003e 2 \u003d\u003e 1 \u003d\u003e 0 \u003d\u003e 1.)",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e633c403_e5dc81bd",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.h",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-28T09:34:30Z",
      "side": 1,
      "message": "Can you add a comment about the refcount?",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4bad67f9_d990b309",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.h",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e633c403_e5dc81bd",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a742c9e7_72634ea5",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.h",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-28T09:34:30Z",
      "side": 1,
      "message": "uint32_t?",
      "range": {
        "startLine": 60,
        "startChar": 9,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87ab7fd4_309fd123",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.h",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Can you explain why unit32_t is better?\n\nAlso this is only accessed by the main thread, I don\u0027t think an atomic counter is necessary. I\u0027ll add a comment.",
      "parentUuid": "a742c9e7_72634ea5",
      "range": {
        "startLine": 60,
        "startChar": 9,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4db2fee7_60507757",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletThread.h",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-28T23:34:37Z",
      "side": 1,
      "message": "I think fixed width integer types are generally preferable (especially for a counter like this) in terms of safety and compatibility. IIUC, \"unsigned\" doesn\u0027t guarantee its width (I guess almost all major platforms has 32 bit width though).\n\nI checked the coding style guide[1]. Surprisingly it recommends not to use unsigned types including \"uint32_t\" but to use signed types w/ the range check. I don\u0027t have a strong opinion here and I\u0027ll defer to your decision :)\n\n[1] https://google.github.io/styleguide/cppguide.html#Integer_Types",
      "parentUuid": "87ab7fd4_309fd123",
      "range": {
        "startLine": 60,
        "startChar": 9,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83ff1c46_091727dd",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-28T09:34:30Z",
      "side": 1,
      "message": "For code simplicity, I\u0027d prefer that only AudioWorklet can associate AWMessagingProxy(AWThread) with BaseAudioContext. How about doing this in AudioWorklet::RegisterContext() like this?\n\nvoid AudioWorklet::RegisterContext(BaseAudioContext* context) {\n  DCHECK(!contexts_.Contains(context));\n  contexts_.insert(context);\n  if (IsWorkletMessagingProxyCreated())\n    context-\u003eSetWorkletMessagingProxy(WorkletMessagingProxy());\n}\n\n... and then we could make WorkletMessagingProxy() and IsWorkletMessagingProxyCreated() \u0027private\u0027.",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1df77bb4_185adc06",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Yeap. This is much cleaner. Thanks!",
      "parentUuid": "83ff1c46_091727dd",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98ab6379_aef5b847",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1040,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-09-28T09:34:30Z",
      "side": 1,
      "message": "DCHECK(!worklet_messaging_proxy_);",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22be6c3d_74d0c694",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1040,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "98ab6379_aef5b847",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0eaeaff2_50e8ab81",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1045,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-09-28T13:14:20Z",
      "side": 1,
      "message": "DCHECK(worklet_messaging_proxy_)?",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b77efa47_a62751ee",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1045,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-09-28T20:32:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0eaeaff2_50e8ab81",
      "revId": "d0fd2759b40c0c9c9f8f2e08826dac73acde28a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}