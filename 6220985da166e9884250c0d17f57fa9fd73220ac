{
  "comments": [
    {
      "key": {
        "uuid": "6c6113d8_6030045c",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 231,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "Remove the default as it will allow to catch at compile time the fact that a new entry is added to SigninEmailConfirmationDialog::Action without adding it here.\n\nIf you really want to keep the section in default, change break to return in case statements and move this section outside the switch.",
      "range": {
        "startLine": 231,
        "startChar": 4,
        "endLine": 231,
        "endChar": 11
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93c7143e_e585b55a",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 240,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "I think we should only start observing the login UI service once the sync confirmation dialog is presented.",
      "range": {
        "startLine": 240,
        "startChar": 2,
        "endLine": 240,
        "endChar": 35
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2368119_866a3c11",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 242,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "I think we should only start observing the SigninManager before calling OnExternalSigninSucceded.",
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6623cdd_1b5adbcd",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 257,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "s/account_info_.gaia/account_info_.account_id",
      "range": {
        "startLine": 257,
        "startChar": 31,
        "endLine": 257,
        "endChar": 49
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d62ea35_6cd77de4",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 314,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "Maybe: s/Bind/BindOnce?",
      "range": {
        "startLine": 314,
        "startChar": 12,
        "endLine": 314,
        "endChar": 16
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd11047f_20586da0",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 372,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "Shorter:\nreturn profile_-\u003eIsSyncAllowed() ? ProfileSyncServiceFactory::GetForProfile(profile_) : nullptr;",
      "range": {
        "startLine": 372,
        "startChar": 21,
        "endLine": 372,
        "endChar": 22
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c01405c5_03f05a34",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 379,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "Just to make sure we do not break anything in sync, it would be good to continue blocking sync with a blocker. We do the same on iOS - see:\nhttps://cs.chromium.org/chromium/src/ios/chrome/browser/signin/authentication_service.mm?rcl\u003d5f5b497f56e4d04e09730b2dd61c0f48daaa56f9\u0026l\u003d342\nhttps://cs.chromium.org/chromium/src/ios/chrome/browser/sync/sync_setup_service.cc?rcl\u003d5f5b497f56e4d04e09730b2dd61c0f48daaa56f9\u0026l\u003d188\n\nIf it turns out this is not needed, we will remove it in a follow-up CL (but then the change will be minimal and we can understand what we\u0027re doing).\n\nSo let\u0027s take that lock here:\n// Let the sync service know that setup is in progress so it doesn\u0027t start\n// syncing until the user has finished any configuration.\nProfileSyncService* profile_sync_service \u003d GetProfileSyncService();\nif (profile_sync_service)\n  sync_blocker_ \u003d profile_sync_service-\u003eGetSetupInProgressHandle();\n\nAnd release the lock in OnSyncConfirmationUIClosed.\n\nWe could also DCHECL that the lock is null in destructor to make sure that we when through OnSyncConfirmationUIClosed once after signin-in was presented.",
      "range": {
        "startLine": 379,
        "startChar": 59,
        "endLine": 379,
        "endChar": 60
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6da30181_90c3b32e",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 380,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "There is no need to observe the SigninManager::GoogleSigninSucceeded as it is called synchronously from OnExternalSigninCompleted. So you can fold the contents of GoogleSigninSucceeded in here.",
      "range": {
        "startLine": 380,
        "startChar": 19,
        "endLine": 380,
        "endChar": 44
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c9fe587_1acd438a",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 389,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "I think we should move recording these metrics in the sync_confirmation_handler.cc as (just like we do for UNDO).",
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2013019d_fb3af45c",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 403,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "May be worth adding a comment why we\u0027re not calling AbortAndDelete from here.",
      "range": {
        "startLine": 403,
        "startChar": 9,
        "endLine": 403,
        "endChar": 23
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5d09f07_4d88128b",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 410,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "DCHECK_EQ(account_info_.account_id, account_id);",
      "range": {
        "startLine": 410,
        "startChar": 49,
        "endLine": 410,
        "endChar": 54
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcfa3594_1f9b3b40",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 411,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "It is not clear to me at all when this would return false. Maybe replace it with a DCHECK.",
      "range": {
        "startLine": 411,
        "startChar": 22,
        "endLine": 411,
        "endChar": 45
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51401760_a7670583",
        "filename": "chrome/browser/ui/webui/signin/dice_turn_sync_on_helper.cc",
        "patchSetId": 13
      },
      "lineNbr": 427,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2018-01-12T15:04:15Z",
      "side": 1,
      "message": "Remove this and use token_service_-\u003eRevokeCredentials(account_info_.account_id);",
      "range": {
        "startLine": 427,
        "startChar": 28,
        "endLine": 427,
        "endChar": 0
      },
      "revId": "6220985da166e9884250c0d17f57fa9fd73220ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}