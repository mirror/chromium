{
  "comments": [
    {
      "key": {
        "uuid": "63559aaa_0945c90f",
        "filename": "ash/system/palette/palette_tray.cc",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-10-30T17:13:18Z",
      "side": 1,
      "message": "+jamescook@, +estade@ - Are either of you familiar with multiple pref registries and PrefRegistry::PUBLIC ? Do we need to call RegisterForeignPref in settings_private/prefs_util.cc in order to receive update notifications for the pref so that the Settings reflects the current pref value?",
      "revId": "9f7e212ef71a93983b93131fb7ecc14e94a86f0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5d03f88_432b1bd3",
        "filename": "ash/system/palette/palette_tray.cc",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2017-10-30T20:40:12Z",
      "side": 1,
      "message": "Yeah, in general if you have a pref used across multiple services (like browser vs. ash with --mash), one side needs to register it as PUBLIC and the other side needs to register it as foreign.\n\nIt just happens to work without the foreign part in classic ash, I think because the mojo pref service is handled in the browser, so it\u0027s not \"foreign\". I\u0027m not sure, though.\n\nFor an example of how pref permissions go in the other direction, see ash::prefs::kAccessibilityLargeCursorEnabled\n\nOr see //services/preferences/README.md\n\nBut yeah, I think code in //chrome/browser should probably be registering this pref as foreign.",
      "parentUuid": "63559aaa_0945c90f",
      "revId": "9f7e212ef71a93983b93131fb7ecc14e94a86f0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "755c7873_e49c1f59",
        "filename": "ash/system/palette/palette_tray.cc",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1160212
      },
      "writtenOn": "2017-11-01T00:51:31Z",
      "side": 1,
      "message": "I tried registering the two as foreign prefs in chrome/browser/chromeos/preferences.cc (right spot?), but it crashes in --mash (works without it). It seems they are already registered as foreigners at [1], via mojo call from ash/session_controller.cc.\n\n[1] https://cs.chromium.org/chromium/src/services/preferences/shared_pref_registry.cc?rcl\u003d1836051712700b4abfd54361aab9a13f6203dac5\u0026l\u003d148",
      "parentUuid": "d5d03f88_432b1bd3",
      "revId": "9f7e212ef71a93983b93131fb7ecc14e94a86f0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b2bebc7_7c9d558f",
        "filename": "ash/system/palette/palette_tray.cc",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2017-11-01T00:55:00Z",
      "side": 1,
      "message": "Interesting. Prefs definitely need to be registered as foreign if you go the other way (expose as public in chrome/browser, then try to read from ash). But it sounds like I was wrong. So this code looks good.",
      "parentUuid": "755c7873_e49c1f59",
      "revId": "9f7e212ef71a93983b93131fb7ecc14e94a86f0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fe13e67_26b228cd",
        "filename": "ash/system/palette/palette_tray.cc",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1160212
      },
      "writtenOn": "2017-11-01T01:05:22Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6b2bebc7_7c9d558f",
      "revId": "9f7e212ef71a93983b93131fb7ecc14e94a86f0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}