{
  "comments": [
    {
      "key": {
        "uuid": "5ec90b92_a1cce5b5",
        "filename": "chrome/browser/android/ntp/content_suggestions_notifier_service.cc",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-29T10:16:27Z",
      "side": 1,
      "message": "This is gross, but unfortunately Java\u0027s ApplicationState.onStateChangeForTesting isn\u0027t exposed to JNI. (I think that it would work, and do the right thing)",
      "revId": "709d4977cf5e618bc4b0bab290920ccf88557d97",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7172ccab_05ffd5a4",
        "filename": "chrome/browser/android/ntp/content_suggestions_notifier_service.cc",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-29T11:42:26Z",
      "side": 1,
      "message": "Hm, not quite sure I follow. Seems to me the \"correct\" solution would be to have a fake version of ApplicationStatusListener so you can inject the state you want, but that won\u0027t work since most of that class is static. We could introduce our own, fake-able wrapper around it, but that\u0027s probably not worth it.\n\nCould we just add a @CalledByNative to ApplicationState.onStateChangeForTesting? (Does the JNI stuff even work in unit tests?)",
      "parentUuid": "5ec90b92_a1cce5b5",
      "revId": "709d4977cf5e618bc4b0bab290920ccf88557d97",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "459cb7a1_5f9d0084",
        "filename": "chrome/browser/android/ntp/content_suggestions_notifier_service.cc",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-29T13:07:20Z",
      "side": 1,
      "message": "\u003e Could we just add a @CalledByNative to ApplicationState.onStateChangeForTesting? (Does the JNI stuff even work in unit tests?)\n\nIt must work, because GetState() is working somehow :)\n\nI think exposing that function to JNI is the best thing. Of course, that will require getting its owners to agree, and approvals. Do you think this CL should wait on that?",
      "parentUuid": "7172ccab_05ffd5a4",
      "revId": "709d4977cf5e618bc4b0bab290920ccf88557d97",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db917dc2_c6061185",
        "filename": "chrome/browser/android/ntp/content_suggestions_notifier_service.cc",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-29T14:03:30Z",
      "side": 1,
      "message": "Good point about GetState() :)\n\nAre we in a hurry?\nI don\u0027t think adding that @CalledByNative will be hard to sell. So if that\u0027s where we want to go eventually, then I\u0027d go for it now, unless you really need to get this landed today? But ultimately it\u0027s your call.",
      "parentUuid": "459cb7a1_5f9d0084",
      "revId": "709d4977cf5e618bc4b0bab290920ccf88557d97",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22fa1ce4_104313dd",
        "filename": "chrome/browser/android/ntp/content_suggestions_notifier_service.cc",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-30T15:10:11Z",
      "side": 1,
      "message": "I looked further into ApplicationState.onStateChangeForTesting: it can\u0027t really be exposed to C++ because it needs an Activity parameter. I\u0027ve renamed to g_â€¦ here and cleared to nullptr at the end of the test.",
      "parentUuid": "db917dc2_c6061185",
      "revId": "709d4977cf5e618bc4b0bab290920ccf88557d97",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}