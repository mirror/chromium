{
  "comments": [
    {
      "key": {
        "uuid": "0424abfc_6391c363",
        "filename": "content/shell/browser/layout_test/layout_test_message_filter.cc",
        "patchSetId": 9
      },
      "lineNbr": 190,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "nit: should this be clipboard-read for consistency/disambiguity?",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf99c877_86c3e548",
        "filename": "content/shell/browser/layout_test/layout_test_message_filter.cc",
        "patchSetId": 9
      },
      "lineNbr": 190,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0424abfc_6391c363",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a0e4304_48240914",
        "filename": "third_party/WebKit/LayoutTests/NeverFixTests",
        "patchSetId": 9
      },
      "lineNbr": 391,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": ":( Is this because the permissions now interfere with the test? It\u0027s unfortunate to disable tests. I\u0027m less concerned about the manual ones since they will never really be run anyway, but it would be good to keep the automated one if possible.\n\nCould we do something like add a switch which enables the permission in LayoutTestPermissionManager when it\u0027s passed in? I defer to blink experts though.",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "292698c3_53bae8fe",
        "filename": "third_party/WebKit/LayoutTests/NeverFixTests",
        "patchSetId": 9
      },
      "lineNbr": 391,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "Yes, the permissions now interfere with the tests.\n\nWPT @foolip already weighed in on this and said putting them here was the best place to make sure that they get reviewed later once the test driver is updated to support these tests. Note that the geolocation permission tests are also listed in this section.",
      "parentUuid": "7a0e4304_48240914",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "354980dd_b3835b1f",
        "filename": "third_party/WebKit/LayoutTests/http/tests/resources/permissions-helper.js",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "nit: perhaps this should be clipboard-read for consistency",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7dfedd6d_05ea50cd",
        "filename": "third_party/WebKit/LayoutTests/http/tests/resources/permissions-helper.js",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "354980dd_b3835b1f",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "731b9d0d_f5ecf929",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 33,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "nit: This paragraph is a little disjointed/confusing. I wonder if we could just say something like:\n\n// In Chromium we automatically grant clipboard-write and clipboard-read access is gated behind a prompt. Both clipboard read and write require the tab to be focussed to be allowed.",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b553ed1_805a24b8",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 33,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "731b9d0d_f5ecf929",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9436b450_51856503",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 97,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "nit: I guess this should probably go in the header?",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a69533b_31b260e6",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 97,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9436b450_51856503",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e17ecf8_379972b8",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 97,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-18T23:15:45Z",
      "side": 1,
      "message": "I\u0027m not sure if this made it into the header?",
      "parentUuid": "7a69533b_31b260e6",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f7bd42b_8416cd6b",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 97,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-20T04:50:18Z",
      "side": 1,
      "message": "Ah, I thought that your rewrite already covered it. But I see now that it\u0027s missing the mention about Chrome being the foreground app.",
      "parentUuid": "4e17ecf8_379972b8",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "87c22a7e_2f58bed4",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 138,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "nit: I guess you could just call RequestPermission for consistency. But it\u0027s not actually significant.",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d55f0724_8f5ec7b8",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 138,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "True, but that would be a design change from what everyone agreed upon since it would mean that write access would trigger a permission prompt.",
      "parentUuid": "87c22a7e_2f58bed4",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74ee5370_8ef515a5",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 138,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-18T23:14:46Z",
      "side": 1,
      "message": "It wouldn\u0027t actually be design change for Chrome\u0027s implementation - it would never trigger a permission prompt in Chrome because we auto-grant access. But it would give other content embedders the option to trigger a permission prompt if they chose. That is what I\u0027m thinking of.",
      "parentUuid": "d55f0724_8f5ec7b8",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3aa0c9fc_f92969f7",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 150,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "I believe this is unused? Can we delete it until it\u0027s used?",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbc8dfd1_5548ae66",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 150,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "Actually, it should be used -- HandleRead should use this. Fixed. Thanks for catching that!",
      "parentUuid": "3aa0c9fc_f92969f7",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "379b8e4b_8d15b353",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 201,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "This should be !\u003d GRANTED for safety.",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44a641dc_374074ec",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 201,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "No. That would reject the write when the clipboard permission is set to PROMPT. And we want writes to succeed in that case.",
      "parentUuid": "379b8e4b_8d15b353",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4297c4f0_ea73b6e9",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 201,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-18T23:14:46Z",
      "side": 1,
      "message": "I disagree. ASK implies that the permission has not yet been granted and that the user should first be prompted. Conceptually this is confusing and different to other permission code. If a permission is not allowed, it should not be granted. I don\u0027t see any strong reason not to have this be !\u003d allow?",
      "parentUuid": "44a641dc_374074ec",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9526121e_c4d6b3fd",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 201,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-20T04:50:18Z",
      "side": 1,
      "message": "Discussed offline. Confusion was around using the Clipboard-read permission to control clipboard-write access.\n\nCode has been changed to use the clipboard-write permission here, but we\u0027ll need a follow-up cl once we decide how to handle clipboard writes when the clipboard-read permission is denied.",
      "parentUuid": "4297c4f0_ea73b6e9",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d76fd99c_900d76e5",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 216,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "I think this is the same as HandleWritePermission. I understand they will eventually be different but it seems better not to duplicate code until necessary (they\u0027re already slightly different due to the DCHECK). Should we merge them?",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f5a091d_7bab3591",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 216,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "With them broken out, the calling structure is clearer. If someone else needs to modify this code, they won\u0027t have to figure out what needs to be untangled before making changes. Less change of someone making a change and not realizing that it affects something else as well. \n\nSo there\u0027s no real benefit (other than maybe a temporary saving of ~20bytes of code) to merging them.",
      "parentUuid": "d76fd99c_900d76e5",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "608f6663_289870f3",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 216,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-18T23:14:46Z",
      "side": 1,
      "message": "I don\u0027t think personally I agree that this is clearer - there\u0027s code duplication and it requires careful inspection . But perhaps this is a stylistic question I\u0027m not an OWNER of this code anyway so feel free to leave it as is.",
      "parentUuid": "2f5a091d_7bab3591",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82e4d1d4_6ee40bb0",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 216,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-20T04:50:18Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "608f6663_289870f3",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9726f7c2_3c8e72a9",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 218,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-15T05:00:47Z",
      "side": 1,
      "message": "This should be !\u003d GRANTED for safety.",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1dd25463_17f0f25e",
        "filename": "third_party/WebKit/Source/modules/clipboard/ClipboardPromise.cpp",
        "patchSetId": 9
      },
      "lineNbr": 218,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2017-12-18T22:36:28Z",
      "side": 1,
      "message": "See above",
      "parentUuid": "9726f7c2_3c8e72a9",
      "revId": "971e77027e6edff54695b1545c318aa5bfc1f47c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}