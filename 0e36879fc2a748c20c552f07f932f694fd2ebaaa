{
  "comments": [
    {
      "key": {
        "uuid": "e1bab734_f4f12eed",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ChromeTabbedActivity.java",
        "patchSetId": 23
      },
      "lineNbr": 518,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "nit, but I think it is better to add a static method to ChromeHomeSurveyController than to require using the constructor.  In this model, it\u0027s hard to see who owns what (i.e. what is preventing the survey controller from being GC\u0027d).  The static hides that a bit and let\u0027s the internal class do all of that necessary \"stuff\".",
      "range": {
        "startLine": 518,
        "startChar": 16,
        "endLine": 518,
        "endChar": 42
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ef3b65c_83b971c5",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 23
      },
      "lineNbr": 73,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "remove blank line.",
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7af64634_21f445e5",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 29,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T18:46:51Z",
      "side": 1,
      "message": "This should be prefixed with chrome_home_ to disambiguate between other (potential future) types of survey info bars.",
      "range": {
        "startLine": 29,
        "startChar": 61,
        "endLine": 29,
        "endChar": 86
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d26d321_a2a86cf2",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 54,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "I think the command line param should be a bit more specific (survey_override_site_id) to ensure it doesn\u0027t potentially conflict with other params.",
      "range": {
        "startLine": 54,
        "startChar": 34,
        "endLine": 54,
        "endChar": 44
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "501d8623_e5194287",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 63,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "I wouldn\u0027t keep this as a local variable.  I\u0027d just inline true in the infobar calls.",
      "range": {
        "startLine": 63,
        "startChar": 8,
        "endLine": 63,
        "endChar": 26
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "665e8d71_f68e1aab",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 64,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T18:46:51Z",
      "side": 1,
      "message": "nit: these are only really going to be used in one place (the new helper method to call #showSurveyInfoBar() and store the SharedPreference), so let\u0027s just in-line them rather than storing them in variables.",
      "range": {
        "startLine": 63,
        "startChar": 8,
        "endLine": 64,
        "endChar": 51
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "817bfd87_021df0af",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 65,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "why a callback here instead of a Runnable?  A Void callback doesn\u0027t really give us much (if it took a boolean of whether the download was successful then that would be better)",
      "range": {
        "startLine": 65,
        "startChar": 53,
        "endLine": 65,
        "endChar": 61
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46aa26c9_90063b94",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 75,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "false?",
      "range": {
        "startLine": 75,
        "startChar": 60,
        "endLine": 75,
        "endChar": 64
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b24cb49_ea463772",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 75,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T18:51:20Z",
      "side": 1,
      "message": "True is correct.\n\nWe want to show surveys to both Chrome Home and non-Chrome Home users. For Chrome Home users, this method is checking that they have had Chrome Home for at least a week.",
      "parentUuid": "46aa26c9_90063b94",
      "range": {
        "startLine": 75,
        "startChar": 60,
        "endLine": 75,
        "endChar": 64
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d540b48_859d6e3e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 75,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:56:10Z",
      "side": 1,
      "message": "Hmm...then is this class name correct?  If we\u0027re showing it for all users, then should we be calling it something more \"generic\", TabbedModeSurveyController, or something.\n\nI should really stop using so many \"quotes\".",
      "parentUuid": "8b24cb49_ea463772",
      "range": {
        "startLine": 75,
        "startChar": 60,
        "endLine": 75,
        "endChar": 64
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "909451db_89578761",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 75,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T19:04:22Z",
      "side": 1,
      "message": "We need some field trial to get the survey id from, which I had assumed was going to the  ChromeHome experiment. We will also show a survey to users in the control group.\n\nDaniel, this is probably worth worth starting a thread w/ Kingston to iron out how he plans to turn on the survey.",
      "parentUuid": "1d540b48_859d6e3e",
      "range": {
        "startLine": 75,
        "startChar": 60,
        "endLine": 75,
        "endChar": 64
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fe86a47_f5262eb9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 77,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T18:51:20Z",
      "side": 1,
      "message": "This should return false",
      "range": {
        "startLine": 77,
        "startChar": 7,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aaed2756_e73359a1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 97,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "nit, but I\u0027d do \"if (!isMainFrame) return;\" then the indent of the rest can be reduced.",
      "range": {
        "startLine": 97,
        "startChar": 23,
        "endLine": 97,
        "endChar": 24
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82c8aa77_e57bc8d3",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 100,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T18:46:51Z",
      "side": 1,
      "message": "Combine these two calls into a helper method so that it\u0027s more obvious for folks who didn\u0027t write/review this code that they have to be called together.",
      "range": {
        "startLine": 98,
        "startChar": 24,
        "endLine": 100,
        "endChar": 46
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c62ca20_5e2f2782",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 111,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:56:10Z",
      "side": 1,
      "message": "Should we only be logging this if the user has interacted with the infobar?  Maybe we should file another bug with a TODO here to refine this logic.  My off the cuff thoughts would be:\n\n1.) Don\u0027t show the infobar if the user ever clicked the action before\n2.) If the user ignored the infobar, defer for a week or something sane.\n   * After 3 ignores, back off for a month",
      "range": {
        "startLine": 111,
        "startChar": 17,
        "endLine": 111,
        "endChar": 36
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3af529b_c0cc554b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 111,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T19:04:22Z",
      "side": 1,
      "message": "I advised that for v1 we go the conservative route and treat any infobar show as a survey show for v1 since the user may be intentionally ignoring the infobar.\n\nI agree that for v2 we should develop better heuristics around whether the user has actually seen the infobar (e.g. no other infobars were showing and it was visible for at least X seconds). A follow-up bug or TODO sounds good to me.\n\nI think we also have follow-up items for:\n1. Generating user id\u0027s\n2. Clearing survey cache (either w/ app data or when clearing browsing data)\n3. Adding UMA metrics\n4. Tests",
      "parentUuid": "5c62ca20_5e2f2782",
      "range": {
        "startLine": 111,
        "startChar": 17,
        "endLine": 111,
        "endChar": 36
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "192376a6_7f8730a2",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 112,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T18:46:51Z",
      "side": 1,
      "message": "Does this actually cause a StrictMode violation? Per Ted\u0027s comment on your CL to add the Chrome Home enabled date, \"apply() shouldn\u0027t block the UI for writes.\"",
      "range": {
        "startLine": 112,
        "startChar": 13,
        "endLine": 112,
        "endChar": 74
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "874957a6_919281bf",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 122,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "I\u0027m not familiar enough with try with resources, but can this just be \"return sharedPreferences.getBoolean(SURVEY_INFO_BAR_DISPLAYED, false);\" here?",
      "range": {
        "startLine": 122,
        "startChar": 12,
        "endLine": 122,
        "endChar": 32
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce6dac78_e9dd1066",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/OWNERS",
        "patchSetId": 23
      },
      "lineNbr": 2,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-03T18:46:51Z",
      "side": 1,
      "message": "It\u0027s atypical for non-committers to be OWNERS. I think that for now this should just be me -- or me and Matt, or me and Matt.\n\nAlso, let\u0027s end this file with comments indicating the correct component and OS:\n\n# COMPONENT: UI\u003eBrowser\u003eMobile\n# OS: Android",
      "range": {
        "startLine": 2,
        "startChar": 0,
        "endLine": 2,
        "endChar": 23
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa113582_b1d879cb",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/SurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 38,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "from my other comment, I think it would be better to pass a boolean instead of not calling it (otherwise replacing this with something named onSuccessRunnable is clearer).",
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "491f348d_068b362e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/SurveyController.java",
        "patchSetId": 23
      },
      "lineNbr": 63,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "no needed.",
      "range": {
        "startLine": 63,
        "startChar": 8,
        "endLine": 63,
        "endChar": 14
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6e3fff1_9dfe023b",
        "filename": "chrome/android/java/strings/android_chrome_strings.grd",
        "patchSetId": 23
      },
      "lineNbr": 2672,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "why two strings?  Seems like we could use the SpanApplier here and combine the two strings.  An example of a string that includes the anchor markers: https://cs.chromium.org/chromium/src/chrome/android/java/strings/android_chrome_strings.grd?q\u003dandroid_history_other_forms_of_history\u0026sq\u003dpackage:chromium\u0026l\u003d727",
      "range": {
        "startLine": 2672,
        "startChar": 21,
        "endLine": 2672,
        "endChar": 27
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7bab22a6_1d77c673",
        "filename": "chrome/browser/ui/android/infobars/survey_infobar.cc",
        "patchSetId": 23
      },
      "lineNbr": 24,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "I\u0027d put this below the constructor",
      "range": {
        "startLine": 24,
        "startChar": 3,
        "endLine": 24,
        "endChar": 24
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a5e392a_ceacf778",
        "filename": "chrome/browser/ui/android/infobars/survey_infobar.cc",
        "patchSetId": 23
      },
      "lineNbr": 38,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "I\u0027d probably add \"\u0026\u0026 site_id_ \u003d\u003d delegate-\u003eGetSiteId()\" as that is more uniquely identifying.",
      "range": {
        "startLine": 38,
        "startChar": 54,
        "endLine": 38,
        "endChar": 55
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c69a03d3_9c0038a9",
        "filename": "chrome/browser/ui/android/infobars/survey_infobar.cc",
        "patchSetId": 23
      },
      "lineNbr": 45,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "I\u0027d call this display_logo_resource_id_ here and the other implied places (up in the java file too)",
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e8837c7_8127a5e4",
        "filename": "chrome/browser/ui/android/infobars/survey_infobar.cc",
        "patchSetId": 23
      },
      "lineNbr": 72,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "the method ordering should exactly match in the .cc file as the .h, so this needs to be moved up (verify the rest of the file too)",
      "range": {
        "startLine": 72,
        "startChar": 42,
        "endLine": 72,
        "endChar": 43
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7eeb3c7_208b2280",
        "filename": "chrome/browser/ui/android/infobars/survey_infobar.cc",
        "patchSetId": 23
      },
      "lineNbr": 72,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "the method ordering should exactly match in the .cc file as the .h, so this needs to be moved up (verify the rest of the file too)",
      "range": {
        "startLine": 72,
        "startChar": 42,
        "endLine": 72,
        "endChar": 43
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "881ec175_f369f82a",
        "filename": "chrome/browser/ui/android/infobars/survey_infobar.h",
        "patchSetId": 23
      },
      "lineNbr": 16,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-03T18:43:32Z",
      "side": 1,
      "message": "add class level documentation for the intent of this class",
      "range": {
        "startLine": 16,
        "startChar": 6,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "0e36879fc2a748c20c552f07f932f694fd2ebaaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}