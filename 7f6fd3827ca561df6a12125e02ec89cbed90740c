{
  "comments": [
    {
      "key": {
        "uuid": "d233e042_8f77c58b",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 28,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T13:24:03Z",
      "side": 1,
      "message": "Could you please explain why this has value \"4\"? Can this value be determined at runtime?",
      "range": {
        "startLine": 28,
        "startChar": 10,
        "endLine": 28,
        "endChar": 33
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0070706_8ab8e39f",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 28,
      "author": {
        "id": 1178139
      },
      "writtenOn": "2017-05-17T14:05:56Z",
      "side": 1,
      "message": "I added a comment to explain the value. I don\u0027t know if there is a good way to determine this at runtime. I thought about using counter_.size() when all statistics are calculated by counters but that doesn\u0027t work if one of the services doesn\u0027t exist and StatisticsCallbackFailure() is called.",
      "parentUuid": "d233e042_8f77c58b",
      "range": {
        "startLine": 28,
        "startChar": 10,
        "endLine": 28,
        "endChar": 33
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90e0f0a1_4d6e8efd",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 140,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T13:24:03Z",
      "side": 1,
      "message": "Maybe rename this to OnCounterResult or HandleCounterResult",
      "range": {
        "startLine": 140,
        "startChar": 34,
        "endLine": 140,
        "endChar": 49
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b48f8368_9a2f83a6",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 140,
      "author": {
        "id": 1178139
      },
      "writtenOn": "2017-05-17T14:05:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "90e0f0a1_4d6e8efd",
      "range": {
        "startLine": 140,
        "startChar": 34,
        "endLine": 140,
        "endChar": 49
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d809fd6e_12bca3b6",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 145,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T13:24:03Z",
      "side": 1,
      "message": "Consider extracting static_cast\u003cbrowsing_data::BrowsingDataCounter::FinishedResult*\u003e(result.get()) to a local variable to make the code more readable",
      "range": {
        "startLine": 145,
        "startChar": 14,
        "endLine": 145,
        "endChar": 25
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75ad6a6b_00dec56b",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 145,
      "author": {
        "id": 1178139
      },
      "writtenOn": "2017-05-17T14:05:56Z",
      "side": 1,
      "message": "I extracted a variable but it still needed three lines, so I also added a using declaration for browsing_data::BrowsingDataCounter",
      "parentUuid": "d809fd6e_12bca3b6",
      "range": {
        "startLine": 145,
        "startChar": 14,
        "endLine": 145,
        "endChar": 25
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e42637fc_4a5df439",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 145,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T14:33:29Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "75ad6a6b_00dec56b",
      "range": {
        "startLine": 145,
        "startChar": 14,
        "endLine": 145,
        "endChar": 25
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dcdd196e_ba853174",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T13:24:03Z",
      "side": 1,
      "message": "I think this should be a DCHECK and not an if after getting the pref:\nDCHECK_EQ(pref \u003d\u003d browsing_data::BookmarkCounter::kPrefName, pref)",
      "range": {
        "startLine": 148,
        "startChar": 14,
        "endLine": 148,
        "endChar": 27
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57707ebd_e4f16f4b",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1178139
      },
      "writtenOn": "2017-05-17T14:05:56Z",
      "side": 1,
      "message": "I\u0027m planning to extend this if statement with more cases when I add History and PasswordCounters, so I think it can stay this way. I added a TODO to explain this",
      "parentUuid": "dcdd196e_ba853174",
      "range": {
        "startLine": 148,
        "startChar": 14,
        "endLine": 148,
        "endChar": 27
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b733da62_e1367f8a",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T14:33:29Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "57707ebd_e4f16f4b",
      "range": {
        "startLine": 148,
        "startChar": 14,
        "endLine": 148,
        "endChar": 27
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bedbe38b_6649f7f1",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 173,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T13:24:03Z",
      "side": 1,
      "message": "Should done_callback be reset after it is run once?",
      "range": {
        "startLine": 173,
        "startChar": 6,
        "endLine": 173,
        "endChar": 20
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52c626be_4be6e900",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 173,
      "author": {
        "id": 1178139
      },
      "writtenOn": "2017-05-17T14:05:56Z",
      "side": 1,
      "message": "StartAggregator() could be called multiple times, so I don\u0027t think I should reset it.",
      "parentUuid": "bedbe38b_6649f7f1",
      "range": {
        "startLine": 173,
        "startChar": 6,
        "endLine": 173,
        "endChar": 20
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f55b09a5_4faffb07",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 173,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-05-17T14:33:29Z",
      "side": 1,
      "message": "Is this a pattern that is actually supported correctly? Does this class support multiple successive / parallel calls to StartAggregator? For example, what happens if the caller calls StartAggregator a second time, right after the bookmarks values are aggregated?",
      "parentUuid": "52c626be_4be6e900",
      "range": {
        "startLine": 173,
        "startChar": 6,
        "endLine": 173,
        "endChar": 20
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6d51ebc_260db89d",
        "filename": "chrome/browser/profiles/profile_statistics_aggregator.cc",
        "patchSetId": 9
      },
      "lineNbr": 173,
      "author": {
        "id": 1183839
      },
      "writtenOn": "2017-05-18T08:48:37Z",
      "side": 1,
      "message": "Calling StartAggregator multiple times should work. tracker_.TryCancelAll()  and counters_.clear() will cancel tasks that haven\u0027t finished yet. Then the tasks are restarted. There is a test that calls AddCallbackAndStartAggregator twice. In practice it should happen very rarely that the tasks are still running when it is called again. Maybe if you click \"Remove this profile\" and then close the browser. But I will remove the calculation on shutdown anyway.\n\nI noticed that it is weird, that the class starts itself when it is constructed and there is an additional method to start it manually. I removed the call to AddCallbackAndStartAggregator from the constructor.",
      "parentUuid": "f55b09a5_4faffb07",
      "range": {
        "startLine": 173,
        "startChar": 6,
        "endLine": 173,
        "endChar": 20
      },
      "revId": "7f6fd3827ca561df6a12125e02ec89cbed90740c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}