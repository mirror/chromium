{
  "comments": [
    {
      "key": {
        "uuid": "3eb17aef_7047f5b4",
        "filename": "DEPS",
        "patchSetId": 2
      },
      "lineNbr": 737,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-10-11T23:21:26Z",
      "side": 1,
      "message": "Why is the --force needed?\n\nAs an aside, the typing of `def Update(force\u003dFalse)` in vs_toolchain.py is awful :); that should probably at least be force\u003d\u0027\u0027 to be consistently-typed.",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5d0335d_8e8cfac5",
        "filename": "DEPS",
        "patchSetId": 2
      },
      "lineNbr": 737,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-12T02:33:25Z",
      "side": 1,
      "message": "We used to not have hook conditions, so the hook used to run (and in webrtc pdfium etc still does) on all platforms. So it needs to early-exit if the current OS isn\u0027t Windows. But now we sometimes do want to run it on non-windows, so --force skips the \"if not on win, exit\" logic.",
      "parentUuid": "3eb17aef_7047f5b4",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce9364b1_86b4b8ca",
        "filename": "DEPS",
        "patchSetId": 2
      },
      "lineNbr": 737,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-10-12T21:44:40Z",
      "side": 1,
      "message": "Why not remove the early-exit logic in vs_toolchain.py, instead, then?",
      "parentUuid": "f5d0335d_8e8cfac5",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b21d8f3b_a49e7219",
        "filename": "DEPS",
        "patchSetId": 2
      },
      "lineNbr": 737,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-12T22:08:50Z",
      "side": 1,
      "message": "Excellent question: because v8webrtcpdfium call this script unconditionally and still rely on the early exit. Once conditionals are used everywhere, we can remove the logic, but not yet.",
      "parentUuid": "ce9364b1_86b4b8ca",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1442adb6_bca7da8a",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 409,
      "author": {
        "id": 1002927
      },
      "writtenOn": "2017-10-12T18:41:44Z",
      "side": 1,
      "message": "As for auto-install, I think this comment is maybe good enough. Maybe we could add it to build/install-build-deps.sh by default when this becomes widely used.",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6486d38_7a617f63",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2017-10-11T22:31:27Z",
      "side": 1,
      "message": "Do we really want to silently fail here? Return code is ignored - raise Exception instead?",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2078de6b_fc85ed43",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-11T22:42:04Z",
      "side": 1,
      "message": "Return code is passed to sys.exit(), no?",
      "parentUuid": "d6486d38_7a617f63",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "970b876c_fb5352c9",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-10-11T23:21:26Z",
      "side": 1,
      "message": "Hm. I\u0027m not wild about the whoe idea of setting up a case-insensitive mount.\n\nDo we have any idea if or when they\u0027ll fix their SDK? I thought I heard someone say they were working on it.",
      "parentUuid": "2078de6b_fc85ed43",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9edbf932_697808ce",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2017-10-11T23:25:52Z",
      "side": 1,
      "message": "It doesn\u0027t look like it - see line 44 which calls Update() and ignores return code.",
      "parentUuid": "2078de6b_fc85ed43",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66bd9056_bfa4b910",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2017-10-11T23:25:52Z",
      "side": 1,
      "message": "It doesn\u0027t look like it - see line 44 which calls Update() and ignores return code.",
      "parentUuid": "2078de6b_fc85ed43",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dff7a360_ba495a19",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-10-11T23:57:39Z",
      "side": 1,
      "message": "I think you need to fix line 44, then. Update() is also called from main(), where it does the right thing.",
      "parentUuid": "9edbf932_697808ce",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40ae2e93_c5f0401c",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-12T02:33:25Z",
      "side": 1,
      "message": "What Dirk said -- I think line 44 should throw then, since it incorrectly ignores the result of Update() atm.\n\nI can make that change as part of this Cl.\n\nI did test that things work locally when running `gclient runhooks` with and without ciopfs installed.\n\nDirk: I probably told you that. I talked to Microsoft folks (probably a year ago by now, or longer) and they change some things, but atm things are very much not fixed:\n\nthakis@thakis:~/src/chrome/src$ ack windows.h third_party/depot_tools/win_toolchain/vs_files/9bc7ccbf9f4bd50d4a3bd185e8ca94ff1618de0b/win_sdk/ | wc -l\n843\nthakis@thakis:~/src/chrome/src$ find third_party/depot_tools/win_toolchain/vs_files/9bc7ccbf9f4bd50d4a3bd185e8ca94ff1618de0b/ -iname windows.h\nthird_party/depot_tools/win_toolchain/vs_files/9bc7ccbf9f4bd50d4a3bd185e8ca94ff1618de0b/win_sdk/Include/10.0.15063.0/um/Windows.h\n\n\nNote that this is a user-space mount where nobody needs to enter a root password or anything -- you just say \"target_os\u003d[\u0027win\u0027]\", sync, and things Just Work. I actually think this is a pretty nice way to go about things. (The SDK using correct case in includes would be even nicer of course, but we don\u0027t have that much control over that.)",
      "parentUuid": "dff7a360_ba495a19",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d78cb720_18f33a01",
        "filename": "build/vs_toolchain.py",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-12T18:25:32Z",
      "side": 1,
      "message": "\u003e I can make that change as part of this Cl.\n\nOn 2nd thought, I\u0027ll do it in a separate CL: It could make the script fail even in win-on-win builds; maybe we currently already ignore some error from Update() without knowing about it. So I\u0027d prefer to do that in a separate change, that can be reverted separately.",
      "parentUuid": "40ae2e93_c5f0401c",
      "revId": "df86de94f2be00cfc3684813d1f113e9c3b3fb91",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}