{
  "comments": [
    {
      "key": {
        "uuid": "282b3dae_89a4da8f",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 250,
      "author": {
        "id": 1001310
      },
      "writtenOn": "2017-11-15T06:23:15Z",
      "side": 1,
      "message": "I think you still need the \u003d\u003d OMNIBOX_API_EXTENSION test here.",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "411f832e_587a8864",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 250,
      "author": {
        "id": 1001310
      },
      "writtenOn": "2017-11-15T21:36:19Z",
      "side": 1,
      "message": "I think you need it here because you shouldn\u0027t tell an extension to delete the suggestion unless it was an extension keyword that returned the suggestion.  I don\u0027t see any restriction in this function that limits it just to extension keywords.",
      "parentUuid": "282b3dae_89a4da8f",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95cb74c7_b2916b5d",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 250,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-11-17T19:42:48Z",
      "side": 1,
      "message": "Ah, I understand this now. If we just had IsKeywordEnabled() check alone, it\u0027s possible that the \n!\u003d TemplateURL::OMNIBOX_API_EXTENSION passes first, so we need the outer \u003d\u003d TemplateURL::OMNIBOX_API_EXTENSION).",
      "parentUuid": "411f832e_587a8864",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc294067_a6d57bc7",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 315,
      "author": {
        "id": 1001310
      },
      "writtenOn": "2017-11-15T06:23:15Z",
      "side": 1,
      "message": "I think you still need the \u003d\u003d OMNIBOX_API_EXTENSION test here.",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fedf5a98_189ba9a2",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 315,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-11-15T19:56:36Z",
      "side": 1,
      "message": "I removed it because I embedded the check inside the IsKeywordEnabled(). See line 597. That should work, right?",
      "parentUuid": "cc294067_a6d57bc7",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "acf2dc46_23cbabc0",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 315,
      "author": {
        "id": 1001310
      },
      "writtenOn": "2017-11-15T21:36:19Z",
      "side": 1,
      "message": "That should work, you\u0027re right.  Mostly.  Sorry I missed that.\n\nThere is one subtle behavioral change here however.  I\u0027m not sure if you care:\nPreviously, this block here erases matches for keywords for which we know they are not enabled.  (I.e., extensions_delegate is valid and says the keyword is not enabled)\nThe new code will erase matches for keywords for which we know they are not enabled AND also erase matches for keywords for which we cannot check.  That is, if extensions_delegate is false, we erase the match.  Previously we didn\u0027t.\n\nOff the top of my head, I\u0027m not sure which behavior is correct.  (I don\u0027t know what it means that extension_delegate is false.)  Can you decide?",
      "parentUuid": "fedf5a98_189ba9a2",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62595652_3803f0f0",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 315,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-11-16T19:01:33Z",
      "side": 1,
      "message": "Thanks for pointing this out. In short, I think this should be okay, but I\u0027ll have Istiaque double check. \n\nThe check before:\n\nextension_delegate_ \u0026\u0026 !extensions_delegate_-\u003eIsEnabledExtension(..)\n\nis essentially the same now as:\n\n!(extension_delegate_ \u0026\u0026 extensions_delegate_-\u003eIsEnabledExtension(..)) which is\n\n!extension_delegate_ || !extensions_delegate_-\u003eIsEnabledExtension(..)).\n\nIf |extension_delegate| is false and doesn\u0027t exist, then IsKeywordEnabled() should still return false.",
      "parentUuid": "acf2dc46_23cbabc0",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af602985_64cd7a8f",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 315,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-11-17T19:42:48Z",
      "side": 1,
      "message": "Btw, I don\u0027t feel strongly about just using !IsKeywordEnabled(template_url). I did the refactor to avoid repeating checks. If it\u0027s safer and more correct to expand this check out to avoid the !extension_delegate_ check, I\u0027m fine doing that.\n\nwdyt Mark?",
      "parentUuid": "62595652_3803f0f0",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b60381e7_839c0813",
        "filename": "components/omnibox/browser/keyword_provider.cc",
        "patchSetId": 7
      },
      "lineNbr": 315,
      "author": {
        "id": 1001310
      },
      "writtenOn": "2017-11-17T19:55:51Z",
      "side": 1,
      "message": "Yeah, it looks like these checks are different enough that it might be worth having logic embedded in each function.  I\u0027m okay with reverting adding the helper function and keeping the existing logic.  Either way.  If you revert, you won\u0027t have to figure out the details about when extension_delegate_ is around... (assuming you\u0027re willing to trust the old code)",
      "parentUuid": "af602985_64cd7a8f",
      "revId": "86265cb6baac7dc486a5738a57a436e199729dbc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}