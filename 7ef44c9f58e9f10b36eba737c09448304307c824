{
  "comments": [
    {
      "key": {
        "uuid": "36eda418_66c07e25",
        "filename": "chrome/browser/resource_coordinator/tab_manager.cc",
        "patchSetId": 4
      },
      "lineNbr": 1187,
      "author": {
        "id": 1112850
      },
      "writtenOn": "2017-11-06T19:48:53Z",
      "side": 1,
      "message": "Scott, can you take a look at this fix here? Given the crash report from http://crbug.com/781669, |TabUIHelper::FromWebContents(contents)| giving nullptr or some wrong address is the only reason that I can think of.",
      "range": {
        "startLine": 1184,
        "startChar": 54,
        "endLine": 1187,
        "endChar": 46
      },
      "revId": "7ef44c9f58e9f10b36eba737c09448304307c824",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f2f841e_480003d3",
        "filename": "chrome/browser/resource_coordinator/tab_manager.cc",
        "patchSetId": 4
      },
      "lineNbr": 1187,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2017-11-06T20:02:33Z",
      "side": 1,
      "message": "That\u0027s not how I read the crash report.\n\nYou attach TabUIHelper in tab_helpers.cc, which means that it is attached to every tab in every browser window.\n\nThe crash has a \"BrowserPluginGuest\", which is a WebContents nested inside a WebContents. If that guest WebContents is the one for which your code is being called, of course it won\u0027t have the TabUIHelper as it\u0027s not a WebContents being used as a tab in a browser window.\n\nPlease think through the implications of there being guest WebContentses, and adjust your code accordingly. Perhaps calling CreateForWC here is appropriate, but do so because you fully understand what is going on rather than guessing that it\u0027s being called too early.",
      "parentUuid": "36eda418_66c07e25",
      "range": {
        "startLine": 1184,
        "startChar": 54,
        "endLine": 1187,
        "endChar": 46
      },
      "revId": "7ef44c9f58e9f10b36eba737c09448304307c824",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3832d7a_7498bbde",
        "filename": "chrome/browser/resource_coordinator/tab_manager.cc",
        "patchSetId": 4
      },
      "lineNbr": 1187,
      "author": {
        "id": 1112850
      },
      "writtenOn": "2017-11-06T20:11:48Z",
      "side": 1,
      "message": "For the nested WebContents, it should never get here. TabManager::MaybeThrottleNavigation is only called by BackgroundTabNavigationThrottle and we have check to make sure there is no opener:\nhttps://cs.chromium.org/chromium/src/chrome/browser/resource_coordinator/background_tab_navigation_throttle.cc?l\u003d36\n\nDoes that check actually cover the BrowserPluginGuest situation? If not, I will add the check for that. Basically we don\u0027t want to delay navigation if there is nested WebContents.",
      "parentUuid": "3f2f841e_480003d3",
      "range": {
        "startLine": 1184,
        "startChar": 54,
        "endLine": 1187,
        "endChar": 46
      },
      "revId": "7ef44c9f58e9f10b36eba737c09448304307c824",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}