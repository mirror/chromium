var aa=navigator,ba=Boolean,ca=undefined,da=encodeURIComponent,ea=parseInt,i=String,m=Number,fa=Object,ga=document,ha=decodeURIComponent,ja=isNaN,ka=alert,la=screen,n=Math;function ma(a,b){return a.scrollTop=b}function na(a,b){return a.toString=b}function oa(a,b){return a.onreadystatechange=b}function pa(a,b){return a.length=b}function qa(a,b){return a.title=b}function ra(a,b){return a.position=b}function sa(a,b){return a.create=b}function ta(a,b){return a.selectedIndex=b}function o(a,b){return a.className=
b}function q(a,b){return a.width=b}function ua(a,b){return a.text=b}function va(a,b){return a.checked=b}function wa(a,b){return a.next=b}function xa(a,b){return a.innerHTML=b}function ya(a,b){return a.value=b}function za(a,b){return a.disabled=b}function Aa(a,b){return a.dispatchEvent=b}function Ba(a,b){return a.currentTarget=b}function Ca(a,b){return a.backgroundColor=b}function Da(a,b){return a.left=b}function Ea(a,b){return a.target=b}function Fa(a,b){return a.screenX=b}function Ga(a,b){return a.screenY=
b}function Ha(a,b){return a.send=b}function Ia(a,b){return a.remove=b}function Ja(a,b){return a.keyCode=b}function Ka(a,b){return a.padding=b}function La(a,b){return a.removeNode=b}function Ma(a,b){return a.type=b}function Na(a,b){return a.clear=b}function Oa(a,b){return a.border=b}function Pa(a,b){return a.reset=b}function Qa(a,b){return a.name=b}function Ra(a,b){return a.zIndex=b}function Sa(a,b){return a.overflow=b}function r(a,b){return a.display=b}function Ta(a,b){return a.height=b}function Ua(a,
b){return a.borderColor=b}function Va(a,b){return a.visibility=b}var Wa="scrollTop",Xa="activeElement",t="length",Ya="title",_P="prototype",Za="relatedTarget",$a="className",u="width",ab="index",bb="text",cb="checked",db="slice",fb="nodeType",gb="document",hb="data",ib="responseText",jb="offsetWidth",v="value",kb="location",lb="item",mb="button",nb="offsetLeft",ob="message",pb="hasOwnProperty",qb="dispatchEvent",w="style",rb="capture",sb="nodeName",x="body",tb="left",ub="ownerDocument",vb="view",
wb="parent",y="target",xb="screenX",yb="screenY",zb="lastChild",Ab="readyState",Bb="options",Cb="charCode",Db="keyCode",Eb="firstChild",Fb="scrollLeft",Gb="compatMode",Hb="bottom",Ib="currentStyle",Jb="href",Kb="console",Lb="rows",Mb="type",Nb="childNodes",Ob="tagName",Pb="defaultView",Qb="attributes",Rb="name",z="parentNode",Sb="fileName",Tb="display",Ub="nextSibling",Vb="offsetTop",Wb="contentWindow",A="height",Xb="offsetHeight",Yb="nodeValue",Zb="frames",$b="clientX",ac="clientY",bc="documentElement",
cc="right",dc=dc||{},B=this;var fc=function(a,b){var c=a.split("."),d=B,e;if(!(c[0]in d)&&d.execScript)d.execScript("var "+c[0]);while(e=c.shift())if(!c[t]&&ec(b))d[e]=b;else d=d[e]?d[e]:(d[e]={})},gc=function(a){var b=a.split("."),c=B;for(var d;d=b.shift();)if(c[d])c=c[d];else return null;return c},hc=function(){};var jc=function(a){var b=typeof a;if(b=="object")if(a){if(typeof a[t]=="number"&&typeof a.splice!="undefined"&&!ic(a,"length"))return"array";if(typeof a.call!="undefined")return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b};if(fa[_P].propertyIsEnumerable)var ic=function(a,b){return fa[_P].propertyIsEnumerable.call(a,b)};else ic=function(a,b){if(b in a)for(var c in a)if(c==b)return true;return false};var ec=function(a){return typeof a!="undefined"};var kc=function(a){return jc(a)=="array"},lc=function(a){var b=jc(a);return b=="array"||b=="object"&&typeof a[t]=="number"},mc=function(a){return typeof a=="string"},nc=function(a){return typeof a==
"number"},oc=function(a){return jc(a)=="function"},pc=function(a){var b=jc(a);return b=="object"||b=="array"||b=="function"},sc=function(a){if(a[pb]&&a.hasOwnProperty(qc))return a[qc];if(!a[qc])a[qc]=++rc;return a[qc]},qc="closure_hashCode_",rc=0,tc=function(a){var b=jc(a);if(b=="object"||b=="array"){if(a.clone)return a.clone();var c=b=="array"?[]:{};for(var d in a)c[d]=tc(a[d]);return c}return a},D=function(a,b){var c=a.NF;if(arguments[t]>2){var d=Array[_P][db].call(arguments,2);if(c)d.unshift.apply(d,
c);c=d}b=a.PF||b;a=a.OF||a;var e,f=b||B;e=c?function(){var g=Array[_P][db].call(arguments);g.unshift.apply(g,c);return a.apply(f,g)}:function(){return a.apply(f,arguments)};e.NF=c;e.PF=b;e.OF=a;return e},uc=function(a){var b=Array[_P][db].call(arguments,1);b.unshift(a,null);return D.apply(null,b)},vc=Date.now||function(){return(new Date).getTime()},E=function(a,b){var c=b||{};for(var d in c)a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),c[d]);return a},wc=function(a,b){fc(a,b)},xc=function(a,b,c){a[b]=
c};if(!Function[_P].apply)Function[_P].apply=function(a,b){var c=[],d,e;if(!a)a=B;if(!b)b=[];for(var f=0;f<b[t];f++)c[f]="args["+f+"]";e="oScope.__applyTemp__.peek().("+c.join(",")+");";if(!a.__applyTemp__)a.__applyTemp__=[];a.__applyTemp__.push(this);d=eval(e);a.__applyTemp__.pop();return d};Function[_P].bind=function(a){if(arguments[t]>1){var b=Array[_P][db].call(arguments,1);b.unshift(this,a);return D.apply(null,b)}else return D(this,a)};Function[_P].inherits=function(a){F(this,a)};var F=function(a,
b){function c(){}c.prototype=b[_P];a.B=b[_P];a.prototype=new c;a[_P].constructor=a};var yc=function(a,b){this.x=ec(a)?m(a):ca;this.y=ec(b)?m(b):ca};yc[_P].clone=function(){return new yc(this.x,this.y)};na(yc[_P],function(){return"("+this.x+", "+this.y+")"});var zc=function(a,b){q(this,ec(a)?m(a):ca);Ta(this,ec(b)?m(b):ca)},Ac=function(a,b){if(a==b)return true;if(!a||!b)return false;return a[u]==b[u]&&a[A]==b[A]};zc[_P].clone=function(){return new zc(this[u],this[A])};na(zc[_P],function(){return"("+this[u]+" x "+this[A]+")"});zc[_P].To=function(){return this[u]/this[A]};zc[_P].ceil=function(){q(this,n.ceil(this[u]));Ta(this,n.ceil(this[A]));return this};zc[_P].bj=function(a){return this[u]<=a[u]&&this[A]<=a[A]};zc[_P].floor=function(){q(this,n.floor(this[u]));
Ta(this,n.floor(this[A]));return this};zc[_P].round=function(){q(this,n.round(this[u]));Ta(this,n.round(this[A]));return this};zc[_P].scale=function(a){this.width*=a;this.height*=a;return this};zc[_P].dt=function(a){var b=this.To()>a.To()?a[u]/this[u]:a[A]/this[A];return this.scale(b)};var Bc=function(a,b){return a.indexOf(b)==0},Cc=function(a,b){var c=a[t]-b[t];return c>=0&&a.lastIndexOf(b,c)==c},Dc=function(a){for(var b=1;b<arguments[t];b++){var c=i(arguments[b]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,c)}return a},Ec=function(a){return/^[\s\xa0]*$/.test(a)},Fc=function(a){return!/[^a-zA-Z0-9]/.test(a)},Gc=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")},Hc=function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};var Ic=/^[a-zA-Z0-9\-_.!~*'()]*$/,Jc=function(a){a=i(a);if(!Ic.test(a))return da(a);
return a},Kc=function(a){return ha(a.replace(/\+/g," "))},Lc=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")},Rc=function(a,b){if(b)return a.replace(Mc,"&amp;").replace(Nc,"&lt;").replace(Oc,"&gt;").replace(Pc,"&quot;");else{if(!Qc.test(a))return a;if(a.indexOf("&")!=-1)a=a.replace(Mc,"&amp;");if(a.indexOf("<")!=-1)a=a.replace(Nc,"&lt;");if(a.indexOf(">")!=-1)a=a.replace(Oc,"&gt;");if(a.indexOf('"')!=-1)a=a.replace(Pc,"&quot;");return a}},Mc=/&/g,Nc=/</g,Oc=/>/g,Pc=/\"/g,Qc=/[&<>\"]/,
Vc=function(a){if(Sc(a,"&"))return"document"in B&&!Sc(a,"<")?Tc(a):Uc(a);return a},Tc=function(a){var b=B.document.createElement("a");b.innerHTML=a;if(b.normalize)b.normalize();a=b.firstChild.nodeValue;b.innerHTML="";return a},Uc=function(a){return a.replace(/&([^;]+);/g,function(b,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if(c.charAt(0)=="#"){var d=m("0"+c.substr(1));if(!ja(d))return i.fromCharCode(d)}return b}})},Wc=function(a,b){return Lc(a.replace(/  /g,
" &#160;"),b)},Xc=function(a,b,c){if(c)a=Vc(a);if(a[t]>b)a=a.substring(0,b-3)+"...";if(c)a=Rc(a);return a},Yc={"\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\x0B",'"':'\\"',"'":"\\'","\\":"\\\\"},$c=function(a){a=i(a);if(a.quote)return a.quote();else{var b=['"'];for(var c=0;c<a[t];c++)b[c+1]=Zc(a.charAt(c));b.push('"');return b.join("")}},Zc=function(a){if(a in Yc)return Yc[a];var b=a,c=a.charCodeAt(0);if(c>31&&c<127)b=a;else{if(c<256){b="\\x";if(c<16||c>256)b+="0"}else{b=
"\\u";if(c<4096)b+="0"}b+=c.toString(16).toUpperCase()}return Yc[a]=b},Sc=function(a,b){return a.indexOf(b)!=-1},ad=function(a){return i(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};var bd=function(a,b,c){var d=n.floor(a),e=i(d);return(new Array(n.max(0,b-e[t])+1)).join("0")+(ec(c)?a.toFixed(c):a)},cd=function(a){return a==null?"":i(a)},dd=function(){return n.floor(n.random()*2147483648).toString(36)+(n.floor(n.random()*2147483648)^(new Date).getTime()).toString(36)},
fd=function(a,b){var c=0,d=Hc(i(a)).split("."),e=Hc(i(b)).split("."),f=n.max(d[t],e[t]);for(var g=0;c==0&&g<f;g++){var h=d[g]||"",j=e[g]||"",k=new RegExp("(\\d*)(\\D*)","g"),l=new RegExp("(\\d*)(\\D*)","g");do{var p=k.exec(h)||["","",""],s=l.exec(j)||["","",""];if(p[0][t]==0&&s[0][t]==0)break;var C=p[1][t]==0?0:ea(p[1],10),K=s[1][t]==0?0:ea(s[1],10);c=ed(C,K)||ed(p[2][t]==0,s[2][t]==0)||ed(p[2],s[2])}while(c==0)}return c},ed=function(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};var gd={},hd,G,id,jd,kd,ld,md,nd,od,pd,qd,rd;(function(){var a=false,b=false,c=false,d=false,e=false,f=false,g=false,h=false,j=false,k="";if(B.navigator){var l=aa.userAgent;a=typeof opera!="undefined";b=!a&&l.indexOf("MSIE")!=-1;c=!a&&l.indexOf("WebKit")!=-1;j=c&&l.indexOf("Mobile")!=-1;d=!a&&aa.product=="Gecko"&&!c;e=d&&aa.vendor=="Camino";var p,s;if(a)p=opera.version();else{if(d)s=/rv\:([^\);]+)(\)|;)/;else if(b)s=/MSIE\s+([^\);]+)(\)|;)/;else if(c)s=/WebKit\/(\S+)/;if(s){s.test(l);p=RegExp.$1}}k=
aa.platform;f=k.indexOf("Mac")!=-1;g=k.indexOf("Win")!=-1;h=k.indexOf("Linux")!=-1}hd=a;G=b;id=d;jd=e;kd=c;ld=kd;md=p;nd=k;od=f;pd=g;qd=h;rd=j})();var sd=function(a){return fd(md,a)>=0};var td=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);if(Array.indexOf)return Array.indexOf(a,b,c);var d=c==null?0:(c<0?n.max(0,a[t]+c):c);for(var e=d;e<a[t];e++)if(e in a&&a[e]===b)return e;return-1},ud=function(a,b,c){if(a.forEach)a.forEach(b,c);else if(Array.forEach)Array.forEach(a,b,c);else{var d=a[t],e=mc(a)?a.split(""):a;for(var f=0;f<d;f++)if(f in e)b.call(c,e[f],f,a)}},vd=function(a,b,c){if(a.filter)return a.filter(b,c);if(Array.filter)return Array.filter(a,b,c);var d=a[t],e=[],f=0,g=
mc(a)?a.split(""):a;for(var h=0;h<d;h++)if(h in g){var j=g[h];if(b.call(c,j,h,a))e[f++]=j}return e},wd=function(a,b,c){if(a.map)return a.map(b,c);if(Array.map)return Array.map(a,b,c);var d=a[t],e=[],f=0,g=mc(a)?a.split(""):a;for(var h=0;h<d;h++)if(h in g)e[f++]=b.call(c,g[h],h,a);return e},xd=function(a,b){if(a.contains)return a.contains(b);return td(a,b)>-1};var yd=function(a,b){if(!xd(a,b))a.push(b)},Ad=function(a,b,c){zd(a,c,0,b)},Cd=function(a,b){var c=td(a,b),d;if(d=c!=-1)Bd(a,c);return d},Bd=
function(a,b){return Array[_P].splice.call(a,b,1)[t]==1},Dd=function(a){if(kc(a))return a.concat();else{var b=[];for(var c=0,d=a[t];c<d;c++)b[c]=a[c];return b}},Ed=function(a){for(var b=1;b<arguments[t];b++){var c=arguments[b];if(!kc(c))a.push(c);else a.push.apply(a,c)}},zd=function(a){return Array[_P].splice.apply(a,Fd(arguments,1))},Fd=function(a,b,c){return arguments[t]<=2?Array[_P][db].call(a,b):Array[_P][db].call(a,b,c)},Hd=function(a,b,c){var d=0,e=a[t]-1,f=c||Gd;while(d<=e){var g=d+e>>1,h=
f(b,a[g]);if(h>0)d=g+1;else if(h<0)e=g-1;else return g}return-(d+1)},Gd=function(a,b){return a>b?1:(a<b?-1:0)};var Id=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)},Jd=function(a,b,c){var d={};for(var e in a)d[e]=b.call(c,a[e],e,a);return d},Kd=function(a){var b=[],c=0;for(var d in a)b[c++]=a[d];return b},Ld=function(a){var b=[],c=0;for(var d in a)b[c++]=d;return b};var Md=function(a,b){var c;if(c=b in a)delete a[b];return c},Od=function(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');Nd(a,b,c)},Pd=function(a,b,c){if(b in a)return a[b];return c},Nd=function(a,b,c){a[b]=c},Qd=
function(a){var b={};for(var c in a)b[c]=a[c];return b},Rd=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Sd=function(a){var b,c;for(var d=1;d<arguments[t];d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Rd[t];e++){b=Rd[e];if(fa[_P][pb].call(c,b))a[b]=c[b]}}};var Td,Wd=function(){if(!Td)Td=new Vd;return Td},Yd=function(a){return a?new Vd(Xd(a)):Wd()},Zd=function(){return Wd().va()},$d=function(a){return mc(a)?ga.getElementById(a):a},I=$d,ae=function(a,b,c){return Wd().Bx(a,b,c)},be=ae,de=function(a,b){Id(b,function(c,d){if(d=="style")a[w].cssText=c;else if(d=="class")o(a,c);else if(d=="for")a.htmlFor=c;else if(d in ce)a.setAttribute(ce[d],c);else a[d]=c})},ce={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",
height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder"},ee=function(a){var b=a||B||window,c=b[gb];if(kd&&!sd("500")&&!rd){if(typeof b.innerHeight=="undefined")b=window;var d=b.innerHeight,e=b[gb][bc].scrollHeight;if(b==b.top)if(e<d)d-=15;return new zc(b.innerWidth,d)}var f=Yd(c),g=f.wx()=="CSS1Compat"&&(!hd||hd&&sd("9.50"))?c[bc]:c[x];return new zc(g.clientWidth,g.clientHeight)},fe=function(a){var b=a||B||window,c=b[gb],d,e;if(!kd&&c[Gb]=="CSS1Compat"){d=c[bc][Fb];e=c[bc][Wa]}else{d=
c[x][Fb];e=c[x][Wa]}return new yc(d,e)},ge=function(a){return Yd(a).Im()},he=function(){var a=Wd();return a.p.apply(a,arguments)},ie=function(a){return Wd().createElement(a)},je=function(a){return Wd().createTextNode(a)},ke=function(a){return Wd().oz(a)},le=function(a,b){a.appendChild(b)},me=function(a){var b;while(b=a[Eb])a.removeChild(b)},ne=function(a,b){if(b[z])b[z].insertBefore(a,b[Ub])},oe=function(a){return a&&a[z]?a[z].removeChild(a):null},qe=function(a){return pe(a.previousSibling,false)},
pe=function(a,b){while(a&&a[fb]!=1)a=b?a[Ub]:a.previousSibling;return a};var re=kd&&fd(md,"521")<=0,se=function(a,b){if(typeof a.contains!="undefined"&&!re&&b[fb]==1)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==b||ba(a.compareDocumentPosition(b)&16);while(b&&a!=b)b=b[z];return b==a},Xd=function(a){return a[fb]==9?a:a[ub]||a[gb]},te=function(a){return kd?a[gb]||a[Wb][gb]:a.contentDocument||a[Wb][gb]},ue=function(a,b){if("textContent"in a)a.textContent=b;else if(a[Eb]&&
a[Eb][fb]==3){while(a[zb]!=a[Eb])a.removeChild(a[zb]);a[Eb].data=b}else{while(a.hasChildNodes())a.removeChild(a[zb]);var c=Xd(a);a.appendChild(c.createTextNode(b))}},we=function(a,b){var c=[];ve(a,b,c,true);return c[t]?c[0]:ca},ve=function(a,b,c,d){if(a!=null)for(var e=0,f;f=a[Nb][e];e++){if(b(f)){c.push(f);if(d)return}ve(f,b,c,d)}},xe={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ye={IMG:" ",BR:"\n"},Ae=function(a){var b;if(G&&"innerText"in a)b=Gc(a.innerText);else{var c=[];ze(a,c,true);b=c.join("")}b=
b.replace(/\xAD/g,"");b=b.replace(/ +/g," ");if(b!=" ")b=b.replace(/^\s*/,"");return b},ze=function(a,b,c){if(a[sb]in xe){}else if(a[fb]==3)if(c)b.push(i(a[Yb]).replace(/(\r\n|\r|\n)/g,""));else b.push(a[Yb]);else if(a[sb]in ye)b.push(ye[a[sb]]);else{var d=a[Eb];while(d){ze(d,b,c);d=d[Ub]}}},Be=function(a){if(a&&typeof a[t]=="number")if(pc(a))return typeof a[lb]=="function"||typeof a[lb]=="string";else if(oc(a))return typeof a[lb]=="function";return false},Vd=function(a){this.Ja=a||B[gb]||ga};Vd[_P].va=
function(){return this.Ja};Vd[_P].Kd=function(a){return mc(a)?this.Ja.getElementById(a):a};Vd[_P].Fo=Vd[_P].Kd;Vd[_P].Bx=function(a,b,c){var d=a||"*",e=c||this.Ja,f=e.getElementsByTagName(d);if(b){var g=[];for(var h=0,j;j=f[h];h++){var k=j[$a];if(typeof k.split=="function"&&xd(k.split(" "),b))g.push(j)}return g}else return f};Vd[_P].p=function(a,b){if(G&&b&&b[Rb])a="<"+a+' name="'+Rc(b[Rb])+'">';var c=this.createElement(a);if(b)de(c,b);if(arguments[t]>2){function d(g){if(g)this.appendChild(c,mc(g)?
this.createTextNode(g):g)}for(var e=2;e<arguments[t];e++){var f=arguments[e];if(lc(f)&&!(pc(f)&&f[fb]>0))ud(Be(f)?Dd(f):f,d,this);else d.call(this,f)}}return c};Vd[_P].createElement=function(a){return this.Ja.createElement(a)};Vd[_P].createTextNode=function(a){return this.Ja.createTextNode(a)};Vd[_P].oz=function(a){var b=this.Ja.createElement("div");xa(b,a);if(b[Nb][t]==1)return b[Eb];else{var c=this.Ja.createDocumentFragment();while(b[Eb])c.appendChild(b[Eb]);return c}};Vd[_P].wx=function(){if(this.Ja[Gb])return this.Ja[Gb];
if(kd){var a=this.p("div",{style:"position:absolute;width:0;height:0;width:1"}),b=a[w][u]=="1px"?"BackCompat":"CSS1Compat";return this.Ja.compatMode=b}return"BackCompat"};Vd[_P].Im=function(){var a=this.Ja;if(a.parentWindow)return a.parentWindow;if(kd&&!sd("500")&&!rd){var b=a.createElement("script");xa(b,"document.parentWindow=window");var c=a[bc];c.appendChild(b);c.removeChild(b);return a.parentWindow}return a[Pb]};Vd[_P].appendChild=le;Vd[_P].En=me;La(Vd[_P],oe);Vd[_P].contains=se;var Ce=function(a,b,c,d){this.top=ec(a)?m(a):ca;this.right=ec(b)?m(b):ca;this.bottom=ec(c)?m(c):ca;Da(this,ec(d)?m(d):ca)};Ce[_P].clone=function(){return new Ce(this.top,this[cc],this[Hb],this[tb])};na(Ce[_P],function(){return"("+this.top+"t, "+this[cc]+"r, "+this[Hb]+"b, "+this[tb]+"l)"});Ce[_P].contains=function(a){return De(this,a)};Ce[_P].expand=function(a,b,c,d){if(pc(a)){this.top-=a.top;this.right+=a[cc];this.bottom+=a[Hb];this.left-=a[tb]}else{this.top-=a;this.right+=b;this.bottom+=c;this.left-=
d}return this};var De=function(a,b){if(!a||!b)return false;return b.x>=a[tb]&&b.x<=a[cc]&&b.y>=a.top&&b.y<=a[Hb]};var Ee=function(a,b,c,d){Da(this,ec(a)?m(a):ca);this.top=ec(b)?m(b):ca;q(this,ec(c)?m(c):ca);Ta(this,ec(d)?m(d):ca)};Ee[_P].clone=function(){return new Ee(this[tb],this.top,this[u],this[A])};na(Ee[_P],function(){return"("+this[tb]+", "+this.top+" - "+this[u]+"w x "+this[A]+"h)"});var Fe,He=function(a,b,c){if(mc(b))Ge(a,c,b);else Id(b,uc(Ge,a))},Ge=function(a,b,c){a[w][Ie(c)]=b},Je=function(a,b){var c=Xd(a);if(c[Pb]&&c[Pb].getComputedStyle){var d=c[Pb].getComputedStyle(a,"");if(d)return d[b]}return null};var Ke=function(a,b){return Je(a,b)||(a[Ib]?a[Ib][b]:null)||a[w][b]};var Le=function(a,b,c){var d,e;if(b instanceof yc){d=b.x;e=b.y}else{d=b;e=c}Da(a[w],typeof d=="number"?n.round(d)+"px":d);a[w].top=typeof e=="number"?n.round(e)+"px":e},Me=function(a){var b;b=a?(a[fb]==9?
a:Xd(a)):Zd();if(G&&b[Gb]!="CSS1Compat")return b[x];return b[bc]},Ne=function(a){var b=Xd(a),c=id&&b.getBoxObjectFor&&Ke(a,"position")=="absolute"&&(a[w].top==""||a[w][tb]=="");if(typeof Fe=="undefined")Fe=jd&&!sd("1.8.0.11");var d=new yc(0,0),e=Me(b);if(a==e)return d;var f=null,g;if(a.getBoundingClientRect){g=a.getBoundingClientRect();var h=fe(ge(b));d.x=g[tb]+h.x;d.y=g.top+h.y}else if(b.getBoxObjectFor&&!c&&!Fe){g=b.getBoxObjectFor(a);var j=b.getBoxObjectFor(e);d.x=g[xb]-j[xb];d.y=g[yb]-j[yb]}else{f=
a;do{d.x+=f[nb];d.y+=f[Vb];if(kd&&Ke(f,"position")=="fixed"){d.x+=b[x][Fb];d.y+=b[x][Wa];break}f=f.offsetParent}while(f&&f!=a);if(hd||kd&&Ke(a,"position")=="absolute")d.y-=b[x][Vb];f=a.offsetParent;while(f&&f!=b[x]){d.x-=f[Fb];if(!hd||f[Ob]!="TR")d.y-=f[Wa];f=f.offsetParent}}return d},Oe=function(a,b,c){var d=Ne(a);if(b instanceof yc){c=b.y;b=b.x}var e=b-d.x,f=c-d.y;Le(a,a[nb]+e,a[Vb]+f)},Pe=function(a,b,c){var d;if(b instanceof zc){d=b[A];b=b[u]}else{if(c==ca)throw Error("missing height argument");
d=c}q(a[w],typeof b=="number"?n.round(b)+"px":b);Ta(a[w],typeof d=="number"?n.round(d)+"px":d)},Qe=function(a){if(Ke(a,"display")!="none")return new zc(a[jb],a[Xb]);var b=a[w],c=b.visibility,d=b.position;Va(b,"hidden");ra(b,"absolute");r(b,"");var e=a[jb],f=a[Xb];r(b,"none");ra(b,d);Va(b,c);return new zc(e,f)},Ie=function(a){return i(a).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()})};var Re=function(a,b){var c=a[w];if("opacity"in c)c.opacity=b;else if("MozOpacity"in c)c.MozOpacity=b;
else if("filter"in c)c.filter="alpha(opacity="+b*100+")"},Se=function(a,b){r(a[w],b?"":"none")},Te=function(a){return"rtl"==Ke(a,"direction")},Ue=id?"MozUserSelect":(kd?"WebkitUserSelect":null),Ve=function(a,b,c){var d=!c?a.getElementsByTagName("*"):null,e=Ue;if(e){var f=b?"none":"";a[w][e]=f;if(d)for(var g=0,h;h=d[g];g++)h[w][e]=f}else if(G||hd){var f=b?"on":"";a.setAttribute("unselectable",f);if(d)for(var g=0,h;h=d[g];g++)h.setAttribute("unselectable",f)}};var We=function(a){var b=a[$a];return b&&typeof b.split=="function"?b.split(" "):[]},Xe=function(a){var b=We(a),c=Fd(arguments,1),d=1;for(var e=0;e<c[t];e++)if(!xd(b,c[e])){b.push(c[e]);d&=1}else d&=0;o(a,b.join(" "));return ba(d)},Ye=function(a){var b=We(a),c=Fd(arguments,1),d=0;for(var e=0;e<b[t];e++)if(xd(c,b[e])){zd(b,e--,1);d++}o(a,b.join(" "));return d==c[t]},Ze=function(a,b){return xd(We(a),b)};if("StopIteration"in B)var $e=B.StopIteration;else $e=Error("StopIteration");var af=function(){};wa(af[_P],function(){throw $e;});af[_P].__iterator__=function(){return this};var bf=function(a){if(a instanceof af)return a;if(typeof a.__iterator__=="function")return a.__iterator__(false);if(lc(a)){var b=0,c=new af;wa(c,function(){while(true){if(b>=a[t])throw $e;if(!(b in a)){b++;continue}return a[b++]}});return c}throw Error("Not implemented");},cf=function(a,b,c){if(lc(a))try{ud(a,b,c)}catch(d){if(d!==
$e)throw d;}else{a=bf(a);try{while(true)b.call(c,a.next(),ca,a)}catch(d){if(d!==$e)throw d;}}},df=function(a,b,c){a=bf(a);try{while(true)if(b.call(c,a.next(),ca,a))return true}catch(d){if(d!==$e)throw d;}return false};var ef=function(a){this.I={};this.T=[];if(a)this.Ad(a)};ef[_P].U=0;ef[_P].wi=0;ef[_P].f=function(){return this.U};ef[_P].wa=function(){this.Gi();var a=[];for(var b=0;b<this.T[t];b++){var c=this.T[b];a.push(this.I[c])}return a};ef[_P].gb=function(){this.Gi();return this.T.concat()};ef[_P].Ra=function(a){return ff(this.I,a)};Na(ef[_P],function(){this.I={};pa(this.T,0);this.U=0;this.wi=0});Ia(ef[_P],function(a){if(ff(this.I,a)){delete this.I[a];this.U--;this.wi++;if(this.T[t]>2*this.U)this.Gi();return true}return false});
ef[_P].Gi=function(){if(this.U!=this.T[t]){var a=0,b=0;while(a<this.T[t]){var c=this.T[a];if(ff(this.I,c))this.T[b++]=c;a++}pa(this.T,b)}if(this.U!=this.T[t]){var d={},a=0,b=0;while(a<this.T[t]){var c=this.T[a];if(!ff(d,c)){this.T[b++]=c;d[c]=1}a++}pa(this.T,b)}};ef[_P].get=function(a,b){if(ff(this.I,a))return this.I[a];return b};ef[_P].set=function(a,b){if(!ff(this.I,a)){this.U++;this.T.push(a);this.wi++}this.I[a]=b};ef[_P].Ad=function(a){var b,c;if(a instanceof ef){b=a.gb();c=a.wa()}else{b=Ld(a);
c=Kd(a)}for(var d=0;d<b[t];d++)this.set(b[d],c[d])};ef[_P].clone=function(){return new ef(this)};ef[_P].__iterator__=function(a){this.Gi();var b=0,c=this.T,d=this.I,e=this.wi,f=this,g=new af;wa(g,function(){while(true){if(e!=f.wi)throw Error("The map has changed since the iterator was created");if(b>=c[t])throw $e;var h=c[b++];return a?h:d[h]}});return g};if(fa[_P][pb])var ff=function(a,b){return fa[_P][pb].call(a,b)};else ff=function(a,b){return b in a&&a[b]!==fa[_P][b]};var gf=function(a){if(typeof a.wa=="function")return a.wa();if(mc(a))return a.split("");if(lc(a)){var b=[],c=a[t];for(var d=0;d<c;d++)b.push(a[d]);return b}return Kd(a)},hf=function(a){if(typeof a.gb=="function")return a.gb();if(typeof a.wa=="function")return ca;if(lc(a)||mc(a)){var b=[],c=a[t];for(var d=0;d<c;d++)b.push(d);return b}return Ld(a)},jf=function(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(lc(a)||mc(a))ud(a,b,c);else{var d=hf(a),e=gf(a),f=e[t];for(var g=0;g<f;g++)b.call(c,
e[g],d&&d[g],a)}};var kf=function(a){this.I=new ef;if(a)this.Ad(a)},lf=function(a){var b=typeof a;return b=="object"?"o"+sc(a):b.substr(0,1)+a};kf[_P].f=function(){return this.I.f()};kf[_P].add=function(a){this.I.set(lf(a),a)};kf[_P].Ad=function(a){var b=mf(a),c=b[t];for(var d=0;d<c;d++)this.add(b[d])};kf[_P].ug=function(a){var b=mf(a),c=b[t];for(var d=0;d<c;d++)this.remove(b[d])};Ia(kf[_P],function(a){return this.I.remove(lf(a))});Na(kf[_P],function(){this.I.clear()});kf[_P].contains=function(a){return this.I.Ra(lf(a))};
kf[_P].wa=function(){return this.I.wa()};kf[_P].clone=function(){return new kf(this)};kf[_P].__iterator__=function(){return this.I.__iterator__(false)};var mf=function(a){return gf(a)};var nf=function(a){var b=[];for(var c=0;c<a[t];c++)if(kc(a[c]))b.push(nf(a[c]));else b.push(a[c]);return"[ "+b.join(", ")+" ]"},qf=function(a,b){try{var c=of(a),d="Message: "+Rc(c[ob])+'\nUrl: <a href="view-source:'+c[Sb]+'" target="_new">'+c[Sb]+"</a>\nLine: "+c.lineNumber+"\n\nBrowser stack:\n"+Rc(c.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Rc(pf(b)+"-> ");return d}catch(e){return"Exception trying to expose exception! You win, we lose. "+e}},of=function(a){var b=gc("document.location.href");
return typeof a=="string"?{message:a,name:"Unknown error",lineNumber:"Not available",fileName:b,stack:"Not available"}:(!a.lineNumber||!a[Sb]||!a.stack?{message:a[ob],name:a[Rb],lineNumber:a.lineNumber||a.line||"Not available",fileName:a[Sb]||a.sourceURL||b,stack:a.stack||"Not available"}:a)},pf=function(a){return rf(a||arguments.callee.caller,[])},rf=function(a,b){var c=[];if(xd(b,a))c.push("[...circular reference...]");else if(a&&b[t]<50){c.push(sf(a)+"(");var d=a.arguments;for(var e=0;e<d[t];e++){if(e>
0)c.push(", ");var f,g=d[e];switch(typeof g){case "object":f=g?"object":"null";break;case "string":f=g;break;case "number":f=i(g);break;case "boolean":f=g?"true":"false";break;case "function":f=sf(g);f=f?f:"[fn]";break;case "undefined":default:f=typeof g;break}if(f[t]>40)f=f.substr(0,40)+"...";c.push(f)}b.push(a);c.push(")\n");try{c.push(rf(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else if(a)c.push("[...long stack...]");else c.push("[end]");return c.join("")},sf=function(a){var b=
i(a);if(!tf[b]){var c=/function ([^\(]+)/.exec(b);if(c){var d=c[1],e=/^\$(.+)\$$/.exec(d);if(e)d=e[1].replace(/\${1,2}/g,".");tf[b]=d}else tf[b]="[Anonymous]"}return tf[b]},uf=function(a,b,c,d){if(gc("document.all"))return"";var e=b||B,f=c||"",g=d||0;if(e==a)return f;for(var h in e){if(h=="Packages"||h=="sun"||h=="netscape"||h=="java")continue;if(e[h]==a)return f+h;if((typeof e[h]=="function"||typeof e[h]=="object")&&e[h]!=B&&e[h]!=gc("document")&&e.hasOwnProperty(h)&&g<6){var j=uf(a,e[h],f+h+".",
g+1);if(j)return j}}return""},tf={};var wf=function(a,b,c){this.eI=vf++;this.BH=vc();this.Pe=a;this.RG=b;this.HG=c};wf[_P].Wp=null;wf[_P].Vp=null;var vf=0;wf[_P].xm=function(){return this.HG};wf[_P].rq=function(){return this.Wp};wf[_P].GD=function(a){this.Wp=a};wf[_P].sq=function(){return this.Vp};wf[_P].HD=function(a){this.Vp=a};wf[_P].lh=function(){return this.Pe};wf[_P].Yn=function(a){this.Pe=a};wf[_P].Bq=function(){return this.RG};wf[_P].Cq=function(){return this.BH};var xf=function(a){this.Re=a;this.L=null;this.tc={};this.Zf=[]};xf[_P].Pe=null;var yf=function(a,b){Qa(this,a);ya(this,b)};na(yf[_P],function(){return this[Rb]});new yf("OFF",Infinity);var zf=new yf("SHOUT",1200),Af=new yf("SEVERE",1000),Bf=new yf("WARNING",900),Cf=new yf("INFO",800),Df=new yf("CONFIG",700),Ef=new yf("FINE",500),Ff=new yf("FINER",400),Gf=new yf("FINEST",300);new yf("ALL",0);var If=function(a){return Hf(a)};xf[_P].Hb=function(){return this.Re};xf[_P].Jo=function(a){this.Zf.push(a)};
xf[_P].Ns=function(a){return Cd(this.Zf,a)};xf[_P].hb=function(){return this.L};xf[_P].Yn=function(a){this.Pe=a};xf[_P].lh=function(){return this.Pe};xf[_P].Qj=function(a){if(this.Pe)return a[v]>=this.Pe[v];if(this.L)return this.L.Qj(a);return false};xf[_P].log=function(a,b,c){if(!this.Qj(a))return;var d=new wf(a,i(b),this.Re);if(c){d.GD(c);d.HD(qf(c,arguments.callee.caller))}this.mA(d)};xf[_P].severe=function(a,b){this.log(Af,a,b)};xf[_P].warning=function(a,b){this.log(Bf,a,b)};xf[_P].info=function(a,
b){this.log(Cf,a,b)};xf[_P].fine=function(a,b){this.log(Ef,a,b)};xf[_P].finer=function(a,b){this.log(Ff,a,b)};xf[_P].finest=function(a,b){this.log(Gf,a,b)};xf[_P].mA=function(a){if(!this.Qj(a.lh()))return;var b=this;while(b){b.iv(a);b=b.hb()}};xf[_P].iv=function(a){for(var b=0;b<this.Zf[t];b++)this.Zf[b](a)};xf[_P].WD=function(a){this.L=a};xf[_P].ru=function(a,b){this.tc[a]=b};var Jf={},Kf=null,Lf=function(){if(!Kf){Kf=new xf("");Jf[""]=Kf;Kf.Yn(Df)}},Mf=function(){Lf();return Kf},Hf=function(a){Lf();
return a in Jf?Jf[a]:Nf(a)},Nf=function(a){var b=new xf(a),c=a.split("."),d=c[c[t]-1];pa(c,c[t]-1);var e=c.join("."),f=Hf(e);f.ru(d,b);b.WD(f);Jf[a]=b;return b};var Of=function(){};Of[_P].get=function(){};Of[_P].set=function(){};Of[_P].l=function(){};Of[_P].j=function(){};Of[_P].e=function(){};Of[_P].K=function(){};Of[_P].F=function(){};Of[_P].pd=function(){};Of[_P].P=function(){};Of[_P].load=function(){};Of[_P].xa=hc;var Pf="NOT_LOADED",Qf=function(){};Qf[_P].set=function(){};Qf[_P].l=function(){return new Rf};Qf[_P].j=function(){return null};Qf[_P].e=function(){return null};Qf[_P].P=function(){var a="",b=this.F();if(this.mh&&this.mh())a=this.mh().P()+(b.indexOf("[")!=
-1?"":"/");return a+b};Qf[_P].load=function(){};Qf[_P].mh=null;var Sf=function(){};Sf[_P].add=function(){};Sf[_P].get=function(){};Sf[_P].r=function(){};Sf[_P].f=function(){};Sf[_P].Ub=function(){};La(Sf[_P],function(){});var Tf=function(a){this.I={};this.fc=[];this.Mb={};if(a)for(var b=0,c;c=a[b];b++)this.add(c)};Tf[_P].add=function(a){this.fc.push(a);var b=a.F();if(b!=null){this.I[b]=a;this.Mb[b]=this.fc[t]-1}};Tf[_P].get=function(a){return this.I[a]||null};Tf[_P].r=function(a){return this.fc[a]||
null};Tf[_P].f=function(){return this.fc[t]};Tf[_P].Ub=function(a,b){if(b==null)this.removeNode(a);else{var c=this.Mb[a];if(c!=null){this.I[a]=b;this.fc[c]=b}else this.add(b)}};La(Tf[_P],function(a){var b=this.Mb[a];if(b!=null){this.fc.splice(b,1);delete this.I[a];delete this.Mb[a];for(var c in this.Mb)if(this.Mb[c]>b)this.Mb[c]--}return b!=null});Tf[_P].indexOf=function(a){return this.Mb[a]};var Rf=function(){Tf.call(this)};F(Rf,Tf);Rf[_P].add=function(){throw Error("Can't add to EmptyNodeList");
};var Uf=function(a,b){this.Gl=a;Tf.call(this,b)};F(Uf,Tf);Uf[_P].add=function(a){if(!this.Gl){this.append(a);return}var b=Hd(this.fc,a,this.Gl);if(b<0)b=-(b+1);for(var c in this.Mb)if(this.Mb[c]>=b)this.Mb[c]++;Ad(this.fc,a,b);var d=a.F();if(d!=null){this.I[d]=a;this.Mb[d]=b}};Uf[_P].append=function(a){Uf.B.add.call(this,a)};Uf[_P].Ub=function(a,b){if(b==null)this.removeNode(a);else{var c=this.Mb[a];if(c!=null){if(this.Gl){var d=this.Gl(this.fc[c],b);if(d==0){this.I[a]=b;this.fc[c]=b}else{this.removeNode(a);
this.add(b)}}}else this.add(b)}};var Vf=If("goog.ds"),Wf=function(a,b){var c=function(){};c.prototype=a;var d=new c;d.F=function(){return b};return d};var Xf=function(a){if(a)this.ic(a)};Xf[_P].ic=function(a,b,c,d){this.Oa=a;if(!c&&!d){if(Cc(a,"?")){this.kv=true;a=a.substring(0,a[t]-1)}if(Cc(a,"()"))if(Cc(a,"name()")||Cc(a,"count()")||Cc(a,"position()")){var e=a.lastIndexOf("/");if(e!=-1){this.bm=a.substring(e+1);a=a.substring(0,e)}else{this.bm=a;a="."}if(this.bm=="count()")this.uG=true}}this.$a=b||a.split("/");this.kc=this.$a[t];this.Oe=this.$a[this.kc-1];this.D=this.$a[0];if(this.kc==1){this.$s=this;this.Oj=Bc(a,"$")}else{this.$s=Yf(this.D,null,
this,null);this.Oj=this.$s.Oj;this.D=this.$s.D}if(this.kc==1&&!this.Oj){this.Lz=a=="."||a=="";this.Pz=Bc(a,"@");this.Hz=a=="*|text()";this.Gz=a=="@*";this.Iz=a=="*"}};Xf[_P].Fa=function(){return this.Oa};Xf[_P].hb=function(){if(!this.XG){if(this.kc>1)this.Cs=Yf(null,this.$a.slice(0,this.$a[t]-1),this,null);this.XG=true}return this.Cs};Xf[_P].Dq=function(){if(!this.TG){if(this.kc>1)this.ls=Yf(null,this.$a.slice(1),null,this);this.TG=true}return this.ls};Xf[_P].i=function(a){if(a==null)a=J();else if(this.Oj)a=
a.hj?a.hj():J();if(this.uG){var b=this.ba(a);return b.f()}if(this.kc==1)return a.e(this.D);else if(this.kc==0)return a.get();var c=a.j(this.D);return c==null?null:this.Dq().i(c)};Xf[_P].ba=function(a,b){return this.zm(a,false,b)};Xf[_P].G=function(a,b){return this.zm(a,true,b)};Xf[_P].zm=function(a,b,c){if(a==null)a=J();else if(this.Oj)a=a.hj?a.hj():J();if(this.kc==0&&b)return a;else if(this.kc==0&&!b)return new Tf([a]);else if(this.kc==1)if(b)return a.j(this.D,c);else{var d=a.j(this.D);return d&&
d.xa()?d.l():a.l(this.D)}else{var e=a.j(this.D,c);if(e==null&&b)return null;else if(e==null&&!b)return new Rf;return this.Dq().zm(e,b,c)}};Xf[_P].kv=false;Xf[_P].$a=[];Xf[_P].kc=null;Xf[_P].D=null;Xf[_P].Oe=null;Xf[_P].Lz=false;Xf[_P].Pz=false;Xf[_P].Hz=false;Xf[_P].Gz=false;Xf[_P].Iz=false;Xf[_P].bm=null;Xf[_P].Cs=null;Xf[_P].ls=null;var L=function(a){var b=Zf[a];if(b==null){b=new Xf(a);Zf[a]=b}return b},Yf=function(a,b,c,d){var e=a||b.join("/"),f=Zf[e];if(f==null){f=new Xf;f.ic(e,b,c,d);Zf[e]=f}return f},
Zf={};L(".");L("*|text()");L("*");L("@*");L("name()");L("count()");L("position()");var $f=function(){this.Zg=new Tf;this.Wu=new ef;this.Qr={};this.Yj={};this.Tg={};this.Uw=0;this.or={}},ag=null;F($f,Of);var J=function(){if(!ag)ag=new $f;return ag};$f[_P].V=function(a,b,c){var d=!(!b),e=c||a.F();if(!Bc(e,"$"))e="$"+e;a.pd(e);this.Zg.add(a);this.Wu.set(e,d)};$f[_P].Sg=function(a,b){if(!this.Oo)this.Oo=D(this.$z,this);if(this.Tg[a]){var c=this.Tg[a].Fa();this.bi(this.Oo,c+"/...",a)}this.Tg[a]=L(b);this.S(this.Oo,b+"/...",a);this.v(a)};$f[_P].$z=function(a,b){var c=this.Tg[b];if(c){var d=
c.Fa();if(a.indexOf(d)==0)this.v(b+a.substring(d[t]));else this.v(b)}};$f[_P].ve=function(a){return this.Tg[a]?this.Tg[a].G():this.Zg.get(a)};$f[_P].get=function(){return this.Zg};$f[_P].set=function(){throw Error("Can't set on DataManager");};$f[_P].l=function(a){return a?new Tf([this.j(a)]):this.Zg};$f[_P].j=function(a){return this.ve(a)};$f[_P].e=function(a){var b=this.ve(a);return b?b.get():null};$f[_P].F=function(){return""};$f[_P].P=function(){return""};$f[_P].load=function(){var a=this.Zg.f();
for(var b=0;b<a;b++){var c=this.Zg.r(b),d=this.Wu.get(c.F());if(d)c.load()}};$f[_P].xa=function(){return false};$f[_P].rm=function(){return this.Uw};$f[_P].S=function(a,b,c){var d=0;if(Cc(b,"/...")){d=1000;b=b.substring(0,b[t]-4)}else if(Cc(b,"/*")){d=1;b=b.substring(0,b[t]-2)}c=c||"";var e=b+":"+c+":"+sc(a),f={dataPath:b,id:c,fn:a},g=L(b),h=sc(a);if(!this.Yj[h])this.Yj[h]={};this.Yj[h][e]={listener:f,items:[]};while(g){var j={listener:f,maxAncestors:d},k=this.Qr[g.Fa()];if(k==null){k={};this.Qr[g.Fa()]=
k}k[e]=j;d=0;g=g.hb();this.Yj[h][e].items.push({key:e,obj:k})}};$f[_P].rl=function(a,b,c){var d=b.indexOf("*");if(d==-1){this.S(a,b,c);return}var e=b.substring(0,d)+"...",f="$";if(Cc(b,"/...")){b=b.substring(0,b[t]-4);f=""}var g=ad(b),h=g.replace(/\\\*/g,"([^\\/]+)")+f,j=new RegExp(h),k=function(s){var C=j.exec(s);if(C){C.shift();a(s,c,C)}};this.S(k,e,c);var l=sc(a);if(!this.or[l])this.or[l]={};var p=b+":"+c;this.or[l][p]={listener:{dataPath:e,fn:k,id:c}}};$f[_P].bi=function(a,b,c){if(b&&Cc(b,"/..."))b=
b.substring(0,b[t]-4);else if(b&&Cc(b,"/*"))b=b.substring(0,b[t]-2);this.sC(this.Yj,false,a,b,c)};$f[_P].sC=function(a,b,c,d,e){var f=sc(c),g=a[f];if(g!=null)for(var h in g){var j=g[h],k=j.listener;if((!d||d==k.dataPath)&&(!e||e==k.id)){if(b)this.bi(k.fn,k.dataPath,k.id);if(j.items)for(var l=0;l<j.items[t];l++){var p=j.items[l];delete p.obj[p.key]}delete g[h]}}};$f[_P].at=function(a){if(this.Fp)throw Error("Can not nest calls to runWithoutFiringDataChanges");this.Fp=true;try{a()}finally{this.Fp=false}};
$f[_P].v=function(a){if(this.Fp)return;var b=L(a),c=0;while(b){var d=this.Qr[b.Fa()];if(d)for(var e in d){var f=d[e],g=f.listener;if(c<=f.maxAncestors)g.fn(a,g.id)}c++;b=b.hb()}this.Uw++};var bg=function(a,b){if(!a)throw Error("Cannot create a fast data node without a data name");this.__dataName=a;this.__parent=b};bg[_P].F=function(){return this.__dataName};bg[_P].pd=function(a){this.__dataName=a};bg[_P].P=function(){var a;a=this.__parent?this.__parent.P()+"/":"";return a+this.F()};var cg=function(a,b,c){bg.call(this,b,c);this.dm(a)};F(cg,bg);cg[_P].dm=function(a){for(var b in a)this[b]=a[b]};var fg=function(a,b,c){return kc(a)?new dg(a,b,c):(pc(a)?new cg(a,b,c):new eg(a,b,c))},gg=
new Rf;cg[_P].set=function(){throw"Not implemented yet";};cg[_P].l=function(a){if(!a||a=="*")return this;else if(a.indexOf("*")==-1){var b=this.j(a);return b?new dg([b],null):new Rf}else throw Error("Unsupported selector: "+a);};cg[_P].iu=function(a){var b=this[a];if(b!=null&&!b.F)this[a]=fg(this[a],a,this)};cg[_P].j=function(a,b){this.iu(a);var c=this[a]||null;if(c==null&&b){c=new cg({},a,this);this[a]=c}return c};cg[_P].K=function(a,b){if(b!=null)this[a]=b;else delete this[a];J().v(this.P()+"/"+
a)};cg[_P].e=function(a){var b=this[a];return b!=null?(b.F?b.get():b):null};cg[_P].xa=function(){return false};cg[_P].Fb=function(){var a={};for(var b in this)if(!Bc(b,"__")&&!oc(this[b]))a[b]=this[b].__dataName?this[b].Fb():this[b];return a};cg[_P].clone=function(){return fg(this.Fb(),this.F())};cg[_P].add=function(a){this.K(a.F(),a)};cg[_P].get=function(a){return arguments[t]==0?this:this.j(a)};cg[_P].r=function(a){var b=0;for(var c in this)if(!Bc(c,"__")&&!oc(this[c])){if(b==a){this.iu(c);return this[c]}++b}return null};
cg[_P].f=function(){var a=0;for(var b in this)if(!Bc(b,"__")&&!oc(this[b]))++a;return a};cg[_P].Ub=function(a,b){this.K(a,b)};La(cg[_P],function(a){delete this[a]});var eg=function(a,b,c){this.Va=a;bg.call(this,b,c)};F(eg,bg);eg[_P].get=function(){return this.Va};eg[_P].set=function(a){if(kc(a)||pc(a))throw"can only set PrimitiveFastDataNode to primitive values";this.Va=a;J().v(this.P())};eg[_P].l=function(){return gg};eg[_P].j=function(){return null};eg[_P].e=function(){return null};eg[_P].K=function(){throw Error("Cannot set a child node for a PrimitiveFastDataNode");
};eg[_P].xa=function(){return false};eg[_P].Fb=function(){return this.Va};var dg=function(a,b,c){this.da=[];for(var d=0;d<a[t];++d){var e=a[d].id||"["+d+"]";this.da.push(fg(a[d],e,this));if(a[d].id){if(!this.I)this.I={};this.I[a[d].id]=d}}bg.call(this,b,c)};F(dg,bg);dg[_P].set=function(){throw Error("Cannot set a FastListNode to a new value");};dg[_P].l=function(){return this};dg[_P].j=function(a,b){var c=this.lj(a);if(c==null&&this.I)c=this.I[a];if(c!=null&&this.da[c])return this.da[c];else if(b){this.K(a,
{});return this.j(a)}else return null};dg[_P].e=function(a){var b=this.j(a);return b?b.get():null};dg[_P].lj=function(a){return a.charAt(0)=="["&&a.charAt(a[t]-1)=="]"?m(a.substring(1,a[t]-1)):null};dg[_P].K=function(a,b){var c=this.da[t];if(b!=null){if(!b.F)b=fg(b,a,this);var d=this.lj(a);if(d!=null){if(d<0||d>=this.da[t])throw Error("List index out of bounds: "+d);this.da[a]=b}else{if(!this.I)this.I={};this.da.push(b);this.I[a]=this.da[t]-1}}else this.removeNode(a);var e=J();e.v(this.P()+"/"+a);
if(this.da[t]!=c)this.bn()};dg[_P].bn=function(){var a=J();a.v(this.P());a.v(this.P()+"/count()")};dg[_P].xa=function(){return true};dg[_P].Fb=function(){var a=[];for(var b=0;b<this.da[t];++b)a.push(this.da[b].Fb());return a};dg[_P].add=function(a){if(!a.F)a=fg(a,i(this.da[t]),this);this.da.push(a);var b=J();b.v(this.P()+"/["+(this.da[t]-1)+"]");this.bn()};dg[_P].get=function(a){return arguments[t]==0?this.da:this.j(a)};dg[_P].r=function(a){var b=this.da[a];return b!=null?b:null};dg[_P].f=function(){return this.da[t]};
dg[_P].Ub=function(){throw Error("Setting child nodes of a FastListNode is not implemented, yet");};La(dg[_P],function(a){var b=this.lj(a);if(b==null&&this.I)b=this.I[a];if(b!=null){this.da.splice(b,1);if(this.I){var c=null;for(var d in this.I)if(this.I[d]==b)c=d;else if(this.I[d]>b)--this.I[d];if(c)delete this.I[c]}var e=J();e.v(this.P()+"/["+b+"]");this.bn()}});dg[_P].indexOf=function(a){var b=this.lj(a);if(b==null&&this.I)b=this.I[a];if(b==null)throw Error("Cannot determine index for: "+a);return b};var M=function(a,b,c){this.L=c;this.Sa=b;this.Dt(a)};M[_P].Dt=function(a){this.D=a;this.oa=null};M[_P].get=function(){return!pc(this.D)?this.D:this.l()};M[_P].set=function(a){if(a&&pc(this.D))throw Error("Can't set group nodes to new values yet");if(this.L)this.L.D[this.Sa]=a;this.D=a;this.oa=null;J().v(this.P())};M[_P].l=function(a){if(!this.D)return new Rf;if(!a||a=="*"){this.Cb(false);return this.oa}else if(a.indexOf("*")==-1)return this.D[a]!=null?new Tf([this.j(a)]):new Rf;else throw Error("Selector not supported yet ("+
a+")");};M[_P].Cb=function(a){if(this.oa&&!a)return;if(!pc(this.D)){this.oa=new Rf;return}var b=new Tf;if(this.D!=null){var c;if(kc(this.D)){var d=this.D[t];for(var e=0;e<d;e++){var f=this.D[e],g=f.id,h=g!=null?i(g):"["+e+"]";c=new M(f,h,this);b.add(c)}}else for(var h in this.D){var j=this.D[h];if(j.F)b.add(j);else if(!oc(j)){c=new M(j,h,this);b.add(c)}}}this.oa=b};M[_P].j=function(a,b){if(!this.D)return null;var c=this.l().get(a);if(!c&&b){var d={};if(kc(this.D)){d.id=a;this.D.push(d)}else this.D[a]=
d;c=new M(d,a,this);if(this.oa)this.oa.add(c)}return c};M[_P].e=function(a){if(this.oa){var b=this.l().get(a);return b?b.get():null}else return this.D?this.D[a]:null};M[_P].K=function(a,b){var c=null,d=null,e=false;if(b!=null)if(b.F){d=b;d.L=this}else d=kc(b)||pc(b)?new M(b,a,this):new hg(this.D,a,this);if(kc(this.D)){this.Cb();var f=this.oa.indexOf(a);if(b==null){var g=this.oa.get(a);if(g)c=g.P();this.D.splice(f,1)}else if(f)this.D[f]=b;else this.D.push(b);if(f==null)e=true;this.oa.Ub(a,d)}else if(pc(this.D)){if(b==
null){this.Cb();var g=this.oa.get(a);if(g)c=g.P();delete this.D[a]}else{if(!this.D[a])e=true;this.D[a]=b}if(this.oa)this.oa.Ub(a,d)}var h=J();if(d){h.v(d.P());if(e&&this.xa()){h.v(this.P());h.v(this.P()+"/count()")}}else if(c){h.v(c);if(this.xa()){h.v(this.P());h.v(this.P()+"/count()")}}return d};M[_P].F=function(){return this.Sa};M[_P].pd=function(a){this.Sa=a};M[_P].P=function(){var a="";if(this.L)a=this.L.P()+"/";return a+this.Sa};M[_P].load=function(){};M[_P].xa=function(){return this.vG!=null?
this.vG:kc(this.D)};var hg=function(a,b,c){Qf.call(this);this.Sa=b;this.L=a;this.WG=c||this.L};F(hg,Qf);hg[_P].get=function(){return this.L[this.Sa]};hg[_P].set=function(a){var b=this.L[this.Sa];this.L[this.Sa]=a;if(b!=a)J().v(this.P())};hg[_P].F=function(){return this.Sa};hg[_P].mh=function(){return this.WG};var N=function(a,b){var c;if(a instanceof N){this.af(b==null?a.Jx():b);this.ni(a.qj());this.Tk(a.Tq());this.Mk(a.oq());this.Sk(a.Bm());this.li(a.Od());this.bf(a.Fc().clone());this.Nk(a.vq())}else if(a&&(c=i(a).match(ig()))){this.af(!(!b));this.ni(c[1],true);this.Tk(c[2],true);this.Mk(c[3],true);this.Sk(c[4]);this.li(c[5],true);this.bf(c[6]);this.Nk(c[7],true)}else{this.af(!(!b));this.za=new jg(null,this,this.Ic)}};N[_P].nd="";N[_P].Kg="";N[_P].Bf="";N[_P].qg=null;N[_P].ng="";N[_P].za=null;N[_P].Mf=
"";N[_P].Qz=false;N[_P].Ic=false;na(N[_P],function(){if(this.Xa)return this.Xa;var a=[];if(this.nd)a.push(kg(this.nd,lg),":");if(this.Bf){a.push("//");if(this.Kg)a.push(kg(this.Kg,lg),"@");a.push(mg(this.Bf));if(this.qg!=null)a.push(":",i(this.Bm()))}if(this.ng)a.push(kg(this.ng,ng));var b=i(this.za);if(b)a.push("?",b);if(this.Mf)a.push("#",kg(this.Mf,og));return this.Xa=a.join("")});N[_P].resolve=function(a){var b=this.clone(),c=a.hz();if(c)b.ni(a.qj());else c=a.iz();if(c)b.Tk(a.Tq());else c=a.cz();
if(c)b.Mk(a.oq());else c=a.fz();var d=a.Od();if(c)b.Sk(a.Bm());else{c=a.ez();if(c)if(!/^\//.test(d))d=b.Od().replace(/\/?[^\/]*$/,"/"+d)}if(c)b.li(d);else c=a.gz();if(c)b.bf(a.oj());else c=a.dz();if(c)b.Nk(a.vq());return b};N[_P].clone=function(){return pg(this.nd,this.Kg,this.Bf,this.qg,this.ng,this.za.clone(),this.Mf,this.Ic)};N[_P].qj=function(){return this.nd};N[_P].ni=function(a,b){this.Cc();delete this.Xa;this.nd=b?qg(a):a;if(this.nd)this.nd=this.nd.replace(/:$/,"");return this};N[_P].hz=function(){return!(!this.nd)};
N[_P].Tq=function(){return this.Kg};N[_P].Tk=function(a,b){this.Cc();delete this.Xa;this.Kg=b?qg(a):a;return this};N[_P].iz=function(){return!(!this.Kg)};N[_P].oq=function(){return this.Bf};N[_P].Mk=function(a,b){this.Cc();delete this.Xa;this.Bf=b?qg(a):a;return this};N[_P].cz=function(){return!(!this.Bf)};N[_P].Bm=function(){return this.qg};N[_P].Sk=function(a){this.Cc();delete this.Xa;if(a){a=m(a);if(ja(a)||a<0)throw Error("Bad port number "+a);this.qg=a}else this.qg=null;return this};N[_P].fz=
function(){return this.qg!=null};N[_P].Od=function(){return this.ng};N[_P].li=function(a,b){this.Cc();delete this.Xa;this.ng=b?qg(a):a;return this};N[_P].ez=function(){return!(!this.ng)};N[_P].gz=function(){return this.za!==null&&this.za.toString()!==""};N[_P].bf=function(a){this.Cc();delete this.Xa;if(a instanceof jg){this.za=a;this.za.A=this;this.za.af(this.Ic)}else this.za=new jg(a,this,this.Ic);return this};N[_P].oj=function(){return this.za.toString()};N[_P].Fc=function(){return this.za};N[_P].u=
function(a,b){this.Cc();delete this.Xa;this.za.set(a,b);return this};N[_P].Eg=function(a,b){this.Cc();delete this.Xa;if(!kc(b))b=[i(b)];this.za.qE(a,b);return this};N[_P].Uf=function(a){return this.za.get(a)};N[_P].vq=function(){return this.Mf};N[_P].Nk=function(a,b){this.Cc();delete this.Xa;this.Mf=b?qg(a):a;return this};N[_P].dz=function(){return!(!this.Mf)};N[_P].jn=function(){this.Cc();this.u("zx",dd());return this};N[_P].Cc=function(){if(this.Qz)throw Error("Tried to modify a read-only Uri");
};N[_P].af=function(a){this.Ic=a;if(this.za)this.za.af(a)};N[_P].Jx=function(){return this.Ic};var rg=function(a,b){return a instanceof N?a.clone():new N(a,b)},pg=function(a,b,c,d,e,f,g,h){var j=new N(null,h);j.ni(a);j.Tk(b);j.Mk(c);j.Sk(d);j.li(e);j.bf(f);j.Nk(g);return j},qg=function(a){return a?ha(a):""},mg=function(a){if(mc(a))return da(a);return null},sg=/^[a-zA-Z0-9\-_.!~*'():\/;?]*$/,kg=function(a,b){var c=null;if(mc(a)){c=a;if(!sg.test(c))c=encodeURI(a);if(c.search(b)>=0)c=c.replace(b,tg)}return c},
tg=function(a){var b=a.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)},ug=null,ig=function(){if(!ug)ug=/^(?:([^:\/?#]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;return ug},lg=/[#\/\?@]/g,ng=/[\#\?]/g,og=/#/g,jg=function(a,b,c){this.ka=new ef;this.A=b;this.Ic=!(!c);if(a){var d=a.split("&");for(var e=0;e<d[t];e++){var f=d[e].indexOf("="),g,h;if(f>=0){g=d[e].substring(0,f);h=d[e].substring(f+1)}else g=d[e];g=Kc(g);g=this.Nd(g);this.add(g,
h?Kc(h):"")}}};jg[_P].U=0;jg[_P].f=function(){return this.U};jg[_P].add=function(a,b){this.dg();a=this.Nd(a);if(!this.Ra(a))this.ka.set(a,b);else{var c=this.ka.get(a);if(kc(c))c.push(b);else this.ka.set(a,[c,b])}this.U++;return this};Ia(jg[_P],function(a){a=this.Nd(a);if(this.ka.Ra(a)){this.dg();var b=this.ka.get(a);if(kc(b))this.U-=b[t];else this.U--;return this.ka.remove(a)}return false});Na(jg[_P],function(){this.dg();this.ka.clear();this.U=0});jg[_P].Ra=function(a){a=this.Nd(a);return this.ka.Ra(a)};
jg[_P].gb=function(){var a=this.ka.wa(),b=this.ka.gb(),c=[];for(var d=0;d<b[t];d++){var e=a[d];if(kc(e))for(var f=0;f<e[t];f++)c.push(b[d]);else c.push(b[d])}return c};jg[_P].wa=function(a){var b;if(a){var c=this.Nd(a);if(this.Ra(c)){var d=this.ka.get(c);if(kc(d))return d;else{b=[];b.push(d)}}else b=[]}else{var e=this.ka.wa();b=[];for(var f=0;f<e[t];f++){var g=e[f];if(kc(g))Ed(b,g);else b.push(g)}}return b};jg[_P].set=function(a,b){this.dg();a=this.Nd(a);if(this.Ra(a)){var c=this.ka.get(a);if(kc(c))this.U-=
c[t];else this.U--}this.ka.set(a,b);this.U++;return this};jg[_P].get=function(a,b){a=this.Nd(a);if(this.Ra(a)){var c=this.ka.get(a);return kc(c)?c[0]:c}else return b};jg[_P].qE=function(a,b){this.dg();a=this.Nd(a);if(this.Ra(a)){var c=this.ka.get(a);if(kc(c))this.U-=c[t];else this.U--}if(b[t]>0){this.ka.set(a,b);this.U+=b[t]}};na(jg[_P],function(){if(this.Xa)return this.Xa;var a=[],b=0,c=this.ka.gb();for(var d=0;d<c[t];d++){var e=c[d],f=Jc(e),g=this.ka.get(e);if(kc(g))for(var h=0;h<g[t];h++){if(b>
0)a.push("&");a.push(f,"=",Jc(g[h]));b++}else{if(b>0)a.push("&");a.push(f,"=",Jc(g));b++}}return this.Xa=a.join("")});jg[_P].dg=function(){delete this.Xa;if(this.A)delete this.A.Xa};jg[_P].clone=function(){var a=new jg;a.ka=this.ka.clone();return a};jg[_P].Nd=function(a){var b=i(a);if(this.Ic)b=b.toLowerCase();return b};jg[_P].af=function(a){var b=a&&!this.Ic;if(b){this.dg();jf(this.ka,function(c,d){var e=d.toLowerCase();if(d!=e){this.remove(d);this.add(e,c)}},this)}this.Ic=a};jg[_P].extend=function(){for(var a=
0;a<arguments[t];a++){var b=arguments[a];jf(b,function(c,d){this.add(d,c)},this)}};var vg=function(a,b){M.call(this,null,b,null);this.A=a?new N(a):null};F(vg,M);vg[_P].lb=Pf;vg.dataSources={};vg[_P].load=function(){if(this.A){vg.dataSources[this.Sa]=this;Vf.info("Sending JS request for DataSource "+this.F()+" to "+this.A);this.lb="LOADING";var a=new N(this.A);a.Eg("callback","JsonReceive."+this.Sa);B.JsonReceive[this.Sa]=D(this.hC,this);var b=ie("script");b.src=a;be("head")[0].appendChild(b)}else{this.D={};this.lb=Pf}};vg[_P].hC=function(a){this.Dt(a);this.lb="LOADED";J().v(this.F())};
B.JsonReceive={};var wg=function(){};wg[_P].Af=false;wg[_P].Mz=function(){return this.Af};wg[_P].dispose=function(){if(!this.Af){this.m();this.Af=true}};wg[_P].m=function(){};var O=function(a,b){Ma(this,a);Ea(this,b);Ba(this,this[y])};F(O,wg);O[_P].Vd=false;O[_P].xg=true;O[_P].stopPropagation=function(){this.Vd=true};O[_P].preventDefault=function(){this.xg=false};var xg=function(a,b){wg.call(this);this.LA=b;this.Nf=[];this.Vv(a)};F(xg,wg);xg[_P].Ll=null;xg[_P].Rl=null;xg[_P].ki=function(a){this.Ll=a};xg[_P].xt=function(a){this.Rl=a};xg[_P].gd=function(){if(this.Nf[t])return this.Nf.pop();return this.vp()};xg[_P].Ue=function(a){if(this.Nf[t]<this.LA)this.Nf.push(a);else this.Kp(a)};xg[_P].Vv=function(a){if(a>this.LA)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.Nf.push(this.vp())};xg[_P].vp=function(){return this.Ll?
this.Ll():{}};xg[_P].Kp=function(a){if(this.Rl)this.Rl(a);else if(oc(a.dispose))a.dispose();else for(var b in a)delete a[b]};xg[_P].m=function(){xg.B.m.call(this);var a=this.Nf;while(a[t])this.Kp(a.pop());this.Nf=null};var yg=function(a,b){if(a)this.init(a,b)};F(yg,O);Ma(yg[_P],null);Ea(yg[_P],null);Ba(yg[_P],null);yg[_P].relatedTarget=null;yg[_P].offsetX=0;yg[_P].offsetY=0;yg[_P].clientX=0;yg[_P].clientY=0;Fa(yg[_P],0);Ga(yg[_P],0);yg[_P].button=0;Ja(yg[_P],0);yg[_P].charCode=0;yg[_P].ctrlKey=false;yg[_P].altKey=false;yg[_P].shiftKey=false;yg[_P].metaKey=false;yg[_P].Dc=null;yg[_P].init=function(a,b){Ma(this,a[Mb]);Ea(this,a[y]||a.srcElement);Ba(this,b);this.relatedTarget=a[Za]?a[Za]:(this[Mb]==zg?a.fromElement:
(this[Mb]==Ag?a.toElement:null));this.offsetX=typeof a.layerX=="number"?a.layerX:a.offsetX;this.offsetY=typeof a.layerY=="number"?a.layerY:a.offsetY;this.clientX=typeof a[$b]=="number"?a[$b]:a.pageX;this.clientY=typeof a[ac]=="number"?a[ac]:a.pageY;Fa(this,a[xb]||0);Ga(this,a[yb]||0);this.button=a[mb];Ja(this,a[Db]||0);this.charCode=a[Cb]||(this[Mb]==Bg?a[Db]:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Dc=a;this.xg=null;this.Vd=null};yg[_P].stopPropagation=
function(){this.Vd=true;if(this.Dc.stopPropagation)this.Dc.stopPropagation();else this.Dc.cancelBubble=true};yg[_P].preventDefault=function(){this.xg=false;if(!this.Dc.preventDefault){this.Dc.returnValue=false;try{Ja(this.Dc,-1)}catch(a){}}else this.Dc.preventDefault()};yg[_P].dq=function(){return this.Dc};yg[_P].m=function(){yg.B.m.call(this);this.Dc=null};var Cg=function(){},Dg=0;Cg[_P].Vm=null;Cg[_P].listener=null;Cg[_P].proxy=null;Cg[_P].src=null;Ma(Cg[_P],null);Cg[_P].capture=null;Cg[_P].handler=null;Cg[_P].key=0;Cg[_P].removed=false;Cg[_P].Cl=false;Cg[_P].init=function(a,b,c,d,e,f){if(oc(a))this.Vm=true;else if(a&&a.o&&oc(a.o))this.Vm=false;else throw Error("Invalid listener argument");this.listener=a;this.proxy=b;this.src=c;Ma(this,d);this.capture=!(!e);this.handler=f;this.Cl=false;this.key=++Dg;this.removed=false};Cg[_P].o=function(a){if(this.Vm)return this.listener.call(this.handler||
this.src,a);return this.listener.o.call(this.listener,a)};var Eg={},Fg={},Gg={},Hg=new xg(0,600);Hg.ki(function(){return{U:0}});Hg.xt(function(a){a.U=0});var Ig=new xg(0,600);Ig.ki(function(){return[]});Ig.xt(function(a){pa(a,0);delete a.ak;delete a.js});var Jg=new xg(0,600);Jg.ki(function(){var a=function(b){return Kg.call(a.src,a.key,b)};return a});var Lg=function(){return new Cg},Mg=new xg(0,600);Mg.ki(Lg);var Ng=function(){return new yg},Og=function(){var a=null;if(G){a=new xg(0,600);a.ki(Ng)}return a},Pg=Og(),Qg="on",Rg={},P=function(a,b,c,d,e){if(!b)throw Error("Invalid event type");
else if(kc(b)){for(var f=0;f<b[t];f++)P(a,b[f],c,d,e);return null}var g=!(!d),h=Fg;if(!(b in h))h[b]=Hg.gd();h=h[b];if(!(g in h)){h[g]=Hg.gd();h.U++}h=h[g];var j=sc(a),k,l;if(!h[j]){k=h[j]=Ig.gd();h.U++}else{k=h[j];for(var f=0;f<k[t];f++){l=k[f];if(l.listener==c&&l.handler==e){if(l.removed)break;return k[f].key}}}var p=Jg.gd();p.src=a;l=Mg.gd();l.init(c,p,a,b,g,e);var s=l.key;p.key=s;k.push(l);Eg[s]=l;if(!Gg[j])Gg[j]=Ig.gd();Gg[j].push(l);if(a.addEventListener){if(a==B||!a.zp)a.addEventListener(b,
p,g)}else a.attachEvent(Sg(b),p);return s},Tg=function(a,b,c,d,e){if(kc(b)){for(var f=0;f<b[t];f++)Tg(a,b[f],c,d,e);return null}var g=P(a,b,c,d,e),h=Eg[g];h.Cl=true;return g},Ug=function(a,b,c,d,e){if(kc(b)){for(var f=0;f<b[t];f++)Ug(a,b[f],c,d,e);return null}var g=!(!d),h=Vg(a,b,g);if(!h)return false;for(var f=0;f<h[t];f++)if(h[f].listener==c&&h[f][rb]==g&&h[f].handler==e)return Wg(h[f].key);return false},Wg=function(a){if(!Eg[a])return false;var b=Eg[a];if(b.removed)return false;var c=b.src,d=b[Mb],
e=b.proxy,f=b[rb];if(c.removeEventListener){if(c==B||!c.zp)c.removeEventListener(d,e,f)}else if(c.detachEvent)c.detachEvent(Sg(d),e);var g=sc(c),h=Fg[d][f][g];if(Gg[g]){var j=Gg[g];Cd(j,b);if(j[t]==0)delete Gg[g]}b.removed=true;h.js=true;Xg(d,f,g,h);delete Eg[a];return true},Xg=function(a,b,c,d){if(!d.ak)if(d.js){for(var e=0,f=0;e<d[t];e++){if(d[e].removed){Mg.Ue(d[e]);continue}if(e!=f)d[f]=d[e];f++}pa(d,f);d.js=false;if(f==0){Ig.Ue(d);delete Fg[a][b][c];Fg[a][b].U--;if(Fg[a][b].U==0){Hg.Ue(Fg[a][b]);
delete Fg[a][b];Fg[a].U--}if(Fg[a].U==0){Hg.Ue(Fg[a]);delete Fg[a]}}}},Yg=function(a,b,c){var d=0,e=a==null,f=b==null,g=c==null;c=!(!c);if(!e){var h=sc(a);if(Gg[h]){var j=Gg[h];for(var k=j[t]-1;k>=0;k--){var l=j[k];if((f||b==l[Mb])&&(g||c==l[rb])){Wg(l.key);d++}}}}else Id(Gg,function(p){for(var s=p[t]-1;s>=0;s--){var C=p[s];if((f||b==C[Mb])&&(g||c==C[rb])){Wg(C.key);d++}}});return d},Vg=function(a,b,c){var d=Fg;if(b in d){d=d[b];if(c in d){d=d[c];var e=sc(a);if(d[e])return d[e]}}return null},Zg=function(a,
b,c,d,e){var f=!(!d),g=Vg(a,b,f);if(g)for(var h=0;h<g[t];h++)if(g[h].listener==c&&g[h][rb]==f&&g[h].handler==e)return g[h];return null},Q="click",$g="mousedown",ah="mouseup",zg="mouseover",Ag="mouseout",Bg="keypress",bh="keydown",ch="change",dh="resize",eh="readystatechange",Sg=function(a){if(a in Rg)return Rg[a];return Rg[a]=Qg+a},gh=function(a,b,c,d){var e=1,f=Fg;if(b in f){f=f[b];if(c in f){f=f[c];var g=sc(a);if(f[g]){var h=f[g];if(!h.ak)h.ak=1;else h.ak++;try{var j=h[t];for(var k=0;k<j;k++){var l=
h[k];if(l&&!l.removed)e&=fh(l,d)!==false}}finally{h.ak--;Xg(b,c,g,h)}}}}return ba(e)},fh=function(a,b){var c=a.o(b);if(a.Cl)Wg(a.key);return c},hh=function(a,b){if(mc(b))b=new O(b,a);else if(!(b instanceof O)){var c=b;b=new O(b[Mb],a);Sd(b,c)}else Ea(b,b[y]||a);var d=1,e,f=b[Mb],g=Fg;if(!(f in g))return true;g=g[f];var h=true in g,j=false in g;if(h){e=[];for(var k=a;k;k=k.nj())e.push(k);for(var l=e[t]-1;!b.Vd&&l>=0;l--){Ba(b,e[l]);d&=gh(e[l],b[Mb],true,b)&&b.xg!=false}}if(j)if(h)for(var l=0;!b.Vd&&
l<e[t];l++){Ba(b,e[l]);d&=gh(e[l],b[Mb],false,b)&&b.xg!=false}else for(var p=a;!b.Vd&&p;p=p.nj()){Ba(b,p);d&=gh(p,b[Mb],false,b)&&b.xg!=false}return ba(d)},Kg=function(a,b){if(!Eg[a])return true;var c=Eg[a],d=c[Mb],e=Fg;if(!(d in e))return true;e=e[d];var f;if(G){var g=b||gc("window.event"),h=true in e;if(h){if(g[Db]<0||g.returnValue!=ca)return true;ih(g)}sc(c.src);var j=Pg.gd();j.init(g,this);f=true;try{if(h){var k=Ig.gd();for(var l=j.currentTarget;l;l=l[z])k.push(l);for(var p=k[t]-1;!j.Vd&&p>=0;p--){Ba(j,
k[p]);f&=gh(k[p],d,true,j)}for(var p=0;!j.Vd&&p<k[t];p++){Ba(j,k[p]);f&=gh(k[p],d,false,j)}}else f=fh(c,j)}finally{if(k){pa(k,0);Ig.Ue(k)}j.dispose();Pg.Ue(j)}return f}var s=new yg(b,this);try{f=fh(c,s)}finally{s.dispose()}return f},ih=function(a){var b=false;if(a[Db]==0)try{Ja(a,-1);return}catch(c){b=true}if(b||a.returnValue==ca)a.returnValue=true};var R=function(){};F(R,wg);R[_P].zp=true;R[_P].un=null;R[_P].nj=function(){return this.un};R[_P].Zn=function(a){this.un=a};R[_P].addEventListener=function(a,b,c,d){P(this,a,b,c,d)};R[_P].removeEventListener=function(a,b,c,d){Ug(this,a,b,c,d)};Aa(R[_P],function(a){return hh(this,a)});R[_P].m=function(){R.B.m.call(this);Yg(this);this.un=null};var jh=function(a){if(/^\s*$/.test(a))return false;var b=/\\["\\\/bfnrtu]/g,c=/"[^"\\\n\r\u2028\u2029\x00-\x1f\x7f-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,d=/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,e=/^[\],:{}\s\u2028\u2029]*$/;return e.test(a.replace(b,"@").replace(c,"]").replace(d,""))},kh=function(a){a=i(a);if(typeof a.parseJSON=="function")return a.parseJSON();if(jh(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);},lh=function(a){return eval("("+
a+")")},mh=function(){};mh[_P].serialize=function(a){if(a!=null&&typeof a.toJSONString=="function")return a.toJSONString();var b=[];this.Nn(a,b);return b.join("")};mh[_P].Nn=function(a,b){switch(typeof a){case "string":this.pt(a,b);break;case "number":this.vD(a,b);break;case "boolean":b.push(a);break;case "undefined":b.push("null");break;case "object":if(a==null){b.push("null");break}if(kc(a)){this.uD(a,b);break}this.wD(a,b);break;default:throw Error("Unknown type: "+typeof a);}};var nh={'"':'\\"',
"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"};mh[_P].pt=function(a,b){b.push('"',a.replace(/[\\\"\x00-\x1f\x80-\uffff]/g,function(c){if(c in nh)return nh[c];var d=c.charCodeAt(0),e="\\u";if(d<16)e+="000";else if(d<256)e+="00";else if(d<4096)e+="0";return nh[c]=e+d.toString(16)}),'"')};mh[_P].vD=function(a,b){b.push(isFinite(a)&&!ja(a)?a:"null")};mh[_P].uD=function(a,b){var c=a[t];b.push("[");var d="";for(var e=0;e<c;e++){b.push(d);this.Nn(a[e],
b);d=","}b.push("]")};mh[_P].wD=function(a,b){b.push("{");var c="";for(var d in a){b.push(c);this.pt(d,b);b.push(":");this.Nn(a[d],b);c=","}b.push("}")};var ph=function(a,b){R.call(this);this.cg=a||1;this.al=b||oh;this.$o=D(this.cF,this);this.Oe=vc()};F(ph,R);ph[_P].enabled=false;var oh=B.window,qh=0.8;ph[_P].qa=null;ph[_P].setInterval=function(a){this.cg=a;if(this.qa&&this.enabled){this.stop();this.start()}else if(this.qa)this.stop()};ph[_P].cF=function(){if(this.enabled){var a=vc()-this.Oe;if(a>0&&a<this.cg*qh){this.qa=this.al.setTimeout(this.$o,this.cg-a);return}this.vw();if(this.enabled){this.qa=this.al.setTimeout(this.$o,this.cg);this.Oe=vc()}}};
ph[_P].vw=function(){this.dispatchEvent("tick")};ph[_P].start=function(){this.enabled=true;if(!this.qa){this.qa=this.al.setTimeout(this.$o,this.cg);this.Oe=vc()}};ph[_P].stop=function(){this.enabled=false;this.al.clearTimeout(this.qa);this.qa=null};ph[_P].m=function(){ph.B.m.call(this);this.stop();this.al=null};var rh=function(a,b,c){if(oc(a)){if(c)a=D(a,c)}else if(a&&typeof a.o=="function")a=D(a.o,a);else throw Error("Invalid listener argument");return oh.setTimeout(a,b||0)},sh=function(a){oh.clearTimeout(a)};;var th="complete";var uh=function(){if(!id)return;this.ke={};this.Eo={};this.lo=[]},vh=function(a){return mc(a)?a:(pc(a)?sc(a):"")};uh[_P].Q=If("goog.net.xhrMonitor");uh[_P].zk=function(a){if(!id)return;var b=vh(a);this.Q.finest("Pushing context: "+a+" ("+b+")");this.lo.push(b)};uh[_P].vk=function(){if(!id)return;var a=this.lo.pop();this.Q.finest("Popping context: "+a);this.iF(a)};uh[_P].Kz=function(a){if(!id)return true;var b=this.ke[vh(a)];this.Q.fine("Context is safe : "+a+" - "+b);return!b};uh[_P].HA=function(a){if(!id)return;
var b=sc(a);this.Q.fine("Opening XHR : "+b);for(var c=0;c<this.lo[t];c++){var d=this.lo[c];this.Bi(this.ke,d,b);this.Bi(this.Eo,b,d)}};uh[_P].GA=function(a){if(!id)return;var b=sc(a);this.Q.fine("Closing XHR : "+b);delete this.Eo[b];for(var c in this.ke){Cd(this.ke[c],b);if(this.ke[c][t]==0)delete this.ke[c]}};uh[_P].iF=function(a){var b=this.Eo[a],c=this.ke[a];if(b&&c){this.Q.finest("Updating dependent contexts");ud(b,function(d){ud(c,function(e){this.Bi(this.ke,d,e);this.Bi(this.Eo,e,d)},this)},
this)}};uh[_P].Bi=function(a,b,c){if(!a[b])a[b]=[];if(!xd(a[b],c))a[b].push(c)};var wh=new uh;var yh=function(){return xh()};var xh=null,zh=null,Ah=null,Bh=function(a,b){xh=a;zh=b;Ah=null},Dh=function(){var a=Ch();return a?new ActiveXObject(a):new XMLHttpRequest},Eh=function(){var a=Ch(),b={};if(a){b[0]=true;b[1]=true}return b};Bh(Dh,Eh);var Fh=null,Ch=function(){if(!Fh&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var b=0;b<a[t];b++){var c=a[b];try{new ActiveXObject(c);Fh=
c;return c}catch(d){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return Fh};var S=function(){R.call(this);this.headers=new ef};F(S,R);S[_P].Q=If("goog.net.XhrLite");S[_P].ma=false;S[_P].N=null;S[_P].ll=null;S[_P].Lc="";S[_P].Ir="";S[_P].Nb=0;S[_P].Lh="";S[_P].$l=false;S[_P].Sm=false;S[_P].ae=0;S[_P].ud=null;S[_P].bo=function(a){this.ae=n.max(0,a)};Ha(S[_P],function(a,b,c,d){if(this.ma)throw Error("[goog.net.XhrLite] Object is active with another request");var e=b||"GET";this.Lc=a;this.Lh="";this.Nb=0;this.Ir=e;this.ma=true;this.N=new yh;this.ll=Ah||(Ah=zh());wh.HA(this.N);
oa(this.N,D(this.Xh,this));try{this.Ma("Opening Xhr");this.N.open(e,a,true)}catch(f){this.Ma("Error opening Xhr: "+f[ob]);this.Tp(5,f);return}var g=c?i(c):"",h=this.headers.clone();if(d)jf(d,function(j,k){h.set(k,j)});if(e=="POST"&&!h.Ra("Content-Type"))h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");jf(h,function(j,k){this.N.setRequestHeader(k,j)},this);try{if(this.ud){oh.clearTimeout(this.ud);this.ud=null}if(this.ae>0){this.Ma("Will abort after "+this.ae+"ms if incomplete");
this.ud=oh.setTimeout(D(this.be,this),this.ae)}this.Ma("Sending request");this.$l=false;this.Sm=true;this.N.send(g);this.Sm=false}catch(f){this.Ma("Send error: "+f[ob]);this.Tp(5,f)}});Aa(S[_P],function(a){if(this.N){wh.zk(this.N);try{S.B[qb].call(this,a)}finally{wh.vk()}}else S.B[qb].call(this,a)});S[_P].be=function(){if(typeof dc=="undefined"){}else if(this.N){this.Lh="Timed out after "+this.ae+"ms, aborting";this.Nb=8;this.Ma(this.Lh);this.dispatchEvent("timeout");this.abort(8)}};S[_P].Tp=function(a,
b){this.ma=false;if(this.N)this.N.abort();this.Lh=b;this.Nb=a;this.Hp();this.Fi()};S[_P].Hp=function(){if(!this.$l){this.$l=true;this.dispatchEvent(th);this.dispatchEvent("error")}};S[_P].abort=function(a){if(this.N){this.Ma("Aborting");this.ma=false;this.N.abort();this.Nb=a||7;this.dispatchEvent(th);this.dispatchEvent("abort");this.Fi()}};S[_P].m=function(){if(this.N){this.ma=false;this.N.abort();this.Fi(true)}S.B.m.call(this)};S[_P].Xh=function(){if(!this.ma)return;if(typeof dc=="undefined"){}else if(this.ll[1]&&
this.oh()==4&&this.Gc()==2)this.Ma("Local request error detected and ignored");else{if(this.Sm&&this.oh()==4){rh(this.Xh,0,this);return}this.dispatchEvent("readystatechange");if(this.Le()){this.Ma("Request complete");this.ma=false;if(this.Kc()){this.dispatchEvent(th);this.dispatchEvent("success")}else{this.Nb=6;this.Lh=this.Oq()+" ["+this.Gc()+"]";this.Hp()}this.Fi()}}};S[_P].Fi=function(a){if(this.N){oa(this.N,this.ll[0]?hc:null);var b=this.N;this.N=null;this.ll=null;if(this.ud){oh.clearTimeout(this.ud);
this.ud=null}if(!a){wh.zk(b);this.dispatchEvent("ready");wh.vk()}wh.GA(b)}};S[_P].Eh=function(){return this.ma};S[_P].Le=function(){return this.oh()==4};S[_P].Kc=function(){switch(this.Gc()){case 0:case 200:case 204:case 304:return true;default:return false}};S[_P].oh=function(){return this.N?this.N[Ab]:0};S[_P].Gc=function(){try{return this.oh()>2?this.N.status:-1}catch(a){this.Q.warning("Can not get status: "+a[ob]);return-1}};S[_P].Oq=function(){try{return this.oh()>2?this.N.statusText:""}catch(a){this.Q.fine("Can not get status: "+
a[ob]);return""}};S[_P].wm=function(){return this.Lc};S[_P].Ta=function(){return this.N?this.N[ib]:""};S[_P].Dm=function(){return this.N?this.N.responseXML:null};S[_P].hd=function(){return this.N?kh(this.N[ib]):ca};S[_P].getResponseHeader=function(a){return this.N&&this.Le()?this.N.getResponseHeader(a):ca};S[_P].Ma=function(a){this.Q.fine(a+" ["+this.Ir+" "+this.Lc+" "+this.Gc()+"]")};var Gh=function(a,b,c,d,e){cg.call(this,{},b,null);if(a){this.A=new N(a);this.N=new S;this.HH=!(!e);P(this.N,th,this.Cv,false,this)}else this.A=null;this.Xk=c;this.Yl=d};F(Gh,cg);Gh[_P].Xk=null;Gh[_P].Yl=null;Gh[_P].bf=function(a){this.za=a};Gh[_P].load=function(){Vf.info("Sending JS request for DataSource "+this.F()+" to "+this.A);if(this.A)if(this.HH){var a;a=!this.za?this.A.Fc():this.za;var b=this.A.clone();b.bf(null);this.N.send(b,"POST",a)}else this.N.send(this.A);else this.lb=Pf};Gh[_P].rd=
function(){J().v(this.F())};Gh[_P].Cv=function(){if(this.N.Kc()){Vf.info("Got data for DataSource "+this.F());var a=this.N.Ta();if(this.Xk){var b=a.indexOf(this.Xk);a=a.substring(b+this.Xk[t])}if(this.Yl){var c=a.lastIndexOf(this.Yl);a=a.substring(0,c)}try{var d=eval("["+a+"][0]");this.dm(d);this.lb="LOADED"}catch(e){this.lb="FAILED";Vf.severe("Failed to parse data: "+e[ob])}B.setTimeout(D(this.rd,this),0)}else{Vf.info("Data retrieve failed for DataSource "+this.F());this.lb="FAILED"}};var Hh=function(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(ga.implementation&&ga.implementation.createDocument)return ga.implementation.createDocument(b||"",a||"",null);else if(typeof ActiveXObject!="undefined"){var c=new ActiveXObject("MSXML2.DOMDocument");if(c){if(a)c.appendChild(c.createNode(1,a,b||""));return c}}throw Error("Your browser does not support creating new documents");},Ih=function(a){if(typeof DOMParser!="undefined")return(new DOMParser).parseFromString(a,
"application/xml");else{var b=new ActiveXObject("MSXML2.DOMDocument");b.loadXML(a);return b}};var Jh=function(a,b,c){this.L=b;this.Sa=c||(a?a[sb]:null);this.RD(a)};Jh[_P].RD=function(a){this.Nc=a;if(a!=null)switch(a[fb]){case 2:case 3:this.Va=a[Yb];break;case 1:if(a[Nb][t]==1&&a[Eb][fb]==3)this.Va=a[Eb][Yb]}};Jh[_P].Cb=function(){if(this.oa)return;var a=new Tf;if(this.Nc!=null){var b=this.Nc[Nb];for(var c=0,d;d=b[c];c++)if(d[fb]!=3||!/^[\r\n\t ]*$/.test(d[Yb])){var e=new Jh(d,this,d[sb]);a.add(e)}}this.oa=a};Jh[_P].Mv=function(){if(this.Su)return;var a=new Tf;if(this.Nc!=null&&this.Nc[Qb]!=
null){var b=this.Nc[Qb];for(var c=0,d;d=b[c];c++){var e=new Jh(d,this,d[sb]);a.add(e)}}this.Su=a};Jh[_P].get=function(){this.Cb();return this.Va!=null?this.Va:this.oa};Jh[_P].set=function(){throw Error("Can't set on XmlDataSource yet");};Jh[_P].l=function(a){if(a&&a=="@*"){this.Mv();return this.Su}else if(a==null||a=="*"){this.Cb();return this.oa}else throw Error("Unsupported selector");};Jh[_P].j=function(a){if(Bc(a,"@")){var b=this.Nc.getAttributeNode(a.substring(1));return b?new Jh(b,this):null}else return this.l().get(a)};
Jh[_P].e=function(a){if(Bc(a,"@")){var b=this.Nc.getAttributeNode(a.substring(1));return b?b[Yb]:null}else{var b=this.j(a);return b?b.get():null}};Jh[_P].F=function(){return this.Sa};Jh[_P].pd=function(a){this.Sa=a};Jh[_P].P=function(){var a="";if(this.L)a=this.L.P()+(this.Sa.indexOf("[")!=-1?"":"/");return a+this.Sa};Jh[_P].load=function(){};var Kh=function(){return Hh("nothing")},Lh=function(a,b){Jh.call(this,null,null,b);this.A=a?new N(a):null};F(Lh,Jh);Lh[_P].lb=Pf;Lh[_P].load=function(){if(this.A){Vf.info("Sending XML request for DataSource "+
this.F()+" to "+this.A);this.lb="LOADING";this.FG=new Mh(this.A,D(this.rd,this),D(this.$w,this))}else{this.Nc=Kh();this.lb=Pf}};Lh[_P].rd=function(){Vf.info("Got data for DataSource "+this.F());var a=this.FG.fy(),b=a.responseXML;if(b&&!b.hasChildNodes()&&pc(a[ib]))b=Ih(a[ib]);if(!b||!b.hasChildNodes()){this.lb="FAILED";this.Nc=Kh()}else{this.lb="LOADED";this.Nc=b[bc]}if(this.F())J().v(this.F())};Lh[_P].$w=function(){Vf.info("Data retrieve failed for DataSource "+this.F());this.lb="FAILED";this.Nc=
Kh();if(this.F())J().v(this.F())};var Mh=function(a,b,c){this.vg=null;this.UG=b;this.wB=c||this.Jy;this.A=new N(a);this.lA()};Mh[_P].lA=function(){this.vg=new yh;if(this.vg)try{oa(this.vg,D(this.Xh,this));this.vg.open("GET",i(this.A),true);this.vg.send(null)}catch(a){this.wB.call(this)}};Mh[_P].Xh=function(){var a=this.vg,b=a[Ab];if(b==4){var c=a.status,d;d=c==200||c==0?D(this.CB,this):D(this.xB,this);window.setTimeout(d,10)}};Mh[_P].CB=function(){this.UG(this)};Mh[_P].xB=function(){this.wB(this)};
Mh[_P].Jy=function(){throw Error("Error fetching data from URL: "+this.A);};Mh[_P].fy=function(){return this.vg};var Nh=function(a){this.bs=a||100;this.sf=[]};Nh[_P].Qh=0;Nh[_P].add=function(a){this.sf[this.Qh]=a;this.Qh=(this.Qh+1)%this.bs};Nh[_P].get=function(a){a=this.ms(a);return this.sf[a]};Nh[_P].set=function(a,b){a=this.ms(a);this.sf[a]=b};Nh[_P].f=function(){return this.sf[t]};Na(Nh[_P],function(){pa(this.sf,0);this.Qh=0});Nh[_P].wa=function(){return this.Wx(this.f())};Nh[_P].Wx=function(a){var b=this.f(),c=this.f()-a,d=[];for(var e=c;e<b;e++)d[e]=this.get(e);return d};Nh[_P].gb=function(){var a=[],
b=this.f();for(var c=0;c<b;c++)a[c]=c;return a};Nh[_P].Ra=function(a){return a<this.f()};Nh[_P].ms=function(a){if(a>=this.sf[t])throw Error("Out of bounds exception");if(this.sf[t]<this.bs)return a;return(this.Qh+m(a))%this.bs};var Oh=function(){this.nC=vc()},Ph=new Oh;Oh[_P].set=function(a){this.nC=a};Pa(Oh[_P],function(){this.set(vc())});Oh[_P].get=function(){return this.nC};var Qh=function(a){this.xn=a||"";this.PE=Ph};Qh[_P].ho=true;Qh[_P].Kt=true;Qh[_P].Jt=true;Qh[_P].oi=false;Qh[_P].Lf=function(){throw Error("Must override formatRecord");};var Sh=function(a){var b=new Date(a.Cq());return Rh(b.getFullYear()-2000)+Rh(b.getMonth()+1)+Rh(b.getDate())+" "+Rh(b.getHours())+":"+Rh(b.getMinutes())+":"+Rh(b.getSeconds())+"."+Rh(n.floor(b.getMilliseconds()/10))},Rh=function(a){if(a<10)return"0"+a;return i(a)},Th=function(a,b){var c=a.Cq()-b,d=c/1000,e=d.toFixed(3),f=0;if(d<
1)f=2;else while(d<100){f++;d*=10}while(f-- >0)e=" "+e;return e},Uh=function(a){Qh.call(this,a)};F(Uh,Qh);Uh[_P].oi=true;Uh[_P].Lf=function(a){var b;switch(a.lh()[v]){case zf[v]:b="dbg-sh";break;case Af[v]:b="dbg-sev";break;case Bf[v]:b="dbg-w";break;case Cf[v]:b="dbg-i";break;case Ef[v]:default:b="dbg-f";break}var c=[];c.push(this.xn," ");if(this.ho)c.push("[",Sh(a),"] ");if(this.Kt)c.push("[",Wc(Th(a,this.PE.get())),"s] ");if(this.Jt)c.push("[",Rc(a.xm()),"] ");c.push('<span class="',b,'">',Lc(Wc(Rc(a.Bq()))));
if(this.oi&&a.rq())c.push("<br>",Lc(Wc(a.sq())));c.push("</span><br>");return c.join("")};var Vh=function(a){Qh.call(this,a)};F(Vh,Qh);Vh[_P].Lf=function(a){var b=[];b.push(this.xn," ");if(this.ho)b.push("[",Sh(a),"] ");if(this.Kt)b.push("[",Th(a,this.PE.get()),"s] ");if(this.Jt)b.push("[",a.xm(),"] ");b.push(a.Bq(),"\n");if(this.oi&&a.rq())b.push(a.sq(),"\n");return b.join("")};var Wh=function(a,b){this.Pm=a||"";this.xn=b||"";this.Bs=[];this.ct=new Nh(500);this.yk=D(this.ok,this);this.cj=new Uh(this.xn);this.bG={};this.Jk(true);this.Bc=this.hq("enabled")=="1";B.setInterval(D(this.cD,this),7500)};Wh[_P].yF="LOGGING";Wh[_P].R=null;Wh[_P].Co=false;Wh[_P].Pj=false;Wh[_P].ap=null;Wh[_P].Gr=vc();Wh[_P].init=function(){if(this.Bc)this.sn()};Wh[_P].Cg=function(a){this.Bc=a;if(this.Bc){this.sn();if(this.R)this.ku()}this.vt("enabled",a?1:0)};Wh[_P].Jk=function(a){if(a==this.Pj)return;
this.Pj=a;var b=Mf();if(a)b.Jo(this.yk);else b.Ns(this.yk)};Wh[_P].ok=function(a){if(this.bG[a.xm()])return;var b=this.cj.Lf(a);this.CF(b)};Wh[_P].CF=function(a){if(this.Bc){this.sn();this.ct.add(a);this.Do(a)}else this.ct.add(a)};Wh[_P].Do=function(a){this.Bs.push(a);B.clearTimeout(this.ap);if(vc()-this.Gr>750)this.ju();else this.ap=B.setTimeout(D(this.ju,this),250)};Wh[_P].ju=function(){this.Gr=vc();if(this.R){var a=this.R[gb][x],b=a&&a.scrollHeight-(a[Wa]+a.clientHeight)<=100;this.R[gb].write(this.Bs.join(""));
pa(this.Bs,0);if(b)this.R.scrollTo(0,1000000)}};Wh[_P].BF=function(){var a=this.ct.wa();for(var b=0;b<a[t];b++)this.Do(a[b])};Wh[_P].sn=function(){if(this.R&&!this.R.closed||this.Co)return;var a=this.hq("dbg","0,0,800,500").split(","),b=m(a[0]),c=m(a[1]),d=m(a[2]),e=m(a[3]);this.Co=true;this.R=window.open("","dbg"+this.Pm,"width="+d+",height="+e+",toolbar=no,resizable=yes,scrollbars=yes,left="+b+",top="+c+",status=no,screenx="+b+",screeny="+c);if(!this.R)if(!this.tH){ka("Logger popup was blocked");
this.tH=true}this.Co=false;if(this.R)this.ku()};Wh[_P].ku=function(){if(!this.R)return;this.R[gb].open();var a='<style>*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}</style><hr><div class="dbg-ev" style="text-align:center">'+this.yF+"<br><small>Logger: "+this.Pm+"</small></div><hr>";this.Do(a);this.BF()};Wh[_P].vt=function(a,b){a+=this.Pm;ga.cookie=a+"="+da(b)+";expires="+
(new Date(vc()+2592000000)).toUTCString()};Wh[_P].hq=function(a,b){a+=this.Pm;var c=i(ga.cookie),d=c.indexOf(a+"=");if(d!=-1){var e=c.indexOf(";",d);return ha(c.substring(d+a[t]+1,e==-1?c[t]:e))}else return b||""};Wh[_P].cD=function(){if(!this.R||this.R.closed)return;var a=this.R[xb]||this.R.screenLeft||0,b=this.R[yb]||this.R.screenTop||0,c=this.R.outerWidth||800,d=this.R.outerHeight||500;this.vt("dbg",a+","+b+","+c+","+d)};var Xh=function(){this.yk=D(this.ok,this);this.cj=new Vh;this.cj.ho=false;this.cj.oi=false;this.Pj=false;this.GG=""};Xh[_P].Jk=function(a){if(a==this.Pj)return;var b=Mf();if(a)b.Jo(this.yk);else{b.Ns(this.yk);this.logBuffer=""}};Xh[_P].ok=function(a){var b=this.cj.Lf(a);if(window[Kb]&&window[Kb].firebug)switch(a.lh()){case zf:window[Kb].info(b);break;case Af:window[Kb].error(b);break;case Bf:window[Kb].warn(b);break;default:window[Kb].debug(b);break}else if(window[Kb])window[Kb].log(b);else this.GG+=
b};var Yh=null,Zh=function(){if(!Yh)Yh=new Xh;if(ga[kb][Jb].indexOf("Debug=true")!=-1)Yh.Jk(true)};var $h=id&&!sd("1.9a"),ai=function(a,b){if(id){a.setAttribute("role",b);a.roleName=b}},bi=function(a,b,c){if(id)if($h)a.setAttributeNS("http://www.w3.org/2005/07/aaa",b,c);else a.setAttribute("aria-"+b,c)};var di=function(a){R.call(this);this.H=a||Yd();this.KC=ci};F(di,R);var ei=0,ci=null,fi="Component already rendered",gi="Unable to set parent component";di[_P].$=null;di[_P].H=null;di[_P].bg=false;di[_P].b=null;di[_P].KC=null;di[_P].YA=null;di[_P].L=null;di[_P].tc=null;di[_P].ie=null;di[_P].gu=null;di[_P].Ka=function(){return this.$||(this.$=this.Yx())};di[_P].Wn=function(a){if(this.L&&this.L.ie){Md(this.L.ie,this.$);Od(this.L.ie,a,this)}this.$=a};di[_P].ih=function(){return"goog.ui.Component"};di[_P].Kd=
function(){return this.b};di[_P].Qk=function(a){if(this==a)throw Error(gi);if(a&&this.L&&this.L.eq(this.$))throw Error(gi);this.L=a};di[_P].hb=function(){return this.L};di[_P].nj=function(){return this.L};di[_P].Zn=function(){throw Error("Method not supported");};di[_P].Fh=function(){return this.bg};di[_P].p=function(){this.b=this.H.createElement("div")};di[_P].render=function(a){this.Ve(a)};di[_P].Ve=function(a,b){if(this.bg)throw Error(fi);if(!this.b)this.p();if(a)a.insertBefore(this.b,b||null);
else this.H.va()[x].appendChild(this.b);if(!this.L||this.L.Fh())this.Hf()};di[_P].decorate=function(a){if(this.bg)throw Error(fi);else if(a&&this.Ei(a)){this.gu=true;if(!this.H||this.H.va()!=Xd(a))this.H=Yd(a);this.Nl(a);this.Hf()}else throw Error("Invalid element to decorate");};di[_P].Ei=function(){return true};di[_P].Nl=function(a){this.b=a};di[_P].Hf=function(){this.bg=true;this.km(function(a){if(!a.Fh()&&a.Kd())a.Hf()})};di[_P].Kf=function(){this.km(function(a){if(a.Fh())a.Kf()});this.bg=false};
di[_P].m=function(){di.B.m.call(this);if(this.bg)this.Kf();this.km(function(a){a.dispose()});if(!this.gu&&this.b)oe(this.b);this.tc=null;this.ie=null;this.b=null;this.YA=null;this.L=null};di[_P].Yx=function(){return":"+ei++};di[_P].gj=function(){return this.b};di[_P].az=function(){return!(!this.tc)&&this.tc[t]!=0};di[_P].eq=function(a){return this.ie&&a?Pd(this.ie,a)||null:null};di[_P].vx=function(a){return this.tc?this.tc[a]||null:null};di[_P].km=function(a,b){if(this.tc)ud(this.tc,a,b)};di[_P].removeChild=
function(a,b){if(a){var c=mc(a)?a:a.Ka();a=this.eq(c);if(c&&a){Md(this.ie,c);Cd(this.tc,a);if(b){a.Kf();if(a.b)oe(a.b)}a.Qk(null)}}if(!a)throw Error("Child is not in parent component");return a};di[_P].pC=function(a,b){return this.removeChild(this.vx(a),b)};di[_P].En=function(a){while(this.az())this.pC(0,a)};var hi=function(a){this.tb=a};F(hi,wg);var ii=new xg(0,100);hi[_P].listen=function(a,b,c,d,e){if(kc(b)){for(var f=0;f<b[t];f++)this.listen(a,b[f],c,d,e);return}var g=P(a,b,c||this,d||false,e||this.tb||this);if(this.T)this.T[g]=true;else if(this.Ne){this.T=ii.gd();this.T[this.Ne]=true;this.Ne=null;this.T[g]=true}else this.Ne=g};hi[_P].unlisten=function(a,b,c,d,e){if(!this.Ne&&!this.T)return;if(kc(b)){for(var f=0;f<b[t];f++)this.unlisten(a,b[f],c,d,e);return}var g=Zg(a,b,c||this,d||false,e||this.tb||
this);if(g){var h=g.key;Wg(h);if(this.T)Md(this.T,h);else if(this.Ne==h)this.Ne=null}};hi[_P].ug=function(){if(this.T){for(var a in this.T){Wg(a);delete this.T[a]}ii.Ue(this.T);this.T=null}else if(this.Ne)Wg(this.Ne)};hi[_P].m=function(){hi.B.m.call(this);this.ug()};hi[_P].o=function(){throw Error("EventHandler.handleEvent not implemented");};var ji=function(a){if(!G&&!(kd&&sd("525")))return true;if(a>=48&&a<=57)return true;if(a>=96&&a<=106)return true;if(a>=65&&a<=90)return true;if(a==27&&kd)return false;switch(a){case 13:case 27:case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return true;default:return false}},ki=function(a){if(a>=48&&a<=57)return true;if(a>=96&&a<=106)return true;if(a>=65&&a<=90)return true;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return true;
default:return false}};var li=function(a){R.call(this);if(a)this.attach(a)};F(li,R);li[_P].b=null;li[_P].Sj=null;li[_P].Xm=null;li[_P].Tj=null;li[_P].Wj=-1;li[_P].Jh=-1;li[_P].Kr=0;var mi={"3":13,"12":144,"63232":38,"63233":40,"63234":37,"63235":39,"63236":112,"63237":113,"63238":114,"63239":115,"63240":116,"63241":117,"63242":118,"63243":119,"63244":120,"63245":121,"63246":122,"63247":123,"63248":44,"63272":46,"63273":36,"63275":35,"63276":33,"63277":34,"63289":144,"63302":45},ni={Up:38,Down:40,Left:37,Right:39,Enter:13,
F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},oi={61:187},pi=G||kd&&sd("525");li[_P].Bj=function(a){if(pi&&!ji(a[Db]))this.o(a);else this.Jh=id&&a[Db]in oi?oi[a[Db]]:a[Db]};li[_P].Ty=function(){this.Wj=-1};li[_P].o=function(a){var b=a.dq(),c,d;if(G&&a[Mb]==Bg){c=this.Jh;d=c!=13&&c!=27?b[Db]:0}else if(kd&&a[Mb]==Bg){c=this.Jh;d=b[Cb]>=0&&b[Cb]<63232&&ki(c)?b[Cb]:0}else if(hd){c=this.Jh;d=ki(c)?b[Db]:
0}else{c=b[Db]||this.Jh;d=b[Cb]||0}var e=c,f=b.keyIdentifier;if(c){if(c>=63232&&c in mi)e=mi[c];else if(c==25&&a.shiftKey)e=9}else if(f&&f in ni)e=ni[f];var g=e==this.Wj;this.Wj=e;if(kd){if(g&&b.timeStamp-this.Kr<50)return;this.Kr=b.timeStamp}var h=new qi(e,d,g,b);try{this.dispatchEvent(h)}finally{h.dispose()}};li[_P].attach=function(a){if(this.Tj)this.detach();this.b=a;this.Sj=P(this.b,Bg,this);this.Xm=P(this.b,bh,this.Bj,false,this);this.Tj=P(this.b,"keyup",this.Ty,false,this)};li[_P].detach=function(){if(this.Sj){Wg(this.Sj);
Wg(this.Xm);Wg(this.Tj);this.Sj=null;this.Xm=null;this.Tj=null}this.b=null;this.Wj=-1};li[_P].m=function(){li.B.m.call(this);this.detach()};var qi=function(a,b,c,d){yg.call(this,d);Ma(this,"key");Ja(this,a);this.charCode=b;this.repeat=c};F(qi,yg);var ri=function(a,b,c){Ea(this,a);this.handle=b||a;this.Bc=true;this.Vi=false;this.limits=c||new Ee;this.Ja=this[y][ub]||this[y][gb];Fa(this,0);Ga(this,0);this.deltaX=0;this.deltaY=0;P(this.handle,$g,this.Nt,false,this)};F(ri,R);ri[_P].Cg=function(a){this.Bc=a};ri[_P].m=function(){ri.B.m.call(this);Ug(this.handle,$g,this.Nt,false,this);Ug(this.Ja,"mousemove",this.ln,false,this);Ug(this.Ja,ah,this.Xl,false,this);delete this[y];delete this.handle};ri[_P].Nt=function(a){if(this.Bc&&!this.Vi){var b=this.dispatchEvent(new si("start",
this,a[$b],a[ac],a));if(b!==false){P(this.Ja,"mousemove",this.ln,false,this);P(this.Ja,ah,this.Xl,false,this);Fa(this,a[xb]);Ga(this,a[yb]);this.deltaX=this[y][nb];this.deltaY=this[y][Vb];this.Vi=true;a.preventDefault()}}};ri[_P].Xl=function(a){if(this.Vi){this.Vi=false;Ug(this.Ja,"mousemove",this.ln,false,this);Ug(this.Ja,ah,this.Xl,false,this);var b=this.Nr(this.deltaX),c=this.Or(this.deltaY);this.dispatchEvent(new si("end",this,a[$b],a[ac],a,b,c))}};ri[_P].ln=function(a){if(this.Vi&&this.Bc){var b=
a[xb]-this[xb],c=a[yb]-this[yb];this.deltaX+=b;this.deltaY+=c;var d=this.Nr(this.deltaX),e=this.Or(this.deltaY);Fa(this,a[xb]);Ga(this,a[yb]);var f=this.dispatchEvent(new si("beforedrag",this,a[$b],a[ac],a,d,e));if(f!==false){this.hw(d,e);this.dispatchEvent(new si("drag",this,a[$b],a[ac],a,d,e));a.preventDefault()}}};ri[_P].Nr=function(a){var b=this.limits,c=typeof b[tb]!="undefined"?b[tb]:null,d=typeof b[u]!="undefined"?b[u]:0,e=c!=null?c+d:Infinity,f=c!=null?c:-Infinity;return n.min(e,n.max(f,a))};
ri[_P].Or=function(a){var b=this.limits,c=typeof b.top!="undefined"?b.top:null,d=typeof b[A]!="undefined"?b[A]:0,e=c!=null?c+d:Infinity,f=c!=null?c:-Infinity;return n.min(e,n.max(f,a))};ri[_P].hw=function(a,b){Da(this[y][w],a+"px");this[y][w].top=b+"px"};var si=function(a,b,c,d,e,f,g){O.call(this,a);Ma(this,a);this.clientX=c;this.clientY=d;this.browserEvent=e;Da(this,ec(f)?f:b.deltaX);this.top=ec(g)?g:b.deltaY;this.dragger=b};F(si,O);var U=function(a,b,c){di.call(this,c);this.Qa=a||"modal-dialog";this.xo=!(!b);this.qc=ti;this.g=new hi(this)};F(U,di);U[_P].Qa=null;U[_P].xo=false;U[_P].es=true;U[_P].Np=true;U[_P].Yu=0.3;U[_P].gf="";U[_P].Bb="";U[_P].qc=null;U[_P].Cf=null;U[_P].Pa=false;U[_P].yw=false;U[_P].sa=null;U[_P].ta=null;U[_P].Yb=null;U[_P].de=null;U[_P].no=null;U[_P].ce=null;U[_P].pb=null;U[_P].Wa=null;U[_P].g=null;U[_P].ih=function(){return"goog.ui.Dialog"};U[_P].Ib=function(){return this.gf};U[_P].Ag=function(a){this.Bb=
a;if(this.pb)xa(this.pb,a)};U[_P].fj=function(){return this.Bb};U[_P].gj=function(){if(!this.pb)this.render();return this.pb};U[_P].Pv=function(){var a=new ri(this.b,this.Yb);Xe(this.Yb,this.Qa+"-title-draggable");return a};U[_P].p=function(){this.Yr();this.b=this.H.p("div",{className:this.Qa,tabIndex:0},this.Yb=this.H.p("div",{className:this.Qa+"-title",id:this.Ka()},this.de=this.H.p("span",{className:this.Qa+"-title-text"},this.gf),this.ce=this.H.p("span",{className:this.Qa+"-title-close"})),this.pb=
this.H.p("div",{className:this.Qa+"-content"}),this.Wa=this.H.p("div",{className:this.Qa+"-buttons"}));this.no=this.Yb.id;ai(this.b,"dialog");bi(this.b,"labelledby",this.no);if(this.Bb)xa(this.pb,this.Bb);Se(this.b,false);if(this.qc)this.qc.xl(this.Wa)};U[_P].Yr=function(){if(this.xo&&!this.ta){this.ta=this.H.p("iframe",{frameborder:0,style:"border: 0",className:this.Qa+"-bg"});Se(this.ta,false);Re(this.ta,0)}else if(!this.xo&&this.ta){oe(this.ta);this.ta=null}if(this.es&&!this.sa){this.sa=this.H.p("div",
{className:this.Qa+"-bg"});Re(this.sa,this.Yu);Se(this.sa,false)}else if(!this.es&&this.sa){oe(this.sa);this.sa=null}};U[_P].render=function(a){if(this.Fh())throw Error(fi);if(!this.b)this.p();var b=a||this.H.va()[x];this.Os(b);U.B.render.call(this,b)};U[_P].Os=function(a){if(this.ta)a.appendChild(this.ta);if(this.sa)a.appendChild(this.sa)};U[_P].Ei=function(a){return a&&a[Ob]&&a[Ob]=="DIV"&&U.B.Ei.call(this,a)};U[_P].Nl=function(a){this.b=a;Xe(this.b,this.Qa);var b=this.Qa+"-content";this.pb=we(this.b,
function(g){return g[fb]==1&&Ze(g,b)});if(this.pb)this.Bb=this.pb.innerHTML;else{this.pb=this.H.p("div",{className:b});if(this.Bb)xa(this.pb,this.Bb);this.b.appendChild(this.pb)}var c=this.Qa+"-title",d=this.Qa+"-title-text",e=this.Qa+"-title-close";this.Yb=we(this.b,function(g){return g[fb]==1&&Ze(g,c)});if(this.Yb){this.de=we(this.Yb,function(g){return g[fb]==1&&Ze(g,d)});this.ce=we(this.Yb,function(g){return g[fb]==1&&Ze(g,e)})}else{this.Yb=this.H.p("div",{className:c});this.b.insertBefore(this.Yb,
this.pb)}if(this.de)this.gf=Ae(this.de);else{this.de=this.H.p("span",{className:d},this.gf);this.Yb.appendChild(this.de)}bi(this.b,"labelledby",this.no);if(!this.ce){this.ce=this.H.p("span",{className:e},this.gf);this.Yb.appendChild(this.ce)}var f=this.Qa+"-buttons";this.Wa=we(this.b,function(g){return g[fb]==1&&Ze(g,f)});if(this.Wa){this.qc=new ui(this.H);this.qc.decorate(this.Wa)}else{this.Wa=this.H.p("div",{className:f});this.b.appendChild(this.Wa);if(this.qc)this.qc.xl(this.Wa)}this.Yr();this.Os(Xd(this.b)[x])};
U[_P].Hf=function(){U.B.Hf.call(this);if(this.Np&&!this.Cf)this.Cf=this.Pv();this.g.listen(this.ce,Q,this.xs);this.g.listen(this.Wa,Q,this.ps);ai(this.b,"dialog");if(this.de.id!=="")bi(this.b,"labelledby",this.de.id)};U[_P].Kf=function(){this.g.unlisten(this.ce,Q,this.xs);this.g.unlisten(this.Wa,Q,this.ps);if(this.Me())this.W(false);if(this.Cf){this.Cf.dispose();this.Cf=null}U.B.Kf.call(this)};U[_P].W=function(a){if(a==this.Pa)return;var b=this.H.va(),c=ge(b)||window;if(!this.Fh())this.render(b[x]);
if(a){this.Vs();this.reposition();this.g.listen(b,bh,this.ts,true);this.g.listen(c,dh,this.Yh,true)}else{this.g.unlisten(b,bh,this.ts,true);this.g.unlisten(c,dh,this.Yh,true)}if(this.ta)Se(this.ta,a);if(this.sa)Se(this.sa,a);Se(this.b,a);if(a&&this.Qf()){var d=this.Qf().kq();if(d){var e=this.Wa.getElementsByTagName("button");for(var f=0,g;g=e[f];f++)if(g[Rb]==d){g.focus();break}}}this.Pa=a;if(!a){this.dispatchEvent("afterhide");if(this.yw)this.dispose()}};U[_P].Me=function(){return this.Pa};U[_P].Vs=
function(){if(this.ta)Se(this.ta,false);if(this.sa)Se(this.sa,false);var a=this.H.va(),b=ge(a)||window,c=ee(b),d=a[x].scrollWidth,e=n.max(a[x].scrollHeight,c[A]);if(this.ta){Se(this.ta,true);Pe(this.ta,d,e)}if(this.sa){Se(this.sa,true);Pe(this.sa,d,e)}if(this.Np){var f=Qe(this.b);this.Cf.limits=new Ee(0,0,d-f[u],e-f[A])}};U[_P].reposition=function(){var a=this.H.va(),b=ge(a)||window,c=fe(b),d=c.x,e=c.y,f=Qe(this.b),g=ee(b),h=n.max(d+g[u]/2-f[u]/2,0),j=n.max(e+g[A]/2-f[A]/2,0);Le(this.b,h,j)};U[_P].xs=
function(){var a=this.Qf(),b=a&&a.ej();if(b){var c=a.get(b);if(this.dispatchEvent(new vi(b,c)))this.W(false)}else this.W(false)};U[_P].m=function(){U.B.m.call(this);if(this.g){this.g.dispose();this.g=null}if(this.sa){oe(this.sa);this.sa=null}if(this.ta){oe(this.ta);this.ta=null}this.ce=null;this.Wa=null};U[_P].ut=function(a){this.qc=a;if(this.Wa)this.qc.xl(this.Wa)};U[_P].Qf=function(){return this.qc};U[_P].ps=function(a){var b=this.hx(a[y]);if(b){var c=b[Rb],d=this.Qf().get(c);if(this.dispatchEvent(new vi(c,
d)))this.W(false)}};U[_P].hx=function(a){var b=a;while(b!=null&&b!=this.Wa){if(b[Ob]=="BUTTON")return b;b=b[z]}return null};U[_P].ts=function(a){if(a[Db]==27){var b=this.Qf();if(b.ej()){var c=b.get(b.ej());if(this.dispatchEvent(new vi(b.ej(),c)))this.W(false)}else this.W(false)}else if(a[Db]==13){var b=this.Qf(),d=a[y]&&a[y][Ob]=="BUTTON"?a[y][Rb]:b.kq();if(d&&this.dispatchEvent(new vi(d,b.get(d))))this.W(false)}};U[_P].Yh=function(){this.Vs()};var vi=function(a,b){Ma(this,"dialogselect");this.key=
a;this.caption=b};F(vi,O);var ui=function(a){this.H=a||Yd();ef.call(this)},ti,wi,xi,yi,zi;F(ui,ef);ui[_P].Bp=null;ui[_P].b=null;ui[_P].Ba=null;ui[_P].set=function(a,b,c,d){ef[_P].set.call(this,a,b);if(c)this.Bp=a;if(d)this.Ba=a};ui[_P].xl=function(a){this.b=a;this.render()};ui[_P].render=function(){if(this.b){xa(this.b,"");var a=Yd(this.b);jf(this,function(b,c){this.b.appendChild(a.p("button",{name:c},b))},this)}};ui[_P].decorate=function(a){if(!a||a[fb]!=1)return;this.b=a;var b=this.b.getElementsByTagName("button");
for(var c=0,d,e,f;d=b[c];c++){e=d[Rb]||d.id;f=Ae(d)||d[v];if(e)this.set(e,f,c==0,d[Rb]=="cancel")}};ui[_P].kq=function(){return this.Bp};ui[_P].ej=function(){return this.Ba};(function(){var a=E("OK"),b=E("Cancel"),c=E("Yes"),d=E("No"),e=E("Save"),f=E("Continue"),g=new ui;g.set("ok",a,true);wi=g;var h=new ui;h.set("ok",a,true);h.set("cancel",b,false,true);ti=h;var j=new ui;j.set("yes",c,true);j.set("no",d,false,true);xi=j;var k=new ui;k.set("yes",c);k.set("no",d,true);k.set("cancel",b,false,true);
yi=k;var l=new ui;l.set("continue",f);l.set("save",e);l.set("cancel",b,true,true);zi=l})();var Ai=function(a,b){a=m(a);b=m(b);this.start=a<b?a:b;this.end=a<b?b:a};Ai[_P].clone=function(){return new Ai(this.start,this.end)};na(Ai[_P],function(){return"["+this.start+", "+this.end+"]"});;;var Bi=function(a){return 1-n.pow(1-a,3)},Ci=function(a,b,c,d){R.call(this);if(!kc(a)||!kc(b)){throw Error("Start and end parameters must be arrays");return}if(a[t]!=b[t]){throw Error("Start and end points must be the same length");return}this.ef=a;this.Qp=b;this.Op=c;this.mu=d;this.vf=[]};F(Ci,R);var Di="begin",Ei="animate",Fi=[],Gi=null,Hi=function(){oh.clearTimeout(Gi);var a=vc();ud(Fi,function(b){if(b)b.cycle(a)});Gi=Fi[t]==0?null:oh.setTimeout(Hi,20)},Ii=function(a){if(!xd(Fi,a))Fi.push(a);if(Gi==
null)Gi=oh.setInterval(Hi,20)},Ji=function(a){Cd(Fi,a);if(Fi[t][t]==0&&Gi!=null){oh.clearInterval(Gi);Gi=null}};Ci[_P].nb=0;Ci[_P].aq=0;Ci[_P].Qb=0;Ci[_P].ff=null;Ci[_P].Rp=null;Ci[_P].$m=null;Ci[_P].play=function(a){if(a||this.nb==0){this.Qb=0;this.vf=this.ef}else if(this.nb==1)return false;Ji(this);this.ff=vc();if(this.nb==-1)this.ff-=this.Op*this.Qb;this.Rp=this.ff+this.Op;this.$m=this.ff;if(this.Qb==0)this.zc(Di);this.zc("play");if(this.nb==-1)this.zc("resume");this.nb=1;Ii(this);this.cycle(this.ff);
return true};Ci[_P].stop=function(a){Ji(this);this.nb=0;if(a)this.Qb=1;this.po(this.Qb);this.zc("stop");this.zc("end")};Ci[_P].pause=function(){if(this.nb==1){Ji(this);this.nb=-1;this.zc("pause")}};Ci[_P].m=function(){if(this.nb!=0)this.stop();this.zc("destroy");Ci.B.m.call(this)};Ci[_P].cycle=function(a){this.Qb=(a-this.ff)/(this.Rp-this.ff);if(this.Qb>=1)this.Qb=1;this.aq=1000/(a-this.$m);this.$m=a;if(oc(this.mu))this.po(this.mu(this.Qb));else this.po(this.Qb);if(this.Qb==1){this.nb=0;Ji(this);
this.zc("finish");this.zc("end")}else if(this.nb==1)this.zc(Ei)};Ci[_P].po=function(a){this.vf=new Array(this.ef[t]);for(var b=0;b<this.ef[t];b++)this.vf[b]=(this.Qp[b]-this.ef[b])*a+this.ef[b]};Ci[_P].zc=function(a){this.dispatchEvent(new Li(a,this))};var Li=function(a,b){O.call(this,a);this.coords=b.vf;this.x=b.vf[0];this.y=b.vf[1];this.z=b.vf[2];this.duration=b.Op;this.progress=b.Qb;this.fps=b.aq;this.state=b.nb;this.anim=b};F(Li,O);Li[_P].rp=function(){return wd(this.coords,n.round)};var Mi=function(a,b,c,d,e){Ci.call(this,b,c,d,e);this.element=a};F(Mi,Ci);var Ni=function(a,b,c){Mi.apply(this,arguments);if(b[t]!=2||c[t]!=2){throw Error("Start and end points must be 2D");return}var d=[Di,Ei,"end"];P(this,d,this.cB,false,this)};F(Ni,Mi);Ni[_P].cB=function(a){Da(this.element[w],n.round(a.x)+"px");this.element[w].top=n.round(a.y)+"px"};var Oi=function(a,b,c,d){var e=[a[nb],a[Vb]];P(this,Di,this.fE,false,this);Ni.call(this,a,e,b,c,d)};F(Oi,Ni);Oi[_P].fE=function(){this.ef=[this.element[nb],
this.element[Vb]]};var Pi=function(a,b,c){Mi.apply(this,arguments);if(b[t]!=2||c[t]!=2){throw Error("Start and end points must be 2D");return}var d=[Di,Ei,"end"];P(this,d,this.Ek,false,this);this.OA=n.max(this.Qp[0],this.ef[0]);this.MA=n.max(this.Qp[1],this.ef[1])};F(Pi,Mi);Pi[_P].Ek=function(a){this.zv(n.round(a.x),n.round(a.y),this.OA,this.MA);q(this.element[w],n.round(a.x)+"px");this.element[w].marginLeft=n.round(a.x)-this.OA+"px";this.element[w].marginTop=n.round(a.y)-this.MA+"px"};Pi[_P].zv=
function(a,b,c,d){this.element[w].clip="rect("+(d-b)+"px "+c+"px "+d+"px "+(c-a)+"px)"};var Qi=function(a,b,c){Mi.apply(this,arguments);if(b[t]!=2||c[t]!=2){throw Error("Start and end points must be 2D");return}var d=[Di,Ei,"end"];P(this,d,this.fD,false,this)};F(Qi,Mi);Qi[_P].fD=function(a){this.element.scrollLeft=n.round(a.x);ma(this.element,n.round(a.y))};var Ri=function(a,b,c){Mi.apply(this,arguments);if(b[t]!=2||c[t]!=2){throw Error("Start and end points must be 2D");return}var d=[Di,Ei,"end"];
P(this,d,this.Ek,false,this)};F(Ri,Mi);Ri[_P].Ek=function(a){q(this.element[w],n.round(a.x)+"px");Ta(this.element[w],n.round(a.y)+"px")};var Si=function(a,b,c,d,e){Mi.call(this,a,[b],[c],d,e);var f=[Di,Ei,"end"];P(this,f,this.IC,false,this)};F(Si,Mi);Si[_P].IC=function(a){q(this.element[w],n.round(a.x)+"px")};var Ti=function(a,b,c,d,e){Mi.call(this,a,[b],[c],d,e);var f=[Di,Ei,"end"];P(this,f,this.HC,false,this)};F(Ti,Mi);Ti[_P].HC=function(a){Ta(this.element[w],n.round(a.x)+"px")};var Ui=function(a,
b,c,d,e){if(nc(b))b=[b];if(nc(c))c=[c];Mi.call(this,a,b,c,d,e);if(b[t]!=1||c[t]!=1){throw Error("Start and end points must be 1D");return}var f=[Di,Ei,"end"];P(this,f,this.Yw,false,this)};F(Ui,Mi);Ui[_P].Yw=function(a){Re(this.element,a.x)};Ui[_P].show=function(){r(this.element[w],"")};Ui[_P].hide=function(){r(this.element[w],"none")};var Vi=function(a,b,c){Ui.call(this,a,1,0,b,c)};F(Vi,Ui);var Wi=function(a,b,c){Ui.call(this,a,0,1,b,c)};F(Wi,Ui);var Xi=function(a,b,c){Ui.call(this,a,1,0,b,c);P(this,
Di,this.show,false,this);P(this,"end",this.hide,false,this)};F(Xi,Ui);var Yi=function(a,b,c){Ui.call(this,a,0,1,b,c);P(this,Di,this.show,false,this)};F(Yi,Ui);var Zi=function(a,b,c){Mi.apply(this,arguments);if(b[t]!=3||c[t]!=3){throw Error("Start and end points must be 3D");return}var d=[Di,Ei,"end"];P(this,d,this.Kk,false,this)};F(Zi,Mi);Zi[_P].Kk=function(a){var b="rgb("+a.rp().join(",")+")";Ca(this.element[w],b)};var $i=function(a,b,c){Mi.apply(this,arguments);if(b[t]!=3||c[t]!=3){throw Error("Start and end points must be 3D");
return}var d=[Di,Ei,"end"];P(this,d,this.Kk,false,this)};F($i,Mi);$i[_P].Kk=function(a){var b="rgb("+a.rp().join(",")+")";this.element[w].color="rgb("+b+")"};var aj=function(a,b,c){R.call(this);this.Ef=$d(a);this.Wi=$d(b);this.qe=c==true;this.Ef.tabIndex=0;P(this.Ef,Q,this.yB,false,this);P(this.Ef,bh,this.zB,false,this);this.Dg(this.qe)};F(aj,R);aj[_P].expand=function(){this.Dg(true)};aj[_P].collapse=function(){this.Dg(false)};aj[_P].toggle=function(){this.Dg(!this.qe)};aj[_P].Dg=function(a){r(this.Wi[w],a?"":"none");this.qo(a);this.qe=a;this.dispatchEvent(new bj("toggle",this,this.qe))};aj[_P].qo=function(a){if(a){Ye(this.Ef,"goog-zippy-collapsed");Xe(this.Ef,
"goog-zippy-expanded")}else{Ye(this.Ef,"goog-zippy-expanded");Xe(this.Ef,"goog-zippy-collapsed")}};aj[_P].zB=function(a){if(a[Db]==13||a[Db]==32){this.toggle();a.preventDefault();a.stopPropagation()}};aj[_P].yB=function(){this.toggle()};var bj=function(a,b,c){O.call(this,a,b);this.expanded=c};F(bj,O);var cj=function(a,b,c){var d=he("div",{style:"overflow:hidden"}),e=$d(b);e[z].replaceChild(d,e);d.appendChild(e);this.Ul=d;this.Tc=null;aj.call(this,a,e,c);var f=this.qe;r(this.Ul[w],f?"":"none");this.qo(f)};F(cj,aj);cj[_P].Nu=500;cj[_P].Mu=Bi;cj[_P].Dg=function(a){if(this.qe==a&&!this.Tc)return;if(this.Ul[w][Tb]=="none")r(this.Ul[w],"");var b=this.Wi[Xb],c=0;if(this.Tc){a=this.qe;Yg(this.Tc);this.Tc.stop();c=b-n.abs(ea(this.Wi[w].marginTop,10))}else c=a?0:b;this.qo(a);this.Tc=new Ci([0,c],[0,a?b:
0],this.Nu,this.Mu);var d=[Di,Ei,"end"];P(this.Tc,d,this.pB,false,this);P(this.Tc,"end",D(this.qB,this,a));this.Tc.play(false)};cj[_P].pB=function(a){var b=this.Wi[Xb];this.Wi[w].marginTop=0-(b-a.y)+"px"};cj[_P].qB=function(a){Yg(this.Tc);this.qe=a;this.Tc=null;if(!a)r(this.Ul[w],"none");this.dispatchEvent(new bj("toggle",this,a))};var dj=function(a,b,c){if(!b)b={};var d=c||window,e=typeof a[Jb]!="undefined"?a[Jb]:i(a),f=b[y]||a[y],g=[];for(var h in b)switch(h){case "width":case "height":case "top":case "left":g.push(h+"="+b[h]);break;case "target":break;default:g.push(h+"="+(b[h]?1:0))}var j=g.join(","),k=d.open(e,f,j);return k},ej=function(a,b){if(!b)b={};Ea(b,b[y]||a[y]||"google_popup");q(b,b[u]||690);Ta(b,b[A]||500);var c=dj(a,b);if(!c)return true;c.focus();return false};var fj=function(){this.Zf={};this.xH={};this.aG={}},gj=null,hj=function(){if(!gj)gj=new fj;return gj};fj[_P].fireEvent=function(a){var b=null;if(mc(a)){b=new O(a);var c=arguments[1];if(mc(c)){var d=2,e=c;while(e){var f=arguments[d++];b[e]=f;e=arguments[d++]}}else for(var g in c)b[g]=c[g]}else if(a instanceof O)b=a;this.$B(b)};fj[_P].$B=function(a){var b=a[Mb],c=this.Zf[b];if(c){var d=c(a),e;e=d?this.xH[b]||[]:this.aG[b]||[];for(var f=0;f<e[t];f++)e[f](a)}};fj[_P].o=function(a,b){this.Zf[a]=b};var jj=function(a,b){var c=b||window;if(a=="Parent"){this.Pt="ParentStub"+m(new Date);this.Te="ChildStub"}else{this.Pt="ChildStub";this.Te=this.by();this.lg=c.opener||c[wb];if(this.Te&&!this.lg[this.Te]){var d=0;while(this.lg&&!this.lg[this.Te]&&d<10){this.lg=this.lg[wb];d++}}c[ij]=this}c[this.Pt]=this.RE.bind(this);this.xb=a};jj.inherits(R);var kj=function(a){var b=a||window;return b[ij]};jj[_P].yD=function(a,b){this.lg=a;this.J=b};var ij="__topLevelProxy__";Ma(jj[_P],null);jj[_P].by=function(){var a=
new N(ga[kb][Jb]);return a.Uf("eventCallback")};jj[_P].Pq=function(){return this.Pt};jj[_P].Da=function(a){return this.dC(a)};jj[_P].dC=function(a){a.type=a[Mb];var b=this.J?this.J[Wb]:null,c=this.lg||b;return this.Te&&c&&c[this.Te]?c[this.Te](a):true};jj[_P].RE=function(a){var b=new O(a.type,this);for(var c in a)if(!(c in b))b[c]=a[c];var d=R[_P][qb].call(this,b);return d};var lj=function(){};lj.inherits(R);lj[_P].Ct=function(a){this.bH=a};Aa(lj[_P],function(a){if(this.bH.Da(a))R[_P][qb].call(this,a)});var mj=function(a){jj.call(this,"Parent",a||window)};mj.inherits(jj);var nj=null,oj=function(a){switch(a){case "NONE":return"0";case "THIN":return"1px solid black";case "OUTSET":return"2px outset black"}},qj=function(a,b,c){var d=b||{};d.border=d.border||"OUTSET";var e=new pj(c);e.Oi(a,d,null);return e},sj=function(a,b,c,d){var e=b||{};e.border=e.border||"NONE";var f=$d(c),g=new rj(d);g.Oi(a,e,f);return g};mj[_P].Oi=function(){};mj[_P].show=function(){};mj[_P].hide=function(){};mj[_P].dispose=function(){};
var tj=function(a,b){var c=b.serverbased?"widgets":"ui",d=new N((nj?nj:(B.manifest?B.manifest.serverBase:""))+"/"+c+"/"+a),e=new N(ga[kb][Jb]);if(e.Uf("js"))d.u("js",e.Uf("js"));else d.u("js","RAW");if(b)jf(b,function(f,g){if(f!=null)d.u(g,f)});return d};var uj=0;wc("createIframeComponent",sj);wc("createIframeDialogComponent",qj);var rj=function(a){mj.call(this,a)};rj.inherits(mj);rj[_P].J=null;var vj=function(a,b,c,d){var e="hosted-"+uj++ +"-"+m(new Date),f=I(e);if(!f){var g=new Vd(d?Xd(d):ga);f=g.p("iframe",{id:e});He(f,"display","block");He(f,"backgroundColor","#FFF");He(f,"border",oj(c));He(f,"margin","0");He(f,"padding","0");He(f,"overflow","hidden");Pe(f,a,b)}return f};rj[_P].Oi=function(a,b,c){this.A=tj(a,b);this.MF=b.border;this.Pa=!(b.hide=="true");this.VA=b.mock;this.DF=b.x||20;this.OH=b.y||20;this.Lg=b.width||600;
this.ag=b.height||480;this.MG=b.maximize=="true";this.rg=b.position||"relative";this.JF=b.background;this.Mg=b.zIndex;this.mz=b.hl;this.tn=c;var d=vj(this.Lg,this.ag,this.MF,this.tn);ra(d[w],this.rg);if(this.Mg)Ra(d[w],this.Mg);if(this.JF){d.allowtransparency=true;Ca(d[w],"transparent")}if(this.mz)this.A.u("hl",this.mz);if(!this.VA){this.A.u("eventCallback",this.Pq());this.A.u("js","RAW");this.A.jn();d.src=this.A.toString();d.id=dd()}this.Zl(d);if(this.VA){new jj("Child",d[Wb]);d[Wb][ij].Te=this.Pq()}this.yD(d[Wb],
d)};rj[_P].Zl=function(a){this.J=a;if(this.tn){this.tn.appendChild(a);this.so()}else{ra(a[w],"absolute");ga[x].appendChild(a)}if(a[w].position=="absolute"){var b=this.Pa?this.DF:this.DF-4000;Oe(a,b,this.OH)}else{this.so();if(!this.Pa)Va(a[w],"hidden")}if(window[Zb][a.id])if(window[Zb][a.id][kb]!=a.src)window[Zb][a.id].location=a.src};rj[_P].so=function(){var a=this.fI||this.tn;if(a&&this.MG){var b=Qe(a);Pe(this.J,b);if(this.rg=="absolute"){var c=Ne(a);if(!this.Pa)c.x-=4000;Da(this.J[w],c.x+"px");
this.J[w].top=c.y+"px"}}};rj[_P].show=function(){this.Pa=true;this.so();this.Da("PRESHOW");var a=this;B.setTimeout(function(){r(a.J[w],"block");Va(a.J[w],"visible");a.Da("SHOW")},5)};rj[_P].hide=function(){this.Pa=false;if(this.rg=="absolute"){var a=Ne(this.J);Da(this.J[w],a.x-4000+"px");Va(this.J[w],"hidden")}else r(this.J[w],"none")};rj[_P].dispose=function(){if(this.J){this.J[z].removeChild(this.J);this.J=null}mj[_P].dispose.call(this)};var pj=function(a){rj.call(this,a)};pj.inherits(rj);pj[_P].Zl=function(a){if(id)Xe(ga[x],"background");var b=new U;b.gj().appendChild(a);b.ut(new ui);b.W(this.Pa);this.Ol=b;this.J=a};pj[_P].show=function(){this.Ol.W(true)};pj[_P].hide=function(){this.Ol.W(false)};pj[_P].dispose=function(){this.Ol.dispose();Ye(ga[x],"background");this.Ol=null;this.J=null;rj[_P].dispose.call(this)};var wj=function(){this.yp={}};wj[_P].yp=null;var xj=null,yj=function(){if(!xj)xj=new wj;return xj};wj[_P].iq=function(a){return this.yp[a]};sa(wj[_P],function(a,b,c){var d=this.iq(a);if(d){if(b)b=$d(b);return d(b,c,a)}});wj[_P].sp=function(a){var b=this.iq(a);if(b){var c={},d=(new N(ga[kb][Jb])).Fc();jf(d,function(g,h){c[h]=g});var e=new jj("Child"),f=b(ga[x],c,a);if(f.Ct)f.Ct(e)}};wj[_P].Bl=function(a){var b=a||ga[x],c=b.getAttribute("g:type");if(c){var d={},e=b[Qb];for(var f=0;f<e[t];f++){var g=
e[f][Rb];if(Bc(g,"g:"))d[g.substring(2)]=e[f][v]}this.create(c,b,d)}var h=b[Nb][t];for(var f=0;f<h;f++){var j=b[Nb][f];if(j[fb]==1)this.Bl(j)}};wj[_P].Zp=function(a){var b=kj();if(b){if(mc(a))a=new O(a);return b.Da(a)}else return true};var zj=function(){wc("Xuit",yj());xc(wj[_P],"buildUi",wj[_P].Bl);xc(wj[_P],"create",wj[_P].create);xc(wj[_P],"createAsFullPage",wj[_P].sp);xc(wj[_P],"fireHostedEvent",wj[_P].Zp);xc(mj[_P],"hide",mj[_P].hide);xc(mj[_P],"show",mj[_P].show);xc(mj[_P],"dispose",mj[_P].dispose)};zj();var V=function(a,b){var c=window._Messages||[],d=a;for(var e=0;e<c[t];e++)if(c[e][a]){d=c[e][a];break}var f=b||{},g=function(h,j){return j in f?f[j]:h};d=d.replace(new RegExp("\\{\\$(\\w+)\\}","g"),g);return d},Aj=function(a,b){ga.write(V(a,b))};wc("_cp_getMsg",V);wc("_cp_writeMsg",Aj);var Bj=function(a){if(a)this.ic(a)},Cj={},Dj=function(a){var b=Cj[a];if(b==null){b=new Bj(a);Cj[a]=b}return b},Ej=function(a){var b=new Bj;b.Va=a;return b};Bj[_P].ic=function(a){this.Oa=a;if(a=="TRUE"||a=="true")this.Va=true;else if(a=="FALSE"||a=="false")this.Va=false;else if(Bc(a,'"')&&Cc(a,'"'))this.Va=a.substring(1,a[t]-1);else if(Bc(a,"'")&&Cc(a,"'"))this.Va=a.substring(1,a[t]-1);else if(!ja(a))this.Va=m(a);else throw Error("Invalid static expression: "+a);};Bj[_P].i=function(){return this.Va};
Bj[_P].Ea=function(){return[]};var Fj=function(a){this.ic(a)},Gj={},Hj=function(a){var b=Gj[a];if(b==null){b=new Fj(a);Gj[a]=b}return b};Fj[_P].ic=function(a){this.Oa=a;this.yc=[];if(this.Tt("||"))this.Jf=this.Tw;else if(this.Tt("and"))this.Jf=this.Ow;else if(this.fl("!="))this.Jf=this.Sw;else if(this.fl("="))this.Jf=this.Pw;else if(this.fl("<"))this.Jf=this.Rw;else if(this.fl(">"))this.Jf=this.Qw;else{this.cm=this.an(a);this.Jf=this.ry}};Fj[_P].fl=function(a){var b=this.Oa,c=b.indexOf(a);if(c!=-1){this.VG=a;this.se=this.an(Hc(b.substring(0,
c)));this.Ye=this.an(Hc(b.substring(c+a[t])));return true}else return false};Fj[_P].Tt=function(a){var b=this.Oa,c=b.indexOf(a);if(c!=-1){this.VG=a;this.se=Hj(Hc(b.substring(0,c)));this.Ye=Hj(Hc(b.substring(c+a[t])));this.yc=this.yc.concat(this.se.Ea());this.yc=this.yc.concat(this.Ye.Ea());return true}else return false};Fj[_P].an=function(a){var b=a.substring(0,1),c=a.toLowerCase();if("0123456789'\"".indexOf(b)==-1&&c!="true"&&c!="false"){var d=L(a);this.yc.push(d);return d}else return Dj(a)};Fj[_P].ry=
function(a){return this.cm.i(a)?true:false};Fj[_P].Pw=function(a){return this.se.i(a)==this.Ye.i(a)};Fj[_P].Sw=function(a){return this.se.i(a)!=this.Ye.i(a)};Fj[_P].Rw=function(a){return this.se.i(a)<this.Ye.i(a)};Fj[_P].Qw=function(a){return this.se.i(a)>this.Ye.i(a)};Fj[_P].Tw=function(a){return this.se.i(a)||this.Ye.i(a)};Fj[_P].Ow=function(a){return this.se.i(a)&&this.Ye.i(a)};Fj[_P].i=function(a){return this.Jf(a)};Fj[_P].Ea=function(){return this.yc};var Ij=function(a,b){return L(a).i(b)},Jj=function(a,b,c){var d=L(a);if(d.hb())return d.hb().G(c,true).K(d.Oe,b);else d.G(c).set(b)},Kj=function(a,b){return L(a).G(b)},Lj=function(a,b){var c=mc(a)?Kj(a):a;b=b||0;if(b>20)return"";var d="                 ",e="";e=e+d.substring(0,b)+c.F()+":";var f=c.l(),g=c.get();if(f.f()==0&&(!g||!g.f))e=e+g;else{e=e+"{\n";for(var h=0;h<f.f();h++)e=e+Lj(f.r(h),b+1)+"\n";e=e+d.substring(0,b)+"}"}return e};var Mj=function(){};Mj[_P].decorate=function(a,b){if(hd)return;var c=b||{},d=new Nj,e=true,f=c.enabled;if(f){var g=new Fj(f),h=g.Ea();for(var j=0;j<h[t];j++)J().S(D(Oj,null,d,g),h[j].Fa());e=g.i()}var k=a[ub].createElement("div");while(a[Nb][t]>0)k.appendChild(a[Eb]);d.UD(b);d.xA(a);d.Ag(k);d.Cg(e);d.render(a);return d};var Oj=function(a,b){a.Cg(b.i())},Nj=function(){this.Uc="#FCFCFC";this.Ap="#F4F4F4";this.ob="#B5B5B5";this.kd="#9CBED8";this.ad="#B0B0B0";this.Bc=true};F(Nj,R);Nj[_P].render=function(a){this.k=
a;P(a,Q,this.Pd,false,this);P(a,zg,this.Qd,false,this);P(a,Ag,this.Ce,false,this);P(a,$g,this.Lb,false,this);P(a,ah,this.Uy,false,this)};Nj[_P].UD=function(a){this.sk=a||{};this.Uc=this.sk["background-color"]||this.Uc;this.Ap=this.sk["down-background-color"]||this.Ap;this.ob=this.sk["border-color"]||this.ob;this.kd=this.sk["hover-border-color"]||this.kd;this.ad=this.sk["down-border-color"]||this.ad};Nj[_P].xA=function(a){this.k=a;this.Ui=new Vd(a[ub]);Xe(a,"goog-button");Oa(a[w],"0");a[w].background=
"transparent";a[w].margin="0";Ka(a[w],"0");a=this.sr=a.appendChild(this.Ui.p("div"));this.An=this.Oh(a,"l1","background-color:"+this.ob);this.sg=this.Oh(a,"l2","border-color: "+this.ob+";background-color: "+this.Uc);this.Oh(a,"l2","border-color: "+this.ob+";background-color: "+this.Uc);this.Na=a.appendChild(this.Ui.p("div",{"class":"mid",style:"border-color: "+this.ob+";background-color: "+this.Uc+";padding: 1px 1px;"}));this.tg=this.Oh(a,"l2","border-color: "+this.ob+";background-color: "+this.Uc);
this.Bn=this.Oh(a,"l1","background-color: "+this.ob)};Nj[_P].Oh=function(a,b,c){var d=a.appendChild(this.Ui.p("div",{style:c,"class":b}));if(G)q(d[w],"100%");d.appendChild(this.Ui.p("img",{width:"1",height:"1",src:Pj().jd()+"/static/images/Transparent.gif"}));return d};Nj[_P].Pd=function(){this.dispatchEvent(Q)};Nj[_P].Ht=function(){Ca(this.An[w],this.ob);Ua(this.sg[w],this.ob);Ca(this.sg[w],this.Uc);this.Na[w].borderLeft="1px solid "+this.ob;this.Na[w].borderRight="1px solid "+this.ob;Ka(this.Na[w],
"1px 1px");Ca(this.Na[w],this.Uc);Ua(this.tg[w],this.ob);Ca(this.tg[w],this.Uc);Ca(this.Bn[w],this.ob)};Nj[_P].BE=function(){Ca(this.An[w],this.kd);Ua(this.sg[w],this.kd);Ca(this.sg[w],this.kd);this.Na[w].borderLeft="2px solid "+this.kd;this.Na[w].borderRight="2px solid "+this.kd;Ka(this.Na[w],"1px 0px");Ca(this.Na[w],this.Uc);Ua(this.tg[w],this.kd);Ca(this.tg[w],this.kd);Ca(this.Bn[w],this.kd)};Nj[_P].vE=function(){Ca(this.An[w],this.ad);Ua(this.sg[w],this.ad);Ca(this.sg[w],this.ad);this.Na[w].borderLeft=
"2px solid "+this.ad;this.Na[w].borderRight="2px solid "+this.ad;Ka(this.Na[w],"2px 0px");Ca(this.Na[w],this.Ap);Ua(this.tg[w],this.ad);Ca(this.tg[w],this.ad);Ca(this.Bn[w],this.ad)};Nj[_P].Qd=function(){this.BE()};Nj[_P].Ce=function(){this.Ht()};Nj[_P].Lb=function(){this.vE()};Nj[_P].Uy=function(){this.Ht()};Nj[_P].Ag=function(a){a[w].cssFloat="left";while(a[Nb][t]>0)this.Na.appendChild(a[Eb]);if(G){Va(this.k[w],"hidden");B.setTimeout(D(this.io,this),0)}else this.io();P(window,dh,D(this.io,this))};
Nj[_P].io=function(){var a,b=10,c=this.Ui.va()[Gb]=="BackCompat",a=Qe(this.Na)[u];if(a<10)return;Va(this.k[w],"");if(G){q(this.sr[w],"1px");Sa(this.k[w],"visible");a=Qe(this.Na)[u];q(this.k[w],a+b+"px");if(!c){this.bk(this.An,4);this.bk(this.sg,6);this.bk(this.tg,6);this.bk(this.Bn,4)}q(this.sr[w],a+b+"px")}else{this.Na[w].cssFloat="left";a=Qe(this.Na)[u];this.Na[w].cssFloat="";if(hd&&c)q(this.k[w],a+2+"px");q(this.sr[w],a+b+"px")}};Nj[_P].bk=function(a,b){q(a[w],Qe(a)[u]-b+"px")};Nj[_P].Cg=function(a){if(this.Bc!=
a){if(a){Ye(this.k,"disabled");za(this.k,false)}else{Xe(this.k,"disabled");za(this.k,true)}this.Bc=a}};var Sj=function(a,b,c){if(a){this.Ke=a;this.tz=b||a.getAttribute("icon");if(this.tz){this.cd=he("div",{className:this.Ke[$a]});o(this.Ke,"inner");this.Ge=ie("img");this.Ge.src=this.tz;this.Ge[w].verticalAlign="bottom";this.cd.appendChild(this.Ge);if(this.Ge[Ab]!="complete"){r(this.Ge[w],"none");P(this.Ge,"load",this.Ah,false,this)}if(G)this.Ge[w].verticalAlign="top";a[z].replaceChild(this.cd,a);this.cd.appendChild(a);Oa(this.Ke[w],"0px");Ka(this.Ke[w],"0px");this.Ke[w].paddingLeft="4px";this.cd[w].verticalAlign=
"top";this.Ke[w].whiteSpace="nowrap";q(this.Ke[w],"80%");var d=Qe(this.cd)[A];if(d>5){var e=G?0:Qj(this.cd)-2;Ta(this.cd[w],d-e+"px")}Sa(this.cd[w],"hidden")}this.$g=c||a.getAttribute("defaultText");if(this.$g)Rj(this.Ke,this.$g)}};Sj[_P].Ah=function(){r(this.Ge[w],"inline")};var Tj=function(a,b){this.k=a;if(a==null)return;this.Wl=b?Hj(b):null;if(this.Wl){var c=D(this.Qt,this);jf(this.Wl.Ea(),function(h){J().S(c,h.Oa)});this.Qt()}if(G){var d=Qe(a);q(a[w],i(d[u]*0.77)+"px");var e=m(a[Ib].paddingTop.split("px")[0]),f=m(a[Ib].paddingBottom.split("px")[0]);a[w].paddingTop=i(e+2)+"px";var g=f>=2?f-2:0;a[w].paddingBottom=i(g)+"px"}P(a,$g,D(this.UB,this));P(a,ah,D(this.Js,this));P(a,Ag,D(this.IA,this));P(a,zg,D(this.hF,this));P(a,Q,D(this.Js,this))};Tj[_P].UB=function(a){Xe(a[y],
"presubmit");a[y].VB=true};Tj[_P].Js=function(a){Ye(a[y],"presubmit");a[y].VB=false};Tj[_P].IA=function(a){Ye(a[y],"presubmit")};Tj[_P].hF=function(a){if(a[y].VB)Xe(a[y],"presubmit")};Tj[_P].Qt=function(){if(this.Wl)za(this.k,!this.Wl.i())};var Uj=function(a,b){if(a){r(a[w],"");var c=a[u];if(c>b)q(a[w],b+"px")}},Vj=function(a,b,c,d){var e=a.split("."),f=d||B,g=f,h=e[t];for(var j=0;j<h-1;j++){if(!g[e[j]])g[e[j]]={};g=g[e[j]]}g[e[h-1]]=b;if(c)f[c]=b},Rj=function(a,b){if(a[v]==""||a[v]==b||a[v]==a.defaultText){a.defaulted=true;ya(a,b);Xe(a,"input-default")}a.defaultText=b;P(a,"focus",function(){if(a.defaulted){ya(a,"");Ye(a,"input-default");a.defaulted=false}});P(a,"blur",D(Wj,null,a));P(ga,Bg,function(c){if(c[y]==a&&c[Db]==27)c.stopPropagation()},
true)},Wj=function(a){if(a[v]==""&&!a.defaulted){a.defaulted=true;ya(a,a.defaultText);Xe(a,"input-default")}},Xj=function(a){if(!a.defaulted){ya(a,"");a.blur();Wj(a)}},Yj=function(a,b){if(b!=""&&b!=a.defaultText){a.defaulted=false;ya(a,b);Ye(a,"input-default");a.focus()}},Zj=function(a){if(mc(a))a=I(a);if(a){var b=a[sb],c={};for(var d=0;d<a[Qb][t];d++){var e=a[Qb][d];c[e[sb]]=e[Yb]}if(b=="BUTTON"){var f=new Mj;f.decorate(a,c)}}},$j=function(a,b){b=b<0?0:b;Ta(a[w],b+"px");a.__lastHeight=b},ak=function(a,
b){b=b<0?0:b;q(a[w],b+"px");a.__lastWidth=b},ck=function(a){return bk(a,"paddingLeft")+bk(a,"paddingRight")+bk(a,"marginLeft")+bk(a,"marginRight")+bk(a,"borderLeftWidth")+bk(a,"borderRightWidth")},Qj=function(a){return bk(a,"paddingTop")+bk(a,"paddingBottom")+bk(a,"marginTop")+bk(a,"marginBottom")+bk(a,"borderTopWidth")+bk(a,"borderBottomWidth")},bk=function(a,b){var c=Xd(a),d;if(c[Pb]&&c[Pb].getComputedStyle){var e=c[Pb].getComputedStyle(a,"");if(e)d=e[b]}if(!d)d=a[Ib]?a[Ib][b]:a[w][b];if(Cc(d,"px")){var d=
m(d.substring(0,d[t]-2));if(d<-10)d=0;return d}else return 0};var dk=function(a,b){this.k=$d(a);this.qb=L(b);J().S(D(this.$b,this),b);P(this.k,Q,D(this.Gw,this),false,this);var c=this.qb.i();if(c)va(this.k,c)};dk[_P].$b=function(){if(!this.Ie){var a=this.qb.i();this.He=true;va(this.k,a!=0);this.He=false}};dk[_P].Gw=function(){if(!this.He){var a=this.k[cb];this.Ie=true;Jj(this.qb.Oa,a);this.Ie=false}};var ek=function(a,b,c,d,e){this.k=$d(a);this.qb=L(b);this.VH=c;this.$g=d||this.k.getAttribute("defaultText");this.KA=e;if(this.KA)this.k.maxLength=this.KA;J().S(D(this.$b,this),b);P(this.k,ch,this.Ff,false,this);P(this.k,"keyup",this.Ff,false,this);var f=this.qb.i();if(f)ya(this.k,f);if(this.$g){P(this.k,"blur",this.Fl,false,this);P(this.k,"focus",this.Sh,false,this);this.Fl()}};ek[_P].$b=function(){if(!this.Ie){var a=this.qb.i();this.He=true;ya(this.k,a?a:"");this.He=false;this.Ri=false;if(this.$g)this.Fl()}};
ek[_P].Ff=function(){if(!this.He){var a=this.k[v]||null;this.Ie=true;var b=this.qb.hb().G(null,true);b.K(this.qb.Oe,a);this.Ie=false}};ek[_P].Fl=function(){if(this.k[v]==""&&!this.Ri){this.Ri=true;Xe(this.k,"input-default");ya(this.k,this.$g)}else{Ye(this.k,"input-default");this.Ri=false}};ek[_P].Sh=function(){if(this.Ri){ya(this.k,"");Ye(this.k,"input-default");this.Ri=false}};var fk=function(a){this.k=a;this.vH=200;this.IB=1000;this.$y=D(this.cr,this);P(a,["input","propertychange"],this.cr,false,this);P(a,Bg,this.Sy,false,this);P(a,bh,this.Bj,false,this);var b=["focus",Q,"blur"];P(a,b,this.Vy,false,this)};Sd(fk[_P],R[_P]);fk[_P].XD=function(a){this.IB=a};fk[_P].Sy=function(a){B.setTimeout(this.$y,0);if(!this.dispatchEvent(a))a.preventDefault()};fk[_P].Bj=function(a){var b=a[Db],c=null;if(b==40)c="DOWN_ARROW";else if(b==38)c="UP_ARROW";else if(b==13)c="ENTER";else if(b==
27)c="ESCAPE";else if(b==9)c="TAB";if(G&&(b==8||b==46))B.setTimeout(this.$y,0);if(c){var d=this.dispatchEvent(c);if(!d)a.preventDefault()}};fk[_P].Vy=function(a){this.dispatchEvent(a)};fk[_P].cr=function(){var a=this.k.defaulted?"":this.k[v];if(a!=this.gg){this.Ip("VALUE",a);if(this.NE)B.clearTimeout(this.NE);this.NE=B.setTimeout(D(this.kp,this,"STABLE_VALUE",a),this.vH);if(this.JB)B.clearTimeout(this.JB);this.JB=B.setTimeout(D(this.kp,this,"PAUSED_VALUE",a),this.IB);this.gg=a}};fk[_P].kp=function(a,
b){var c=this.k.defaulted?"":this.k[v];if(c==b)this.Ip(a,b)};fk[_P].Ip=function(a,b){var c=new O(a);ya(c,b);this.dispatchEvent(c)};var gk=function(a,b,c){this.k=$d(a);this.qb=L(b);var d=this.qb.i();if(c){this.XH=c;jf(c.wa(),function(g,h){var j=ie("option");ya(j,h);ua(j,g);this.k[Bb][this.k[Bb].length++]=j})}for(var e=0;e<this.k[Bb][t];e++){var f=this.k[Bb][e];if(d==f[v])f.selected=true}J().S(D(this.$b,this),b);P(this.k,ch,this.Ff,false,this);P(this.k,"keyup",this.Ff,false,this)};gk[_P].$b=function(){if(!this.Ie){var a=this.qb.i();this.He=true;ya(this.k,a?a:"");this.He=false}};gk[_P].Ff=function(){if(!this.He){var a=this.k[v]||
null;this.Ie=true;Jj(this.qb.Oa,a);this.Ie=false}};var hk,ik,jk,mk=function(){kk();P(B,dh,lk)},lk=function(){kk()},kk=function(a){var b=a||ga;if(hk){var c=ee(),d=c[A]-ik[A],e=c[u]-ik[u];if(e>0)e=0;nk(b,e,d)}ok(b);jk=null;hk=true;ik=ee()},pk=function(a){return a[fb]==1&&(a.getAttribute("maximize")=="true"||a.getAttribute("maximize")=="compatible"&&(id||hd))},nk=function(a,b,c){for(var d=a[Eb];d;d=d[Ub])nk(d,b,c);if(pk(a)){if(a.__lastWidth)ak(a,a.__lastWidth+b);if(a.__lastHeight)$j(a,a.__lastHeight+c)}},ok=function(a){var b;if(pk(a)&&a[sb]!="TR"){var c,
d;if(a[z][sb]=="BODY"){var e=ee();c=e[u];d=e[A];Sa(a[z][w],"hidden")}else{var f=a[z];c=a[z][jb]-ck(f);if(id)c-=ck(a);var g=a[z][Xb];if(kd&&a[z][sb]=="TD"&&a[z][z].__lastHeight)g=a[z][z].__lastHeight;d=g-Qj(f)}ck(a);if(a[sb]!="TABLE")ak(a,c);$j(a,d);if(a[Xb]>d)$j(a,2*d-a[Xb]);if(a[sb]=="TABLE"){var h=null,j=0,k;for(var k=0;k<a[Lb][t];k++){var l=a[Lb][k];if(l.getAttribute("maximize")=="true"){h=l;Ta(h[w],"100%")}}if(h){for(var k=0;k<a[Lb][t];k++){var l=a[Lb][k];if(l!=h){var p=kd&&l[Eb]?l[Eb][Xb]:l[Xb];
j+=p}}$j(h,d-j-2);q(h[w],"")}}}for(b=a[Eb];b;b=b[Ub])ok(b)};var qk=function(){this.ek=[];this.Mh={};J().V(new M(this.Mh,"LastMessage"))},rk;qk[_P].add=function(a,b){var c=a[t]<150,d=new O("NOTIFY_USER");d.message=a;d.level=b;var e=true;if(c)e=kj().Da(d);if(e)this.xw(a,b)};qk[_P].xw=function(a,b){var c=b||"INFO",d={Message:a,Level:c};this.ek.push(d);this.Mh.Message=a;this.Mh.Level=c;J().v("$LastMessage")};Na(qk[_P],function(){var a=new O("CLEAR_NOTIFICATIONS");if(kj().Da(a))this.xv()});qk[_P].xv=function(){var a={Message:null};this.ek.push(a);this.Mh.Message=
null;this.Mh.Level=null;J().V(new M(this.Mh,"LastMessage"));J().v("$LastMessage")};var sk=function(){if(rk==null)rk=new qk;return rk},tk="ERROR";var uk=function(a,b){this.UA=a;this.$c=b||"$LastMessage";this.NG=L(this.$c+"/Message");this.DH=L(this.$c+"/Level");J().S(D(this.Fz,this),this.$c+"/...");this.jb=false};uk[_P].Fz=function(){if(!this.jb)B.setTimeout(D(this.Ve,this),0);this.jb=true};uk[_P].Ve=function(){if(this.jb){var a=I(this.UA);if(a){var b=this.NG.i();if(b==null){Ye(a,"error");Ye(a,"info");xa(a,"")}else{var c=this.DH.i();if(c=="INFO"){Xe(a,"info");Ye(a,"error")}else{Xe(a,"error");Ye(a,"info")}Xe(a,"hilite");if(b[t]<150)xa(a,Rc(b));
else{var d=he("div",{style:"display:none; position:absolute; background-color:white;padding:8px; border:1px dashed #AAA;text-decoration: none"});xa(d,Rc(b).replace(/\n/g,"<br/>"));var e=he("a",{href:"#"});P(e,Q,function(){r(d[w],d[w][Tb]=="block"?"none":"block")});xa(e,"Details");xa(a,"");a.appendChild(ga.createTextNode("Operation failed. Please try again in a moment. "));a.appendChild(e);a.appendChild(d);var f=Ne(a),g=Qe(a),h=Qe(d);Le(d,f.x+g[u]-h[u],f.y+g[A])}B.setTimeout(D(this.TB,this),1000)}}this.jb=
false}};uk[_P].TB=function(){var a=I(this.UA);if(a)Ye(a,"hilite")};var vk=function(){this.bv="..";this.Xs={};this.hu={};this.xi={};this.Lj={};this.iG={};this.Bo={}},wk,Pj=function(){if(!xk)xk=new vk;return xk},xk=null;vk[_P].cE=function(a,b,c){a=new N(a);if(b&&c){if(!this.xi[b])this.xi[b]={};this.xi[b][c]=a}else if(b)this.hu[b]=a;else if(c)this.Xs[c]=a;else this.bv=a};vk[_P].jd=function(a,b){return this.xi[a]&&this.xi[a][b]?this.xi[a][b]:(this.hu[a]?this.hu[a]:(this.Xs[b]?this.Xs[b]:this.bv))};vk[_P].mC=function(a){this.Lj[a.Ka()]=a};vk[_P].Wo=function(a,b,c){var d=
this.Lj[a];if(d&&d.attach){d.attach(b,c);return true}var e=this.iG[a];if(e&&e.attach){e.attach(b,c);return true}return false};vk[_P].Ti=function(a,b,c){var d=this.Lj[a];if(d&&d.Ti){d.Ti(b,c);return true}return false};vk[_P].oe=function(a,b,c,d){var e=this.Lj[a];if(e&&e.oe){e.oe(b,c,d);return true}return false};var yk=0;vk[_P].Sv=function(a,b,c,d,e){if(od&&id)Xe(ga[x],"background");var f=e||window,g=Yd(f[gb][bc]),h=this.Tv(a,b,g),j=this.aw(a,c,d,f);if(!G)h.src=j;var k=new U(null,false,g);k.gj().appendChild(h);
k.ut(new ui);k.W(true);if(G)h.src=j;this.Bo[a]=k;return h[Wb]};vk[_P].Tv=function(a,b,c){var d=a+"-iframe",e=c.Fo(d);if(!e){e=c.p("iframe",{id:d});He(e,"display","block");He(e,"backgroundColor","#FFF");He(e,"border","1px solid #555");Pe(e,b[u],b[A])}return e};vk[_P].aw=function(a,b,c,d){var e=new N(this.jd()+"/ui/"+a);if(c){var f="UiWidgetCallback"+yk++,g=d||window;g[f]=c;e.u("done",f)}e.u("js","RAW");e.u("pop","TRUE");if(b)jf(b,function(h,j){if(h!=null)e.u(j,h)});return e};vk[_P].Lw=function(a){var b=
this.Bo[a];if(b){b.dispose();Ye(ga[x],"background")}delete this.Bo[a]};vk[_P].kz=function(a){var b=this.Bo[a];if(b)b.W(false)};vk[_P].ot=function(a,b){var c=this.Lj[a],d=I(c.Ka()+"-iframe");if(d&&d[Wb].UI_receive)d[Wb].UI_receive(b)};vk[_P].Vo=function(a){var b=a||ga;for(var c=b[Eb];c;c=c[Ub])this.Vo(c);if(b.getAttribute){var d=b.getAttribute("gtype");if(d){var e={};for(var f=0;f<b[Qb][t];f++){var g=b[Qb][f];e[g[Rb]]=g[v]}var h=this.Wo(d,b,e);if(!h)this.Ti(d,b,e)}}};window.UI_setServerBase=function(a,
b,c){Pj().cE(a,b,c)};window.UI_getServerBase=function(a,b){Pj().jd(a,b)};window.UI_attachAndDisplayAllWidgets=function(a){Pj().Vo(a)};window.UI_attachWidget=function(a,b,c){Pj().Wo(a,b,c)};window.UI_displayInline=function(a,b,c){Pj().Ti(a,b,c)};window.UI_displayIframe=function(a,b){Pj().oe(a,b)};var zk="/ui/",Ak=function(a){zk=a};B.HtmlUtil_setServerBase=Ak;var Bk=function(a){var b=new N(zk+"ContactManager"),c=a||"THREE";b.u("style",c);b.u("js","RAW");b.u("pop","TRUE");return b},Ck=function(a,b){var c=b=="TWO"?502:750,d=new Ee(0,0,c,500),e="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width="+d[u]+",height="+d[A]+",top="+d.top+",left="+d[tb],f=Bk(b).toString();window.open(f,"_manager",e)};Vj("goog.focus.ContactManagerLauncher.popManager",Ck);var Dk=function(a,b){this.k=a;this.AF=b;this.Gs=b.exists=="true";this.$i=[];this.wl(a);if(!this.Gs)this.wp(V("ADD_PICTURE"),false,true)};Dk[_P].dispose=function(){for(var a=0;a<this.$i[t];a++)Wg(this.$i[a]);if(this.$d&&this.$d[z])this.$d[z].removeChild(this.$d);if(this.Vc&&this.$d.Vc)this.Vc[z].removeChild(this.$d)};Dk[_P].wl=function(a){this.$i.push(P(a,zg,this.FB,false,this));this.$i.push(P(a,Ag,this.EB,false,this));this.$i.push(P(a,Q,this.HB,false,this))};Dk[_P].cd=null;Dk[_P].Dj=null;Dk[_P].FB=
function(){if(this.Vc){this.jp();return}this.Vc=this.Ov();if(this.Gs)this.wp(V("CHANGE_PICTURE"),true)};Dk[_P].Ov=function(){var a=Qe(this.k);a.width-=ck(this.k);a.height-=Qj(this.k);if(G){a.width+=4;a.height+=4}a.width+=2;a.height+=2;var b=he("div");this.wl(b);ra(b[w],"absolute");Ra(b[w],20);Pe(b,a);Oa(b[w],"2px solid blue");var c=Ne(this.k);c.x-=3;c.y-=3;b=this.k[z].insertBefore(b,this.k);Oe(b,c);return b};Dk[_P].wp=function(a,b,c){if(!this.k[z])return;var d=he("div");this.wl(d);var e=b?"background-color: white;":
"";xa(d,'<div style="text-align: center; '+e+'font-family: Arial; font-size: 12px; padding: 2px"><a href="javascript:void(0)">'+a+"</a></div>");ra(d[w],"relative");Ra(d[w],20);ne(d,this.k);var f=(this.k[Xb]+d[Xb])/2;d[w].top="-"+f+"px";this.$d=d;this.QH=c};Dk[_P].EB=function(a){if(this.Vc){var b=a[Za];if(!b||b!=this.k&&!se(this.Vc,b))this.Nm(true)}};Dk[_P].ay=function(a){var b={dn:a.jh()},c=a.Fq(true);if(c)b.eUrl=c;Ek(b);return b};var Ek=function(a){var b=L("$UserData/IsPicasaUser").i(),c=L("$UserData/Email").i(),
d=b&&c&&(Cc(c,"gmail.com")||Cc(c,"googlemail.com"));a.userId=d?c.substring(0,c.indexOf("@")):null;a.urlEnabled=1;a.extraUploadParams="out=hjs";a.suppressHide="1"};Dk[_P].HB=function(){this.Nm(false);var a=L("$Contacts/"+this.AF.contactid).G(),b=this.ay(a);Pj().oe("photopicker.PhotoPicker",b,D(this.Cj,this))};Dk[_P].Nm=function(a){this.jp();if(a){var b=D(this.Nm,this,false);this.Dj=B.setTimeout(b,20);return}if(this.k&&this.Vc){this.Vc[z].removeChild(this.Vc);this.Vc=null;if(this.Gs){this.$d[z].removeChild(this.$d);
this.$d=null}}};Dk[_P].jp=function(){if(this.Dj){B.clearTimeout(this.Dj);this.Dj=null}};Dk[_P].Cj=function(a){var b=this.AF.contactid,c=a.type;if(c=="PHOTO_PICKED")if(a.evergreen)Fk().wv(b);else if(a.noPhoto)Fk().Cp(b);else Fk().aD(b,a.imageUrl,a.cropString);else if(c=="SUGGEST_DONE"&&a.suggestMessage)Fk().rD(b,a.suggestMessage);else Gk()};var Hk=function(){},Ik,Jk={};Hk[_P].Ka=function(){return"photopicker.PhotoPicker"};var Kk=function(){if(!Ik){var a=new Hk;Pj().mC(a);Ik=true}},Gk=function(){Pj().kz("photopicker.PhotoPicker");Pj().ot("photopicker.PhotoPicker",{type:"CLOSE_NO_REMOVE"});Pj().Lw("photopicker.PhotoPicker");hj().fireEvent("ENABLE_WINDOW")};Hk[_P].attach=function(a,b){for(var c in Jk){var d=Jk[c];if(!d.k||!se(ga,d.k)){d.dispose();delete Jk[c]}}if(a&&!Jk[a.id]){var e=new Dk(a,b);Jk[a.id]=e}};Hk[_P].oe=function(a,b,c){var d=
new zc(545,332);if(G)d.height-=16;Pj().Sv(this.Ka(),d,a,b,c);hj().fireEvent("DISABLE_WINDOW")};var Lk,Mk,Nk,Ok=function(a,b){var c=307,d;if(a){d=Ne(a);var e=Qe(a);d.y+=e[A]}else d=new yc(0,0);var f=e[u]>c?e[u]:c,g=554,h=313,j=600;if(b){d.x+=b[xb]-b[$b];d.y+=b[yb]-b[ac]}if(d.x+h>la[u])d.x=la[u]-h;if(d.y+j>la[A])d.y=la[A]-j;var k=new Ee(d.x,d.y,f,g);return k},Qk=function(a,b){var c=new N(zk.replace(/ui\/?$/,""));Pk(c,a,b)},Pk=function(a,b,c,d){var e;if(b){b=I(b);var e=b.getAttribute("id")}else e=null;var f;f=!kd&&b?ge(Xd(b))||window:window;var g=Ok(b,c),h="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width="+
g[u]+",height="+g[A]+",top="+g.top+",left="+g[tb],j=Rk(a,e,d);if(!Lk||Lk.closed)Lk=f.open(j.toString(),"_picker",h);Lk.focus()},Rk=function(a,b,c){var d=a.resolve(new N("ui/ContactPicker"));if(b)d.u("inputId",b);if(c){if(c.serviceName)d.u("service",c.serviceName);if(c.hl)d.u("hl",c.hl)}return d},Tk=function(a,b,c){if(Mk)Sk();var d=Ok(a,null),e=Rk(a,c);window.iframeDone=Sk;e.u("done","iframeDone");var f=I("picker-iframe-div");if(f==null){var f=he("div",{id:"picker-iframe-div",style:"position: absolute; background-color; #FFF",
zIndex:10});ga[x].appendChild(f);xa(f,'<iframe id="picker-iframe" style="display:none; background-color; #FFF; border: 0"></iframe>')}var g=I("picker-iframe");r(g[w],"block");Oe(f,d[tb],d.top);Pe(g,d[u],d[A]);g.src=e;Nk=f;Mk=g},Sk=function(){oe(Nk);Nk=null;Mk=null};wc("goog.focus.PickerLauncher.popPicker",Qk);wc("goog.focus.PickerLauncher.popIframe",Tk);var Uk=function(a,b,c,d,e,f,g){this.$F=b;this.ZG=c;this.od=a;this.rc=d;this.nH=!(!e);this.Ig=f||"";this.NH=g};Uk[_P].Wz=function(){if(!L("$UserData").G()){var a=new S;P(a,th,this.Gy,false,this);a.send(this.od+"/gastatus?out=js","GET")}else this.Mr()};Uk[_P].Gy=function(a){var b=a[y];if(b.Kc()){var c=this.Ds(b.Ta());if(c.Body){var d=c.Body.UserData,e=new cg(d,"UserData");J().V(e)}}this.Mr()};Uk[_P].Mr=function(){var a={};a.dn=this.$F;a.profileMode="1";a.eUrl=this.ZG;if(this.Ig)a.theme=this.Ig;Ek(a);
Pj().oe("photopicker.PhotoPicker",a,D(this.Cj,this),this.NH)};Uk[_P].Cj=function(a){if(a.type=="PHOTO_PICKED")this.sD(a);else Gk()};Uk[_P].sD=function(a){var b=new jg;b.add("out","js");b.add("cid","p");b.add("tok",a.tok);if(a.evergreen)return;else if(a.noPhoto)b.add("action","DELETE");else{b.add("action","SET");b.add("crop",a.cropString);b.add("photo",a.imageUrl)}if(this.nH)b.add("p","true");var c=new S;P(c,th,this.Zy,false,this);c.send(this.od+"/update/photos","POST",b.toString())};Uk[_P].Zy=function(a){Gk();
var b=a[y],c=null;if(b.Kc())c=this.Ds(b.Ta());var d={};if(c&&c.Success){d.success=true;if(c.Body){d.newUrl=c.Body.NewUrl;d.newUrlF=c.Body.NewUrlF}}else d.success=false;this.rc(d)};Uk[_P].Ds=function(a){var b=a.indexOf("&&&START&&&")+"&&&START&&&"[t],c=a.lastIndexOf("&&&END&&&");return lh(a.substring(b,c))};var Vk=function(a,b,c,d,e,f){Kk();var g=new Uk(Pj().jd(),a,b,c,d,e,f);g.Wz()};window.launchProfilePhotoPicker=Vk;var Wk=function(a){this.clear();if(a)this.Ad(a)};Wk[_P].f=function(){return this.U};Wk[_P].wa=function(){return Kd(this.da)};Wk[_P].gb=function(){return Kd(this.T)};Wk[_P].Ra=function(a){var b=sc(a);return b in this.T};Na(Wk[_P],function(){this.T={};this.da={};this.U=0});Ia(Wk[_P],function(a){var b=sc(a);if(Md(this.T,b)){delete this.da[b];this.U--;return true}return false});Wk[_P].get=function(a,b){var c=sc(a);if(c in this.da)return this.da[c];return b};Wk[_P].set=function(a,b){var c=sc(a);if(!(c in
this.T)){this.T[c]=a;this.U++}this.da[c]=b};Wk[_P].Ad=function(a){var b,c;if(a instanceof Wk){b=a.gb();c=a.wa()}else{b=Ld(a);c=Kd(a)}for(var d=0;d<b[t];d++)this.set(b[d],c[d])};Wk[_P].clone=function(){return new Wk(this)};var Xk=function(){this.ne=new Wk;this.qa=null;this.dH=D(this.lC,this)};Xk[_P].FA=function(a,b,c){if(!oc(c))throw Error("not a function: "+c);if(!a.qm)throw Error("Nodes for markDirty must support getDepth");b=b||[];var d=b.join(","),e=this.ne.get(a);if(!e){e={};this.ne.set(a,e)}if(!e[d])e[d]=[];yd(e[d],c);this.dD()};Xk[_P].$r=function(a,b){b=b||[];var c=this.ne.get(a);if(c)if(b[t]==0)this.ne.remove(a);else{var d=i(b);delete c[d];if(c[t]==0)this.ne.remove(a)}};Xk[_P].dD=function(){if(!this.qa)this.qa=
B.setTimeout(this.dH,50)};Xk[_P].lC=function(){delete this.qa;var a=this.ne.gb();a.sort(function(d,e){return d.qm()-e.qm()});for(var b=0;b<a[t];b++){var c=a[b];this.kC(c);this.ne.remove(c)}};Xk[_P].kC=function(a){while(true){var b=this.ne.get(a),c=this.Ex(b);if(c==null)return;var d=c==""?[]:c.split(","),e=b[c];for(var f=0;f<e[t];f++){var g=e[f];g.call(a,null,"",d)}delete b[c]}};Xk[_P].Ex=function(a){if(a!=null)for(var b in a)return b;return null};var Yk=function(){};Yk[_P].render=function(){};Yk[_P].Ea=function(){};Yk[_P].De=function(){};var Zk=function(){};F(Zk,Yk);Zk[_P].render=function(){};Zk[_P].Ea=function(){return[]};Zk[_P].De=function(){return true};Zk[_P].Ck=function(){};var $k=function(){};$k[_P].pi=function(){};$k[_P].bh=function(){};$k[_P].chars=function(){};$k[_P].qi=function(){};$k[_P].dh=function(){};var bl=function(a,b){this.k=a;this.a=a[ub];this.md=[];this.Ij=false;this.jo=null;this.LE=null;this.Xi=[];this.nn=0;this.XA=b||"SET_CONTENT";this.Wv=this.XA!="SET_CONTENT";this.CC=this.XA=="REPLACE";if(this.Wv){var c=al[a[sb]]||"DIV";this.nz=ie(c);this.xf=this.nz}else this.xf=a;this.Xi.push(this.xf)};F(bl,$k);var al={TR:"TABLE",TD:"TR",OPTION:"SELECT"},cl={},dl={},el={},fl={style:true,script:true},gl={option:true,tr:true,td:true,tbody:true,thead:true},hl={br:true,img:true};bl[_P].pi=function(a,b){var c,
d;if(this.nn==0&&gl[a]){var e=this.a.createElement(a),f=b[t];for(var g=0;g<f;g++){var h=b[g];if(h[Rb]=="id")c=h[v];else if(h[Rb]=="g.oncreate"){d=h[v];continue}e.setAttribute(h[Rb],h[v])}if(c&&d)this.ys.push({id:c,script:d});this.Xi.push(e);this.xf.appendChild(e);this.xf=e;this.tF=true;return}this.nn++;if(fl[a])return this.cC(a,b);var j=cl[a];if(!j){j="<"+a;cl[a]=j}var k=j;if(b!=null){var f=b[t];for(var g=0;g<f;g++){var h=b[g],l=h[Rb],p=h[v];if(l=="id")c=p;else if(l=="g.oncreate"){d=p;continue}var s=
el[l];if(s==null){s=" "+l+'="';el[l]=s}k=k+s+Rc(p)+'"'}if(c&&d)this.ys.push({id:c,script:d})}k=k+">";this.md.push(k)};bl[_P].bh=function(a){if(this.nn>0)this.nn--;else{if(this.xf[Nb][t]==0)xa(this.xf,this.md.join(""));this.md=[];this.Xi.pop();this.xf=this.Xi[this.Xi[t]-1];return}if(this.Ij==true){this.Ij=false;return}if(!hl[a]){var b=dl[a];if(b==null){b="</"+a+">";dl[a]=b}this.md.push(b)}if(this.md[t]>1000){var c=this.md.join("");this.md=[c]}};bl[_P].chars=function(a){if(this.Ij==true)return this.KE(a);
this.md.push(Rc(a))};bl[_P].qi=function(){this.md=[];this.eD=[];this.ys=[]};bl[_P].dh=function(){var a=this.md.join("");if(this.Wv){var b=this.nz;if(!this.tF)xa(b,a);if(b[Nb][t]==1&&this.CC)this.k[z].replaceChild(b[Nb][0],this.k);else{if(this.k[z][sb]=="SELECT")var c=this.k[z][v];var d;while(d=b[Nb][0])this.k[z].insertBefore(d,this.k);if(this.CC)this.k[z].removeChild(this.k);if(c!=null)ya(this.k[z],c)}}else if(!this.tF)xa(this.k,a);jf(this.eD,function(e){eval(e)});jf(this.ys,function(e){var f=$d(e.id);
(new Function(e.script)).call(f)})};bl[_P].cC=function(a,b){if(a=="style"){var c;for(var d=0;d<b[t];d++)if(b[d][Rb]=="id")c=b[d][v];this.jo="style";this.LE=c+"_ss";this.Ij=true}else if(a=="script"){this.jo="script";this.Ij=true}else throw Error("No handler for "+a);};bl[_P].KE=function(a){if(this.jo=="style")this.Eu(this.LE,a);else if(this.jo=="script")this.eD.push(a)};bl[_P].Yv=function(a){var b=null,c=I(a);if(c==null){c=this.a.createElement("style");c.setAttribute("type","text/css");c.setAttribute("id",
a);this.a[x].appendChild(c)}for(var d=0;d<this.a.styleSheets[t];d++){var e=this.a.styleSheets[d],f=e.owningElement;if(f==null)f=e.ownerNode;if(f.id==a)b=e}return b};bl[_P].Eu=function(a,b){if(I(a))return;var c=this.Yv(a),d=b.split("}");if(c.insertRule){for(var e=0;e<d[t];e++)if(d[e]!="")c.insertRule(d[e]+"}",0)}else if(c.cssText!=null)for(var e=0;e<d[t];e++)if(d[e]!=""){var f=d[e].split("{"),g=f[0],h=f[1],j=g.split(",");for(var k=0;k<j[t];k++)if(j[k]!="")c.addRule(j[k],h)}};var il=function(a,b){this.ic(a,b)},jl=function(a,b){if(a.indexOf("{{")==-1||a.indexOf("function(")!=-1)return Ej(a);else if(Bc(a,"{{")&&Cc(a,"}}")){var c=L(a.substring(2,a[t]-2));if(b==1){c=new Xf(c.Fa());c.Oz=true}c.Ea=function(){return[c]};return c}else return new il(a,b)};il[_P].ic=function(a,b){this.Oa=a;this.$a=[];this.yc=[];if(this.Oa.indexOf("{{")==-1)this.$a.push(Ej(this.Oa));else{var c=this.Oa.split("{{");for(var d=0;d<c[t];d++){var e=c[d];if(e[t]>0){var f=e.indexOf("}}");if(f==-1)this.$a.push(Ej(e));
else{var g=e.substring(0,f),h;if(b==1){h=new Xf(g);h.Oz=true}else h=L(g);this.$a.push(h);this.yc.push(h);if(f<e[t]-1){var j=e.substring(f+2);this.$a.push(Ej(j))}}}}}};il[_P].i=function(a){var b=this.$a[t],c=[];for(var d=0;d<b;d++){var e=this.$a[d].i(a);if(this.$a[d].Oz)if(e==null)e="null";else if(mc(e))e=$c(e);c.push(e==null?"":e)}return c.join("")};il[_P].Ea=function(){return this.yc};var kl=function(a,b,c,d){this.jk=a[sb];this.rk=c;this.pw=d;this.fC(a);this.AD(b);this.Cb(a)},ll=If("goog.focus.TemplateNode"),ml=null,nl=0,ol=function(){if(!ml)ml=new Xk;return ml};kl[_P].qk=true;kl[_P].qm=function(){return this.pw};kl[_P].dispose=function(){};kl[_P].fC=function(a){this.rf={};var b=a[Qb];for(var c=0,d;d=b[c];++c){var e=d[sb],f=d[Yb];if(f!=null)if(e=="if")this.Qm=Hj(f);else if(e=="context")this.Kv=L(f);else if(e=="repeat")this.Hn=L(f);else if(e=="id"){this.$=f;this.pz=jl(this.$)}else{var g=
Bc(e,"on")||e=="g.oncreate";this.rf[e]=jl(f,g?1:0)}}};kl[_P].AD=function(a){this.LC=a;this.mg=this.LC;if(this.Kv)this.mg=this.Hq(this.Kv,true);if(this.Hn)this.mg=this.Hq(this.Hn,true)};kl[_P].Iq=function(a,b){var c=a.Oa,d=b?this.LC:this.mg;if(c.indexOf("$")!=0&&d)c=d.Oa+"/"+c;return c};kl[_P].Hq=function(a,b){return L(this.Iq(a,b))};kl[_P].init=function(){if(!this.sG){this.xu();if(!this.$){this.$="Node"+nl++;this.pz=jl(this.$)}this.sG=true}};kl[_P].xu=function(){if(this.Qm){var a=this.Kl(this.vv);
this.Xj(this.Qm,a,true)}if(this.Hn){var b=this.Kl(this.mF);this.Xj(this.mg.hb(),b,true)}var c=this.Kl(this.jF);for(var d=0;d<this.sc[t];d++){var e=this.sc[d];if(!e.De())this.Xj(e,c,false)}for(var f in this.rf)this.Xj(this.rf[f],c,false)};kl[_P].Kl=function(a){var b=this;return function(c,d,e){ol().FA(b,e,a,c)}};kl[_P].Xj=function(a,b,c){var d=J();if(a.Ea){var e=a.Ea();for(var f=0;f<e[t];f++){var g=this.Iq(e[f],c);d.rl(b,g)}}else{var g=a.Oa;d.rl(b,g)}};kl[_P].Cb=function(a){if(!this.sc){var b=this.jk==
"script"?1:0;this.sc=[];var c=a[Nb];for(var d=0,e;e=c[d];++d)if(!(e[fb]==3&&/^[\n\r\t ]*$/.test(e[Yb]))){var f=pl().xp(e,this.mg,this.rk,this.pw+1,b);this.sc.push(f)}}};kl[_P].Za=function(){return this.Qm?this.Qm.i(this):true};kl[_P].render=function(a,b){if(b&&b.j)b=L(b.P());if(b){this.setDataContext(b);this.Cb()}this.ei(a)};kl[_P].Ok=function(a){this.ga=a||[];this.Df=this.jq(this.ga)};kl[_P].gh=function(a,b){var c=[];for(var d in this.rf)if(!a||d!="style"){var e=this.rf[d].i(this)||"";c.push({name:d,
value:e})}var f=b||this.ij();c.push({name:"id",value:f});if(a){var g=this.rf.style,h=(g?g.i(this)+"; ":"")+"display: none";c.push({name:"style",value:h})}return c};kl[_P].Wk=function(a,b,c){if(this.qk)a.pi(b,c)};kl[_P].Zi=function(a,b){if(this.qk)a.bh(b)};kl[_P].ei=function(a,b,c){ol().$r(this,this.ga);var d=this.jk,e=this.Za();if(this.Hn&&!b){this.xC(a,c);this.Gn=true}else if(e){var f=this.gh();this.Wk(a,d,f);this.di(a);this.Zi(a,d);this.Gn=true}else if(d!="option"){var f=this.gh(true);if(this.qk){a.pi(d,
f);a.bh(d)}}};kl[_P].xC=function(a,b){var c=L(this.sm(this.ga)).ba(),d=this.jk;for(var e=0;e<c.f();e++){var f=c.r(e);this.ga.push(f.F());this.Df=this.jq(this.ga);if(this.Za()){var g=this.gh();this.Wk(a,d,g);this.di(a);this.Zi(a,d);this.zu()}this.ga.pop()}if(!b&&d!="option"){this.Us=this.ij()+"-R";var h=this.gh(true,this.Us);this.Wk(a,d,h);this.Zi(a,d)}};kl[_P].zu=function(){if(!this.Vl)this.Vl={};var a=this.Vl;for(var b=0;b<this.ga[t]-1;b++){if(!a[this.ga[b]])a[this.ga[b]]={};a=a[this.ga[b]]}a[i(this.ga[this.ga[t]-
1])]=this.ij()};kl[_P].SB=function(a){var b=this.Za(),c=a[w][Tb]!="none";if(b!=c){if(b)this.Qs(a);r(a[w],b?"":"none");if(!b){ol().$r(this,this.ga);while(a[zb])a.removeChild(a[zb])}}};kl[_P].Qs=function(a){var b=new bl(a,"REPLACE");this.Ma("render in renderElement");b.qi();this.ei(b,true);b.dh()};kl[_P].di=function(a){this.Cb();for(var b=0;b<this.sc[t];b++){var c=this.sc[b];if(c.Ck)c.Ck(a,this);else{c.init();c.Ok(this.ga);c.render(a)}}};kl[_P].ij=function(){var a=this.pz.i(this);if(this.ga)for(var b=
0;b<this.ga[t];b++)a+="-"+this.ga[b];return a};kl[_P].pq=function(){return I(this.ij())};kl[_P].jq=function(a){var b=this.sm(a),c=L(b).G();return c};kl[_P].sm=function(a){var b=this.mg?this.mg.Oa:"";if(a)for(var c=0;c<a[t];c++)b=b.replace(/\*/,a[c]);return b};kl[_P].Ma=function(a){var b=Ef;if(ll.Qj(b)){var c=[a,"View=",this.rk.$," Node=",this.$];for(var d=1;d<arguments[t];d++)c.push(arguments[d]);ll.log(b,c.join(", "))}};kl[_P].jF=function(a,b,c){this.Ok(c);var d=this.pq();if(d)this.Qs(d)};kl[_P].mF=
function(a,b,c){var d=I(this.Us);if(d){c=c||[];var e=this.Vl;for(var f=0;f<c[t];f++)e=this.Vl[i(c[f])];for(var g in e){var h=e[g],j=I(h);if(j)j[z].removeChild(j)}for(var g in e)delete e[g];this.Ok(c);var k=new bl(I(this.Us),"INSERT_BEFORE");this.Ma("render in updateRepeated");k.qi();this.ei(k,null,true);k.dh()}};kl[_P].vv=function(a,b,c){this.Ok(c);var d=this.pq();if(d)this.SB(d)};kl[_P].De=function(){return true};kl[_P].j=function(a){if(a=="$Context"){var b=this.sm(this.ga),c=L(b);if(c.G())var d=
c.G().F();else if(this.ga)d=this.ga[this.ga[t]-1];if(c&&c.hb()){var e=c.hb().G(),f=e.l().f()-1,g=e.l().indexOf(d)}if(b!="")b=b+"/";var h=this.ga[t]>0?"-"+this.ga.join("-"):"",j=this.rk?this.rk.LH:"",k=new M({"@dataName":d,"@cid":h,"@vid":j,"@dataPath":b,"@last":f,"@index":g},"Context");return k}else return a=="$View"?this.rk.zH:(a.indexOf("$")==0?J().j(a):(this.Df?this.Df.j(a):null))};kl[_P].e=function(a){return a=="$Context"?new M({},"Context"):(a.indexOf("$")==0?J().e(a):(this.Df?this.Df.e(a):""))};
kl[_P].l=function(a){return this.Df?this.Df.l(a):new Rf};kl[_P].hj=function(){return this};var ql=function(a,b){this.ZE=a;this.YE=jl(a,b);this.yc=this.YE.Ea()};ql[_P].Ck=function(a,b){a.chars(cd(this.YE.i(b)))};ql[_P].Ea=function(){return this.yc};ql[_P].De=function(){return false};var sl=function(a,b,c,d){kl.call(this,a,b,this,d);this.zH=c;this.LH=rl++;this.qk=false};F(sl,kl);var rl=0,tl=function(a,b,c,d){kl.call(this,a,b,c,d)};F(tl,kl);tl[_P].ei=function(a){var b="span";this.Wk(a,b,this.gh());var c=
this.rf.text.i(this);if(c){c=c.replace("\n\r","\n");var d=c.split(/[\n\r]/);for(var e=0;e<d[t];e++){var f=d[e];if(e>0){a.pi("br",[]);a.bh("br")}a.chars(f)}}this.Zi(a,b)};var vl=function(){var a={};jf(ul,function(b){a[b]=true});this.jG=a;this.lI={};this.Ao={};this.dw={};this.ns=0;this.xF=[]},wl,pl=function(){if(wl==null)wl=new vl;return wl};vl[_P].xp=function(a,b,c,d,e){d=d||0;var f=a[sb];if(f=="#text")return new ql(a[Yb],e);else if(f=="#comment")return new Zk;else if(f=="MultilineText")return new tl(a,b,c,d);else if(this.jG[f])return new kl(a,b,c,d);else if(f=="View")return new sl(a,b,null,d);else if(this.Ao[f])return new sl(this.Ao[f],b,this.Xv(a),d);else if(this.dw[f])return this.dw[f](a,
b,c);else throw Error("No view exists matching name: "+f);};vl[_P].Xv=function(a){var b={},c=a[Qb][t];for(var d=0;d<c;++d){var e=a[Qb][d];b["@"+e[sb]]=e[Yb]}return fg(b,"$View")};vl[_P].Gu=function(a){if(a[bc])a=a[bc];this.ns++;if(a[Eb])this.Lo(a);else{var b=new S;P(b,"success",this.Aw,false,this);b.send(a)}};vl[_P].Aw=function(a){var b=a[y].Dm()[bc],c=this;B.setTimeout(function(){c.Lo(b)},0)};vl[_P].Lo=function(a){var b=a[Nb],c=[];for(var d=0,e;e=b[d];++d)if(e[fb]==1)c.push(e);for(var d=0;d<c[t];d++){var f=
c[d].getAttribute("id");this.Fu(f,c[d])}this.ns--;hj().fireEvent("load");this.jv()};vl[_P].Fu=function(a,b){this.Ao[a]=b};vl[_P].jv=function(){if(this.ns==0){var a=this.xF;this.xF=[];for(var b=0;b<a[t];b++)a[b]()}};var ul=["p","div","b","i","br","ul","li","a","hr","span","img","table","tr","select","option","td","th","tbody","#text","h1","h2","h3","dl","dt","input","iframe","form","textarea","col","#comment","strike","button","script","style","thead","link","em"];vl[_P].BC=function(a,b,c,d){if(d){var e=
J();for(var f in d)e.V(new M(d[f],f))}var g=c?L(c.P()):null,h=this.xp(this.Ao[a],g,null),j=new bl(b);j.qi();h.render(j);j.dh()};var xl,yl,zl=function(a,b,c){if(!b)return true;var d=[],e=a.e("Name");if(e){var f=a.e("NameSegments");if(f){var g=0,h=0;for(var j=0;j<f[t];j++){h=f[j];d.push(e.slice(g,h));g=h}}else{d=d.concat(e.split(/[ "()\']+/));d.push(e)}}var k=a.ja();if(k){d.push(k);if(c&&k.indexOf("@")!=-1)d.push(k.substring(k.indexOf("@")+1))}var l=false,p=b.toLowerCase();for(var j=0;j<d[t];j++)if(Bc(d[j].toLowerCase(),p))l=true;return l},Al=function(a,b){if(b=="^Temp"){var c=0;for(var d=0;d<a.f();d++){var e=a.r(d);if(Fk().ub(e,
b))c++}return c}else{var f=L("$Groups/"+b).G();return f?f.e("Count"):0}},Bl=/^[a-z0-9_\.\-\+=%]+\@(([a-z0-9\-])+\.)+([a-z0-9]{2,6})$/i,Cl=function(a){return Bl.test(Hc(a))},Gl=function(a,b,c){var d=new fk(b);P(d,"DOWN_ARROW",D(a.yz,a));P(d,"UP_ARROW",D(a.gw,a));P(d,"ENTER",D(Dl,null,a));P(d,"STABLE_VALUE",D(El,null,a));if(c)P(d,"PAUSED_VALUE",D(Fl,null));P(b,Bg,function(e){var f=e[Db];if(f==13)e.preventDefault()});return d},El=function(a,b){a.cf(b[v])},Hl=20,Il=function(a){Hl=a},Fl=function(a){if(a[v])Fk().load(4,
Hl,a[v])},Dl=function(a){if(a.pc!=-1)a.Sb(a.pc)},Kl=function(a,b){var c=a[b];if(c)for(var d=0,e=c[t];d<e;++d){var f=c[d];if(!f.id){var g=Jl();f.id=g}}},Ll=100,Jl=function(){return i(Ll++)},Rl=function(){Vj("goog.focus.DataUtil.getData",Ij,"getData");Vj("goog.focus.DataUtil.setData",Jj,"setData");Vj("goog.focus.DataUtil.getNode",Kj,"getNode");Vj("goog.focus.DataUtil.dumpData",Lj,"dumpData");Vj("goog.focus.Ui.setServerBase",wk,"setServerBase");Vj("goog.focus.ViewManager.fireEvent",D(hj().fireEvent,
hj()),"doEvent");Vj("goog.focus.UiUtil.constrainImage",Uj,"fixImage");Vj("goog.ds.DataManager.instance",J(),"dataman");Vj("goog.focus.ContactUtil.initiateEmail",Ml,"initiateEmail");Vj("goog.focus.CheckboxBinder",dk,"CheckboxBinder");Vj("goog.focus.InputBinder",ek,"InputBinder");Vj("goog.focus.SelectBinder",gk,"SelectBinder");Vj("goog.focus.InputDecorator",Sj,"InputDecorator");Vj("goog.ui.AnimatedZippy",cj,"AnimatedZippy");Vj("goog.ui.Zippy",aj,"Zippy");if(Nl)Vj("goog.focus.GroupSelectMenu.attachAndDisplay",
Ol);Vj("goog.dom.$",I);Vj("goog.ds.DataManager.fireDataChange",D(J().v,J()),"fireDataChange");Vj("goog.focus.ContactUtil.getContacts",Pl,"getContacts");if(Mj){Vj("goog.focus.ButtonFactory",Mj);Vj("decorate",Mj[_P].decorate,null,Mj[_P])}Vj("goog.focus.UiUtil.decorateElement",Zj,"decorateElement");Zh();xl=If("goog.focus.ContactUtil");hj().o("MAP_CONTACT",Ql)},Sl=function(a,b){var c=false,d=a.j("Groups");if(d){var e=d.j(b);if(e)c=e.e("id")!=null}return c},Tl=function(a,b){if(!Sl(a,b)){var c=a.j("Groups");
if(!c.get())c.set([]);c.j(b).set({id:b})}},Ul=function(a,b){var c="",d=null;while(true){var e=V("ASK_GROUP_NAME");if(d)e=d+"\n"+e;c=b!=null?b(e,c):prompt(e,c);if(c==null)return null;c=Hc(c);if(c[t]==0)d=V("ERROR_GROUP_NAME_EMPTY");else if(c.charAt(0)=="^")d=V("ERROR_GROUP_NAME_INVALID");else if(c[t]>40)d=V("ERROR_GROUP_NAME_TOO_LONG");else if(a.Nz(c))d=V("ERROR_GROUP_NAME_TAKEN",{name:c});else return c}},Zl=function(a,b,c,d){var e=b?"&thumb=true":"",f=c?"&groups=true":"",g=d?"&show=ALL":"",h=a+"data/contacts?out=js&max=500&psort=Name"+
f+e+g,j=a+"update/",k=J(),l;l=Bc(a,"http")?new vg(h,"ContactReq"):new Gh(h+"&jsx=true","ContactReq","&&&START&&&","&&&END&&&");var p=new Vl("$ContactReq/Body/Contacts","$ContactReq",j);if(c)new Wl("Groups","$ContactReq/Body/Groups","$ContactReq/Body/Groups");else{k.V(Xl(),true);k.S(function(s){if(s=="$Contacts"){Yl(L("$Contacts").ba().r(0).l());k.v("$Groups")}},"$Contacts")}k.V(l,true);k.load();yl=p;window.contacts=p;return p},Pl=function(){return yl},Ml=function(a){var b=new O("INITIATE_EMAIL");
b.to=a;var c=kj().Da(b);if(!c)return;a=Jc(a);var d=Fk(),e=!(!Ij("$UserData/IsGmailUser"));if(e){var f=d.Fx();ej(f+"/?view=cm&tf=1&fs=1&to="+a)}else window.open("mailto:"+a,"_self")},$l=function(a){var b=a.e("Name");if(b!=null){var c=b.indexOf(",");return c==-1?b.split(" ")[0]:b.substring(0,c)}else if(d!=null){var d=a.ja(),e=d.indexOf("@");return e==-1?d:d.substring(0,e)}else return"--"},Ql=function(a){if(a.addressIndex!=null){var b=L("$CurrentContact").G(),c="Addresses/["+a.addressIndex+"]",d=L(c).G(b),
e=L("Unstructured").i(d);if(e){var f=L("Type/Id").i(d),g;g=f=="HOME"?"home":(f=="WORK"?"work":"other");var h=b.jh(),j=h+" -- "+g;e=e.replace(/[\n\r]+/g,",");var k=e+" ("+j+")",l="http://maps.google.com/maps?q=";dj(l+Jc(k))}}},Vl=function(a,b,c){this.X=new Tf;M.call(this,this.X,"Contacts");this.ZB=a;this.YB=b;this.jH=new am(this);var d=J();d.V(this);d.V(this.jH);d.S(D(this.pu,this,a),b);this.lH=0;new Wl("AuthToken","$ContactReq/Body/AuthToken","$ContactReq");this.nx=L("$AuthToken/Value");this.La="$Groups";
this.th=L(this.La);d.S(D(this.vj,this),this.La);this.ro=c};F(Vl,M);Vl[_P].pu=function(a,b){if(b==this.YB){Vf.info("Starting contact add");var c=L(a+"/*"),d=c.ba(),e=d.f();for(var f=0;f<e;f++){var g=d.r(f);this.Rc(g)}if(this.Ki)this.tk(this.Ki,"^Temp");Vf.info("About to fire data change");J().v("$Contacts");Vf.info("Ended contact add")}};Vl[_P].vj=function(){this.xj={};var a=this.th.G().l();for(var b=0;b<a.f();b++){var c=a.r(b);this.xj[c.e("id")]=c}this.Zz()};Vl[_P].l=function(a){if(!a||a=="*")return this.X;
else if(a.indexOf("*")==-1){var b=this.j(a);return b?new Tf([b]):new Rf}else throw new Error("Selector not supported yet ("+a+")");};Vl[_P].e=function(a){var b=this.X.get(a);return b==null?null:b.get()};Vl[_P].Rc=function(a){var b=a.ja();a.D.id=b;a.pd(b);this.X.add(a);a.L=this;J().v(a.P());return a};Vl[_P].ui=function(a,b){var c=null,d=a.ja();a.j("id").set(d);a.pd(d);var e=this.X.fc,f=false;for(var g=0;g<e[t];g++)if(e[g].ja()==d){a.j("SelectedCount").set(e[g].e("SelectedCount"));if(Sl(e[g],"^Temp"))Tl(a,
"^Temp");e[g]=a;c=e[g];f=true}if(f){this.X.I.set(d,a);this.Pr(a);a.L=this;J().v(a.P());return c}else if(b)return this.Rc(a)};Vl[_P].tk=function(a,b){var c=a.split(/[;,]/);for(var d=0;d<c[t];d++){var e=c[d],f=null,g=null,h=e.indexOf("<");if(h==-1)f=Hc(e);else{g=Hc(e.substring(0,h));f=Hc(e.substring(h+1,e.indexOf(">",h)))}if(f[t]>0){var j;if(!this.X.get(f)){var k={Name:g,Email:f,id:f};j=new M(k,k.Email);this.Rc(j)}else j=this.X.get(f);j.j("SelectedCount").set(this.lH++);if(b){j.j("Groups");var l=j.j("Groups");
if(!l.get())l.set([]);l.j(b).set(b)}}}if(this.IF){this.fh(-1,"");this.$h("")}};Vl[_P].$h=function(a){this.Ki=a};Vl[_P].fh=function(a,b){var c=this.X.f(),d=false,e="";for(var f=0;f<c;f++){var g=this.X.r(f);if(Sl(g,a)){var h=g.e("Name"),j=g.ja(),k=h&&b=="FULL"?h+" <"+j+">":j;if(d)e=e+", ";e=e+k;d=true}}return e};Vl[_P].hy=function(){this.oD=new Tf;var a,b=this.X.f(),c=[],d=[];for(a=0;a<b;a++){var e=this.X.r(a),f=e.e("SelectedCount");if(f!=null)c[m(f)]=e;else d.push(e)}b=c[t];for(a=0;a<b;a++)if(c[a])this.oD.add(c[a]);
return this.oD};Vl[_P].Ni=function(a){var b=a?tc(L(a).G().D):{Groups:[]},c=new M(b,"$TempContact"),d=J();d.V(c);d.v("$TempContact");return c};Vl[_P].Zz=function(){var a=this.X.f();for(var b=0;b<a;b++){var c=this.X.r(b);this.Pr(c)}};Vl[_P].Pr=function(a){if(a.j("Groups").get()==null)a.j("Groups").set([]);var b=a.j("Groups").l();for(var c=0;c<b.f();c++){var d=b.r(c);if(d.get()&&d.l().f()>0){var e=this.xj[d.e("id")];if(e){var f=d.oa.get("ref");if(!f)d.oa.add(Wf(e,"ref"))}}}};var am=function(a){this.SF=
a;M.call(this,null,"SelectedContacts")};F(am,M);am[_P].l=function(a){if(!a||a=="*")return this.SF.hy();else if(a.indexOf("*")==-1){var b=this.j(a);return b?new Tf([b]):new Rf}else throw new Error("Selector not supported yet ("+a+")");};var Wl=function(a,b,c){M.call(this,null,a);this.Re=a;this.ZB=b;this.YB=c;this.sc=new Tf;this.D=[];this.Td=false;var d=J();d.V(this);d.S(D(this.Jm,this),c)};F(Wl,M);Wl[_P].Jm=function(){if(!this.Td){var a=this.ZB,b=L(a+"/*");this.sc=b.ba();for(var c=0;c<this.sc.f();c++)this.D.push(this.sc.r(c));
J().v("$"+this.Re);this.Td=true}};Wl[_P].l=function(a){if(!a||a=="*")return this.sc;else throw new Error("Selector not supported yet ("+a+")");};var bm=function(a,b,c,d,e){this.jb=true;this.th=L(b+"/*");if(c)this.Hv=L(c+"/*");this.pH=d;this.rH=e;this.Ln=a;this.Ot=this.Ln[Bb][t];var f=J();f.S(D(this.Ey,this),b+"/...")};bm[_P].Ey=function(){this.invalidate()};bm[_P].render=function(){if(this.jb){var a=this.th.ba(),b=this.Ot,c=this.Ln[v];for(var d=0;d<a.f();d++){var e=a.r(d),f=e.e("id");if(!Bc(f,"^")||
this.rH){var g=e.e("Name");if(this.pH){var h=Al(this.Hv.ba(),f);g=g+" ("+h+")"}var j=ie("option");ya(j,f);ua(j,g);this.Ln[Bb][b++]=j}}ya(this.Ln,c);this.jb=false}};bm[_P].invalidate=function(){if(!this.jb)B.setTimeout(D(this.render,this),5);this.jb=true};var W=function(){this.od=Pj().jd().toString();this.sF=false;this.rF=false;this.gm=null;this.ck=500;this.Sl=false;this.UE=false;this.ty=false;this.iB=0;this.iH=50;this.FC=[];this.zz=false;this.KH=!Bc(this.od.toString(),"http");this.$e=new cm;this.dI=new dm;this.X=new em;M.call(this,this.X,"Contacts");J().V(this);this.Ca={};var a=new M(this.Ca,"ContactData");J().V(a);this.$v()};F(W,M);var fm=null,Fk=function(){if(!fm)fm=new W;return fm};W[_P].fq=function(a){return this.l().get(a)};W[_P].Gt=function(a){this.sF=
a};W[_P].oE=function(a){this.GH=a};W[_P].Ft=function(a){this.rF=a};W[_P].Pk=function(a){this.ck=a};W[_P].aE=function(a){this.FC=a||[]};W[_P].Hw=function(a){this.UE=a};W[_P].JD=function(a){this.gm=a?"ALL":null};W[_P].KD=function(a){this.ty=a};W[_P].PD=function(a){this.zz=a};W[_P].ID=function(a){this.gm=a};W[_P].l=function(a){if(!a||a=="*")return this.X;else if(a.indexOf("*")==-1){var b=this.j(a);return b?new Tf([b]):new Rf}else throw new Error("Selector not supported yet ("+a+")");};W[_P].e=function(a){var b=
this.X.get(a);return b==null?null:b.get()};W[_P].xa=function(){return true};W[_P].FE=function(){return this.Sl};W[_P].xx=function(a,b,c){var d=new N(this.od+"/data/contacts"),e=d.Fc();e.set("thumb",this.sF);e.set("groups",this.rF);if(this.gm)e.set("show",this.gm);e.set("psort","Name");e.set("max",a||this.ck);e.set("out","js");e.set("rf",this.FC.join(","));if(b){e.set("tok",b);if(this.Ku)e.set("cl","false");if(this.Sl)e.set("cd","true")}if(c)e.set("ud","false");if(this.ty)e.set("up","true");if(this.zz)e.set("gc",
"true");return d};W[_P].tE=function(){if(!this.DG){var a=J();new Wl("Groups","$ContactReq/Body/Groups","$ContactReq/Body/Groups");new Wl("AuthToken","$ContactReq/Body/AuthToken","$ContactReq");new Wl("ExtraData","$ContactReq/Body/ExtraData","$ContactReq");a.Sg("$UserData","$ContactReq/Body/UserData");a.Sg("$UserProfile","$ContactReq/Body/UserProfile");this.La="$Groups";this.bl=L("$AuthToken/Value");this.th=L(this.La);a.S(D(this.ew,this),"$ContactReq");a.S(D(this.ZA,this),"$ContactAppend");a.S(D(this.Fy,
this),this.La);var b=this,c=hj();c.o("ADD_SELECTED_CONTACTS_TO_GROUP",function(d){b.Du(d.groupId)});c.o("ADD_EMAIL",function(){b.mf(b.Hc(),"Emails","HOME")});c.o("REMOVE_EMAIL",function(d){b.ci(b.Hc(),"Emails",d.dataName)});c.o("ADD_PHONE",function(){b.mf(b.Hc(),"Phones","HOME")});c.o("REMOVE_PHONE",function(d){b.ci(b.Hc(),"Phones",d.dataName)});c.o("ADD_IM",function(){b.mf(b.Hc(),"Ims")});c.o("REMOVE_IM",function(d){b.ci(b.Hc(),"Ims",d.dataName)});c.o("ADD_ADDRESS",function(){b.mf(b.Hc(),"Addresses",
"HOME")});c.o("REMOVE_ADDRESS",function(d){b.ci(b.Hc(),"Addresses",d.dataName)});c.o("ADD_OTHER",function(){b.mf(b.Hc(),"Others","HOME")});c.o("REMOVE_OTHER",function(d){b.ci(b.Hc(),"Others",d.dataName)});c.o("PICTURE_ERROR",D(this.Wy,this));this.DG=true}};W[_P].bq=function(){if(!this.Zu){var a=new N(L("$UserData/PhotoUrl").i()),b=new N(window[kb]);a.ni(b.qj());this.Zu=a.toString()}return this.Zu};W[_P].Wy=function(a){var b=L("$Contacts/"+a.contactId).G();if(b){b.LD();var c=J();c.v("$Contacts/"+a.contactId+
"/MaybeHasPicture")}};W[_P].Fx=function(){return L("$UserData/GmailUrl").i()};W[_P].load=function(a,b,c){this.tE();var d=a||1,e=d==4,f=d==3,g=c&&this.Sl;if((f||e)&&this.Ku&&!g)return;if(!this.er||d!=1){var h=e?"ContactAppend":"ContactReq";if(e)Jj("$ContactData/PendingLongRequest",true);else Jj("$ContactData/Loading",true);if(d==1&&this.GH){this.MH=true;this.Xo()}else{var j=J(),k=this.xx(b,c,e);if(this.KH){k.u("jsx","true");this.wg=new Gh(k,h,"&&&START&&&","&&&END&&&")}else this.wg=new vg(k,h);j.V(this.wg,
true);this.wg.load();this.er=true}}};W[_P].Xo=function(){if(!this.er&&this.MH&&this.wg){this.wg.load();this.er=true}};W[_P].Qy=function(a){var b=J();this.wg=new gm(a,"ContactReq");b.V(this.wg,true);this.Xo()};W[_P].ew=function(a){J().at(D(this.fA,this,a));var b=Kj("$ExtraData/NavLinks",true);if(I("additional-nav-links")&&b){xa(I("additional-nav-links"),b.get());var c=Kj("$ExtraData/BlInfo",true);qa(I("additional-nav-links"),c.get())}this.Sl=this.UE&&L("$UserData/ShowDomainContacts").i();Jj("$ContactData/Loading",
false);var d=L("$ContactReq/Body").G();if(d)d.K("Contacts",null);Vf.info("About to fire data change");J().v("$Contacts");J().v("$Groups");J().v("$SelectedContactCount");J().v("$UserPrefs");Vf.info("Done firing data change");Jj("$ContactData/Loaded",true)};W[_P].ZA=function(){var a=L("$ContactAppend/Body/Contacts").i();Vf.info("Starting adding additional contacts");if(a)this.X=this.TA(this.X,a);var b=L("$ContactAppend/Body/NameSegments").i();if(b)this.Zt(b);Vf.info("Ending adding additional contacts");
J().v("$Contacts");Jj("$ContactData/PendingLongRequest",false)};W[_P].fA=function(a){this.X.clear();Vf.info("Starting contact add");var b=L("$ContactReq/Body/Contacts").i()||[];Vf.info("Starting contact updates");for(var c=0,d=b[t];c<d;c++)this.wu(b[c]);var e=L("$ContactReq/Body/NameSegments").i();if(e)this.Zt(e);Vf.info("Ended contact add");this.Ku=b[t]==this.tx();this.ks(a);this.mB(a);if(this.Ki)this.tk(this.Ki,"^Temp")};W[_P].tx=function(){var a=Kj("$Groups/^All/Count");return a?a.get():Ij("$Groups/^Mine/Count")+
Ij("$Groups/^Collect/Count")};W[_P].ks=function(a){var b=L(a+"/Body/Groups").G(),c=b?b.Fb():[],d=fg(c,"$Groups");J().V(d)};W[_P].mB=function(a){var b=L(a+"/Body/UserPrefs").G(),c=b?b.Fb():[],d=fg(c,"$UserPrefs");J().V(d)};W[_P].Fy=function(){Vf.info("Starting groupsChanged");this.ZH=true;this.xj={};var a=this.th.G().l();for(var b=0;b<a.f();b++){var c=a.r(b);this.xj[c.e("id")]=c}this.Pu();Vf.info("Ending groupsChanged")};W[_P].Pu=function(){var a=this.X.f();for(var b=0;b<a;b++){var c=this.X.r(b);this.Uo(c)}};
W[_P].Uo=function(a){var b=a.j("Groups",true).l();for(var c=0;c<b.f();c++){var d=b.r(c);if(d.get()&&d.l().f()>0){var e=this.xj[d.e("id")];if(e){var f=d.j("ref");if(f&&f.e("Name")!=d.e("Name")){d.l().Ub("ref",null);f=null}if(!f||!f.get())d.l().add(Wf(e,"ref"))}}}};W[_P].wu=function(a){this.X.update(new hm(a,this),true)};W[_P].ui=function(a){var b=a.Fb?a.Fb():(a.D?a.D:a),c=new hm(b,this),d=b.id,e=false,f=false,g=null,h=this.X.get(d);if(h){f=this.ub(h,"^Freq");e=this.ub(h,"^Temp");if(e)this.hc(h,false);
g=h.e("RosterState")}var j=this.X.f();this.X.update(c,false);if(e)this.hc(c,true);if(f)this.Qn(c,"^Freq",true);if(g)a.K("RosterState",g);if(h)if(d==L("$CurrentContactId").i())B.setTimeout(function(){J().v("$CurrentContact")},5);J().v(c.P());if(this.X.f()!=j)J().v("$Contacts/count()");return c};W[_P].Rh=function(a){if(a){var b=a.Ka(),c=a.Sf().join(","),d=a.Hb();hj().fireEvent("CONTACT_CHANGED","id",b,"emails",c,"name",d)}else hj().fireEvent("CONTACT_CHANGED")};W[_P].lk=function(){hj().fireEvent("GROUP_CHANGED")};
W[_P].Rc=function(a){this.iB++;var b="temp."+this.iB;a.K("Id",b);a=this.ui(a);return a};W[_P].Ni=function(a){var b=a?L(a).G().Fb():{},c=tc(b);Kl(c,"Emails");Kl(c,"Phones");Kl(c,"Ims");Kl(c,"Addresses");Kl(c,"Others");var d=new hm(c,null,"$TempContact"),e=J();e.at(D(this.Zv,this,d));e.V(d);e.v("$TempContact");return d};W[_P].Zv=function(a){this.eh(a,"Emails");this.eh(a,"Phones","MOBILE");this.eh(a,"Ims");this.eh(a,"Addresses","HOME");this.eh(a,"Others","HOME");var b=Kj("$CurrentGroup");if(b&&!b.e("IsSystem"))this.Qn(a,
b.e("id"),true)};W[_P].$v=function(){var a={},b=new M(a,"$TempGroup");J().V(b)};W[_P].XC=function(a,b,c){if(a.get()){var d=new im(this,a,b,c);d.send()}};W[_P].aD=function(a,b,c){var d=new S,e=jm({out:"js",tok:this.bl.G().get(),cid:a,photo:b,crop:c,action:"SET"});P(d,th,this.Fs,false,this);d.send(this.od+"/update/photos","POST",e)};W[_P].wv=function(a){var b=new S,c=jm({out:"js",tok:this.bl.G().get(),cid:a,action:"SET_EVERGREEN"});P(b,th,this.Fs,false,this);b.send(this.od+"/update/photos","POST",c)};
W[_P].Cp=function(a){var b=new S,c=jm({out:"js",tok:this.bl.G().get(),cid:a,action:"DELETE"});P(b,th,this.MB,false,this);b.send(this.od+"/update/photos","POST",c)};var km=function(a){var b=a.indexOf("&&&START&&&")+"&&&START&&&"[t],c=a.lastIndexOf("&&&END&&&");return lh(a.substring(b,c))};W[_P].Hi=function(){Gk()};W[_P].Fs=function(a){var b=a[y],c=null;if(b.Kc())c=km(b.Ta());if(c&&c.Success){sk().add(V("PICTURE_ADD_SUCCESS"),"INFO");this.Xt(c.Body.Contact);if(c.Body.CanSuggest)Pj().ot("photopicker.PhotoPicker",
{type:"SHOW_SUGGEST",imageUrl:c.Body.Contact.Picture});else this.Hi()}else{sk().add(V("PICTURE_ADD_ERROR"),tk);this.Hi()}};W[_P].MB=function(a){var b=a[y],c=null;if(b.Kc())c=km(b.Ta());if(c&&c.Success){this.Xt(c.Body.Contact);sk().add(V("PICTURE_DELETE_SUCCESS"),"INFO")}else sk().add(V("PICTURE_DELETE_ERROR"),tk);this.Hi()};W[_P].Xt=function(a){var b=this.X.get(a.Id);if(b){b.K("Picture",a.Picture);b.Dn();var c=J();c.v("$CurrentContact/Picture");c.v("$CurrentContact/ForcedPicture");c.v("$CurrentContact/MaybeHasPicture")}};
W[_P].rD=function(a,b){var c=new S,d=jm({out:"js",tok:this.bl.G().get(),cid:a,msg:b,action:"SUGGEST"});P(c,th,this.OB,false,this);c.send(this.od+"/update/photos","POST",d)};W[_P].OB=function(a){var b=a[y],c=null;if(b.Kc())c=km(b.Ta());if(c&&c.Success)sk().add(V("PICTURE_SUGGEST_SUCCESS"),"INFO");else sk().add(V("PICTURE_SUGGEST_ERROR"),tk);this.Hi()};var jm=function(a){var b=new jg;for(var c in a)b.add(c,a[c]);return b.toString()};W[_P].jw=function(a,b,c){var d=this.X.get(a),e=d.jh(),f=V("CONTACT_DELETE_CONFIRM",
{name:e});if(confirm(f)){var g=new lm(this,a,b,c);g.send()}};W[_P].mw=function(a,b,c){var d=this.$e.l(),e=d.f();if(e>20){var f=V("CONTACT_MAX_DELETE_ERROR",{count:20});ka(f);return}var f=V("CONTACT_MULTI_DELETE_CONFIRM",{count:e});if(e>1&&confirm(f)){var g=[];for(var h=0;h<e;h++){var a=d.r(h).e("id");g.push(a)}var j=new lm(this,g,b,c);j.send()}};W[_P].op=function(a){this.X.removeNode(a);this.$e.K(a,null)};W[_P].Nz=function(a){var b=this.th.G().l();for(var c=0;c<b.f();c++){var d=b.r(c);if(a==d.e("Name"))return true}return false};
W[_P].su=function(a,b,c){if(b=="^New"){var d=Ul(this);if(d){var e=new mm(this,null,"NEW",d,c);e.send()}}else{var e=new mm(this,b,"ADD","",c);e.send()}};W[_P].Du=function(a){if(a){var b=this.Gx(a),c=new mm(this,b,"ADD");c.send()}};W[_P].tC=function(a,b){if(a){var c=new mm(this,a,"REMOVE",null,b);c.send()}};W[_P].Gx=function(a){return L(this.La+"/"+a+"/Name").i()};W[_P].qC=function(a,b,c){var d=new mm(this,b,"REMOVE",null,c);d.send()};W[_P].ub=function(a,b){var c=a.j("Groups",true).j(b);return c!=null&&
c.e("id")!=null};W[_P].Qn=function(a,b,c){var d=this.ub(a,b);if(c&&!d){var e=a.j("Groups",true).j(b,true);e.K("value",a.ja());e.K("id",b)}else if(!c&&d)a.j("Groups",true).K(b,null)};W[_P].bD=function(a,b){var c=new nm(this,a,b);c.send()};W[_P].hc=function(a,b){a.K("SelectedCount",this.iH++);var c=a.F(),d=b!=null?b:!this.ub(a,"^Temp");this.Qn(a,"^Temp",d);a.qw();var e=!(!this.$e.j(c));if(d!=e){var f=d?Wf(a,c):null;this.$e.K(c,f);Jj("$SelectedContactCount",this.$e.l().f())}};W[_P].jt=function(a){var b=
a.F();this.vd(b);this.hc(a,true)};W[_P].vd=function(a){var b={};for(var c=0;c<this.$e.l().f();c++){var d=this.$e.l().r(c),e=d.F();if(e!=a)b[e]=d}for(var f in b)this.hc(b[f],false)};W[_P].rj=function(){return this.$e};W[_P].tk=function(a){var b={},c=this.l(),d=c.f();for(var e=0;e<d;e++){var f=c.r(e);b[f.ja()]=f}var g=a.split(/[;,]/);for(var e=0;e<g[t];e++){var h=g[e],j=null,k=null,l=h.indexOf("<");if(l==-1)j=Hc(h);else{k=Hc(h.substring(0,l));j=Hc(h.substring(l+1,h.indexOf(">",l)))}if(j[t]>0){var f=
b[j];if(!f){var p={Emails:[{Address:j}]},s=fg(p,j);f=this.Rc(s)}this.hc(f,true)}}if(this.IF){this.fh(-1,"");this.$h("")}};W[_P].$h=function(a){this.Ki=a};W[_P].fh=function(a,b){var c=this.l().f(),d=false,e="";for(var f=0;f<c;f++){var g=this.l().r(f);if(this.ub(g,a)){var h=g.e("Name"),j=g.ja(),k=h&&b=="FULL"?'"'+h+'" <'+j+">":j;if(d)e=e+", ";e=e+k;d=true}}return e};W[_P].eh=function(a,b,c){var d=L(b+"/[0]");if(!d.G(a))this.mf(a,b,c)};W[_P].mf=function(a,b,c){var d=Jl(),e=a.j(b);if(!e){e=fg([],b,a);
a.K(b,e)}var f=fg({id:d},d,e);e.K(d,f);if(c)f.j("Type",true).K("Id",c)};W[_P].ci=function(a,b,c){a.j(b,true).K(c,null)};W[_P].Hc=function(){return L("$TempContact").G()};W[_P].TA=function(a,b){var c={},d=a.fc;for(var e=0,f=d[t];e<f;++e){var g=d[e].Sf();if(g)for(var h=0;h<g[t];++h)c[g[h]]=d[e]}var j=[];for(var e=0,f=b[t];e<f;++e){var g=b[e].Emails,k=null;if(g)for(var h=0;h<g[t];++h){var l=g[h].Address;if(c[l]){k=c[l];break}}if(k){if(!k.Hb()&&b[e].Name)k.K("Name",b[e].Name)}else{var p=new hm(b[e],this);
j.push(p);if(g)for(var h=0;h<g[t];++h){var l=g[h].Address;c[l]=p}}}var s=this.SA(d,j),C=new em;for(var e=0;e<s[t];++e)C.update(s[e],true);return C};W[_P].SA=function(a,b){var c=[],d=0;for(var e=0;e<a[t];e++){var f=a[e];while(d<b[t]&&om(f,b[d])>0)c.push(b[d++]);c.push(f)}while(d<b[t])c.push(b[d++]);return c};W[_P].Zt=function(a){for(var b in a){var c=this.X.get(b);c.K("NameSegments",a[b])}};var cm=function(){M.call(this,{},"$SelectedContacts");J().V(this);var a=new M(0,"SelectedContactCount");J().V(a)};
F(cm,M);cm[_P].xa=function(){return true};var dm=function(){M.call(this,{},"SelectedGroup");var a=J();a.V(this);a.S(D(this.lF,this),"$CurrentGroup/id");this.dc=null};F(dm,M);dm[_P].xa=function(){return true};dm[_P].lF=function(){var a=L("$CurrentGroup/id").i()||"^Temp";if(this.dc!=a){this.oa=new Tf;var b=Fk(),c=b.l();for(var d=0;d<c.f();d++){var e=c.r(d),f=e.e("id");if(b.ub(e,a))this.K(f,Wf(e,f))}this.dc=a;J().v("$SelectedGroup")}};var em=function(){Uf.call(this,om)};F(em,Uf);em[_P].update=function(a,
b){var c=a.e("Id"),d=this.get(c);if(d)this.Ub(c,a);else if(b)this.append(a);else this.add(a)};Na(em[_P],function(){Tf.call(this)});var hm=function(a,b,c){var d=a.Id,e=c||d;a.id=d;if(a.Groups==null)a.Groups=[];var f=Ij("$UserData/IsGcUser");if(f&&a.CallSettings==null)a.CallSettings={GreetingId:"0",RingshareId:"0",GroupId:"0",Mode:"DEFAULT",Response:"DEFAULT",AlwaysScreen:"false"};cg.call(this,a,e,b)};F(hm,cg);hm[_P].e=function(a){if(a=="UserGroupCount")return this.Sq().l().f();else{this.rr(a);return hm.B.e.call(this,
a)}};hm[_P].j=function(a,b){if(a=="UserGroups")return this.Sq();else{this.rr(a);return hm.B.j.call(this,a,b)}};hm[_P].Sq=function(){var a=new M({},"UserGroups",this),b=this.j("Groups",true).l();for(var c=0;c<b.f();c++){var d=b.r(c),e=d.e("id");if(!Bc(e,"^"))a.l().add(Wf(d,e))}return a};hm[_P].rr=function(a){if((a=="ForcedPicture"||a=="MaybeHasPicture")&&!this.__PictureInitialized){this.__PictureInitialized=true;this.Dn()}};hm[_P].Dn=function(){var a=this.Fq();if(a){this.K("ForcedPicture",a);this.K("MaybeHasPicture",
true)}else this.K("MaybeHasPicture",false)};hm[_P].LD=function(){this.K("MaybeHasPicture",false)};hm[_P].Fq=function(a){var b=this.ja();if(b){var c=Fk().bq()+da(b)+"?rp=1&pld=1&";if(a)c+="t=e&";c+=n.floor(n.random()*2000000);return c}else return null};hm[_P].py=function(){if(!this.__FixedPhotoScheme){this.__FixedPhotoScheme=true;var a=this.e("Thumbnail");if(a){var b=Fk().bq();a=a.replace(/^.+\//,b);this.K("Thumbnail",a)}}return this.e("Thumbnail")||null};na(hm[_P],function(){var a=this.Hb(),b=this.ja();
return a&&b?a+" <"+b+">":a||b});hm[_P].Hb=function(){return this.e("Name")};hm[_P].ja=function(){var a=this.j("Emails");if(a){var b=a.l();if(b&&b.f()>0)return b.r(0).e("Address")}return null};hm[_P].Ka=function(){return this.e("Id")};hm[_P].Sf=function(){var a=[],b=this.j("Emails");if(b){var c=b.l();for(var d=0,e=c.f();d<e;++d)a.push(c.r(d).e("Address"))}return a};hm[_P].ac=function(){return this.e("Affinity")};hm[_P].jh=function(){return this.Hb()||this.ja()||""};hm[_P].Gh=function(a){if(a=="^All")return true;
if(a=="^Collect")return this.j("Groups").j("^Mine")==null;return this.j("Groups").j(a)!=null};hm[_P].qw=function(){var a=this.j("Emails");if(a){var b=L("$UserData/AspDomain").i(),c=L("$UserData/Email").i();for(var d=0;d<a.f();d++){var e=a.r(d),f=e.e("Address");if(Cc(f,"@gmail.com")||Cc(f,"@googlemail.com")||b&&Cc(f,"@"+b))e.K("CanChat",true);if(f==c)this.K("Me",true)}}};var om=function(a,b){var c=pm(a,b);if(c!=0)return c;var d=a.Hb()||a.ja()||"zz",e=b.Hb()||b.ja()||"zz",f=d.toLowerCase(),g=e.toLowerCase();
return f==g?0:(f<g?-1:1)},qm=function(a,b){var c=pm(a,b);if(c!=0)return c;var d=b.ac()-a.ac();if(d!=0)return d;return om(a,b)},pm=function(a,b){var c=a.e("DomainContact")?1:0,d=b.e("DomainContact")?-1:0;return c+d},rm=function(a,b,c){this.M=a;this.TE=b;this.em=c},sm=0;rm[_P].dj=function(a){var b=new N(Fk().od+"/update/"+a),c=Fk().bl.G().get();b.u("token",c);b.u("tok",c);b.u("out","js");return b};rm[_P].bc=function(){throw new Error("getUpdateUri not implemented in "+this);};Ha(rm[_P],function(){if(this.eu&&
!this.eu()){if(this.em)this.em();return}Jj("$ContactData/PendingRequest",true);var a=sm++;this.Dk="ContactUpdate"+a;this.Aa="$ContactUpdate"+a;var b=this.bc(),c=new Gh(b,this.Dk,"&&&START&&&","&&&END&&&",true);this.cH=D(this.iC,this);var d=J();d.V(c,this.Dk);d.S(this.cH,this.Aa);c.load();this.jC=false;B.setTimeout(D(this.CE,this),1000)});rm[_P].CE=function(){if(!this.jC)Jj("$ContactData/PendingLongRequest",true)};rm[_P].iC=function(){this.jC=true;Jj("$ContactData/PendingRequest",false);Jj("$ContactData/PendingLongRequest",
false);var a=L(this.Aa+"/Success");if(a.i()){var b;if(this.kg)b=this.kg();if(this.TE)this.TE(b);var c=L(this.Aa+"/Messages/*");if(c.ba().f()>0){var d=L(this.Aa+"/Messages/[0]/Text").i();sk().add(d,"INFO")}}else{var e=L(this.Aa+"/TryLogin").i();if(e){ka(V("INFO_LOGGED_OUT"));return}var f=L(this.Aa+"/Errors/*");if(f.ba().f()>0){var g=L(this.Aa+"/Errors/[0]/Message").i(),h=L(this.Aa+"/Errors/[0]/Text").i(),j=g||h;sk().add(V("SAVE_DATA_ERROR",{msg:j}),tk)}else sk().add(V("SAVE_DATA_UNKNOWN_ERROR"),tk);
if(this.em)this.em()}};var im=function(a,b,c,d){this.Il=b;rm.call(this,a,c,d);this.tG=!b.e("Id")};F(im,rm);im[_P].bc=function(){var a=this.Il,b=this.dj("contact"),c=a.e("Id");if(c){b.u("id",c);b.u("action","SET")}else b.u("action","ADD");this.tu(b);return b};im[_P].tu=function(a){var b=this.Il,c=L("Addresses/*").ba(b);for(var d=0;d<c.f();d++){var e=c.r(d),f=e.e("Source");if(!f){f="UNSTRUCTURED";e.K("Source",f)}}this.ql(a,b,["Name","Title","Company","Notes"]);this.nf(a,b,"Emails",["Address","Type/Id",
"Type/Label"]);this.nf(a,b,"Others",["Value","Type/Id","Type/Label"]);this.nf(a,b,"Phones",["Number","Type/Id","Type/Label"]);this.nf(a,b,"Ims",["Name","Service/Id","Type/Id","Type/Label"]);this.nf(a,b,"Addresses",["Street","City","Region","Postal","Type/Id","Type/Label","Source","Unstructured"]);this.nf(a,b,"Groups",["id","value"]);var g=Ij("$UserData/IsGcUser");if(g){this.ql(a,b,["CallSettings/GreetingId","CallSettings/RingshareId","CallSettings/GroupId","CallSettings/AlwaysScreen","CallSettings/Response",
"CallSettings/Mode"]);this.Io(a,"$UserProfile/GcProfile/ForwardingPhones/*","CallSettings/ForwardingPhones")}return a};rm[_P].Io=function(a,b,c){var d=L(b).ba(),e=d.f(),f=0;for(var g=0;g<e;g++){var h=$d("ForwardingCheckbox-["+g+"]");if(h!=null){var j=h[v];if(h[cb]==true){var k=c.replace("/",".")+"."+i(f);a.u(k,j);f++}}}};im[_P].ql=function(a,b,c,d){var e=d||"";for(var f=0;f<c[t];f++){var g=c[f],h=L(g).i(b);if(!h)h="";else if(mc(h))h=Hc(h);a.u((e+g).replace("/","."),h)}};im[_P].nf=function(a,b,c,d){var e=
L(c).G(b);if(e)for(var f=0;f<e.l().f();f++){var g=e.l().r(f);this.ql(a,g,d,c+"."+i(f)+".")}};im[_P].eu=function(){var a=true,b=this.Il.j("Emails").l(),c=0,d=false;for(var e=0;e<b.f();e++){var f=b.r(e).e("Address");if(f&&Hc(f)!=""){c++;if(e==0)d=true}if(f&&!Cl(f)){sk().add(V("ASK_VALID_EMAIL"),tk);a=false}}var g=this.Il.e("Name");if(c==0&&(!g||Hc(g)=="")){sk().add(V("ASK_NAME_OR_EMAIL"),tk);a=false}else if(c>0&&!d){sk().add(V("ASK_PRIMARY_EMAIL"),tk);a=false}return a};im[_P].kg=function(){var a=L(this.Aa+
"/Body/Groups/*").ba();if(a.f()>0){var b=new Wl("Groups",this.Aa+"/Body/Groups",this.Aa+"/Body/Groups");b.Jm()}var c=L(this.Aa+"/Body/Contact").G(),d=this.M.ui(c);this.M.Rh(d);if(this.tG)J().v("$Contacts");return d};var lm=function(a,b,c,d){rm.call(this,a,c,d);this.lG=mc(b)?[b]:b};F(lm,rm);lm[_P].bc=function(){var a=this.dj("contact");a.Eg("ids",this.lG);a.u("action","DELETE");return a};lm[_P].kg=function(){var a=L(this.Aa+"/Body/Contact/*").ba();for(var b=0;b<a.f();b++){var c=a.r(b);this.M.op(c.e("Id"))}J().v("$Contacts");
var d=new Wl("Groups",this.Aa+"/Body/Groups",this.Aa+"/Body/Groups");d.Jm();sk().add("Contact has been deleted.","INFO");this.M.Rh()};var mm=function(a,b,c,d,e,f){this.M=a;this.EF=c||"ADD";this.lB=d;this.dc=b;rm.call(this,a,e,f)};F(mm,rm);mm[_P].Lq=function(a,b){var c=this.dj("groups");c.u("action",this.EF);if(this.dc!=null)c.u("id",this.dc);if(this.lB!=null)c.u("name",this.lB);if(a[t]>0)c.Eg("contactIds",a);if(b[t]>0)c.Eg("newContacts",b);return c};var tm=/^[0-9]+$/;mm[_P].bc=function(){var a=L("$Contacts/*").ba(),
b=a.f(),c=[],d=[];this.zl={};for(var e=0;e<b;e++){var f=a.r(e);if(Fk().ub(f,"^Temp")){var g=f.e("Id");if(g&&g.match(tm))c.push(g);else{var h=f.ja();if(h){var j=f.Hb()||"";d.push(h+":"+j);if(g)this.zl[h]=g}}}}var k=this.Lq(c,d),l=Ij("$UserData/IsGcUser");if(l)this.Io(k,"$UserProfile/GcProfile/ForwardingPhones/*","CallSettings/ForwardingPhones");return k};mm[_P].kg=function(){var a=Fk(),b=L(this.Aa+"/Body/Contacts/*").ba();for(var c=0;c<b.f();c++){var d=b.r(c),e=false;if(this.zl){var f=d.Emails||{},
g=f[0]||{},h=g.Address;if(h){var j=this.zl[h];if(j){delete this.zl[h];var k=a.fq(j);if(k){e=k.Gh("^Temp");a.op(j)}}}}var l=a.ui(d);if(e)a.hc(l,true)}J().v("$Contacts");a.ks(this.Aa);J().v("$Groups");a.lk()};var um=function(a,b,c,d,e,f,g){mm.call(this,a,c,d,e,f,g);this.TF=b};F(um,mm);um[_P].bc=function(){return this.Lq(this.TF,[])};var nm=function(a,b,c){rm.call(this,a,b,c)};F(nm,rm);var vm=new ef({MineAutoAdd:"maa"});nm[_P].bc=function(){var a=this.dj("prefs"),b=vm.gb();for(var c=0;c<b[t];c++){var d=
L("$UserPrefs/"+b[c]).G();if(d){var e=d.get(),f=vm.get(b[c]);a.u(f,e)}}return a};var gm=function(a,b){cg.call(this,{},b,null);this.dm(a)};F(gm,cg);gm[_P].load=function(){J().v(this.F())};var wm=function(a){this.ig={};this.vu(a)};wm[_P].vu=function(a){for(var b=0;b<a[t];b++)this.uu(a[b])};wm[_P].uu=function(a){var b=this.xq(a);this.nr(b[0]);if(b[1])this.nr(this.wq(b[0],b[1]))};wm[_P].nr=function(a){this.ig[a]=this.ig[a]?this.ig[a]+1:1};wm[_P].xq=function(a){return Hc(a).split(/[\s,]+/)};wm[_P].iy=function(a){var b=this.xq(a),c=b[0];if(!this.ig[c]||this.ig[c]<=1)return c;if(b[1]){c=this.wq(b[0],b[1]);if(!this.ig[c]||this.ig[c]<=1)return c}return a};wm[_P].wq=function(a,b){return a+
" "+b.charAt(0).toLocaleUpperCase()+"."};wm[_P].mx=function(a,b,c,d){var e=ad(c),f=new RegExp('(^|<| |"|\\()'+e,"i");if(a&&f.test(a))return a;if(f.test(b))return this.Pp(b,d);if(a)return this.iy(a);return this.Pp(b,d)};wm[_P].Pp=function(a,b){if(b)return a.split("@")[0];return a};var ym=function(a,b,c){R.call(this);this.Qe=a;this.nD=c;this.Rb=b;P(b,["hilite","select",xm,"dismiss"],this);this.Ua=null;this.n=[];this.ec=-1;this.dd=0;this.Zd=null;this.zf=null};F(ym,R);ym[_P].NA=10;ym[_P].Vu=true;ym[_P].Lu=false;var xm="canceldismiss";ym[_P].o=function(a){if(a[y]==this.Rb)switch(a[Mb]){case "hilite":this.ld(a.row);break;case "select":this.fi();break;case xm:this.Dl();break;case "dismiss":this.Gp();break}};ym[_P].cf=function(a,b){if(this.Ua==a)return;this.Ua=a;this.Qe.Wd(this.Ua,
this.NA,D(this.JA,this),b);this.Dl()};ym[_P].sj=function(){return this.Zd};ym[_P].hE=function(a){this.Zd=a};ym[_P].isOpen=function(){return this.Rb.Me()};ym[_P].ir=function(){if(this.ec>=this.dd&&this.ec<this.dd+this.n[t]-1){this.ld(this.ec+1);return true}else if(this.ec==-1){this.ld(this.dd);return true}return false};ym[_P].jr=function(){if(this.ec>this.dd){this.ld(this.ec-1);return true}else if(this.Lu&&this.ec==this.dd)this.ld(-1);return false};ym[_P].ld=function(a){this.ec=a;this.Rb.ld(a);return this.um(a)!=
-1};ym[_P].fi=function(){var a=this.um(this.ec);if(a!=-1){var b=this.n[a];this.nD.Sb(b);this.dismiss();this.dispatchEvent({type:"update",row:b});return true}else{this.dismiss();this.dispatchEvent({type:"update",row:null});return false}};ym[_P].dismiss=function(){this.ec=-1;this.Ua=null;this.dd+=this.n[t];pa(this.n,0);window.clearTimeout(this.zf);this.zf=null;this.Rb.dismiss()};ym[_P].Gp=function(){if(!this.zf)this.zf=window.setTimeout(D(this.dismiss,this),100)};ym[_P].Dl=function(){window.setTimeout(D(function(){if(this.zf){window.clearTimeout(this.zf);
this.zf=null}},this),10)};ym[_P].m=function(){ym.B.m.call(this);this.Rb.dispose();this.nD.dispose();this.Qe=null};ym[_P].JA=function(a,b,c){if(this.Ua!=a)return;var d=c?this.um(this.ec):null;this.dd+=this.n[t];this.n=b;var e=[];for(var f=0;f<b[t];++f)e.push({id:this.yq(f),data:b[f]});this.Rb.zC(e,this.Ua,this.Zd);if(this.Vu&&e[t]!=0){var g=d!=null?this.yq(d):this.dd;this.ld(g)}else this.ec=-1};ym[_P].um=function(a){var b=a-this.dd;if(b<0||b>=this.n[t])return-1;return b};ym[_P].yq=function(a){return this.dd+
a};var Bm=function(a,b){if(zm(a))a.selectionStart=b;else if(G){var c=Am(a),d=c[0],e=c[1];if(d.inRange(e)){if(a[Mb]=="textarea"){var f=a[v].substring(0,b);b=Gc(f)[t]}d.collapse(true);d.move("character",b);d.select()}}},Dm=function(a){return Cm(a,true)[0]},Em=function(a,b,c){var d=b.duplicate(),e=a[bb],f=e,g=d[bb],h=g,j=false;while(!j)if(a.compareEndPoints("StartToEnd",a)==0)j=true;else{a.moveEnd("character",-1);if(a[bb]==e)f+="\r\n";else j=true}if(c)return[f[t],-1];var k=false;while(!k)if(d.compareEndPoints("StartToEnd",
d)==0)k=true;else{d.moveEnd("character",-1);if(d[bb]==g)h+="\r\n";else k=true}return[f[t],f[t]+h[t]]},Cm=function(a,b){var c=0,d=0;if(zm(a)){c=a.selectionStart;d=b?-1:a.selectionEnd}else if(G){var e=Am(a),f=e[0],g=e[1];if(f.inRange(g)){f.setEndPoint("EndToStart",g);if(a[Mb]=="textarea")return Em(f,g,b);c=f[bb][t];d=!b?f[bb][t]+g[bb][t]:-1}}return[c,d]},Fm=function(a,b){if(zm(a))a.selectionEnd=b;else if(G){var c=Am(a),d=c[0],e=c[1];if(d.inRange(e)){var f=Dm(a);if(a[Mb]=="textarea"){var g=a[v].substring(0,
b);b=Gc(g)[t];var h=a[v].substring(0,f);f=Gc(h)[t]}e.collapse(true);e.moveEnd("character",b-f);e.select()}}},Am=function(a){var b=a[ub]||a[gb],c=b.selection.createRange(),d;if(a[Mb]=="textarea"){d=c.duplicate();d.moveToElementText(a)}else d=a.createTextRange();return[d,c]},zm=function(a){try{return typeof a.selectionStart=="number"}catch(b){return false}};var Gm=function(a,b,c,d){wg.call(this);this.ii=ec(a)&&!(a===null)?a:",;";this.aA=b||"";this.hg=c!=null?c:true;this.$G=this.hg;this.qa=new ph(d||150);this.WF=this.ii.substring(0,1);var e=this.hg?"[\\s"+this.ii+"]+":"[\\s]+";this.fF=new RegExp("^"+e+"|"+e+"$","g");this.mH=new RegExp("\\s*["+this.ii+"]$");this.Eb=new hi(this);this.nl=new hi(this);this.Ym=new li};F(Gm,wg);Gm[_P].zF=true;Gm[_P].px=true;Gm[_P].vo=false;Gm[_P].tD=true;Gm[_P].ra=null;Gm[_P].gg="";Gm[_P].lf=false;Gm[_P].Jn=false;Gm[_P].vl=
function(a){this.aa=a};Gm[_P].Qu=function(a){ai(a,"select");bi(a,"haspopup",true);this.Eb.listen(a,"focus",this.Sh);this.Eb.listen(a,"blur",this.tB);if(!this.ra)this.nl.listen(a,bh,this.BB)};Gm[_P].he=function(){for(var a=0;a<arguments[t];a++)this.Qu(arguments[a])};Gm[_P].Sb=function(a,b){var c=this.aa.sj();if(ec(b)?b:this.hg){var d=Dm(c),e=this.Qq(c[v],d),f=this.ko(c[v]),g=a.toString();if(!this.mH.test(g))g=g.replace(/[\s\xa0]+$/,"")+this.WF;if(this.zF){if(e!=0&&!Ec(f[e-1]))g=" "+g;if(e<f[t]&&!Ec(f[e+
1]))g=g+" "}if(g!=f[e]){f[e]=g;ya(c,f.join(""));var h=0;for(var j=0;j<=e;j++)h+=f[j][t];c.focus();Bm(c,h);Fm(c,h)}}else ya(c,a.toString());this.Jn=true};Gm[_P].m=function(){Gm.B.m.call(this);this.Eb.dispose();this.Eb=null;this.nl.dispose();this.nl=null};Gm[_P].lE=function(a){this.vo=a};Gm[_P].xh=function(a){switch(a[Db]){case 40:if(this.aa.isOpen()){this.bB();a.preventDefault();return true}else if(!this.hg){this.Qc(true);a.preventDefault();return true}break;case 38:if(this.aa.isOpen()){this.eB();
a.preventDefault();return true}break;case 9:this.Qc();if(this.aa.fi()&&this.$G){a.preventDefault();return true}break;case 13:this.Qc();if(this.aa.fi()){a.preventDefault();return true}break;case 27:if(this.aa.isOpen()){this.aa.dismiss();return true}break;case 229:if(!this.lf){this.Eb.listen(this.ra,"keyup",this.pn);this.lf=true;return true}break}if(this.tD&&this.hg&&a[Cb]&&this.ii.indexOf(i.fromCharCode(a[Cb]))!=-1){this.Qc();if(this.aa.fi()){a.preventDefault();return true}}return false};Gm[_P].Cu=
function(){this.Ym.attach(this.ra);this.Eb.listen(this.Ym,"key",this.us);if(G)this.Eb.listen(this.ra,Bg,this.rs)};Gm[_P].rC=function(){this.Eb.unlisten(this.Ym,"key",this.us);this.Ym.detach();if(G)this.Eb.unlisten(this.ra,Bg,this.rs);if(this.lf)this.Eb.unlisten(this.ra,"keyup",this.pn)};Gm[_P].Sh=function(a){this.nl.ug();if(this.aa)this.aa.Dl();if(a[y]!=this.ra){this.ra=a[y];this.qa.start();this.Eb.listen(this.qa,"tick",this.ws);this.gg=this.ra[v];this.Cu()}};Gm[_P].tB=function(){if(this.ra){this.rC();
this.ra=null;this.lf=false;this.qa.stop();this.Eb.unlisten(this.qa,"tick",this.ws);if(this.aa)this.aa.Gp()}};Gm[_P].ws=function(){if(!this.lf)this.Qc()};Gm[_P].BB=function(a){this.Sh(a)};Gm[_P].us=function(a){if(this.aa&&!this.lf)this.xh(a)};Gm[_P].pn=function(a){if(a[Db]==13){this.lf=false;this.Eb.unlisten(this.ra,"keyup",this.pn)}};Gm[_P].rs=function(a){if(this.hg&&this.ii.indexOf(i.fromCharCode(a[Cb]))!=-1){this.Qc();if(this.aa.fi())a.preventDefault()}};Gm[_P].Qc=function(a){if(a||this.ra&&this.ra[v]!=
this.gg){if(!this.Jn){var b=this.Es();if(this.aa){this.aa.hE(this.ra);this.aa.cf(b,this.ra[v])}}this.gg=this.ra[v]}this.Jn=false};Gm[_P].eB=function(){return this.vo?this.aa.ir():this.aa.jr()};Gm[_P].bB=function(){return this.vo?this.aa.jr():this.aa.ir()};Gm[_P].Es=function(){var a=Dm(this.ra),b=this.ra[v];return this.eF(this.ko(b)[this.Qq(b,a)])};Gm[_P].eF=function(a){return this.fF?i(a).replace(this.fF,""):a};Gm[_P].Qq=function(a,b){var c=this.ko(a);if(b==a[t])return c[t]-1;var d=0;for(var e=0,
f=0;e<c[t]&&f<b;e++){f+=c[e][t];d=e}return d};Gm[_P].ko=function(a){if(!this.hg)return[a];var b=i(a).split(""),c=[],d=[];for(var e=0,f=false;e<b[t];e++)if(this.aA&&this.aA.indexOf(b[e])!=-1){if(this.px&&!f){c.push(d.join(""));pa(d,0)}d.push(b[e]);f=!f}else if(!f&&this.ii.indexOf(b[e])!=-1){d.push(b[e]);c.push(d.join(""));pa(d,0)}else d.push(b[e]);c.push(d.join(""));return c};var Hm=function(a,b,c,d){this.L=a||Zd()[x];this.H=Yd(this.L);this.DC=!a;this.b=null;this.Ua="";this.n=[];this.Fj=-1;this.OE=-1;this.Pa=false;o(this,"ac-renderer");this.rowClassName="ac-row";this.activeClassName="active";this.Gd=b;this.JH=d!=null?d:true;this.hH=c!=null?c:false;this.Fr=null;this.el=false};F(Hm,R);var Im=0;Hm[_P].Vg=null;Hm[_P].jE=function(a){this.el=a};Hm[_P].zC=function(a,b,c){this.Ua=b;this.n=a;this.Fj=0;this.OE=vc();this.Zd=c;this.Fk=[];this.redraw()};Hm[_P].dismiss=function(){if(this.Pa){this.Pa=
false;Se(this.b,false)}};Hm[_P].show=function(){if(!this.Pa){this.Pa=true;Se(this.b,true)}};Hm[_P].Me=function(){return this.Pa};Hm[_P].kr=function(a){this.lz();this.Fj=a;if(a>=0&&a<this.b[Nb][t]){var b=this.Fk[a];Xe(b,this.activeClassName);bi(this.b,"activedescendant",b.id);ue(this.Vg,Ae(b))}};Hm[_P].lz=function(){if(this.Fj>=0)Ye(this.Fk[this.Fj],this.activeClassName)};Hm[_P].ld=function(a){if(a==-1)this.kr(-1);else for(var b=0;b<this.n[t];b++)if(this.n[b].id==a){this.kr(b);return}};Hm[_P].QD=function(a){Xe(a,
this[$a])};Hm[_P].PA=function(){if(!this.b){this.Vg=this.H.p("div",{style:"display:none"});ai(this.Vg,"region");bi(this.Vg,"live","rude");this.H.appendChild(this.L,this.Vg);this.b=this.H.p("div",{style:"display:none"});this.QD(this.b);ai(this.b,"menu");var a=this.b.id="goog-acr-"+Im++;bi(this.Zd,"controls",a);this.H.appendChild(this.L,this.b);P(this.b,Q,this.Pd,false,this);P(this.b,$g,this.Lb,false,this);P(this.H.va(),Q,this.Zq,false,this);P(this.b,zg,this.Qd,false,this)}};Hm[_P].redraw=function(){this.PA();
if(this.el)Va(this.b[w],"hidden");pa(this.Fk,0);this.H.En(this.b);if(this.Gd&&this.Gd.render)this.Gd.render(this,this.b,this.n,this.Ua);else{var a=null;cf(this.n,function(f){f=this.Bk(f,this.Ua);if(this.el)this.b.insertBefore(f,a);else this.H.appendChild(this.b,f);a=f},this)}if(this.n[t]==0){this.dismiss();return}else this.show();this.XB(this.b);if(this.Zd&&this.DC){var b=Ne(this.Zd),c=Qe(this.Zd),d=Qe(Me(this.Zd)),e=Qe(this.b);b.y=this.el?b.y-e[A]:b.y+c[A];if((this.hH||b.x+e[u]>d[u])&&this.Fr!="LEFT"){b.x=
b.x+c[u]-e[u];this.Fr="RIGHT"}else this.Fr="LEFT";Oe(this.b,b);if(this.el)Va(this.b[w],"visible")}Ve(this.b,true)};Hm[_P].xD=function(a){this.DC=a};Hm[_P].m=function(){Hm.B.m.call(this);if(this.b){Ug(this.b,Q,this.Pd,false,this);Ug(this.b,$g,this.Lb,false,this);Ug(this.H.va(),Q,this.Zq,false,this);Ug(this.b,zg,this.Qd,false,this);this.H.removeNode(this.b);this.b=null;this.Pa=false}this.L=null};Hm[_P].XB=function(a){if(id&&od){q(a[w],"");Sa(a[w],"visible");q(a[w],a[jb]);Sa(a[w],"auto")}};Hm[_P].yC=
function(a,b,c){xa(c,Rc(a[hb].toString()))};Hm[_P].Om=function(a,b){if(a[fb]==3){var c,d=null;if(kc(b)){c=b[t]>0?b[0]:"";if(b[t]>1)d=Fd(b,1)}else c=b;if(c[t]==0)return;var e=a[Yb];c=ad(c);var f=new RegExp("(.*?)(^|\\W+)("+c+")","gi"),g=[],h=0,j=f.exec(e);while(j){g.push(j[1]);g.push(j[2]);g.push(j[3]);h=f.lastIndex;j=f.exec(e)}g.push(e.substring(h));if(g[t]>1){a.nodeValue=g[0]+g[1];var k=this.H.createElement("b");this.H.appendChild(k,this.H.createTextNode(g[2]));k=a[z].insertBefore(k,a[Ub]);for(var l=
g[t]-1;l>=3;l--)a[z].insertBefore(this.H.createTextNode(g[l]),k[Ub])}else if(d)this.Om(a,d)}else{var p=a[Eb];while(p){var s=p[Ub];this.Om(p,b);p=s}}};Hm[_P].Bk=function(a,b){var c=this.H.p("div",{className:this.rowClassName});if(this.Gd&&this.Gd.mb)this.Gd.mb(a,b,c);else this.yC(a,b,c);if(b&&this.JH)this.Om(c,b);c.id="goog-acri-"+Im++;Xe(c,this.rowClassName);ai(c,"menuitem");this.Fk.push(c);return c};Hm[_P].Jq=function(a){while(a&&a!=this.b&&!Ze(a,this.rowClassName))a=a[z];return a?td(this.Fk,a):
-1};Hm[_P].Pd=function(a){var b=this.Jq(a[y]);if(b>=0)this.dispatchEvent({type:"select",row:this.n[b].id});a.stopPropagation()};Hm[_P].Lb=function(a){this.dispatchEvent(xm);a.stopPropagation()};Hm[_P].Zq=function(){this.dispatchEvent("dismiss")};Hm[_P].Qd=function(a){var b=this.Jq(a[y]);if(b>=0){if(vc()-this.OE<300)return;this.dispatchEvent({type:"hilite",row:this.n[b].id})}};var Jm=function(){};Jm[_P].render=function(){};var Km=function(a,b,c){this.iD=function(){};this.bF=function(){};Gm.call(this,a,b,c);this.Vz=null};F(Km,Gm);Km[_P].Sb=function(a){if(a instanceof Lm)return;if(a.ue)a=a.ue().join(", ");this.iD();Km.B.Sb.call(this,a)};Km[_P].xh=function(a){this.bF();Gm[_P].xh.call(this,a)};Km[_P].Qc=function(a){this.Vz=this.Es();Gm[_P].Qc.call(this,a)};Km[_P].FD=function(a,b){this.iD=a;this.bF=b};Km[_P].Ox=function(){return this.gg};Km[_P].Aq=function(){return this.Vz};var Nm=function(a,b){this.cG=a;this.GB=b;this.Ed=[];this.uh=new Mm([])};Nm[_P].SD=function(a){this.GB=a};Nm[_P].CD=function(a,b){this.Ed=a;this.uh=new Mm(b)};var Pm=function(a,b,c,d){var e=a.members,f=[],g=[],h=[];for(var j=0;j<e[t];++j){var k=e[j].email;if(c.hasContext&&c.addressHash[k])g.push(e[j]);else f.push(e[j]);if(d[k])h.push(e[j])}return new Om(a,b,e,f,g,h)};Nm[_P].Wd=function(a,b,c){var d=[];if(a=="")return[];if(c){var e="";for(var f=0;f<c[t];++f){var g=c.charAt(f);if(g==";"||g==","){e=Hc(e);
if(e[t]>0)d.push(e);e=""}else e+=g}e=Hc(e);if(e[t]>0)d.push(e)}return this.gx(a,d,b)};Nm[_P].sw=function(a){var b={};for(var c=0;c<a[t];++c){var d=a[c],e=Qm(d);if(e.email)b[e.email]=true}var f={},g=[],h={},j=false,k=0,l={},p=true;for(var c=0;c<this.Ed[t];++c){var s=this.Ed[c],C=s.email;if(b[C]){h[C]=true;j=true;k++;var K=s.groups;if(p){for(var H=0;H<K[t];++H){var ia=K[H];f[ia.id]=1;g.push(ia.id)}p=false}else for(var H=0;H<K[t];++H){var ia=K[H];if(f[ia.id])f[ia.id]++}}}for(var c=0;c<g[t];++c){var eb=
g[c];if(f[eb]==k)l[eb]=true}return{hasContext:j,groupIdHash:l,addressHash:h}};Nm[_P].aC=function(a,b){var c={},d=[];for(var e=0;e<a[t];++e){var f=a[e].groups;if(f)for(var g=0;g<f[t];++g){var h=f[g].id;if(!f[g].implicit)continue;if(b.hasContext&&!b.groupIdHash[h])continue;if(h.charAt(0)!="^")if(!c[h]){var j=this.uh.get(h);if(j){c[h]=true;d.push(j)}}}}d.sort(function(k,l){return k.affinity>l.affinity?-1:(l.affinity>k.affinity?1:0)});return d};var Rm=function(){};Rm[_P].compound=function(){var a=arguments,
b=function(c,d){var e,f;for(e=0;e<a[t];e++){f=a[e](c,d);if(f!=0)return f}return 0};return b};Rm[_P].cp=function(a,b){return a.ac()>b.ac()?-1:(b.ac()>a.ac()?1:0)};Rm[_P].dp=function(a,b){var c=a.xe().name||"",d=b.xe().name||"";if(c>d)return 1;else if(d>c)return-1;return 0};Rm[_P].dv=function(a,b){var c=function(e){if(e.Ga()!=0)return false;return!e.vm()},d=function(e){return e.Ga()==1};if(c(a)&&!c(b))return-1;if(!c(a)&&c(b))return 1;if(d(a)&&!d(b))return-1;if(!d(a)&&d(b))return 1;return 0};Nm[_P].Qv=
function(a){var b={};for(var c=0;c<a[t];++c)if(a[c].email)b[a[c].email]=true;return b};Nm[_P].gx=function(a,b,c){var d=this.ex(a),e=[],f=[];if(this.cG){f=this.fx(a,c);var g={hasContext:false};if(b[t]>0)g=this.sw(b);var h=this.aC(d,g,c),j=this.Qv(d);for(var k=0;k<c&&k<h[t];++k){var l=h[k];e.push(Pm(l,l.affinity,g,j))}}for(var k=0;k<c&&k<f[t];++k){var l=f[k];e.push(Pm(l,20000000,g,j))}for(var k=0;k<c&&k<d[t];++k){var p=d[k],s=p.affinity;if(k==0)s=10000000;e.push(new Sm(p,s))}var C=new Rm,K=C.compound(C.cp,
C.dp);e.sort(K);if(e[t]>c)e.splice(c,e[t]-c);if(this.GB){var H=C.compound(C.dv,C.cp,C.dp);e.sort(H)}return this.JC(e)};Nm[_P].JC=function(a){var b=0,c=0;for(var d=0;d<a[t];d++){var e=a[d];if(e.Ga()==0)b++;else if(e.Ga()==1)c++}var f=b*2,g=f>5?f:5;if(c>g){var h=b+g;a.splice(h,a[t]-h)}return a};Nm[_P].fx=function(a,b){var c=ad(a),d=new RegExp('(^|<| |"|\\()'+c,"i"),e=[],f=this.uh.$x();for(var g=0;g<f[t]&&e[t]<b;++g){var h=f[g];if(h.name&&h.name.match(d))e.push(h)}return e};Nm[_P].ex=function(a){var b=
ad(a),c=new RegExp('(^|<| |"|\\()'+b,"i"),d=[],e=this.Ed;for(var f=0;f<e[t];++f){var g=e[f];if(c.test(g.toString()))d.push(g)}return d};var Tm=function(){};Tm[_P].ye=function(){return 0};Tm[_P].ue=function(){return[]};Tm[_P].Of=function(){return[]};Tm[_P].Ga=function(){return this.xb};Tm[_P].ac=function(){return this.Iu};Tm[_P].xe=function(){return this.Ih};var Sm=function(a,b){this.xb=0;this.Ih=a;this.Iu=b};F(Sm,Tm);Sm[_P].ye=function(){return 1};Sm[_P].ue=function(){return[this.Ih.toString()]};
Sm[_P].Of=function(){return this.Ih.name?[this.Ih.name]:[]};Sm[_P].vm=function(){return!(!this.Ih.isDomainContact)};var Om=function(a,b,c,d,e,f){this.xb=1;this.Ih=a;this.Iu=b;this.yj=c;this.SG=d;this.UH=e;this.LG=f;this.Lv={};for(var g=0;g<e[t];++g)this.Lv[e[g].email]=true};F(Om,Tm);Om[_P].ye=function(){return this.yj[t]};Om[_P].ue=function(){return this.SG};Om[_P].Of=function(){var a=[];for(var b=0;b<this.yj[t];++b)if(this.yj[b].name)a.push(this.yj[b].name);return a};Om[_P].getContext=function(){return this.Lv};
Om[_P].Qx=function(){return this.yj};Om[_P].ym=function(){return this.LG};var Lm=function(a){this.xb=a};na(Lm[_P],function(){return""});Lm[_P].Ga=function(){return this.xb};var Mm=function(a){this.As=[];this.jz=new ef;for(var b=0;b<a[t];++b){var c=a[b];this.As.push(c);this.jz.set(c.id,c)}this.As.sort(function(d,e){if(d.affinity>e.affinity)return-1;else if(e.affinity>d.affinity)return 1;else{var f=d.affinity||"",g=e.affinity||"";if(f>g)return 1;else if(g>f)return-1;return 0}})};Mm[_P].get=function(a){return this.jz.get(a,
null)};Mm[_P].$x=function(){return this.As};var Um=function(){Hm.apply(this,arguments);this.AE=function(){}};F(Um,Hm);Um[_P].Qk=function(a){this.L=a};Um[_P].dE=function(a){this.AE=a};Um[_P].Ar=function(a){if(a.ye)if(a.ye()>0)return true;return false};Um[_P].ny=function(){var a=[];for(var b=0;b<this.n[t];b++){var c=this.n[b][hb];if(this.Ar(c))a.push(c)}return a};Um[_P].Mx=function(){var a=this.Fj,b=0;for(var c=0;c<a;c++){var d=this.n[c][hb];if(!this.Ar(d))b++}return a-b};Um[_P].ul=function(a,b,c,d){var e;if(b=="MSG_TITLE_CONTACTS")e="People";
else if(b=="MSG_TITLE_GROUPS")e="Groups";else if(b=="MSG_TITLE_DOMAIN")e=d+" contacts";var f=new Vm(a,e);c.push({data:f,id:-1})};Um[_P].WB=function(){if(this.n[t]==0)return;if(this.Gd&&this.Gd.Pn){var a=new kf;for(var b=0;b<this.n[t];b++)if(this.n[b][hb].Of)a.Ad(this.n[b][hb].Of());this.Gd.Pn(new wm(a.wa()))}var b,c=[],d=false,e=false,f=false;for(b=0;b<this.n[t];b++){var g=this.n[b],h=g[hb];if(h.Ga()==0){if(!d&&h.vm()==false){this.ul("ContactIcon","MSG_TITLE_CONTACTS",c,null);d=true}if(!f&&h.vm()==
true){var j=h.xe(),k=j.email,l=Wm(k);this.ul("ContactIcon","MSG_TITLE_DOMAIN",c,l);f=true}}if(!e&&h.Ga()==1){this.ul("GroupIcon","MSG_TITLE_GROUPS",c,null);e=true}c.push(this.n[b])}this.n=c};Um[_P].Bk=function(a,b){var c=a[hb].Ga()=="TITLE",d=c?null:b;return Um.B.Bk.call(this,a,d)};Um[_P].redraw=function(){var a=false;this.WB();var b=this.n[t];if(b>0&&this.n[b-1][hb].Ga&&this.n[b-1][hb].Ga()=="MORE")a=true;Um.B.redraw.call(this);if(a){var c=V("SEARCHING_FOR_MATCHES");if(b>1){var d=this.H.createElement("div"),
e=this.H.p("div",{style:"background-color: #A0B0FF; margin: 8px 0px"});if(G){var f=this.H.p("img",{width:"1",height:"1"});e.appendChild(f)}else Ta(e[w],"1px");d.appendChild(e);this.b.appendChild(d);c=V("SEARCHING_FOR_MORE_MATCHES")}var g=this.H.p("div");xa(g,c);this.b.appendChild(g)}this.AE()};var Xm=function(a,b){this.Wb=a;this.Vt=b;this.Lt=he("div",{style:"position:absolute; top:-100px; left:-1000px;"},"");le(Zd()[x],this.Lt)};Xm[_P].eE=function(a){this.Wb=!(!a)};Xm[_P].kn=function(a){ue(this.Lt,
a);return this.Lt[jb]};var Wm=function(a){if(!a)return null;var b=a.indexOf("@");if(b<1)return null;var c=a.substr(b+1,a[t]-b-1);return c};Xm[_P].Pn=function(a){this.Dv=a};Xm[_P].Ps=function(a,b,c,d,e){var f="",g=0;if(!this.Dv)this.Pn(new wm([]));for(var h=0;h<a[t];++h){var j=a[h],k=j.name,l=j.email,p=this.Dv.mx(k,l,e,b),s=this.kn(p+", ");if(g+s<c||h<d){if(h>0)f+=", ";f+=Rc(p);g+=s}else break}return{result:f,count:h,width:g}};Xm[_P].vC=function(a,b){var c=b.xe().name,d=b.Qx(),e=true,f="";if(d[t]>
0){f=Wm(d[0].email);for(var g=1;g<d[t]&&e;++g)e=e&&Wm(d[g].email)==f}var h=400,j=0;if(!this.Vt&&c)j=this.kn("&lt;"+c+"&gt; ");if(e)j+=this.kn("@"+f);var k=2,l=this.Ps(b.ym(),e,h-j,k,a),p=l.count;j+=l[u];var s=function(T){return!xd(b.ym(),T)},C=vd(b.ue(),s),K=this.Ps(C,e,h-j,k-p,a);p+=K.count;j+=K[u];var H=l.result;if(l.count>0&&K.count>0)H+=", ";H+=K.result;var ia=b.ym()[t]+C[t];if(p<ia){var eb=V("AND_OTHERS",{count:ia-p});H+=" "+eb}if(e)H+="@"+f;return H};Xm[_P].AC=function(a,b){if(!this.Wb)return;
var c=[],d=a[hb],e=d.Ix();if(window.manifest&&window.manifest.image&&window.manifest.image[e])e=window.manifest.image[e];else e+=".png";c.push('<table style="font-size: 100%;"><tr>');c.push('<td style="padding: 1px;" width="15">');c.push('<img src = "'+e+'"></td>');c.push('<td style="padding: 1px; color: #666666">');c.push(Rc(d.tj()));c.push("</td></tr></table>");xa(b,c.join(""))};Xm[_P].mb=function(a,b,c){var d=a[hb];if(d instanceof Lm)return;if(d.Ga()=="TITLE"){this.AC(a,c);return}var e=[],f=d.Ga()==
1;if(this.Wb){e.push('<table style="font-size: 100%;"><tr>');e.push('<td style="padding: 1px;" width="15">');e.push("</td>");e.push('<td style="padding: 1px;">')}var g=d.xe().name;if(g)e.push('"'+Rc(g)+'"');if(this.Vt&&g)e.push("<br>");if(!f){if(!this.Vt&&g)e.push(" ");if(g)e.push("&lt;");e.push(Rc(d.xe().email));if(g)e.push("&gt;")}else if(!g||this.Wb){if(g)e.push(" (");e.push(this.vC(b,d));if(g)e.push(")")}if(this.Wb)e.push("</td></tr></table>");xa(c,e.join(""))};var Vm=function(a,b){this.kG=a;
this.CH=b};Vm[_P].Ga=function(){return"TITLE"};Vm[_P].Ix=function(){return this.kG};Vm[_P].tj=function(){return this.CH};var Ym=function(a,b){this.zb={LOG_EVENTS:"ls",ROWS_RANK:"nk",ROWS_NUM_CONTACTS:"nc",SUGGESTED_ITEMS:"si",CONTACTS_IN_CONTEXT:"cc",PREFIX_LENGTH:"pl",EVENT_TYPE:"et",EVENT_TYPE_SHOW:"SH",EVENT_TYPE_SELECT:"SE",LIST_GENERATION_MILLIS:"gm",SELECTED_ROW_NUM:"sr"};this.Nh=[];this.AG=0;this.Lr=0;this.Uz=0;this.Zw=0;this.Tu="";this.wr=false;this.Ac=a;var c=D(this.oA,this),d=D(this.nA,this),e=D(this.aF,this);this.Ac.Cm().dE(c);this.Ac.kj().FD(d,e);this.IG=b;this.qa=new ph(10000);var f=this.kx.bind(this);
this.qa.addEventListener("tick",f);this.qa.start();var g=this.jm.bind(this);P(window,"unload",g)};Ym[_P].st=function(a){this.Tu=a};Ym[_P].tw=function(){this.Ac.nE(false);this.Nh=[]};Ym[_P].Xx=function(){this.Uz++;return this.Uz};Ym[_P].my=function(){var a=this.Ac.Cm().ny(),b=[],c=[],d;for(d=0;d<a[t];++d){b[d]=a[d].ye();c[d]=a[d].ac()}var e={};e[this.zb.ROWS_NUM_CONTACTS]=b;e[this.zb.ROWS_RANK]=c;return e};Ym[_P].Zx=function(){var a=this.Ac.kj().Ox(),b=this.Ac.kj().Aq(),c=0,d=a.indexOf("<");while(d!=
-1){c++;d=a.indexOf("<",d+1)}if(b.indexOf("<")!=-1)c--;return c};Ym[_P].Gq=function(){return this.Ac.kj().Aq()[t]};Ym[_P].tp=function(a){var b={};b[this.zb.EVENT_TYPE]=a;b[this.zb.SUGGESTED_ITEMS]=this.my();b[this.zb.CONTACTS_IN_CONTEXT]=this.Zx();b[this.zb.PREFIX_LENGTH]=this.Gq();return b};Ym[_P].wF=function(a){var b=a[this.zb.SUGGESTED_ITEMS];if(!b)return false;var c=b[this.zb.ROWS_NUM_CONTACTS];return c[t]>0};Ym[_P].Wr=function(a){if(!this.wF(a))return;var b=this.Nh[t];this.Nh[b]=a;var c=b+1;
if(c>=10)this.jm()};Ym[_P].oA=function(){if(this.Ac.Br()==false)return;if(this.Gq()>1)return;var a=this.tp(this.zb.EVENT_TYPE_SHOW);a[this.zb.LIST_GENERATION_MILLIS]=this.Ac.Nx();this.Wr(a)};Ym[_P].nA=function(){if(this.Ac.Br()==false)return;var a=this.tp(this.zb.EVENT_TYPE_SELECT);a[this.zb.SELECTED_ROW_NUM]=this.Ac.Cm().Mx()+1;this.Wr(a)};Ym[_P].aF=function(){var a=new Date;this.Lr=a.getTime()};Ym[_P].kx=function(){if(this.Lr==0)return;var a=new Date,b=a.getTime()-this.Lr,c=60000;if(b>c)this.jm()};
Ym[_P].jm=function(){if(this.wr)return;if(this.Nh[t]==0)return;this.wr=true;var a=this.Nh;this.Nh=[];this.qD(a,this.jx.bind(this))};Ym[_P].qD=function(a,b){var c={};c[this.zb.LOG_EVENTS]=a;var d=new mh,e=d.serialize(c),f=this.Tu,g=new N(this.IG);g.u("out","js");g.u("jsx","true");g.u("tok",f);g.u("eventsToLog",e);var h=this.Xx();this.Dk="ACLoggingReq"+h;this.Aa="$ACLoggingReq"+h;this.pA=new Gh(g,this.Dk,"&&&START&&&","&&&END&&&",true);var j=J();j.V(this.pA,true,this.Dk);j.S(b,this.Aa);this.pA.load()};
Ym[_P].jx=function(){var a=J().ve(this.Aa),b=a.j("Success",false).get();if(b){var c=a.j("Body",false).AuthToken.Value;this.st(c)}else{this.Zw++;if(this.Zw>2)this.tw()}var d=new Date;this.AG=d.getTime();this.wr=false};var Zm=function(){this.pr=false;this.Ed=[];this.RH=[];this.Ha=null;this.Mj=[];this.uh=[];this.Ww={};this.aa=null;this.Rb=null;this.Di=null;this.Qe=null;this.qF=null;this.Gf=false;this.Tz=0;this.Vk=false;this.Jj=false;this.Wb=false;this.Ml=null;this.GE=true;this.dF={};this.ck=250;this.yE=false;xc(Zm[_P],"addInput",Zm[_P].sl)},$m="[A-Za-z0-9!#\\$%\\*\\/\\?\\|\\^\\{\\}`~&'\\+\\-=_]",an="(?:"+$m+"(?:[A-Za-z0-9!#\\$%\\*\\/\\?\\|\\^\\{\\}`~&'\\+\\-=_\\.]*"+$m+")?@[\\.A-Za-z0-9\\-]+)",bn=new RegExp("^"+
an+"$"),cn=new RegExp("^(.+?)??(?:<("+an+")>)?,?$");Zm[_P].Rc=function(a,b,c){if(!a||mc(a)){var d={id:c||""};if(a)d.Name=a;if(b)d.Emails=[{Address:b}];a=fg(d,"$SomeContact")}var e=dn(a);if(this.GE&&!e)return;this.Ed.push(this.Jl(a))};var dn=function(a){return L("Emails/[0]/Address").i(a)||L("Email").i(a)},en=function(a,b){var c=new Zm;if(!b.uri&&b.serverBase)b.uri=b.serverBase+"data/contacts";if(!b.loggingUri&&b.serverBase)b.loggingUri=b.serverBase+"log/emailautocomplete";c.create(a,b);return c};
B._EmailAc_create=en;sa(Zm[_P],function(a,b){var c=$d(a);if(b.groups){this.Vk=true;this.Jj=!(!b.implicitGroups)}if(b.extendedInterface)this.Wb=true;if(b.debugData)this.Ml=b.debugData;if(b.inputHandler)this.Ha=b.inputHandler;if(b.max)this.Pk(b.max);var d=new N(b.uri);this.Gf=b.enableLogging;var e=null;if(this.Gf)e=(new N(b.loggingUri)).toString();this.init(c,d.toString(),e,b.rightAlign,b.twoLine,b.multi)});Zm[_P].dispose=function(){this.Ha.dispose();this.Rb.dispose()};Zm[_P].Nv=function(){return new ym(this,
this.Rb,this.Ha)};Zm[_P].kj=function(){return this.Ha};Zm[_P].Cm=function(){return this.Rb};Zm[_P].Br=function(){return this.Gf};Zm[_P].nE=function(a){this.Gf=a};Zm[_P].Pk=function(a){this.ck=a<0?10100:a};Zm[_P].cq=function(a){var b=null;if(a)if(kc(a)){if(a[t]>0)b=a[0][ub][x]}else b=a[ub][x];return b};Zm[_P].init=function(a,b,c,d,e,f){if(this.pr){Vf.warning("Init already called");return}this.pr=true;this.A=b;this.Qe=new Nm(this.Vk,this.Wb);if(!this.Ml)this.Sr("$Contacts",D(this.Yq,this),null,false);
this.Di=this.cq(a);this.OC=new Xm(this.Wb,e);this.Rb=new Um(this.Di,this.OC,d);this.Rb.xD(true);if(!this.Ha)this.Ha=new Km(",;",'"',f);this.aa=this.Nv();this.Ha.vl(this.aa);if(this.Ml){var g=J();g.V(this.Ml.contacts);this.Yq("$Contacts")}if(a)this.sl(a);if(this.Gf){var h=new Ym(this,c);this.qF=h}};Zm[_P].Sr=function(a,b,c,d){var e=new N(this.A);e.u("out","js");if(c){e.u("tok",c);e.u("cl",false);e.u("psort","Name")}if(d)e.u("cd","true");if(this.Vk)e.u("groups","true");if(this.Jj)e.u("igroups","true");
var f=c?10:this.ck;e.u("max",f);var g=new Gh(e,a,"&&&START&&&","&&&END&&&"),h=J();h.V(g,true);h.S(b,a);g.load()};Zm[_P].sl=function(a){if(!this.pr){Vf.warning("Init should be called first");return}if(kc(a)){if(a[t]==0)return;this.Mj=this.Mj.concat(a);for(var b=0;b<a[t];b++)this.Ha.he.call(this.Ha,a[b])}else{this.Mj.push(a);this.Ha.he.call(this.Ha,a)}if(!this.Di){this.Di=this.cq(a);this.Rb.Qk(this.Di)}};Zm[_P].Wd=function(a,b,c,d){this.cw=a;var e=[],f=new Date;if(a!=""){if(!this.Qe)return;e=this.Qe.Wd(a,
b,d)}if(this.yE&&a)if(!this.dr(a,b,true))if(e[t]<b){var g=e.concat([]);B.setTimeout(D(this.qx,this,g,b,a,c),500);e.push(new Lm("MORE"))}var h=new Date,j=h.getTime()-f.getTime();this.Tz=j;c(a,e)};Zm[_P].Nx=function(){return this.Tz};Zm[_P].dr=function(a,b,c){var d=this.dF[a];return d&&(c||d.count<b)?true:(a[t]>1?this.dr(a.substring(0,a[t]-1),b,false):false)};var fn=0;Zm[_P].qx=function(a,b,c,d){if(c==this.cw&&c!=""){var e="$AdditionalContacts"+fn++,f=D(this.wy,this,a,b,c,d);this.Sr(e,f,c,true)}};Zm[_P].wy=
function(a,b,c,d,e){var f=[].concat(a);if(c==this.cw){var g=this.gq(e),h={};for(var j=0;j<a[t];j++)if(a[j].Ga()==0){var k=a[j].xe().email;h[k]=true}j=0;while(f[t]<b&&j<g.f()){var l=g.r(j),k=dn(l);if(!h[k]){var p=this.Jl(l);f.push(new Sm(p,p.affinity,true));this.Ww[k]=true;this.Ed.push(p)}j++}d(c,f,true);this.dF[c]={count:f[t]}}};Zm[_P].gq=function(a){var b=J().ve(a),c=b.j("Body",true).j("Contacts",true).l();return c};Zm[_P].bp=function(a,b,c,d,e){if(d!=null){var f=d[t];for(var g=0;g<f;g++){var h=
d[g].id,j=a.get(h);if(j){if(e)j.implicit=true;j.members.push(c);if(h.charAt(0)!="^")b.push(j)}}}};Zm[_P].ux=function(a){var b=J().ve(a),c=b.j("Body",true).AuthToken;return c.Value};Zm[_P].sy=function(a){var b=J().ve(a),c=b.j("Body",true).UsageLoggingEnabled;return!(!c)};Zm[_P].Yq=function(a){if(this.sy(a)&&this.Gf){var b=this.ux(a);this.qF.st(b)}else this.Gf=false;var c=[],d=[],e=new ef,f=J().ve(a),g=f.j("Body").j("UserData");if(g){this.yE=g.e("ShowDomainContacts");this.Jj=this.Jj&&g.e("ShowImplicitGroups");
this.Wb=this.Wb&&g.e("EmailAcExtendedInterface");this.OC.eE(this.Wb);this.Qe.SD(this.Wb)}if(this.Vk){var h=f.j("Body").j("Groups");if(h){var j=h.l(),k=j.f();Vf.info("Got "+k+" groups");for(var l=0;l<k;l++){var p=j.r(l),s=p.e("id");if(s.charAt(0)=="^"||p.IsSystem=="true")continue;var C=this.Rv(p);d.push(C);e.set(s,C)}}Vf.info("Created groups array")}var K=this.gq(a),k=K.f();Vf.info("Got "+k+" contacts");if(k>0)for(var l=0;l<this.Mj[t];l++)this.Mj[l].setAttribute("autocomplete","off");for(var l=0;l<
k;l++){var H=K.r(l),ia=dn(H);if(!ia&&this.GE)continue;var eb=this.Jl(H);if(this.Vk){var T=[],j=H.e("Groups");this.bp(e,T,eb,j,false);if(this.Jj){var Ud=H.e("ImplicitGroups");this.bp(e,T,eb,Ud,true)}if(T[t]>0)eb.groups=T}c.push(eb);this.Ww[ia]=true}Vf.info("Created contacts array");this.Ed=c;this.uh=d;this.Qe.CD(this.Ed,this.uh);Vf.info("Set data source for matcher")};Zm[_P].Jl=function(a){var b=a.Id,c=a.Name,d=a.Affinity,e=!(!a.DomainContact);if(!d)d=0;var f=dn(a),g={};g.data=a;g.id=b;g.name=c;g.email=
f;g.isDomainContact=e;g.affinity=d;var h=gn(c,f);g.formattedValue=h;g.groups=[];na(g,function(){return this.formattedValue});return g};Zm[_P].Rv=function(a){return{members:[],data:a,id:a.id,affinity:a.Affinity||0,name:a.Name,toString:function(){return this[Rb]}}};var _emailAutocomplete=B._emailAutocomplete=new Zm;B._initEmailAutocomplete=D(B._emailAutocomplete.init,B._emailAutocomplete);var _initEmailAutocomplete=B._initEmailAutocomplete,gn=function(a,b){var c=a?'"'+a+'"':"",d=b?" <"+b+">":"";return c+
d},Qm=function(a){var b=null,c=null;a=Hc(a);var d=a.match(cn);if(d){b=d[1]||null;c=d[2]||null}if(b&&!c){var e=b.match(bn);if(e){b="";c=e[0]}}if(b){b=Hc(b);if(Bc(b,'"')&&Cc(b,'"'))b=b.substr(1,b[t]-2)}if(c)c=Hc(c);return{name:b,email:c}};var X=function(){this.Re="closure_frame"+hn++;this.Gj=[];jn[this.Re]=this},kn;F(X,R);var jn={},hn=0;var ln=function(){if(!kn){kn=he("form");kn.acceptCharset="utf-8";var a=kn[w];ra(a,"absolute");Va(a,"hidden");a.top=Da(a,"-10px");q(a,Ta(a,"10px"));Sa(a,"hidden");Zd()[x].appendChild(kn)}return kn},mn=function(a,b){jf(b,function(c,d){var e=he("input",{type:"hidden",name:d,value:c});a.appendChild(e)})};X[_P].Q=If("goog.net.IframeIo");X[_P].Z=null;X[_P].J=null;X[_P].Fe=null;X[_P].nB=0;X[_P].ma=false;X[_P].uc=
false;X[_P].rd=false;X[_P].Lc=null;X[_P].Kh=null;X[_P].Nb=0;X[_P].ae=0;X[_P].ud=null;X[_P].$p=null;X[_P].Rd=null;Ha(X[_P],function(a,b,c,d){if(this.ma)throw Error("[goog.net.IframeIo] Unable to send, already active.");a=new N(a);this.Lc=a;var e=b?b.toUpperCase():"GET";if(c)a.jn();this.Q.info("Sending iframe request: "+a+" ["+e+"]");this.Z=ln();if(e=="GET")mn(this.Z,a.Fc());if(d)mn(this.Z,d);this.Z.action=a;this.Z.method=e;this.mt()});X[_P].nt=function(a,b,c){if(this.ma)throw Error("[goog.net.IframeIo] Unable to send, already active.");
var d=new N(b||a.action);if(c)d.jn();this.Q.info("Sending iframe request from form: "+d);this.Lc=d;this.Z=a;this.Z.action=d;this.mt()};X[_P].abort=function(a){if(this.ma){this.Q.info("Request aborted");Yg(this.pj());this.uc=false;this.ma=false;this.Nb=a||7;this.dispatchEvent("abort");this.hn()}};X[_P].m=function(){this.Q.fine("Disposing iframeIo instance");if(this.ma){this.Q.fine("Aborting active request");this.abort()}X.B.m.call(this);if(this.J)this.et();this.Jp();this.Mw=null;this.Z=null;this.zG=
this.Kh=this.Lc=null;this.Nb=0;delete jn[this.Re]};X[_P].Le=function(){return this.uc};X[_P].Kc=function(){return this.rd};X[_P].Eh=function(){return this.ma};X[_P].Ta=function(){return this.Kh};X[_P].hd=function(){return kh(this.Kh)};X[_P].Dm=function(){if(!this.J)return null;return this.om()};X[_P].wm=function(){return this.Lc};X[_P].bo=function(a){this.ae=n.max(0,a)};Aa(X[_P],function(a){if(this.J)wh.zk(this.J);try{X.B[qb].call(this,a)}finally{if(this.J)wh.vk()}});X[_P].mt=function(){this.ma=true;
this.uc=false;this.Nb=0;this.Uv();if(G){Ea(this.Z,this.Fe);this.So();P(this.J,eh,this.on,false,this);try{this.Nw=false;this.Z.submit()}catch(a){Ug(this.J,eh,this.on,false,this);this.Kb(1)}}else{this.Q.fine("Setting up iframes and cloning form");this.So();var b=this.Fe+"_inner",c=te(this.J);c.write("<body><iframe id="+b+" name="+b+"></iframe>");P(c.getElementById(b),"load",this.nk,false,this);var d=this.Z.getElementsByTagName("textarea");for(var e=0,f=d[t];e<f;e++)if(Ae(d[e])!=d[e][v])ue(d[e],d[e][v]);
var g=c.importNode(this.Z,true);Ea(g,b);c[x].appendChild(g);var h=this.Z.getElementsByTagName("select"),j=g.getElementsByTagName("select");for(var e=0,f=h[t];e<f;e++)ta(j[e],h[e].selectedIndex);var k=this.Z.getElementsByTagName("input"),l=g.getElementsByTagName("input");for(var e=0,f=k[t];e<f;e++)if(k[e][Mb]=="file")if(k[e][v]!=l[e][v]){this.Q.fine("File input value not cloned properly.  Will submit using original form.");Ea(this.Z,b);g=this.Z;break}this.Q.fine("Submitting form");try{g.submit();c.close();
if(id)this.$p=rh(this.Rt,250,this)}catch(a){this.Q.severe("Error when submitting form: "+qf(a));Ug(c.getElementById(b),"load",this.nk,false,this);c.close();this.Kb(2)}}};X[_P].on=function(a){if(this.J[Ab]=="complete"){Ug(this.J,eh,this.on,false,this);var b;try{b=te(this.J);if(G&&b[kb]=="about:blank"&&!aa.onLine){this.Kb(9);return}}catch(a){this.Kb(1);return}this.ar(b)}};X[_P].nk=function(){Ug(this.pj(),"load",this.nk,false,this);this.ar(this.om())};X[_P].ar=function(a){this.Q.fine("Iframe loaded");
this.uc=true;this.ma=false;var b;try{var c=a[x];this.Kh=c.textContent||c.innerText}catch(d){b=1}var e;if(!b&&typeof this.Mw=="function"){e=this.Mw(a);if(e)b=4}this.Q.finer("Last content: "+this.Kh);this.Q.finer("Last uri: "+this.Lc);if(b){this.Q.fine("Load event occurred but failed");this.Kb(b,e)}else{this.Q.fine("Load succeeded");this.rd=true;this.Nb=0;this.dispatchEvent(th);this.dispatchEvent("success");this.hn()}};X[_P].Kb=function(a,b){if(!this.Nw){this.rd=false;this.ma=false;this.uc=true;this.Nb=
a;if(a==4)this.zG=b;this.dispatchEvent(th);this.dispatchEvent("error");this.hn();this.Nw=true}};X[_P].hn=function(){this.Q.info("Ready for new requests");var a=this.J;this.et();this.Jp();wh.zk(a);try{this.dispatchEvent("ready")}finally{wh.vk()}};X[_P].Uv=function(){this.Q.fine("Creating iframe");this.Fe=this.Re+"_"+(this.nB++).toString(36);this.J=he("iframe",{name:this.Fe,id:this.Fe});var a=this.J[w];Va(a,"hidden");q(a,Ta(a,"10px"));if(!kd){ra(a,"absolute");a.top=Da(a,"-10px")}else a.marginTop=a.marginLeft=
"-10px"};X[_P].So=function(){Zd()[x].appendChild(this.J)};X[_P].et=function(){var a=this.J;if(a){oa(a,null);a.onload=null;a.onerror=null;this.Gj.push(a)}if(this.Rd){sh(this.Rd);this.Rd=null}if(id||hd)this.Rd=rh(this.Ql,2000,this);else this.Ql();this.J=null;this.Fe=null};X[_P].Ql=function(){if(this.Rd){sh(this.Rd);this.Rd=null}var a=0;while(a<this.Gj[t]){var b=this.Gj[a];if(wh.Kz(b)){this.Q.info("Disposing iframe");Bd(this.Gj,a);oe(b)}else a++}if(this.Gj[t]!=0){this.Q.info("Requests outstanding, waiting to dispose");
this.Rd=rh(this.Ql,2000,this)}};X[_P].Jp=function(){if(this.Z&&this.Z==kn)me(this.Z);this.Z=null};X[_P].om=function(){if(this.J)return te(this.pj());return null};X[_P].pj=function(){if(this.J)return G?this.J:te(this.J).getElementById(this.Fe+"_inner");return null};X[_P].Rt=function(){if(this.ma){var a=this.om();if(a)try{}catch(b){Ug(this.pj(),"load",this.nk,false,this);if(aa.onLine){this.Q.warning("Silent Firefox error detected");this.Kb(3)}else{this.Q.warning("Firefox is offline so report offline error instead of silent error");
this.Kb(9)}return}this.$p=rh(this.Rt,250,this)}};var nn=function(a){O.call(this,"incrementaldata");this.data=a};F(nn,O);var on=function(a,b){this.n=a;this.IH=!b};on[_P].Wd=function(a,b,c){var d=this.ey(a,b);if(d[t]==0&&this.IH)d=this.jy(a,b);c(a,d)};on[_P].ey=function(a,b){var c=[];if(a!=""){var d=ad(a),e=new RegExp("(^|\\W+)"+d,"i");df(this.n,function(f){if(i(f).match(e))c.push(f);return c[t]>=b})}return c};on[_P].jy=function(a,b){var c=[];cf(this.n,function(f,g){var h=a.toLowerCase(),j=i(f).toLowerCase(),k=0;if(j.indexOf(h)!=-1)k=ea(j.indexOf(h)/4,10);else{var l=h.split(""),p=-1,k=0,s=10;for(var C=0,K;K=l[C];C++){var H=
j.indexOf(K);if(H>p){var ia=H-p-1;if(ia>s-5)ia=s-5;k+=ia;p=H}else{k+=s;s+=5}}}if(k<h[t]*6)c.push({str:f,score:k,index:g})});c.sort(function(f,g){var h=f.score-g.score;if(h!=0)return h;return f[ab]-g[ab]});var d=[];for(var e=0;e<b&&e<c[t];e++)d.push(c[e].str);return d};var pn=function(a,b,c,d){var e=new on(a,!d),f=new Hm,g=new Gm(null,null,!(!c));ym.call(this,e,f,g);g.vl(this);g.he(b)};F(pn,ym);var qn=function(a,b,c){O.call(this,a,b);this.item=c};F(qn,O);var rn=function(a,b){this.tb=new hi(this);this.ED(a);if(b)this.kE(b)};F(rn,R);var sn="toggle_display";rn[_P].b=null;rn[_P].Uu=true;rn[_P].Yo=null;rn[_P].Za=false;rn[_P].uE=false;rn[_P].Jr=-1;rn[_P].Uj=-1;rn[_P].xb=sn;rn[_P].Ga=function(){return this.xb};rn[_P].kE=function(a){this.xb=a};rn[_P].Kd=function(){return this.b};rn[_P].ED=function(a){this.Jw();this.b=a};rn[_P].Jw=function(){if(this.Za)throw Error("Can not change this state of the popup while showing.");};rn[_P].Me=function(){return this.Za};
rn[_P].yr=function(){return this.Za||vc()-this.Uj<150};rn[_P].W=function(a){if(a){if(!this.b)throw Error("Caller must call setElement before trying to show thepopup");this.EE()}else this.Ej()};rn[_P].reposition=function(){};rn[_P].EE=function(){if(this.Za)return;if(!this.sB())return;this.reposition();if(this.Uu){var a=Xd(this.b);this.tb.listen(a,$g,this.jg,true);if(G){var b=a[Xa];while(b&&b[sb]=="IFRAME"){try{var c=te(b)}catch(d){break}a=c;b=a[Xa]}this.tb.listen(a,$g,this.jg,true);this.tb.listen(a,
"deactivate",this.qs)}else this.tb.listen(a,"blur",this.qs)}if(this.xb==sn){Va(this.b[w],"visible");Se(this.b,true)}else if(this.xb=="move_offscreen")this.reposition();this.Za=true;this.Oc()};rn[_P].Ej=function(a){if(this.Za){if(!this.rB(a))return;if(this.tb)this.tb.ug();if(this.xb==sn)if(this.uE)rh(this.hr,0,this);else this.hr();else if(this.xb=="move_offscreen")this.dB();this.Za=false;this.mk(a)}};rn[_P].hr=function(){Va(this.b[w],"hidden");Se(this.b,false)};rn[_P].dB=function(){Da(this.b[w],"-200px");
this.b[w].top="-200px"};rn[_P].sB=function(){return this.dispatchEvent("beforeshow")};rn[_P].Oc=function(){this.Jr=vc();this.Uj=-1;this.dispatchEvent("show")};rn[_P].rB=function(a){return this.dispatchEvent({type:"beforehide",target:a})};rn[_P].mk=function(a){this.Uj=vc();this.dispatchEvent({type:"hide",target:a})};rn[_P].jg=function(a){if(!se(this.b,a[y])&&(!this.Yo||se(this.Yo,a[y])))this.Ej(a[y])};rn[_P].qs=function(a){var b=Xd(this.b);if(G){var c=b[Xa];if(c&&se(this.b,c))return}else if(a[y]!=
b)return;if(vc()-this.Jr<150)return;this.Ej()};rn[_P].m=function(){rn.B.m.call(this);this.tb.dispose();this.b=null;this.tb=null};var tn=function(a,b){this.RB=5;this.rg=b;rn.call(this,a)};F(tn,rn);tn[_P].EA=null;tn[_P].dy=function(){return this.RB};tn[_P].setPosition=function(a){this.rg=a;if(this.Za)this.reposition()};tn[_P].reposition=function(){if(!this.rg)return;if(!this.Za){Va(this.b[w],"hidden");Se(this.b,true)}this.rg.reposition(this.b,this.RB,this.EA);if(!this.Za)Se(this.b,false)};var wn=function(a,b,c,d,e,f,g){var h=Ne(c),j=Ne(a),k=new yc(j.x-h.x+c[nb],j.y-h.y+c[Vb]),l=1,p=1,s=Qe(a),C=un(a,b);switch(C){case 1:break;
case 2:k.x+=s[u];l=-1;break;case 3:k.y+=s[A];p=-1;break;case 4:k.x+=s[u];k.y+=s[A];l=-1;p=-1;break}if(e){k.x+=l*e.x;k.y+=p*e.y}return vn(k,c,d,f,g)},vn=function(a,b,c,d,e){var f=un(b,c);if(d||f!=1){var g=Qe(b);switch(f){case 1:a.x+=d[tb];a.y+=d.top;break;case 2:a.x-=g[u];if(d){a.x-=d[cc];a.y+=d.top}break;case 3:a.y-=g[A];if(d){a.x+=d[tb];a.y-=d[Hb]}break;case 4:a.x-=g[u];a.y-=g[A];if(d){a.x-=d[cc];a.y-=d[Hb]}break}}var h=e||0;if(h!=0){var j=Xd(b),k=ge(j)||window,l=Qe(b),p=ee(k),s=fe(k),C=a.x-s.x,
K=p[u]-C,H=a.y-s.y,ia=p[A]-H;if(l[u]>K)if(h&1)a.x-=l[u]-K;else if(h&2)return false;if(l[A]>ia)if(h&4)a.y-=l[A]-ia;else if(h&8)return false;if(a.x-s.x<0)if(h&1)a.x-=a.x-s.x;else if(h&2)return false;if(a.y-s.y<0)if(h&4)a.y-=a.y-s.y;else if(h&8)return false}Le(b,a);return true},un=function(a,b){var c=Te(a);switch(b){case 1:case 2:case 3:case 4:return b;case 5:return c?2:1;case 6:return c?1:2;case 7:return c?4:3;case 8:return c?3:4}},xn=function(a){switch(a){case 1:return 2;case 2:return 1;case 3:return 4;
case 4:return 3;case 5:return 6;case 6:return 5;case 7:return 8;case 8:return 7}},yn=function(a){switch(a){case 1:return 3;case 2:return 4;case 3:return 1;case 4:return 2;case 5:return 7;case 6:return 8;case 7:return 5;case 8:return 6}};var zn=function(){};zn[_P].reposition=function(){};var An=function(a,b){this.element=a;this.corner=b};F(An,zn);An[_P].reposition=function(a,b,c){wn(this.element,this.corner,a,b,null,c)};var Bn=function(a,b,c){An.call(this,a,b);this.HF=c||false};F(Bn,An);Bn[_P].reposition=
function(a,b,c){var d=wn(this.element,this.corner,a,b,null,c,10);if(!d){d=wn(this.element,b,a,this.corner,null,c,10);if(!d)if(this.HF)d=wn(this.element,this.corner,a,b,null,c,5);else wn(this.element,this.corner,a,b,null,c,0)}};var Cn=function(a,b){this.coordinate=a instanceof yc?a:new yc(a,b)};F(Cn,zn);Cn[_P].reposition=function(a,b,c){vn(this.coordinate,a,b,c)};var Dn=function(a,b){this.coordinate=a instanceof yc?a:new yc(a,b)};F(Dn,zn);Dn[_P].reposition=function(a,b,c){var d=Me(a);wn(d,1,a,b,this.coordinate,
c)};var En=function(a,b){this.coordinate=a instanceof yc?a:new yc(a,b)};F(En,zn);En[_P].reposition=function(a,b,c){var d=Me(a),e=new yc(this.coordinate.x+d[Fb],this.coordinate.y+d[Wa]);wn(d,1,a,b,e,c)};var Fn=function(a,b){En.call(this,a,b)};F(Fn,En);Fn[_P].reposition=function(a,b,c){var d=Me(a),e=new yc(this.coordinate.x+d[Fb],this.coordinate.y+d[Wa]),f=10;if(wn(d,1,a,b,e,c,f))return;if(wn(d,1,a,yn(b),e,c,f))return;if(wn(d,1,a,xn(b),e,c,f))return;if(wn(d,1,a,yn(xn(b)),e,c,f))return;wn(d,1,a,b,e,
c)};var Gn=function(a){tn.call(this,a);this.g=new hi(this)};F(Gn,tn);var Hn="itemaction";Gn[_P].m=function(){Gn.B.m.call(this);this.g.dispose()};Gn[_P].Oc=function(){Gn.B.Oc.call(this);this.g.listen(this.b,zg,this.Vh);this.g.listen(this.b,Ag,this.Uh);this.g.listen(this.b,$g,this.qn);this.g.listen(this.b,ah,this.Wh);this.g.listen(this.b,G?bh:Bg,this.Th)};Gn[_P].mk=function(a){Gn.B.mk.call(this,a);this.g.ug()};Gn[_P].Ia=function(){};Gn[_P].Vh=function(){};Gn[_P].Uh=function(){};Gn[_P].qn=function(){};Gn[_P].Wh=
function(){};Gn[_P].Th=function(){};var In=function(a){Gn.call(this,a)};F(In,Gn);In[_P].ia=null;In[_P].Cr="menu-item";In[_P].lt="menu-item-selected";In[_P].Vj=vc();In[_P].m=function(){In.B.m.call(this);this.ia=null};In[_P].Lx=function(){return this.Cr};In[_P].Ia=function(a){if(this.ia)Ye(this.ia,this.lt);this.ia=a;if(this.ia){Xe(this.ia,this.lt);var b=this.ia[Vb],c=this.ia[Xb],d=this.b[Wa],e=this.b[Xb];if(b<d)ma(this.b,b);else if(b+c>d+e)ma(this.b,b+c-e)}};In[_P].Oc=function(){In.B.Oc.call(this);G?this.b[Eb].focus():this.b.focus()};
In[_P].mj=function(a){var b=this.b.getElementsByTagName("*"),c=b[t],d;if(this.ia)for(var e=0;e<c;e++)if(b[e]==this.ia){d=a?e-1:e+1;break}if(!ec(d))d=a?c-1:0;for(var e=0;e<c;e++){var f=a?-1:1,g=d+f*e%c;if(g<0)g+=c;else if(g>=c)g-=c;if(this.Wm(b[g]))return b[g]}return null};In[_P].Vh=function(a){var b=this.Pf(a[y]);if(b==null)return;if(vc()-this.Vj>150)this.Ia(b)};In[_P].Uh=function(a){var b=this.Pf(a[y]);if(b==null)return;if(vc()-this.Vj>150)this.Ia(null)};In[_P].qn=function(a){a.preventDefault()};
In[_P].Wh=function(a){var b=this.Pf(a[y]);if(b==null)return;this.W(false);this.ss(b)};In[_P].Th=function(a){switch(a[Db]){case 40:this.Ia(this.mj(false));this.Vj=vc();break;case 38:this.Ia(this.mj(true));this.Vj=vc();break;case 13:if(this.ia){this.ss();this.W(false)}break;case 27:this.W(false);break;default:if(a[Cb]){var b=i.fromCharCode(a[Cb]);this.gD(b,1,true)}break}a.preventDefault();this.dispatchEvent(a)};In[_P].gD=function(a,b,c){var d=this.b.getElementsByTagName("*"),e=d[t],f;if(e==0)return;
if(!this.ia||(f=td(d,this.ia))==-1)f=0;var g=f,h=new RegExp("^"+ad(a),"i"),j=c&&this.ia,k=b||1;do{if(d[f]!=j&&this.Wm(d[f])){var l=Ae(d[f]);if(l.match(h))break}f+=k;if(f==e)f=0;else if(f<0)f=e-1}while(f!=g);if(this.ia!=d[f])this.Ia(d[f])};In[_P].ss=function(a){this.dispatchEvent(new qn(Hn,this,a||this.ia))};In[_P].Wm=function(a){return Ze(a,this.Cr)};In[_P].Pf=function(a){var b=Xd(a)[x];while(a!=null&&a!=b){if(this.Wm(a))return a;a=a[z]}return null};var Jn=function(a,b){var c=a||"menu",d=b||Zd()[x];this.b=he("div",{tabIndex:0,"class":c});ai(this.b,"menu");bi(this.b,"haspopup",true);d.appendChild(this.b);In.call(this,this.b);this.Ob=null;this.ya=[]};F(Jn,In);Jn[_P].aj=null;Jn[_P].Ws=null;Jn[_P].Mg=10;Jn[_P].vy=function(){return this.Mg};Jn[_P].add=function(a){var b=this.Kd();if(!b)throw Error("setElement() called before create()");if(a.Rx())throw Error("Menu item already added to a menu");a.At(this);this.ya.push(a);b.appendChild(a.create())};
Ia(Jn[_P],function(a){a.remove();a.At(null);Cd(this.ya,a)});Jn[_P].focus=function(){this.b.focus()};Jn[_P].VD=function(a){this.Ob=a;this.Zn(a)};Jn[_P].rt=function(a,b,c){if(this.aj)Wg(this.aj);if(this.Ug!=a){this.np=false;this.Uj=-1}var d=c||Q;this.aj=P(a,d,this.zs,false,this);this.Ws=P(window,dh,this.Yh,false,this);this.setPosition(new An(a,b||7));this.Ug=a};Jn[_P].m=function(){for(var a=0;a<this.ya[t];a++)this.ya[a].dispose();Wg(this.aj);Wg(this.Ws);oe(this.b);this.b=null;this.Ug=null;Jn.B.m.call(this)};
Jn[_P].W=function(a,b){if(this.yr()&&a)return;if(a==false){if(this.la){this.la.Ii();In[_P].Ia.call(this,null)}if(this.Ob&&!b)this.Ob.focus()}else{if(this.Ob)this.Mg=this.Ob.vy()+1;Ra(this.b[w],this.Mg)}if(b&&this.Ob)this.Ob.W(a,b);if(this.zd){window.clearTimeout(this.zd);this.zd=null}this.la=null;rn[_P].W.call(this,a)};Jn[_P].bE=function(a){this.Ia(a==-1?null:this.b[Nb][a])};Jn[_P].Rj=function(a,b){if(a||!this.la||!this.la.gr())In[_P].Ia.call(this,a);var c=a?this.Md(a):null;if(c&&c!=this.la){if(b&&
this.la){this.la.Ii();this.la=null}if(this.zd){window.clearTimeout(this.zd);this.zd=null}if(!b)this.zd=window.setTimeout(D(this.jD,this,c),300);if(this.Ob){this.Ob.Ia(this.Ug);this.b.focus()}}};Jn[_P].Ia=function(a){var b,c;if(!a){b=null;c=null}else if(typeof a[fb]!="undefined"){b=a;c=this.Md(b)}else{c=a;b=c.b}if(b||!this.la||!this.la.gr())In[_P].Ia.call(this,b);if(c==this.la)return;if(this.la&&b)this.la.Ii();if(b){var c=this.Md(b);if(c.$f()){c.rn();c.ph().focus()}this.la=c}};Jn[_P].jD=function(a){if(this.zd){window.clearTimeout(this.zd);
this.zd=null}var b=this.Md(this.ia);if(b!=a)return;if(this.la&&a)this.la.Ii();if(a.$f()){a.rn();a.ph().focus()}else this.b.focus();this.la=a};Jn[_P].ol=function(a){var b=this.Md(a);if(b.$f()){b.rn();var c=b.ph();c.focus();this.la=b}else{this.W(false,true);this.dispatchEvent(new qn(Hn,this,b))}};Jn[_P].zs=function(){if(!this.np)this.W(true);this.np=false};Jn[_P].pp=function(a){if(se(this.b,a))return true;if(this.la&&this.la.$f())return this.la.ph().pp(a);return false};Jn[_P].jg=function(a){if(this.Ug==
a[y]||se(this.Ug,a[y]))this.np=true;var b=this;while(b.Ob)b=b.Ob;if(!b.pp(a[y]))this.Ej()};Jn[_P].Vh=function(a){var b=this.Pf(a[y]);if(b==null)return;this.Rj(b)};Jn[_P].Uh=function(a){var b=this.Pf(a[y]);if(b==null)return;this.Rj(null)};Jn[_P].Wh=function(a){var b=this.Pf(a[y]);if(b==null)return;this.ol(b)};Jn[_P].Yh=function(){if(!this.Mz()&&this.Me())this.reposition()};Jn[_P].Th=function(a){var b=false;switch(a[Db]){case 37:if(this.Ob)this.W(false);b=true;break;case 39:var c=this.Md(this.ia);if(this.ia&&
c.$f()){this.ol(this.ia);c.ph().bE(0)}b=true;break;case 40:this.Rj(this.mj(false),true);b=true;break;case 38:this.Rj(this.mj(true),true);b=true;break;case 13:if(this.ia)this.ol(this.ia);b=true;break;case 27:this.W(false);b=true;break}if(b)a.preventDefault()};Jn[_P].Oc=function(){Jn.B.Oc.call(this);this.Ia(null);var a=Te(this.b);if(a)Xe(this.b,"goog-rtl");else Ye(this.b,"goog-rtl");if(!this.Ob)this.b.focus()};Jn[_P].Md=function(a){var b=-1;for(var c=a;c;c=qe(c))b++;return b==-1?null:this.ya[b]};var Kn=
function(a,b,c){this.El=i(a);this.Va=b||a;this.mc=c||null;this.dk=null;this.b=null};Kn[_P].i=function(){return this.Va};Kn[_P].ji=function(a){this.El=a;if(this.b)this.b[Eb].nodeValue=a};Kn[_P].eo=function(a){this.Va=a};Kn[_P].dispose=function(){this.remove();if(this.mc)this.mc.dispose()};Kn[_P].At=function(a){this.dk=a;if(this.mc)this.mc.VD(a)};Kn[_P].Rx=function(){return this.dk};sa(Kn[_P],function(){if(!this.dk)throw Error("MenuItem is not attached to a menu");var a,b;if(this.mc){b=he("span",{"class":"goog-menu-arrow-right"},
"\u25b6");a=he("span",{"class":"goog-menu-arrow-left"},"\u25c0")}this.b=he("div",{"class":this.dk.Lx()},this.El,a,b);return this.b});Ia(Kn[_P],function(){oe(this.b);this.b=null});Kn[_P].$f=function(){return this.mc!=null};Kn[_P].gr=function(){return this.$f()?this.mc.yr():false};Kn[_P].ph=function(){return this.mc};Kn[_P].rn=function(){if(this.mc){var a=this.mc,b=a.dy();switch(b){case 1:b=2;break;case 2:b=1;break;case 5:b=6;break;case 6:b=5;break}a.rt(this.b,b);a.W(true)}};Kn[_P].Ii=function(){if(this.mc)this.mc.W(false)};
var Ln=function(){Kn.call(this,null)};F(Ln,Kn);sa(Ln[_P],function(){if(!this.dk)throw Error("MenuSeparator is not attached to a menu");this.b=ie("hr");ai(this.b,"separator");return this.b});var Mn=function(a,b){this.eb=a;this.Ca=b;this.Er=0;this.Cn=b.entry};wa(Mn[_P],function(){if(this.Er>=this.Cn[t])return null;var a=this.Cn[this.Er];++this.Er;return this.le(a)});Mn[_P].le=function(){return null};Mn[_P].Px=function(){return this.Cn?this.Cn[t]:0};var Nn=function(a,b,c,d){Mn.call(this,a,b);this.ge=c;if(!this.ge)if(b.user)this.ge=a.Vf(b.user,b.nickname);this.pf=d};F(Nn,Mn);Nn[_P].le=function(a){var b=this.eb.cy(a,this.ge,this.pf);b.yb(a);return b};var On=function(a){if(mc(a))this.A=new N(a);else if(a instanceof N)this.A=a;else throw Error("Undefined object: "+a);this.A.u("kind","photo");this.A.u("alt","jsonm");this.pe=null};On[_P].url=function(){return this.A.toString()};On[_P].ND=function(a){this.A.u("imgmax",a)};On[_P].iE=function(a){var b=kc(a)?a.join(","):a;this.A.u("thumbsize",b)};On[_P].tt=function(a,b){this.A.u("start-index",a);this.A.u("max-results",b)};On[_P].pE=function(a){this.A.li(this.A.Od().replace(/(\/user\/).*(\/|$)/,"$1"+a+
"$2"))};On[_P].Ec=function(a,b){return new this.rb(a,b)};On[_P].Cx=function(){return this.pe};var Pn=function(a){On.call(this,a);this.rb=Nn};F(Pn,On);Pn[_P].ge=null;Pn[_P].pf=null;Pn[_P].rb=Nn;Pn[_P].rx=function(a,b){var c=a.ed(b.user,b.gphoto$id,b.title,"");c.jf(b);return c};Pn[_P].Ec=function(a,b){if(!this.pe)this.pe=this.rx(a,b);else this.pe.hf(b);if(this.rb==Nn){var c=a.Vf(b.user,b.nickname);return new this.rb(a,b,c,this.pe)}else return Pn.B.Ec.call(this,a,b)};var Qn=/\?.*$/,Rn=/\/s\d+(?:-c)?\//,Sn=function(a){return a.replace(Qn,"").replace(Rn,"/")},Tn=function(a,b,c){var d=b instanceof zc?n.max(b[u],b[A]):b;if(!d)return a;var e=a.lastIndexOf("/"),f=a.substr(0,e),g=a.substr(e),h="/s"+d+(c?"-c":"");return f+h+g},Xn=function(a,b){var c=a.clone();if(c.bj(b)||c.bj(Un))return c;c.dt(b);return Vn(c,Wn)},Zn=function(a,b){var c=a.clone();if(c.bj(Yn))return Yn;var d=n.min(c[u],c[A]);q(c,d);Ta(c,d);if(!c.bj(b))c.dt(b);return Vn(c,[32,48,64,72,104,136,144,150,160])},
Vn=function(a,b){var c=n.floor(n.max(a[u],a[A]));if(c){var d=$n(c,b);return a.scale(d/c).floor()}else return a.floor()},$n=function(a,b){var c=b[0];for(var d=1;d<b[t];d++)if(a>=b[d])c=b[d];else break;return c},Wn=[32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600],Un=new zc(Wn[0],Wn[0]),Yn=Un;var ao="",bo=function(a){return a},co=typeof B._features!="undefined"&&B._features.googlephotos&&!B._features.default144thumbnails?[72,94,110,128,160,220,288]:[72,94,110,144,160,220,288];E("am");E("pm");E("Mon");E("Tue");E("Wed");E("Thu");E("Fri");E("Sat");E("Sun");E("Monday");E("Tuesday");E("Wednesday");E("Thursday");E("Friday");E("Saturday");E("Sunday");E("Jan");E("Feb");E("Mar");E("Apr");E("May");E("Jun");E("Jul");E("Aug");E("Sep");E("Oct");E("Nov");E("Dec");E("January");E("February");E("March");E("April");E("May");E("June");E("July");E("August");E("September");E("October");E("November");E("December");var eo=function(a,b){switch(b){case 1:return a%4==0&&(a%100!=0||a%400==0)?29:
28;case 5:case 8:case 10:case 3:return 30}return 31},fo=function(a,b,c,d,e,f){if(mc(a)){var g=a,h=b;this.years=g=="y"?h:0;this.months=g=="m"?h:0;this.days=g=="d"?h:0;this.hours=g=="h"?h:0;this.minutes=g=="n"?h:0;this.seconds=g=="s"?h:0}else{this.years=a||0;this.months=b||0;this.days=c||0;this.hours=d||0;this.minutes=e||0;this.seconds=f||0}};fo[_P].Jg=function(a){var b=n.min(this.years,this.months,this.days,this.hours,this.minutes,this.seconds),c=n.max(this.years,this.months,this.days,this.hours,this.minutes,
this.seconds);if(b<0&&c>0)return null;if(!a&&b==0&&c==0)return"PT0S";var d=[];if(b<0)d.push("-");d.push("P");if(this.years||a)d.push(n.abs(this.years)+"Y");if(this.months||a)d.push(n.abs(this.months)+"M");if(this.days||a)d.push(n.abs(this.days)+"D");if(this.hours||this.minutes||this.seconds||a){d.push("T");if(this.hours||a)d.push(n.abs(this.hours)+"H");if(this.minutes||a)d.push(n.abs(this.minutes)+"M");if(this.seconds||a)d.push(n.abs(this.seconds)+"S")}return d.join("")};fo[_P].clone=function(){return new fo(this.years,
this.months,this.days,this.hours,this.minutes,this.seconds)};fo[_P].add=function(a){this.years+=a.years;this.months+=a.months;this.days+=a.days;this.hours+=a.hours;this.minutes+=a.minutes;this.seconds+=a.seconds};var go=function(a,b,c){if(nc(a))this.q=new Date(a,b||0,c||1);else if(pc(a))this.q=new Date(a.getFullYear(),a.getMonth(),a.getDate());else{this.q=new Date;this.q.setHours(0);this.q.setMinutes(0);this.q.setSeconds(0);this.q.setMilliseconds(0)}this.hm=0;this.im=3};go[_P].clone=function(){var a=
new go(this.getFullYear(),this.getMonth(),this.getDate());a.hm=this.hm;a.im=this.im;return a};go[_P].getFullYear=function(){return this.q.getFullYear()};go[_P].Wq=function(){return this.getFullYear()};go[_P].getMonth=function(){return this.q.getMonth()};go[_P].getDate=function(){return this.q.getDate()};go[_P].getTime=function(){return this.q.getTime()};go[_P].getDay=function(){return this.q.getDay()};go[_P].getUTCFullYear=function(){return this.q.getUTCFullYear()};go[_P].getUTCMonth=function(){return this.q.getUTCMonth()};
go[_P].getUTCDate=function(){return this.q.getUTCDate()};go[_P].getUTCDay=function(){return this.q.getDay()};go[_P].getTimezoneOffset=function(){return this.q.getTimezoneOffset()};go[_P].Fm=function(){var a,b=this.q.getTimezoneOffset();if(b==0)a="Z";else{var c=n.abs(b)/60,d=n.floor(c),e=(c-d)*60;a=(b>0?"-":"+")+bd(d,2)+":"+bd(e,2)}return a};go[_P].set=function(a){this.q=new Date(a.getFullYear(),a.getMonth(),a.getDate())};go[_P].setFullYear=function(a){this.q.setFullYear(a)};go[_P].fo=function(a){this.setFullYear(a)};
go[_P].setMonth=function(a){this.q.setMonth(a)};go[_P].setDate=function(a){this.q.setDate(a)};go[_P].setTime=function(a){return this.q.setTime(a)};go[_P].setUTCFullYear=function(a){this.q.setUTCFullYear(a)};go[_P].setUTCMonth=function(a){this.q.setUTCMonth(a)};go[_P].setUTCDate=function(a){this.q.setUTCDate(a)};go[_P].add=function(a){if(a.years||a.months){var b=a.years*12,c=a.months+b,d=this.Wq();while(c<-11){--d;c+=12}while(c>11){++d;c-=12}var e=this.getMonth()+c;if(e>11){e=12-e;++d}else if(e<0){e=
12+e;--d}var f=this.getDate(),g=eo(d,e);f=n.min(g,f);this.setDate(1);this.fo(d);this.setMonth(e);this.setDate(f)}if(a.days)if(gd&&!kd)this.setDate(this.getDate()+a.days);else{if(!g){d=this.Wq();e=this.getMonth();g=eo(d,e)}var h=a.days;while(h!=0){var f=this.getDate();if(h>0){--h;if(f+1<=g)this.setDate(++f);else{f=1;++e;if(e>11){++d;e=0}this.fo(d);this.setDate(f);this.setMonth(e);g=eo(d,e)}}else{++h;if(f-1>0)this.setDate(--f);else{--e;if(e<0){--d;e=11}this.fo(d);this.setMonth(e);g=eo(d,e);f=g;this.setDate(f)}}}}};
go[_P].Jg=function(a,b){var c=[this.q.getFullYear(),bd(this.q.getMonth()+1,2),bd(this.q.getDate(),2)];return c.join(a?"-":"")+(b?this.Fm():"")};na(go[_P],function(){return this.Jg()});var ho=function(a,b,c,d,e,f){if(ec(a)){go.call(this,a,b,c);if(ec(d))this.setHours(d);if(ec(e))this.setMinutes(e);if(ec(f))this.setSeconds(f)}else{go.call(this);this.q=new Date}};F(ho,go);ho[_P].getHours=function(){return this.q.getHours()};ho[_P].getMinutes=function(){return this.q.getMinutes()};ho[_P].getSeconds=function(){return this.q.getSeconds()};
ho[_P].getMilliseconds=function(){return this.q.getMilliseconds()};ho[_P].getUTCHours=function(){return this.q.getUTCHours()};ho[_P].getUTCMinutes=function(){return this.q.getUTCMinutes()};ho[_P].getUTCSeconds=function(){return this.q.getUTCSeconds()};ho[_P].getUTCMilliseconds=function(){return this.q.getUTCMilliseconds()};ho[_P].setHours=function(a){this.q.setHours(a)};ho[_P].setMinutes=function(a){this.q.setMinutes(a)};ho[_P].setSeconds=function(a){this.q.setSeconds(a)};ho[_P].setMilliseconds=function(a){this.q.setMilliseconds(a)};
ho[_P].setUTCHours=function(a){this.q.setUTCHours(a)};ho[_P].setUTCMinutes=function(a){this.q.setUTCMinutes(a)};ho[_P].setUTCSeconds=function(a){this.q.setUTCSeconds(a)};ho[_P].setUTCMilliseconds=function(a){this.q.setUTCMilliseconds(a)};ho[_P].add=function(a){go[_P].add.call(this,a);if(a.hours)this.setHours(this.q.getHours()+a.hours);if(a.minutes)this.setMinutes(this.q.getMinutes()+a.minutes);if(a.seconds)this.setSeconds(this.q.getSeconds()+a.seconds)};ho[_P].Jg=function(a,b){if(a)return this.q.getFullYear()+
"-"+bd(this.q.getMonth()+1,2)+"-"+bd(this.q.getDate(),2)+" "+bd(this.q.getHours(),2)+":"+bd(this.q.getMinutes(),2)+":"+bd(this.q.getSeconds(),2)+(b?this.Fm():"");return this.q.getFullYear()+bd(this.q.getMonth()+1,2)+bd(this.q.getDate(),2)+"T"+bd(this.q.getHours(),2)+bd(this.q.getMinutes(),2)+bd(this.q.getSeconds(),2)+(b?this.Fm():"")};na(ho[_P],function(){return this.Jg()});ho[_P].clone=function(){var a=new ho(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds());
a.hm=this.hm;a.im=this.im;return a};var io=function(a){R.call(this);this.eb=a};F(io,R);io[_P].id="-1";io[_P].fm="";io[_P].sb=null;io[_P].lr="";io[_P].Jd="";io[_P].Um=true;io[_P].jf=function(){};io[_P].yb=function(a){this.Ph(a)};io[_P].hf=function(a){this.Ph(a)};io[_P].Ph=function(a){if(!this.ha)this.ha=a;else Sd(this.ha,a);this.Um=true};io[_P].Dh=function(){if(this.Um&&this.ha){this.Um=false;var a=this.ha.link;if(a)for(var b=0;b<a[t];++b){var c=a[b],d=c.href||"";switch(c.rel){case "http://schemas.google.com/g/2005#feed":this.fm=d;break;
case "alternate":this.lr=d;break;case "self":this.Jd=d;break;case "edit":this.YH=d;break}}}};io[_P].Fa=function(){return this.ca};io[_P].Ib=function(){return this.ha?this.ha.title:""+this};io[_P].uq=function(){this.Dh();return this.fm};io[_P].we=function(){this.Dh();return this.Jd};io[_P].Hx=function(){this.Dh();return this.lr};io[_P].Tf=function(a){if(!this.sb)this.Bz(a);return this.sb};io[_P].Bz=function(a){this.sb=this.eb.Dx(this,a)};io[_P].Ae=function(){return this.sb?this.sb.Ae():this.eb.mq()};
io[_P].Ka=function(){return this.id||"-1"};io[_P].thumbnail=function(a){var b="img/picasalogo.gif",c=new zc(27,25),d=this.hh();if(d){var e=n.min(a||0,co[t]),f=co[e],g=new zc(f,f);b=d.url||b;if("width"in d&&"height"in d){q(c,d.width);Ta(c,d.height);var h=Xn(c,g);if(!Ac(c,h)){b=Tn(b,h);c=h}}else{c=Zn(g,g);b=Tn(b,c,true)}}return{url:b,height:i(c[A]),width:i(c[u])}};io[_P].kF=function(a){if(!this.sb)this.sb=a};io[_P].load=function(a){if(this.eg())a(this);else this.Vr(a)};io[_P].reload=function(a){this.Vr(a)};
io[_P].Vr=function(a){var b=this.Ae();b.send(this.we(),D(function(c){if(c.status==404){if(typeof this.Bg!="undefined")this.Bg();a(this);return}var d=c.hd();this.hf(d.entry);a(this)},this))};io[_P].f=function(){if(this.ha)return m(this.ha.numPhotos);return 0};io[_P].eg=function(){return!(!this.ha)};io[_P].ze=function(a){var b=this.thumbnail(a);return b.url};io[_P].hh=function(){if(this.ha){var a=this.ha.media,b=a?a.content:null;if(b&&b[t])return b[0]}return null};io[_P].fd=function(){var a=this.hh();
if(a)return this.kk(a.url);return null};io[_P].te=function(){var a,b=this.thumbnail();if(b)a=b[u]/b[A];return a||0};var jo=function(a){var b,c;if(a){if("lat"in a&&"lon"in a){b=a.lat;c=a.lon}var d=a.georss$where;if(d){var e=d.gml$Point;if(e){var f=e.gml$pos;if(f){var g=f.split(" ");if(g[t]==2){b=g[0];c=g[1]}}}}}var h=m(b),j=m(c),k=null;if(!ja(h+j))k={lat:h,lon:j};return k};io[_P].kk=function(a){return a.replace(/%2D/gi,"-").replace(/%2E/gi,".").replace(/%5F/gi,"_").replace(/%7E/gi,"~")};var ko=function(a,b,c,d,e){io.call(this,a);this.username=b;this.id=c;qa(this,d);Qa(this,d);this.ctitle=e;this.link="/lh/sredir?uname="+this.username+"&target=ALBUM&id="+this.id;this.prints=false};F(ko,io);Ma(ko[_P],"Album");ko[_P].hh=function(){if(this.ha&&this.ha.media)return ko.B.hh.call(this);var a="img/picasalogo.gif";if(this.largepreview)a=Sn(this.largepreview);return{url:a}};na(ko[_P],function(){return"[Album: "+this[Ya]+", user: "+this.username+"]"});ko[_P].we=function(){this.Dh();if(!this.Jd)this.Jd=
Dc("/data/entry/api/user/%s/albumid/%s?alt=jsonm",this.username,this.id);return this.Jd};ko[_P].jf=function(a){if(!this.ha)this.yb(a)};ko[_P].Ph=function(a){ko.B.Ph.call(this,a);this.link=this.Hx()||this.link;qa(this,this[Ya]||this.ha.title);this.ctitle=this.ctitle||this.ha.gphoto$name;Qa(this,this[Rb]||this.ctitle)};ko[_P].Fa=function(){if(!this.ca)this.ca=new Pn(this.uq());return this.ca};ko[_P].f=function(){if(this.ha)return m(this.ha.totalResults||this.ha.numPhotos);return 0};var lo="itemsadded",mo="totalchanged",no="too_many_results_requested",oo="query_string_too_long";var po=function(a,b,c,d,e){this.sb=a;this.Wg=b;this.oG=c;this.U=d;this.eG=e;this.iI=this.Wg[t];this.sb.addEventListener(lo,D(this.load,this));for(var f=0;f<this.Wg[t];++f)this.sb.eA(this.Wg[f])};po[_P].uc=false;po[_P].Le=function(){return this.uc};po[_P].load=function(){if(this.uc)return true;var a=[];for(var b=0;b<this.Wg[t];++b){var c=this.Wg[b];if(!this.sb.gn[c])a.push(c)}if(a[t]==0){this.uc=true;this.sb.removeEventListener(lo,this.load.bind,false,this);this.eG(this.sb,this.oG,this.U);return true}else this.Wg=
a;return false};var qo=function(a,b,c,d){this.eb=a;this.ca=b;this.St=c||a.mq();this.g=new hi(this);this.g.listen(this.eb,"deleteinitiated",this.Ly);this.g.listen(this.eb,"deletesucceeded",this.Ny);this.g.listen(this.eb,"deletefailed",this.Ky);this.ya=[];this.gn=[];this.uk=new ef;qo[_P].Zh=nc(d)?d:24;this.GC()};F(qo,R);qo[_P].wb=null;qo[_P].me=0;qo[_P].KB=false;na(qo[_P],function(){return"Feed: "+this.ca});qo[_P].yt=function(a){qo[_P].Sp=a};qo[_P].GC=function(){this.reset()};qo[_P].Fa=function(){return this.ca};Pa(qo[_P],
function(){this.wb=null;this.me=0;this.ya=[];this.gn=[]});qo[_P].dispose=function(){qo.B.dispose.call(this);this.reset()};qo[_P].Ae=function(){return this.St};qo[_P].dx=function(a){return td(this.ya,a)};qo[_P].nm=function(){return this.ya};qo[_P].Zo=function(a){return n.floor(a/this.Zh)};qo[_P].eA=function(a){this.gn[a]=true;var b=a*this.Zh,c=b+1;if(c>1000)return;var d=n.min(this.Zh,1000-c+1);if(d<=0)return;if(this.KB)for(var e=b;e<b+d;++e)this.ya[e]="PENDING";this.ca.tt(c,d);this.St.send(this.ca.url(),
D(qo[_P].zn,this,a*this.Zh,this.Zh),D(this.Kb,this),D(this.Lm,this))};qo[_P].Lm=function(a){if(a){var b=a[y];if(b)Ug(b,"timeout",D(this.Lm,this))}var c={type:"error",status:"timeout",value:a?a.currentTarget.Oq():""};this.dispatchEvent(c)};qo[_P].Kb=function(a){var b;if(a){b=a[y];Ug(b,"error",D(this.Kb,this))}var c,d;if(!b)c="unknown";else{c=b.Ta();var e=new N(b.wm());if(no==c)d=e.Uf("start-index");else if(oo==c){var f=e.Uf("q");d=f?f[t]:-1}}var g={type:"error",status:c,value:""+d};this.dispatchEvent(g)};
qo[_P].zn=function(a,b,c){if(c.Gc()==500){var d=c.Ta(),e="";if(no==d)e=""+a;else if(oo==d){var f=this.ca.oj();e=""+f[t]}this.dispatchEvent({type:"error",status:d,value:e});return}this.bC(a,c.hd())};qo[_P].bC=function(a,b){if(b){var c=this.wb,d=b.feed;this.wb=m(d.totalResults);this.me=n.max(this.me,m(d.crowdedLength||this.wb));if(0==this.wb)this.dispatchEvent("noitems");this.Bu(a,d);if(c!=this.wb)this.dispatchEvent(mo)}};qo[_P].Bu=function(a,b){if(!b)return;var c=this.ca.Ec(this.eb,b),d=n.min(a+c.Px(),
this.wb),e=d-a;pa(this.ya,n.max(this.ya[t],d));for(var f=0;f<e;++f){var g=a+f,h=c.next();this.Au(g,h)}n.max(this.me,this.ya[t]);var j=this.ca.Cx();if(j)j.kF(this);this.dispatchEvent({type:lo,offset:a,count:e,crowdedCount:this.ww()})};qo[_P].Au=function(a,b){if(this.ya[a]&&this.ya[a]!="PENDING")return;if(this.Sp)this.Sp(b,a);this.ya[a]=b};qo[_P].load=function(a,b,c){var d=this.Zo(a),e=this.Zo(a+b-1),f=[];for(var g=d;g<=e;++g)if(!this.gn[g])f.push(g);if(f[t]==0){c(this,a,b);return true}else{var h=new po(this,
f,a,b,c);return h.Le()}return false};qo[_P].cn=function(a){var b=1000;if(this.eg()){b=n.min(this.wb,b);if(this.ya[t]==b){a(this,0,b);return}}this.ca.tt(1,b);var c=D(function(d){this.zn(0,b,d);a(this,0,this.wb)},this);this.St.send(this.ca.url(),c,D(this.Kb,this),D(this.Lm,this))};qo[_P].eg=function(){return null!=this.wb};qo[_P].ww=function(){return n.min(this.me||this.wb,1000)};qo[_P].Ly=function(a){var b=a[y],c=this.dx(b);if(c>=0)if(this.remove(c))this.uk.set(b.id,[b,c])};Ia(qo[_P],function(a){var b=
false;if(Bd(this.ya,a)){b=true;--this.me}--this.wb;this.dispatchEvent(mo);return b});qo[_P].Ny=function(a){var b=a[y];this.uk.remove(b.id)};qo[_P].Ky=function(a){var b=a[y],c=this.uk.get(b.id);if(c){Ad(this.ya,c[0],c[1]);this.uk.remove(b.id);++this.me}++this.wb;this.dispatchEvent(mo)};;var ro=function(a,b,c,d){io.call(this,a);this.yb(b);this.user=c;this.album=d};F(ro,io);Ma(ro[_P],"Tag");na(ro[_P],function(){var a="Tag "+this.t;if(this.user)a+=", user: "+this.user;if(this.album)a+=", album: "+this.album;return a});ro[_P].yb=function(a){this.t=a.title;this.w=a.weight?a.weight:1};var so=function(a,b,c,d){io.call(this,a);this.deleted=false;this.src="../img/picasaweblogo-en_US.gif";this.user=c;this.album=d;if(b){var e=b,f=e.media,g=f.content[0];this.s=this.kk(g.url);this.id=e.gphoto$id;this.w=m(g.width);this.h=m(g.height);this.ji(Rc(f.description));this.t=Rc(f.title);this.snippet=e.snippet||"";this.snippetType=e.snippettype||"";this.truncated=e.truncated=="1";var h=e.author;this.xk(e);if(!this.user&&h){var j=h[0],k=j.email,l=j.name||k;this.user=this.eb.Vf(k,l)}if(!this.album&&
this.user)this.album=this.eb.ed(this.user[Rb],e.albumId,e.albumTitle,e.albumCTitle);var p=f.content[1];if(p){this.vsurl=p.url;this.videostatus=e.videostatus}this.Td=true}};F(so,io);so[_P].Kn=false;so[_P].mm=false;Ma(so[_P],"Photo");var to=If("gphoto.api.Photo");so[_P].Ma=function(a){to.fine(a)};so[_P].ow=false;var uo="photoDataReady";so[_P].Ca=null;so[_P].If=null;so[_P].ed=function(){return this.album};na(so[_P],function(){return"Photo "+this.t+", in album: "+this.album+", user: "+this.user});so[_P].Tf=
function(){return null};so[_P].en=function(a){if(this.Ca&&this.If)a(this);else{Tg(this,uo,function(){a(this)},false,this);this.Zj()}};so[_P].we=function(){this.Dh();if(!this.Jd)this.Jd=Dc("/data/entry/api/user/%s/albumid/%s/photoid/%s?alt=jsonm",this.user[Rb],this.album.id,this.id);return this.Jd};so[_P].Zj=function(){if(this.Kn||this.mm)return;if(this.Ca&&this.If)this.dispatchEvent(uo);else{if(!this.user[Rb]){this.Td=true;this.Ca=null;this.Bg();return}var a="/lh/rssPhoto?uname="+this.user[Rb]+"&iid="+
this.id+"&v="+vc()+"&js=1";this.Kn=true;this.mm=true;var b=this.Ae();b.send(a,D(this.UC,this));b.send(this.we(),D(this.Kw,this))}};so[_P].UC=function(a){if(this.Ca)return;try{this.Kn=false;var b=a.Gc();if(b>=400){this.Bg();return}this.Ca=a.hd();this.xk(this.Ca);if(this.Ca.allowprints)this.ed().prints=this.Ca.allowprints=="1";if(this.Ca.video){this.vsurl=this.Ca.video.streamer_url;this.vdurl=this.Ca.video.download_url}this.dl=ao==this.Ca.uname||this.Ca.allowdownload=="1"}catch(a){ka(a);return}if(this.If&&
this.Ca)this.dispatchEvent(uo)};var vo=function(a,b){var c="";if(a=="ready")c="img/experimental/video_ready"+b+".png";else if(a=="pending")c="img/experimental/video_pending"+b+".png";else if(a=="failed")c="img/experimental/video_failed"+b+".png";if(c){var d=ga.getElementsByTagName("base")[0][Jb];c=d+c}return c};so[_P].thumbnail=function(a){var b=vo(this.videostatus,"");if(!b)return so.B.thumbnail.call(this,a);var c=new zc(288,216);return{url:b,height:i(c[A]),width:i(c[u])}};so[_P].Kw=function(a){try{this.mm=
false;var b=a.Gc();if(b>=400){this.Bg();return}this.If=a.hd().entry;this.hf(this.If)}catch(a){ka(a);return}if(this.If&&this.Ca)this.dispatchEvent(uo)};so[_P].hf=function(a){io[_P].hf.call(this,a);var b=a.media,c=b.content[0];this.s=this.kk(c.url);this.id=a.gphoto$id;this.w=m(c.width);this.h=m(c.height);this.ji(Rc(b.description));this.t=Rc(b.title);if(this.ha)this.ha.media.keywords=b.keywords;this.snippet=a.snippet||"";this.snippetType=a.snippettype||"";this.truncated=a.truncated=="1";var d=b.content[1];
if(d){this.vsurl=d.url;this.videostatus=a.videostatus}this.xk(a);this.Td=true};so[_P].yb=function(a){if(!a)return;if(!this.ha)this.ha=a;if(!this.user){var b=a.author[0],c=b.email,d=b.name||c;this.user=this.eb.Vf(c,d)}var e=a.media,f=e.content[0];this.s=this.kk(f.url);this.id=a.gphoto$id;this.w=m(f.width);this.h=m(f.height);this.ji(Rc(e.description));this.t=Rc(e.title);this.snippet=a.snippet||"";this.snippetType=a.snippettype||"";this.truncated=a.truncated=="1";this.xk(a);if(!this.album)this.album=
this.eb.ed(this.user[Rb],a.albumId,a.albumTitle,a.albumCTitle);var g=e.content[1];if(g){this.vsurl=Jc(g.url);this.videostatus=a.videostatus}this.Td=true;so.B.yb.call(this,a);this.snippet=a.snippet||this.snippet;this.snippetType=a.snippettype||this.snippetType;if(!this.truncated&&a.truncated=="1")this.truncated=true;if("author"in a){var h=a.author;if(!this.user[Rb])Qa(this.user,h[0].email);if(!this.user.nickname)this.user.nickname=h.name}if(!this.user[Rb])this.Bg()};so[_P].Bg=function(){this.ow=true;
this.dispatchEvent("deleted")};so[_P].te=function(){if(nc(this.w)&&nc(this.h))return this.w/this.h;return 0};so[_P].fd=function(a){if(this.s&&a)this.s.replace(/\/s\d{2,3}(-c)?\//,"/"+a+"/");return this.s};so[_P].ji=function(a){this.c=Xc(a,1024)};so[_P].xk=function(a){var b=jo(a);if(b){if(ja(this.lat))this.lat=b.lat;if(ja(this.lon))this.lon=b.lon}this.bb=this.bb||a.bb};var wo=function(a){On.call(this,a);this.rb=Nn};F(wo,On);wo[_P].oj=function(){return this.A.Uf("q")};var xo=function(a,b,c,d){Mn.call(this,a,b);this.ge=c;this.pf=d};F(xo,Mn);xo[_P].le=function(a){return this.eb.oy(a,this.ge,this.pf)};var yo=function(a){if(mc(a))this.A=new N(a);else if(a instanceof N)this.A=a;this.A.u("alt","jsonm");this.A.u("pp","1");this.rb=xo};F(yo,On);na(yo[_P],function(){return"TagSource: "+this.A.Od()});yo[_P].rb=xo;yo[_P].Ec=function(a,b){if(this.rb==xo){var c=a.Vf(b.user,b.nickname),d=null;return new this.rb(a,b,c,d)}else return yo.B.Ec.call(this,a,b)};var zo=function(a,b,c){Mn.call(this,a,b);this.ge=c};F(zo,Mn);zo[_P].le=function(a){var b=this.eb.ed(this.ge[Rb],a.gphoto$id,a.title,a.gphoto$name);b.yb(a);return b};var Ao=function(a,b){On.call(this,a);this.uF=b;this.A.u("kind","album");var c=this.A.Od().match(/\/user\/(.*)$/);if(c&&c[t]>1){var d=c[1];if(d!=this.uF){this.pE(this.uF);var e=this.A.Fc();if(e.Ra("authkey")){e.remove("authkey");e.remove("access")}}}this.rb=zo};F(Ao,On);Ao[_P].Ec=function(a,b){if(this.rb===zo){if(!this.pe){var c=a.Vf(b.user,b.nickname);c.jf(b);this.pe=c}return new this.rb(a,b,this.pe)}else return Ao.B.Ec.call(this,a,b)};var Bo=function(a,b,c){io.call(this,a);Qa(this,b);this.nickname=c;this.icon="img/noportrait.jpg";this.galleryName=bo(this.nickname);this.loaded=false;this.Dp=false;this.email=""};F(Bo,io);Ma(Bo[_P],"User");var Co="userDataReady";Bo[_P].Fa=function(){if(!this.ca)this.ca=new Ao(this.uq(),this[Rb]);return this.ca};Bo[_P].jf=function(a){Bo.B.jf.call(this,a);this.icon=a.icon;this.galleryName=a[Ya]};na(Bo[_P],function(){return"User "+this.nickname+", username: "+this[Rb]});Bo[_P].load=function(a){this.en(a)};
Bo[_P].en=function(a){if(this.Dp)a(this);else{P(this,Co,function(){a(this)},true,this);this.Zj()}};Bo[_P].Zj=function(){if(this.Dp){this.loaded=true;this.dispatchEvent({type:Co});return}var a=this.we()||"/data/entry/api/user/"+this[Rb]+"?alt=jsonm",b=this.Ae();b.send(a,D(Bo[_P].$q,this))};Bo[_P].yb=function(a){Bo.B.yb.call(this,a);this.icon=a.thumbnail||this.icon;this.galleryName=a[Ya];Qa(this,a.user);this.nickname=a.nickname};Bo[_P].$q=function(a){var b=a.hd();if(b){this.Dp=true;this.loaded=true;
this.yb(b.entry);this.dispatchEvent({type:Co})}};var Do=function(){},Eo=function(a,b,c){this.wH=a;this.PG=b;this.wG=c};Eo[_P].Gc=function(){return this.wH};Eo[_P].Ta=function(){return this.PG};Eo[_P].hd=function(){return this.wG};var Fo=function(){Do.call(this)};F(Fo,Do);var Go={"Content-Type":"application/atom+xml","X-HTTP-Method-Override":"PUT"};Ha(Fo[_P],function(a,b,c,d,e,f,g){var h=new S;P(h,th,D(this.yh,this,b,c));h.bo(30000);if(d)P(h,"timeout",d);if(c)P(h,"error",c);if(!g&&e=="POST")g=Go;P(h,"ready",h.dispose,false,h);h.send(a,e,f,g)});Fo[_P].yh=function(a,b,c){var d=c[y];Ug(d,D(this.yh,this));var e,f=d.Gc();if(f<0)return;if(f>=400)if(b){b(c);return}else e=new Eo(f,d.Ta(),"");else try{var g=d.Ta(),h=g?lh(g):null;e=
new Eo(0,"",h)}catch(j){if(b){b(j);return}}a(e)};var Ho=function(a){this.wn=new ef;this.Rg=new ef;this.du=new ef;this.WE=new ef;this.Bv={};this.Bv.Album=this.Rg;this.Bv.Photo=this.wn;this.YF=a||new Fo;this.uk=new ef};F(Ho,R);Pa(Ho[_P],function(){this.wn.clear();this.Rg.clear();this.du.clear()});Ho[_P].mq=function(){return this.YF};Ho[_P].uy=function(a,b){var c=Dc("%s/user/%s/",b||"/data/feed/api",a);return new Ao(Io(c),a)};Ho[_P].rh=function(a,b,c){var d=this.uy(a,b);return new qo(this,d,c)};Ho[_P].Dx=function(a,b){var c=Io(a.Fa());return new qo(this,
c,b||a.Ae())};Ho[_P].ed=function(a,b,c,d){var e=a+b,f=this.Rg.get(e);if(!f){f=new ko(this,a,b,c,d);this.Rg.set(e,f)}return f};Ho[_P].Vf=function(a,b){var c=this.du.get(a);if(!c){c=new Bo(this,a,b);this.du.set(a,c)}return c};Ho[_P].cy=function(a,b,c){if(!a)return null;var d=a.gphoto$id,e=this.wn.get(d);if(!e){e=new so(this,a,b,c);this.wn.set(d,e)}return e};Ho[_P].oy=function(a,b,c){if(!a)return null;var d=a.title,e=this.WE.get(d);if(!e){e=new ro(this,a,b,c);this.WE.set(d,e)}return e};Ho[_P].ih=function(){return"gphoto.api.DataManager"};
Ho[_P].Ma=function(a){if(!this.Q)this.Q=If(this.ih());this.Q.fine(a)};var Io=function(a){if(typeof B._features!="undefined"&&B._features.PERFORMANCE_EXPERIMENTS)a=a.replace("/data/feed/api/","/data/feed/t/");return a};var Jo=function(a,b){this.A=new N(a);this.RF=b?b:"callback";this.be=5000},Ko="_callbacks_",Lo=0;Jo[_P].$D=function(a){this.be=a};Ha(Jo[_P],function(a,b,c){if(!ga[bc][Eb]){if(c)c(a);return null}var d="_"+(Lo++).toString(36)+vc().toString(36);if(!B[Ko])B[Ko]={};var e=ie("script"),f=null;if(this.be>0){var g=Mo(d,e,a,c);f=B.setTimeout(g,this.be)}var h=this.A.clone();No(a,h);if(b){var j=Oo(d,e,b,f);B[Ko][d]=j;h.Eg(this.RF,Ko+"."+d)}de(e,{type:"text/javascript",id:d,charset:"UTF-8",src:h.toString()});le(ga[bc][Eb],
e);return{$:d,be:f}});Jo[_P].cancel=function(a){if(a&&a.$){var b=$d(a.$);if(b&&b[Ob]=="SCRIPT"&&typeof B[Ko][a.$]=="function"){a.be&&B.clearTimeout(a.be);oe(b);delete B[Ko][a.$]}}};var Mo=function(a,b,c,d){return function(){Po(a,b);if(d)d(c)}},Oo=function(a,b,c,d){return function(e){B.clearTimeout(d);Po(a,b);c(e)}},Po=function(a,b){B.setTimeout(function(){oe(b);if(B[Ko][a])delete B[Ko][a]},0)},No=function(a,b){for(var c in a)if(!a[pb]||a.hasOwnProperty(c))b.Eg(c,a[c]);return b};var Qo=function(){Do.call(this)};F(Qo,Do);Ha(Qo[_P],function(a,b,c,d,e){if(e&&e!="GET")throw Error("Only GET supported in JSONP transport");var f=new Jo(a);f.$D(30000);var g=D(this.yh,this,b);f.send(null,g,d||c)});Qo[_P].yh=function(a,b){a(new Eo(0,"",b))};var Ro=function(a){R.call(this);this.b=a;var b=G?"propertychange":(kd&&a[Ob]=="TEXTAREA"?"keypress":"input");this.CG=P(this.b,b,this)};F(Ro,R);Ro[_P].o=function(a){var b=a.dq();if(b[Mb]=="propertychange"&&b.propertyName=="value"||b[Mb]=="input"||b[Mb]=="keypress"){if(G){var c=b.srcElement;if(c!=Xd(c)[Xa])return}var d=new yg(b);Ma(d,"input");try{this.dispatchEvent(d)}finally{d.dispose()}}};Ro[_P].m=function(){Ro.B.m.call(this);Wg(this.CG);this.b=null};var So=function(a,b,c){this.Rr=a;this.cg=b||0;this.tb=c;this.rc=D(this.zw,this)};F(So,wg);So[_P].$=0;So[_P].m=function(){So.B.m.call(this);this.stop();this.Rr=null;this.tb=null};So[_P].start=function(a){this.stop();this.$=rh(this.rc,ec(a)?a:this.cg)};So[_P].stop=function(){if(this.Eh())sh(this.$);this.$=0};So[_P].Eh=function(){return this.$!=0};So[_P].zw=function(){this.$=0;if(this.Rr)this.Rr.call(this.tb)};;var To=function(a,b,c){this.Gk=-1;this.Xd=[];this.jI=null;this.sH=b;this.qH=c;if(a!=null)this.Bt(a);this.ca=null;this.yf=new So(this.bu,2000,this)};To[_P].Bt=function(a){this.d=a;this.a=a.va();this.g=new hi(this);this.O=this.uA(this.sH,this.qH)};To[_P].Ha=null;To[_P].pa=function(){return this.O};To[_P].Rn=function(a){this.O=a};To[_P].Yd=function(){this.QB()};To[_P].activate=function(){this.$j();if(this.yd)this.yd.focus()};To[_P].dispose=function(){this.yf.stop();if(this.g){this.g.dispose();this.g=
null}};To[_P].uA=function(a,b){var c=this.a.createElement("table"),d=this.a.createElement("tbody"),e=this.a.createElement("tr"),f=this.a.createElement("td");c.appendChild(d);o(c,"mp_dialog");d.appendChild(e);e.appendChild(f);ue(f,this.d.fg()?Uo:this.Vx());o(f,"mp_title");e=this.a.createElement("tr");d.appendChild(e);f=this.a.createElement("td");e.appendChild(f);o(f,"mp_middle");Ta(f,"100%");if(a||b){var g=this.a.createElement("p");if(b){var h=this.a.createElement("span");ue(h,this.Ux(a));g.appendChild(h)}if(a){var j=
this.a.createElement("span");this.yd=this.a.createElement("input");Ma(this.yd,"text");this.yd.size="16";ya(this.yd,this.d.Hm());this.Ha=new Ro(this.yd);P(this.Ha,"input",this.cu,true,this);P(this.yd,bh,this.cu,true,this);j.appendChild(this.yd);g.appendChild(j)}f.appendChild(g)}this.kb=this.a.createElement("div");o(this.kb,"mp_scroller"+this.d.qh());this.Og(true);this.g.listen(this.kb,$g,this.gk);this.g.listen(this.kb,zg,this.aB);this.g.listen(this.kb,Ag,this.$A);f.appendChild(this.kb);e=this.a.createElement("tr");
d.appendChild(e);f=this.a.createElement("td");e.appendChild(f);o(f,"mp_buttons");var k=this.a.createElement("input");Ma(k,"submit");ya(k,this.fB);f.appendChild(k);this.g.listen(k,Q,this.na);return c};To[_P].na=function(){this.d.cancel();this.d.hide()};To[_P].bu=function(){if(this.yd){var a=this.yd[v],b=this.d.Hm();if(a!=b){this.d.Gg(a);this.$j()}}};To[_P].cu=function(a){if(a[Db]==13){this.bu();this.yf.stop();a.preventDefault()}else this.yf.start();return true};To[_P].QB=function(){var a=this.d.fj();
this.Xd=[];this.Gk=-1;if(a[t]<1){this.bd(this.hs);return}me(this.kb);for(var b=0;b<a[t];b++){var c=a[b],d=c.f(),e=null;e=d==1?this.gB:this.Tx(d);var f=this.a.createElement("div");o(f,"mp_list");this.kb.appendChild(f);var g=c.ze(0)||this.d.Am(),h=he("img",{align:"left",width:"32",height:"28",src:g});le(f,h);le(f,ke(Rc(c.Ib())+"<br><span class=mp_subtitle>"+Rc(e)));this.Xd.push(f)}};To[_P].$j=function(){var a=this.d.pm(),b=a.Rq();if(b){var c=this.d.Ro(b);this.d.Yp(c,0)}else{me(this.kb);le(this.kb,ke('<br><br><br><center><font size=4 font color="#4D4D4D">'+
Vo+"</font></center>"))}};To[_P].Og=function(a){var b='<br><br><br><center><font size=4 font color="#4D4D4D">',c=this.d.Em();b+=this.d.zr()||a?Rc(this.hB)+'<img src="'+c+'" hspace="8">':Rc(this.hs);xa(this.kb,b+"</font></center>")};To[_P].bd=function(a){xa(this.kb,'<br><br><br><center><font size="4" font color="#cc0000">'+Rc(a)+"</font></center>")};To[_P].gk=function(a){var b=this.Kq(a);this.it(b);a.preventDefault()};To[_P].it=function(a){if(a>=0){var b=this.d.fj(),c=b[a];this.d.Ik(c);this.d.Un(this.ca)}};
To[_P].Kq=function(a){var b={x:a[$b],y:a[ac]},c=Ne(this.kb),d=fe(),e=Qe(this.kb);b.x+=this.kb[Fb]+d.x;b.y+=this.kb[Wa]+d.y;var f=b.y-c.y+this.O[Wa];if(b.x-c.x>=e[u]-16)return-1;var g=0;for(var h=0;h<this.Xd[t];h++){var j=this.Xd[h],k=Qe(j)[A];g+=k;if(f<=g)return h}return-1};To[_P].zt=function(a){if(this.Gk!=a){if(this.Gk!=-1){var b=this.Xd[this.Gk];o(b,"mp_list")}this.Gk=a;if(a!=-1){var b=this.Xd[a];o(b,"mp_list_selected"+this.d.qh())}}};To[_P].aB=function(a){var b=this.Kq(a);this.zt(b)};To[_P].$A=
function(){this.zt(-1)};To[_P].Vb=function(a){this.ca=a};var Wo=function(a,b,c,d){this.gf=a;this.xb=b;this.$=-1;this.$E=c;this.Mi=d;this.Rz=[];this.O=null;this.Dr=-1;this.rw=null;this.Td=false;this.Lg=-1;this.ag=-1};Wo[_P].Ib=function(){return this.gf};Wo[_P].ze=function(){return this.$E||this.Mi};Wo[_P].fd=function(){return this.Mi};Wo[_P].Ka=function(){return this.$};Wo[_P].Wn=function(a){this.$=a};Wo[_P].Ko=function(a){this.Td=true;this.Rz.push(a);a.Rn(this)};Wo[_P].Rn=function(a){this.O=a};Wo[_P].eg=function(){return this.Td};Wo[_P].f=function(){if(this.Dr>=
0)return this.Dr;return this.Rz[t]};Wo[_P].wt=function(a){this.Dr=a};Wo[_P].Sn=function(){return this.rw};Wo[_P].Sn=function(a){this.rw=a};Wo[_P].Tn=function(a,b){this.Lg=a;this.ag=b};Wo[_P].te=function(){if(this.Lg==-1||this.ag==-1)return 0;return this.Lg/this.ag};Wo[_P].ds=function(a){this.Sd=new Image;if(id)ga[x].appendChild(this.Sd);this.sz=this.RA.bind(this,a);this.Sd.onload=this.sz;this.Sd.src=this.Mi};Wo[_P].RA=function(a){this.Tn(this.Sd[u],this.Sd[A]);if(id)ga[x].removeChild(this.Sd);this.sz=
null;this.Sd=null;if(a)a()};Wo[_P].calcDimensions=function(a,b,c){var d=a,e=b||a,f=e,g=c?this.te():1;if(g>1)f=n.round(d/g);else if(g>0)d=n.round(f*g);if(d>a){f=n.round(f*a/d);d=a}if(f>e){d=n.round(d*e/f);f=e}return{width:d,height:f}};Wo[_P].getDimensionsLabel=function(){if(this.Lg==-1||this.ag==-1)return null;return this.Lg.toString()+"x"+this.ag.toString()};var Xo=function(a,b,c){var d=a.fd(),e=Sn(d),f=Tn(e,c||160);if(b)d=Tn(e,b);Wo.call(this,a.Ib(),"photo",f,d);this.og=a};F(Xo,Wo);Xo[_P].ze=function(a){return!a?Tn(Sn(this.Mi),160,true):this.$E||this.Mi};var Yo=function(a){var b=Sn(a.fd());b=Tn(b,32,true);Wo.call(this,a.Ib(),"album",b,"");this.wt(a.f());this.pf=a};F(Yo,Wo);Yo[_P].Tf=function(){return this.pf.Tf()};var Zo=function(a,b,c,d,e){qa(this,a);this.user=b;this.d=c;this.qf=this.d.rh(b);this.pg=null;this.selectMode=d;this.view=e;this.Jb=[];this.element=
null;this.g=new hi(this);if(e&&e.Vb)e.Vb(this);this.Si()};Zo[_P].ah=null;Zo[_P].Rk=function(a){if(this.pg)this.g.unlisten(this.pg,"error",this.Aj);this.pg=a;if(this.pg)this.g.listen(this.pg,"error",this.Aj)};Zo[_P].qt=function(a){if(this.qf)this.g.unlisten(this.qf,"error",this.Aj);this.qf=a;if(this.qf)this.g.listen(this.qf,"error",this.Aj)};Zo[_P].Aj=function(){this.d.Fg(false);var a=this.d.Mq();a.bd(this.d.Gb("MSG_SCRIPT_LOAD_ERROR"))};Zo[_P].Gg=function(a){this.user=a;this.qt(this.d.rh(a))};Zo[_P].iA=
function(a){if(this.pg)this.pg.cn(a);else a(null,0,0)};Zo[_P].cA=function(a){if(this.qf)this.qf.cn(a);else a(null,0,0)};Zo[_P].Si=function(){this.Jb.getMsgPhotoCount=$o;this.Jb.MSG_PHOTOS_BACK_LINK=ap;this.Jb.MSG_PHOTO_COUNT=bp;this.Jb.MSG_NO_IMAGES_FOUND=Vo;this.Jb.MSG_PHOTOS_LOADING=cp};Zo[_P].tm=function(){return this.Jb};var dp=function(a){var b;if(a){var c=a.nm();b=wd(c,function(d){return new Yo(d)})}else b=[];return b},fp=function(a,b){var c;if(a){var d=a.nm(),e=b.C("imgmax"),f=b.C(ep);c=wd(d,
function(g){return new Xo(g,e,f)})}else c=[];return c};var gp=E("No images found."),hp=E("Choose a picture from:"),ip=E("My Computer"),jp=E("Picasa Web Albums");E("Google Photos");var kp=E("Or Select:"),lp=E("Their Picture");E("My Picture");var mp=E("No Picture"),np=E("Web Address (URL)"),op=E("Apply Changes"),pp=E("Cancel"),qp=E("You can drag the box to select the crop area, and use the handle to resize it."),rp=E("Crop this picture of yourself."),sp=E("Preview"),tp=E("&laquo; Back to pictures"),up=E("&laquo; Back to upload"),vp=E("&laquo; Back to web address"),
wp=E("Their Picture"),xp=E("My Picture"),yp=E("You have selected the following picture.  You can accept this photo or upload another one."),zp=E("Cancel"),Ap=E("Accept this picture"),Bp=E("You haven't yet selected a picture, but you can upload one now."),Uo=E("Select a picture of yourself"),Cp=E("Cancel"),Dp=E("Zoom:"),ap=E("&laquo; Back to albums"),bp=E("1 photo."),Vo=E("No Images Found."),cp=E("Loading Photos.."),Ep=E("No Picture"),Fp=E("Cancel"),Gp=E("Apply Changes"),Hp=E("Show this default picture."),
Ip=E("Yes, suggest this picture"),Jp=E("No, keep this picture to myself"),Kp=E("Specify an Image URL"),Lp=E("Image URL"),Mp=E("Type the image URL in the text field above. If it's correct, you'll see an image preview here.  Large images may take a while to appear."),Np=E("Remember, using others' images on the web without their permission may be bad manners or worse, copyright infringement."),Op=E("Select Image"),Pp=E("Cancel"),Qp=E("Upload a picture of yourself"),Rp=E("You can upload a JPG, GIF, or PNG file.&nbsp;(Do not upload pictures containing celebrities, nudity, artwork or copyrighted images.)"),
Sp=E("This photo will be available to view and share in Picasa Web Albums, Google's free photo hosting service. Go to: http://picasaweb.google.com to see it now and start sharing!"),Tp=E("This photo will be available to view and share in Google Photos, Google's free photo hosting service. Go to: http://photos.google.com to see it now and start sharing!"),Up=E("Uploading Image..."),Vp=E("Upload Picture"),Wp=E("Cancel"),Xp=E("The file you selected is not a valid image file.  Please select another file."),
Yp=E("Click the Upload Picture button below to upload the selected image."),Zp=E("The file you selected could not be uploaded. It may be too large or it was not a valid image file. Please select another file or click the upload button to try again."),$p=E("Select Upload Album: ");E("Learn More");var cq=function(a){var b=a.C(aq),c=a.C(bq);To.call(this,a,b,c)};cq.inherits(To);var dq=E("Cancel"),eq=E("No public albums found."),fq=E("1 photo."),gq=E("Loading Album List...");cq[_P].fB=dq;cq[_P].hs=eq;cq[_P].gB=fq;cq[_P].hB=gq;cq[_P].Vx=function(){var a=this.d.C(hq);if(a)return a;var b=this.d.nh();if(!b){var c=E("Select an album");return c}var d=E("Select a picture of {$user}",{user:b});return d};cq[_P].Ux=function(a){if(this.d.C(iq))return"";return a?this.d.C(jq):this.d.C(kq)};cq[_P].Tx=function(a){var b=
E("{$count} photos.",{count:a});return b};cq[_P].$j=function(){var a=this.d.Eq(),b=this.d,c;c=a[vb]?D(a[vb].Yd,a[vb]):D(this.Yd,this);a.cA(function(d){b.Ag(dp(d));c()})};var lq=function(a){this.d=a;this.a=a.va();this.g=new hi(this);this.O=this.qA();this.Xc=24;this.Wc=48};lq[_P].og=null;lq[_P].xc=null;lq[_P].Pb=null;lq[_P].In=false;lq[_P].ca=null;var mq=G?1:2;lq[_P].pa=function(){return this.O};lq[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}};lq[_P].qA=function(){var a=this.a.createElement("div"),b=this.a.createElement("table"),c=this.a.createElement("tbody"),d=this.a.createElement("tr"),e=this.a.createElement("td");b.appendChild(c);o(b,"mp_dialog");
c.appendChild(d);d.appendChild(e);a.appendChild(b);var f=Xc(this.d.nh(),75,true),g=this.d.fg()?rp:this.Sx(f);ue(e,g);o(e,"mp_title");d=this.a.createElement("tr");c.appendChild(d);e=this.a.createElement("td");d.appendChild(e);o(e,"mp_middle");Ta(e,192);var h=this.a.createElement("p");e.appendChild(h);var j=this.a.createElement("span");o(j,"mp_gray");ue(j,qp);h.appendChild(j);this.Xu=this.a.createElement("p");this.Wt();e.appendChild(this.Xu);var k=this.a.createElement("table"),l=this.a.createElement("tbody"),
p=this.a.createElement("tr"),s=this.a.createElement("td");k.appendChild(l);l.appendChild(p);p.appendChild(s);e.appendChild(k);this.Xg=this.a.createElement("div");this.xc=this.a.createElement("img");Oa(this.xc,0);this.xc.onmousedown=function(){return false};this.Xg.appendChild(this.xc);s.appendChild(this.Xg);this.wf=this.a.createElement("div");o(this.wf,"mp_cropFilter");this.Xg.appendChild(this.wf);Re(this.wf,0.7);this.wc=this.a.createElement("div");this.wc.id="mp_crop_box";o(this.wc,"mp_cropBox");
this.Xg.appendChild(this.wc);this.Yg=this.a.createElement("img");Oa(this.Yg,0);this.wc.appendChild(this.Yg);this.Be=this.a.createElement("img");this.Be.id="mp_crop_resize";o(this.Be,"mp_cropResize");Oa(this.Be,0);this.Be.src=this.d.kh("GrowBox.gif");this.Xg.appendChild(this.Be);s=this.a.createElement("td");o(s,"mp_preview");p.appendChild(s);var C=this.a.createElement("table"),K=this.a.createElement("tbody"),H=this.a.createElement("tr"),ia=this.a.createElement("td");C.appendChild(K);K.appendChild(H);
H.appendChild(ia);s.appendChild(C);this.wk=this.a.createElement("div");o(this.wk,"mp_previewContainer");this.Pb=this.a.createElement("img");Oa(this.Pb,0);q(this.Pb,128);Ta(this.Pb,96);this.Pb.onmousedown=function(){return false};this.wk.appendChild(this.Pb);ia.appendChild(this.wk);H=this.a.createElement("tr");K.appendChild(H);ia=this.a.createElement("td");H.appendChild(ia);var eb=this.a.createElement("span");o(eb,"mp_previewLabel");ue(eb,sp);ia.appendChild(eb);ia.align="center";d=this.a.createElement("tr");
c.appendChild(d);e=this.a.createElement("td");d.appendChild(e);o(e,"mp_buttons");this.ab=this.a.createElement("input");this.ab.id="mp_submit_button";o(this.ab,"mp_next");Ma(this.ab,"button");ya(this.ab,this.d.Gb("MSG_SUBMIT_CROP_LABEL"));e.appendChild(this.ab);this.g.listen(this.ab,Q,this.Pc);this.Ba=this.a.createElement("input");this.Ba.id="mp_cancel_button";Ma(this.Ba,"submit");ya(this.Ba,pp);e.appendChild(this.Ba);this.g.listen(this.Ba,Q,this.na);this.QG=this.wh.bind(this);this.gH=this.Xy.bind(this);
this.EG=this.Iy.bind(this);this.g.listen(this.wc,$g,this.QG);this.g.listen(this.Be,$g,this.gH);this.g.listen(this.xc,"load",this.EG);return a};function _PP_GoBackG_(a){a.Un(a.Yc.ca)}wc("_PP_GoBackG_",_PP_GoBackG_);function _PP_GoBackU_(a){a.co()}wc("_PP_GoBackU_",_PP_GoBackU_);function _PP_GoBackW_(a){a.mE()}wc("_PP_GoBackW_",_PP_GoBackW_);lq[_P].Wt=function(){window.photopickerInstance=this.d;var a="",b="";if(this.Ys==0){a="U";b=this.d.Gb("MSG_UPLOAD_BACK_LINK")}else if(this.Ys==2){a="G";b=tp}else if(this.Ys==
8){a="W";b=vp}xa(this.Xu,'<a href="javascript:_PP_GoBack'+a+'_(photopickerInstance);">'+b+"</a>")};lq[_P].qd=function(a,b){if(this.og!=a){this.og=a;this.Ys=b;this.Wt();this.ea=a.calcDimensions(210,158,true);this.ep();var c=this.d.Am();this.xc.src=c;this.Pb.src=c;var d=a.fd();this.xc.src=d;this.Pb.src=d;q(this.xc,this.ea[u]);Ta(this.xc,this.ea[A]);q(this.Yg,this.ea[u]);Ta(this.Yg,this.ea[A]);this.Yg.src=c;this.Yg.src=d;q(this.wf[w],this.ea[u]+1+"px");Ta(this.wf[w],this.ea[A]+1+"px");this.ua=n.round(n.min(this.ea[u]/
2,this.ea[A]/2));this.pv()}};lq[_P].pv=function(){this.Wc=(this.ea[u]-this.ua)/2;this.Xc=(this.ea[A]-this.ua)/2;this.il()};lq[_P].ep=function(){var a=n.round(64*this.ea[u]/this.ua),b=n.round(64*this.ea[A]/this.ua);this.yn={width:a,height:b};q(this.Pb,this.yn[u]);Ta(this.Pb,this.yn[A])};lq[_P].il=function(){var a=Ne(this.Xg),b=G?this.d.Ax():this.d.zx(),c=Ne(b);a.x-=c.x;a.y-=c.y;Da(this.wc[w],a.x+this.Wc+"px");this.wc[w].top=a.y+this.Xc+"px";if(this.ua){q(this.wc[w],this.ua+"px");Ta(this.wc[w],this.ua+
"px");this.ep()}Da(this.wf[w],a.x+"px");this.wf[w].top=a.y+"px";var d=n.round(this.Wc*this.yn[u]/this.ea[u]),e=n.round(this.Xc*this.yn[A]/this.ea[A]);this.wk.scrollLeft=d;ma(this.wk,e);if(this.ua){var f=G?7:3;Da(this.Be[w],a.x+this.Wc+this.ua-f+"px");this.Be[w].top=a.y+this.Xc+this.ua-f+"px"}ma(this.wc,this.Xc+mq);this.wc.scrollLeft=this.Wc+mq};lq[_P].jj=function(a,b){return n.round(a*100/b)/100};lq[_P].yx=function(){var a=this.jj(this.Wc,this.ea[u]),b=this.jj(this.Xc,this.ea[A]),c=this.jj(this.Wc+
this.ua,this.ea[u]),d=this.jj(this.Xc+this.ua,this.ea[A]);return a+","+b+","+c+","+d};lq[_P].Iy=function(){this.il()};lq[_P].activate=function(){if(this.xc&&this.ea)this.il();this.Ya(false)};lq[_P].wh=function(a){var b=id?a[mb]+1:a[mb];if(b>1)return false;this.Az={x:a[$b],y:a[ac]};this.qr=this.Wc;this.rG=this.Xc;this.hk=this.vh.bind(this);this.gl=this.Yf.bind(this);this.pk=this.Oy.bind(this);P(this.a[x],"mousemove",this.hk,false);P(this.a[x],"mouseup",this.gl,false);P(this.a[x],"mouseout",this.pk,
false);a.preventDefault();return false};lq[_P].Xy=function(a){this.In=true;this.qG=this.ua;this.wh(a)};lq[_P].vh=function(a){var b={x:a[$b],y:a[ac]},c=b.x-this.Az.x,d=b.y-this.Az.y,e=this.qr,f=this.rG;if(this.In){this.ua=this.qG+c;this.ua=n.max(this.ua,16);var g=n.min(this.ea[u]-mq-this.Wc,this.ea[A]-mq-this.Xc);if(this.ua>g)this.ua=g}else{e+=c;f+=d;e=n.max(e,0);f=n.max(f,0);var h=this.ea[u]-this.ua-mq,j=this.ea[A]-this.ua-mq;e=n.min(e,h);f=n.min(f,j)}this.Wc=e;this.Xc=f;this.il();a.preventDefault();
return false};lq[_P].Yf=function(a){Ug(this.a[x],"mousemove",this.hk,false);Ug(this.a[x],"mouseup",this.gl,false);Ug(this.a[x],"mouseout",this.pk,false);this.In=false;a.preventDefault();return false};lq[_P].Oy=function(a){if(!(a[Za]||a.toElement))this.Yf(a)};lq[_P].Pc=function(){this.d.Cw(this.yx())};lq[_P].na=function(){this.d.cancel();this.d.hide()};lq[_P].Ya=function(a){za(this.ab,a);za(this.Ba,a)};lq[_P].Vb=function(a){this.ca=a};lq[_P].Sx=function(a){var b=this.d.C(nq);if(b)return b;if(!a){var c=
E("Crop this picture");return c}var d=E("Crop this picture of {$user}",{user:a});return d};var oq=function(a){this.d=a;this.g=new hi(this);this.O=this.rA()};oq[_P].pa=function(){return this.O};oq[_P].activate=function(){this.Ya(false)};oq[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}};oq[_P].rA=function(){var a=this.d.Gm(),b=this.d.fb(pq),c=b?yp:qq(a),d=b?Bp:rq(a),e=b?xp:wp,f=new Vd(this.a),g=f.p.bind(f,"div"),h=f.p.bind(f,"p"),j=f.p.bind(f,"img"),k=f.p.bind(f,"table"),l=f.p.bind(f,"tbody"),p=f.p.bind(f,"tr"),s=f.p.bind(f,"td"),C=f.p.bind(f,"input"),K=[p(null,s({"class":"mp_title"},
e)),p({},s({"class":"mp_middle",height:"100%"},k({},l({},p({},s({"class":"mp_middle mp_leftcell"},this.Sd=j({})),s({"class":"mp_middle mp_rightcell"},h({},c))))))),p({},s({"class":"mp_buttons",valign:"bottom"},this.Ba=C({type:"button",value:zp}),this.ab=C({type:"submit",value:Ap})))];this.Vw=g({style:"display: none"},k({"class":"mp_dialog"},l({},K)));K=[p(null,s({"class":"mp_title"},e)),p({},s({"class":"mp_middle",height:"100%"},h({},d))),p({},s({"class":"mp_buttons",valign:"bottom"},this.lv=C({type:"button",
value:zp})))];this.oB=g({style:"display: none"},k({"class":"mp_dialog"},l({},K)));this.g.listen(this.Ba,Q,this.na);this.g.listen(this.lv,Q,this.na);this.g.listen(this.ab,Q,this.Pc);return g({style:"height: 100%"},this.Vw,this.oB)};oq[_P].ZD=function(a){this.og=new Wo("Their picture","image/jpeg",a,a);this.og.ds(this.NB.bind(this));this.Sd.src=a;this.It(false)};oq[_P].NB=function(){this.It(true)};oq[_P].It=function(a){He(this.Vw,"display",a?"block":"none");He(this.oB,"display",a?"none":"block")};oq[_P].Ya=
function(a){za(this.Ba,a);za(this.lv,a);za(this.ab,a)};oq[_P].na=function(){this.d.cancel();this.d.hide()};oq[_P].Pc=function(){this.d.qd(this.og,2);this.d.Ew()};var rq=function(a){var b=E("{$username} hasn't yet selected a picture. However, you can upload your own picture for {$username}.",{username:a});return b},qq=function(a){var b=E("{$username} has selected this picture. You can accept this photo or upload your own picture.",{username:a});return b};var sq=function(a,b){if(G)a[w].setAttribute("cssText",b);else a.setAttribute("style",b)};var tq=function(a,b,c,d,e,f,g,h,j){this.a=a;this.LF=b;this.pG=c;this.cv=d;this.Yz=0;this.Zs=0;this.rc=h;this.Bw=j;this.lc=null;this.fk=e;this.cs=f;this.pl=this.cv-this.Yz-this.Zs;this.Fd=g;this.QE=g;this.qr=0;this.Ve()};tq[_P].ky=function(){return this.lc};tq[_P].Ve=function(){this.lc=this.a.createElement("span");this.yl=this.a.createElement("img");this.yl.setAttribute("src",this.LF);this.yl.setAttribute("width",this.cv);this.$H=this.a.createElement("div");this.Jc=this.a.createElement("img");this.Jc.setAttribute("src",
this.pG);this.Jc.setAttribute("border","0");var a=G?"e-resize":"ew-resize";if(kd)a="move";sq(this.Jc,"position:relative; top:0px; left:0px; cursor:"+a);this.Jc[w].top="2px";this.lc.appendChild(this.yl);this.lc.appendChild(this.Jc);this.Xn()};tq[_P].activate=function(){this.xG=this.wh.bind(this);this.KF=this.Hy.bind(this);P(this.Jc,"mousedown",this.xG,false);P(this.yl,"click",this.KF,false)};tq[_P].wh=function(a){var b=id?a[mb]+1:a[mb];if(b>1)return false;this.qr=a[$b]-this.Zs;this.aI=ea(this.Jc[w][tb],
10);this.QE=this.Fd;this.$u=Ne(this.lc);this.hk=this.vh.bind(this);this.gl=this.Yf.bind(this);this.pk=this.Ce.bind(this);P(this.a[x],"mousemove",this.hk,false);P(this.a[x],"mouseup",this.gl,false);P(this.a[x],"mouseout",this.pk,false);a.preventDefault();return false};tq[_P].vh=function(a){var b=n.round(this.Jc[u]/2),c=a[$b]-this.$u.x;if(c<this.pl/2)b=0;this.Fd=this.gv(c-b);this.Xn();if(this.rc)this.rc(this.Fd);a.preventDefault();return false};tq[_P].Yf=function(a){Ug(this.a[x],"mousemove",this.hk,
false);Ug(this.a[x],"mouseup",this.gl,false);Ug(this.a[x],"mouseout",this.pk,false);if(this.Bw)this.Bw(this.QE,this.Fd);a.preventDefault();return false};tq[_P].Ce=function(a){if(!(a[Za]||a.toElement))this.Yf(a)};tq[_P].Hy=function(a){this.$u=Ne(this.lc);return this.vh(a)};tq[_P].Kx=function(a){var b=this.fv(a),c=n.round(this.Jc[u]/2);return b-c-this.Zs-this.pl};tq[_P].Xn=function(){Da(this.Jc[w],this.Kx(this.Fd)+"px")};tq[_P].i=function(){return this.Fd};tq[_P].eo=function(a,b){if(a!=this.Fd){this.Fd=
a;this.Xn();if(this.rc&&!b)this.rc(this.Fd)}};tq[_P].fv=function(a){return(a-this.fk)*this.pl/(this.cs-this.fk)};tq[_P].gv=function(a){var b=n.round(this.Jc[u]/2),c=this.cs-this.fk,d=this.fk+n.round(c*(a-this.Yz)/(this.pl-b));return n.max(n.min(d,this.cs),this.fk)};var vq=function(a){this.d=a;this.a=a.va();this.kH=-1;this.Bh=[];this.vn=[];this.Tb=null;this.Ud=null;this.lc=null;this.yi=3;this.ca=null;this.g=new hi(this);this.O=this.tA();this.iw=this.d.C(uq);wc("photopickerInstance",this.d)};vq[_P].DD=function(a){this.iw=a};vq[_P].Ik=function(a){if(a!=this.Tb){this.Tb=a;this.kH=-1;if(a)delete this.Ud;this.uo()}};vq[_P].ed=function(){return this.Tb};vq[_P].YD=function(a){this.Ud=a};vq[_P].yv=function(){delete this.Ud;this.Ud=null};vq[_P].Hu=function(a){this.yi=
a<3?2:(a<9?4:(a<16?5:(a<24?6:7)));this.Mt.eo(100-this.yi*10)};vq[_P].activate=function(){if(!this.Ud)this.hA()};vq[_P].pa=function(){return this.O};vq[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}};vq[_P].tA=function(){var a=this.d.nh(),b=this.a.createElement("table"),c=this.a.createElement("tbody"),d=this.a.createElement("tr"),e=this.a.createElement("td");b.appendChild(c);o(b,"mp_dialog");c.appendChild(d);d.appendChild(e);var f="";if(!this.d.C(iq))f=wq(a);ue(e,this.d.fg()?Uo:f);
o(e,"mp_title");d=this.a.createElement("tr");c.appendChild(d);e=this.a.createElement("td");d.appendChild(e);o(e,"mp_middle");Ta(e,"100%");this.Zk=this.a.createElement("p");e.appendChild(this.Zk);this.uo();this.sd=this.a.createElement("div");o(this.sd,"mp_pictures"+this.d.qh());this.sd.id="mp_pictures";this.Og();this.g.listen(this.sd,$g,this.gk);this.wj=this.a.createElement("div");o(this.wj,"mp_scroller"+this.d.qh());this.wj.appendChild(this.sd);e.appendChild(this.wj);var g=this.d.C(xq);if(g){this.ik=
this.a.createElement("div");o(this.ik,"mp_msg");e.appendChild(this.ik);ue(this.ik,g);var h=this.d.C(yq),j=this.d.C(zq);if(h&&j){var k=je(" ");this.ik.appendChild(k);var l=ie("a");l.href=j;Ea(l,"_blank");ue(l,h);this.ik.appendChild(l)}}d=this.a.createElement("tr");c.appendChild(d);e=this.a.createElement("td");d.appendChild(e);o(e,"mp_buttons");var p=this.a.createElement("table");q(p,"100%");var s=this.a.createElement("tbody"),C=this.a.createElement("tr"),K=this.a.createElement("td");e.appendChild(p);
p.appendChild(s);s.appendChild(C);C.appendChild(K);var H=this.a.createElement("input");Ma(H,"submit");ya(H,Cp);K.appendChild(H);this.g.listen(H,Q,this.na);var K=this.a.createElement("td");K.align="right";C.appendChild(K);var ia=this.a.createElement("span");o(ia,"mp_zoom");var eb=this.a.createElement("span");o(eb,"mp_gray");ue(eb,Dp);le(eb,ke("&nbsp;"));ia.appendChild(eb);var T=this.yi*10;this.Mt=new tq(this.a,this.d.kh("Track.gif"),this.d.kh("Knob.gif"),120,0,100,T,this.oF.bind(this),null);ia.appendChild(this.Mt.ky());
this.lc=ia;K.appendChild(ia);this.Mt.activate();return b};function _PP_GoBack_(a){a.df(a.pm()[vb])}wc("_PP_GoBack_",_PP_GoBack_);vq[_P].uo=function(){var a=null;if(this.Tb){var b=this.Tb.f();a=b==1?this.Jb.MSG_PHOTO_COUNT:this.Jb.getMsgPhotoCount(b);me(this.Zk);if(!this.iw)le(this.Zk,ke('<a href="javascript:_PP_GoBack_(photopickerInstance);" >'+this.Jb.MSG_PHOTOS_BACK_LINK+"</a>&nbsp;&nbsp;&nbsp;"));le(this.Zk,je(this.Tb.Ib()));le(this.Zk,ke("&nbsp;&nbsp;<span class=mp_photocount>"+a+"</span>"))}};
vq[_P].lp=function(){me(this.sd)};vq[_P].na=function(){this.d.cancel();this.d.hide()};vq[_P].oF=function(a){this.rE(n.round((100-a)/10))};vq[_P].fp=function(){var a=Qe(this.sd);return n.round((a[u]-16)/this.yi)-12};vq[_P].PB=function(){this.Bh=[];this.vn=[];var a=this.Ud,b=this.fp();this.lp();for(var c=0;c<a[t];c++){var d=a[c],e=this.a.createElement("img"),f=d.te();if(f==0)var g=n.round(b*3/4);else if(f>1)var g=n.round(b/f);else{b=n.round(b*f);var g=n.round(b/f)}e.src=d.ze(0);q(e,b);Ta(e,g);if(d.Ib()!=
null)qa(e,this.qy(d));this.sd.appendChild(e);this.Bh.push(e);this.vn.push(d)}this.$t();if(this.lc)Se(this.lc,a[t]>0)};vq[_P].Og=function(){if(!this.d.zr())return;var a=this.a.createElement("div"),b=this.d.Em();le(a,ke("<br><br><br><center><font size=4 font color=#4D4D4D>"+this.Jb.MSG_PHOTOS_LOADING+'<img src="'+b+'" hspace=8></font></center>'));this.sd.appendChild(a)};vq[_P].bd=function(a){me(this.sd);var b=this.a.createElement("div");le(b,ke("<br><br><br><center><font size=4 font color=#cc0000>"+
a+"</font></center>"));this.sd.appendChild(b)};vq[_P].qy=function(a){var b=a.Ib(),c=a.getDimensionsLabel();if(c!=null)b+=", "+c;return b};vq[_P].$t=function(){var a=this.fp();for(var b=0;b<this.Bh[t];b++){var c=this.vn[b],d=this.Bh[b],e=c.calcDimensions(a);q(d,e[u]);Ta(d,e[A])}};vq[_P].ev=function(a){for(var b=0;b<this.Bh[t];b++){var c=this.Bh[b],d=Ne(c);if(kd){d.x-=this.wj[Fb];d.y-=this.wj[Wa]}var e=Qe(c);if(a.x>=d.x&&a.y>=d.y&&a.x<d.x+e[u]&&a.y<d.y+e[A])return b}return null};vq[_P].hA=function(){this.d.Fg(true);
this.lp();this.Og();var a=this.d.Eq(),b=this.d.pm();if(b==a)this.jA(a);else this.gA(b)};vq[_P].gA=function(a){var b,c=this.d.C(Aq);if(c)b=c;else if(this.Tb!=null){var b=this.Tb.fd();if(b==null)return}else b=a.Rq();b=this.d.Ro(b);this.d.Yp(b,1)};vq[_P].jA=function(a){a.iA(D(function(b,c,d){this.Ud=b&&d?fp(b,this.d):[];this.d.Fg(false);if(d<1||this.Ud[t]<1){this.bd(this.Jb.MSG_NO_IMAGES_FOUND);if(this.lc)Se(this.lc,false)}else this.Yd()},this))};vq[_P].gk=function(a){var b=this.gy(a);if(b!=null){var c=
this.vn[b],d=this.d.fb(Bq);if(d)this.d.Lk(this.ca);this.d.qd(c,2);if(!d)this.d.Tl()}};vq[_P].gy=function(a){var b={x:a[$b],y:a[ac]},c=fe();b.x+=c.x;b.y+=c.y;return this.ev(b)};vq[_P].rE=function(a){if(a<1)a=1;if(this.yi!=a){this.yi=a;this.$t()}};vq[_P].Yd=function(){this.Hu(this.Ud[t]);this.PB();this.uo()};vq[_P].Vb=function(a){this.ca=a;this.Jb=a.tm()};var wq=function(a){if(!a){var b=E("Select a picture");return b}var c=E("Select a picture of {$user}",{user:a});return c},$o=function(a){var b=E("{$count} photos.",
{count:a});return b};var Cq=function(a,b){this.d=a;this.uz=b;this.g=new hi(this);this.O=this.vA()};Cq[_P].pa=function(){return this.O};Cq[_P].activate=function(){this.Ya(false)};Cq[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}};Cq[_P].vA=function(){var a=new Vd(this.a),b=a.p.bind(a,"div"),c=a.p.bind(a,"p"),d=a.p.bind(a,"img"),e=a.p.bind(a,"table"),f=a.p.bind(a,"tbody"),g=a.p.bind(a,"tr"),h=a.p.bind(a,"td"),j=a.p.bind(a,"input");if(!this.uz)return b({});var k=[g({},h({"class":"mp_title"},Ep)),g({},h({"class":"mp_middle",
height:"100%"},e({},f({},g({},h({"class":"mp_middle mp_leftcell"},d({src:this.uz})),h({"class":"mp_middle mp_rightcell"},c({},Hp))))))),g({},h({"class":"mp_buttons",valign:"bottom"},this.Ba=j({type:"button",value:Fp}),this.ab=j({type:"submit",value:Gp})))];this.g.listen(this.Ba,Q,this.na);this.g.listen(this.ab,Q,this.Pc);return b({style:"height: 100%"},e({"class":"mp_dialog"},f({},k)))};Cq[_P].Ya=function(a){za(this.ab,a);za(this.Ba,a)};Cq[_P].na=function(){this.d.cancel();this.d.hide()};Cq[_P].Pc=
function(){this.d.qd(null,2);this.d.Fw()};var Dq={getDimensionsLabel:function(){if(!this.w&&this.h)return null;return this.w+"x"+this.h},calcDimensions:function(a,b,c){var d=a,e=b||a,f=e,g=c?this.te():1;if(g>1)f=n.round(d/g);else if(g>0)d=n.round(f*g);if(d>a){f=n.round(f*a/d);d=a}if(f>e){d=n.round(d*e/f);f=e}return{width:d,height:f}}},Eq=function(a){Sd(a,Dq)};var Fq={MSG_SCRIPT_LOAD_ERROR:gp,MSG_PANEL_CHOOSE:hp,MSG_SUBMIT_CROP_LABEL:op,MSG_UPLOAD_BACK_LINK:up,MSG_URL_LABEL:Lp,MSG_URL_INSTRUCTIONS:Mp,MSG_URL_CAVEAT:Np,MSG_SELECT_URL_LABEL:Op,MSG_UPLOAD_TITLE:Qp,MSG_UPLOAD_STORAGE_INFO:Sp,MSG_UPLOAD_STORAGE_INFO_GP:Tp,MSG_UPLOAD_FEEDBACK:Up,MSG_UPLOAD_BUTTON_LABEL:Vp};var Gq=function(a,b,c,d,e,f){qa(this,a);this.user=b;this.format=c;this.url=d;this.selectMode=e;this.view=f;this.gridViewMsgs=[];this.element=null;if(f!=null)f.Vb&&f.Vb(this);this.Si();this.Rg=null};Gq[_P].Gg=function(a){return this.user=a};Gq[_P].Rq=function(){if(!this.url)return null;return this.url.replace(/<userId>/,this.user)};Gq[_P].ax=function(a,b){for(var c=0;c<a[t];c++){var d=a[c];if(d.rel==b)return d[Jb]}return null};Gq[_P].Xp=function(a){var b=[],c=a.feed.entry;if(!c)return b;for(var d=
0;d<c[t];d++){var e=c[d],f=new N(this.ax(e.link,"http://schemas.google.com/g/2005#feed")),g=e.media.thumbnail[0].url;f.u("alt","jsonm");f.u("kind","photo");f.u("thumbsize","160");var h=new Wo(e.title,"container/photos",g,f.toString());h.wt(e.numPhotos);h.Sn(e.summary);h.Wn(e.albumId);b.push(h)}this.Rg=b;return b};Gq[_P].Xw=function(a,b){var c=[],d=a.feed.entry;if(!d)return c;if(d)for(var e=0;e<d[t];e++){var f=d[e],g=f.content$src,h=f.media.thumbnail[0].url;h=h.split("?")[0];var j=new Wo(f.title,f.content$type,
h,g);j.Tn(f.width,f.height);c.push(j);if(b)b.Ko(j)}return c};Gq[_P].Si=function(){this.gridViewMsgs.getMsgPhotoCount=$o;this.gridViewMsgs.MSG_PHOTOS_BACK_LINK=ap;this.gridViewMsgs.MSG_PHOTO_COUNT=bp;this.gridViewMsgs.MSG_NO_IMAGES_FOUND=Vo;this.gridViewMsgs.MSG_PHOTOS_LOADING=cp};Gq[_P].tm=function(){return this.gridViewMsgs};var Hq=function(a){this.d=a;this.a=a.va();this.g=new hi(this);this.O=this.wA();this.reset();this.show()};Hq[_P].Hk=null;Hq[_P].pa=function(){return this.O};Hq[_P].show=function(){var a=kd?"inline":"";r(this.O[w],a)};Hq[_P].hide=function(){r(this.O[w],"none")};Pa(Hq[_P],function(){var a=vd(this.d.Nq(),function(b){return!b.Zm});this.kt(a[0])});Hq[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}};Hq[_P].kt=function(a){if(this.Hk!=a){if(this.Hk!=null)o(this.Hk.element,"mp_unselected");
o(a.element,"mp_selected");this.Hk=a;this.d.zD(a);return true}return false};Hq[_P].wA=function(){var a=this.a.createElement("table");o(a,"mp_sourcePanel"+this.d.qh());var b=this.a.createElement("tbody");a.appendChild(b);var c=this.d.Nq();for(var d=0;d<c[t];d++){var e=c[d],f=this.a.createElement("tr");b.appendChild(f);var g=this.a.createElement("td");o(g,e.Zm?"mp_sourcePanel_title":"mp_unselected");r(g[w],"block");if(e.selectMode!=null)g.id="mp_sourcePanel_"+e.selectMode;f.appendChild(g);e.element=
g;ue(g,e[Ya]);if(!e.Zm)this.g.listen(g,Q,this.IE.bind(this,e))}var f=this.a.createElement("tr");b.appendChild(f);var g=this.a.createElement("td");f.appendChild(g);Ta(g,"100%");o(g,"mp_sourcePanel_spacer");return a};Hq[_P].IE=function(a){if(this.kt(a))this.d.df(a[vb])};var Iq=function(a){qa(this,a)};Iq[_P].Zm=true;var Jq=function(a){this.d=a;this.a=a.va();this.g=new hi(this);this.O=this.yA()};Jq[_P].pa=function(){return this.O};Jq[_P].activate=function(){this.Ya(false)};Jq[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}};Jq[_P].OD=function(a){this.Pb.src=a};Jq[_P].yA=function(){var a=this.d.Gm(),b=Kq(a),c=Lq(a),d=Mq(a),e=this.d.Am(),f=new Vd(this.a),g=f.p.bind(f,"table"),h=f.p.bind(f,"tbody"),j=f.p.bind(f,"tr"),k=f.p.bind(f,"td"),l=f.p.bind(f,"p");f.p.bind(f,"a");var p=f.p.bind(f,"div"),s=f.p.bind(f,
"textarea"),C=f.p.bind(f,"input"),K=f.p.bind(f,"img"),H=[k({"class":"mp_title"},b),k({"class":"mp_middle"},l({},c)),k({"class":"mp_middle",style:"height: 100%"},g({width:"100%"},h({},j({},k({"class":"mp_middle mp_leftcell"},this.Pb=K({"class":"mp_suggestPreviewImage",src:e})),k({"class":"mp_middle mp_rightcell",width:"100%"},this.AH=s({"class":"mp_suggestTextarea"},d)))))),k({"class":"mp_buttons"},this.ab=C({type:"submit",value:Ip}),this.Ba=C({type:"submit",value:Jp}))];this.g.listen(this.ab,Q,this.SE);
this.g.listen(this.Ba,Q,this.nv);return p({style:"height: 100%"},g({"class":"mp_dialog",style:"height: 100%"},h({},wd(H,function(ia){return j({},ia)}))))};Jq[_P].SE=function(){this.d.Mp(this.AH[v]);return true};Jq[_P].nv=function(){this.d.Mp(null);return true};var Kq=function(a){var b=E("Suggest this picture to {$user}?",{user:a});return b},Lq=function(a){var b=E("Would you like to suggest that {$user} uses this picture? If so, you can send the picture suggestion along with a custom message below.",
{user:a});return b},Mq=function(a){var b=E("Hey {$user}, I found this great picture for you!",{user:a});return b};Jq[_P].Ya=function(a){za(this.ab,a);za(this.Ba,a)};var Nq=function(a,b){if(a[Ob]=="FORM"){var c=a.elements;for(var a,d=0;a=c[d];d++)Nq(a,b)}else{if(b==true)a.blur();za(a,b)}};var Oq=function(a,b){this.d=a;this.a=a.va();this.FH=b;this.g=new hi(this);this.O=this.AA();this.bI=null;this.of=[]},Pq,Qq;Oq[_P].fe=null;Oq[_P].Pg=null;Oq[_P].pa=function(){return this.O};Oq[_P].activate=function(){r(this.oc[w],"none");r(this.kf[w],"none");var a=this.a.getElementById("mp_upload_form");a.reset();if(this.yo())this.dA();this.re.focus()};Pa(Oq[_P],function(){var a=this.a.getElementById("mp_upload_form");a.reset()});Oq[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}};Oq[_P].zi=
function(a,b,c){var d=ke('<input type="hidden" name="'+Rc(b)+'" value="'+Rc(c)+'"></input>');le(a,d);return d};Oq[_P].yu=function(a){var b=this.d.C(Rq),c=this.d.C(Sq);if(c){if(b)b+=";";b+=c}var d=false;if(b){var e=b.split(";");for(var f=0;f<e[t];f++){var g=e[f],h=g.split("=");if(h[t]==2){var j=h[0];this.zi(a,j,h[1]);d=d||"tok"==j}}}if(!d){var k=this.d.C("tok");if(k)this.zi(a,"tok",k)}};Oq[_P].AA=function(){var a=this.a.createElement("div");Ta(a[w],"100%");xa(a,'<FORM id="mp_upload_form" method="POST" enctype="multipart/form-data" style="height:100%" onsubmit="return false;"></FORM>');
this.Z=a.getElementsByTagName("form")[0];this.yu(this.Z);this.zi(this.Z,"username",this.d.C("userId"));var b=this.a.createElement("table"),c=this.a.createElement("tbody"),d=this.a.createElement("tr"),e=this.a.createElement("td");b.appendChild(c);o(b,"mp_dialog");c.appendChild(d);d.appendChild(e);var f=this.d.fb(Tq);if(f){var g=this.d.fg(),h="";if(!this.d.C(iq)){var j=this.d.nh();h=g?this.d.Gb("MSG_UPLOAD_TITLE"):Uq(j)}ue(e,h);o(e,"mp_title")}if(this.yo()){d=this.a.createElement("tr");c.appendChild(d);
e=this.a.createElement("td");d.appendChild(e);o(e,"mp_middle");e.appendChild(this.zA())}d=this.a.createElement("tr");c.appendChild(d);e=this.a.createElement("td");o(e,"mp_middle");d.appendChild(e);Ta(e,"100%");var k=this.a.createElement("p");this.re=this.a.createElement("input");Qa(this.re,this.d.C(Vq));this.re.id="mp_file_element";Ma(this.re,"file");this.re.size=32;k.appendChild(this.re);e.appendChild(k);this.g.listen(this.re,ch,this.bx);k=this.a.createElement("p");o(k,"mp_uploadInfo");var l=Rp;
if(this.d.fg()){var p=E("Note: The photo you specify here will be used across all Google products and services which display your public photo.");l+="<br/><br/>"+p}xa(k,l);e.appendChild(k);this.oc=this.a.createElement("p");this.oc.id="mp_upload_hint";r(this.oc[w],"none");e.appendChild(this.oc);this.kf=this.a.createElement("p");var s=this.d.Em();xa(this.kf,"<br><br><span class=mp_uploadFeedback>"+Rc(this.d.Gb("MSG_UPLOAD_FEEDBACK"))+'&nbsp;&nbsp;</span><img src="'+s+'"/>');this.kf.id="mp_upload_feedback";
r(this.kf[w],"none");e.appendChild(this.kf);d=this.a.createElement("tr");c.appendChild(d);this.Cd=this.a.createElement("td");d.appendChild(this.Cd);o(this.Cd,"mp_buttons");d.valign="bottom";var C=this.a.createElement("input");Ma(C,"button");ya(C,Wp);this.Cd.appendChild(C);this.g.listen(C,Q,this.na);this.wd=this.a.createElement("input");o(this.wd,"mp_next");Ma(this.wd,"button");r(this.wd[w],"none");ya(this.wd,this.d.Gb("MSG_UPLOAD_BUTTON_LABEL"));this.Cd.appendChild(this.wd);this.g.listen(this.wd,
Q,this.Pc);this.Z.appendChild(b);return this.Z};Oq[_P].Yt=function(){if(!this.Pg){var a=this.Z.getElementsByTagName("input");for(var b,c=0;b=a[c];c++)if(b.form==this.Z&&b[Rb]=="aid"){this.Pg=b;break}if(!this.Pg)this.Pg=this.zi(this.Z,"aid","-1")}ya(this.Pg,this.yo()?this.ee[v]||"-1":"-1")};Oq[_P].bx=function(){var a=this.re[v];if(!a){Se(this.wd,false);return}if(!this.d.xr(a)){this.Uk(Xp);return}this.Yt();if(this.d.fb(Wq)){r(this.oc[w],"none");r(this.kf[w],"inline");this.au()}else{r(this.wd[w],"");
xa(this.oc,"<br><br>"+Yp);o(this.oc,"");r(this.oc[w],"none")}};Oq[_P].bd=function(a){this.Uk(a)};Oq[_P].Uk=function(a){r(this.wd[w],"none");r(this.oc[w],"");o(this.oc,"mp_uploadError");xa(this.oc,"<br>"+Rc(a))};Oq[_P].au=function(){var a=new X;this.g.listen(a,th,this.cx.bind(this,a));a.nt(this.Z,this.FH)};Oq[_P].cx=function(a){r(this.kf[w],"none");var b;try{b=lh(a.Ta());if(!b||!ec(b.Success))b={Success:false}}catch(c){b={Success:false}}var d=b.Success;if(!d){var e=b.Message;if(e)this.Uk(E(e));else this.Uk(Zp);
Se(this.wd,true);return}var f=b.Body.imageId,g=b.Body.imageUrl,h=b.Body.thumbnailUrl||g,j=b.Body.mimeType,k=new Wo(f,j,h,g);k.ds(this.ix.bind(this,k))};Oq[_P].ix=function(a){this.d.qd(a,0);this.d.pF();if(this.d.fb(Bq))this.d.Lk();else this.d.Tl()};Oq[_P].yo=function(){return this.d.fb(Xq)&&this.d.Hm()};Oq[_P].dA=function(){this.d.sx(this.No.bind(this))};Oq[_P].zA=function(){this.fe=this.a.createElement("div");ue(this.fe,$p);this.ee=this.a.createElement("select");this.fe.appendChild(this.ee);Se(this.fe,
false);this.g.listen(this.ee,ch,this.Yt);return this.fe};Oq[_P].No=function(a){if(!a||a[t]<1){Se(this.fe,false);return}if(a[t]==1)if(this.d.vr(a[0])){Se(this.fe,false);return}var b=this.d.C(Yq),c=-1,d=this.d.C(Zq),e="",f="";if(d&&d.indexOf(",")>0){var g=d.split(",");e=g[0];f=g[1]}pa(this.ee[Bb],0);var h=false,j=0,k=30,l=false;if(b){for(var p=0;p<a[t];p++){var s=a[p],C=s.Ib();if(C==b){h=true;c=p;break}}if(!h&&e==b){H=true;c=0;this.ee[Bb][j]=new Option(Xc(e,k,l),f,H,H);e="";++j}}for(var p=0;p<a[t];p++){var s=
a[p],C=s.Ib(),K=s.Ka(),H=C==b;this.ee[Bb][j]=new Option(Xc(C,k,l),K,H,H);++j;if(H){c=p;h=true}if(C==e)e=""}if(e){var H=e==b;this.ee[Bb][this.ee[Bb][t]]=new Option(Xc(e,k,l),f,H,H);if(H)c=a[t]}if(c>=0)ta(this.ee,c);Se(this.fe,true)};Oq[_P].Pc=function(){r(this.oc[w],"none");r(this.kf[w],"inline");this.au();return false};Oq[_P].na=function(){this.d.cancel();this.d.hide()};var Uq=function(a){if(!a){var b=E("Upload a picture");return b}var c=E("Upload a picture of {$user}",{user:a});return c};wc("photopickerUploadComplete",
Pq);wc("photopickerUploadView",Qq);var $q=function(a){this.d=a;this.a=a.va();this.g=new hi(this);this.O=this.BA();this.yf=new So(this.uv,1000,this)};$q[_P].Ha=null;$q[_P].pa=function(){return this.O};$q[_P].activate=function(){this.xd.focus()};$q[_P].dispose=function(){if(this.g){this.g.dispose();this.g=null}this.yf.dispose()};$q[_P].BA=function(){var a=this.a.createElement("div");Ta(a[w],"100%");var b=this.a.createElement("table"),c=this.a.createElement("tbody"),d=this.a.createElement("tr"),e=this.a.createElement("td");b.appendChild(c);
o(b,"mp_dialog");c.appendChild(d);d.appendChild(e);a.appendChild(b);var f=this.d.fb(pq),g="";if(!this.d.C(iq))g=f?Kp:ar(this.d.nh());ue(e,g);o(e,"mp_title");d=this.a.createElement("tr");c.appendChild(d);e=this.a.createElement("td");o(e,"mp_middle");d.appendChild(e);var h=this.a.createElement("span");ue(h,this.d.Gb("MSG_URL_LABEL"));o(h,"mp_url_label");e.appendChild(h);this.xd=this.a.createElement("input");this.xd.id="mp_url_input";Ma(this.xd,"text");this.xd.size="30";e.appendChild(this.xd);this.Ha=
new Ro(this.xd);this.Ha.addEventListener("input",this.Ry,true,this);d=this.a.createElement("tr");c.appendChild(d);e=this.a.createElement("td");Ta(e,100);q(e,340);d.appendChild(e);this.fa=this.a.createElement("img");this.fa.id="mp_preview_image";o(this.fa,"mp_preview_image");Se(this.fa,false);e.appendChild(this.fa);this.Rm=this.a.createElement("div");ue(this.Rm,this.d.Gb("MSG_URL_INSTRUCTIONS"));o(this.Rm,"mp_url_instructions");e.appendChild(this.Rm);this.zh=this.a.createElement("div");if(this.d.C(iq))ue(this.zh,
Xp);else ue(this.zh,br);o(this.zh,"mp_url_instructions");r(this.zh[w],"none");e.appendChild(this.zh);d=this.a.createElement("tr");c.appendChild(d);e=this.a.createElement("td");d.appendChild(e);ue(e,this.d.Gb("MSG_URL_CAVEAT"));o(e,"mp_url_caveat");d=this.a.createElement("tr");c.appendChild(d);this.Cd=this.a.createElement("td");d.appendChild(this.Cd);o(this.Cd,"mp_buttons");d.valign="bottom";this.Ze=this.a.createElement("input");this.Ze.id="mp_select_button";o(this.Ze,"mp_next");Ma(this.Ze,"button");
r(this.Ze[w],"none");ya(this.Ze,this.d.Gb("MSG_SELECT_URL_LABEL"));this.Cd.appendChild(this.Ze);this.g.listen(this.Ze,Q,this.hD);var j=this.a.createElement("input");j.id="mp_cancel_button";Ma(j,"button");ya(j,Pp);this.Cd.appendChild(j);this.g.listen(j,Q,this.na);return a};$q[_P].tl=function(a){if(a&&a.search(/https?:\/\//)!=0)a="http://"+a;return a};$q[_P].bz=function(){var a=this.tl(this.xd[v]);return this.d.xr(a)};$q[_P].Ry=function(){this.yf.start()};$q[_P].uv=function(){var a=this.tl(this.xd[v]);
if(this.fa.src==a)return;if(!a){this.mi(false);this.fa.src="";return}this.g.listen(this.fa,"load",this.Ah);this.g.listen(this.fa,"error",this.mr);this.fa.src=a};$q[_P].mi=function(a){var b=this.bz();Se(this.Rm,!a&&!b);Se(this.zh,!a&&b);Se(this.fa,a);Se(this.Ze,a)};$q[_P].Lp=function(){this.g.unlisten(this.fa,"load",this.Ah);this.g.unlisten(this.fa,"error",this.mr)};$q[_P].Ah=function(){this.fa.removeAttribute("width");this.fa.removeAttribute("height");if(G)this.mi(true);this.Mo();if(!G)this.mi(true);
this.Lp()};$q[_P].mr=function(){this.mi(false);this.Lp()};$q[_P].Mo=function(){var a=this.fa[u],b=this.fa[A],c=100,d=340;if(b>c){var e=n.round(a*c/b);q(this.fa,e);Ta(this.fa,c)}else if(a>d){var f=n.round(b*d/a);q(this.fa,d);Ta(this.fa,f)}if(0==a||0==b)window.setTimeout(D(this.Mo,this),0)};$q[_P].hD=function(){var a=this.tl(this.xd[v]),b=a.split("/"),c=b[b[t]-1],d=new Wo(c,"image/*",a,a);d.Tn(this.fa[u],this.fa[A]);var e=this.d.fb(Bq);if(e)this.d.Lk();this.d.qd(d,8);if(!e)this.d.Tl()};$q[_P].na=function(){this.d.cancel();
this.d.hide()};var ar=function(a){if(!a){var b=E("Image URL");return b}var c=E("Image URL for {$user}",{user:a});return c},br=E("The image URL you have entered above is incorrect or can't be loaded.  Please enter a  correct image URL.");Pa($q[_P],function(){this.yf.stop();ya(this.xd,"");this.mi(false);this.fa.src=""});var cr=null,Y=function(a,b,c,d){R.call(this);this.R=a;this.rc=b;this.Dd=c||{};this.ek=Qd(Fq);var e=this.Dd[dr]||{};e=er.sanitize(dr,e);Sd(this.ek,e);this.Ou=d||{};this.Qo=[];cr=this;this.ip="albums";this.sE();this.PH=[];this.JE=[];this.zo={};this.kI=-1;this.eC=false;this.kl=this.C("userId");this.Tb=null;this.gi=null;this.mG=new RegExp(this.C(fr),"i");var f=this.C("theme");this.Ig=f?"_"+f:"";this.Jv=this.sA();this.vi=new Oq(this,this.C(gr));this.ib=new vq(this);this.Qg=new cq(this);this.Yc=new lq(this);
this.ri=new Jq(this);this.am=new oq(this);this.mn=new Cq(this,this.C("dpUrl"));this.wo=new $q(this);this.Zc=null;this.WH=0;this.kA();this.Hg=new Hq(this);this.Xz();this.R[gb][x].appendChild(this.O);var g=this.C("eUrl");if(g)this.am.ZD(g);if(window==top)this.qv()};Y.inherits(R);Y[_P].Db=null;var gr="fileUploadUrl",Bq="cropEnabled",hr="urlEnabled",ir="picasaWebEnabled",jr="clearListAfterUpload",Wq="autoLoad",kr="suppressHide",Vq="postFilename",lr="imageUrlBase",mr="picasaWebDomain",nr="picasaAlbumsUrl",
ep="thumbsize",Rq="extraUploadParams",Sq="extraPicasaWebParams",Yq="defaultUploadAlbum",Xq="uploadAlbumSelect",Tq="showUploadTitle",or="photoDisplayName",Zq="extraAlbum",Aq="defaultAlbumFeedUrl",uq="defaultAlbumOnly",xq="albumPaneMsg",hq="albumPaneTitle",nq="cropPaneTitle",yq="albumPaneLinkTitle",zq="albumPaneLink",aq="usernameShow",bq="albumListSubShow",pq="profileMode",pr="extraFeedParams",fr="imageFilter",iq="newMessages",qr="defaultPicasaSource",jq="defaultAlbumSubtitle",kq="defaultAlbumSubtitleNoUser",
dr="messages",rr={USER_ID:"userId",FILE_UPLOAD_URL:gr,LEFT:"left",TOP:"top",CROP_ENABLED:Bq,URL_ENABLED:hr,PICASAWEB_ENABLED:ir,CLEAR_LIST_AFTER_UPLOAD:jr,AUTO_LOAD:Wq,SUPPRESS_HIDE:kr,POST_FILENAME:Vq,IMAGE_URL_BASE:lr,PICASA_WEB_DOMAIN:mr,PICASA_ALBUMS_URL:nr,PICASA_IMAGE_MAX:"imgmax",PICASA_THUMBNAIL_SIZE:ep,EXTRA_UPLOAD_PARAMS:Rq,EXTRA_PICASAWEB_PARAMS:Sq,DEFAULT_UPLOAD_ALBUM:Yq,UPLOAD_ALBUM_SELECT:Xq,SHOW_UPLOAD_TITLE:Tq,PHOTO_DISPLAY_NAME:or,EXTRA_ALBUM:Zq,DEFAULT_ALBUM_FEED_URL:Aq,DEFAULT_ALBUM_ONLY:uq,
ALBUM_PANE_MESSAGE:xq,ALBUM_PANE_TITLE:hq,CROP_PANE_TITLE:nq,ALBUM_PANE_LINK_TITLE:yq,ALBUM_PANE_LINK:zq,EVERGREEN_URL:"eUrl",DEFAULT_PHOTO_URL:"dpUrl",ALBUMLIST_USERNAME_SHOW:aq,ALBUMLIST_SUBTITLE_SHOW:bq,PROFILE_MODE:pq,AUTH_TOKEN:"tok",EXTRA_FEED_PARAMS:pr,IMAGE_FILTER:fr,NEW_MESSAGES:iq,THEME_NAME:"theme",DEFAULT_PICASA_SOURCE:qr,DEFAULT_ALBUM_SUBTITLE:jq,DEFAULT_ALBUM_SUBTITLE_NO_USER:kq,MESSAGE_OVERRIDES:dr},sr=function(){var a=function(h){return h==1},b=function(h){return m(h)},c=this.VC,d=
function(h){return h},e=function(h){var j=Rc(h);j=j.replace(/&amp;laquo;/g,"&laquo;");j=j.replace(/&amp;raquo;/g,"&raquo;");return j},f=function(h){return Jd(h,e)},g={};g.userId=d;g[gr]=c;g.left=b;g.top=b;g[Bq]=a;g[hr]=a;g[ir]=a;g[jr]=a;g[Wq]=a;g[kr]=a;g[Vq]=d;g[lr]=c;g[mr]=d;g[nr]=c;g.imgmax=b;g[ep]=b;g[Rq]=d;g[Yq]=d;g[Xq]=a;g[Tq]=a;g[or]=d;g[Zq]=d;g[Aq]=c;g[uq]=a;g[xq]=d;g[hq]=e;g[nq]=e;g[yq]=d;g[zq]=c;g.eUrl=c;g.dpUrl=c;g[aq]=a;g[pq]=a;g.tok=d;g[pr]=d;g[fr]=d;g[iq]=a;g.theme=d;g[qr]=d;g[jq]=d;
g[kq]=d;g[dr]=f;this.fG=g};sr[_P].sanitize=function(a,b){var c=this.fG[a];return c?c(b):b};sr[_P].VC=function(a){var b=rg(a),c=b.qj();return!c||c=="http"||c=="https"?a:null};var er=new sr;Y[_P].qh=function(){return this.Ig};Y[_P].Sc=function(a){var b=a.pa();Se(b,false);this.qp.appendChild(b)};Y[_P].qv=function(){var a=Qe(this.O);a.width+=16;a.height+=16;var b=Qe(Me()),c=b[u]>a[u]?n.round(b[u]-a[u])/2:0,d=b[A]>a[A]?n.round(b[A]-a[A])/2:0;Oe(this.O,c,d)};Y[_P].Xz=function(){var a=this.R[gb].createElement("table"),
b=this.R[gb].createElement("tbody"),c=this.R[gb].createElement("tr");this.Al=this.R[gb].createElement("td");a.appendChild(b);b.appendChild(c);c.appendChild(this.Al);o(a,"mp_framingTable");o(this.Al,"mp_sourceContainer"+this.Ig);xa(this.Al,"&nbsp;&nbsp;");var d=this.R[gb].createElement("td");c.appendChild(d);o(d,"mp_sourceContainer"+this.Ig);d.appendChild(this.Hg.pa());this.qp=this.R[gb].createElement("td");q(this.qp,"100%");c.appendChild(this.qp);this.Sc(this.vi);this.Sc(this.Qg);this.Sc(this.ib);
this.Sc(this.Yc);this.Sc(this.ri);this.Sc(this.am);this.Sc(this.mn);this.Sc(this.wo);for(var e=0;e<this.Qo[t];e++){var f=this.Qo[e];this.Sc(f)}this.Jv.appendChild(a)};Y[_P].sE=function(){var a={};a[gr]="../update/uploadImage";a.left="0";a.top="0";a[Bq]=1;a[hr]=1;a[ir]=1;a[jr]=0;a[Wq]=1;a[kr]=0;a[Tq]=1;a[iq]=0;a[hq]="";a[nq]="";a[Vq]="imagefile";a[lr]="../static/images/";a[mr]="http://picasaweb.google.com";a[nr]="http://picasaweb.google.com/data/feed/api/user/_NO_USER_SPECIFIED";a.imgmax="1600";a[ep]=
"144";a[Rq]="";a[Xq]=0;a[aq]=1;a[bq]=1;a[fr]=".jpg$|.jpeg$|.gif$|.png$";a[qr]=jp;var b=E("Picasa Web Albums for ");a[jq]=b;var c=E("Picasa Web Albums");a[kq]=c;this.VF=a};Y[_P].C=function(a){var b=this.Dd[a];if(b!=null)return b;return this.VF[a]||""};Y[_P].fb=function(a){var b=this.C(a);return m(b)!=0};Y[_P].fg=function(){return this.fb(pq)};Y[_P].Im=function(){return this.R};Y[_P].va=function(){return this.R[gb]};Y[_P].zx=function(){return this.O};Y[_P].Ax=function(){return this.Jv};Y[_P].Hm=function(){return this.kl};
Y[_P].kh=function(a){return this.C(lr)+a};Y[_P].Em=function(){return this.kh("Spin.gif")};Y[_P].Am=function(){return this.kh("Transparent.gif")};Y[_P].Gg=function(a){this.kl=a;if(this.Zc)this.Zc.Gg(a)};Y[_P].show=function(){this.co();this.Hg.reset();Se(this.O,true)};Y[_P].hide=function(){if(!this.fb(kr))Se(this.O,false)};Pa(Y[_P],function(){this.vi.reset();this.wo.reset();this.co();delete this.zo;this.zo={};if(this.jl)this.jl.reset();if(this.ah)this.ah.reset();if(this.Db){delete this.Db;this.Db=this.lq();
this.vb.Rk(this.Db)}this.Hg.reset()});Y[_P].dispose=function(){this.Hg.dispose();this.vi.dispose();this.ib.dispose();this.Qg.dispose();this.Yc.dispose();this.ri.dispose();this.mn.dispose()};Y[_P].close=function(a){this.hide();this.dispose();if(!a)this.O[z].removeChild(this.O)};Y[_P].fj=function(){return this.Bb};Y[_P].Nq=function(){return this.JE};Y[_P].pm=function(){return this.Zc};Y[_P].Eq=function(){return this.vb};Y[_P].zD=function(a){this.Zc=a};Y[_P].nh=function(){return Rc(this.Gm())};Y[_P].Gm=
function(){return i(this.C(or))};Y[_P].zr=function(){return this.eC};Y[_P].Fg=function(a){this.eC=a};Y[_P].Ik=function(a){this.Tb=null;if(this.Zc==this.vb){this.vb.Rk(this.tq(a));this.Tb=a}this.ib.Vb(this.Zc);this.ib.Ik(a)};Y[_P].qd=function(a,b){this.gi=a;if(a&&this.fb(Bq))this.Yc.qd(a,b)};Y[_P].Bd=function(a){this.JE.push(a)};function _showCropView(a,b){a.wE(b)}Y[_P].wE=function(a){this.qd(a,0);this.Yc.Ya(false);this.Lk();this.Hg.reset();r(this.O[w],"block")};Y[_P].DE=function(a){if(a)this.ri.OD(a);
this.gE()};Y[_P].Ro=function(a){var b=this.C(Sq);if(b)a+="&"+b.replace(";","&");return a};Y[_P].hi=function(a){var b=this.Dd.tok;if(b)a.tok=b;this.dispatchEvent(a);if(this.rc)this.rc(a)};Y[_P].Hd=function(a){if(this.gi){var b={type:"PHOTO_PICKED",imageUrl:this.gi.fd(),thumbnailUrl:this.gi.ze(1),cropString:a};this.hi(b)}};Y[_P].pF=function(){if(this.C(jr))this.ib.yv()};Y[_P].Tl=function(){this.Hd("0,0,1,1")};Y[_P].Cw=function(a){this.Yc.Ya(true);this.Hd(a)};Y[_P].Mp=function(a){this.ri.Ya(true);if(this.gi){var b=
{type:"SUGGEST_DONE",suggestMessage:a};this.hi(b)}};Y[_P].Ew=function(){this.am.Ya(true);if(this.gi){var a={type:"PHOTO_PICKED",evergreen:true};this.hi(a)}};Y[_P].Fw=function(){this.mn.Ya(true);var a={type:"PHOTO_PICKED",noPhoto:true};this.hi(a)};Y[_P].cancel=function(){this.hi({type:"cancel"})};Y[_P].df=function(a){if(this.Qi!=a){if(this.Qi!=null)Se(this.Qi.pa(),false);Se(a.pa(),true);if(a==this.Yc||a==this.ri)this.Hg.hide();else this.Hg.show();Se(this.Al,a!=this.Yc);this.Qi=a}a.activate()};Y[_P].xr=
function(a){return a.match(this.mG)};Y[_P].Lk=function(a){a&&this.Yc.Vb(a);this.df(this.Yc)};Y[_P].co=function(){this.df(this.vi)};Y[_P].Un=function(a){this.ib.Vb(a);this.df(this.ib)};Y[_P].gE=function(){this.df(this.ri)};Y[_P].mE=function(){this.df(this.wo)};Y[_P].Mq=function(){return this.Qi};Y[_P].sA=function(){this.O=this.R[gb].createElement("div");o(this.O,"mediaPicker");this.O[w].top=this.C("top")+"px";Da(this.O[w],this.C("left")+"px");var a=this.R[gb].createElement("div");o(a,"mp_border"+this.Ig);
this.O.appendChild(a);var b=this.R[gb].createElement("div");o(b,"mp_contents");a.appendChild(b);return b};Y[_P].Kj=function(a,b){var c=this.C("imgmax"),d=this.C(ep);if(c)a.ND(m(c));var e=[b||160];if(d)e.push(m(d));a.iE(e)};Y[_P].tq=function(a){var b=a.Tf();b.yt(Eq);var c=b.Fa();this.Kj(c);return b};Y[_P].lq=function(){var a=null;if(!this.Db){var b=this.C(Aq);if(b){var c=new Pn(b);this.Kj(c);this.Db=new qo(this.ah,c);this.Db.yt(Eq)}else this.Db=-1}if(-1!=this.Db)a=this.Db;return a};Y[_P].rh=function(a){var b=
this.zo[a];if(!b){var c=this.C(nr),d=new Ao(c,a);this.Kj(d,32);b=new qo(this.ah,d);this.zo[a]=b}return b};Y[_P].kA=function(){this.Bd(new Iq(this.Gb("MSG_PANEL_CHOOSE")));var a=new Gq(ip,null,null,null,0,this.vi);this.Bd(a);var b=this.C(Aq),c=this.C(uq),d=this.fb(ir);if(d){this.ah=new Ho(new Qo);this.jl=this.rh(this.kl);if(c){this.vb=new Zo(this.C(qr),this.kl,this,2,this.ib);this.Kj(this.jl.Fa(),160);if(b)this.vb.Rk(this.lq());else this.ib.bd(this.ib.Jb.MSG_NO_IMAGES_FOUND)}else{if(this.fb(Xq))this.jl.cn(D(this.bA,
this));this.vb=new Zo(this.C(qr),this.kl,this,1,this.Qg)}this.vb.qt(this.jl);this.Bd(this.vb)}if(this.fb(hr)){var e=new Gq(np,null,null,null,8,this.wo);this.Bd(e)}if(this.Dd.eUrl||this.Dd.dpUrl){this.Bd(new Iq(kp));if(this.Dd.eUrl)if(!this.fg())this.Bd(new Gq(lp,null,null,null,6,this.am));if(this.Dd.dpUrl)this.Bd(new Gq(mp,null,null,null,7,this.mn))}for(var f=0;f<this.Ou[t];f++){var g=this.Ou[f];this.Bd(g);var h=g[vb];if(h!=null){h.Bt(this);this.Qo.push(h)}}this.Zc=a};Y[_P].vr=function(a){if(!a)return false;
var b=this.C(Aq);if(b&&a){var c=(new N(a.fm)).Od(),d=(new N(b)).Od();return c==d}return false};Y[_P].bA=function(a){this.of=a.nm();if(this.vb&&this.of[t]==1){var b=this.of[0];if(this.vr(b)){this.vb.selectMode=2;this.Db=this.tq(b);this.vb.Rk(this.Db);this.ib.DD(true);this.ib.Vb(this.vb);this.vb.view=this.ib;if(this.Qi==this.Qg)this.Un(this.vb)}}this.dispatchEvent("albumsready",this.of)};Y[_P].sx=function(a){if(this.of)a(this.of);else this.addEventListener("albumsready",function(b){a(b[y].of)})};Y[_P].gt=
function(a){this.Qg.it(a)};Y[_P].Ag=function(a){this.Bb=a};var tr=function(a,b,c){var d=new N(ga[kb][Jb]),e=d.Fc(),f=e.get("done"),g=a||"..",h={};h[gr]=g+"/update/uploadImage";h[lr]=g+"/static/images/";h.dpUrl=g+"/static/images/NoPicture.gif";h[or]=e.get("dn");h.top=0;h.left=0;h.tok=c;for(var j in rr){var k=rr[j],l=e.get(k);if(l)h[k]=er.sanitize(k,l)}var p=new Y(window,function(){if(f){var s=window.opener||window[wb];s.setTimeout(D(s[f],null,arguments[0]),10)}},h);p.show();return p};wc("createPhotoPicker",
function(a,b,c,d){var e=new Y(a,b,c,d);e.show();return e});wc("newPhotoPicker",function(a,b,c,d){return new Y(a,b,c,d)});wc("initPhotoPicker",function(){wc("picker",tr.apply(null,arguments))});wc("UI_receive",function(a){var b=gc("picker");if(a.type=="SHOW_SUGGEST")b.DE(a.imageUrl);else if(a.type=="CLOSE")b.close(false);else if(a.type=="CLOSE_NO_REMOVE")b.close(true)});var ur=function(){xc(Y[_P],"selectAlbum",Y[_P].gt)};ur();function _json_callback(a){var b=cr;b.Fg(false);b.Sz=true;if(b.ip==0){var c=
b.Zc;b.Bb=c.Xp(a);if(c[vb]!=null)c[vb].Yd();else b.Qg.Yd()}else if(b.ip==2){b.Bb=b.Zc.Xp(a);b.vi.No(b.Bb)}else{var d=b.Zc.Xw(a);if(b.Tb)for(var e=0;e<d[t];e++){var f=d[e];b.Tb.Ko(f)}else b.ib.YD(d);b.ib.Yd()}}function vr(){if(this[Ab]=="loaded"&&!this.d.Sz)wr(this.d)}function xr(){wr(this.d)}function wr(a){a.Fg(false);var b=a.Mq();b.bd(a.Gb("MSG_SCRIPT_LOAD_ERROR"))}Y[_P].Gb=function(a){return this.ek[a]||""};Y[_P].Yp=function(a,b){this.ip=b;this.Fg(true);var c=this.R[gb].getElementsByTagName("head").item(0),
d=this.R[gb].getElementById("mp_json_script");if(d)c.removeChild(d);var e=this.C(pr);if(e)a+="&"+e;this.Sz=false;d=this.R[gb].createElement("script");Ma(d,"text/javascript");d.id="mp_json_script";d.d=this;oa(d,vr);d.onerror=xr;d.setAttribute("src",a+"&callback=_json_callback");c.appendChild(d)};var Z=function(a,b,c,d,e,f,g,h){this.M=Fk();this.fr=false;this.Y=h||"manager";this.Yk=e;this.ro=f;this.cI=g||"NORMAL";this.je=a;this.La=b;this.nx=L(c+"/Value");this.TH=L("Groups/^Temp");this.vc=L("$Contacts").G();this.Zb=null;this.Mc=yr();P(this.Mc,zr,this.vs,false,this);P(this.Mc,Ar,this.os,false,this);P(kj(),zr,this.vs,false,this);P(kj(),Ar,this.os,false,this);P(kj(),"MAKE_VISIBLE",this.DB,false,this);var j=hj();this.sh=new Br(I(this.Y+"-group-list"),this.La,this.je);this.sh.invalidate();this.Km=
I(this.Y+"-select-group-menu");if(this.Km){this.Wf=new bm(this.Km,this.La,this.je,true,true);this.Wf.render();P(this.Km,ch,this.zy,false,this)}var k={};k.MATCH_DOMAIN=true;k[Cr]=true;k[Dr]=true;this.db=new Er(I(this.Y+"-contact-list"),this.je,k);this.db.ao("^Temp");this.Ai=I(this.Y+"-add-contacts-to");if(this.Ai){this.GF=new bm(this.Ai,this.La,this.je,false,false);this.GF.render();P(this.Ai,ch,this.Fv,false,this)}this.Ak=I(this.Y+"-remove-contacts-from");if(this.Ak){this.eH=new bm(this.Ak,this.La,
this.je,false,false);this.eH.render();P(this.Ak,ch,this.Iv,false,this)}var l=this;j.o("DELETE_GROUP",function(T){l.lw(T.groupId)});j.o("NEW_CONTACT",D(this.jB,this));j.o("NEW_GROUP",function(T){l.kB(T.groupName)});j.o("RENAME_GROUP",D(this.uC,this));j.o("DELETE_CURRENT_CONTACT",D(this.kw,this));j.o("DELETE_SELECTED_CONTACTS",D(this.nw,this));j.o("SAVE_EDIT_GROUP",D(this.YC,this));j.o("SWITCH_MINE_GROUP",D(this.VE,this));j.o("CHANGE_MINE_AUTO_ADD",D(this.rv,this));j.o("SHOW_HOME_PANEL",function(){l.ht();
l.M.vd();l.Ab()});j.o("CANCEL_CONTACT_EDIT",function(){l.Ab(false)});j.o("INITIATE_EMAIL",D(this.Dz,this));j.o("SHOW_EMAILS",D(this.zE,this));j.o("INITIATE_CHAT",D(this.Cz,this));j.o("DISABLE_WINDOW",D(this.uw,this));j.o("ENABLE_WINDOW",D(this.Iw,this));j.o("CONTACT_CHANGED",D(this.Rh,this));j.o("GROUP_CHANGED",D(this.lk,this));j.o("UPDATE_CHAT_INFORMATION",function(T){B.setTimeout(function(){l.pD(T.contactId)},0)});P(kj(),"CHAT_INFORMATION",this.vB,false,this);j.o("CONTACT_GROUPS_MENU",function(T){if(l.Wf&&
l.Wf.nq&&l.Wf.nq()){l.Wf.dispose();l.Wf=null}else l.Wf=Ol(T.attachTo)});j.o("SELECT_ALL_VISIBLE",function(){if(l.Mc.tf("view=MULTIPLE_CONTACTS")){var T=L("$Contacts/*").ba();for(var Ud=0;Ud<T.f();Ud++){var Ki=T.r(Ud);if(l.db.jc(Ki))l.M.hc(Ki,true)}l.Ab(false)}});j.o("DESELECT_ALL",function(){if(l.Mc.tf("view=VIEW_GROUP")){l.M.vd();l.Ab(false)}});var p=D(l.Ab,l);j.o("ADD_CONTACT_TO_GROUP",function(T){if(Fr(T.groupId)||T.groupId=="^New")l.M.su(T.contactId,T.groupId,p)});j.o("REMOVE_CONTACT_FROM_GROUP",
function(T){if(Fr(T.groupId)){l.M.qC(T.contactId,T.groupId,p);if(T.groupId==l.Zb)l.M.vd()}});j.o("REMOVE_SELECTED_CONTACTS_FROM_GROUP",function(T){l.M.tC(T.groupId,D(l.Ab,l));l.M.vd()});j.o("NAVIGATE",function(T){l.Mc.Ut(T)});P(kj(),"SELECT_CONTACT",function(T){var Ud=T.email;l.mD=true;l.db.cf(Ud);Fk().load(4,1,Ud);var Ki=I(l.Y+"-set-token");Yj(Ki,Ud)});j.o("SELECT_GROUP",function(T){T.row=L("$Groups/"+T.id).G();l.Xf(T)});this.OG=new uk(this.Y+"-messages");this.nc=I(this.Y+"-set-token");Gl(this.db,
this.nc,true);za(this.nc,true);Xe(this.nc[z],"disabled");if(this.gI=="TWO"){var s=I(this.Y+"-select-group-menu-pane"),C=I(this.Y+"-group-col-top"),K=I(this.Y+"-group-col-bottom");if(s&&C){r(s[w],"block");r(C[w],"none");if(K)r(K[w],"none")}}this.fu=new Gr(this.vc,this.La,this.ro,c);window.viewer=this.fu;this.SH=new Hr(this.ro+"import");P(this.db,"SELECT",this.uf,false,this);P(this.sh,"SELECT",this.Xf,false,this);P(this.db,Ir,this.Ji,false,this);P(this.fu,Jr,this.Ev,false,this);this.db.invalidate();
this.sh.invalidate();this.Av=I("manager-close");if(this.Av)P(this.Av,Q,this.Hd,false,this);this.Tm("AddToGroupAutocomplete");P(ga,bh,function(T){if(T[Db]==8&&T[y][Ob]!="INPUT"&&T[y][Ob]!="TEXTAREA"){T.preventDefault();T.stopPropagation();return false}},false);J().S(D(this.Gv,this),"$Contacts");J().S(D(this.Ur,this),"$ContactData/Loading");J().S(D(this.Ur,this),"$ContactData/PendingRequest");if(Kr)this.is();else{var H=J(),ia="$ContactData/Loaded",eb=function(){l.is();H.bi(eb,ia)};H.S(eb,ia)}},Kr,Lr,
Mr,Nr,Or,Pr,Qr,Rr;Sd(Z[_P],R[_P]);Z[_P].is=function(){var a=Ij("$ContactManager/InitialContact"),b=Ij("$ContactManager/Panel");if(a){var c=L("$Contacts/"+a).G();if(c)this.Hl({row:c,canPrevent:false})}this.Ab(false,b)};var Sr=function(){new Tj(I("manager-rename-group"),"$ContactManager/RenameGroupName");new Tj(I("manager-create-group-from"),"$ContactManager/CreateGroupName")};Z[_P].zy=function(){var a=new O,b=this.Km[v];a.row=L(this.La+"/"+b).G();this.Xf(a)};Z[_P].Xf=function(a){var b=a.row.e("id"),
c=this.yg(b);if(c){var d=I("select-all-check");if(d)va(d,false)}};Z[_P].yg=function(a,b){Vf.info("Starting group select ("+J().rm()+")");var c=false,d=b!=null?b:true;if((this.Zb!=a||this.db.uj())&&(!d||this.Mc.tf("view=VIEW_GROUP"))){this.Zb=a;this.db.Vn(a);this.sh.Mn(a);this.mp();J().Sg("$CurrentGroup","$Groups/"+a);var e=null;if(a=="^Collect")e=V("COLLECT_GROUP_DESC");else if(a=="^Freq")e=V("FREQ_GROUP_DESC");Jj("$ContactManager/CurrentGroupDescription",e);this.M.vd();this.Ab(false);this.tv();c=
true;if(this.Zb=="^All"||this.Zb=="^Collect")this.M.load(3,10000)}Vf.info("Ended group select ("+J().rm()+")");return c};Z[_P].ht=function(){var a=Lr?"^Mine":"^Freq";this.yg(a,false)};Z[_P].tv=function(){var a=I("AddToGroupAutocomplete");if(a)if(!Fr(this.Zb)){if(!a.defaulted)a.blur();za(a,true);Xe(a[z],"disabled")}else{za(a,false);Ye(a[z],"disabled")}};Z[_P].mp=function(){this.db.cf("");Xj(this.nc)};Z[_P].Fv=function(){var a=this.Ai[v];if(a){var b=new mm(this.vc,a,"ADD");b.send();ya(this.Ai,"")}};
Z[_P].Iv=function(){var a=this.Ak[v];if(a){var b=new mm(this.vc,a,"REMOVE");b.send()}ya(this.Ak,"")};Z[_P].kB=function(a){if(!this.Mc.tf({view:"VIEW_GROUP"}))return;var b=a;if(!b)b=Ul(this.vc);if(b){var c=this,d=new mm(this.vc,null,"NEW",b,function(){var e=L("$Groups/*").ba();for(var f=0;f<e.f();f++){var g=e.r(f);if(g.e("Name")==b)c.yg(g.e("id"),false)}});d.send()}};Z[_P].lw=function(a){var b=a||Ij("$CurrentGroup/id"),c=L(this.La+"/"+b+"/Name").i(),d=V("CONFIRM_DELETE_GROUP",{name:c});if(window.confirm(d)){var e=
this,f=Lr?"^Mine":"^Freq",g=new mm(this.vc,b,"DELETE",null,function(){e.yg(f,false)});g.send()}};Z[_P].uC=function(){var a=Ij("$ContactManager/RenameGroupName"),b=new mm(this.vc,this.Zb,"RENAME",a,D(this.Cy,this));b.send()};Z[_P].Dz=function(a){var b=a.groupId;a.to=b?this.qq(b,true,true).join(", "):Tr(a.to,a.name);if(a.to)Ml(a.to)};Z[_P].zE=function(a){var b=a.contactId;if(b){var c=this.M.fq(b);a.to=c.Sf().join(",")}var d=a.groupId;if(d)a.to=this.qq(d).join(",");if(kj().Da(a))ka("Will show soon")};
Z[_P].qq=function(a,b,c){var d=this.M.get(),e=[];for(var f=0;f<d.f();f++){var g=d.r(f);if(this.M.ub(g,a))if(b){var h=g.ja(),j=g.Hb();if(h)if(c)e.push(Tr(h,j));else e.push(h)}else e=e.concat(g.Sf())}return e};var Tr=function(a,b){return b?'"'+b+'" <'+a+">":a};Z[_P].Cz=function(a){if(kj().Da(a))ka("TODO: Implement chat links.")};Z[_P].uw=function(a){kj().Da(a)};Z[_P].Iw=function(a){kj().Da(a)};Z[_P].EC=function(a){var b=this.M.j(a),c=b.Sf().join(","),d=new O("REQUEST_CHAT_INFORMATION");d.contactId=
a;d.email=c;kj().Da(d)};Z[_P].sv=function(a){kj().Da(a)};Z[_P].pD=function(a){var b=this.M.j(a),c=b.Sf().join(","),d=new O("CHAT_INFORMATION");d.contactId=a;d.email=c;d.rosterState=b.e("RosterState");d.presence=b.e("Presence");this.sv(d)};Z[_P].vB=function(a){var b=a.contactId,c=a.email,d;if(b)d=this.M.j(b);else if(c){var e=this.M.rj().l();if(e.f()==1){var f=e.r(0);if(f.ja()==c)d=this.M.j(f.Ka())}}if(d){d.K("RosterState",a.rosterState);d.K("Presence",a.presence||"NONE")}};Z[_P].Rh=function(a){kj().Da(a)};
Z[_P].lk=function(a){kj().Da(a)};Z[_P].Cy=function(){J().v("$CurrentGroup")};Z[_P].jB=function(){if(!this.Mc.tf({view:"EDIT_CONTACT"}))return;this.M.vd();this.M.Ni();this.Mc.Xq({view:"EDIT_CONTACT",canPrevent:true})};Z[_P].kw=function(){var a=Ij("$CurrentContactId");this.M.jw(a,D(this.Li,this),D(this.Li,this))};Z[_P].nw=function(){this.M.mw(D(this.Li,this),D(this.Li,this))};Z[_P].Li=function(){this.Ab()};Z[_P].YC=function(){var a=Ij("$TempGroup/Name")||"";a=Hc(a);if(a[t]==0){ka("You must give a name to the group.");
return}var b=new mm(this.vc,this.Zb,"RENAME",a,D(this.Dy,this));b.send()};Z[_P].Dy=function(){Jj("$ContactManager/Panel","VIEW_GROUP")};Z[_P].Hd=function(){this.dispatchEvent(new O("DONE"))};Z[_P].uf=function(a){var b=a.canPrevent!=false;if(od&&id&&b)B.setTimeout(D(this.Hl,this,a),100);else this.Hl(a)};Z[_P].Hl=function(a){var b=a.canPrevent!=false;if(b&&!this.Mc.tf({view:"VIEW_CONTACT"}))return;Vf.info("Starting contact select ("+J().rm()+")");var c=this.M;if(a.additional)c.hc(a.row);else c.jt(a.row);
c.Uo(a.row);this.Ab(false);Vf.info("Ending contact select")};Z[_P].Ev=function(a){if(a.isNew&&Ur(Ij("$CurrentGroup/id"))){var b="^All";if(Lr){var c=a.row&&this.M.ub(a.row,"^Mine");b=c?"^Mine":"^Collect"}this.yg(b,false)}this.uf(a)};Z[_P].Ju=function(){this.mp();this.db.ai()};Z[_P].Ab=function(a,b){var c=b||this.Ep(),d=a==null?true:a;this.Mc.Xq({view:c,canPrevent:d})};Z[_P].Ep=function(){var a=this.M.rj().l(),b=a.f(),c;if(b==0)c=!Lr&&(this.Zb=="^All"||this.Zb=="^Freq")?"HOME":"VIEW_GROUP";else if(b==
1){var d=a.r(0);d.Dn();this.EC(d.Ka());this.fu.BD("$Contacts/"+d.e("id"));c="VIEW_CONTACT"}else c="MULTIPLE_CONTACTS";return c};Z[_P].vs=function(a){var b=a[vb];if(this.Ng)this.Ng.dismiss();var c=Ij("$ContactManager/Panel");if(b=="NON_EDIT_MODE")if(c=="EDIT_CONTACT")b=this.Ep();else return;if(b!=c){Jj("$ContactManager/Panel",b);Jj("$ContactManager/Today",(new Date).toLocaleDateString());var d=I("manager-group-list");if(b=="VIEW_GROUP"||b=="HOME")Ye(d,"group-list-secondary");else Xe(d,"group-list-secondary");
d=I("pagetable");if(b=="IMPORT"||b=="IMPORT_RESULTS"||b=="EXPORT"||b=="PRINT")Xe(d,"hide-contacts");else Ye(d,"hide-contacts")}sk().clear()};Z[_P].os=function(){var a=Ij("$ContactManager/Panel");if(a=="EDIT_CONTACT"){var b=V("CONFIRM_STOP_EDITING_CONTACT");return window.confirm(b)}else return true};Z[_P].Gv=function(){var a=this.M.l().f();if(a!=this.yG){this.yG=a;this.db.ai();if(this.Ng&&this.Ng.isOpen())this.Ks()}};Z[_P].Ur=function(){var a=L("$ContactData/Loading").i(),b=L("$ContactData/PendingRequest").i(),
c=new O("LOADING");c.requestLoading=a||b;if(kj().Da(c))Jj("$ContactData/ShowLoadingMessage",a)};var Yr=function(a,b){new jj("Child");Lr=false;J().V(new M(b,"Manifest"));J().Sg("$Images","$Manifest/image");var c=he("div",{id:"ContactManager"});c.setAttribute("maximize","true");c.setAttribute("class","manager-page-holder");ga[x].appendChild(c);var d=new N(ga[kb][Jb]),e=d.Fc(),f=e.get("style","NORMAL");Mr=f;Rl();Nr=e.get("sk",false);hj().o("load",D(Vr,this,e));for(var g=0;g<b[vb][t];g++){var h=b[vb][g];
pl().Gu(h)}Sr(a);var j;if(a!=null){Ak(a+"/ui/");var k=Fk();k.oE(true);k.Ft(true);k.JD(true);k.Gt(true);k.KD(true);k.PD(true);k.load();j=k;J().S(Wr,"$ContactData/Loaded")}else j=Xr();window.vman=pl();if(e.get("pop"))Mr="pop"},Zr=function(a){var b=Fk();b.Qy(a)},$r=function(a){var b={};b.ShowChatLink=true;b.ShowTitleBar=a.get("titleBar","true")!="false";b.ShowNavLinks=false;b.ShowEmailsLink=a.get("emailsLink",false);b.EnableRosterManagement=true;J().V(new M(b,"ContactManagerConfig"));var c={Panel:a.get("initialPanel",
"VIEW_GROUP")},d=a.get("initialGroup");if(d&&Fc(d))c.InitialGroup=d;var e=a.get("initialContact");if(e&&Fc(e))c.InitialContact=e;J().V(new M(c,"ContactManager"))},Wr=function(){var a=L("$UserData/Email").i();qa(ga,a&&a[t]>0?V("CONTACT_MANAGER_TITLE")+" - "+a:V("CONTACT_MANAGER_TITLE"));Lr=L("$Groups/^Mine").G()!=null;if(Or)kk();Kr=true;as()},as=function(){if(Kr&&Pr){if(Qr.nc){za(Qr.nc,false);Ye(Qr.nc[z],"disabled")}if(!Rr){var a=Ij("$ContactManager/InitialGroup");if(a)Qr.yg(a);else Qr.ht();Rr=true}Jj("$ContactManager/MineActive",
Lr);var b=Kj("$ExtraData/NavLinks",true);if(I("additional-nav-links")&&!I("additional-nav-links").innerHtml&&b){xa(I("additional-nav-links"),b.get());var c=Kj("$ExtraData/BlInfo",true);qa(I("additional-nav-links"),c.get())}kj().Da(new O("READY"))}},Vr=function(a){$r(a);var b=Pj().jd().toString(),c=I("ContactManager");Va(c[w],"hidden");pl().BC("ContactManager",c,null,{ServerBase:b,ThumbSize:64});var d=new Z("$Contacts","$Groups","$AuthToken",this.M,Pj().jd()+"/static/",Pj().jd()+"/update/",Mr);if(Mr==
"pop")P(d,"DONE",function(){window.close()});Qr=d;wc("ContactManager",d);Kk();if(!Nr)d.Xr();Pr=true;kj().Da(new O("VIEW_READY"));as()};Z[_P].Xr=function(){mk();var a=I("ContactManager");Va(a[w],"visible");Or=true};Z[_P].DB=function(){if(Pr)this.Xr();else Nr=false};var cs=function(a,b,c,d){var e=$d(a),f=$d(b),g=$d(c),h=$d(d),j=function(){bs(f,g,h)};P(e,ch,j);P(e,Q,j);P(f,ch,j);P(f,Q,j);P(g,ch,j);P(h,ch,j)},bs=function(a,b,c){za(c,a[cb]&&b[v]==""?"disabled":"")},Ur=function(a){if(a)return Bc(a,"^");
return false},Fr=function(a){return!Ur(a)||a=="^Mine"};Z[_P].Tm=function(a){if(!this.Ng){this.lu=new Hm(null,null,false);this.lu.jE(true);this.ml=new ds(D(this.Ju,this));this.ml.lE(true);this.Ng=new ym(this,this.lu,this.ml);this.ml.vl(this.Ng)}this.ml.he(I(a))};Z[_P].Wd=function(a,b,c){this.bw=a;this.KG=c;var d=this.Ks();if(a&&d[t]<10)B.setTimeout(D(this.QA,this,a),1000)};Z[_P].QA=function(a){if(a==this.bw)Fk().load(4,Hl,a)};Z[_P].Ks=function(){var a=[],b=this.bw;if(b!=""){var c=this.M.l();for(var d=
0;d<c.f();d++){var e=c.r(d);if(zl(e,b)&&!this.M.ub(e,this.Zb))a.push(e)}a.sort(function(f,g){return g.ac()-f.ac()});if(a[t]>10)pa(a,10)}this.KG(b,a);return a};Z[_P].Ji=function(){var a=this.db.uj();if(a){if(Ij("$ContactManager/SearchToken")!=a){this.M.vd();this.Ab(false);Jj("$ContactManager/SearchToken",a)}this.sh.Mn("^Results");Jj("$ContactManager/SearchActive",true);var b=this.db.Uq();Jj("$ContactManager/SearchCount",b);if(b==1&&this.mD){this.M.jt(this.db.Vq()[0]);this.Ab(false);this.mD=false}}else{this.sh.Mn(this.Zb);
Jj("$ContactManager/SearchActive",false);Jj("$ContactManager/SearchToken",null)}};Z[_P].VE=function(){var a=L("$CurrentGroup/id").i(),b=a!="^Mine"?"ADD_CONTACT_TO_GROUP":"REMOVE_CONTACT_FROM_GROUP",c=new O(b);c.contactId=L("$CurrentContact/id").i();c.groupId="^Mine";hj().fireEvent(c)};Z[_P].rv=function(){this.M.bD(null,D(this.uB,this))};Z[_P].uB=function(){var a=Ij("$UserPrefs/MineAutoAdd");Jj("$UserPrefs/MineAutoAdd",!a)};var ds=function(a){this.FF=a;Gm.call(this,",;",'"')};F(ds,Gm);ds[_P].Sb=function(a){var b=
L("$CurrentGroup/id").i();if(Fr(b)){var c=new um(this.vc,[a.e("Id")],b,"ADD",null,this.FF);c.send()}if(this.aa.sj()){ya(this.aa.sj(),"");this.aa.sj().focus()}};ds[_P].he=function(){ds.B.he.apply(this,arguments);for(var a=0;a<arguments[t];a++){var b=arguments[a];P(b,Bg,function(c){var d=c[Db];if(d==13)c.preventDefault()})}};var Nl=function(a){Jn.call(this);this.qz=he("iframe",{frameBorder:"no",scrolling:"no",style:"background-color:#FFF; position:absolute;width:1px; height:1px"});this.b.id="group-select-menu";
this.b.appendChild(this.qz);this.rt(a,null,$g);var b=L("$Groups/*").ba(),c=Fk(),d=c.rj().l(),e=[],f=[],g={},h={},j=false,k=false;for(var l=0;l<d.f();l++){var p=d.r(l);for(var s=0;s<b.f();s++){var C=b.r(s),K=Rc(C.e("Name")),H=C.e("id");if(!Ur(H))if(c.ub(p,H)){if(!g[H]){f.push(new es("&#160;&#160;"+K,"R"+H));g[H]=true}}else if(!h[H]){e.push(new es("&#160;&#160;"+K,"A"+H));h[H]=true}}var ia=c.ub(p,"^Mine");if(ia)j=true;else k=true}this.add(new es("<b>"+V("ADD_TO_GROUP_MENU_ITEM")+"</b>"));this.add(new es("&#160;&#160;"+
V("NEW_GROUP_MENU_ITEM"),"A^New"));for(var l=0;l<e[t];l++)this.add(e[l]);if(f[t]>0){this.add(new es("<b>"+V("REMOVE_FROM_GROUP_MENU_ITEM")+"</b>"));for(var l=0;l<f[t];l++)this.add(f[l])}if((j||k)&&Lr){this.add(new es("<b>"+V("MOVE_TO_GROUP_MENU_ITEM")+"</b>"));if(j){var eb=L("$Groups/^Collect/Name").i();this.add(new es("&#160;&#160;"+eb,"R^Mine"))}if(k){var T=L("$Groups/^Mine/Name").i();this.add(new es("&#160;&#160;"+T,"A^Mine"))}}P(this,Hn,this.AB,false,this)};F(Nl,Jn);Nl[_P].add=function(a){Jn[_P].add.call(this,
a);var b=Qe(this.b);b.width-=2;b.height-=2;Pe(this.qz,b)};Nl[_P].Md=function(a){var b=-2;for(var c=a;c;c=qe(c))b++;return b==-1?null:this.ya[b]};Nl[_P].AB=function(a){var b=a[lb].i();if(b){var c=b.substring(0,1),d=b.substring(1),e=new O(c=="A"?"ADD_CONTACT_TO_GROUP":"REMOVE_CONTACT_FROM_GROUP");e.contactId=L("$CurrentContact/id").i();e.groupId=d;hj().fireEvent(e)}};Nl[_P].W=function(a,b){Jn[_P].W.call(this,a,b);if(!a)B.setTimeout(D(this.dispose,this),5)};Nl[_P].jg=function(a){if(se(this.Ug,a[y]))this.ZF=
true;if(!se(this.b,a[y]))this.dispose()};Nl[_P].nq=function(){return!(!this.ZF)};var Ol=function(a){if(mc(a))a=I(a);var b=new Nl(a);b.zs();return b},es=function(a,b){Kn.call(this,"",b);this.El=ie("div");xa(this.El,a)};F(es,Kn);wc("initContactManager",Yr);wc("handleInitialContactData",Zr);xc(Z[_P],"initContactAddAutocomplete",Z[_P].Tm);wc("attachContactManagerExportForm",cs);var fs=function(){};Sd(fs[_P],R[_P]);var zr="Navigation.GO",Ar="Navigation.ALLOW",gs=null,yr=function(){if(!gs)gs=new fs;return gs};fs[_P].Xq=function(a){var b=this.up(a);return this.Ut(b)};fs[_P].tf=function(a){var b=this.up(a);Ma(b,Ar);return this.dispatchEvent(b)};fs[_P].up=function(a){var b;if(mc(a)){var c=new jg(a);b={};jf(c,function(f,g){b[g]=f})}else b=a;var d=new O;for(var e in b)d[e]=b[e];return d};fs[_P].Ut=function(a){var b=true;if(a.canPrevent!=false){Ma(a,Ar);b=this.dispatchEvent(a)}if(b){Ma(a,
zr);this.dispatchEvent(a)}return b};var $=function(a,b,c){this.$c=b;this.n=[];this.Xd={};this.gc=[];this.Dd=c||{};this.jk=this.Rf("ELEMENT_NAME","div");this.YG=this.Rf(hs,"div");this.Xe=a.appendChild(he(this.YG));this.kD=this.Rf(Dr,false);this.dG=this.Rf(is,false);this.Zr=this.Rf(Cr,false);this.TC=L(this.$c+"/*");this.Ee=false;this.Nj={};this.ur={};if(!this.Zr){this.RC=D(this.SC,this);J().S(this.RC,b)}this.MC=D(this.NC,this);J().rl(this.MC,this.$c+"/*/...");P(a,Q,this.Pd,true,this);P(a,zg,this.Qd,false,this);P(a,Ag,this.Ce,false,this);
P(a,$g,this.Lb,false,this)};Sd($[_P],R[_P]);$[_P].Rf=function(a,b){var c=this.Dd[a];return c!=null?c:b};var hs="ROOT_ELEMENT_NAME",Dr="SELECT_ON_MOUSE_DOWN",is="FIXED_HEIGHT",Cr="MANUAL_ROWSET";$[_P].render=function(){this.Ch=25;this.di(this.Xe);this.as()};$[_P].invalidate=function(){if(!this.jb){this.jb=true;B.setTimeout(D(this.av,this),5)}};$[_P].av=function(){if(this.jb){this.render();this.jb=false;this.dispatchEvent(new O(Ir))}};$[_P].Ez=function(){if(this.Hj)this.invalidate();else if(this.n[t]>
0){var a=0;for(var b=0;b<this.n[t];b++){var c=this.n[b],d=this.gc[b];if(d){var e=this.jc(c),f=d.Gn;if(e&&!f||!e&&f){this.Ee=true;this.Nj[b]=true;a++}}}if(this.Ee)if(a>100){this.Ee=false;this.invalidate()}else B.setTimeout(D(this.Ss,this),0)}};$[_P].di=function(a){me(a);this.Pi=0;if(!this.Zr){var b=this.TC.ba();pa(this.n,0);var c=b.f();for(var d=0;d<c;d++){var e=b.r(d);this.n.push(e)}this.HE()}this.Hj=true;this.pc=-1;this.Je=0;pa(this.gc,0);var f=this.n[t];for(var d=0;d<f;d++)this.Xd[this.n[d].F()]=
d;if(this.dG&&f>this.Ch){this.Ch=1;this.Fn();var g=Qe(this.Xe);this.Fn();var h=Qe(this.Xe),j=h[A]-g[A],k=f-2;Ta(this.Xe[w],h[A]+k*j);var l=Qe(this.Xe[z]);if(l)this.Ch=l[A]/j}this.Ts()};$[_P].HE=function(){};$[_P].dispose=function(){if(!this.Af){this.Af=true;var a=J();a.bi(this.MC);a.bi(this.RC)}};$[_P].Ts=function(){if(!this.Hj||this.Af){this.dispatchEvent(new O("LIST_RENDERED"));return}this.Fn();if(this.Je<this.n[t])B.setTimeout(D(this.Ts,this),this.QC);else{this.Rs(-1);Ta(this.Xe[w],"");this.Hj=
false;this.dispatchEvent(new O("LIST_RENDERED"))}};$[_P].Fn=function(){var a=this.n[t],b=0;while(this.Je<a&&b<this.Ch){this.Rs(this.Je);var c=this.n[this.Je],d=he(this.jk,{className:"row"});d.BG=this.Je;if(this.Is(c,d))b++;this.Xe.appendChild(d);this.gc.push(d);this.Je++}};$[_P].Is=function(a,b){if(b)if(this.jc(a)){r(b[w],"");b.Gn=true;this.mb(a,b);return true}else{if(b[w][Tb]!="none"){He(b,"display","none");b.Gn=false}return false}};$[_P].mb=function(){};$[_P].SC=function(a){if(a==this.$c)this.invalidate()};
$[_P].Et=function(a){this.n=a;this.invalidate()};$[_P].NC=function(a,b,c){if(this.n[t]>0){var d=this.Ee;this.Ee=true;if(b)this.Nj[b]=true;if(c)this.ur[c[0]]=true;if(!d)B.setTimeout(D(this.Ss,this),0)}};$[_P].Ss=function(){if(this.Ee){for(var a in this.ur){var b=this.Xd[a];if(b!=null){var c=this.n[b];if(c){var d=L(c.P()).G();this.n[b]=d;this.Nj[b]=true}}}for(var e in this.Nj)if(this.n[e])this.Is(this.n[e],this.gc[e]);this.as()}};$[_P].as=function(){if(this.Ee)this.dispatchEvent(new O(Ir));this.Ee=
false;this.Nj={};this.ur={}};$[_P].Ld=function(a){return a==null||a[fb]==9?-1:(Ze(a,"row")?a.BG:this.Ld(a[z]))};$[_P].On=function(a){if(a==this.pc)return;if(this.pc!=-1)Ye(this.gc[this.pc],"active");Xe(this.gc[a],"active");this.pc=a};$[_P].fw=function(a){if(!a||a==this.pc){Ye(this.gc[this.pc],"active");this.pc=-1}};$[_P].yz=function(){for(var a=this.pc+1;a<this.n[t];a++){var b=this.n[a];if(this.jc(b)){this.On(a);return}}};$[_P].gw=function(){for(var a=this.pc-1;a>0;a--){var b=this.n[a];if(this.jc(b)){this.On(a);
return}}};$[_P].Qd=function(a){var b=this.Ld(a[y]);if(b!=-1)this.On(b)};$[_P].Ce=function(a){var b=this.Ld(a[y]);if(b!=-1)this.fw(b);if(this.Se!=-1){Ye(this.gc[this.Se],"preselect");this.Se=-1}};$[_P].Pd=function(a){if(!this.kD){var b=this.Ld(a[y]),c=a.ctrlKey;if(b!=-1)this.Sb(b,c);if(this.Se!=-1){var d=this.gc[this.Se];if(d)Ye(d,"preselect");this.Se=-1}}a.stopPropagation()};$[_P].Lb=function(a){var b=this.Ld(a[y]);if(b!=-1)if(this.kD)B.setTimeout(D(this.lD,this,a[y],a.ctrlKey),10);else{Xe(this.gc[b],
"preselect");this.Se=b;Ye(this.gc[b],"active")}a.preventDefault()};$[_P].lD=function(a,b){var c=this.Ld(a),d=b;if(c!=-1)this.Sb(c,d)};$[_P].jc=function(){return true};$[_P].Sb=function(a,b){var c=this.n[a];Ye(this.gc[a],"preselect");this.dispatchEvent(new js(c,a,b))};$[_P].$n=function(a){this.ft=a};$[_P].Rs=function(a){if(!this.ft)return;while(this.ft[t]>this.Pi){var b=this.ft[this.Pi];if(b&&(a==-1||b.ly()<=a)){this.wC(b);this.Pi++}else break}};$[_P].wC=function(a){var b=a.tj(),c;c=b&&b[t]>0?he("div",
{className:"header"},je(b)):he("hr",{className:"header"});this.Xe.appendChild(c)};$[_P].Pi=0;$[_P].Je=0;$[_P].Hj=false;$[_P].Ch=25;$[_P].QC=20;$[_P].jb=false;$[_P].Se=-1;var js=function(a,b,c){O.call(this,"SELECT");this.row=a;this.index=b;this.additional=c};F(js,O);var Ir="LIST_CHANGED",ks=function(a,b){this.ZE=a;this.Ot=b};ks[_P].tj=function(){return this.ZE};ks[_P].ly=function(){return this.Ot};var ps=function(a,b,c,d,e,f,g,h){if(!ls)ls=If("goog.focus.ContactPicker");this.fr=false;this.Y=g||"picker";this.Yk=e;this.ro=f;this.je=a;this.La=b;this.nx=L(c+"/Value");this.qb=L(this.je+"/*");this.hI=L("Groups/^Temp");this.vc=d;var j=J();j.S(D(this.vj,this),this.La);j.S(D(this.xy,this),this.je);j.S(D(this.yy,this),"$ContactPicker/CurrentGroup");j.S(D(this.Tr,this),"$ContactData/PendingLongRequest");j.S(D(this.Tr,this),"$ContactData/Loading");this.uH=I(this.Y+"-src");this.mo=I(this.Y+"-target");this.si=
I(this.Y+"-target-holder");this.cb=I(this.Y+"-add-contact");this.ME=I(this.Y+"-spinner");this.fH=I(this.Y+"-req-spinner");this.cc=I(this.Y+"-group-chooser");if(this.cb){r(this.cb[w],"none");this.Ho=false;this.gs=false;P(this.si,zg,function(){this.gs=true;this.$k()},true,this);P(this.si,Ag,function(){this.gs=false;this.$k()},true,this);P(this.si,Q,function(){this.lx()},false,this);P(this.cb,"focus",function(){this.Ho=true;this.$k()},false,this);P(this.cb,"blur",function(){this.Ho=false;r(this.cb[w],
"none");this.$k()},false,this);var k=new fk(this.cb);P(k,"ENTER",this.oo,true,this)}this.yH=h?h:(Ze(this.mo,"picture-list")?"PICTURE":"TO_LIST");var l={};l[Cr]=true;this.Xb=new ms(this.uH,a,l,"NONE",this.Yk);this.Xb.MD(true);this.Xb.ao("^Temp");if(this.mo){if(this.yH=="TO_LIST"){l={};l.ELEMENT_NAME="span";l[hs]="span";l[Cr]=false;l[is]=false;this.ti=new ns(this.mo,"$SelectedContacts",l);this.ti.mb=function(s,C){var K=s.jh();K=Rc(K);K=K+", ";xa(C,K)}}else this.ti=new ms(this.mo,a,os,this.Yk);this.ti.ao("^Temp");
this.ti.Vn("^Temp")}this.Dw=I(this.Y+"-done");this.mv=I(this.Y+"-cancel");this.CA=I(this.Y+"-manage");this.ZC=I(this.Y+"-save-group");if(this.Dw)P(this.Dw,Q,this.Hd,false,this);if(this.mv)P(this.mv,Q,this.ov,false,this);if(this.CA)P(this.CA,Q,this.DA,false,this);if(this.ZC)P(this.ZC,Q,this.$C,false,this);this.OG=new uk(this.Y+"-messages");P(this.Xb,"SELECT",this.uf,false,this);P(this.ti,"SELECT",this.uf,false,this);P(this.Xb,Ir,this.Ji,false,this);P(B,"unload",this.gF,false,this);this.nc=I(this.Y+
"-token");this.Ru(this.nc);this.nb={};var p=new M(this.nb,"ContactPicker");j.V(p,true);Jj("$ContactPicker/CurrentGroup","^Freq");this.Ay=I(this.Y+"-group-name");if(this.Ay)Rj(this.Ay,"optional: name this group");this.qu=I(this.Y+"-add-all");this.Yi(this.qu,this.Go,false);this.oC=I(this.Y+"-remove-all");this.Yi(this.oC,this.Ms,false)},ls;Sd(ps[_P],R[_P]);ps[_P].gF=function(){Yg()};ps[_P].Po=function(){return this.qb.ba()};ps[_P].uf=function(a){Fk().hc(a.row);this.Ci()};ps[_P].Ci=function(){var a=Fk().rj().l().f();
J().v("$SelectedContacts");var b=I(this.Y+"-target-title");if(b)xa(b,this.zj("^Temp"));this.Yi(this.oC,this.Ms,a>0)};ps[_P].Ji=function(){this.gC();var a=L("$ContactPicker/CurrentGroup").i();if(this.Xb.uj()){if(a!="^Results"){this.Hr=a;Jj("$ContactPicker/CurrentGroup","^Results")}this.nF()}else if(a=="^Results"&&this.Hr){for(var b=0;this.cc[Bb][b];++b){var c=this.cc[Bb][b];if(c[v]==this.Hr){ta(this.cc,c[ab]);break}}Jj("$ContactPicker/CurrentGroup",this.Hr)}};ps[_P].nF=function(){if(this.We){var a=
Ij("$ContactPicker/VisibleContactCount");ua(this.We,V("SEARCH_RESULT_COUNT",{count:a}))}};ps[_P].Ru=function(a){if(!a)return;this.nc=a;Il(100);var b=Gl(this.Xb,a,true);b.XD(500)};ps[_P].By=function(a){return a=="^Temp"?V("MSG_PICKER_TO")+" ":L(this.La+"/"+a+"/Name").i()};ps[_P].zj=function(a){var b=Al(this.Po(),a),c=b?" ("+b+")":"";return this.By(a)+c};ps[_P].yy=function(){var a=L("$ContactPicker/CurrentGroup").i();if(a=="^Results"){if(!this.We){this.We=new Option("","^Results",false,false);var b=
this.cc[Bb][t];this.cc[Bb][b]=this.We;ta(this.cc,this.We[ab])}}else{if(this.We){this.cc.remove(this.We[ab]);this.We=null}if(a=="^All"||a=="^Collect")Fk().load(3,10000);this.Xb.Vn(a);if(this.Xb.uj()){this.Xb.cf("");Xj(this.nc)}var c=I(this.Y+"-src-title");if(c)xa(c,this.zj(a))}};ps[_P].xy=function(){ls.info("Got contacts");if(this.xz)return;this.xz=true;if(!this.fr){this.fr=true;ls.info("Got contacts");Jj("$ContactPicker/CurrentGroup","^Freq");this.Xb.invalidate();this.ti.invalidate()}this.xz=false;
var a=I(this.Y+"-target-title");if(a)xa(a,this.zj("^Temp"));if(!this.XF){var b=V("MSG_PICKER_SEARCH");if(Fk().FE()){var c=L("$UserData/AspDomainTitle").i();b=V("MSG_PICKER_SEARCH_PLUS_DOMAIN",{domain:c})}Rj(this.nc,b);this.XF=true}this.Xb.ai()};ps[_P].vj=function(){ls.info("Got groups");if(this.cc){var a=Kj(this.La),b=L("$ContactPicker/CurrentGroup").i(),c=this.cc[Bb][t]==0;for(var d=0;d<a.l().f();d++){var e=a.l().r(d),f=e.e("id"),g=ie("option");ya(g,f);ua(g,this.zj(f));this.cc[Bb][d]=g;if(b==f)g.selected=
true}if(c)P(this.cc,ch,this.Xf,false,this)}};ps[_P].Xf=function(){var a=L("$ContactPicker/CurrentGroup").i(),b=this.cc[v];if(a!=b)Jj("$ContactPicker/CurrentGroup",b)};ps[_P].Tr=function(){var a=L("$ContactData/PendingLongRequest").i()||L("$ContactData/Loading").i();Se(this.fH,a)};ps[_P].gC=function(){var a=this.Xb.Uq();Jj("$ContactPicker/VisibleContactCount",a);this.Yi(this.qu,this.Go,a>0&&a<250)};ps[_P].Go=function(a){var b=this.Po(),c=b.f(),d=this.Xb;for(var e=0;e<c;e++){var f=b.r(e);if(d.jc(f))Fk().hc(f,
true)}this.Ci();if(a)a.preventDefault()};ps[_P].Ms=function(a){Fk().vd();this.Ci();if(a)a.preventDefault()};ps[_P].lx=function(){if(this.cb){r(this.cb[w],"");this.cb.focus()}};ps[_P].$k=function(){if(this.si)if(this.Ho||this.gs)Xe(this.si,"focused");else Ye(this.si,"focused")};ps[_P].oo=function(){var a=this.cb[v],b=false;if(!Cl(a))ka(V("ERROR_INVALID_EMAIL"));else{var c={Emails:[{Address:a}]},d=new M(c),e=Fk();d=e.Rc(d);e.hc(d);this.Ci();ya(this.cb,"");b=true}r(this.cb[w],"");this.cb.focus();return b};
ps[_P].Hd=function(){if(this.cb[v]){var a=this.oo();if(!a)return}this.dispatchEvent(new O("DONE"))};ps[_P].ov=function(){this.dispatchEvent(new O("CANCEL"))};ps[_P].DA=function(){this.dispatchEvent(new O("MANAGE"))};ps[_P].$C=function(){if(this.cb[v]){var a=this.oo();if(!a)return}var b=Ul(Fk());if(b!=null){r(this.ME[w],"block");var c=new mm(Fk(),null,"NEW",b,D(this.bt,this),D(this.bt,this));c.send()}};ps[_P].bt=function(){r(this.ME[w],"none")};var qs=function(a){new Tj(I("picker-save-group"),"$SelectedContactCount>0");
new Tj(I("picker-manage"));new Tj(I("picker-cancel"));new Tj(I("picker-done"));new Sj(I("picker-token"),a+"/static/images/SearchIcon.png"," ")},ss=function(a){qa(ga,V("CONTACT_PICKER_TITLE"));new jj("Child");var b=new N(ga[kb][Jb]),c=b.Fc(),d=c.get("inputId"),e=c.get("format","FULL"),f=c.get("done"),g=c.get("dm")=="goog";if(g)ga.domain="google.com";qs(a);Rl();var h;if(a!=null){var j=Fk();j.Ft(true);j.ID("PICKER");j.Gt(true);j.Hw(true);var k=G?100:300;j.Pk(k);j.aE(["Emails"]);j.load();h=j}else h=Xr();
var l=new ps("$Contacts","$Groups","$AuthToken",h,a+"/static/",a+"/update/");P(window,dh,rs);rs();if(d){var p=window.opener||window[wb],s=l.zq(p,d);if(!s&&d=="to_compose")if(d=="to_compose")s=l.zq(p,"../main/v2/to_compose");if(s)h.$h(s[v]);else ls.info("Could not find input element "+d);P(l,"DONE",function(){if(s)ya(s,h.fh("^Temp",e));if(f)p.setTimeout(p[f],10);else window.close()});P(l,"CANCEL",function(){if(f)p.setTimeout(p[f],10);else window.close()})}};ps[_P].zq=function(a,b){var c=b.split("/"),
d=0;for(;d<c[t]-1&&a;++d)a=c[d]==".."?a[wb]:a[Zb][c[d]];if(!a)return null;var e=new Vd(a[gb]);return e.Fo(c[d])};ps[_P].Yi=function(a,b,c){if(a){var d=!Ze(a,"disabled");if(c!=d)if(c){Ye(a,"disabled");P(a,Q,b,false,this)}else{Xe(a,"disabled");Yg(a,Q)}}};window.initContactPicker=ss;var ns=function(a,b,c){var d=c||{};if(d[is]==null)d[is]=true;if(d[Cr]==null)d[Cr]=true;$.call(this,a,b,d);this.JG=this.Rf("MATCH_DOMAIN",false)};F(ns,$);ns[_P].dc="^All";ns[_P].Ua="";ns[_P].Mm=false;ns[_P].Vn=function(a){if(this.dc!=a){this.dc=a;this.ai()}};ns[_P].ai=function(){var a=[],b=this.TC.ba(),c=false;if(this.cl)c=L("$Groups/^Mine").G()!=null;if(c){var d=[],e=[];for(var f=0;f<b.f();f++){var g=b.r(f);if(this.jc(g))if(g.Gh("^Mine"))d.push(g);else e.push(g)}d.sort(qm);e.sort(qm);var h=[];if(d[t])h.push(new ks(V("MINE_SEARCH_RESULTS",
{count:d[t]}),0));if(e[t])h.push(new ks(V("COLLECT_SEARCH_RESULTS",{count:e[t]}),d[t]));Ed(d,e);this.$n(h);this.Et(d)}else{var a=[];for(var f=0;f<b.f();f++){var g=b.r(f);if(this.jc(g))a.push(g)}if(this.cl)a.sort(qm);this.$n(null);this.Et(a)}};ns[_P].Hh=function(a){if(!this.zg)return false;if(this.zg=="^All")return true;else if(this.zg=="^Collect"){var b=L("Groups/^Mine/id"),c=b.i(a);return!c}else{var b=L("Groups/"+this.zg+"/id"),c=b.i(a);return!(!c)}};ns[_P].ao=function(a){if(this.zg!=a){this.zg=
a;this.render()}};ns[_P].cf=function(a){if(this.Ua!=a){this.Ua=a;this.cl=this.Ua!=""?this.Ua.split(/\s+/):null;this.ai()}};ns[_P].uj=function(){return this.Ua};ns[_P].Uq=function(){return this.Vq()[t]};ns[_P].Vq=function(){if(this.Zr)return this.n;else{var a=[];for(var b=0;b<this.n[t];b++)if(this.jc(this.n[b]))a.push(this.n[b]);return a}};ns[_P].MD=function(a){if(this.Mm!=a){this.Mm=a;this.Ez()}};ns[_P].jc=function(a){if(this.Mm&&!a.ja())return false;if(this.cl){for(var b=0;this.cl[b];++b)if(!zl(a,
this.cl[b],this.JG))return false;return true}if(this.dc=="^All")return!a.e("DomainContact");else if(this.dc=="^Collect")return!a.e("DomainContact")&&!a.Gh("^Mine");return a.Gh(this.dc)};ns[_P].mb=function(a,b){var c=a.Hb(),d=a.ja()||"",e=c?c+" <"+d+">":d;xa(b,Rc(e))};var ms=function(a,b,c,d,e){ns.call(this,a,b,c);this.ou=d!=null?d:os;this.Yk=e};F(ms,ns);ms[_P].Hs=32;var os="ACTION_SELECT_TOGGLE";ms[_P].vz='<div class="picture-div"><img src="{$Thumb}" style="height: {$PictureSize}px; display: none; max-width: {$PictureSize}px;" onload="fixImage(this)" class="picture"/></div>';
ms[_P].vF='<div class="text"><div class="line1">{$Line1}</div><div class="line2">{$Line2}</div></div>';ms[_P].nu='<div class="action">{$Action}</div>';ms[_P].mb=function(a,b){var c=a.Hb(),d=a.ja()||"",e=a.py(),f=a.e("Photo");if(f)e=Pj().jd()+"/photos/private/"+f+"?sz="+this.Hs;if(this.Hh(a))Xe(b,"selected");else Ye(b,"selected");var g='<div style="float:left; width: 19px; height: 20px; padding-top: 3px;">';if(this.Hh(a))g+='<img src="'+this.Yk+'images/CheckMark.gif"/>';g+="</div>";var h="",j;if(e&&
a.Gh("^Freq")){j="P"+sc(this);h=this.vz.replace(/\{\$Thumb\}/g,e).replace(/\{\$PictureSize\}/g,i(this.Hs))}var k=c||d,l=c?d:"",p=this.vF.replace(/\{\$Line1\}/g,Rc(k)).replace(/\{\$Line2\}/g,Rc(l)),s="",C=null;if(this.ou=="SELECT")C="&gt;";else if(this.ou==os)C=this.Hh(a)?"X":"&gt;";if(C)s=this.nu.replace(/\{\$Action\}/g,C);if(a.e("DomainContact"))Xe(b,"domainContact");xa(b,s+h+g+p)};var Er=function(a,b,c){ns.call(this,a,b,c)};F(Er,ns);Er[_P].PC='<div class="check"><input type="checkbox" id="CCL{$Index}" {$Checked}/></div><div class="text" title="{$Hover}"> {$Line}</div>';
Er[_P].mb=function(a,b){if(this.Hh(a))Xe(b,"selected");else Ye(b,"selected");var c=a.ja(),d=Rc(a.jh()),e=this.Hh(a)?' checked="checked"':"",f=this.Ld(b),g=Rc(c||"");xa(b,this.PC.replace(/\{\$Line\}/g,d).replace(/\{\$Checked\}/g,e).replace(/\{\$Index\}/g,f).replace(/\{\$Hover\}/g,g))};Er[_P].Lb=function(a){var b=Ne(a.currentTarget);if(a[$b]<=b.x+21){var c=this.Ld(a[y]);this.Sb(c,true)}else ns[_P].Lb.call(this,a)};var Br=function(a,b,c){var d={};d[Dr]=true;d[is]=true;$.call(this,a,b,d);this.UF=c+"/*";this.Hv=L(this.UF);J().S(D(this.invalidate,this),c)};F(Br,$);Br[_P].mb=function(a,b){var c=a.e("Name"),d=a.e("id"),e=a.e("Count");xa(b,'<div class="count">'+e+'</div><div class="text">'+Rc(c)+"</div>");if(d==this.zg)Xe(b,"selected")};Br[_P].Mn=function(a){this.zg=a;this.invalidate()};Br[_P].invalidate=function(){if(this.n[t]!=0){var a=[],b=0;if(this.n[t]>=3&&this.n[0].e("id")=="^Mine"&&this.n[1].e("id")=="^Collect"){a.push(new ks("",
2));b=2}var c=Bc(this.n[b].e("id"),"^");for(var d=b+1;d<this.n[t];d++){var e=this.n[d].e("id"),f=Bc(e,"^");if(c!=f){a.push(new ks("",d));c=!c}}this.$n(a)}Br.B.invalidate.apply(this)};var Yl=function(a){xl.info("Adding group data");var b=a.f();for(var c=0;c<b;c++){var d=a.r(c),e=d.j("Groups"),f=d.e("Name");if(!e.get())e.set([]);if(f&&f.toLowerCase().indexOf("er")!=-1)e.j("ER").set("ER");if(f&&f.toLowerCase().indexOf("z")!=-1)e.j("Z").set("Z");if(c<23)e.j("^Freq").set("^Freq")}xl.info("Done adding group data")},Xl=function(){var a=[{id:"^All",Name:"All Contacts"},{id:"^Freq",Name:"Most Contacted"},{id:"ER",Name:"'ER' Dudes"},{id:"Z",Name:"Z Other Group"}];return new M(a,"Groups")},
rs=function(){var a=ee();if(id)if(a[u]>window.outerWidth)q(a,window.outerWidth);var b=a[u]-12,c=a[A]-10;if(G){b-=11;c+=4}var d=I("main");if(d)Pe(d,b,c);var e=I("picker-src"),f=I("picker-target")[z];Pe(e,1,160);Pe(f,1,40);var g=Qe(e[z][z]),h=Qe(f[z][z]);g.width+=7;Pe(e,g);var j=Qe(e[z][z]);q(h,j[u]-16);h.height-=10;Pe(f,h)},Xr=function(){var a=new N(ga[kb][Jb]),b=a.Fc(),c=b.get("Prod",false),d=c?"contacts":"ccontacts",e=window.contactServer+d+"/",f=b.get("Thumbs",true),g=b.get("Groups",false);return Zl(e,
f,g)};var Gr=function(){this.EH={};J().V(new M(this.EH,"ContactViewer"));J().V(new M(-1,"$CurrentContactId"));this.XE=L("$TempContact");Jj("$ContactViewer/ShowAddContactToGroupMenu",false);var a=hj();a.o("SAVE_EDIT_CONTACT",D(this.Yy,this));a.o("DELETE_PHOTO",D(this.My,this))};Sd(Gr[_P],R[_P]);var Jr="ContactViewer.CONTACT_SAVED";Gr[_P].BD=function(a){if(a!=this.$c){this.$c=a;this.cm=L(this.$c);var b=this.cm.G();b.K("ShortName",$l(b));Jj("$ContactViewer/ShowAddContactToGroupMenu",false);Jj("$CurrentContactId",
this.cm.G().e("Id"));J().Sg("$CurrentContact",a);window.imageChanged=D(this.rz,this)}Fk().Ni(a)};Gr[_P].Yy=function(){var a=this.XE.G(),b=!a.e("Id");Fk().XC(a,D(this.WC,this,b))};Gr[_P].My=function(){Fk().Cp(this.XE.G().e("Id"))};Gr[_P].WC=function(a,b){var c=new O(Jr);c.row=b;c.canPrevent=false;c.isNew=a;this.dispatchEvent(c)};Gr[_P].rz=function(){ka("This would change the picture")};var Hr=function(a){this.nG=a;this.vc=Fk();var b=hj();b.o("IMPORT_SHOW",D(this.xE,this));b.o("IMPORT_UPLOAD_FILE",D(this.Py,this))};Hr[_P].Py=function(){var a=new X;P(a,th,D(this.wz,this,a));a.nt(I("import-form"),this.nG);r(I("ImportBase")[w],"none");r(I("ImportProgress")[w],"block")};Hr[_P].wz=function(a){var b;if(a.Kc())try{b=lh(a.Ta())}catch(c){b={status:"UPLOAD_FAILED"}}else b={status:"UPLOAD_FAILED"};var d=new cg(b,"$ImportResults");J().V(d);B.setTimeout(function(){Fk().load(2)},100);r(I("ImportBase")[w],
"block");r(I("ImportProgress")[w],"none");Jj("$ContactManager/Panel","IMPORT_RESULTS")};Hr[_P].xE=function(a){var b=I(a.id);He(b,"display","block")};var ts=function(a,b,c){this.Jz=c;this.hG=L(a+"/ForwardingPhones/*");this.ox=L(b+"/ForwardingPhones/*");if(this.Jz){this.lm=L(a+"/Response");this.gG=L(a+"/Mode");this.hp=I("call_action_forward");this.hv=I("call_action_no_forward");this.QF=I("response_name");this.WA={DEFAULT:"settings_default",GROUP:"settings_group",CUSTOM:"settings_custom"};var d=this.lm.i();va(this.hp,d=="DEFAULT");va(this.hv,d!="DEFAULT");this.Pl(d!="DEFAULT");this.$b();this.fs();J().S(D(this.fs,this),a+"/Mode");P(this.hp,Q,D(this.gp,
this),false,this);P(this.hv,Q,D(this.gp,this),false,this)}else this.$b()};ts[_P].gp=function(){var a=this.hp[cb];if(a){Jj(this.lm.Oa,"DEFAULT");this.Pl(false)}else{Jj(this.lm.Oa,"VOICEMAIL");this.Pl(true)}};ts[_P].fs=function(){var a=this.gG.i();for(var b in this.WA){var c=this.WA[b],d=I(c);if(d!=null)Se(d,a==b)}};ts[_P].$b=function(){var a=this.ox.ba(),b=this.hG.ba(),c=false;if(this.Jz){var d=this.lm.i();c=d!="DEFAULT"}this.LB(c,a.f(),b)};ts[_P].Pl=function(a){var b=this.ox.ba().f();for(var c=0;c<
b;c++){var d=$d("ForwardingCheckbox-["+c+"]");za(d,a)}za(this.QF,!a)};ts[_P].LB=function(a,b,c){for(var d=0;d<b;d++){var e=$d("ForwardingCheckbox-["+d+"]");za(e,a);var f=e[v];va(e,false);for(var g=0;g<c.f();g++){var h=c.r(g).get();if(f==h)va(e,true)}}};var us=function(a,b){this.oH=L(a+"/ForwardingPhones/*");this.aH=L(b+"/ForwardingPhones/*");J().S(D(this.Ls,this),a+"/ForwardingPhones");this.Ls()};us[_P].Ls=function(){var a=this.oH.ba(),b=this.aH.ba();for(var c=0;c<b.f();c++){var d=$d("ForwardingDisplay-["+
c+"]"),e=b.r(c).e("Number"),f=false;for(var g=0;g<a.f();g++){var h=a.r(g).get();if(e==h)f=true}if(d!=null)Se(d,f)}};var vs=function(a,b){var c=L(a),d={GreetingId:"0",RingshareId:"0",ForwardingPhones:[]};if(b!=null)for(var e=0;e<b.ForwardingPhones.f();e++){var f=b.ForwardingPhones.r(e).get();d.ForwardingPhones.push(f)}c.hb().G().K("CallSettings",d)};Vj("goog.focus.GrandCentralBinder",ts,"GrandCentralBinder");Vj("goog.focus.GrandCentralPhoneDisplay",us,"GrandCentralPhoneDisplay");Vj("goog.focus.GrandCentralPhoneDisplay.setGroupCallSettings",
vs,"setGroupCallSettings");
