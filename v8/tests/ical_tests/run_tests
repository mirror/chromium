#!/bin/bash

if [ $# -ne 1 ]; then
  echo "Usage: `basename $0` <runtime>"
  echo "Test <runtime>; show results on standard output."
  exit 1
fi

if [ -f "`dirname $1`/$1" ]; then
    JSVM="`dirname $1`/$1"
elif [ -f "`which $1`" ]; then
    JSVM="`which $1`"
else
    echo "Error: Cannot find runtime '$1'."
    exit 1
fi

echo "---------------------------------------------------------"
echo "Test: overlap_unittest.js"
$JSVM common.js debug.js jsUnitCore.js ical.js shapes.js overlap.js overlap_unittest.js test_loop.js
echo

echo "---------------------------------------------------------"
echo "Test: ical_unittest.js"
$JSVM common.js debug.js jsUnitCore.js ical.js ical_unittest.js test_loop.js
echo

echo "---------------------------------------------------------"
echo "Test: rrule_unittest.js"
# depends on '1 || 2' not returning boolean - rhino is not implementing this correctly
$JSVM common.js debug.js jsUnitCore.js ical.js timeutils.js messages__en.js textEnglish.js rrule.js rrule_unittest.js test_loop.js
echo

echo "---------------------------------------------------------"
echo "Test: recuriter_unittest.js"
# doesn't work in rhino.  unknown
$JSVM common.js debug.js jsUnitCore.js ical.js messages__en.js textEnglish.js rrule.js recuriter.js recuriter_unittest.js test_loop.js
echo

echo "---------------------------------------------------------"
echo "done"
echo
