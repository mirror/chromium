{
  "comments": [
    {
      "key": {
        "uuid": "56056e78_df2fca86",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-07-21T15:37:59Z",
      "side": 1,
      "message": "Is any chance that can happen?\nIf not it should be DCHECK().",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8da0d43b_6748690f",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1145089
      },
      "writtenOn": "2017-07-21T17:03:15Z",
      "side": 1,
      "message": "It may go through a call sequence of |Start| -\u003e |Stop| -\u003e |OnResults| with empty results.\nIn such case we don\u0027t want to record the query.\nWDYT?",
      "parentUuid": "56056e78_df2fca86",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da995d9f_53557ea0",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-07-21T17:05:43Z",
      "side": 1,
      "message": "That looks not very correct. Because below you record other metrics. at L71,74,77.\n\nYou should handle Stop case and don\u0027t update any metrics to avoid UMA confusion.",
      "parentUuid": "8da0d43b_6748690f",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4825387d_be21642a",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1145089
      },
      "writtenOn": "2017-07-21T17:14:15Z",
      "side": 1,
      "message": "Oh yes I agree.\nI\u0027ll pack all UMA in that check.",
      "parentUuid": "da995d9f_53557ea0",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b98683a_129a3a14",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-07-21T17:19:50Z",
      "side": 1,
      "message": "Thanks for doing this. One small request. query_start_time_ does not mean request stopped. Please reserve some bool request_stopped_ \u003d true.\nReset it at Start and set at Stop.\nIn this case you should analyze request_stopped_ and you need DCHECK(!query_start_time_.is_null()) before sending it to UMA.\n\nOne more Q. Did you test re-enter of queries? I mean what happens if next request comes before previous finishes. We have to handle this case correctly too.\nFrom this perspective you should also have check DCHECK(request_stopped_) on entry to Start",
      "parentUuid": "4825387d_be21642a",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf250d0e_7f701a04",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1145089
      },
      "writtenOn": "2017-07-21T17:45:48Z",
      "side": 1,
      "message": "Oh maintaining a bool request_stopped_ makes more sense to control this.\n\nAs for the re-enter queries question, we\u0027re already sure about something:\n- Each time there\u0027s a new query, |Stop| will always be called before |Start|.\n- When |Start| goes to the Android side, it cancels the previous request, and the previous request will return only empty list.\n\nBut something unsure to us is whether empty result list in |OnResuls| comes from a canceled request or a request that returns nothing.\n\nSo I think we should skip empty results for UMA. Do you think so?",
      "parentUuid": "4b98683a_129a3a14",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd415f01_18bdaea5",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-07-21T17:52:53Z",
      "side": 1,
      "message": "\u003e\u003e So I think we should skip empty results for UMA. Do you think so?\nI think this bit hacky :(.\n\n\u003e\u003e When |Start| goes to the Android side, it cancels the previous request, and the previous request will return only empty list.\nIn this case we have to distinguish canceled requests and normal requests that return 0 results.\nCould you please add a flag to the result of the query that indicates if result was canceled?\n\nSorry for asking this extra step but we have to maintain UMA as clean as possible.",
      "parentUuid": "cf250d0e_7f701a04",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cd75ae3_35840a26",
        "filename": "chrome/browser/ui/app_list/search/arc/arc_playstore_search_provider.cc",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1145089
      },
      "writtenOn": "2017-07-21T23:11:37Z",
      "side": 1,
      "message": "I\u0027ll put a flag in the callback method indicating a request canceled or not.",
      "parentUuid": "cd415f01_18bdaea5",
      "range": {
        "startLine": 65,
        "startChar": 7,
        "endLine": 65,
        "endChar": 24
      },
      "revId": "be138e7e0d1d4c7638741e4a2597a9576832ca76",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}