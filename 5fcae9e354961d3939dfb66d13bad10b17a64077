{
  "comments": [
    {
      "key": {
        "uuid": "5de56cdc_100dcbc0",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_home_view_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 1118,
      "author": {
        "id": 1181484
      },
      "writtenOn": "2017-09-12T00:43:34Z",
      "side": 1,
      "message": "Move this to #pragma private? This is not part of navigation bar callbacks.",
      "range": {
        "startLine": 1107,
        "startChar": 0,
        "endLine": 1118,
        "endChar": 1
      },
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96ca82d7_48e464b7",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_home_view_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 1118,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-12T07:42:03Z",
      "side": 1,
      "message": "This function is in #pragma private when you reveal the common lines above. ;)",
      "parentUuid": "5de56cdc_100dcbc0",
      "range": {
        "startLine": 1107,
        "startChar": 0,
        "endLine": 1118,
        "endChar": 1
      },
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b6d222a9_79b4a46f",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-11T06:49:14Z",
      "side": 1,
      "message": "I am struggling if merging the 2 dismissal functions below..\nWhat do you think? thx.",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "133143c9_c09907bd",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2017-09-11T09:17:50Z",
      "side": 1,
      "message": "Can\u0027t you change those method to the following:\n\n  - (void)bookmarkHomeViewControllerWantsDismissal:\n              (BookmarkHomeViewController*)controller\n                                   navigationToUrl:(const GURL\u0026)url {\n    std::vector\u003cGURL\u003e urls \u003d { url };\n    [self bookmarkHomeViewControllerWantsDismissal:controller\n                                  navigationToUrls:urls];\n  }\n\n  - (void)bookmarkHomeViewControllerWantsDismissal:\n              (BookmarkHomeViewController*)controller\n                                  navigationToUrls:(const std::vector\u003cGURL\u003e\u0026)urls {\n    [self dismissBookmarkBrowserAnimated:YES];\n\n    if (urls.empty())\n      return;\n\n    BOOL openInCurrentTab \u003d YES;\n    for (const GURL\u0026 url : urls) {\n      if (url \u003d\u003d GURL())\n        continue;\n\n      if (openInCurrentTab) {\n         // Open all following URLs in new tabs.\n         openInCurrentTab \u003d NO;\n\n         new_tab_page_uma::RecordAction(_browserState,\n                                        new_tab_page_uma::ACTION_OPENED_BOOKMARK);\n         base::RecordAction(\n             base::UserMetricsAction(\"MobileBookmarkManagerEntryOpened\"));\n\n         if (url.SchemeIs(url::kJavaScriptScheme)) {  // bookmarklet\n           NSString* jsToEval \u003d [base::SysUTF8ToNSString(url.GetContent())\n               stringByRemovingPercentEncoding];\n\n           [_loader loadJavaScriptFromLocationBar:jsToEval];\n         } else {\n           [_loader loadURL:url\n                   referrer:web::Referrer()\n                 transition:ui::PAGE_TRANSITION_AUTO_BOOKMARK\n          rendererInitiated:NO];\n         }\n        }\n      } else {\n        [_loader webPageOrderedOpen:url\n                           referrer:web::Referrer()\n                       inBackground:YES\n                           appendTo:kLastTab];\n      }\n    }\n  }\n\nIf you need to have different metrics, you can just add an helper method that takes a block used to record the metrics (or a base::Closure).",
      "parentUuid": "b6d222a9_79b4a46f",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80b1ce29_33938d95",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-12T07:42:03Z",
      "side": 1,
      "message": "Thanks for the tip.\nDone. and added a TODO to see if we need different metrics later.",
      "parentUuid": "133143c9_c09907bd",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "38ca8e79_8f172b2d",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 254,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2017-09-11T09:17:50Z",
      "side": 1,
      "message": "I find this test strange. Shouldn\u0027t this check that the url is valid instead of checking whether it is empty? AFAICT, bookmark does not let you invalid URLs, which includes empty URLs, so I think this should be:\n\n  if (!url.is_invalid()) {",
      "range": {
        "startLine": 254,
        "startChar": 6,
        "endLine": 254,
        "endChar": 19
      },
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b8317efe_519e8206",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 254,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-12T07:42:03Z",
      "side": 1,
      "message": "Thanks, I will use is_valid() checking here.\n\n- I verified that it is impossible to make the url an empty string in iOS, desktop and android versions.\n- is_valid() can block empty url as well.",
      "parentUuid": "38ca8e79_8f172b2d",
      "range": {
        "startLine": 254,
        "startChar": 6,
        "endLine": 254,
        "endChar": 19
      },
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8a373a52_812d2a2a",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-11T06:49:14Z",
      "side": 1,
      "message": "Not sure if I need to dispatch_async for opening the following urls.\nWhat do you think?  Do we need to ask the French team for advice?",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ace43801_a414e06c",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 1181484
      },
      "writtenOn": "2017-09-12T00:43:34Z",
      "side": 1,
      "message": "Why do you think we need to dispatch_async? Does it not work right without it?",
      "parentUuid": "8a373a52_812d2a2a",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df19c657_a3f8127c",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_interaction_controller.mm",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-12T07:42:03Z",
      "side": 1,
      "message": "It works well without dispatch_async.\nBut I am just thinking the case when user is trying to open many urls at the same time, the response time may be slow and dispatch_async might improve that.\nHowever, it is a corner case so may be we can decide that later.",
      "parentUuid": "ace43801_a414e06c",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "490d6269_0a34f864",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_table_view.mm",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-11T06:49:14Z",
      "side": 1,
      "message": "The _editNodesOrdered thing is copied from bookmark_home_view_controller.\nRequire that for \"open all\" using user\u0027s selection order.",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 86,
        "endChar": 44
      },
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a82e6f20_ce099b37",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_table_view.mm",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 1181484
      },
      "writtenOn": "2017-09-12T00:43:34Z",
      "side": 1,
      "message": "If we need an ordered list, why not get rid of the set of editNodes, and just keep this one vector of edit nodes? One reason could be to avoid duplicate nodes we need to use a set, but i am not sure if that\u0027s really useful here?",
      "parentUuid": "490d6269_0a34f864",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 86,
        "endChar": 44
      },
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f52f01a_752bf8c1",
        "filename": "ios/chrome/browser/ui/bookmarks/bookmark_table_view.mm",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-12T07:42:03Z",
      "side": 1,
      "message": "It seems we need to keep std::set because the update bookmark functions from bookmark_utils_ios takes std::set as argument.  Keeping both can prevent the overhead of conversion when using bookmark_utils_ios\u0027s functions.\nI think that\u0027s the same reason why bookmark_home_view_controller keeping both as well.\nWDYT? thx.",
      "parentUuid": "a82e6f20_ce099b37",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 86,
        "endChar": 44
      },
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cbb71879_a29ca7ad",
        "filename": "ios/clean/chrome/browser/ui/bookmarks/bookmarks_coordinator.mm",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-11T06:49:14Z",
      "side": 1,
      "message": "The change in this file is almost same as the change in bookmark_interaction_controller.mm.\nThe change in this file isn\u0027t tested yet because I am still figuring out the way to open \"clean\" chrome.",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32ee5384_11ff57b5",
        "filename": "ios/clean/chrome/browser/ui/bookmarks/bookmarks_coordinator.mm",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-11T08:03:45Z",
      "side": 1,
      "message": "CSChromium could be run by using chrome_clean_skeleton target to build.\nIt seems both adding bookmark and login do not work on chrome_clean_skeleton yet.\nI will add a TODO here to test the code when they are ready.",
      "parentUuid": "cbb71879_a29ca7ad",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ee5b7c0_b02e5d95",
        "filename": "ios/clean/chrome/browser/ui/bookmarks/bookmarks_coordinator.mm",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1212314
      },
      "writtenOn": "2017-09-12T07:42:03Z",
      "side": 1,
      "message": "TODO added.",
      "parentUuid": "32ee5384_11ff57b5",
      "revId": "5fcae9e354961d3939dfb66d13bad10b17a64077",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}