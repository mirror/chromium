{
  "comments": [
    {
      "key": {
        "uuid": "1f1b2f75_17dd6852",
        "filename": "chrome/browser/chromeos/arc/arc_util.cc",
        "patchSetId": 7
      },
      "lineNbr": 183,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2017-08-31T14:59:42Z",
      "side": 1,
      "message": "nit: Won\u0027t IsArcPlayStoreEnabledForProfile() achieve the same? (and combined with many other sanity checks)",
      "range": {
        "startLine": 182,
        "startChar": 11,
        "endLine": 183,
        "endChar": 62
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d750e60f_75dadfa7",
        "filename": "chrome/browser/chromeos/arc/arc_util.cc",
        "patchSetId": 7
      },
      "lineNbr": 183,
      "author": {
        "id": 1144419
      },
      "writtenOn": "2017-08-31T15:41:48Z",
      "side": 1,
      "message": "I\u0027ve changed to check only the pref because IsArcAvailable is redundant with the switch.",
      "parentUuid": "1f1b2f75_17dd6852",
      "range": {
        "startLine": 182,
        "startChar": 11,
        "endLine": 183,
        "endChar": 62
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22415ef0_9a41b51d",
        "filename": "chrome/browser/chromeos/arc/arc_util.cc",
        "patchSetId": 7
      },
      "lineNbr": 183,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2017-08-31T16:29:14Z",
      "side": 1,
      "message": "I also just noticed that IsArcMigrationAllowedForProfile() is actually calling IsArcMigrationAllowedForProfile(), so it would be a potentially infinite recursion to call it :)\n\nHowever, I noticed that IsArcPlayStoreEnabledForProfile() function does a bunch of other checks - that is, prunes sign-in, lock-screen, incognito, secondary, supervised profiles, etc. Are you sure you don\u0027t need any of those?",
      "parentUuid": "d750e60f_75dadfa7",
      "range": {
        "startLine": 182,
        "startChar": 11,
        "endLine": 183,
        "endChar": 62
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "054abceb_149d2d13",
        "filename": "chrome/browser/chromeos/arc/arc_util.cc",
        "patchSetId": 7
      },
      "lineNbr": 183,
      "author": {
        "id": 1175129
      },
      "writtenOn": "2017-08-31T20:29:25Z",
      "side": 1,
      "message": "Actually, IsArcAllowedForProfile is the only caller of this -- I think this function should be called IsArcMigrationAllowedByPolicyForProfile.\nIt\u0027s an artefact of the weird definition of migration strategy policy value kAskForEcryptfsArcUsers that we check specific things here.\n\nIn detail, this policy is defined to migrate:\n- if the flag is set (if the device had arc before)\n- and if ARC is enabled, according to policy.\n\nOther than that, this function just checks the policy.\n\nI\u0027ve renamed the function in CL:645953 and added unit tests.",
      "parentUuid": "22415ef0_9a41b51d",
      "range": {
        "startLine": 182,
        "startChar": 11,
        "endLine": 183,
        "endChar": 62
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8fc1c381_632cee67",
        "filename": "chrome/browser/chromeos/arc/arc_util.cc",
        "patchSetId": 7
      },
      "lineNbr": 185,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2017-08-31T14:59:42Z",
      "side": 1,
      "message": "nit: It seems a bit odd that the necessity to perform the migration is checked only in this particular \"AskForEcryptfsArcUsers\" case.\nShouldn\u0027t the whole function IsArcMigrationAllowedForProfile() return false if the command line is not present?",
      "range": {
        "startLine": 184,
        "startChar": 11,
        "endLine": 185,
        "endChar": 62
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6d49462_a5c6e3c6",
        "filename": "chrome/browser/chromeos/arc/arc_util.cc",
        "patchSetId": 7
      },
      "lineNbr": 185,
      "author": {
        "id": 1144419
      },
      "writtenOn": "2017-08-31T15:41:48Z",
      "side": 1,
      "message": "The flag in command line specifies only if the device had ARC M in version 60. Migration is\nallowed for all the devices as long as the admin didn\u0027t prohibit it.",
      "parentUuid": "8fc1c381_632cee67",
      "range": {
        "startLine": 184,
        "startChar": 11,
        "endLine": 185,
        "endChar": 62
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f845bd84_9dde4701",
        "filename": "chrome/browser/chromeos/login/existing_user_controller.cc",
        "patchSetId": 7
      },
      "lineNbr": 225,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2017-08-31T14:59:42Z",
      "side": 1,
      "message": "nit: Why do this in the same function? The ArcEnabled policy is a completely separate policy, therefore I think it\u0027s better to dedicate a separate function for reading it.",
      "range": {
        "startLine": 224,
        "startChar": 36,
        "endLine": 225,
        "endChar": 32
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f78dd686_41014f34",
        "filename": "chrome/browser/chromeos/login/existing_user_controller.cc",
        "patchSetId": 7
      },
      "lineNbr": 225,
      "author": {
        "id": 1144419
      },
      "writtenOn": "2017-08-31T15:41:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f845bd84_9dde4701",
      "range": {
        "startLine": 224,
        "startChar": 36,
        "endLine": 225,
        "endChar": 32
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44e2dd3a_563961fa",
        "filename": "chrome/browser/chromeos/login/existing_user_controller.cc",
        "patchSetId": 7
      },
      "lineNbr": 1070,
      "author": {
        "id": 1175129
      },
      "writtenOn": "2017-08-31T14:54:13Z",
      "side": 1,
      "message": "nit: For symmetry with IsArcMigrationAllowed(), we might want to check IsArcAvailable() here too.\nHowever, I assume it\u0027s redundant with the kArcTransitionMToNRequired flag.",
      "range": {
        "startLine": 1070,
        "startChar": 10,
        "endLine": 1070,
        "endChar": 21
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "724d7803_bee2f43c",
        "filename": "chrome/browser/chromeos/login/existing_user_controller.cc",
        "patchSetId": 7
      },
      "lineNbr": 1070,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2017-08-31T14:59:42Z",
      "side": 1,
      "message": "nit: Add {} brackets around the if and else bodies (omitting them is only allowed for single-line bodies).",
      "range": {
        "startLine": 1070,
        "startChar": 6,
        "endLine": 1070,
        "endChar": 8
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b73b0e36_5e077e46",
        "filename": "chrome/browser/chromeos/login/existing_user_controller.cc",
        "patchSetId": 7
      },
      "lineNbr": 1070,
      "author": {
        "id": 1144419
      },
      "writtenOn": "2017-08-31T15:41:48Z",
      "side": 1,
      "message": "I agree, we need symmetry here and IsArcAvailable is very close to redundant with the flag. Because currently I can\u0027t imagine any of 5 devices that had ARC M, to suddenly remove ARC in some update. So, I will just remove IsArcAvailable from arc_util.",
      "parentUuid": "44e2dd3a_563961fa",
      "range": {
        "startLine": 1070,
        "startChar": 10,
        "endLine": 1070,
        "endChar": 21
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44bdc068_507996c2",
        "filename": "chrome/browser/chromeos/login/existing_user_controller.cc",
        "patchSetId": 7
      },
      "lineNbr": 1070,
      "author": {
        "id": 1144419
      },
      "writtenOn": "2017-08-31T15:41:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "724d7803_bee2f43c",
      "range": {
        "startLine": 1070,
        "startChar": 6,
        "endLine": 1070,
        "endChar": 8
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "968077a0_9c444f99",
        "filename": "chrome/browser/chromeos/login/existing_user_controller.cc",
        "patchSetId": 7
      },
      "lineNbr": 1070,
      "author": {
        "id": 1175129
      },
      "writtenOn": "2017-08-31T20:29:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b73b0e36_5e077e46",
      "range": {
        "startLine": 1070,
        "startChar": 10,
        "endLine": 1070,
        "endChar": 21
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f62e766a_16310c77",
        "filename": "chromeos/chromeos_switches.cc",
        "patchSetId": 7
      },
      "lineNbr": 89,
      "author": {
        "id": 1126309
      },
      "writtenOn": "2017-08-31T14:59:42Z",
      "side": 1,
      "message": "nit: This name looks a bit cryptic.\nMaybe name it something like \"kArcEcryptfsMigrationRequired\"? This would also correspond to the policy enum\u0027s name.",
      "range": {
        "startLine": 89,
        "startChar": 11,
        "endLine": 89,
        "endChar": 37
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "473cf27b_91011295",
        "filename": "chromeos/chromeos_switches.cc",
        "patchSetId": 7
      },
      "lineNbr": 89,
      "author": {
        "id": 1144419
      },
      "writtenOn": "2017-08-31T15:41:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f62e766a_16310c77",
      "range": {
        "startLine": 89,
        "startChar": 11,
        "endLine": 89,
        "endChar": 37
      },
      "revId": "d0c9a2833b22b314c44e9349689b1a7e6d22f9ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}