{
  "comments": [
    {
      "key": {
        "uuid": "610ef905_ba9e40fa",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchFieldTrial.java",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-09-26T17:57:47Z",
      "side": 1,
      "message": "It seems that this FLAG can be used both for contextual search and for smart selection. Since we probably don\u0027t want to have two flags for this, how about moving this out to a feature in ChromeFeatureList.java? (and rename as SMART_SELECTION?)",
      "range": {
        "startLine": 80,
        "startChar": 32,
        "endLine": 80,
        "endChar": 57
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f466fdd_5d48a435",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchFieldTrial.java",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "Actually this flag disables yielding to Smart Selection.  It\u0027s a safety that will allow us to allow CS to handle long-press even on Android O in case the Smart Select code continues to be delayed.\n\nHowever I do think the enabling should be reworked -- see my comment in ChromeActivity.",
      "parentUuid": "610ef905_ba9e40fa",
      "range": {
        "startLine": 80,
        "startChar": 32,
        "endLine": 80,
        "endChar": 57
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1e7ae6b5_797db365",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchFieldTrial.java",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-09-27T00:17:51Z",
      "side": 1,
      "message": "We still need some switch to enable/disable SS. I\u0027m just afraid that we\u0027ll end up needing two switches to control long press flow into CS / SS, which is somewhat complicated. Having a new feature SMART_SELECTION would make it easier to control all of this.",
      "parentUuid": "7f466fdd_5d48a435",
      "range": {
        "startLine": 80,
        "startChar": 32,
        "endLine": 80,
        "endChar": 57
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28c3cd77_43fd69f4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchFieldTrial.java",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-29T21:23:59Z",
      "side": 1,
      "message": "I renamed this switch to help make it clear that this only applies to whether CS will suppress its UX or not whenever smart select is active.  Elsewhere Contextual Search will know whether Smart Select is active based on the enable logic in Smart Select, which determines if the SelectionClient is created.",
      "parentUuid": "1e7ae6b5_797db365",
      "range": {
        "startLine": 80,
        "startChar": 32,
        "endLine": 80,
        "endChar": 57
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8d3861a_3f5cc836",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 4
      },
      "lineNbr": 1227,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-09-26T17:57:47Z",
      "side": 1,
      "message": "Hmm... So, we propagate selection events to both clients and expect each client to handle them in an exclusive way. Wouldn\u0027t it be simpler to change the API from setSelectionClient() to addSelectionClient()?",
      "range": {
        "startLine": 1227,
        "startChar": 23,
        "endLine": 1227,
        "endChar": 44
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21d4e5f0_889bcc3f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 4
      },
      "lineNbr": 1227,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "I\u0027m not sure that would be simpler, because we also need to remove a selection client.  CS disables itself in some circumstances where SS does not, so we need to be able to remove it (network disconnected, and maybe incognito, users that toggle the preference or have disabled CS etc).\n\nDoes it still seem simpler to switch the model?",
      "parentUuid": "c8d3861a_3f5cc836",
      "range": {
        "startLine": 1227,
        "startChar": 23,
        "endLine": 1227,
        "endChar": 44
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "524254ec_084ef73b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 4
      },
      "lineNbr": 1227,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-09-27T00:17:51Z",
      "side": 1,
      "message": "I might be missing something, but even when you need to remove a selection client, I think\n\naddSelectionClient(this)\nremoveSelectionClient(this)\n\nmight be simpler than\n\nsetSelectionClient(bridgeClient)\nsetSelectionClient(platformClient)",
      "parentUuid": "21d4e5f0_889bcc3f",
      "range": {
        "startLine": 1227,
        "startChar": 23,
        "endLine": 1227,
        "endChar": 44
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f48f40cc_5b67cf58",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 4
      },
      "lineNbr": 1227,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-27T00:43:25Z",
      "side": 1,
      "message": "Humm... maybe I\u0027m missing something!\n\nIt seems to me that more work is needed to support add/removeSelectionClient since all we have now is setSelectionClient in the SelectionPopupController.  So some new code needs to be written to handle multiple SelectionClients.  The simple bridge I wrote seems like it\u0027s as simple as can be -- it just supports two.  Something that supports add/remove would support N?  Or maybe just one or two?  Seems like it can\u0027t be any simpler than what\u0027s being done by the new bridge, but I may be missing something.  \n\nLet me know -- it\u0027s worth trying to keep it simple!",
      "parentUuid": "524254ec_084ef73b",
      "range": {
        "startLine": 1227,
        "startChar": 23,
        "endLine": 1227,
        "endChar": 44
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cd95af2_969dcf5b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 4
      },
      "lineNbr": 1227,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-09-27T01:03:18Z",
      "side": 1,
      "message": "It\u0027s mostly about interclass code complexity and readability.\n\n- With the current patch, ContextualSearchManager needs to keep track of platformSelectionClient which is completely orthogonal to its main logic, and it needs an extra class SelectionClientBridge.\n\n- Readability. A code reader should try to understand what selection client bridge is. It is not a commonly used terminology. createSelectionClient behavior needs some explanation.\n\n- Currently, we\u0027re setting null SelectionClient in some places. This can be removed as well.\n\nRight, more work may be needed to support add/remove but with that the logic is self-contained and can easily be tested.",
      "parentUuid": "f48f40cc_5b67cf58",
      "range": {
        "startLine": 1227,
        "startChar": 23,
        "endLine": 1227,
        "endChar": 44
      },
      "revId": "b5dd7470700c7577649ca4ed5e7173aa5c2252c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}