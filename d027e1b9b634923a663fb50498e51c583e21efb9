{
  "comments": [
    {
      "key": {
        "uuid": "8eaf5a0d_95a3c9b7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 1115904
      },
      "writtenOn": "2017-07-10T19:58:39Z",
      "side": 1,
      "message": "This is confusing since I don\u0027t see how you get two DownloadServices. In //c/b/d/download_service_factory.h, it looks like the implementation of DSF is doing the normal BrowserContextKeyedServiceFactory code which should ensure a one-to-one relationship between services and profiles.\n\n(It might be correct to always initialize the DownloadService in the list of KSFs where you\u0027re doing so in the current patch set, but I\u0027m unsure if it\u0027s correct for the reasons you state.)",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 63
      },
      "revId": "d027e1b9b634923a663fb50498e51c583e21efb9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bea77702_45d73630",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-07-10T20:39:15Z",
      "side": 1,
      "message": "In previous patches I also initialized download service in ChromeDownloadManagerDelegate, which \nhit a DCHECK in https://cs.chromium.org/chromium/src/components/keyed_service/core/keyed_service_factory.cc?dr\u003dC\u0026l\u003d92 where Associate function checks for duplicate creation.\n\nThe code path causing the problem is PrefetchServiceFactory \u003d\u003d\u003e DownloadServiceFactory \u003d\u003d\u003e content::DownloadManager \u003d\u003d\u003e ChromeDownloadManagerDelegate \u003d\u003d\u003e DownloadServiceFactory, where DownloadServiceFactory is created twice in the same call stack.\n\nThe comment is to document this problem. The comment is removed since now the CL only builds the instance in the list of KSFs.",
      "parentUuid": "8eaf5a0d_95a3c9b7",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 63
      },
      "revId": "d027e1b9b634923a663fb50498e51c583e21efb9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}