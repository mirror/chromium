{
  "comments": [
    {
      "key": {
        "uuid": "7fd8dae1_3362a8ad",
        "filename": "components/omnibox/browser/autocomplete_result.h",
        "patchSetId": 14
      },
      "lineNbr": 38,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-11-14T23:50:12Z",
      "side": 1,
      "message": "Nit: No || on functions (the () is the identifier)",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82f90fd9_e1a2888d",
        "filename": "components/omnibox/browser/autocomplete_result.h",
        "patchSetId": 14
      },
      "lineNbr": 38,
      "author": {
        "id": 1105777
      },
      "writtenOn": "2017-11-15T02:04:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7fd8dae1_3362a8ad",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "906a5b45_a78201e0",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_popup_mediator.mm",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-11-14T23:50:12Z",
      "side": 1,
      "message": "I don\u0027t understand what\u0027s going on in this function at all.  Why do we have to copy result to result_copy before using it below?",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15ce55a2_1a92e43b",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_popup_mediator.mm",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 1105777
      },
      "writtenOn": "2017-11-15T02:04:55Z",
      "side": 1,
      "message": "I only ran into this function after uploading and attempting a dry run. I guess they\u0027re just saying, \"_currentResult \u003d result;\" except that CopyOldMatches() likes to set \u0027from_previous\u0027 when copying.\n\nSince CopyOldMatches() now swaps in results when the destination is empty, we have to pass in a non-const copy. So we make a copy of |result|, so that it can be swapped into |_currentResult|.\n\nIt should be the same speed as before, since it\u0027s still just making a copy. Would a comment help explain the apparently \"unnecessary\" copy? (not that the previous version was terribly lucid)",
      "parentUuid": "906a5b45_a78201e0",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cc5ca8a_7df8743a",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_popup_mediator.mm",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-11-15T02:08:01Z",
      "side": 1,
      "message": "Why were we using CopyOldMatches() before?  I don\u0027t even understand what this function is trying to do or where it\u0027s called.  Why can\u0027t we just copy result into _currentResult directly?  Yes, you said it sets |from_previous|, but why does that matter?",
      "parentUuid": "15ce55a2_1a92e43b",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da01b3fc_c6e379cb",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_popup_mediator.mm",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 1105777
      },
      "writtenOn": "2017-11-15T02:28:27Z",
      "side": 1,
      "message": "It\u0027s called from omnibox_popup_view_ios.mm OmniboxPopupViewIOS::UpdatePopupAppearance(). I don\u0027t know why it strictly needs CopyOldMatches(), but if not, then it will still need CopyFrom(), ya?",
      "parentUuid": "9cc5ca8a_7df8743a",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b253d0cd_5b9ab44d",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_popup_mediator.mm",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-11-15T02:31:56Z",
      "side": 1,
      "message": "Yeah, but if this can just be:\n\n_currentResult.CopyFrom(result);\n\n...then it\u0027s a lot simpler.\n\nI wonder if CopyOldMatches() before was just a hack around the fact that CopyFrom() wasn\u0027t public.",
      "parentUuid": "da01b3fc_c6e379cb",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d070218_6d60e7bb",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_popup_mediator.mm",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 1105777
      },
      "writtenOn": "2017-11-15T02:50:03Z",
      "side": 1,
      "message": "Or they wanted to maintain whatever invariant CopyOldMatches() guaranteed. But the data here does seem like it\u0027s on a one-way trip.\n\nI can try a few unit tests tomorrow; see what breaks.",
      "parentUuid": "b253d0cd_5b9ab44d",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42b6e73b_5760d393",
        "filename": "ios/chrome/browser/ui/omnibox/omnibox_popup_mediator.mm",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 1000119
      },
      "writtenOn": "2017-11-16T01:56:34Z",
      "side": 1,
      "message": "This is old, old code \u003d)\n\nLooks like it used to just be a call to CopyFrom(), but that was made private in https://chromiumcodereview.appspot.com/19080003/ so we switched to something else.\n\nAt one point in the past we used |oldResults| to determine which tableview rows needed to be updated.  That code is now gone, but |oldResults| remained unnecessarily.\n\nSwitching this back to a single call to CopyFrom() seems fine.",
      "parentUuid": "3d070218_6d60e7bb",
      "revId": "85cd8294de19498ddf0fc75b6a457476af39d68d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}