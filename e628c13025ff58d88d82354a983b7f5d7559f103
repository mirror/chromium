{
  "comments": [
    {
      "key": {
        "uuid": "5969cf46_a8566f46",
        "filename": "chrome/browser/themes/theme_properties.cc",
        "patchSetId": 3
      },
      "lineNbr": 266,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-06-14T21:34:27Z",
      "side": 1,
      "message": "Nit: I think this comment isn\u0027t quite right, since we don\u0027t use COLOR_NTP_BACKGROUND in the calculation.",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5d3561c_e501fcf2",
        "filename": "chrome/browser/themes/theme_properties.cc",
        "patchSetId": 3
      },
      "lineNbr": 266,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-06-15T16:23:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5969cf46_a8566f46",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f5176e2_bf9b95a5",
        "filename": "chrome/browser/themes/theme_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 480,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-06-14T21:34:27Z",
      "side": 1,
      "message": "I think this should use COLOR_TAB_TEXT, which is basically \"text that contrasts with the toolbar\", instead of \"text which contrasts with the bookmark bar\".  In the default theme these are the same color, so there won\u0027t be any difference, but in themes where the bookmark bar and toolbar have very different colors, I think you\u0027ll get better results from COLOR_TAB_TEXT, especially when there\u0027s no visible bookmarks bar.",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f341041_57bfdb82",
        "filename": "chrome/browser/themes/theme_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 480,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-06-15T16:23:56Z",
      "side": 1,
      "message": "Wouldn\u0027t you get worse results if the bookmark bar were visible? I haven\u0027t seen many (any) themes where the toolbar and bookmark bar are dramatically different in color. In fact there\u0027s no such thing as COLOR_BOOKMARK_BAR.\n\nOn the other hand, I can find themes where COLOR_TAB_TEXT doesn\u0027t match COLOR_BOOKMARK_TEXT, but if there\u0027s any reason behind that decision, it appears to be based on the appearance of the top of the toolbar vs. the bottom of the toolbar. For example the toolbar in \"Virginia Beach\" has a gradient that goes from lighter at the top to darker at the bottom. Since this separator is at the bottom, I think it\u0027s better to base it off the text that would appear towards the bottom.",
      "parentUuid": "0f5176e2_bf9b95a5",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec455fc0_08eaf2a5",
        "filename": "chrome/browser/themes/theme_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 480,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-06-15T21:26:11Z",
      "side": 1,
      "message": "I installed that theme and took a look at it.  I think you\u0027re right that COLOR_TAB_TEXT may not be a good choice.\n\nI don\u0027t know that COLOR_BOOKMARK_TEXT is right either, though.  A theme with a less-gradual gradient could have an even more different bookmark bar color (compared to the main toolbar region) than the Virginia Beach theme.  And the most common case for people to see this color will be at the bottom of the toolbar when the bookmark bar is not visible at all to contrast with.\n\nAfter looking around, I\u0027d use COLOR_TOOLBAR_BUTTON_ICON as the foreground blending color here.  We use this for things like the back and forward buttons and for vertical separators in the toolbar, so they\u0027re more reasonable proxies for \"a color that contrasts with the toolbar near this location\" than COLOR_TAB_TEXT is.",
      "parentUuid": "3f341041_57bfdb82",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d747dafe_5b815093",
        "filename": "chrome/browser/themes/theme_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 480,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-06-16T21:39:11Z",
      "side": 1,
      "message": "Hmm. There\u0027s a border stroke around the location bar. Why don\u0027t we just match that? Looks reasonable on all the themes I tested. Yes, on dark themes it is barely visible, but that matches the classic theme with incognito.",
      "parentUuid": "ec455fc0_08eaf2a5",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0ed14f7_50874abf",
        "filename": "chrome/browser/themes/theme_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 480,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-06-17T00:08:24Z",
      "side": 1,
      "message": "It seems reasonable for these two things to be the same.\n\nIt does make me concerned about how that color is computed, though.  Right now it\u0027s black with alpha \u003d 0x4d.  On a black toolbar that line is entirely invisible.\n\nIf we instead computed both of these colors as COLOR_TOOLBAR_BUTTON_ICON with alpha \u003d 0x7a, we\u0027d get the same result as today for the location bar border in the non-incognito default theme.  The location bar border would become light rather than dark in the incognito theme, which personally I kind of like, but we\u0027d maybe want a designer\u0027s OK.\n\nAnother route would be to use black as the base color unless the toolbar background is really dark, and use the toolbar button color (with alpha \u003d 0x4d?) otherwise.\n\nYet another route would be to try and run (location bar foreground color, toolbar background color) through the \"get separator color\" logic and see what it comes up with.\n\nI\u0027m going to give you LGTM for now so you have the freedom to move forward without being blocked on me endlessly, but it seems worth playing with the ideas above a little bit in hopes of getting better results on really dark themes.",
      "parentUuid": "d747dafe_5b815093",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87afec3b_d51c0275",
        "filename": "chrome/browser/themes/theme_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-06-14T21:34:27Z",
      "side": 1,
      "message": "Note that if we want to ensure this 0x20 stays in sync with the 0x20 below we should use some sort of shared constant.  I don\u0027t know if we want that.",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28881b8d_ade0e141",
        "filename": "chrome/browser/themes/theme_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-06-15T16:23:56Z",
      "side": 1,
      "message": "seems reasonable, done.",
      "parentUuid": "87afec3b_d51c0275",
      "revId": "e628c13025ff58d88d82354a983b7f5d7559f103",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}