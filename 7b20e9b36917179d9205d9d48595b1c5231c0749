{
  "comments": [
    {
      "key": {
        "uuid": "ceb2689c_8ad50a1d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/LaunchIntentDispatcher.java",
        "patchSetId": 2
      },
      "lineNbr": 425,
      "author": {
        "id": 1001618
      },
      "writtenOn": "2017-10-24T19:49:27Z",
      "side": 1,
      "message": "so one way in which this seems to differ from WebappLauncherActivity is that there\u0027s no validation at handling time of intent verification. Where does that happen? So specifically this is when we\u0027d do DAL-verification for TWA but I\u0027m guessing you\u0027re doing that elsewhere? Oh, in WebappInfo.create that you added? It\u0027s probably cleaner to not have WebappInfo depend on CustomTabs at all, and do the verification before constructing the webappinfo with the intent.",
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "326fff8d_9737ffc3",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/LaunchIntentDispatcher.java",
        "patchSetId": 2
      },
      "lineNbr": 425,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-10-24T19:58:07Z",
      "side": 1,
      "message": "There are two checks that has to happen eventually, one on the AndroidManifest which is happening in WebappInfo.create and the other on the website through OriginVerifier which should still be added to this.\n\nI will move the manifest one out to the launching checks.",
      "parentUuid": "ceb2689c_8ad50a1d",
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91296d5b_cd87f366",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 1191013
      },
      "writtenOn": "2017-10-24T22:43:38Z",
      "side": 1,
      "message": "Please comment on what are the rules for this field. When should I expect this to be null?",
      "range": {
        "startLine": 105,
        "startChar": 27,
        "endLine": 105,
        "endChar": 40
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6e6ce1f_15881e57",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-24T04:33:47Z",
      "side": 1,
      "message": "The null-checking of mWebappHelper is somewhat inelegant. It would be cleaner if the helper itself just did the right thing and was never null.\n\nMore concretely, the helper would be something like:\n\nclass Helper {\n  public Helper(ScopePolicy scopePolicy, boolean requiresUnboundDisclosure, ...)\n\n  etc.\n}\n\nAnd then its methods would no-op or do something based on the options passed in at construction. WDYT?",
      "range": {
        "startLine": 317,
        "startChar": 12,
        "endLine": 317,
        "endChar": 33
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2785d0bf_c3df7552",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 456,
      "author": {
        "id": 1191013
      },
      "writtenOn": "2017-10-24T22:43:38Z",
      "side": 1,
      "message": "Are you sure TWAs will be able to act on the updated \"LastCheckForUpdatedWebManifest\"? I don\u0027t know WebAPKs code that well, but it seems this is used in WebApkUpdateManager. Have you ensured TWAs are treated the way you want in WebApkUpdateManager? \n\nIf you don\u0027t want to go as far in this patch, then maybe make a note to yourself to come back to the question of how Web Manifest updates should be treated by TWAs and revert this change?",
      "range": {
        "startLine": 456,
        "startChar": 36,
        "endLine": 456,
        "endChar": 78
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32a24f38_d4b0d9f1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 456,
      "author": {
        "id": 1001618
      },
      "writtenOn": "2017-10-25T16:56:23Z",
      "side": 1,
      "message": "I suspect WebApkUpdateManager will ignore TWAs due to package name not being \"org.chromium.webapk.*\" (i.e. matching bound-webapks) but perhaps my mental model doesn\u0027t match reality at the moment.",
      "parentUuid": "2785d0bf_c3df7552",
      "range": {
        "startLine": 456,
        "startChar": 36,
        "endLine": 456,
        "endChar": 78
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7503f57f_46dd1c18",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 505,
      "author": {
        "id": 1001618
      },
      "writtenOn": "2017-10-24T19:49:27Z",
      "side": 1,
      "message": "pretty weird to move this now without larger merging of webapk/webapp :/",
      "range": {
        "startLine": 505,
        "startChar": 18,
        "endLine": 505,
        "endChar": 38
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "786d7476_8e77d751",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 505,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-10-24T19:58:07Z",
      "side": 1,
      "message": "I moved this become the \"Helper\" (to be renamed) needs it, but I agree the name stands out now. Would we be OK with a rename but still keeping it here?",
      "parentUuid": "7503f57f_46dd1c18",
      "range": {
        "startLine": 505,
        "startChar": 18,
        "endLine": 505,
        "endChar": 38
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf692cee_a31f1b16",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 505,
      "author": {
        "id": 1001618
      },
      "writtenOn": "2017-10-24T20:07:47Z",
      "side": 1,
      "message": "i guess WebappInfo already has WebApkPackageName (which is strange too) so ok.",
      "parentUuid": "786d7476_8e77d751",
      "range": {
        "startLine": 505,
        "startChar": 18,
        "endLine": 505,
        "endChar": 38
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f9587d3_18d14374",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappActivity.java",
        "patchSetId": 2
      },
      "lineNbr": 674,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-24T04:33:47Z",
      "side": 1,
      "message": "I think this should be in the helper, where you specify in the constructor the specific scope you want to use.",
      "range": {
        "startLine": 670,
        "startChar": 4,
        "endLine": 674,
        "endChar": 0
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fdf8d98a_461d36b2",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappHelper.java",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-24T04:33:47Z",
      "side": 1,
      "message": "This name is a little generic. Specifically, this class is meant to manage the installed, user-visible behaviour (as opposed to the implementation details like processes, etc.).\n\nSomething like a WebappUxDelegate? Or WebappBehaviorDelegate? Naming is hard. :(",
      "range": {
        "startLine": 19,
        "startChar": 13,
        "endLine": 19,
        "endChar": 25
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "416550fa_f063719c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappHelper.java",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1001618
      },
      "writtenOn": "2017-10-24T19:49:27Z",
      "side": 1,
      "message": "agree naming is hard, but that WebappHelper isn\u0027t sufficient.\n\nCan this be a WebappUxStrategy? There\u0027s possibly more that can be brought into it",
      "parentUuid": "fdf8d98a_461d36b2",
      "range": {
        "startLine": 19,
        "startChar": 13,
        "endLine": 19,
        "endChar": 25
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e4ef530_2602bd48",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappHelper.java",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1191013
      },
      "writtenOn": "2017-10-24T22:43:38Z",
      "side": 1,
      "message": "Alternatively:\n\nCan we fold register(...) into WebappActivity, I don\u0027t understand why it would need to be here.\n\nCan we elegantly move all disclosure notification related code into WebApkDisclosureNotificationManager and rename it into WebappDisclosureNotificationManager, with a comment when disclosure notification applies (i.e. unbound WebAPKs and TWAs).\n\nWebappHelper dies and we\u0027re all a little bit happier.",
      "parentUuid": "416550fa_f063719c",
      "range": {
        "startLine": 19,
        "startChar": 13,
        "endLine": 19,
        "endChar": 25
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be5225c8_7cabec06",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebappHelper.java",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1191013
      },
      "writtenOn": "2017-10-24T22:43:38Z",
      "side": 1,
      "message": "Well, now it\u0027s not only WebAPKs, it also for TWAs.",
      "range": {
        "startLine": 29,
        "startChar": 24,
        "endLine": 29,
        "endChar": 30
      },
      "revId": "7b20e9b36917179d9205d9d48595b1c5231c0749",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}