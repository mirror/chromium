{
  "comments": [
    {
      "key": {
        "uuid": "20db37e2_b8040622",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 1000101
      },
      "writtenOn": "2017-10-31T21:00:50Z",
      "side": 1,
      "message": "Do we need to enable layer for all children views for the animation? Think enabling layer on the parent view is enough.",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "469daa20_9080c808",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 1151699
      },
      "writtenOn": "2017-11-03T16:44:54Z",
      "side": 1,
      "message": "I think this could help to reduce overdraw when apply animations to child views separately?",
      "parentUuid": "20db37e2_b8040622",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46ed6b28_c2eb69c9",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 1000101
      },
      "writtenOn": "2017-11-03T17:06:22Z",
      "side": 1,
      "message": "It seems that the animation is only on the parent and the children do not have their own animation (opacity or transform). In this case, having layer enabled on the parent is enough.\n\nEnabling layer implies allocating texture for the view, which cost GPU memory. We should be conservative and try to achieve what we want using minimum layers since GPU memory is a scarce resource.",
      "parentUuid": "469daa20_9080c808",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb2ddc66_df32ac78",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 225,
      "author": {
        "id": 1127641
      },
      "writtenOn": "2017-10-31T20:24:47Z",
      "side": 1,
      "message": "Should we run OnLayerAnimationEnded?",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91a7f017_1012295f",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 225,
      "author": {
        "id": 1151699
      },
      "writtenOn": "2017-11-03T16:44:54Z",
      "side": 1,
      "message": "The only difference between abort animation and end animation here is whether we will try to close the bubble widget. If we don\u0027t care about the corner cases I mentioned below, we can probably merge these two.",
      "parentUuid": "cb2ddc66_df32ac78",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da8094d6_358c6e66",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 282,
      "author": {
        "id": 1127641
      },
      "writtenOn": "2017-10-31T20:24:47Z",
      "side": 1,
      "message": "Why do we need to abort?",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0eb816de_9cda52d7",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 282,
      "author": {
        "id": 1151699
      },
      "writtenOn": "2017-11-03T16:44:54Z",
      "side": 1,
      "message": "Not abort here has some corner cases:\nFor example, if a show(visible\u003d\u003dtrue) animation is ongoing and we click outside bubble to schedule a close animation(visible\u003d\u003dfalse), if we don\u0027t abort the show animation, it will call OnLayerAnimationEnded immediately and then close the bubble widget(since visible\u003d\u003dfalse now). We won\u0027t be enable to see a close animation.\nIf we don\u0027t care about this, we could probably merge OnLayerAnimationAborted and OnLayerAnimationEnded.",
      "parentUuid": "da8094d6_358c6e66",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7a15725_c6f2ed1c",
        "filename": "ash/login/ui/login_bubble.cc",
        "patchSetId": 3
      },
      "lineNbr": 282,
      "author": {
        "id": 1000101
      },
      "writtenOn": "2017-11-03T17:06:22Z",
      "side": 1,
      "message": "Can you try set IMMEDIATELY_ANIMATE_TO_NEW_TARGET as PreemptionStrategy for the animation? We might be able to get rid of AbortAllAnimations() using that.\n\ni.e. add this after L299:\n  settings.SetPreemptionStrategy(\n      ui::LayerAnimator::IMMEDIATELY_ANIMATE_TO_NEW_TARGET);",
      "parentUuid": "0eb816de_9cda52d7",
      "revId": "906817f9f7d86ae41b16a0f2da997b216d07f832",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}