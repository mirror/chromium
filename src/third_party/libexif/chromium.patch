diff --git a/third_party/libexif/sources/config.h b/third_party/libexif/sources/config.h
index 1811177..7857662 100644
--- a/third_party/libexif/sources/config.h
+++ b/third_party/libexif/sources/config.h
@@ -1,13 +1,24 @@
-/* config.h.  Generated from config.h.in by configure.  */
+#if defined(_WIN32)
+/* config.h.  Generated by configure.  */
 /* config.h.in.  Generated from configure.ac by autoheader.  */
 
 /* Define to 1 if translation of program messages to the user's native
    language is requested. */
-#define ENABLE_NLS 1
+/* #undef ENABLE_NLS 1 */
+
+/* The gettext domain we're using */
+/* #undef GETTEXT_PACKAGE "libexif-12" */
+
+/* Define locale directory. */
+/* #undef LOCALEDIR "UTF-8" */
+
+/* Define to 1 if we want to bind text domain and enable GETTEXT_PACKAGE and
+ * LOCALE_DIR */
+/* #undef BIND_TEXTDOMAIN 1 */
 
 /* Define if the GNU dcgettext() function is already present or preinstalled.
    */
-#define HAVE_DCGETTEXT 1
+/* #undef HAVE_DCGETTEXT 1 */
 
 /* Define to 1 if you have the <dlfcn.h> header file. */
 #define HAVE_DLFCN_H 1
@@ -21,8 +32,93 @@
 /* Define to 1 if you have the <inttypes.h> header file. */
 #define HAVE_INTTYPES_H 1
 
-/* Define to 1 if you have the `localtime_r' function. */
-#define HAVE_LOCALTIME_R 1
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define to 1 if you have the <stdint.h> header file. */
+/* #undef HAVE_STDINT_H 1 */
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define as const if the declaration of iconv() needs const. */
+#define ICONV_CONST
+
+/* Name of package */
+#define PACKAGE "libexif"
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "libexif-devel@lists.sourceforge.net"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "EXIF library"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "EXIF library 0.6.20"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "libexif"
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "0.6.20"
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Version number of package */
+#define VERSION "0.6.20"
+
+#elif !defined(__APPLE__)
+/* config.h.  Generated by configure.  */
+/* config.h.in.  Generated from configure.ac by autoheader.  */
+
+/* #define __cplusplus 1 */
+#define LOCALEDIR "UTF-8"
+
+/* Define to 1 if translation of program messages to the user's native
+   language is requested. */
+/* #undef ENABLE_NLS */
+
+/* The gettext domain we're using */
+/* #undef GETTEXT_PACKAGE "libexif-12" */
+
+/* Define locale directory. */
+/* #undef LOCALEDIR "UTF-8" */
+
+/* Define to 1 if we want to bind text domain and enable GETTEXT_PACKAGE and
+ * LOCALE_DIR */
+/* #undef BIND_TEXTDOMAIN 1 */
+
+/* Define if the GNU dcgettext() function is already present or preinstalled.
+   */
+#define HAVE_DCGETTEXT 1
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#define HAVE_DLFCN_H 1
+
+/* Define if the GNU gettext() function is already present or preinstalled. */
+#define HAVE_GETTEXT 1
+
+/* Define if you have the iconv() function. */
+#define HAVE_ICONV 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
 
 /* Define to 1 if you have the <memory.h> header file. */
 #define HAVE_MEMORY_H 1
@@ -49,11 +145,101 @@
 #define HAVE_UNISTD_H 1
 
 /* Define as const if the declaration of iconv() needs const. */
-#define ICONV_CONST 
+#define ICONV_CONST
+
+/* Name of package */
+#define PACKAGE "libexif"
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "libexif-devel@lists.sourceforge.net"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "EXIF library"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "EXIF library 0.6.20"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "libexif"
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "0.6.20"
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Version number of package */
+#define VERSION "0.6.20"
+
+/* Define to empty if `const' does not conform to ANSI C. */
+/* #undef const */
+#else  // defined(__APPLE__)
+
+// We need different definitions for the iPhone from desktop OS X,
+// we get the necessary #define from TargetConditionals.h
+#include <TargetConditionals.h>
+
+#if TARGET_OS_IPHONE
+
+/* config.h.  Generated from config.h.in by configure.  */
+/* config.h.in.  Generated from configure.ac by autoheader.  */
+
+/* Define to 1 if translation of program messages to the user's native
+   language is requested. */
+/* #undef ENABLE_NLS */
+
+/* The gettext domain we're using */
+/* #undef GETTEXT_PACKAGE "libexif-12" */
 
-/* Define to the sub-directory in which libtool stores uninstalled libraries.
+/* Define locale directory. */
+/* #undef LOCALEDIR "UTF-8" */
+
+/* Define to 1 if we want to bind text domain and enable GETTEXT_PACKAGE and
+ * LOCALE_DIR */
+/* #undef BIND_TEXTDOMAIN 1 */
+
+/* Define if the GNU dcgettext() function is already present or preinstalled.
    */
-#define LT_OBJDIR ".libs/"
+/* #undef HAVE_DCGETTEXT */
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#define HAVE_DLFCN_H 1
+
+/* Define if the GNU gettext() function is already present or preinstalled. */
+/* #undef HAVE_GETTEXT */
+
+/* Define if you have the iconv() function. */
+/* #undef HAVE_ICONV */
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#define HAVE_STDINT_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define as const if the declaration of iconv() needs const. */
+/* #undef ICONV_CONST */
 
 /* Name of package */
 #define PACKAGE "libexif"
@@ -70,8 +256,93 @@
 /* Define to the one symbol short name of this package. */
 #define PACKAGE_TARNAME "libexif"
 
-/* Define to the home page for this package. */
-#define PACKAGE_URL ""
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "0.6.20"
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Version number of package */
+#define VERSION "0.6.20"
+
+/* Define to empty if `const' does not conform to ANSI C. */
+/* #undef const */
+#else  // !TARGET_OS_IPHONE
+
+/* config.h.  Generated from config.h.in by configure.  */
+/* config.h.in.  Generated from configure.ac by autoheader.  */
+
+/* Define to 1 if translation of program messages to the user's native
+   language is requested. */
+/* #undef ENABLE_NLS */
+
+/* The gettext domain we're using */
+/* #undef GETTEXT_PACKAGE "libexif-12" */
+
+/* Define locale directory. */
+/* #undef LOCALEDIR "UTF-8" */
+
+/* Define to 1 if we want to bind text domain and enable GETTEXT_PACKAGE and
+ * LOCALE_DIR */
+/* #undef BIND_TEXTDOMAIN 1 */
+
+/* Define if the GNU dcgettext() function is already present or preinstalled.
+   */
+/* #undef HAVE_DCGETTEXT */
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#define HAVE_DLFCN_H 1
+
+/* Define if the GNU gettext() function is already present or preinstalled. */
+/* #undef HAVE_GETTEXT */
+
+/* Define if you have the iconv() function. */
+#define HAVE_ICONV 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#define HAVE_STDINT_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define as const if the declaration of iconv() needs const. */
+#define ICONV_CONST
+
+/* Name of package */
+#define PACKAGE "libexif"
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "libexif-devel@lists.sourceforge.net"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "EXIF library"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "EXIF library 0.6.20"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "libexif"
 
 /* Define to the version of this package. */
 #define PACKAGE_VERSION "0.6.20"
@@ -84,9 +355,6 @@
 
 /* Define to empty if `const' does not conform to ANSI C. */
 /* #undef const */
+#endif  // TARGET_OS_IPHONE
 
-/* Define to `__inline__' or `__inline' if that's what the C compiler
-   calls it, or to nothing if 'inline' is not supported under any name.  */
-#ifndef __cplusplus
-/* #undef inline */
-#endif
+#endif  // _WIN32
diff --git a/third_party/libexif/sources/libexif/_stdint.h b/third_party/libexif/sources/libexif/_stdint.h
index 80ecf41..0ecf836 100644
--- a/third_party/libexif/sources/libexif/_stdint.h
+++ b/third_party/libexif/sources/libexif/_stdint.h
@@ -1,2 +1,15 @@
 /* This file is generated automatically by configure */
+#if defined(_WIN32)
+// Define C99 equivalent types.
+typedef signed char           int8_t;
+typedef signed short          int16_t;
+typedef signed int            int32_t;
+typedef signed long long      int64_t;
+typedef signed long long      ssize_t;
+typedef unsigned char         uint8_t;
+typedef unsigned short        uint16_t;
+typedef unsigned int          uint32_t;
+typedef unsigned long long    uint64_t;
+#else
 #include <stdint.h>
+#endif
diff --git a/third_party/libexif/sources/libexif/canon/mnote-canon-tag.c b/third_party/libexif/sources/libexif/canon/mnote-canon-tag.c
index 6ef73a4..6ced674 100644
--- a/third_party/libexif/sources/libexif/canon/mnote-canon-tag.c
+++ b/third_party/libexif/sources/libexif/canon/mnote-canon-tag.c
@@ -160,7 +160,9 @@ mnote_canon_tag_get_title (MnoteCanonTag t)
 {
 	unsigned int i;
 
-	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR); 
+#if defined(BIND_TEXTDOMAIN)
+	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 	for (i = 0; i < sizeof (table) / sizeof (table[0]); i++)
 		if (table[i].tag == t) return (_(table[i].title));
 	return NULL;
@@ -194,7 +196,9 @@ mnote_canon_tag_get_description (MnoteCanonTag t)
 		if (table[i].tag == t) {
 			if (!*table[i].description)
 				return "";
-			bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#if defined(BIND_TEXTDOMAIN)
+                	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 			return _(table[i].description);
 		}
 	return NULL;
diff --git a/third_party/libexif/sources/libexif/exif-entry.c b/third_party/libexif/sources/libexif/exif-entry.c
index a7edf7a..7f3ae55 100644
--- a/third_party/libexif/sources/libexif/exif-entry.c
+++ b/third_party/libexif/sources/libexif/exif-entry.c
@@ -840,7 +840,9 @@ exif_entry_get_value (ExifEntry *e, char *val, unsigned int maxlen)
 	 * 
 	 * bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
 	 */
+#if defined(BIND_TEXTDOMAIN)
 	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 
 	/* make sure the returned string is zero terminated */
 	memset (val, 0, maxlen);
diff --git a/third_party/libexif/sources/libexif/exif-format.c b/third_party/libexif/sources/libexif/exif-format.c
index 2c63c33..08e4f0c 100644
--- a/third_party/libexif/sources/libexif/exif-format.c
+++ b/third_party/libexif/sources/libexif/exif-format.c
@@ -61,8 +61,9 @@ exif_format_get_name (ExifFormat format)
 	 * 
 	 * bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
 	 */
+#if defined(BIND_TEXTDOMAIN)
 	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
-
+#endif
 	for (i = 0; ExifFormatTable[i].name; i++)
 		if (ExifFormatTable[i].format == format)
 			return _(ExifFormatTable[i].name);
diff --git a/third_party/libexif/sources/libexif/exif-mem.c b/third_party/libexif/sources/libexif/exif-mem.c
index b4d7ece..86f8fc9 100644
--- a/third_party/libexif/sources/libexif/exif-mem.c
+++ b/third_party/libexif/sources/libexif/exif-mem.c
@@ -1,3 +1,23 @@
+ /* exif-mem.c
+  *
+  * Copyright (c) 2003 Lutz Mueller <lutz@users.sourceforge.net>
+  *
+  * This library is free software; you can redistribute it and/or
+  * modify it under the terms of the GNU Lesser General Public
+  * License as published by the Free Software Foundation; either
+  * version 2 of the License, or (at your option) any later version.
+  *
+  * This library is distributed in the hope that it will be useful,
+  * but WITHOUT ANY WARRANTY; without even the implied warranty of
+  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+  * Lesser General Public License for more details.
+  *
+  * You should have received a copy of the GNU Lesser General Public
+  * License along with this library; if not, write to the
+  * Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+  * Boston, MA  02110-1301  USA.
+  */
+
 #include <libexif/exif-mem.h>
 
 #include <stdlib.h>
diff --git a/third_party/libexif/sources/libexif/exif-tag.c b/third_party/libexif/sources/libexif/exif-tag.c
index 9e38849..433d6cc 100644
--- a/third_party/libexif/sources/libexif/exif-tag.c
+++ b/third_party/libexif/sources/libexif/exif-tag.c
@@ -990,7 +990,9 @@ exif_tag_get_title_in_ifd (ExifTag tag, ExifIfd ifd)
 	 * 
 	 * bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
 	 */
+#if defined(BIND_TEXTDOMAIN)
 	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 	return _(ExifTagTable[i].title);
 }
 
@@ -1024,7 +1026,9 @@ exif_tag_get_description_in_ifd (ExifTag tag, ExifIfd ifd)
 	 * 
 	 * bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
 	 */
+#if defined(BIND_TEXTDOMAIN)
 	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 	return _(ExifTagTable[i].description);
 }
 
diff --git a/third_party/libexif/sources/libexif/exif-utils.h b/third_party/libexif/sources/libexif/exif-utils.h
index 7861564..38d0f67 100644
--- a/third_party/libexif/sources/libexif/exif-utils.h
+++ b/third_party/libexif/sources/libexif/exif-utils.h
@@ -30,11 +30,12 @@ extern "C" {
 #include <libexif/exif-byte-order.h>
 #include <libexif/exif-format.h>
 #include <libexif/_stdint.h>
+#include "config.h"
 
 
 /* If these definitions don't work for you, please let us fix the 
  * macro generating _stdint.h */
-	
+
 /*! EXIF Unsigned Byte data type */
 typedef unsigned char	ExifByte;          /* 1 byte  */
 	
diff --git a/third_party/libexif/sources/libexif/fuji/mnote-fuji-tag.c b/third_party/libexif/sources/libexif/fuji/mnote-fuji-tag.c
index 3200eb6..4078037 100644
--- a/third_party/libexif/sources/libexif/fuji/mnote-fuji-tag.c
+++ b/third_party/libexif/sources/libexif/fuji/mnote-fuji-tag.c
@@ -83,7 +83,9 @@ mnote_fuji_tag_get_title (MnoteFujiTag t)
 {
 	unsigned int i;
 
+#if defined(BIND_TEXTDOMAIN)
 	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 	for (i = 0; i < sizeof (table) / sizeof (table[0]); i++)
 		if (table[i].tag == t) return (_(table[i].title));
 	return NULL;
@@ -98,7 +100,9 @@ mnote_fuji_tag_get_description (MnoteFujiTag t)
 		if (table[i].tag == t) {
 			if (!*table[i].description)
 				return "";
+#if defined(BIND_TEXTDOMAIN)
 			bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 			return _(table[i].description);
 		}
 	return NULL;
diff --git a/third_party/libexif/sources/libexif/olympus/mnote-olympus-tag.c b/third_party/libexif/sources/libexif/olympus/mnote-olympus-tag.c
index 3810352..af8ffef 100644
--- a/third_party/libexif/sources/libexif/olympus/mnote-olympus-tag.c
+++ b/third_party/libexif/sources/libexif/olympus/mnote-olympus-tag.c
@@ -208,7 +208,9 @@ mnote_olympus_tag_get_title (MnoteOlympusTag t)
 {
 	unsigned int i;
 
+#if defined(BIND_TEXTDOMAIN)
 	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 	for (i = 0; i < sizeof (table) / sizeof (table[0]); i++)
 		if (table[i].tag == t) return (_(table[i].title));
 	return NULL;
@@ -223,7 +225,9 @@ mnote_olympus_tag_get_description (MnoteOlympusTag t)
 		if (table[i].tag == t) {
 			if (!table[i].description || !*table[i].description)
 				return "";
+#if defined(BIND_TEXTDOMAIN)
 			bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 			return _(table[i].description);
 		}
 	return NULL;
diff --git a/third_party/libexif/sources/libexif/pentax/mnote-pentax-tag.c b/third_party/libexif/sources/libexif/pentax/mnote-pentax-tag.c
index 740f135..b53390f 100644
--- a/third_party/libexif/sources/libexif/pentax/mnote-pentax-tag.c
+++ b/third_party/libexif/sources/libexif/pentax/mnote-pentax-tag.c
@@ -153,7 +153,9 @@ mnote_pentax_tag_get_title (MnotePentaxTag t)
 {
 	unsigned int i;
 
+#if defined(BIND_TEXTDOMAIN)
 	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 	for (i = 0; i < sizeof (table) / sizeof (table[0]); i++)
 		if (table[i].tag == t) return (_(table[i].title));
 	return NULL;
@@ -168,7 +170,9 @@ mnote_pentax_tag_get_description (MnotePentaxTag t)
 		if (table[i].tag == t) {
 			if (!table[i].description || !*table[i].description)
 				return "";
+#if defined(BIND_TEXTDOMAIN)
 			bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
+#endif
 			return _(table[i].description);
 		}
 	return NULL;
