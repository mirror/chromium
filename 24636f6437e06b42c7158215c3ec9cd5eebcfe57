{
  "comments": [
    {
      "key": {
        "uuid": "a133dfa5_efc5c658",
        "filename": "third_party/WebKit/Source/core/html/forms/FileInputType.cpp",
        "patchSetId": 1
      },
      "lineNbr": 429,
      "author": {
        "id": 1001040
      },
      "writtenOn": "2017-12-07T19:41:31Z",
      "side": 1,
      "message": "Do some platforms use \\n for this, or is it always \\r?",
      "revId": "24636f6437e06b42c7158215c3ec9cd5eebcfe57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97b644c6_08ca0ffa",
        "filename": "third_party/WebKit/Source/core/html/forms/FileInputType.cpp",
        "patchSetId": 1
      },
      "lineNbr": 429,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2017-12-07T19:54:09Z",
      "side": 1,
      "message": "Based on KeyboardClickableInputTypeView we use \u0027\\r\u0027 everywhere here. (I assume by this layer of the code everything has been normalized.)",
      "parentUuid": "a133dfa5_efc5c658",
      "revId": "24636f6437e06b42c7158215c3ec9cd5eebcfe57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "427f2172_6321007d",
        "filename": "third_party/WebKit/Source/core/html/forms/FileInputType.cpp",
        "patchSetId": 1
      },
      "lineNbr": 429,
      "author": {
        "id": 1115933
      },
      "writtenOn": "2017-12-11T05:35:06Z",
      "side": 1,
      "message": "I think we should use key() instead of charCode(). Maybe we can check for ToKeyboardEvent(event)-\u003ekey() \u003d\u003d \"Enter\" \u0026\u0026 !ToKeyboardEvent(event)-\u003erepeat() like HTMLAnchorElement does.",
      "parentUuid": "97b644c6_08ca0ffa",
      "revId": "24636f6437e06b42c7158215c3ec9cd5eebcfe57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec7d9c9b_4f1f7987",
        "filename": "third_party/WebKit/Source/core/html/forms/FileInputType.cpp",
        "patchSetId": 1
      },
      "lineNbr": 429,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2017-12-11T22:05:44Z",
      "side": 1,
      "message": "Thanks! That makes the code much more readable! Should we change KeyboardClickableInputTypeView::HandleKeypressEvent() as well? It seems to me that the logic should be the same between this override and that method. Doing that in the next PS.\n\nAlso, the repeat() test doesn\u0027t make sense to me here.\n\n* keypress: We want to ignore both repeats and non-repeats in keypress; we\u0027re worried about a repeat auto-committing the dialog, but the initial invoke here doesn\u0027t need to be repeated for that to happen.\n* keyup: doesn\u0027t repeat; only occurs when the key is actually released.\n\nWhat am missing?",
      "parentUuid": "427f2172_6321007d",
      "revId": "24636f6437e06b42c7158215c3ec9cd5eebcfe57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9b05fce_27cf8755",
        "filename": "third_party/WebKit/Source/core/html/forms/FileInputType.cpp",
        "patchSetId": 1
      },
      "lineNbr": 437,
      "author": {
        "id": 1001040
      },
      "writtenOn": "2017-12-07T19:41:31Z",
      "side": 1,
      "message": "Why are HandleKeyupEvent and HandleKeypressEvent similar but different? I don\u0027t know this area of code.",
      "revId": "24636f6437e06b42c7158215c3ec9cd5eebcfe57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a45f063e_255c9668",
        "filename": "third_party/WebKit/Source/core/html/forms/FileInputType.cpp",
        "patchSetId": 1
      },
      "lineNbr": 437,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2017-12-07T19:54:09Z",
      "side": 1,
      "message": "The code is new to me as well. It makes more sense if you look at KeyboardClickableInputTypeView though. The default behavior there shared by input type\u003dsubmit etc is:\n\nkeydown: if space, mark as active\nkeypress: if enter, do click\nkeyup: if space and was active, mark inactive and do click\n\nSo this overrides to say \"don\u0027t do the enter logic on keypress and do it on keyup instead\". (I was thinking about making KeyboardClickableInputTypeView parameterizable but the attribute can be modified dynamically, so that\u0027d wait for us making this non-conditional. Other approaches welcome, I don\u0027t have an opinion.)\n\n...\n\nIf you mean \"why \\r vs. Enter?\" that\u0027s down to the difference between a physical key action (which is what keyup/down correspond to) and the generated character (which is what keypress corresponds to). Yay keyboard events.",
      "parentUuid": "c9b05fce_27cf8755",
      "revId": "24636f6437e06b42c7158215c3ec9cd5eebcfe57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bba6cd7_ca64102b",
        "filename": "third_party/WebKit/Source/core/html/forms/FileInputType.cpp",
        "patchSetId": 1
      },
      "lineNbr": 437,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2017-12-11T22:05:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a45f063e_255c9668",
      "revId": "24636f6437e06b42c7158215c3ec9cd5eebcfe57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}