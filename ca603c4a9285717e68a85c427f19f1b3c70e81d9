{
  "comments": [
    {
      "key": {
        "uuid": "84f306cf_d6aa25e0",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 7
      },
      "lineNbr": 164,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-12-01T15:43:26Z",
      "side": 1,
      "message": "This DCHECK doesn\u0027t seem relevant anymore.",
      "range": {
        "startLine": 164,
        "startChar": 2,
        "endLine": 164,
        "endChar": 45
      },
      "revId": "ca603c4a9285717e68a85c427f19f1b3c70e81d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "601f0520_9385c5cf",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 7
      },
      "lineNbr": 164,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-12-04T06:12:36Z",
      "side": 1,
      "message": "Done. Removed this DCHECK.",
      "parentUuid": "84f306cf_d6aa25e0",
      "range": {
        "startLine": 164,
        "startChar": 2,
        "endLine": 164,
        "endChar": 45
      },
      "revId": "ca603c4a9285717e68a85c427f19f1b3c70e81d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a80cdddd_ba5f4c99",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 7
      },
      "lineNbr": 165,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-12-01T15:43:26Z",
      "side": 1,
      "message": "Shouldn\u0027t you be using GetWidget()-\u003eGetNativeView()?",
      "range": {
        "startLine": 165,
        "startChar": 25,
        "endLine": 165,
        "endChar": 38
      },
      "revId": "ca603c4a9285717e68a85c427f19f1b3c70e81d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "328733c0_b72a5457",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 7
      },
      "lineNbr": 165,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-12-04T06:12:36Z",
      "side": 1,
      "message": "This has to check parent of widget of tray bubble view.\n\nI\u0027ve dumped window tree with --ash-debug-shortcuts and Ctrl+Alt+Shift+W.\n\nThe window tree is like\n\n +SettingBubbleContainer\n  +BubbleDialogDelegateView(tray_bubble_view_-\u003eGetWidget()-\u003eGetNativeView())\n  +NetworkStateListDetailedView::InfoBubble\n\nI\u0027ve also confirmed that tray_bubble_view_-\u003eGetWidget()-\u003eGetNativeView()-\u003eparent() \u003d\u003d tray_bubble_view_-\u003eparent_window() with current code.",
      "parentUuid": "a80cdddd_ba5f4c99",
      "range": {
        "startLine": 165,
        "startChar": 25,
        "endLine": 165,
        "endChar": 38
      },
      "revId": "ca603c4a9285717e68a85c427f19f1b3c70e81d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fc08419_7bd86cdf",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 7
      },
      "lineNbr": 165,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-12-04T16:34:33Z",
      "side": 1,
      "message": "I see. So, you basically want to special case any Window in the SettingBubbleContainer *not* the tray (you\u0027re comment about \u0027tray\u0027 on line 160 is wrong). My worry with looking at the SettingBubbleContainer is that it\u0027s entirely possible the tray may spawn a window that isn\u0027t in that container and key events should go to it (perhaps a menu). Does the NetworkStateListDetailedView::InfoBubble have a transient parent of the tray (BubbleDialogDelegateView)?",
      "parentUuid": "328733c0_b72a5457",
      "range": {
        "startLine": 165,
        "startChar": 25,
        "endLine": 165,
        "endChar": 38
      },
      "revId": "ca603c4a9285717e68a85c427f19f1b3c70e81d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df2e9fde_99af69ca",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 7
      },
      "lineNbr": 165,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-12-07T08:09:13Z",
      "side": 1,
      "message": "Yes, I should (and will) update the comment. What do you mean as \"transient parent of the tray\"? Does it mean whether the info bubble is temporary parented to tray (BubbleDialogDelegateView) or not?\n\nIt\u0027s possible that the tray spawn a window that is outside of the container. But this is an assumption which we are making with this approach: all windows for UI of the tray are descendants of the container.\n\nIf we want to address this issue, I think we need to take different approach.",
      "parentUuid": "7fc08419_7bd86cdf",
      "range": {
        "startLine": 165,
        "startChar": 25,
        "endLine": 165,
        "endChar": 38
      },
      "revId": "ca603c4a9285717e68a85c427f19f1b3c70e81d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4ce508f_aceeeb19",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 7
      },
      "lineNbr": 165,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-12-07T18:18:31Z",
      "side": 1,
      "message": "By transient parent I mean wm::GetTransientParent(). More specifically I\u0027m wondering if this fixs the problem:\naura::Window* tray_window \u003d tray_bubble_view_-\u003eGetWidget()-\u003eGetNativeView();\nif (tray_window-\u003eContains(target) || HasTransientAncestor(target, tray_window)) {\n}\n?",
      "parentUuid": "df2e9fde_99af69ca",
      "range": {
        "startLine": 165,
        "startChar": 25,
        "endLine": 165,
        "endChar": 38
      },
      "revId": "ca603c4a9285717e68a85c427f19f1b3c70e81d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}