{
  "comments": [
    {
      "key": {
        "uuid": "30dcf93a_67803cf4",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 129,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-08-21T04:16:52Z",
      "side": 1,
      "message": "I don\u0027t really see the point of the struct, can we just use the single param in this patch? Later patches can add the struct without much difficulty since there is just one callsite.\n\nThen all TODOs can be consolidated at at the function itself and it\u0027s clearer what the method is doing.",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ebc6304_261dcdc7",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 129,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "30dcf93a_67803cf4",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "971eb863_d6340a08",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 129,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "30dcf93a_67803cf4",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be1806e1_dc196d28",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 155,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-08-21T04:16:52Z",
      "side": 1,
      "message": "an EmbeddedWorkerInstanceClient, which is what manages",
      "range": {
        "startLine": 154,
        "startChar": 64,
        "endLine": 155,
        "endChar": 50
      },
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c00896d_f3f2b0aa",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 155,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "be1806e1_dc196d28",
      "range": {
        "startLine": 154,
        "startChar": 64,
        "endLine": 155,
        "endChar": 50
      },
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3556eb4_7fc3df31",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 155,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "be1806e1_dc196d28",
      "range": {
        "startLine": 154,
        "startChar": 64,
        "endLine": 155,
        "endChar": 50
      },
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ee2ba10_99fa51fc",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 159,
      "author": {
        "id": 1001472
      },
      "writtenOn": "2017-08-21T04:03:19Z",
      "side": 1,
      "message": "Sorry, I looked this again but I still feel this is a bit too cryptic name to expose here.  We don\u0027t need to lie about what we do here, but could we still try to use the name that explains the intention here?  Some candidates:\n\nSetUpEmbeddedWorkerChannelForServiceWorker\n\nWith a brief comment about what \u0027embedded worker channel\u0027 means here. We can rename further when EmbeddedWorker gets renamed.",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2960ec16_ed68baf3",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 159,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-08-21T04:16:52Z",
      "side": 1,
      "message": "I can live with that name... I understand the desire to not raise our ugly TODOs to the top-level layers. I think we can just go ahead and change the interface names in a follow-up patch:\n\nEmbeddedWorkerInstanceClient \u003d\u003e ServiceWorkerExecutionManager\nEmbeddedWorkerInstanceHost \u003d\u003e ServiceWorkerExecutionManagerHost",
      "parentUuid": "8ee2ba10_99fa51fc",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b8021e9b_1bae80d6",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 159,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Sure, renamed it to SetUpEmbeddedWorkerChannelForServiceWorker.\n\nThat sound much better than \"EmbeddedWorkerInstance\":)\nCreated an issue for renaming: crbug.com/757295",
      "parentUuid": "2960ec16_ed68baf3",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c5a0bb57_e4f75562",
        "filename": "content/common/renderer.mojom",
        "patchSetId": 5
      },
      "lineNbr": 159,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2960ec16_ed68baf3",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c411618_d53dc975",
        "filename": "content/renderer/render_thread_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 633,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-08-21T04:16:52Z",
      "side": 1,
      "message": "My idea was this should be set after InitializeWebKit() and called blink_initialized_time_\n(admittedly, not really sure whether it matters)",
      "range": {
        "startLine": 633,
        "startChar": 6,
        "endLine": 633,
        "endChar": 37
      },
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67391cbc_83ded66a",
        "filename": "content/renderer/render_thread_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 633,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Ah, sorry, I didn\u0027t understand what is for. Moved just after InitializeWebKit() and renamed to |blink_initialized_time_|.",
      "parentUuid": "0c411618_d53dc975",
      "range": {
        "startLine": 633,
        "startChar": 6,
        "endLine": 633,
        "endChar": 37
      },
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68e7e04f_cc61188f",
        "filename": "content/renderer/render_thread_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 2185,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-08-21T04:16:52Z",
      "side": 1,
      "message": "This seems better in the documentation for EmbeddedWorkerInstanceClientImpl::Create.",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ad1e7f2_043bdf28",
        "filename": "content/renderer/render_thread_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 2185,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68e7e04f_cc61188f",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43058034_0be5146f",
        "filename": "content/renderer/service_worker/embedded_worker_instance_client_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 44,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-08-21T04:16:52Z",
      "side": 1,
      "message": "I don\u0027t really see how that happens though, WorkerContextDestroyed() just deletes wrapper_, which I guess deletes WebEmbeddedWorker (WebEmbeddedWorkerImpl) but I don\u0027t see mojo object there that would link to EmbeddedWorkerInstanceClientImpl. Can you make it even more clear?\n\nOr is it really that the browser side EmbeddedWorkerInstance clears |instance_host_binding_| which kills EmbeddedWorkerInstanceClientImpl?",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d25cb639_fe0ade17",
        "filename": "content/renderer/service_worker/embedded_worker_instance_client_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 44,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Hmm, that\u0027s good point. Currently it\u0027s a big cyclic reference.\n\nEWInstanceClientImpl -(owns)-\u003e WorkerWrapper -(owns)-\u003e WebEWInstance -(owns)-\u003e SWContextClient -(owns)-\u003e EWInstanceClientImpl.\nOnce the worker has been stopped, EWInstanceClientImpl releases the pointer to WorkerWrapper, so destruction happens.\nHowever, it seems better to have EWInstanceClientImpl owns itself, or RenderThreadImpl owns a map to keep EWInstanceClientImpls.\nAdded a TODO comment.",
      "parentUuid": "43058034_0be5146f",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ed04b35_b84e5af1",
        "filename": "content/renderer/service_worker/embedded_worker_instance_client_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 55,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-08-21T04:16:52Z",
      "side": 1,
      "message": "(see my  comment above, nto sure I understand this part)",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e74124ef_97bb36cc",
        "filename": "content/renderer/service_worker/embedded_worker_instance_client_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 55,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-08-22T04:36:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ed04b35_b84e5af1",
      "revId": "cea72a75e964674d1ec7277bcee152e0d863c98b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}