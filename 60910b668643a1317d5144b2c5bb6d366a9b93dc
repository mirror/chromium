{
  "comments": [
    {
      "key": {
        "uuid": "0416c098_4e1ff987",
        "filename": "ui/message_center/BUILD.gn",
        "patchSetId": 2
      },
      "lineNbr": 196,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-07-27T19:24:14Z",
      "side": 1,
      "message": "I\u0027d probably keep the targets unconditional like before and only make their internal contents conditional, so that users don\u0027t need to check for enable_message_center.",
      "range": {
        "startLine": 196,
        "startChar": 12,
        "endLine": 196,
        "endChar": 14
      },
      "revId": "60910b668643a1317d5144b2c5bb6d366a9b93dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "edef4f85_958a8df5",
        "filename": "ui/message_center/BUILD.gn",
        "patchSetId": 2
      },
      "lineNbr": 196,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-07-27T19:57:51Z",
      "side": 1,
      "message": "I tried this for the test_support target in [1], but got a compile error as the linker was told to create a static library without input sources. The logs have been pruned since, unfortunately.\n\nFor the message_center_unittests target it means we\u0027d continue to create an executable that doesn\u0027t do anything for Mac and iOS `all` builds. That seems less desirable than having a conditional in targets that may have to depend on them.\n\nI can remove the conditional in this file, of course. Would you be OK with adding an \"assert(enable_message_center)\" to the top of them, to avoid accidental dependencies?\n\n[1] https://chromium-review.googlesource.com/c/559391/1/ui/message_center/BUILD.gn",
      "parentUuid": "0416c098_4e1ff987",
      "range": {
        "startLine": 196,
        "startChar": 12,
        "endLine": 196,
        "endChar": 14
      },
      "revId": "60910b668643a1317d5144b2c5bb6d366a9b93dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5cb23f2_7132fd68",
        "filename": "ui/message_center/BUILD.gn",
        "patchSetId": 2
      },
      "lineNbr": 196,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-07-27T20:20:32Z",
      "side": 1,
      "message": "imho empty message_center_unittests targets are kind of nice, because then you can add them to testing/buildbot/*.json files independently of toggling the feature.\n\nI\u0027m not sure I understand where in this file you want to put the assert. Like so:\n\ntest(\"m_c_unitt\") {\n  if (enable_message_center) {\n    assert(enable_message_center)  # trivially true\n    ...\n  }\n}\n\nor like so\n\ntest(\"m_c_unitt\") {\n  # defeats purpose of unconditionally defining target since people\n  # depending on it now still need to check for enable_message_center\n  assert(enable_message_center)\n  if (enable_message_center) {\n    ...\n  }\n}\n\n?",
      "parentUuid": "edef4f85_958a8df5",
      "range": {
        "startLine": 196,
        "startChar": 12,
        "endLine": 196,
        "endChar": 14
      },
      "revId": "60910b668643a1317d5144b2c5bb6d366a9b93dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10b310ad_80e71c94",
        "filename": "ui/message_center/BUILD.gn",
        "patchSetId": 2
      },
      "lineNbr": 196,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-07-28T16:41:05Z",
      "side": 1,
      "message": "Good point on the asserts - agreed.\n\nIn this case we\u0027re heading in the other direction, we\u0027re reducing platform support. (I.e. the target has already been removed from the Mac buildbots.) There\u0027s a whole bunch of other messy dependencies, notably that even Android depends on some Message Center code, that I\u0027d love to get rid of. Stricter dependencies and gn checks will help there, imo.\n\nPer our discussion - let\u0027s land this, and go from there.",
      "parentUuid": "d5cb23f2_7132fd68",
      "range": {
        "startLine": 196,
        "startChar": 12,
        "endLine": 196,
        "endChar": 14
      },
      "revId": "60910b668643a1317d5144b2c5bb6d366a9b93dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}