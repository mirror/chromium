{
  "comments": [
    {
      "key": {
        "uuid": "e2f6681a_71790e14",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T07:55:29Z",
      "side": 1,
      "message": "This looks not a part of \"crash\". Do we want to rename the enum class name somehow to include \"start\"? ArcInstanceEvent maybe? But not really representing \"crashing\", though... Hmm...",
      "range": {
        "startLine": 22,
        "startChar": 2,
        "endLine": 22,
        "endChar": 18
      },
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0088bbce_0d5c6234",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1003166
      },
      "writtenOn": "2017-10-12T15:05:29Z",
      "side": 1,
      "message": "ArcInstanceLifetimeEvent? Do we also want to record clean shutdowns?",
      "parentUuid": "e2f6681a_71790e14",
      "range": {
        "startLine": 22,
        "startChar": 2,
        "endLine": 22,
        "endChar": 18
      },
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24f0dfa7_2ffb0ec8",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T21:41:03Z",
      "side": 1,
      "message": "Good naming idea, done.\n\nRe shutdown, recording the number of OnSessionStopped(SHUTDOWN) calls is trivial, but as you know, on shutdown, we call OnSessionStopped(SHUTDOWN) synchronously without waiting for the dbus reply. So I\u0027m not really sure counting OnSessionStopped(SHUTDOWN) calls makes sense. For now, I\u0027d just focus on crash events.",
      "parentUuid": "0088bbce_0d5c6234",
      "range": {
        "startLine": 22,
        "startChar": 2,
        "endLine": 22,
        "endChar": 18
      },
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a7231814_338dfbcf",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T07:55:29Z",
      "side": 1,
      "message": "nit: maybe better to share the name for histogram and enum?",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df83e8b9_8eba2b2e",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T08:47:44Z",
      "side": 1,
      "message": "If you\u0027re okay with using \"Container\" in the components/arc/ C++ code, I\u0027d switch to that. AFAIK we don\u0027t use the term here though.\n\nUsing \"Instance\" as a UMA histogram name is probably not a good idea since \"Instance\" is a components/arc/ specific term and its meaning is probably unclear to PMs.",
      "parentUuid": "a7231814_338dfbcf",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37205217_23a94675",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T15:26:21Z",
      "side": 1,
      "message": "I don\u0027t have strong opinion. So, Container is also fine, or keeping ArcInstance/Container name inconsistency is also acceptable if you\u0027d like.\nAs for naming of \"Container\", maybe good to have a very short comment about that perspective, since in ARC, we use \"Instance\".",
      "parentUuid": "df83e8b9_8eba2b2e",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40f83ca4_67dfd0f0",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T21:41:03Z",
      "side": 1,
      "message": "Switched to Container and added some comments. Done.",
      "parentUuid": "37205217_23a94675",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "813d78e2_3b2bec0d",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T07:55:29Z",
      "side": 1,
      "message": "nit/optional: as |out_uma_to_record| is available only when this returns true,\nnowadays I\u0027d recommend to use base::Optional\u003cArcInstanceCrashEvent\u003e.",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec5a15b9_78263094",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T21:41:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "813d78e2_3b2bec0d",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "71f22f82_324612ce",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T07:55:29Z",
      "side": 1,
      "message": "Should this condition be checked \"before\" |was_running|, considering a following situation?\n- ARC is first boot then CRASH for some reason (then UMA is recorded here).\n- ARC is automatically rebooted, but then CRASHed again before Mojo connection is established (then UMA is recorded again).\n\nI think we\u0027d like to have corresponding START and \"either CRASH_EARLY or CRASH\"?\nWhat\u0027s the expected behavior here?",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbd6ab70_7889bbdb",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T08:47:44Z",
      "side": 1,
      "message": "Will move this up as you suggested. Yes the UMA event sequence should match \u0027(START(CRASH_EARLY|CRASH)?)*\u0027.",
      "parentUuid": "71f22f82_324612ce",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3269229_cf3dbfaf",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T15:26:21Z",
      "side": 1,
      "message": "Thank you for clarification. Probably nice to have a comment about the concept of the expected UMA event sequence on enum, too?",
      "parentUuid": "bbd6ab70_7889bbdb",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e91a2ce7_cb94c9e6",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T21:41:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3269229_cf3dbfaf",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c40364e_46b46857",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 292,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T07:55:29Z",
      "side": 1,
      "message": "nit: Can this be closer to L309?",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44d3c7b5_49e56654",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 292,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T21:41:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3c40364e_46b46857",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b08e9bb4_78d4d9de",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 308,
      "author": {
        "id": 1003166
      },
      "writtenOn": "2017-10-12T15:05:29Z",
      "side": 1,
      "message": "Is this guaranteed to be called always? IIRC at some point there were cases in which this function was not called for clean shutdowns due to us needing to wait for the D-Bus callback but the messageloop was sometimes stopped before that was delivered.",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58a8faf9_b6dd3e26",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 308,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-10-12T15:26:21Z",
      "side": 1,
      "message": "If you meant at the very end of UI thread lifetime, yes, it should.\nAfter UI message loop stops, OnShutdown() should be called, which invokes ArcSession::Shutdown(), which intentionally synchronously invokes OnShutdown() to let the caller give it a try to make a graceful shutdown (like this).\nIn that case, stop_reason would be \"SHUTDOWN\".",
      "parentUuid": "b08e9bb4_78d4d9de",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4bdb205a_bed501e0",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 308,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T21:41:03Z",
      "side": 1,
      "message": "It is called always. On shutdown, this function is called without waiting for the D-Bus reply.",
      "parentUuid": "b08e9bb4_78d4d9de",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ef47fd3_3eee0c31",
        "filename": "components/arc/arc_session_runner.cc",
        "patchSetId": 1
      },
      "lineNbr": 308,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-10-12T21:41:03Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "58a8faf9_b6dd3e26",
      "revId": "f724e187fc7b4b3606cf88300db357dff54e9a6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}