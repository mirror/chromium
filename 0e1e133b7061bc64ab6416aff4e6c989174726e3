{
  "comments": [
    {
      "key": {
        "uuid": "e4593b17_e9c66e93",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ChromeActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 769,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-26T17:06:58Z",
      "side": 1,
      "message": "Does SmartSelection need the compositor to be initialized before setting its enabled value?",
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "247cbe5b_a85f65f1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ChromeActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 769,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "I don\u0027t think so, this call can happen very early, it just sets a static boolean.  I was looking for general Chrome startup code that would also apply to CCTs, etc, and this was the best place I could find.  For WebView this fragment is in WebViewChromiumFactoryProvider#startChromiumLocked.\n\nChangwan and/or Shimi, maybe you have an opinion on this?  Another option is to just change or remove the SmartSelectionToggle -- it\u0027s a tiny class that doesn\u0027t really do anything.  I\u0027d be inclined to rename it SmartSelectionController and just have one static init method that auto-enables based on platform sdk version.  If you can think of anything similar that follows this pattern let me know!",
      "parentUuid": "e4593b17_e9c66e93",
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97e80fb0_3c810829",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ChromeActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 769,
      "author": {
        "id": 1186107
      },
      "writtenOn": "2017-09-26T22:54:52Z",
      "side": 1,
      "message": "I think we could remove SmartSelectionToggle and put sdk version check in SmartSelectionClient#create to simplify code. SmartSelectionToggle#setEnabled is only used to distinguish Chrome and WebView currently IMO.",
      "parentUuid": "247cbe5b_a85f65f1",
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef49a295_640ac59a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ChromeActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 769,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T23:19:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "97e80fb0_3c810829",
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78b1e039_8398cf1a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchFieldTrial.java",
        "patchSetId": 3
      },
      "lineNbr": 382,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-26T17:06:58Z",
      "side": 1,
      "message": "This description reads oddly to me. How about something like:\n\n\"Whether Smart Select as the only handler of long-press on Android O is disabled. If this returns true, the Contextual Search Bar will be allowed to show in response to a long-press gesture on Android O.\"",
      "range": {
        "startLine": 382,
        "startChar": 15,
        "endLine": 382,
        "endChar": 52
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e83b0860_76269cd9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchFieldTrial.java",
        "patchSetId": 3
      },
      "lineNbr": 382,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "Done, but added \", in addition to the Smart Select UX\" at the end.",
      "parentUuid": "78b1e039_8398cf1a",
      "range": {
        "startLine": 382,
        "startChar": 15,
        "endLine": 382,
        "endChar": 52
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24011133_acfbc0c1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1221,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-26T17:06:58Z",
      "side": 1,
      "message": "nit: will be connected?",
      "range": {
        "startLine": 1221,
        "startChar": 14,
        "endLine": 1221,
        "endChar": 28
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6087f368_69a75ebb",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1221,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "24011133_acfbc0c1",
      "range": {
        "startLine": 1221,
        "startChar": 14,
        "endLine": 1221,
        "endChar": 28
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "225d6c76_2bd81d1d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1628,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-26T17:06:58Z",
      "side": 1,
      "message": "Is there a better check for whether smart select is enabled?",
      "range": {
        "startLine": 1628,
        "startChar": 45,
        "endLine": 1628,
        "endChar": 92
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39bdc7c7_241bb69d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1628,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "I\u0027ve been thinking about checking on this, but it\u0027s complicated: Android uses a \"null\" ML model on O to disable Smart Select so we may not be able to distinguish between a \"no results\" and \"disabled\" response.  I decided to try to keep everything simple by just assuming SS is active (or will be active) on any O+ build.\n\nI\u0027ll send email to validate my assumption, so we can reopen this if needed.",
      "parentUuid": "225d6c76_2bd81d1d",
      "range": {
        "startLine": 1628,
        "startChar": 45,
        "endLine": 1628,
        "endChar": 92
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "291c1eb4_37bc948f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1628,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-27T01:32:55Z",
      "side": 1,
      "message": "It sounds like Changwan is proposing a global Chrome/Webview feature that we can use to de/activate smart select, which seems like a reasonable approach to me.",
      "parentUuid": "39bdc7c7_241bb69d",
      "range": {
        "startLine": 1628,
        "startChar": 45,
        "endLine": 1628,
        "endChar": 92
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72d0c43b_d22ca936",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1633,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-26T17:06:58Z",
      "side": 1,
      "message": "Does this method get called if the user does:\n1. Tap, CS shows\n2. Tap on selected text, selection pins show",
      "range": {
        "startLine": 1632,
        "startChar": 20,
        "endLine": 1633,
        "endChar": 67
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "399daf7e_676aa661",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1633,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "Yes, that\u0027s exactly the circumstance this code is meant to handle.  Embellished the comment.",
      "parentUuid": "72d0c43b_d22ca936",
      "range": {
        "startLine": 1632,
        "startChar": 20,
        "endLine": 1633,
        "endChar": 67
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "612e1196_0dcd1b0e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1633,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-27T01:32:55Z",
      "side": 1,
      "message": "I thought we had discussed that once CS was showing, it should continue processing the gesture stream. If CS starts with a tap-gesture that turns into a long-press, it continues processing until it\u0027s hidden due to a base page tap or cleared selection.\n\nDid we decide to go a different direction?",
      "parentUuid": "399daf7e_676aa661",
      "range": {
        "startLine": 1632,
        "startChar": 20,
        "endLine": 1633,
        "endChar": 67
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32e5e1f3_514a7c44",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
        "patchSetId": 3
      },
      "lineNbr": 1633,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-27T01:45:22Z",
      "side": 1,
      "message": "We did, but I\u0027m thinking it\u0027s simpler to go the other way -- any time the selection handles are showing activate just smart select.  Then we can have the SelectionPopupController support multiple clients and no additional mode logic is needed, beyond the change right here to suppress our UX on long-press when SS is active.  See the bug for more details.",
      "parentUuid": "612e1196_0dcd1b0e",
      "range": {
        "startLine": 1632,
        "startChar": 20,
        "endLine": 1633,
        "endChar": 67
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91664a73_385d7fa3",
        "filename": "content/public/android/java/src/org/chromium/content/browser/ContentViewCore.java",
        "patchSetId": 3
      },
      "lineNbr": 2137,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-09-26T17:06:58Z",
      "side": 1,
      "message": "nit: JavaDoc",
      "range": {
        "startLine": 2137,
        "startChar": 27,
        "endLine": 2137,
        "endChar": 45
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c8d85eb_61b4fd79",
        "filename": "content/public/android/java/src/org/chromium/content/browser/ContentViewCore.java",
        "patchSetId": 3
      },
      "lineNbr": 2137,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T21:39:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "91664a73_385d7fa3",
      "range": {
        "startLine": 2137,
        "startChar": 27,
        "endLine": 2137,
        "endChar": 45
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec8e818_036839be",
        "filename": "content/public/android/java/src/org/chromium/content/browser/SmartSelectionProvider.java",
        "patchSetId": 3
      },
      "lineNbr": 127,
      "author": {
        "id": 1186107
      },
      "writtenOn": "2017-09-26T22:54:52Z",
      "side": 1,
      "message": "If we removed \"private final int TextClassifier mTextClassifier\" above, this is the one in SmartSelectionProvider now, looks like there is no logic change for now, but it reads confusing to me.",
      "range": {
        "startLine": 127,
        "startChar": 12,
        "endLine": 127,
        "endChar": 27
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db217699_e64716f4",
        "filename": "content/public/android/java/src/org/chromium/content/browser/SmartSelectionProvider.java",
        "patchSetId": 3
      },
      "lineNbr": 127,
      "author": {
        "id": 1107894
      },
      "writtenOn": "2017-09-26T23:19:06Z",
      "side": 1,
      "message": "Oh, sorry about the confusion.  Eclipse flagged a warning here and I assumed it was due to an unused member, but it\u0027s really a conflict with the member of the same name in the outer class.  \n\nI don\u0027t think there\u0027s any good reason to change this now, so I\u0027ve reverted it.  Let me know if you think it would be good to rename this member to something like \"localClassifier\" to prevent the warning and clarify the code.",
      "parentUuid": "4ec8e818_036839be",
      "range": {
        "startLine": 127,
        "startChar": 12,
        "endLine": 127,
        "endChar": 27
      },
      "revId": "0e1e133b7061bc64ab6416aff4e6c989174726e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}