{
  "comments": [
    {
      "key": {
        "uuid": "f8f7344a_c9a3b00e",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "optional: Maybe it\u0027s more usual that make |task_runner_| a SequencedTaskRunner and use DeleteSoon() instead of PostTask()? But this also works.",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 65,
        "endChar": 80
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15a2687b_9a8dddb4",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "It requires additional \"new base::ScopedFD\".\nAlso, now this line is used for buf_ too.",
      "parentUuid": "f8f7344a_c9a3b00e",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 65,
        "endChar": 80
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57add167_27e5083d",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T04:41:47Z",
      "side": 1,
      "message": "Ah, you\u0027re right. Thanks.",
      "parentUuid": "15a2687b_9a8dddb4",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 65,
        "endChar": 80
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ad8fdfc_7f40ab18",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "AFAIK treating |result| \u003d\u003d 0 as a failure is unusual. If you really intend so, please document it clearly in the header comment.",
      "range": {
        "startLine": 96,
        "startChar": 6,
        "endLine": 96,
        "endChar": 17
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f56de0b_e3170345",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "FileStreamReader::Read returns 0 iff it reaches EOF.\nAs size_ is already checked in DoRead(), receiving 0 here is unexpected and it should be handled as an error.",
      "parentUuid": "0ad8fdfc_7f40ab18",
      "range": {
        "startLine": 96,
        "startChar": 6,
        "endLine": 96,
        "endChar": 17
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4351bbc_9410ea30",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T04:41:47Z",
      "side": 1,
      "message": "Usual expectation to read a file is that even if the file is shorter than the requested size the operation succeeds. I believe it\u0027s fair to apply the same expectation to FileStreamForwarder. Please do clarify it.",
      "parentUuid": "0f56de0b_e3170345",
      "range": {
        "startLine": 96,
        "startChar": 6,
        "endLine": 96,
        "endChar": 17
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a83ddfd_1f09070d",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T06:37:06Z",
      "side": 1,
      "message": "When the return value is bool, and there is an expectation about the data size, it\u0027s natural to treat it as an error when there is smaller amount of data than expected.\nFor existing examples, please take a look at WriteFileDescriptor(), AppendToFile(), and ReadFromFD() in base/files/file_util.h.\n\nAdded a comment to file_stream_forwarder.h.",
      "parentUuid": "b4351bbc_9410ea30",
      "range": {
        "startLine": 96,
        "startChar": 6,
        "endLine": 96,
        "endChar": 17
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97c1d469_000ae76b",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T07:18:44Z",
      "side": 1,
      "message": "I\u0027m not sure if there is an established consensus that if the return value type is bool it implies partial read is treated as an error. For example it *might* be handy if we can copy the whole content of |url| into |dest_fd| with |size|\u003dINT64_MAX when the file size is not known in advance. It really depends on how you intend to design this class, and it\u0027s not clear to me without explicit comments or actual CLs to use this class.\n\nAnyway, I strongly recommend having explicit comments. All of examples you mentioned have explicit documentation that it returns an error on partial read/write.",
      "parentUuid": "6a83ddfd_1f09070d",
      "range": {
        "startLine": 96,
        "startChar": 6,
        "endLine": 96,
        "endChar": 17
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "541bf30e_cb722621",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "This logging is verbose but has minimum info, please remove or make it useful.",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 43
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f08ad46_1efc05a3",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "Why do you think this is verbose?\nYou shouldn\u0027t see this log unless something unexpected happens.\n\nThe same goes for OnWriteCompleted().",
      "parentUuid": "541bf30e_cb722621",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 43
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e81d2ea_9a38603f",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T04:41:47Z",
      "side": 1,
      "message": "That\u0027s because I don\u0027t know how this class is used. With the information I have now, I can\u0027t assume this won\u0027t happen often. Please let me see the CL to use this class to continue this discussion.",
      "parentUuid": "4f08ad46_1efc05a3",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 43
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1036c6e_e66ad35a",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T06:37:06Z",
      "side": 1,
      "message": "Sorry, ATM the next CL is not ready yet.\n\nIn this class, LOG(ERROR) is used when handling errors, and I added a comment to clarify what is considered as an error.\nPlease let me know if you need any other info to review this CL.",
      "parentUuid": "9e81d2ea_9a38603f",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 43
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95193429_180907c1",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T07:18:44Z",
      "side": 1,
      "message": "I\u0027ll ask some questions offline.",
      "parentUuid": "b1036c6e_e66ad35a",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 43
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b8607c8_f5853a6a",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "|fd_dest_|, |buf_| can be destroyed before base::WriteFileDescriptor is called.",
      "range": {
        "startLine": 106,
        "startChar": 49,
        "endLine": 106,
        "endChar": 63
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bda1ef4f_ccc96f2c",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "fd_dest_ is closed on the task runner.\n\nChanged the code to destruct buf_ on the task runner too.",
      "parentUuid": "9b8607c8_f5853a6a",
      "range": {
        "startLine": 106,
        "startChar": 49,
        "endLine": 106,
        "endChar": 63
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af7705fe_9e253c27",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T04:41:47Z",
      "side": 1,
      "message": "Makes sense. Thanks for fix to |buf_|.",
      "parentUuid": "bda1ef4f_ccc96f2c",
      "range": {
        "startLine": 106,
        "startChar": 49,
        "endLine": 106,
        "endChar": 63
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd271f0f_101df887",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 115,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "This logging is verbose but has minimum info, please remove or make it useful.",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 34
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2258a62b_aebdfc23",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.cc",
        "patchSetId": 1
      },
      "lineNbr": 115,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "fd271f0f_101df887",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 34
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f1b36cf8_9b3af854",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.h",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "Please document the behavior when this object is destroyed during in-flight operations.",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 45
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2828adc4_e297e6ed",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.h",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "Added a comment.\nAlso, changed the dtor to run the callback even when aborted.",
      "parentUuid": "f1b36cf8_9b3af854",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 45
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "958f3ee3_99af5601",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.h",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "It\u0027s somewhat (though not very) tricky that |offset_| and |size_| are updated as we read data from the source. Please either:\n\n1. Clearly document they are updated after construct\n2. Make them const, and add another variable something like |remaining_size_| which clearly indicates it is updated.",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 65,
        "endChar": 16
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49b9ac84_8693b6cd",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.h",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "Fair enough.\nNow offset_ is now const, and size_ is renamed to remaining_size_.",
      "parentUuid": "958f3ee3_99af5601",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 65,
        "endChar": 16
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ce96ad0_02d4ca93",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.h",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "Please document how this task runner is used.",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 68,
        "endChar": 56
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "833be9c7_d41b3c93",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder.h",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3ce96ad0_02d4ca93",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 68,
        "endChar": 56
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "54db36be_4c8e20f3",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1118346
      },
      "writtenOn": "2017-08-10T01:27:03Z",
      "side": 1,
      "message": "Could you add a comment why this is needed?",
      "range": {
        "startLine": 62,
        "startChar": 29,
        "endLine": 62,
        "endChar": 60
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df7b2c13_4255105f",
        "filename": "chrome/browser/chromeos/arc/fileapi/file_stream_forwarder_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-08-10T04:07:08Z",
      "side": 1,
      "message": "Oops, this line should have been removed before sent for review.",
      "parentUuid": "54db36be_4c8e20f3",
      "range": {
        "startLine": 62,
        "startChar": 29,
        "endLine": 62,
        "endChar": 60
      },
      "revId": "7f0338d4ad8d2d8f4a45585d46bd3e612b429547",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}