{
  "comments": [
    {
      "key": {
        "uuid": "eb99056c_1a9cd42d",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-04T03:51:28Z",
      "side": 1,
      "message": "nit: GetWallpaperOverlayColor",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94ea9e89_921e38f9",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-08-04T20:37:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eb99056c_1a9cd42d",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6dc18891_69554a0f",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 206,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2017-08-03T02:35:50Z",
      "side": 1,
      "message": "drive-by question: Could this use SessionController::IsUserSessionBlocked()?\n\nhttps://cs.chromium.org/chromium/src/ash/session/session_controller.cc?type\u003dcs\u0026q\u003dLOGGED_IN_NOT_ACTIVE\u0026sq\u003dpackage:chromium\u0026l\u003d88\n\nOr does it need different behavior during the unlock animation?",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ffe9bed_776ff484",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 206,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-08-03T18:00:08Z",
      "side": 1,
      "message": "I\u0027ll replace it with SessionController::IsUserSessionBlocked(). We don\u0027t need a different behavior during unlock animation.",
      "parentUuid": "6dc18891_69554a0f",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b23c476e_9e40df8e",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 206,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-08-04T20:37:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1ffe9bed_776ff484",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee1f2885_6e77a911",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2017-08-03T02:35:50Z",
      "side": 1,
      "message": "question: This will cause the entire screen to get painted twice in software. Were we doing something similar in the past in the HTML lock screen, so this is performance neutral? I want to be sure we\u0027re not making overdraw worse.\n\nI vaguely recall seeing something like this in some of jdufault\u0027s work -- jdufault, does this sound familiar?",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "affcd348_8c0a6754",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1127641
      },
      "writtenOn": "2017-08-03T17:42:07Z",
      "side": 1,
      "message": "Previously we dimmed / blurred the screen via HTML background or via ash::ScreenDimmer. ash::ScreenDimmer works via layer()-\u003eSetColor(...).\n\nI\u0027m not familiar enough with layer() to know if the SetColor() call will cause another draw. But if it doesn\u0027t, then yes, we are most likely regressing here - it\u0027d be good to investigate if we can apply the color via layer instead of canvas-\u003eDrawColor.",
      "parentUuid": "ee1f2885_6e77a911",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e982fdd0_eb97e080",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-08-03T18:00:08Z",
      "side": 1,
      "message": "Originally I wanted to use |wallpaper_widget-\u003eGetLayer()-\u003eSetLayerBlur()| and |wallpaper_widget-\u003eGetLayer()-\u003eSetColor()| together. Though |SetLayerBlur()| works, |SetColor()| doesn\u0027t display the color. I have changed the layer type to SOLID_COLOR and double check that layer blur won\u0027t conflict with layer color, so I\u0027m confused and may need some guidance on this.\n\nWe may use ScreenDimmer here, but there\u0027s a performance warning, considering OOBE/login/lock screens may use this for relatively long time: https://cs.chromium.org/chromium/src/ash/wm/screen_dimmer.h?dr\u003dCSs\u0026l\u003d25",
      "parentUuid": "affcd348_8c0a6754",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55c19d80_04073ce0",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2017-08-03T18:30:23Z",
      "side": 1,
      "message": "I wonder if it\u0027s cheaper to draw the entire screen in software and blend each pixel or whether it\u0027s cheaper to add another SOLID_COLOR layer on top and let the GPU composite things. reveman@ might know.\n\nIf the wallpaper widget\u0027s layer contains the pixels of the wallpaper image then I suspect you won\u0027t be able to set it to SOLID_COLOR, or maybe it will get switched back.",
      "parentUuid": "e982fdd0_eb97e080",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f52a3b3_4453b4b1",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-04T03:51:28Z",
      "side": 1,
      "message": "This way of dimming the wallpaper is likely causing 2x overdraw in skia\u0027s rasterizer (sw rasterizer in this case as this is ChromeOS UI). Let\u0027s avoid that.\n\nYou should be able to apply the color adjustment as part of the DrawImageInt call to avoid this. Pass a SkPaint that is set up correctly to the call. I think SkPaint.setColorFilter would be one way of doing this but there might be something simpler and more efficient. +reed, junov for advice.",
      "parentUuid": "55c19d80_04073ce0",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfddc2c0_c7ab2bcb",
        "filename": "ash/wallpaper/wallpaper_view.cc",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-08-04T20:37:47Z",
      "side": 1,
      "message": "Done. I experimented with some of the different blend modes and found |SkBlendMode::kOverlay| is the one matching the mock, but I don\u0027t know much about the reason behind it.\n\nIn the case of wallpaper::WALLPAPER_LAYOUT_TILE, what we really need is:\n       TileImageInt(const ImageSkia\u0026 image,\n                    int dest_x,\n                    int dest_y,\n                    int w,\n                    int h,\n                    cc::PaintFlags* flags)\n\nwhich doesn\u0027t exist in https://cs.chromium.org/chromium/src/ui/gfx/canvas.h?type\u003dcs\u0026q\u003dtileimageint\u0026l\u003d397\n\nIf necessary we\u0027ll add a new function. Otherwise the current usage should be fine?",
      "parentUuid": "4f52a3b3_4453b4b1",
      "revId": "669484557a5830460c7b8a48bf823d38139d5263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}