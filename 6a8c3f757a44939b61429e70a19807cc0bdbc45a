{
  "comments": [
    {
      "key": {
        "uuid": "a6976237_b322a32c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 168,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-07-27T21:06:29Z",
      "side": 1,
      "message": "Might be too short as loading native can take over 5 seconds IIRC.  Should we just reset the timer instead of adding to it?  We could do something like:\n\nRunnable mStopSelfRunnable \u003d new Runnable() {\n  @Override\n  public void run() {\n    stopSelf();\n  }\n}\n\nThen any time we get an intent we can do:\n\nmHandler.removeCallbacks(mStopSelfRunnable);\nmHandler.postDelayed(mStopSelfRunnable, WAIT_TIME_MS);\n\nWhat do you think?",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 29
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1852eac6_812a01c4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 168,
      "author": {
        "id": 1226039
      },
      "writtenOn": "2017-07-27T21:30:27Z",
      "side": 1,
      "message": "Ah that makes sense! Will also make the wait time 6000 ms, with a note to update this in practice if needed.",
      "parentUuid": "a6976237_b322a32c",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 29
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "398e71aa_8de5230c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 168,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-07-28T22:46:18Z",
      "side": 1,
      "message": "Ah actually this gave me an idea.  To make this safe for native library load, can we just cancel the task when we get an intent, and then just post the new delay after the native library loads?",
      "parentUuid": "1852eac6_812a01c4",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 29
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f49f5f7e_b5e44e40",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 168,
      "author": {
        "id": 1226039
      },
      "writtenOn": "2017-07-29T00:48:13Z",
      "side": 1,
      "message": "I originally thought the intention of the wait was to make sure the native library has enough time to load. If we post the delay after the native library loads, there\u0027s a chance the service might be killed in the meantime. What do you think?",
      "parentUuid": "398e71aa_8de5230c",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 29
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fe92004_866004d1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 168,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-08-07T21:14:08Z",
      "side": 1,
      "message": "I think it might be the opposite.  If we post the delay before the library loads, if the library is taking too long we\u0027ll stop the service too early.  If we post the delay after we\u0027ve executed the command, we\u0027re guaranteed to run it.  Android shouldn\u0027t kill the service automatically in under a minute anyway IIUC.",
      "parentUuid": "f49f5f7e_b5e44e40",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 29
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8dc93076_97bfae7a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 168,
      "author": {
        "id": 1226039
      },
      "writtenOn": "2017-08-08T17:40:54Z",
      "side": 1,
      "message": "Sounds good!",
      "parentUuid": "1fe92004_866004d1",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 29
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "635bd6ff_33ccb01b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 179,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-07-27T21:06:29Z",
      "side": 1,
      "message": "Awesome thanks for filing! :)",
      "range": {
        "startLine": 179,
        "startChar": 82,
        "endLine": 179,
        "endChar": 98
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c97da965_2f220d6a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/DownloadBroadcastManager.java",
        "patchSetId": 9
      },
      "lineNbr": 179,
      "author": {
        "id": 1226039
      },
      "writtenOn": "2017-07-27T21:30:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "635bd6ff_33ccb01b",
      "range": {
        "startLine": 179,
        "startChar": 82,
        "endLine": 179,
        "endChar": 98
      },
      "revId": "6a8c3f757a44939b61429e70a19807cc0bdbc45a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}