{
  "comments": [
    {
      "key": {
        "uuid": "ac3729b4_baba4395",
        "filename": "chrome/browser/extensions/context_menu_matcher.cc",
        "patchSetId": 1
      },
      "lineNbr": 259,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-06-28T22:19:11Z",
      "side": 1,
      "message": "Mistakenly removed the \u0027c\u0027 character. Will add back in next CL.",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "867caf95_571fb40d",
        "filename": "chrome/browser/extensions/context_menu_matcher.cc",
        "patchSetId": 1
      },
      "lineNbr": 259,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac3729b4_baba4395",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9041e2d7_4a1305a7",
        "filename": "chrome/browser/extensions/extension_context_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 179,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-06-28T22:19:11Z",
      "side": 1,
      "message": "Does this method need to be added? It\u0027s later used in SimpleMenuModel here (https://chromium-review.googlesource.com/c/553578/1/ui/base/models/simple_menu_model.cc#374) in IsVisibleAt(...), and IsVisibleAt() doesn\u0027t seem to be used anywhere else that is directly related to this CL. \n\nThe only use that I see for this new method IsCommandIdVisible(...) is for testing in extension_context_menu_model_unittest.cc.",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18fa4fec_acbb5663",
        "filename": "chrome/browser/extensions/extension_context_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 179,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-06-29T20:20:45Z",
      "side": 1,
      "message": "Yes, adding this method here is the right thing to do.  It allows the menu model to override the default behavior.",
      "parentUuid": "9041e2d7_4a1305a7",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1ba539d_86c7b5db",
        "filename": "chrome/browser/extensions/extension_context_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 179,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "18fa4fec_acbb5663",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0fd77b77_812659fe",
        "filename": "chrome/browser/extensions/extension_context_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-06-28T22:19:11Z",
      "side": 1,
      "message": "I noticed that IsCommandIdEnabled and IsCommandIdChecked have additional checks. \nLet me know if similar checks are needed in this method.",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1cd778ca_59c30915",
        "filename": "chrome/browser/extensions/extension_context_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-06-29T20:20:45Z",
      "side": 1,
      "message": "I don\u0027t think we necessarily need additional checks, but we might need to change the return value here.  In particular, I think that if we return false here, we\u0027ll automatically hide the other commands, which include things like uninstallation, etc.  Here too, if no tests fail, might indicate a place we could add a few more checks (e.g., the uninstallation check should never be hidden for a normal extension).",
      "parentUuid": "0fd77b77_812659fe",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6fba428_92070709",
        "filename": "chrome/browser/extensions/extension_context_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "Firstly, I added tests to ensure that we don\u0027t automatically hide standard menu items, like uninstall, here: https://chromium-review.googlesource.com/c/553578/1..2/chrome/browser/extensions/extension_context_menu_model_unittest.cc#347.\n\nSecondly, I think it makes that standard menu items should always be visible, hence the switch from return false to true here (line 188). \n\nHowever, if the item is unknown -- i.e. neither a standard menu item nor a one specified by the extension -- then maybe we should throw a NOTREACHED(). To account for that, we could do something like:\n\n switch (command_id) {\n    case NAME:\n     case CONFIGURE:\n    case INSPECT_POPUP: {\n    case UNINSTALL:\n    case TOGGLE_VISIBILITY:\n    case MANAGE:\n    case PAGE_ACCESS_SUBMENU:\n    case PAGE_ACCESS_RUN_ON_CLICK:\n    case PAGE_ACCESS_RUN_ON_SITE:\n    case PAGE_ACCESS_RUN_ON_ALL_SITES:\n      return true;\n    default:\n      NOTREACHED() \u003c\u003c \"Unknown command\" \u003c\u003c command_id;\n  }",
      "parentUuid": "1cd778ca_59c30915",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28b8d171_d5ce1545",
        "filename": "chrome/browser/extensions/menu_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 250,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-06-29T20:20:45Z",
      "side": 1,
      "message": "Hmm... my understanding is that this populates a menu item from a dictionary stored in the preferences, but this means that old menu items won\u0027t have a visibility key.  We need to make sure that this is backwards-compatible.  Does this work with old items?  (Another possible test case)",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad9afaac_99e0f2f0",
        "filename": "chrome/browser/extensions/menu_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 250,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "Good catch. This isn\u0027t backwards-compatible. I tested this and it does not pass the MenuManagerTest.PopulateFromValue.\n\nTo account for the new key, I changed the code so that we don\u0027t return a nullptr if the kVisibleKey is not present. wdyt?",
      "parentUuid": "28b8d171_d5ce1545",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ae889c8_dffa36de",
        "filename": "chrome/browser/renderer_context_menu/render_view_context_menu.cc",
        "patchSetId": 1
      },
      "lineNbr": 1441,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "I\u0027ll add the new line back in the next patch.",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ca51b0a_4351a0bc",
        "filename": "chrome/common/extensions/api/chrome_web_view_internal.json",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-06-29T20:20:45Z",
      "side": 1,
      "message": "nit: I think \"true for shown and false for hidden\" is probably self-evident.  What about something like: \"Whether the item is visible in the menu\"?",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95415fbe_4bb45d42",
        "filename": "chrome/common/extensions/api/chrome_web_view_internal.json",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ca51b0a_4351a0bc",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31d0bcf6_462ec012",
        "filename": "chrome/common/extensions/api/context_menus.json",
        "patchSetId": 1
      },
      "lineNbr": 174,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-06-28T22:19:11Z",
      "side": 1,
      "message": "The other properties under updateProperties do not include a description. I added one just for completeness, but let me know if I should follow the existing pattern and exclude the description.",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3947800b_b3e2ecf3",
        "filename": "chrome/common/extensions/api/context_menus.json",
        "patchSetId": 1
      },
      "lineNbr": 174,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-06-29T20:20:45Z",
      "side": 1,
      "message": "I think including one is fine.",
      "parentUuid": "31d0bcf6_462ec012",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "adee961d_cac51675",
        "filename": "chrome/common/extensions/api/context_menus.json",
        "patchSetId": 1
      },
      "lineNbr": 174,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3947800b_b3e2ecf3",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e5bac23_7c89de90",
        "filename": "ui/base/models/simple_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 373,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-06-28T22:19:11Z",
      "side": 1,
      "message": "Just wanted to double check if additional work needs to be done in this file.\n\nI assume that the delegate_ object below would refer to ExtensionContextMenuModel delegate at the correct times, and not always default to the SimpleMenuModel::Delegate.",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7903f964_1a3b55b6",
        "filename": "ui/base/models/simple_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 373,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-06-29T20:20:45Z",
      "side": 1,
      "message": "Correct; for extension context menus, the delegate should already be the ExtensionContextMenuModel and this should \"just work\".",
      "parentUuid": "5e5bac23_7c89de90",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48baae24_b1151365",
        "filename": "ui/base/models/simple_menu_model.cc",
        "patchSetId": 1
      },
      "lineNbr": 373,
      "author": {
        "id": 1172795
      },
      "writtenOn": "2017-07-04T02:08:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7903f964_1a3b55b6",
      "revId": "1e5b791f09319def5147862f1ed067b475415b2f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}