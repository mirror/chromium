{
  "comments": [
    {
      "key": {
        "uuid": "ca162703_6dd91822",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 2766,
      "author": {
        "id": 1146978
      },
      "writtenOn": "2017-12-19T13:56:00Z",
      "side": 1,
      "message": "OS_CHROMEOS doesn\u0027t actually imply ENABLE_MUS because of this line:\n\nhttps://cs.chromium.org/chromium/src/ui/base/ui_features.gni?type\u003dcs\u0026q\u003dui_features.gni\u0026sq\u003dpackage:chromium\u0026l\u003d22\n\nenable_mus can be toggled on/off at compile time in GN args though. You\u0027ll need to check both here to be safe?",
      "range": {
        "startLine": 2766,
        "startChar": 39,
        "endLine": 2766,
        "endChar": 49
      },
      "revId": "fee1ce902914d72196a9eaa20c2103158e2c4b5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a64ba96c_0e8cff6b",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 2766,
      "author": {
        "id": 1175809
      },
      "writtenOn": "2017-12-19T14:13:44Z",
      "side": 1,
      "message": "Thank you for the feedback, Kyle.\n\nCorrect. \"enable_mus \u003d is_chromeos\" in ui_features.gni is what I meant by \"chromeos implies mus\".\nHowever, from your comment, it sounded to me like if it was still possible to build ChromeOS without MUS enabled. I do not think this is the case anymore (although one can still set enable_mus false on its gn.args, yes). Do you mean that chromeos builds without mus are still a supported configuration today? If so, then checking both to be same would be the best way to do.\n\nThat being said, this CL goes from the premise that compile checking for ENABLE_MUS supersedes OS_CHROMEOS.\nSo, the proposed change would be the same as something like:\n\n#if !os_android \u0026\u0026 !os_chromeos \u0026\u0026 !os_any_platform_that_enables_mus\n\nor for simplicity\n\n#if !os_android \u0026\u0026 !enable_mus.\n\ndoes it make sense to you?",
      "parentUuid": "ca162703_6dd91822",
      "range": {
        "startLine": 2766,
        "startChar": 39,
        "endLine": 2766,
        "endChar": 49
      },
      "revId": "fee1ce902914d72196a9eaa20c2103158e2c4b5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "203513b4_65302d1d",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 2766,
      "author": {
        "id": 1175809
      },
      "writtenOn": "2017-12-19T14:16:35Z",
      "side": 1,
      "message": "\u003e If so, then checking both to be same would be the best way to do.\n\ns/same/safe",
      "parentUuid": "a64ba96c_0e8cff6b",
      "range": {
        "startLine": 2766,
        "startChar": 39,
        "endLine": 2766,
        "endChar": 49
      },
      "revId": "fee1ce902914d72196a9eaa20c2103158e2c4b5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92f2615e_ca42290f",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 2766,
      "author": {
        "id": 1146978
      },
      "writtenOn": "2017-12-20T14:37:32Z",
      "side": 1,
      "message": "Oh, right ImageTransportFactory doesn\u0027t exist in mus. The existing logic shouldn\u0027t change. Either ENABLE_MUS needs an ImageTransportFactory or ENABLE_MUS has to get the value from somewhere else. I don\u0027t think you want to add an ImageTransportFactory, so I would do something like this for now, it will avoid the crash and make it clear what is actually happening.\n\n#if !defined(OS_ANDROID) \u0026\u0026 !defined(OS_CHROMEOS)\n#if !defined(ENABLE_MUS)\n...\n#endif\n// TODO(tonikitoo): Check if renderer should use software compositing\n// through some mechanism that isn\u0027t ImageTransportFactory with mus.\n#endif",
      "parentUuid": "203513b4_65302d1d",
      "range": {
        "startLine": 2766,
        "startChar": 39,
        "endLine": 2766,
        "endChar": 49
      },
      "revId": "fee1ce902914d72196a9eaa20c2103158e2c4b5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ecbbc53_8134a67b",
        "filename": "content/browser/renderer_host/render_process_host_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 2766,
      "author": {
        "id": 1175809
      },
      "writtenOn": "2017-12-20T15:37:10Z",
      "side": 1,
      "message": "Done. Thank you, Kyle.",
      "parentUuid": "92f2615e_ca42290f",
      "range": {
        "startLine": 2766,
        "startChar": 39,
        "endLine": 2766,
        "endChar": 49
      },
      "revId": "fee1ce902914d72196a9eaa20c2103158e2c4b5c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}