{
  "comments": [
    {
      "key": {
        "uuid": "a8b28b00_af9235e3",
        "filename": "third_party/WebKit/Source/modules/webdatabase/DatabaseManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1115863
      },
      "writtenOn": "2017-05-29T03:37:48Z",
      "side": 1,
      "message": "I think we need to keep |callback| as TraceWrapperMember\u003c\u003e in DatabaseManager to make sure the |callback| can be reachable from v8. Please refer my CL for ResizeCallback.\n\nhttps://chromium-review.googlesource.com/c/515183/",
      "range": {
        "startLine": 68,
        "startChar": 17,
        "endLine": 68,
        "endChar": 24
      },
      "revId": "431c03ead7c1e9b50b203bd9b2ac95546bb34ba4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e5df4204_fca318b1",
        "filename": "third_party/WebKit/Source/modules/webdatabase/DatabaseManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1116047
      },
      "writtenOn": "2017-05-29T03:50:09Z",
      "side": 1,
      "message": "No one except WTF::Bind wrapping this function has members of DatabaseCallback.  Do we need TraceWrapperMember\u003c\u003e in this case?\n\n\n\n    TaskRunnerHelper::Get(TaskType::kDatabaseAccess,\n                          database-\u003eGetExecutionContext())\n        -\u003ePostTask(BLINK_FROM_HERE, WTF::Bind(\u0026DatabaseCallbackHandleEvent,\n                                              WrapPersistent(creation_callback),\n                                              WrapPersistent(database)));",
      "parentUuid": "a8b28b00_af9235e3",
      "range": {
        "startLine": 68,
        "startChar": 17,
        "endLine": 68,
        "endChar": 24
      },
      "revId": "431c03ead7c1e9b50b203bd9b2ac95546bb34ba4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4bc1cd8f_6f62976b",
        "filename": "third_party/WebKit/Source/modules/webdatabase/DatabaseManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1115863
      },
      "writtenOn": "2017-05-29T04:05:10Z",
      "side": 1,
      "message": "I think yes. It seems that there will be a chance for v8 to execute GC before the scheduled task runs. Basically a callback function needs an \"owner\" which can be reachable from v8 when the callback outlives the current task.\n\nFor example, https://codereview.chromium.org/2820113006/ was reverted (https://codereview.chromium.org/2866503002) because it didn\u0027t keep references.",
      "parentUuid": "e5df4204_fca318b1",
      "range": {
        "startLine": 68,
        "startChar": 17,
        "endLine": 68,
        "endChar": 24
      },
      "revId": "431c03ead7c1e9b50b203bd9b2ac95546bb34ba4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcfaaf95_26066728",
        "filename": "third_party/WebKit/Source/modules/webdatabase/DatabaseManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1116047
      },
      "writtenOn": "2017-05-29T04:37:40Z",
      "side": 1,
      "message": "ok, now a Database instance owns a DatabaseCallback.",
      "parentUuid": "4bc1cd8f_6f62976b",
      "range": {
        "startLine": 68,
        "startChar": 17,
        "endLine": 68,
        "endChar": 24
      },
      "revId": "431c03ead7c1e9b50b203bd9b2ac95546bb34ba4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}