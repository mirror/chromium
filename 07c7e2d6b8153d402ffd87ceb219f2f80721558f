{
  "comments": [
    {
      "key": {
        "uuid": "37044d07_77979eb6",
        "filename": "content/browser/compositor/gpu_browser_compositor_output_surface.cc",
        "patchSetId": 13
      },
      "lineNbr": 83,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2017-10-24T21:03:02Z",
      "side": 1,
      "message": "What makes Unretained(this) safe?",
      "revId": "07c7e2d6b8153d402ffd87ceb219f2f80721558f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68398dd8_4ce19ddb",
        "filename": "content/browser/compositor/gpu_browser_compositor_output_surface.cc",
        "patchSetId": 13
      },
      "lineNbr": 83,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2017-10-24T21:15:57Z",
      "side": 1,
      "message": "Because two reasons:\n1. In the dtor, we will set the vsync callback to null.\n2. Seems GetCommandBufferProxy() returned object is owned by this class, so the callback should not be called, if this object is destroyed.\n\nMaybe we should remove the weak_ptr_factory_,and change SetSwapBuffersCompletionCallback() as well. ?",
      "parentUuid": "37044d07_77979eb6",
      "revId": "07c7e2d6b8153d402ffd87ceb219f2f80721558f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "277ea585_adddf40d",
        "filename": "content/browser/compositor/gpu_browser_compositor_output_surface.cc",
        "patchSetId": 13
      },
      "lineNbr": 83,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2017-10-24T21:21:16Z",
      "side": 1,
      "message": "Will the callback passed here not end up in a posted task ever? If it does, does something else guard that task to prevent it from running this callback?",
      "parentUuid": "68398dd8_4ce19ddb",
      "revId": "07c7e2d6b8153d402ffd87ceb219f2f80721558f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32fe2083_e5ba8d1c",
        "filename": "content/browser/compositor/gpu_browser_compositor_output_surface.cc",
        "patchSetId": 13
      },
      "lineNbr": 83,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2017-10-25T12:14:18Z",
      "side": 1,
      "message": "Currently, the callback will be called from [1]. It is a Chrome IPC message handler. The handler will only be called when the handler is not null and the CommandBufferProxyImpl is alive. And for SwapBuffersCompletionCallback, it is also called by a Chrome IPC message handler. It should be safe to use Unretained(this) here too. Do you want to remove the weak_ptr_factory_? \n\n[1] https://cs.chromium.org/chromium/src/gpu/ipc/client/command_buffer_proxy_impl.cc?type\u003dcs\u0026l\u003d800.",
      "parentUuid": "277ea585_adddf40d",
      "revId": "07c7e2d6b8153d402ffd87ceb219f2f80721558f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e12acdd6_6336edca",
        "filename": "content/browser/compositor/gpu_browser_compositor_output_surface.cc",
        "patchSetId": 13
      },
      "lineNbr": 83,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2017-10-25T15:23:14Z",
      "side": 1,
      "message": "Thanks, looks like the swap callback is similar. Sure let\u0027s remove it, and leave a comment on the two Set callback methods that they run the callback without PostTask-ing it?",
      "parentUuid": "32fe2083_e5ba8d1c",
      "revId": "07c7e2d6b8153d402ffd87ceb219f2f80721558f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe4e816e_e6966e62",
        "filename": "content/browser/compositor/gpu_browser_compositor_output_surface.cc",
        "patchSetId": 13
      },
      "lineNbr": 181,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2017-10-24T21:03:02Z",
      "side": 1,
      "message": "How would you get here with a null client?",
      "revId": "07c7e2d6b8153d402ffd87ceb219f2f80721558f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1a4e627_7488d393",
        "filename": "content/browser/compositor/gpu_browser_compositor_output_surface.cc",
        "patchSetId": 13
      },
      "lineNbr": 181,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2017-10-24T21:15:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe4e816e_e6966e62",
      "revId": "07c7e2d6b8153d402ffd87ceb219f2f80721558f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}