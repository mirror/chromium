{
  "comments": [
    {
      "key": {
        "uuid": "cdc39e4d_c8509239",
        "filename": "android_webview/browser/aw_browser_context.cc",
        "patchSetId": 13
      },
      "lineNbr": 29,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-11-30T23:43:28Z",
      "side": 1,
      "message": "not needed?",
      "revId": "a11dc3295512f76792a62b05d63b76c0e35bdd4b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c73bc2b_8981dd18",
        "filename": "android_webview/browser/aw_browser_context.cc",
        "patchSetId": 13
      },
      "lineNbr": 29,
      "author": {
        "id": 1214309
      },
      "writtenOn": "2017-12-04T16:58:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cdc39e4d_c8509239",
      "revId": "a11dc3295512f76792a62b05d63b76c0e35bdd4b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3751d24c_bdb69fcc",
        "filename": "android_webview/browser/aw_content_browser_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 521,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-11-30T23:43:28Z",
      "side": 1,
      "message": "sanity check, did the old code check policy blacklist before or after throttles?",
      "revId": "a11dc3295512f76792a62b05d63b76c0e35bdd4b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d05b506c_583f9514",
        "filename": "android_webview/browser/aw_content_browser_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 521,
      "author": {
        "id": 1214309
      },
      "writtenOn": "2017-12-04T16:58:46Z",
      "side": 1,
      "message": "That is a good question.  The old way of doing things was through the network delegate and the new way is and will be through throttles.  One should replace the other.  Previously, the blacklisting code would run via the ChromeNetworkDelegate::OnBeforeURLRequest. I believe throttles run around the same time, but not sure if it makes any difference.  Are you concerned that InterceptNavigationDelegate might need to run iif it passed the blacklist?",
      "parentUuid": "3751d24c_bdb69fcc",
      "revId": "a11dc3295512f76792a62b05d63b76c0e35bdd4b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb67932e_6c72c4d4",
        "filename": "android_webview/browser/aw_content_browser_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 521,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-12-04T17:08:57Z",
      "side": 1,
      "message": "\u003e That is a good question.  The old way of doing things was through the network delegate and the new way is and will be through throttles.  One should replace the other.  Previously, the blacklisting code would run via the ChromeNetworkDelegate::OnBeforeURLRequest. I believe throttles run around the same time, but not sure if it makes any difference.  Are you concerned that InterceptNavigationDelegate might need to run iif it passed the blacklist?\n\nYeah, something like that. Just want to avoid any observable behavior changes for apps. Could you just double check the ordering?\n\nAlso separate double check, this only applies to main frames?",
      "parentUuid": "d05b506c_583f9514",
      "revId": "a11dc3295512f76792a62b05d63b76c0e35bdd4b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c337d2ac_c1512890",
        "filename": "android_webview/browser/aw_content_browser_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 521,
      "author": {
        "id": 1214309
      },
      "writtenOn": "2017-12-05T06:17:44Z",
      "side": 1,
      "message": "The InterceptNavigationThrottle will run *before* the check against the blocklist.\n\nPrior to this change, the aw_network_delegate.cc (~55) would OnBeforeURLRequest would handle the block listing.  We\u0027ve moved this to the policy_blacklist_navigation_throttle.cc (~130) WillStartRequest(). In the following run, we block before OnBeforeURLRequest() is called.\n\nFor example:\n\nW/chromium( 2165): [WARNING:intercept_navigation_throttle.cc(25)] WillStartRequest called\nW/chromium( 2165): [WARNING:policy_blacklist_navigation_throttle.cc(130)] WillStartRequest called\nW/chromium( 2165): [WARNING:aw_network_delegate.cc(55)] OnBeforeURLRequest called\nW/chromium( 2165): [WARNING:aw_network_delegate.cc(65)] OnBeforeStartTransaction called\nW/chromium( 2165): [WARNING:aw_network_delegate.cc(76)] OnStartTransaction called\n\nNote that these things are running on different threads, so timing will have an impact on ordering.\n\n\nAlso, yes blacklisting is main frame only.",
      "parentUuid": "fb67932e_6c72c4d4",
      "revId": "a11dc3295512f76792a62b05d63b76c0e35bdd4b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}