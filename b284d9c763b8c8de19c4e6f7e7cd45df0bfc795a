{
  "comments": [
    {
      "key": {
        "uuid": "5687a9d5_6b831df9",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-29T13:22:18Z",
      "side": 1,
      "message": "typo: webStateIsVisible",
      "range": {
        "startLine": 75,
        "startChar": 39,
        "endLine": 75,
        "endChar": 56
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b257508a_99c2af28",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T17:34:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5687a9d5_6b831df9",
      "range": {
        "startLine": 75,
        "startChar": 39,
        "endLine": 75,
        "endChar": 56
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "262fd030_83f91cb1",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-29T13:22:18Z",
      "side": 1,
      "message": "typo: multiple",
      "range": {
        "startLine": 99,
        "startChar": 59,
        "endLine": 99,
        "endChar": 67
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "415281f9_bd6bc58a",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T17:34:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "262fd030_83f91cb1",
      "range": {
        "startLine": 99,
        "startChar": 59,
        "endLine": 99,
        "endChar": 67
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a6a2cec1_7747b54c",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 152,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-29T16:19:08Z",
      "side": 1,
      "message": "In the fully fleshed out coordinator model, there is a mediator object that\u0027s responsible for pushing model-layer updates to the view controller. Typically the mediator is where all of the \"business logic\" lives, and also it\u0027s where any async or threading logic is. Because the mediator doesn\u0027t directly respond to UI events, it\u0027s thus straightforward to unit test.\n\n(the mediator pushes updates to the view controller via a \u0027consumer\u0027 protocol; it doesn\u0027t depend directly on the VC implementation).\n\nI think there\u0027s enough complexity and business logic here to factor out into a mediator object. That would mean the coordinator is functionally just forwarding some of the DownloadManagerTabHelperDelegate methods to the mediator, but I\u0027d prefer to do that and keep the coordinator\u0027s responsibility limited to just managing plumbing.",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 152,
        "endChar": 28
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bdb27bf_c3198e0d",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 152,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T16:38:19Z",
      "side": 1,
      "message": "This class is less than 300 LOC and perfectly testable. In this specific case Mediator will not improve testability, but will add some additional complexity. DownloadTaskObserver is C++ interface, which means that either mediator should be C++ object (which is rather not typical), or we need DownloadTaskObserverBridge class.\n\nOn the design doc I suggested to stick with just a coordinator for now and revisit the need for Mediator if this class grows. How about I land model code as a part of coordinator in this CL and will experiment with Mediator code to see if it actually worth implementing?\n\nIf we choose to go with Mediator, we still have to decide it it should be C++ or Objective-C class. I think we should prototype both options, which will be easier in a separate CL.",
      "parentUuid": "a6a2cec1_7747b54c",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 152,
        "endChar": 28
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d15c561b_1cc5ef40",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 178,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-29T16:19:08Z",
      "side": 1,
      "message": "Asynchronously",
      "range": {
        "startLine": 178,
        "startChar": 3,
        "endLine": 178,
        "endChar": 18
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19724705_fc66566d",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 178,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T17:34:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d15c561b_1cc5ef40",
      "range": {
        "startLine": 178,
        "startChar": 3,
        "endLine": 178,
        "endChar": 18
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "654c8bbc_fcda31c4",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 187,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-29T13:22:18Z",
      "side": 1,
      "message": "typo: interactions",
      "range": {
        "startLine": 187,
        "startChar": 67,
        "endLine": 187,
        "endChar": 80
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "761b1319_d0ebe8e5",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 187,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T17:34:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "654c8bbc_fcda31c4",
      "range": {
        "startLine": 187,
        "startChar": 67,
        "endLine": 187,
        "endChar": 80
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3be6c259_b670bcb5",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 194,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-29T13:22:18Z",
      "side": 1,
      "message": "base::TaskTraits supports initializer list and the common way is to inline the constructor in the PostTaskWithTraits:\n\n  base::PostTaskWithTraits(\n    FROM_HERE, {base::MayBlock(), base::TaskPriority::USER_VISIBLE},\n    base::BindBlockArc(^{\n      ...\n    });",
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82c1527b_00bdf7b0",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 194,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T17:34:19Z",
      "side": 1,
      "message": "This arguably makes formatting worse, because of indentations inside the block. I would prefer to keep the code as it is if you don\u0027t have objections.",
      "parentUuid": "3be6c259_b670bcb5",
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5951b91a_7be9d357",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-29T13:22:18Z",
      "side": 1,
      "message": "typo: downloadFilePath",
      "range": {
        "startLine": 205,
        "startChar": 19,
        "endLine": 205,
        "endChar": 35
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f19e02da_31851a2c",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T17:34:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5951b91a_7be9d357",
      "range": {
        "startLine": 205,
        "startChar": 19,
        "endLine": 205,
        "endChar": 35
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "735f0463_b14a0362",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 209,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-29T13:22:18Z",
      "side": 1,
      "message": "ditto, inline the constructor of base::TaskTraits\n\n  base::CreateSequencedTaskRunnerWithTraits(\n    {base::MayBlock(), base::TaskPriority::BACKGROUND});",
      "range": {
        "startLine": 209,
        "startChar": 22,
        "endLine": 209,
        "endChar": 63
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57945f0b_f1b386b2",
        "filename": "ios/chrome/browser/ui/download/download_manager_coordinator.mm",
        "patchSetId": 2
      },
      "lineNbr": 209,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-29T17:34:19Z",
      "side": 1,
      "message": "And here inlining actually look better to me. Done.",
      "parentUuid": "735f0463_b14a0362",
      "range": {
        "startLine": 209,
        "startChar": 22,
        "endLine": 209,
        "endChar": 63
      },
      "revId": "b284d9c763b8c8de19c4e6f7e7cd45df0bfc795a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}