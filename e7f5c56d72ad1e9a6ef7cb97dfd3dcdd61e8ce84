{
  "comments": [
    {
      "key": {
        "uuid": "1bac4f86_0f3acdc4",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-09-29T00:49:28Z",
      "side": 1,
      "message": "ugh. gerrit\u0027s copy detection is still busted - https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d6441 . Weirdly, diffing this file to \u0027initial upload\u0027 shows a rename, but diffing to \u0027base\u0027 does not.",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "178f91fc_6a392d4a",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": ":(",
      "parentUuid": "1bac4f86_0f3acdc4",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d3180f7_bc702189",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 41,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "This will actually not catch iframes on a page, it will only be true for webviews.",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05533c02_5a7ec9bc",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 41,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "The call that creates the Throttle is guarded by an if(handle-\u003eIsInMainFrame()) statement[1]. That said, I think it\u0027s weird that the logic is split and it would be nice if all the logic was in a single place but since this is mainly a file rename for this part of the code I kept it as is.\n\n[1] https://cs.chromium.org/chromium/src/chrome/browser/chrome_content_browser_client.cc?q\u003dchrome_content_browser_client.cc\u0026sq\u003dpackage:chromium\u0026dr\u0026l\u003d3235",
      "parentUuid": "1d3180f7_bc702189",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4a4f5fc_a404617f",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 76,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "You probably don\u0027t want to monitor same-document navigations, correct? If so, this might be another check to add.",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f1098b9_4f76c6a3",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 76,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "This patch just renames this file and removes some logic for non-platform apps. All the checks for platform apps are left unchanged. I agree that capturing same-document navigations is weird but I don\u0027t think it should be fixed in this patch.",
      "parentUuid": "a4a4f5fc_a404617f",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d87cad0_999eb57d",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 76,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-10-04T20:19:26Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2f1098b9_4f76c6a3",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "110907d2_22ad5f3f",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 79,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "This DCHECK isn\u0027t needed, as dereferencing nullptr will cause a crash anyway.",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e3da1cf_c8ede9f2",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 79,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "I agree. I removed it from the BookmarkAppNavigationThrottle, but leaving this as is since it\u0027s just a rename.",
      "parentUuid": "110907d2_22ad5f3f",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4cdc7e3_17de7b3c",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 81,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "If you don\u0027t want to attach to subframes, this is the location to do it, since the NavigationHandle knows whether it is the main frame or not.",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82927944_b92b110d",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 81,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "Yup, BookmarkAppNavigationThrottle does it in this method. For PlatformAppNavigationThrottle this is done in chrome_content_browser_client.cc[1].\n\n[1] https://cs.chromium.org/chromium/src/chrome/browser/chrome_content_browser_client.cc?q\u003dchrome_content_browser_client.cc\u0026sq\u003dpackage:chromium\u0026dr\u0026l\u003d3235",
      "parentUuid": "a4cdc7e3_17de7b3c",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ab021ab_470d2106",
        "filename": "chrome/browser/apps/platform_app_url_redirector.cc",
        "patchSetId": 8
      },
      "lineNbr": 81,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-10-04T20:19:26Z",
      "side": 1,
      "message": "Yay for having logic living in disparate places. This is why I prefer the pattern of MaybeCreateFooThrottle method, being static on the throttle which encapsulates the logic of when to create one, so it is all within one file and one location that people need to read. Just ideas for future changes :)",
      "parentUuid": "82927944_b92b110d",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44ef6748_7ecba7bc",
        "filename": "chrome/browser/apps/platform_app_url_redirector.h",
        "patchSetId": 8
      },
      "lineNbr": 21,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "nit: Should it not be PlatformAppNavigationRedirector? This code does not redirect all URLs, just navigations.",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "400c8c11_408978aa",
        "filename": "chrome/browser/apps/platform_app_url_redirector.h",
        "patchSetId": 8
      },
      "lineNbr": 21,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "44ef6748_7ecba7bc",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9716b155_b321c90d",
        "filename": "chrome/browser/chrome_content_browser_client.cc",
        "patchSetId": 8
      },
      "lineNbr": 3197,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "If this throttle is for PWAs, why is it named BookmarkApp..., it seems very misleading in its name.",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2f43514_c6f1f71a",
        "filename": "chrome/browser/chrome_content_browser_client.cc",
        "patchSetId": 8
      },
      "lineNbr": 3197,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "Yeah, that flag name was a mistake of mine. I added it when it wasn\u0027t clear how Desktop PWAs were going to be implemented. We usually try to steer away from the name PWA in our code since it\u0027s mainly a marketing name. The flag should now be kBookmarkAppsWindowing.",
      "parentUuid": "9716b155_b321c90d",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "942e6917_9382995d",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 8
      },
      "lineNbr": 91,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "Just FYI, this won\u0027t handle all cases, for example \"about:blank\" will not give you the correct origin. You can get the correct origin by using source-\u003eGetMainFrame()-\u003eGetLastCommittedOrigin().",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9af3732_ec06acb3",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 8
      },
      "lineNbr": 91,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "942e6917_9382995d",
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eb14bb7e_e0cd2390",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 8
      },
      "lineNbr": 132,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-09-29T20:40:22Z",
      "side": 1,
      "message": "What does this do? Does it navigate in any way or shape in the |source| WebContents? If so, you should not be doing it here, but using a PostTask to ensure it happens on another iteration of the event loop.",
      "range": {
        "startLine": 132,
        "startChar": 2,
        "endLine": 132,
        "endChar": 17
      },
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "187ad14e_905137fa",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 8
      },
      "lineNbr": 132,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-10-03T05:28:09Z",
      "side": 1,
      "message": "It opens a new Browser, it doesn\u0027t navigate the WebContents. That said, posting a task is coming in a follow up patch[1] :) since we need to close the WebContents and also there are some bugs in which the new Browser is opened while the WebContents is being created causing the new Browser to end up in the background.\n\n[1] https://crrev.com/c/691635",
      "parentUuid": "eb14bb7e_e0cd2390",
      "range": {
        "startLine": 132,
        "startChar": 2,
        "endLine": 132,
        "endChar": 17
      },
      "revId": "e7f5c56d72ad1e9a6ef7cb97dfd3dcdd61e8ce84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}