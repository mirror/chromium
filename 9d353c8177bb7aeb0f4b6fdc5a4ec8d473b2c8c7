{
  "comments": [
    {
      "key": {
        "uuid": "16732e0e_a41ba8f1",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "is this for std::abs? Maybe \u003ccmath\u003e would be more clear.",
      "range": {
        "startLine": 8,
        "startChar": 10,
        "endLine": 8,
        "endChar": 17
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4de38e72_978752e1",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "16732e0e_a41ba8f1",
      "range": {
        "startLine": 8,
        "startChar": 10,
        "endLine": 8,
        "endChar": 17
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ded3f503_278bc2e6",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-08-15T20:24:55Z",
      "side": 1,
      "message": "some ideas:\n- switch from std::vector to std::unique_ptr\u003cuint16_t[]\u003e -- the power of vector seems unused\n- allocate the buffer with base::MakeUnique\u003cuint_t[]\u003e(kNumSlots), which will zero initialize it\n- remove is_valid_ and instead make the presence of the buffer the case for validity:\n  bool IsValid() const { return histogram_; }\n- allocate the buffer in this function (if needed), and be sure that this validity condition is always satisfied\n- if an instance of this class isn\u0027t meant to be reused (Compute doesn\u0027t currently handle it -- it would need to zero out the buffer and reset is_valid_ if so), consider moving computation into the ctor.",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32ab5cd5_ff1af425",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "Done:\n- Switch to std::unique_ptr\u003cuint32_t[]\u003e.\n- Allocate with base::MakeUnique().\n- Using buffer\u0027s presence to indicate validity.\n- Check validity on use.\n\nStill discussing:\n- The main use case of this function is muck like the unit test: Number of items to compare is already known. So I\u0027m using vector\u003cBinaryDataHistogram\u003e() to instantiate empty instances, then initialize in a separate loop. I prefer this since it\u0027s simpler than the alternative of needing explicit instantiation via constructor.",
      "parentUuid": "ded3f503_278bc2e6",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10014b4e_a6cb80ac",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "region.read\u003cuint16_t\u003e(i)",
      "range": {
        "startLine": 28,
        "startChar": 18,
        "endLine": 28,
        "endChar": 34
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6eaa755_4309c0d3",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10014b4e_a6cb80ac",
      "range": {
        "startLine": 28,
        "startChar": 18,
        "endLine": 28,
        "endChar": 34
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5b7b597_1be75304",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-08-15T20:24:55Z",
      "side": 1,
      "message": "nit: inline the arithmetic in the statement below",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3f5d751_34d422c2",
        "filename": "chrome/installer/zucchini/binary_data_histogram.cc",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d5b7b597_1be75304",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a2f7dfa6_95cd8be4",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "Unused (in .h)?",
      "range": {
        "startLine": 13,
        "startChar": 15,
        "endLine": 13,
        "endChar": 22
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c659952_db7418fa",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a2f7dfa6_95cd8be4",
      "range": {
        "startLine": 13,
        "startChar": 15,
        "endLine": 13,
        "endChar": 22
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0778a461_9297fc2c",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "Nit: Maybe kNumIntervals of kNumBins?",
      "range": {
        "startLine": 26,
        "startChar": 23,
        "endLine": 26,
        "endChar": 32
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6c7694d_a59642a1",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "Taking kNumBins.",
      "parentUuid": "0778a461_9297fc2c",
      "range": {
        "startLine": 26,
        "startChar": 23,
        "endLine": 26,
        "endChar": 32
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af45d573_1d0869ce",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-08-15T20:24:55Z",
      "side": 1,
      "message": "is this required to be 65536? or 1 \u003c\u003c 16? consider either setting the number to the required value directly, or adding a static_assert if you require both the actual value and the way it\u0027s derived to match.",
      "range": {
        "startLine": 26,
        "startChar": 68,
        "endLine": 26,
        "endChar": 73
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f24bcefd_128cf147",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-08-15T20:24:55Z",
      "side": 1,
      "message": "nit: prefer the enum hack so you don\u0027t have to be concerned with storage:\n  enum { kNumSlots \u003d ... }",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e05718b_c9ad5266",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f24bcefd_128cf147",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24e5b618_0dcf4341",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "65536 was added in comment to give reader a quick ballpark of memory requirement.\n\nUsing static_assert now.",
      "parentUuid": "af45d573_1d0869ce",
      "range": {
        "startLine": 26,
        "startChar": 68,
        "endLine": 26,
        "endChar": 73
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2c5c77c_c63cb1d8",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "I would suggest having\nbool Compute(ConstBufferView region) // Returns true on success.\nNote that is_valid_ would be removed.\nFurthermore, maybe have this and constructor private, and then have a static method\nbase::Optional\u003cBinaryDataHistogram\u003e Create(ConstBufferView region)\nthat creates the object and calls Compute() on it. That way, the caller is forced to check the result, and the object is guaranteed to be valid.",
      "range": {
        "startLine": 32,
        "startChar": 7,
        "endLine": 32,
        "endChar": 14
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "efe9ef4f_e3a9915a",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "For simplicity, I\u0027d rather avoid use base::Optional\u003c\u003e or even std::unique_ptr\u003c\u003e here. For regular usage we\u0027d store histograms in a fixed-size std::vector\u003c\u003e. Dealing with resizing and copying create unnecessary work and does not make program more readable.\n\nMeanwhile, IsValid() is only used in CHECK(), so yeah keeping |is_valid_| is silly.  I can store this state by initializing |histogram_| only if valid.",
      "parentUuid": "f2c5c77c_c63cb1d8",
      "range": {
        "startLine": 32,
        "startChar": 7,
        "endLine": 32,
        "endChar": 14
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c7416aa_6787c802",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T19:19:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "efe9ef4f_e3a9915a",
      "range": {
        "startLine": 32,
        "startChar": 7,
        "endLine": 32,
        "endChar": 14
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e8c30ab_87897e73",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "Might be worthwhile to have public size() accessor.",
      "range": {
        "startLine": 45,
        "startChar": 9,
        "endLine": 45,
        "endChar": 14
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99119bad_ad7537ad",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "The caller also owns region, and can get size from it.  We only store |size_| so we can normalize score to something between 0 to 1-ish.",
      "parentUuid": "0e8c30ab_87897e73",
      "range": {
        "startLine": 45,
        "startChar": 9,
        "endLine": 45,
        "endChar": 14
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbabad9a_f23fb754",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T19:19:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "99119bad_ad7537ad",
      "range": {
        "startLine": 45,
        "startChar": 9,
        "endLine": 45,
        "endChar": 14
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "064f7c53_16729601",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-08-15T20:24:55Z",
      "side": 1,
      "message": "// The number of 2-byte intervals over which the histogram was computed.",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bc480c5_e17480a8",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "064f7c53_16729601",
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc8e25b2_a3f5446a",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "Is signed necessary?",
      "range": {
        "startLine": 48,
        "startChar": 14,
        "endLine": 48,
        "endChar": 21
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4148fb0_b2b1b143",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "Not for storing. But for Distance() we\u0027ll need to compute difference. To avoid complication re. casting, and ensuring difference of uint32_t will fit, we may as well store everything in signed int.\n\nAdding comments, and extra size check in Compute().",
      "parentUuid": "dc8e25b2_a3f5446a",
      "range": {
        "startLine": 48,
        "startChar": 14,
        "endLine": 48,
        "endChar": 21
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "958023dd_a700874d",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e4148fb0_b2b1b143",
      "range": {
        "startLine": 48,
        "startChar": 14,
        "endLine": 48,
        "endChar": 21
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bab6a140_74834af3",
        "filename": "chrome/installer/zucchini/binary_data_histogram_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-15T17:05:08Z",
      "side": 1,
      "message": "const\nor maybe constexpr?",
      "range": {
        "startLine": 19,
        "startChar": 2,
        "endLine": 19,
        "endChar": 10
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "113843d0_bce4d4ab",
        "filename": "chrome/installer/zucchini/binary_data_histogram_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T18:29:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bab6a140_74834af3",
      "range": {
        "startLine": 19,
        "startChar": 2,
        "endLine": 19,
        "endChar": 10
      },
      "revId": "9d353c8177bb7aeb0f4b6fdc5a4ec8d473b2c8c7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}