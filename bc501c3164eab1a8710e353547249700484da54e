{
  "comments": [
    {
      "key": {
        "uuid": "d112a55d_8d365bd2",
        "filename": "content/renderer/media_recorder/audio_track_recorder.cc",
        "patchSetId": 3
      },
      "lineNbr": 94,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2017-11-02T20:19:27Z",
      "side": 1,
      "message": "PcmAudioEncoder and OpusAudioEncoder seem to share\na lot of commong code, in particular all things \nrelated to the AudioConverter, AudioFifo, params and\npaused. Consider moving common functionality to \nAudioEncoder (which won\u0027t be purely abstract anymore).",
      "range": {
        "startLine": 94,
        "startChar": 26,
        "endLine": 94,
        "endChar": 38
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a562b9f_56e8248d",
        "filename": "content/renderer/media_recorder/audio_track_recorder.cc",
        "patchSetId": 3
      },
      "lineNbr": 94,
      "author": {
        "id": 1250332
      },
      "writtenOn": "2017-11-02T20:42:24Z",
      "side": 1,
      "message": "I\u0027d considered sharing more. However, I wasn\u0027t convinced that all possible encoders/subclasses would use the same mechanisms for handling the audio. Things like handling pauses and buffering aren\u0027t inherently common to all possible encoding formats, even though the two existing classes do things similarly.\n\nI am happy to go either way; gimmie the word and I\u0027ll collapse the common stuff.",
      "parentUuid": "d112a55d_8d365bd2",
      "range": {
        "startLine": 94,
        "startChar": 26,
        "endLine": 94,
        "endChar": 38
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65f1cef8_765840dc",
        "filename": "content/renderer/media_recorder/audio_track_recorder.cc",
        "patchSetId": 3
      },
      "lineNbr": 94,
      "author": {
        "id": 1250332
      },
      "writtenOn": "2017-11-02T20:50:33Z",
      "side": 1,
      "message": "Actually, the pause stuff is common at least, so I\u0027ll factor that out.",
      "parentUuid": "0a562b9f_56e8248d",
      "range": {
        "startLine": 94,
        "startChar": 26,
        "endLine": 94,
        "endChar": 38
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4395ea07_40c55c30",
        "filename": "content/renderer/media_recorder/audio_track_recorder.cc",
        "patchSetId": 3
      },
      "lineNbr": 94,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2017-11-02T21:05:09Z",
      "side": 1,
      "message": "I\u0027d say share as much as possible - all these classes are \ninternal (to this file) anyway, and Cr tends to honour \nland-only-what-you-use and as-simple-as-possible.",
      "parentUuid": "65f1cef8_765840dc",
      "range": {
        "startLine": 94,
        "startChar": 26,
        "endLine": 94,
        "endChar": 38
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fceb5180_8e279e52",
        "filename": "content/renderer/media_recorder/audio_track_recorder.cc",
        "patchSetId": 3
      },
      "lineNbr": 94,
      "author": {
        "id": 1250332
      },
      "writtenOn": "2017-11-02T21:48:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4395ea07_40c55c30",
      "range": {
        "startLine": 94,
        "startChar": 26,
        "endLine": 94,
        "endChar": 38
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e82985e_ec9245b8",
        "filename": "content/renderer/media_recorder/audio_track_recorder.h",
        "patchSetId": 3
      },
      "lineNbr": 70,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2017-11-02T20:19:27Z",
      "side": 1,
      "message": "nit: s/the codec/|codec|/",
      "range": {
        "startLine": 70,
        "startChar": 35,
        "endLine": 70,
        "endChar": 44
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17bb456b_2c536a77",
        "filename": "content/renderer/media_recorder/audio_track_recorder.h",
        "patchSetId": 3
      },
      "lineNbr": 70,
      "author": {
        "id": 1250332
      },
      "writtenOn": "2017-11-02T20:42:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8e82985e_ec9245b8",
      "range": {
        "startLine": 70,
        "startChar": 35,
        "endLine": 70,
        "endChar": 44
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc022be1_1b660690",
        "filename": "content/renderer/media_recorder/audio_track_recorder_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 252,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2017-11-02T20:19:27Z",
      "side": 1,
      "message": "const?",
      "range": {
        "startLine": 252,
        "startChar": 30,
        "endLine": 252,
        "endChar": 36
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96983acc_3d7418ad",
        "filename": "content/renderer/media_recorder/audio_track_recorder_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 252,
      "author": {
        "id": 1250332
      },
      "writtenOn": "2017-11-02T20:42:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cc022be1_1b660690",
      "range": {
        "startLine": 252,
        "startChar": 30,
        "endLine": 252,
        "endChar": 36
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9a4cdaa_8bf00f73",
        "filename": "content/renderer/media_recorder/audio_track_recorder_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 357,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2017-11-02T20:19:27Z",
      "side": 1,
      "message": "This code looks similar to l.292-335. What about \nmerging both:\n\nTEST_P(AudioTrackRecorderTest, OnDataPcm) {\n  // common parts\n  if (opus) {\n    // opus parts\n  } else if (pcm) {\n    // pcm specific\n  } \n\n  // test epilogue\n}\n\nArguably it might look less good than what we have now.",
      "range": {
        "startLine": 339,
        "startChar": 0,
        "endLine": 357,
        "endChar": 41
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b481dd73_dcee9cb7",
        "filename": "content/renderer/media_recorder/audio_track_recorder_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 357,
      "author": {
        "id": 1250332
      },
      "writtenOn": "2017-11-02T20:42:24Z",
      "side": 1,
      "message": "Same here - I actually started off just having one test, but it got confusing. The issue is that we\u0027re sharing the audio source, so the number of times that DoOnEncodedAudio is called is different. Furthermore, the Opus test is kind of weirdly written. In reality the EXPECT* calls can be all grouped together, but it\u0027s written in an interleaved manner, so there\u0027s test code interspersed with checks. Injecting the PCM into that framework reduceed test-understandability for readers in the future.\n\nAs with the other issue, I can still merge if you prefer; I just think it\u0027ll be harder for future maintainers to grok the tests. (Also imagine if we had even more encoding formats.)",
      "parentUuid": "e9a4cdaa_8bf00f73",
      "range": {
        "startLine": 339,
        "startChar": 0,
        "endLine": 357,
        "endChar": 41
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1fb1fc90_7bd5082a",
        "filename": "content/renderer/media_recorder/audio_track_recorder_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 357,
      "author": {
        "id": 1113991
      },
      "writtenOn": "2017-11-02T21:05:09Z",
      "side": 1,
      "message": "The mix of EXPECT and actions intends to be written as\nnear-prose :-) -- but it might not be attained. Since \nthese are test cases anyway I don\u0027t mind leaving it as-is.",
      "parentUuid": "b481dd73_dcee9cb7",
      "range": {
        "startLine": 339,
        "startChar": 0,
        "endLine": 357,
        "endChar": 41
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e82c2e1_591f0400",
        "filename": "content/renderer/media_recorder/audio_track_recorder_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 357,
      "author": {
        "id": 1250332
      },
      "writtenOn": "2017-11-02T21:48:11Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1fb1fc90_7bd5082a",
      "range": {
        "startLine": 339,
        "startChar": 0,
        "endLine": 357,
        "endChar": 41
      },
      "revId": "bc501c3164eab1a8710e353547249700484da54e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}