{
  "comments": [
    {
      "key": {
        "uuid": "8edaa180_cf56d40f",
        "filename": "components/viz/host/hit_test/hit_test_query.cc",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "why do anything if they\u0027re both invalid? I don\u0027t understand.",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c71fb0c_152090a5",
        "filename": "components/viz/host/hit_test/hit_test_query.cc",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "more use of std::swap?\n\nDoes this unmap the handle? If not, you need to unmap the memory before the std::move or you will perpetually leak (virtual) memory.",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c7cc0e2_8446c970",
        "filename": "components/viz/host/hit_test/hit_test_query.cc",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "all the calls to Map can fail and that indicates that the mapping is invalid. You need to verify that the mapping succeeded before attempting to use them.",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4afca8ef_9cfd16bb",
        "filename": "components/viz/host/hit_test/hit_test_query.cc",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "why do we need to map the one that we\u0027re not reading?",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ddae173_c065d42e",
        "filename": "components/viz/host/hit_test/hit_test_query.cc",
        "patchSetId": 3
      },
      "lineNbr": 43,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "do this once in OnSharedMemoryReceived so that all the ugliness can be in one place?",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85af4b11_9077bb31",
        "filename": "components/viz/host/hit_test/hit_test_query_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "I think that you could have done this in a way that doesn\u0027t require as much code change if you\u0027d wanted to. But it doesn\u0027t matter much.",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48ea86e4_4e81d5b3",
        "filename": "components/viz/host/host_frame_sink_manager.cc",
        "patchSetId": 3
      },
      "lineNbr": 183,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "this \"small\" TODO will require a bug to track.",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb23865f_00b32c07",
        "filename": "components/viz/service/hit_test/DEPS",
        "patchSetId": 3
      },
      "lineNbr": 8,
      "author": {
        "id": 1000246
      },
      "writtenOn": "2017-07-31T15:57:15Z",
      "side": 1,
      "message": "as I understand it, this is wrong layering. service (part of the viz process) is rightly forbidden from depending on the host",
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db75741b_b33856d6",
        "filename": "services/viz/compositing/privileged/interfaces/frame_sink_manager.mojom",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 1231224
      },
      "writtenOn": "2017-07-31T14:39:14Z",
      "side": 1,
      "message": "Two suggestions:\n- Can we send only the read_handle?  Only the HitTestAggregator should ever have to write so do we ever need to send it? \n- Would it be better to use a name that describes the data rather than the data type? Eg. UpdateAggregatedHitTestRegionList or OnAggregatedHitTestRegionListUpdated? The current name could refer to anything and it may add value to use a more descriptive name. \n\nEg. UpdateAggregatedHitTestRegionList(cc.mojom.FrameSinkId frame_sink_id,\n                                handle\u003cshared_buffer\u003e aggregated_hit_test_region_list_handle,\n                                uint32 read_size );",
      "range": {
        "startLine": 110,
        "startChar": 2,
        "endLine": 114,
        "endChar": 51
      },
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ce43b11_764647a9",
        "filename": "services/viz/compositing/privileged/interfaces/frame_sink_manager.mojom",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 1211635
      },
      "writtenOn": "2017-07-31T15:21:43Z",
      "side": 1,
      "message": "Can we send only the read_handle?  Only the HitTestAggregator should ever have to write so do we ever need to send it?\n-\u003e Right now it works like this: HitTestAggregator should only send new read_handle and write_handle when they are initialized or updated when the list size gets bigger than the write size; it would send empty handles if HitTestAggregator only swapped handles. HitTestQuery would store/ update these two handles received when they are valid and only swap them to get the new active buffer it should read from when they are not valid (empty handles). So we don\u0027t need to send actual handles all the time and HitTestQuery only needs to Map them once (or more if we update handles). WDYT?\n\nWould it be better to use a name that describes the data rather than the data type?\n-\u003e Yes that\u0027s a better name! Updated and will be in the next patch.",
      "parentUuid": "db75741b_b33856d6",
      "range": {
        "startLine": 110,
        "startChar": 2,
        "endLine": 114,
        "endChar": 51
      },
      "revId": "bd1ef1de9d5fd4ca4be508007630fb0469b9823d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}