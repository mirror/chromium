{
  "comments": [
    {
      "key": {
        "uuid": "6bd82f07_99daf2c3",
        "filename": "third_party/WebKit/Source/core/frame/LocalFrameView.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3672,
      "author": {
        "id": 1125369
      },
      "writtenOn": "2017-10-02T20:00:51Z",
      "side": 1,
      "message": "The name \"ConvertFromLayoutItem\" seems to hide the fact that the function applies the scroll-offset.  May be do the conversion inline in the caller?",
      "revId": "edbfa7c197ec5d5371eb8b342bf4115beada72ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14d5bae3_64cc5650",
        "filename": "third_party/WebKit/Source/core/frame/LocalFrameView.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3672,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-10-02T22:00:28Z",
      "side": 1,
      "message": "I\u0027d rather leave it in here, the conversion is implied to be into Frame coordinates and this would break the symmetry with ConvertToLayoutItem above. We could rename the method to be clearer but I think it\u0027s clear enough from context (since we\u0027re calling FrameView.ConvertFromLayoutItem, it\u0027s implied it\u0027ll be into Frame coordinates). Also, there\u0027s a comment in the header so I think this is fine.",
      "parentUuid": "6bd82f07_99daf2c3",
      "revId": "edbfa7c197ec5d5371eb8b342bf4115beada72ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c429d3e_39ff95e1",
        "filename": "third_party/WebKit/Source/core/input/EventHandler.cpp",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-10-02T22:00:28Z",
      "side": 1,
      "message": "I don\u0027t think we should change this to FloatPoint. Everything related to layout, which hit testing is, should be in LayoutUnits. LayoutUnit is a fixed point type with 1/64 pixel precision. We prefer to use fixed point in layout since error is is constant and not relative to the number size so it keeps everything aligned nicely.\n\nI would leave this as LayoutPoint. You can leave the mouse event values as FloatPoint since they aren\u0027t related to layout and are web-exposed (we don\u0027t want to leak our fixed-point details to web content). Instead of converting all the callsites to FloatPoint like you do now, convert them to LayoutPoint instead. You may need to add and remove some of the conversion functions in FrameView since I think we only have LayoutUnit versions of some of them. In general, I think more places in Blink should be using LayoutPoint rather than IntPoint/FloatPoint.",
      "range": {
        "startLine": 246,
        "startChar": 10,
        "endLine": 246,
        "endChar": 20
      },
      "revId": "edbfa7c197ec5d5371eb8b342bf4115beada72ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a122710_6ede47af",
        "filename": "third_party/WebKit/Source/core/input/EventHandler.cpp",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1230425
      },
      "writtenOn": "2017-10-03T14:07:05Z",
      "side": 1,
      "message": "I was thinking this function has some coordinate conversion, so using FloatPoint in this function maybe more precise. The FloatPoint is converted to LayoutPoint when pass to HitTestResult (Line 273).\nWhen this is using LayoutPoint, some places use it is like \"Float value-\u003eIntPoint-\u003eLayoutPoint\" (eg Line 261), which I think is not good. \nDo you think using LayoutPoint and try not using IntPoint on call sites is better?",
      "parentUuid": "8c429d3e_39ff95e1",
      "range": {
        "startLine": 246,
        "startChar": 10,
        "endLine": 246,
        "endChar": 20
      },
      "revId": "edbfa7c197ec5d5371eb8b342bf4115beada72ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a5fd162_e60a9419",
        "filename": "third_party/WebKit/Source/core/input/EventHandler.cpp",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-10-03T14:31:29Z",
      "side": 1,
      "message": "Yeah, we should replace those conversions so that it stays a LayoutPoint. e.g. on Line 261 you should add overloads for ContentsToRootFrame and RootFrameToContents that work on LayoutPoint so that we avoid losing precision. Did I understand your concern correctly?\n\nWhenever we do a conversion we\u0027re losing some precision so I\u0027d prefer if we convert once from FloatPoint to LayoutPoint and keep it a LayoutPoint throughout. The hit testing code will eventually convert to a LayoutPoint so we should start with a LayoutPoint.\n\nAs an aside: FloatPoint math is more precise when the numbers are close to 0 but the further you get the wider the error gets. With fixed point (i.e. LayoutPoint) the error stays constant regardless of the size of the number so we prefer it for more consistent results on large pages.",
      "parentUuid": "7a122710_6ede47af",
      "range": {
        "startLine": 246,
        "startChar": 10,
        "endLine": 246,
        "endChar": 20
      },
      "revId": "edbfa7c197ec5d5371eb8b342bf4115beada72ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6eb3be1_49f6efd3",
        "filename": "third_party/WebKit/Source/core/input/EventHandler.cpp",
        "patchSetId": 3
      },
      "lineNbr": 261,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-10-03T14:31:29Z",
      "side": 1,
      "message": "While you\u0027re here, could you rename this to `main_content_point`. I got a little confused until I looked closer, I think this name is misleading.",
      "range": {
        "startLine": 261,
        "startChar": 19,
        "endLine": 261,
        "endChar": 34
      },
      "revId": "edbfa7c197ec5d5371eb8b342bf4115beada72ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}