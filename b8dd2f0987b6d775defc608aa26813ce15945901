{
  "comments": [
    {
      "key": {
        "uuid": "da6e5a6a_48fe2a98",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-05T23:31:11Z",
      "side": 1,
      "message": "Who keeps the Frame object alive while the worklet is running?\n\ni.e., is it sufficient to block out the null frame case only when the worklet starts?",
      "revId": "b8dd2f0987b6d775defc608aa26813ce15945901",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4cbb2df_64af3d8a",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-12-05T23:46:43Z",
      "side": 1,
      "message": "Hmm. I only know Worklet constructor needs a Frame object to function. From WebAudio POV, if the |audio_worklet_| is null, it will prohibit all the related operations from happening.\n\nHowever, I am also not really sure what happens if a frame object is gone while WebAudio is running.\n\nnhiroki@ might be able to answer this question better.",
      "parentUuid": "da6e5a6a_48fe2a98",
      "revId": "b8dd2f0987b6d775defc608aa26813ce15945901",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9b3cf79_d2801ef6",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-12-05T23:57:53Z",
      "side": 1,
      "message": "Eventually the execution context is kept by LifecycleObserver, but it is \u003cWeakMember\u003e:\nhttps://cs.chromium.org/chromium/src/third_party/WebKit/Source/platform/LifecycleObserver.h?sq\u003dpackage:chromium\u0026l\u003d56\n\nIs a valid Frame a prerequisite for Worklet? Not sure if the behavior is well-defined in the spec as well. This might lead to a spec issue.",
      "parentUuid": "f4cbb2df_64af3d8a",
      "revId": "b8dd2f0987b6d775defc608aa26813ce15945901",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "445f7433_fbacaa18",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-12-06T00:49:32Z",
      "side": 1,
      "message": "Bare Worklet doesn\u0027t pay attention to Frame. Instead, it observes ExecutionContext (Document) via LifecycleObserver. When the context is destroyed, Worklet::IsContextDestroyed() is called. If AudioWorklet wants to abort tasks when the context is destroyed, it should inherit IsContextDestroyed().\n\nIf we want to avoid dependency on Frame from bare Worklet, we could remove it from the constructor (PaintWorklet still needs it though) and pass Document instead.\n\nI think behavior after Frame is gone is not well-defined generally in the HTML spec. IIUC, DedicatedWorker also doesn\u0027t pay attention to it.",
      "parentUuid": "c9b3cf79_d2801ef6",
      "revId": "b8dd2f0987b6d775defc608aa26813ce15945901",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bec4847e_9879b5ca",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1116024
      },
      "writtenOn": "2017-12-05T23:42:46Z",
      "side": 1,
      "message": "Move this test into the upper if on line 152?",
      "revId": "b8dd2f0987b6d775defc608aa26813ce15945901",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "096d2207_7684f924",
        "filename": "third_party/WebKit/Source/modules/webaudio/BaseAudioContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-12-05T23:46:43Z",
      "side": 1,
      "message": "I believe that this fix is a temporary one, so I prefer to have this as a separate if block so I can remove it later cleanly.",
      "parentUuid": "bec4847e_9879b5ca",
      "revId": "b8dd2f0987b6d775defc608aa26813ce15945901",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}