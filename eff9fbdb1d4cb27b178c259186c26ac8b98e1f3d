{
  "comments": [
    {
      "key": {
        "uuid": "7efc2f42_fb1b294d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-18T09:37:54Z",
      "side": 1,
      "message": "1) and 2) should switch place to describe the priority order? Spatnav first looks for candidates inside the current focus node\u0027s enclosing container and if one is not found there, it checks for candidates at the DocumentNode, right? \n\nIs the following description correct?\n\n...\nWhen spatial navigation selects a focus candidate, it looks within\ncurrent focus node\u0027s container. The container is:\n1) an enclosing box that is scrollable* in the navigated direction.\n2) or else, a DocumentNode (\u003cbody\u003e or \u003cbody\u003e of \u003ciframe\u003e).\n\nThis patch changes * to check for an enclosing box that has overflow in the navigated direction.\n...",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d316a07b_54c5c221",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-09-26T12:43:02Z",
      "side": 1,
      "message": "You are right. I updated description.",
      "parentUuid": "7efc2f42_fb1b294d",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4064de7f_019b987f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-18T09:37:54Z",
      "side": 1,
      "message": "Could you elaborate a bit on \"scrolling status\"?",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12f499d7_a71ee3f8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-09-26T12:43:02Z",
      "side": 1,
      "message": "I briefly added about scrolling status in description. And added detailed information in another comment.",
      "parentUuid": "4064de7f_019b987f",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00cf0b72_fa24abeb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-28T21:01:33Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "12f499d7_a71ee3f8",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f167ea30_b258dbbc",
        "filename": "third_party/WebKit/LayoutTests/fast/spatial-navigation/snav-container-select.html",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-18T09:37:54Z",
      "side": 1,
      "message": "s/overfow/overflow",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f61add6b_e8089c8b",
        "filename": "third_party/WebKit/LayoutTests/fast/spatial-navigation/snav-container-select.html",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-09-26T12:43:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f167ea30_b258dbbc",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "73a98d9f_cf5b3260",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 320,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-18T09:37:54Z",
      "side": 1,
      "message": "Could you elaborate a bit on why CanScrollInDirection() doesn\u0027t not work in this particular case?",
      "range": {
        "startLine": 320,
        "startChar": 0,
        "endLine": 320,
        "endChar": 3
      },
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e214c52_17e46472",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 320,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-09-26T12:43:02Z",
      "side": 1,
      "message": "As I said in description, CanScrollInDirection returns false if it reaches its edge.\n\nPlease imagine following two scenarios:\n1) Scrollable area almost reaches its edge(but not yet), and found an focusable element in the area\n   -\u003e the element will be focused deterministically.\n2) Scrollable area reaches its edge completely, and found an focusable element in the area\n   -\u003e next focused element varied according to status of node tree.\n\nIn current implementation, \u0027CanScrollInDirection\u0027 makes unintuitively behavior.",
      "parentUuid": "73a98d9f_cf5b3260",
      "range": {
        "startLine": 320,
        "startChar": 0,
        "endLine": 320,
        "endChar": 3
      },
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73d2dd08_5229dd36",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 320,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-28T21:01:33Z",
      "side": 1,
      "message": "Thanks for clarifying.\n\nLuckily ScrollableEnclosingBoxOrParentFrameForNodeInDirection is only used by AdvanceFocusDirectionally :) Hmm, there are many cases here that I don\u0027t understand. Would have been easier if ScrollableEnclosingBoxOrParentFrameForNodeInDirection was called once and not 3 times :).\n\nI wonder if\n\n... while (parent \u0026\u0026 !parent-\u003eIsDocumentNode() \u0026\u0026 (!HasOverflowInDirection(parent, type) || !CanScrollInDirection(parent, type)));\n\ncatches any cases that we have missed?",
      "parentUuid": "9e214c52_17e46472",
      "range": {
        "startLine": 320,
        "startChar": 0,
        "endLine": 320,
        "endChar": 3
      },
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8711eee2_de3862a2",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 325,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-18T09:37:54Z",
      "side": 1,
      "message": "I like this code. Compact and easy to read.",
      "range": {
        "startLine": 325,
        "startChar": 5,
        "endLine": 325,
        "endChar": 27
      },
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "503408ea_97dcbe28",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 325,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-09-26T12:43:02Z",
      "side": 1,
      "message": ":)",
      "parentUuid": "8711eee2_de3862a2",
      "range": {
        "startLine": 325,
        "startChar": 5,
        "endLine": 325,
        "endChar": 27
      },
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e3cfc39_f8e0164a",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 346,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-18T09:37:54Z",
      "side": 1,
      "message": "Can we make other clients of CanScrollInDirection() use HasOverflowInDirection() instead of CanScrollInDirection()?\n\nWhy do we still need CanScrollInDirection()? When is \"can scroll\" not the same as \"has overflow\"?",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8db709c2_896cd24a",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 346,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-09-26T12:43:02Z",
      "side": 1,
      "message": "Still thinking. This question is hard to answer. Please wait for some more time. :)",
      "parentUuid": "2e3cfc39_f8e0164a",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6678df27_3d24cc0f",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 346,
      "author": {
        "id": 1243466
      },
      "writtenOn": "2017-09-28T02:09:54Z",
      "side": 1,
      "message": "\u003e Can we make other clients of CanScrollInDirection() use HasOverflowInDirection() instead of CanScrollInDirection()?\n\nYes. I found another point should be changed to HasOverflowInDirection().\n\nbool FocusController::AdvanceFocusDirectionallyInContainer() {\n  ...\n  if (CanScrollInDirection(focus_candidate.visible_node, type)) {\n    ...\n    AdvanceFocusDirectionallyInContainer(focus_candidate.visible_node);\n  }\n}\n\nHonestly, I considered only enclosing parent for container, but above code scoping down to child.\nIn this case, just replacing to HasOverflowInDirection() is not trivial.\n\nI think following definition about container is more proper rather than original suggestion.\n1) Scrollable(HasOverflowInDirection if it is an element).\n2) CanScrollInDirection() or Has at least one focusable element except focused element.\n\n\n\u003e Why do we still need CanScrollInDirection()? When is \"can scroll\" not the same as \"has overflow\"?\n\nCanScrollInDirection() still very important because scroll is triggered instead focus moving in some cases.\nFor example, if no exists focusable element in current container but can scroll in direction, then just scroll is triggered.",
      "parentUuid": "8db709c2_896cd24a",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c7bee5f_bbceb518",
        "filename": "third_party/WebKit/Source/core/page/SpatialNavigation.cpp",
        "patchSetId": 1
      },
      "lineNbr": 346,
      "author": {
        "id": 1207755
      },
      "writtenOn": "2017-09-28T21:01:33Z",
      "side": 1,
      "message": "\u003e \u003e Can we make other clients of CanScrollInDirection() use HasOverflowInDirection() instead of CanScrollInDirection()?\n\u003e \n\u003e Yes. I found another point should be changed to HasOverflowInDirection().\n\u003e \n\u003e bool FocusController::AdvanceFocusDirectionallyInContainer() {\n\u003e   ...\n\u003e   if (CanScrollInDirection(focus_candidate.visible_node, type)) {\n\u003e     ...\n\u003e     AdvanceFocusDirectionallyInContainer(focus_candidate.visible_node);\n\u003e   }\n\u003e }\n\nThanks for looking into this. We can solve it as a follow up. Could you create a bug for it? This code could really need some refactoring to get easier to read and reason about. It\u0027s really tricky.\n\n\u003e \u003e Why do we still need CanScrollInDirection()? When is \"can scroll\" not the same as \"has overflow\"?\n\u003e \n\u003e CanScrollInDirection() still very important because scroll is triggered instead focus moving in some cases.\n\u003e For example, if no exists focusable element in current container but can scroll in direction, then just scroll is triggered.\n\nRight, OK. Thanks!",
      "parentUuid": "6678df27_3d24cc0f",
      "revId": "eff9fbdb1d4cb27b178c259186c26ac8b98e1f3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}