{
  "comments": [
    {
      "key": {
        "uuid": "18030740_fd54e242",
        "filename": "chrome/browser/data_usage/tab_id_provider.cc",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1127744
      },
      "writtenOn": "2017-10-10T16:27:44Z",
      "side": 0,
      "message": "why was this removed?",
      "range": {
        "startLine": 36,
        "startChar": 2,
        "endLine": 36,
        "endChar": 19
      },
      "revId": "7619f01f1fa10674df56b9921df2f94718478201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c0c56d1_01ae2213",
        "filename": "chrome/browser/data_usage/tab_id_provider.cc",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1116492
      },
      "writtenOn": "2017-10-10T18:54:01Z",
      "side": 0,
      "message": "Because it\u0027ll never do anything useful. The only time it would actually cause RunAll() to be called is if the UI thread task runner is destroyed when doing the PostTaskAndReply below, and the only callback in the list at that time would be the TabIdProvider::OnTabIdReady callback, and not any of the actual DataUse annotation callbacks. By removing the CallbackRunner destructor, this will cause TabIdProvider::ProvideTabId to notice that it\u0027s WeakPtr\u003cCallbackRunner\u003e is no longer valid and run the callback with -1 anyways.\n\nNote that if the IO thread task runner was somehow destroyed before running the Reply, then that callback would be leaked on purpose by the design of PostTaskAndReply, preventing the destructor from being run at all anyways.\n\nAs a side bonus, since I\u0027m trying to fix a crash bug where callbacks are somehow being run twice (even though that should never happen, even before this CL), removing this call to RunAll should at least help simplify the code for investigators.",
      "parentUuid": "18030740_fd54e242",
      "range": {
        "startLine": 36,
        "startChar": 2,
        "endLine": 36,
        "endChar": 19
      },
      "revId": "7619f01f1fa10674df56b9921df2f94718478201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}