{
  "comments": [
    {
      "key": {
        "uuid": "ce47a2c4_4e013252",
        "filename": "content/public/renderer/render_thread.h",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-07-28T04:40:33Z",
      "side": 1,
      "message": "nit: #include \u003cstring\u003e",
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc035828_a62e9d17",
        "filename": "third_party/WebKit/Source/platform/scheduler/renderer/renderer_scheduler_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 2207,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-01T21:15:03Z",
      "side": 1,
      "message": "For the future: please don\u0027t use base::StringPrintf in UMA_HISTOGRAM — strings should be runtime constants (there is a static variable behind all this macros magic. Most probably it won\u0027t work as you expect and in best case it will be very slow).\n\nHere it\u0027ll come naturally when you switch process type to an enum.",
      "range": {
        "startLine": 2207,
        "startChar": 12,
        "endLine": 2207,
        "endChar": 24
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bd8cd8d_7356e61e",
        "filename": "third_party/WebKit/Source/platform/scheduler/renderer/renderer_scheduler_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 2207,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-08-03T02:58:58Z",
      "side": 1,
      "message": "Did you mean compile time constant?\n\nAside, yeah I had alluded to this in my first patch set comment and suggested maintaining a HistogramBase instance if necessary.",
      "parentUuid": "bc035828_a62e9d17",
      "range": {
        "startLine": 2207,
        "startChar": 12,
        "endLine": 2207,
        "endChar": 24
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "663a2495_8ad6422a",
        "filename": "third_party/WebKit/Source/platform/scheduler/renderer/renderer_scheduler_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 2207,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-03T03:15:27Z",
      "side": 1,
      "message": "Nope, I mean runtime constant. See a comment in https://cs.chromium.org/chromium/src/base/metrics/histogram_macros.h?l\u003d23.\n\nI\u0027d prefer having something like this:\n\nif (process_type \u003d\u003d REGULAR) {\n  UMA_...;\n} else {\n  UMA_...;\n}",
      "parentUuid": "0bd8cd8d_7356e61e",
      "range": {
        "startLine": 2207,
        "startChar": 12,
        "endLine": 2207,
        "endChar": 24
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0d79886_bdf3f1da",
        "filename": "third_party/WebKit/Source/platform/scheduler/renderer/renderer_scheduler_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 2207,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-08-03T03:23:31Z",
      "side": 1,
      "message": "Cool, didn\u0027t know this. Thanks. Will correct this.",
      "parentUuid": "663a2495_8ad6422a",
      "range": {
        "startLine": 2207,
        "startChar": 12,
        "endLine": 2207,
        "endChar": 24
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b7c9aab_d187cb43",
        "filename": "third_party/WebKit/public/platform/scheduler/renderer/renderer_scheduler.h",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-01T15:06:38Z",
      "side": 1,
      "message": "I\u0027d prefer having an enum here in public/platform/scheduler and using it internally in the scheduler.",
      "range": {
        "startLine": 204,
        "startChar": 15,
        "endLine": 204,
        "endChar": 37
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9c3ecc0_232e476f",
        "filename": "third_party/WebKit/public/platform/scheduler/renderer/renderer_scheduler.h",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-08-03T02:58:58Z",
      "side": 1,
      "message": "You mean internally within the renderer_scheduler_impl.cc, correct? I think it was concluded in https://codereview.chromium.org/2922833002/ that we shouldn\u0027t use enums for process types within and below content. But yeah, using it internally in the implementation may probably be ok.",
      "parentUuid": "1b7c9aab_d187cb43",
      "range": {
        "startLine": 204,
        "startChar": 15,
        "endLine": 204,
        "endChar": 37
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d16852c5_d4543dc8",
        "filename": "third_party/WebKit/public/platform/scheduler/renderer/renderer_scheduler.h",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-03T03:15:27Z",
      "side": 1,
      "message": "I had the following solution in mind:\n\npublic/platform/scheduler/process_type.h:\nenum class ProcessType { .. }:\n\npublic/platform/scheduler/renderer_scheduler.h:\nclass RendererScheduler {\n  ...\n  virtual void SetRendererProcessType(ProcessType);\n}\n\nAnd RenderThreadImpl::SetRendererProcessType method will convert a string to this enum.\n\nJochen, does this make sense from content/ point of view?",
      "parentUuid": "f9c3ecc0_232e476f",
      "range": {
        "startLine": 204,
        "startChar": 15,
        "endLine": 204,
        "endChar": 37
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a04eeac1_5b6d1b35",
        "filename": "third_party/WebKit/public/platform/scheduler/renderer/renderer_scheduler.h",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-03T03:20:46Z",
      "side": 1,
      "message": "Oh, Jochen is OOO. clamy@, could you help us here?",
      "parentUuid": "d16852c5_d4543dc8",
      "range": {
        "startLine": 204,
        "startChar": 15,
        "endLine": 204,
        "endChar": 37
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cac150b8_e69bede0",
        "filename": "third_party/WebKit/public/platform/scheduler/renderer/renderer_scheduler.h",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1115881
      },
      "writtenOn": "2017-08-03T15:33:55Z",
      "side": 1,
      "message": "I would prefer if we used an enum everywhere. Using a string has more opportunity for misuse IMO.",
      "parentUuid": "a04eeac1_5b6d1b35",
      "range": {
        "startLine": 204,
        "startChar": 15,
        "endLine": 204,
        "endChar": 37
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "884c55f1_79b8c083",
        "filename": "third_party/WebKit/public/platform/scheduler/renderer/renderer_scheduler.h",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-04T16:22:10Z",
      "side": 1,
      "message": "Per IM chat with clamy@, we think that the best option here is to have a public blink platform enum in header-only file (public/platform/scheduler/renderer_process_type.h) and use it in content/ and chrome/ layers for plumbing.",
      "parentUuid": "cac150b8_e69bede0",
      "range": {
        "startLine": 204,
        "startChar": 15,
        "endLine": 204,
        "endChar": 37
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6611ed42_cf3589b8",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 3
      },
      "lineNbr": 62998,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-01T15:06:38Z",
      "side": 1,
      "message": "nit: it seems that this file is diffed against the wrong revision. Could you update/rebase to make it show the actual diff?",
      "range": {
        "startLine": 62998,
        "startChar": 4,
        "endLine": 62998,
        "endChar": 12
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c70f37a_726edc0d",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 3
      },
      "lineNbr": 62998,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-08-01T18:45:55Z",
      "side": 1,
      "message": "Seems correct to me. Obsoleted RendererMainThreadLoad3. Introduced RendererMainThreadLoad4 as a base histogram. This is suffixed by RendererScheduler.ProcessSplit, which is further suffixed by RendererScheduler.MainThreadLoadSplit.",
      "parentUuid": "6611ed42_cf3589b8",
      "range": {
        "startLine": 62998,
        "startChar": 4,
        "endLine": 62998,
        "endChar": 12
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f8f54af_dc4578f8",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 3
      },
      "lineNbr": 62998,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-01T21:15:03Z",
      "side": 1,
      "message": "Sorry, my fault — I have a different CL to increase metric version to 4, but I forgot that I haven\u0027t landed it yet.",
      "parentUuid": "1c70f37a_726edc0d",
      "range": {
        "startLine": 62998,
        "startChar": 4,
        "endLine": 62998,
        "endChar": 12
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "970a0989_5eeb5880",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 3
      },
      "lineNbr": 97643,
      "author": {
        "id": 1150969
      },
      "writtenOn": "2017-08-01T21:15:03Z",
      "side": 1,
      "message": "Let\u0027s avoid multiplying histograms for no reason — we don\u0027t want full instrumentation (per-minute) for extension renderers, I guess.\n\nLet\u0027s have this following this of suffixes:\n\n- (overall, including extensions)\n- Extension (all extensions)\n- Extension.Foreground\n- Extension.Background\n(the following metrics do not include extensions, we should add a comment for that).\n- Foreground\n- Foreground.AfterFirstMinute\n- Background\n- Background.AfterFirstMinute",
      "range": {
        "startLine": 97643,
        "startChar": 26,
        "endLine": 97643,
        "endChar": 43
      },
      "revId": "ff4e2e98aba258a2bbbf1d22f6b90a6b5655ae03",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}