{
  "comments": [
    {
      "key": {
        "uuid": "73b477e6_ff226ebe",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 33,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-25T04:47:32Z",
      "side": 1,
      "message": "AIUI, this code here is only a stopgap since the pre-paint tree walk does not have\nan \"NG\" mode. I agree that it seems that is the right way to implement it in the long term.\nPlease add a comment saying something like\n\nTODO(): This code copies VisualRects from the LayoutObject tree. We should \nimplement the pre-paint tree walk on the NGPaintFragment tree, and save this work.",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5360031f_51639afd",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 33,
      "author": {
        "id": 1128431
      },
      "writtenOn": "2017-10-25T13:07:39Z",
      "side": 1,
      "message": "Done, your understanding is correct.",
      "parentUuid": "73b477e6_ff226ebe",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcbe75cd_033d6d04",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 60,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-25T17:35:13Z",
      "side": 1,
      "message": "Suggest changing the comment to:\n\n// Also update the visual rects of all line boxes below this box.",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18d0ea43_baf3e044",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 60,
      "author": {
        "id": 1128431
      },
      "writtenOn": "2017-10-30T15:17:35Z",
      "side": 1,
      "message": "This is now gone as part of the separation of populating and updating.",
      "parentUuid": "bcbe75cd_033d6d04",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e234bb77_7c98b72a",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 61,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-25T04:47:32Z",
      "side": 1,
      "message": "How far down does this recursion go? Is it only for a fragment of the NGPaintFragmentTree\nthat \"belongs\" to the LayoutObject\" which led to the call to UpdateVisualRectFromLayoutObject()\nfrom PrePaintTreeWalk?\n\nThis is not double recursion?",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14d58a59_405d737b",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 61,
      "author": {
        "id": 1128431
      },
      "writtenOn": "2017-10-25T13:07:39Z",
      "side": 1,
      "message": "NGPaintFragment tree is at maximum the same as NGPhysicalFragment tree, which is almost the same as LayoutObject tree at this point. It\u0027s just:\n1. Allow mutation for paint-related properties when NGPhysicalFragment is immutable.\n2. The subtree of NGPhysicalFragment tree can be shared in future. In this case, multiple NGPaintFragment can share one NGPhysicalFragment.\n\nAt the phase 1, it\u0027s even shorter; we limit NGPaintFragment tree only for inline, so the recursion is only for the depth of inline tree. We run this recursion for every block that has inline children.\n\nThis is not double recursion, it\u0027s a simple tree structure.",
      "parentUuid": "e234bb77_7c98b72a",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "40eb4196_2786e708",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 61,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-25T17:35:13Z",
      "side": 1,
      "message": "\u003e NGPaintFragment tree is at maximum the same as NGPhysicalFragment tree, which is almost the same as LayoutObject tree at this point. It\u0027s just:\n\u003e 1. Allow mutation for paint-related properties when NGPhysicalFragment is immutable.\n\u003e 2. The subtree of NGPhysicalFragment tree can be shared in future. In this case, multiple NGPaintFragment can share one NGPhysicalFragment.\n\u003e \n\u003e At the phase 1, it\u0027s even shorter; we limit NGPaintFragment tree only for inline, so the recursion is only for the depth of inline tree. We run this recursion for every block that has \ninline children.\n\nSo this recursion goes into the inline (inline text only, right? no inline boxes or floats?) tree underneath a single box? Equivalent to the InlineBox tree in the non-NG code?\n\n\u003e \n\u003e This is not double recursion, it\u0027s a simple tree structure.\n\nI said double recursion because you are calling into your new recursive algorithm from with\nthe recursive algorithm of the pre-paint tree walk. Wanted to make sure this is performant/\nwhat you wanted to do.",
      "parentUuid": "14d58a59_405d737b",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed40228e_b5e6e903",
        "filename": "third_party/WebKit/Source/core/paint/ng/ng_paint_fragment.cc",
        "patchSetId": 29
      },
      "lineNbr": 61,
      "author": {
        "id": 1128431
      },
      "writtenOn": "2017-10-30T15:17:35Z",
      "side": 1,
      "message": "\u003e So this recursion goes into the inline (inline text only, right? no inline boxes or floats?) tree underneath a single box?\n\nInline text and inline boxes (span), but not into inline blocks nor floats. The latter is what I call \"block layout root\".\n\n\u003e Equivalent to the InlineBox tree in the non-NG code?\n\nYes. Non-NG InlineBox includes span (InlineFlowBox) and a placeholder for inline block, but not the content of the inline block.\n\n\u003e I said double recursion because you are calling into your new recursive algorithm from with\nthe recursive algorithm of the pre-paint tree walk. Wanted to make sure this is performant/\nwhat you wanted to do.\n\nI understand your question better, sorry for slow.\n\nThis is an additional walk, but not ^2. On each LayoutBlockFlow, this recurse its inline children, but stops if an LayoutBlockFlow appears as child (inline block, floats, etc.)",
      "parentUuid": "40eb4196_2786e708",
      "revId": "36597b35e91aa2a006612b610e8b1711b0b4ada0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}