{
  "comments": [
    {
      "key": {
        "uuid": "f2a17bec_e5829a72",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win.cc",
        "patchSetId": 3
      },
      "lineNbr": 98,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "Unrelated? This should only be true for close events when IToastDismissedEventArgs-\u003etype is set to UserCanceled, which most likely should be done in a follow-up. (It\u0027s correct that we don\u0027t invoke the JavaScript `notificationclose` event in cases where it\u0027s not set to true.)",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8afdc4f9_f42ccee7",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win.cc",
        "patchSetId": 3
      },
      "lineNbr": 98,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "I\u0027ve done the former. I\u0027m not sure how to parse what you said within parenthesis. Are you saying that if user_cancelled is false then we should not call HandleEvent when dismissing?",
      "parentUuid": "f2a17bec_e5829a72",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d5fb220_b5d7edc5",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win.cc",
        "patchSetId": 3
      },
      "lineNbr": 300,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "Hmm. Since this currently only services the Chrome-is-still-alive case, I wonder if you have considered an alternative approach of using mswr::ComPtr\u003c\u003es reference counting semantics?\n\nIn short, instead of parsing the XML, we could do something like what\u0027s documented here:\nhttps://code.msdn.microsoft.com/Sending-toast-notifications-71e230a2/sourcecode?fileId\u003d51046\u0026pathId\u003d1859297009\n\nWhat sort of details do we get when Chrome\u0027s woken up as a result of a notification interaction? Do we get the entire IToastNotification* as well?",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8166f22_e9d94555",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win.cc",
        "patchSetId": 3
      },
      "lineNbr": 300,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-11-14T20:04:47Z",
      "side": 1,
      "message": "nit: I don\u0027t see the return value is modified, so please return const-ref.",
      "range": {
        "startLine": 300,
        "startChar": 2,
        "endLine": 300,
        "endChar": 13
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64367045_380960a1",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win.cc",
        "patchSetId": 3
      },
      "lineNbr": 300,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "\u003e I wonder if you have considered an alternative approach of using mswr::ComPtr\u003c\u003es \n\u003e reference counting semantics?\n\u003e In short, instead of parsing the XML, we could do something like what\u0027s documented here: (url)\n\nThe sample is good for showing how to get the dismissal reason, but I don\u0027t see how it does away with parsing the XML for reading our id. I don\u0027t see any function that allows direct access to the ID. Here are the INotification interface functions:\n\n// Get XML:\nHRESULT get_Content(/* [out][retval] */ IXmlDocument **value);\n// Expiration time:\nHRESULT put_ExpirationTime(/* [in] */ CDateTime *value);\nHRESULT get_ExpirationTime(/* [out][retval] */ CDateTime **value);\n// Event handlers:\nHRESULT add_Dismissed(/* [in] */ CToastDismissedEventArgs *handler, /* [out][retval] */ EventRegistrationToken *cookie);\nHRESULT remove_Dismissed(/* [in] */ EventRegistrationToken cookie);\nHRESULT add_Activated(/* [in] */ IInspectable *handler, /* [out][retval] */ EventRegistrationToken *cookie);\nHRESULT remove_Activated(/* [in] */ EventRegistrationToken cookie);\nHRESULT add_Failed(/* [in] */ CToastFailedEventArgs *handler, /* [out][retval] */ EventRegistrationToken *token);\nHRESULT remove_Failed(/* [in] */ EventRegistrationToken token);\n// Group and tag (short strings only):\nHRESULT put_Tag(/* [in] */ HSTRING value);\nHRESULT get_Tag(/* [out][retval] */ HSTRING *value);\nHRESULT put_Group(/* [in] */ HSTRING value);\nHRESULT get_Group(/* [out][retval] */ HSTRING *value);\n// Whether the toast is allowed to pop:\nHRESULT put_SuppressPopup(/* [in] */ boolean value);\nHRESULT get_SuppressPopup(/* [out][retval] */ boolean *value);\n\nAnd IToastDismissedEventArgs isn\u0027t much more help, it only has get_Reason(...) and nothing else.\n\n\u003e What sort of details do we get when Chrome\u0027s woken up as a result of a notification\n\u003e interaction? Do we get the entire IToastNotification* as well?\n\nI don\u0027t know; I\u0027ve never seen it happen. Neither Chrome nor MS\u0027 test app wakes up as a result of a notification interaction on my computer. :/\n\nMaybe Xi knows?",
      "parentUuid": "0d5fb220_b5d7edc5",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9896e5c_c817c889",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win.cc",
        "patchSetId": 3
      },
      "lineNbr": 300,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "I think that result in a use-after-free scenario...",
      "parentUuid": "c8166f22_e9d94555",
      "range": {
        "startLine": 300,
        "startChar": 2,
        "endLine": 300,
        "endChar": 13
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc2add18_525cdbe4",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "micro nit: please always document random booleans like \"false\", it\u0027s unclear what it means reading this code",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f78c652f_9e9eaa90",
        "filename": "chrome/browser/notifications/notification_platform_bridge_win_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc2add18_525cdbe4",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff8929bb_b3f1ee4b",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "The message_center is a component that lives in //ui, which has nothing to do with this work other than being the data-container for the notification (the message_center::Notification type). These should just be part of the common namespace, or perhaps public members of one of the classes.",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40253803_c4825bd3",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ff8929bb_b3f1ee4b",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c014da1_bf53e6fd",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-11-14T20:04:47Z",
      "side": 1,
      "message": "nit: I feel like there are too many hand-crafted numbers inside the method, which makes it error prone. Maybe define int kStrVecMinSize \u003d 4, and then change to \"if (split.size() \u003c\u003d kStrVecMinSize)\". You can use kStrVecMinSize to replace \"4\" in the for-loop below.",
      "range": {
        "startLine": 161,
        "startChar": 21,
        "endLine": 161,
        "endChar": 22
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05f3d4b3_f5ef6834",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Done (min size is 5).",
      "parentUuid": "8c014da1_bf53e6fd",
      "range": {
        "startLine": 161,
        "startChar": 21,
        "endLine": 161,
        "endChar": 22
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77788713_bccb6fd6",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "nit: unfortunately it\u0027s fine to notifications to have invalid URLs. This usually is only the case for notification types other than extension and web notifications.",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "383c7603_0d850eec",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Hmm... :/\nOK.",
      "parentUuid": "77788713_bccb6fd6",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cba29e2f_49a2f0b1",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "nit: bound checks?",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b86424d_c2cbc3f9",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cba29e2f_49a2f0b1",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8a6deb66_5549efd9",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 177,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "nit: notification_id-\u003eclear();",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d08d2321_ae420ddd",
        "filename": "chrome/browser/notifications/notification_template_builder.cc",
        "patchSetId": 3
      },
      "lineNbr": 177,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8a6deb66_5549efd9",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f205f28_5256ec7e",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "These two should be members of the NotificationPlatformBridgeWin, and be passed in to NotificationTemplateBuilder as a std::string\u0026. Semantically you shouldn\u0027t need to talk to a template builder when responding to an interaction event.",
      "range": {
        "startLine": 65,
        "startChar": 36,
        "endLine": 65,
        "endChar": 43
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03d0bbc8_c3f5b22c",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Makes sense.",
      "parentUuid": "1f205f28_5256ec7e",
      "range": {
        "startLine": 65,
        "startChar": 36,
        "endLine": 65,
        "endChar": 43
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffc10017_0c06cb1c",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 70,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "WARN_UNUSED_RESULT, since assuming that it worked fine can lead to using uninitialised memory.",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c11ec180_d0fb0285",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 70,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ffc10017_0c06cb1c",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "752439a1_ca28afb6",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 74,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-11-14T20:04:47Z",
      "side": 1,
      "message": "nit: In NotificationTemplateBuilder::Build, |notification_type| is passed with const, and |incognito| below is passed without const. I don\u0027t think const are needed for them here. Maybe remove it to make it consistent across this file?",
      "range": {
        "startLine": 74,
        "startChar": 31,
        "endLine": 74,
        "endChar": 48
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ac6f5bf_ab780aac",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 74,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Consistent now.",
      "parentUuid": "752439a1_ca28afb6",
      "range": {
        "startLine": 74,
        "startChar": 31,
        "endLine": 74,
        "endChar": 48
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f9757fe_5fcf2c5f",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-11-14T18:07:19Z",
      "side": 1,
      "message": "nit: const\u0026, you\u0027re making a copy now.",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b5eba6f_0da2c69e",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Bah...",
      "parentUuid": "2f9757fe_5fcf2c5f",
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "423dacdd_dea1f8cf",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-11-14T20:04:47Z",
      "side": 1,
      "message": "nit: const ref for GURL as well.",
      "range": {
        "startLine": 78,
        "startChar": 17,
        "endLine": 78,
        "endChar": 27
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24dc6052_212419c5",
        "filename": "chrome/browser/notifications/notification_template_builder.h",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-11-15T12:52:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "423dacdd_dea1f8cf",
      "range": {
        "startLine": 78,
        "startChar": 17,
        "endLine": 78,
        "endChar": 27
      },
      "revId": "66da85dece48a3dc80b19982dd4fc2af9357a331",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}