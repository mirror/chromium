{
  "comments": [
    {
      "key": {
        "uuid": "fb8462b1_f68ef9c7",
        "filename": "mojo/edk/system/channel_fuchsia.cc",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1002808
      },
      "writtenOn": "2017-08-15T18:23:58Z",
      "side": 1,
      "message": "Might be helpful to document where these types are defined",
      "revId": "024b33e67d9a12a81f797facbc03c566f3912123",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1b059bf_bea1fd49",
        "filename": "mojo/edk/system/channel_fuchsia.cc",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-08-15T22:32:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fb8462b1_f68ef9c7",
      "revId": "024b33e67d9a12a81f797facbc03c566f3912123",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55145aa2_b09f90c6",
        "filename": "mojo/edk/system/channel_fuchsia.cc",
        "patchSetId": 4
      },
      "lineNbr": 166,
      "author": {
        "id": 1002808
      },
      "writtenOn": "2017-08-15T18:23:58Z",
      "side": 1,
      "message": "I don\u0027t think this is guaranteed at all. A misbehaving process could send a message with no space for extra header bytes, in which case this call will receive a null extra_header.",
      "revId": "024b33e67d9a12a81f797facbc03c566f3912123",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31407623_820b0524",
        "filename": "mojo/edk/system/channel_fuchsia.cc",
        "patchSetId": 4
      },
      "lineNbr": 166,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-08-15T22:32:07Z",
      "side": 1,
      "message": "Wouldn\u0027t |extra_header_size| then be zero, though, so the |handles_size \u003e extra_header_size| check above will cause us to return false immediately before this check?  And we shouldn\u0027t see this API called at all if there are no handles in the incoming message.\n\nTurned this into an earlier early-exit condition.",
      "parentUuid": "55145aa2_b09f90c6",
      "revId": "024b33e67d9a12a81f797facbc03c566f3912123",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6f046e3_55630c1d",
        "filename": "mojo/edk/system/channel_fuchsia.cc",
        "patchSetId": 4
      },
      "lineNbr": 166,
      "author": {
        "id": 1002808
      },
      "writtenOn": "2017-08-15T22:42:08Z",
      "side": 1,
      "message": "Right... good point",
      "parentUuid": "31407623_820b0524",
      "revId": "024b33e67d9a12a81f797facbc03c566f3912123",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb8ba2df_b90f5b80",
        "filename": "mojo/edk/system/channel_fuchsia.cc",
        "patchSetId": 4
      },
      "lineNbr": 169,
      "author": {
        "id": 1001385
      },
      "writtenOn": "2017-08-15T22:32:07Z",
      "side": 1,
      "message": "This mirrors a check in the POSIX implementation; is there a reason that we don\u0027t check for the two values actually being equal?  I\u0027d expect that if they differ then something fishy is going on?",
      "revId": "024b33e67d9a12a81f797facbc03c566f3912123",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d43895a8_6e976f40",
        "filename": "mojo/edk/system/channel_fuchsia.cc",
        "patchSetId": 4
      },
      "lineNbr": 169,
      "author": {
        "id": 1002808
      },
      "writtenOn": "2017-08-15T22:42:08Z",
      "side": 1,
      "message": "It\u0027s possible for the number of handles attached to a message to exceed some limit imposed by the system. In that case we may send follow-up messages with more handles. Thus incoming_handles_ accumulates handles over potentially multiple physical messages, and thus it\u0027s possible for incoming_handles_.size() to be smaller than |num_handles|.\n\nReturning |true| but leaving |handles| as null is an indication (to Channel) that there is nothing wrong yet, but we don\u0027t have enough handles to complete the message currently being built from incoming data.\n\nIt may not in fact be possible under non-fishy circumstances for incoming_handles_.size() to legitimately *exceed* num_handles, but that\u0027s not entirely clear to me without reading kernel source, so this errs on the side of less strict behavior.",
      "parentUuid": "bb8ba2df_b90f5b80",
      "revId": "024b33e67d9a12a81f797facbc03c566f3912123",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}