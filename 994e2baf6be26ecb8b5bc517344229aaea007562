{
  "comments": [
    {
      "key": {
        "uuid": "20022887_9fc75e3f",
        "filename": "README.md",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2017-11-22T00:15:26Z",
      "side": 1,
      "message": "Add a line above this:\n\n  git config --add remote.origin.fetch \u0027+refs/heads/infra/config:refs/remotes/origin/master\u0027\n\nThat will make \u0027master\u0027 in this config checkout be an alias of infra/config, and all normal git-cl tools should work as if this was a repo only containing refs/heads/infra/config contents.",
      "revId": "994e2baf6be26ecb8b5bc517344229aaea007562",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "704b9919_94afd1f7",
        "filename": "README.md",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2017-11-22T01:20:12Z",
      "side": 1,
      "message": "Doesn\u0027t seem to work. When I remove the \"--track\" argument from \"git checkout -b\" below, and make a whitespace change to README.md, the error in https://pastebin.com/zAuc22pY is generated upon \"git cl upload\".",
      "parentUuid": "20022887_9fc75e3f",
      "revId": "994e2baf6be26ecb8b5bc517344229aaea007562",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc09ddd4_8dc9d268",
        "filename": "README.md",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2017-11-22T01:41:50Z",
      "side": 1,
      "message": "This works for me:\n\n  $ mkdir somedir\n  $ cd somedir\n  $ git init\n  $ git remote add -t infra/config origin https://chromium.googlesource.com/chromium/src\n  $ git config --add remote.origin.fetch \u0027+refs/heads/infra/config:refs/remotes/origin/master\u0027\n  $ git new-branch some_feature\n  $ $EDITOR README.md\n  $ git commit -am \u0027Some message\u0027\n  $ git cl upload\n\nCreates https://chromium-review.googlesource.com/c/chromium/src/+/784191\n\nWe generally recommend the use of `git new-branch` because it knows how to set up tracking information correctly. If you want to use `git checkout` or `git branch` to create branches, then you\u0027ll need the extra flags and stuff (but... that\u0027s why we don\u0027t recommend them)",
      "parentUuid": "704b9919_94afd1f7",
      "revId": "994e2baf6be26ecb8b5bc517344229aaea007562",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bf2e5df_e85a441d",
        "filename": "README.md",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2017-11-22T01:58:01Z",
      "side": 1,
      "message": "tl;dr I think Robbie\u0027s proposal is best for one-time use.\n\n\nI used the above, but I got routinely confused with origin/master.\nSo I switched to:\n\n  $ mkdir somedir\n  $ cd somedir\n  $ git init\n  $ git remote add -t infra/config origin https://chromium.googlesource.com/chromium/src\n  $ git new-branch --upstream origin/infra/config some_feature   # note extra --upstream flag.\n  $ $EDITOR README.md\n  $ git commit -am \u0027Some message\u0027\n  $ git cl upload\n\nAfter this, most usual commands work, too, including git rebase-update and git tb[1]\nThe only thing that doesn\u0027t is\n$ git map-branches -vvv   # 3 -v flags are important, it works with all other options just fine.\n\n[1] git tb \u003d alias for git new-branch --upstream_current",
      "parentUuid": "cc09ddd4_8dc9d268",
      "revId": "994e2baf6be26ecb8b5bc517344229aaea007562",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6304742e_d9967ddf",
        "filename": "README.md",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2017-11-22T02:14:32Z",
      "side": 1,
      "message": "To be honest I\u0027ve never used the new-branch or rebase-update commands in my Chromium development.\n\nAndrii, your workflow looks good because it theoretically supports rebasing -- which is what I\u0027m trying to document here -- but if doing the following:\n\ngit new-branch --upstream origin/infra/config some_feature\ngit new-branch --upstream origin/infra/config foo2\ngit rebase-update\n\nthen the error at https://pastebin.com/tK2BKjuD is generated. Do you have a solution?",
      "parentUuid": "3bf2e5df_e85a441d",
      "revId": "994e2baf6be26ecb8b5bc517344229aaea007562",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8b8fa1f_f5ffc9a5",
        "filename": "README.md",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2017-11-22T02:31:04Z",
      "side": 1,
      "message": "oops, sorry forgot another important command which should have been done right after git init:\n\ngit config depot-tools.upstream origin/infra/config\n\n\nSo, total thing becomes:\n\n  $ mkdir somedir\n  $ cd somedir\n  $ git init\n  $ git config depot-tools.upstream origin/infra/config\n  $ git remote add -t infra/config origin https://chromium.googlesource.com/chromium/src\n  $ git new-branch --upstream origin/infra/config some_feature   # note extra --upstream flag.\n  $ $EDITOR README.md\n  $ git commit -am \u0027Some message\u0027\n  $ git cl upload",
      "parentUuid": "6304742e_d9967ddf",
      "revId": "994e2baf6be26ecb8b5bc517344229aaea007562",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}