{
  "comments": [
    {
      "key": {
        "uuid": "8fe01851_16d2291d",
        "filename": "chrome/browser/android/compositor/layer/contextual_search_layer.cc",
        "patchSetId": 2
      },
      "lineNbr": 211,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-29T00:46:30Z",
      "side": 1,
      "message": "My preference here would be to set the search_bar_banner_height size dynamically based on the height of the (bar_banner_text_resource-\u003esize() + 2 * search_bar_banner_padding). Would that work?",
      "range": {
        "startLine": 211,
        "startChar": 52,
        "endLine": 211,
        "endChar": 56
      },
      "revId": "52f7e7b5bfc642aac6467a20927387db91577e00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0a647b9_2e44e586",
        "filename": "chrome/browser/android/compositor/layer/contextual_search_layer.cc",
        "patchSetId": 2
      },
      "lineNbr": 211,
      "author": {
        "id": 1244576
      },
      "writtenOn": "2017-11-29T03:28:49Z",
      "side": 1,
      "message": "That\u0027s a better idea, since the BarBanner would be able to show more than 2 lines of text. However, from what I understand, all measurements of overlay panels are calculated in Java and are passed to C++. If we dynamically change a parameter here (e.g. search_bar_banner_height), there\u0027ll be inconsistency between Java and C++.\n\nIf we are to do this in Java, we\u0027ll face a different problem. The height of the TextView is calculated after the view is drawn. That process happens asynchronously on the UI thread and we should set a callback to get the calculated height. However, ContextualSearchBarBannerControl#getHeightPeekingPx(), which requires the peeking height of the bar banner, is called before the callback method is called.\n\nThere\u0027s definitely a (non-trivial) way to solve this problem, but I\u0027m not sure if it\u0027s worth the effort, since it\u0027s highly unlikely that we need more than 2 lines in the BarBanner.",
      "parentUuid": "8fe01851_16d2291d",
      "range": {
        "startLine": 211,
        "startChar": 52,
        "endLine": 211,
        "endChar": 56
      },
      "revId": "52f7e7b5bfc642aac6467a20927387db91577e00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f052d6a0_a32aefcf",
        "filename": "chrome/browser/android/compositor/layer/contextual_search_layer.cc",
        "patchSetId": 2
      },
      "lineNbr": 211,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-29T16:46:26Z",
      "side": 1,
      "message": "We can measure without waiting for a layout pass in . We could call #getView()#measure(getWidthMeasureSpec(), getHeightMeasureSpec()) in ContextualSearchBannerControl and use then use #getView()#getMeasuredHeight() to determine the height needed to display the full text.",
      "parentUuid": "a0a647b9_2e44e586",
      "range": {
        "startLine": 211,
        "startChar": 52,
        "endLine": 211,
        "endChar": 56
      },
      "revId": "52f7e7b5bfc642aac6467a20927387db91577e00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "539c2368_22f0de6c",
        "filename": "chrome/browser/android/compositor/layer/contextual_search_layer.cc",
        "patchSetId": 2
      },
      "lineNbr": 211,
      "author": {
        "id": 1244576
      },
      "writtenOn": "2017-11-29T20:03:27Z",
      "side": 1,
      "message": "I didn\u0027t know about that. Thanks for the tip!",
      "parentUuid": "f052d6a0_a32aefcf",
      "range": {
        "startLine": 211,
        "startChar": 52,
        "endLine": 211,
        "endChar": 56
      },
      "revId": "52f7e7b5bfc642aac6467a20927387db91577e00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}