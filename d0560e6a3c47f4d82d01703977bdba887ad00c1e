{
  "comments": [
    {
      "key": {
        "uuid": "a3c89052_a63c6ad2",
        "filename": "cc/animation/animation_host.cc",
        "patchSetId": 36
      },
      "lineNbr": 593,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-10-18T13:50:39Z",
      "side": 1,
      "message": "This means that the passed in animations count is not actually the main thread animations count. Can you rename to something more clear? Perhaps total_animations_count. Then the method should probably be called SetAnimationCounts",
      "range": {
        "startLine": 593,
        "startChar": 8,
        "endLine": 593,
        "endChar": 36
      },
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d30eff7_42ea3e29",
        "filename": "cc/animation/animation_host.cc",
        "patchSetId": 36
      },
      "lineNbr": 593,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-10-18T15:40:26Z",
      "side": 1,
      "message": "Done, changed the corresponding function in CompositorAnimationHost as well.",
      "parentUuid": "a3c89052_a63c6ad2",
      "range": {
        "startLine": 593,
        "startChar": 8,
        "endLine": 593,
        "endChar": 36
      },
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "734d734a_6e358f92",
        "filename": "cc/scheduler/compositor_timing_history.cc",
        "patchSetId": 36
      },
      "lineNbr": 870,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-10-18T13:50:39Z",
      "side": 1,
      "message": "Since they\u0027re both set in the same function how about when it\u0027s set from the main thread?",
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "79c504f8_a665559c",
        "filename": "cc/scheduler/compositor_timing_history.cc",
        "patchSetId": 36
      },
      "lineNbr": 870,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-10-18T15:40:26Z",
      "side": 1,
      "message": "Makes sense, I moved this check to AnimationHost::SetAnimationCounts() where we initially sets the main thread / main thread compositable animations count.",
      "parentUuid": "734d734a_6e358f92",
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f03240e4_0cf719b8",
        "filename": "third_party/WebKit/Source/core/animation/Animation.cpp",
        "patchSetId": 36
      },
      "lineNbr": 337,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-10-18T13:50:39Z",
      "side": 1,
      "message": "I think this should be failure_code.can_composite \u0026\u0026 !failure_code.will_composite otherwise it could theoretically report any non-compositable animation right?",
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de1eef79_3c73e506",
        "filename": "third_party/WebKit/Source/core/animation/Animation.cpp",
        "patchSetId": 36
      },
      "lineNbr": 337,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-10-18T15:40:26Z",
      "side": 1,
      "message": "Yes, good point. We actually just need failure_code.can_composite because failure_code.Ok() is equivalent of failure_code.will_composite. I also added some more comments here.",
      "parentUuid": "f03240e4_0cf719b8",
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02f4fff3_8ce52cf4",
        "filename": "third_party/WebKit/Source/core/animation/CompositorAnimationsTest.cpp",
        "patchSetId": 36
      },
      "lineNbr": 1358,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-10-18T13:50:39Z",
      "side": 1,
      "message": "Can you test the host main thread and composited animations count which should be 1 and 0 respectively?",
      "range": {
        "startLine": 1358,
        "startChar": 63,
        "endLine": 1358,
        "endChar": 65
      },
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f1fc898_5da2bbab",
        "filename": "third_party/WebKit/Source/core/animation/CompositorAnimationsTest.cpp",
        "patchSetId": 36
      },
      "lineNbr": 1358,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-10-18T15:40:26Z",
      "side": 1,
      "message": "I am not sure how meaningful is it to test this. In the ElementAnimationsTest we are testing the composited animations count for animation_host. In terms of the main thread animations count, when we do host-\u003eSetAnimationsCount() in DocumentAnimations::UpdateAnimationTimingIfNeeded(), the parameters that passed are the \"Timeline().PendingAnimationsCount()\" and \"Timeline().MainThreadCompositableAnimationsCount()\".",
      "parentUuid": "02f4fff3_8ce52cf4",
      "range": {
        "startLine": 1358,
        "startChar": 63,
        "endLine": 1358,
        "endChar": 65
      },
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "810e2d27_54c922ba",
        "filename": "third_party/WebKit/Source/core/animation/CompositorAnimationsTest.cpp",
        "patchSetId": 36
      },
      "lineNbr": 1358,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-10-19T14:42:05Z",
      "side": 1,
      "message": "Right, but the parameters we ultimately use for the frame counts are the computed counts. I\u0027m a bit worried that otherwise we don\u0027t really have a test that for some animation constructed from HTML we produce accurate counts. I.e. what if the composited animation count doesn\u0027t include the new animations? We could accidentally count newly started animations as main thread.",
      "parentUuid": "4f1fc898_5da2bbab",
      "range": {
        "startLine": 1358,
        "startChar": 63,
        "endLine": 1358,
        "endChar": 65
      },
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cf8755c_a7df92aa",
        "filename": "third_party/WebKit/Source/core/animation/CompositorAnimationsTest.cpp",
        "patchSetId": 36
      },
      "lineNbr": 1358,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-10-20T18:34:22Z",
      "side": 1,
      "message": "The latest patch is now checking the animation counts from the animation host, which is the count that we directly pass to the CompositorTimingHistory.",
      "parentUuid": "810e2d27_54c922ba",
      "range": {
        "startLine": 1358,
        "startChar": 63,
        "endLine": 1358,
        "endChar": 65
      },
      "revId": "d0560e6a3c47f4d82d01703977bdba887ad00c1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}