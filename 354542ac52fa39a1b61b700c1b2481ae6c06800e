{
  "comments": [
    {
      "key": {
        "uuid": "37d34ca6_39fa169c",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-08-09T00:04:12Z",
      "side": 1,
      "message": "Would it make sense to make this filtering happen internally in ClipboardMonitor?",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52405a2d_87adc6b9",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2017-08-09T01:36:37Z",
      "side": 1,
      "message": "Perhaps I didn\u0027t understand correctly the comment.\n\nI think it is better to filter it in ArcClipboardBridge so that we don\u0027t add ARC logic in the ClipboardMonitor. And also ClipboardMonitor knows nothing about the Clipboard.",
      "parentUuid": "37d34ca6_39fa169c",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2556a575_bac3d845",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-08-09T09:32:42Z",
      "side": 1,
      "message": "I guess I was thinking that ClipboardMonitor\u0027s change notification should note whether it\u0027s triggered by Chrome itself. This isn\u0027t really ARC++ specific and should be pretty easy to do just by throwing a scoper object on the stack in ~ScopedClipboardWriter or the like.",
      "parentUuid": "52405a2d_87adc6b9",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b793161_5734df81",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2017-08-09T19:18:32Z",
      "side": 1,
      "message": "ah, yes, thanks, I think I got it. \n\nBut I think it is possible to have a race condition with the current approach. If a Chrome \u0027copy\u0027 event is generated while the Scoped object is alive, that event will be lost.\n\nThe previous approach (using sequence numbers) also had the race condition, but it wasn\u0027t important since it was guaranteed that at least one \"copy\" event will trigger the \"onDataChanged\" on the Instance.\n\nOr perhaps (again), I didn\u0027t understand correctly your recommendation. thanks!",
      "parentUuid": "2556a575_bac3d845",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b087520_07c709c1",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2017-08-09T20:14:58Z",
      "side": 1,
      "message": "Disregard what I said about the race condition. Actually it is still possible to have a race condition, but the only race condition that is important to the Arc Clipboard, is the one that can occur between the desctructors of the two scoped objects. \n\nAdded a comment in the new CL",
      "parentUuid": "8b793161_5734df81",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfe632b4_15186b4f",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2017-08-09T21:43:46Z",
      "side": 1,
      "message": "mmm... disregard everything that I said... if the clipboard runs on the UI thread only, then there will be no race condition at all.",
      "parentUuid": "9b087520_07c709c1",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec85064f_6008f0b5",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-08-10T08:34:49Z",
      "side": 1,
      "message": "On non-Windows platform, clipboards are only accessed on the UI thread. On Windows, it\u0027s possible to access the clipboard on other threads (and we occasionally take advantage of this).\n\nBut in general, I wouldn\u0027t worry /too/ much about races.",
      "parentUuid": "cfe632b4_15186b4f",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4f5cf3a_93d36369",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 87,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2017-08-10T22:46:40Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ec85064f_6008f0b5",
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7555b9d4_ec7083c1",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 145,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-08-09T00:04:12Z",
      "side": 1,
      "message": "Nit: std::string()",
      "range": {
        "startLine": 145,
        "startChar": 64,
        "endLine": 145,
        "endChar": 66
      },
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5bb0db7_b97a6b25",
        "filename": "components/arc/clipboard/arc_clipboard_bridge.cc",
        "patchSetId": 15
      },
      "lineNbr": 145,
      "author": {
        "id": 1202079
      },
      "writtenOn": "2017-08-09T01:36:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7555b9d4_ec7083c1",
      "range": {
        "startLine": 145,
        "startChar": 64,
        "endLine": 145,
        "endChar": 66
      },
      "revId": "354542ac52fa39a1b61b700c1b2481ae6c06800e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}