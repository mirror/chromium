{
  "comments": [
    {
      "key": {
        "uuid": "9a05483f_d5560761",
        "filename": "media/renderers/video_renderer_impl.cc",
        "patchSetId": 1
      },
      "lineNbr": 616,
      "author": {
        "id": 1002455
      },
      "writtenOn": "2017-08-09T21:20:30Z",
      "side": 1,
      "message": "There is one case I\u0027m not sure is correct here:\n\nL\u003dlow_delay_\nC\u003dvideo_frame_stream_-\u003eCanReadWithoutStalling()\nQ\u003dalgorithm_-\u003eeffective_frames_queued()\n\nO\u003dold result of HaveEnoughData_Locked() (assuming !EOS, Q\u003cmin_buffered_frames|, !HaveReachedBufferingCap(), !was_background_rendering_ || !frames_decoded_)\n\nN\u003d new result (same assumptions)\n\nLCQ O N\n000 0 0\n001 1 1\n002 1 1\n010 0 0\n011 0 0\n012 0 0\n100 0 0\n101 1 1 **\n102 1 1\n110 0 0 (low_latency_frames_required is never \u003c\u003d 0)\n111 1 (low_latency_frames_required \u003c\u003d 1) ? 1 : 0\n112 1 1 (low_latency_frames_required is never \u003e 2)\n\n** In this case (low latency mode, can\u0027t read without stalling, only 1\n   effective frame is queued), should we still say we have enough data even if\n   low_latency_frames_required is 2, such as !just_painted_first_frame and\n   trying to transition back to have_enough?",
      "range": {
        "startLine": 616,
        "startChar": 2,
        "endLine": 616,
        "endChar": 4
      },
      "revId": "daa1084d24b8392d7a515e65e15fa58db3e77367",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21394c11_1eb3bf7d",
        "filename": "media/renderers/video_renderer_impl.cc",
        "patchSetId": 1
      },
      "lineNbr": 616,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-08-10T20:10:32Z",
      "side": 1,
      "message": "Ah, yes I spent some time on this; I felt that if !CanReadWithoutStalling() we should always return true. But this check is also used to determine if we should transition to HaveNothing, if if it can never return an effective frame we should still transition to HaveNothing such that pause and drop for underflow can catch up.",
      "parentUuid": "9a05483f_d5560761",
      "range": {
        "startLine": 616,
        "startChar": 2,
        "endLine": 616,
        "endChar": 4
      },
      "revId": "daa1084d24b8392d7a515e65e15fa58db3e77367",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "016969b1_b705864c",
        "filename": "media/renderers/video_renderer_impl.cc",
        "patchSetId": 1
      },
      "lineNbr": 616,
      "author": {
        "id": 1002455
      },
      "writtenOn": "2017-08-10T20:25:24Z",
      "side": 1,
      "message": "Ack. I suppose the \"FF / frame flipping\" could still occur in low-delay if the state thrashes rapidly between ENOUGH and NOTHING due to stall/resume. Is that a valid concern though? (I\u0027m less familiar with this code...)\n\nThis LGTM - if my concern is valid, perhaps it could be addressed in later CL.",
      "parentUuid": "21394c11_1eb3bf7d",
      "range": {
        "startLine": 616,
        "startChar": 2,
        "endLine": 616,
        "endChar": 4
      },
      "revId": "daa1084d24b8392d7a515e65e15fa58db3e77367",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65cdcc60_7b781d38",
        "filename": "media/renderers/video_renderer_impl.h",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1002455
      },
      "writtenOn": "2017-08-09T21:20:30Z",
      "side": 1,
      "message": "aside: this method seems to me like it should be const.",
      "range": {
        "startLine": 148,
        "startChar": 7,
        "endLine": 148,
        "endChar": 28
      },
      "revId": "daa1084d24b8392d7a515e65e15fa58db3e77367",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b983770_b4ddf4e1",
        "filename": "media/renderers/video_renderer_impl.h",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-08-10T20:10:32Z",
      "side": 1,
      "message": "Ah, it probably used to be but couldn\u0027t be when GetEffectiveFramesQueued() existed and would perform some calculations which are stored. I\u0027ll see if it can be changed now. Done.",
      "parentUuid": "65cdcc60_7b781d38",
      "range": {
        "startLine": 148,
        "startChar": 7,
        "endLine": 148,
        "endChar": 28
      },
      "revId": "daa1084d24b8392d7a515e65e15fa58db3e77367",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f4a40f8_8400e46b",
        "filename": "media/renderers/video_renderer_impl.h",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1002455
      },
      "writtenOn": "2017-08-10T20:25:24Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4b983770_b4ddf4e1",
      "range": {
        "startLine": 148,
        "startChar": 7,
        "endLine": 148,
        "endChar": 28
      },
      "revId": "daa1084d24b8392d7a515e65e15fa58db3e77367",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}