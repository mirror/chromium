{
  "comments": [
    {
      "key": {
        "uuid": "fe7cffa5_a719db18",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/DownloadHistoryItemWrapper.java",
        "patchSetId": 8
      },
      "lineNbr": 361,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-26T20:17:08Z",
      "side": 1,
      "message": "I think it would be better to also make this part of the ThumbnailProvider interface.\n\nOOC, what happens if the downloaded file itself is removed from disk by someone else? Do we clean out the entry in downloads home as well or do we keep it?",
      "range": {
        "startLine": 361,
        "startChar": 24,
        "endLine": 361,
        "endChar": 40
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02c5d704_ff2c9eb6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/DownloadHistoryItemWrapper.java",
        "patchSetId": 8
      },
      "lineNbr": 361,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Is there a reason why this isn\u0027t a public method of the ThumbnailProvider?",
      "range": {
        "startLine": 361,
        "startChar": 24,
        "endLine": 361,
        "endChar": 50
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fad4ee4_7fd7be49",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/DownloadHistoryItemWrapper.java",
        "patchSetId": 8
      },
      "lineNbr": 361,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Added! If the download item is removed from disk, we will ignore it for now and rely on a restart (when initDiskCache will be called) to re-sync to disk to remove any inconsistencies and trim to remove it in the long-run. \nThe removed item will not be cleaned out in downloads home, which is populated from DB.",
      "parentUuid": "fe7cffa5_a719db18",
      "range": {
        "startLine": 361,
        "startChar": 24,
        "endLine": 361,
        "endChar": 40
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2338c5a9_6cde25d5",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/DownloadHistoryItemWrapper.java",
        "patchSetId": 8
      },
      "lineNbr": 361,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good idea. Added.",
      "parentUuid": "02c5d704_ff2c9eb6",
      "range": {
        "startLine": 361,
        "startChar": 24,
        "endLine": 361,
        "endChar": 50
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f56ee677_2045a9fd",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "{@link ThumbnailDiskStorage}s",
      "range": {
        "startLine": 29,
        "startChar": 67,
        "endLine": 29,
        "endChar": 96
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75401ca2_b62247db",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f56ee677_2045a9fd",
      "range": {
        "startLine": 29,
        "startChar": 67,
        "endLine": 29,
        "endChar": 96
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39dbc658_2088b15a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Nit: Double space before comment",
      "range": {
        "startLine": 39,
        "startChar": 59,
        "endLine": 39,
        "endChar": 60
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7796d63c_dc6b1ccb",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "39dbc658_2088b15a",
      "range": {
        "startLine": 39,
        "startChar": 59,
        "endLine": 39,
        "endChar": 60
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca4d3fe8_9df028ca",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 44,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Could you document why this is static ?",
      "range": {
        "startLine": 44,
        "startChar": 4,
        "endLine": 44,
        "endChar": 11
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d7d4f0a_fba98126",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 44,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "I added that it is static because thumbnails cached on disk are shared across all instances of the class.",
      "parentUuid": "ca4d3fe8_9df028ca",
      "range": {
        "startLine": 44,
        "startChar": 4,
        "endLine": 44,
        "endChar": 11
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc44142e_cbc3ecc8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 117,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "I think this requires being constructed on the UI thread? Maybe add an assert?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c0e7d85_c98a2915",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 117,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good idea.",
      "parentUuid": "cc44142e_cbc3ecc8",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c7d12cc_e40e24ff",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 118,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "This seems to be used multiple times. Like commented other places, it would be great if this was indeed a callback that can be different callers each time.\nIf you decide to keep it like this though, this should probably be called a delegate instead?",
      "range": {
        "startLine": 118,
        "startChar": 8,
        "endLine": 118,
        "endChar": 29
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82c534a3_0f213c0b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 118,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "I\u0027ve changed it to be a delegate (because if we need to pass it as a callback, native code will need to track 2 callbacks, which makes things complicated) :)",
      "parentUuid": "2c7d12cc_e40e24ff",
      "range": {
        "startLine": 118,
        "startChar": 8,
        "endLine": 118,
        "endChar": 29
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "56bde7a9_69ea7efa",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 122,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-26T20:17:08Z",
      "side": 1,
      "message": "Uh, this is a member, so it will be null for any new instance that you create :) And even if it was static you could still end up doing this more than once if multiple instances are created before the task runs on the background thread. You might have to set a flag when you schedule the task.",
      "range": {
        "startLine": 122,
        "startChar": 12,
        "endLine": 122,
        "endChar": 30
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a840104d_875149ed",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 122,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "This is the constructor, so when would this ever be non-null?\nIs it because anyone in the package can call initDiskCache(), so technically the requester which gets a reference to |this| can set it as part of the setRequester() call? If so, could you instead just move this line up and assert that it\u0027s null before it\u0027s set in initDiskCache()?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21a7c6ab_3f498160",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 122,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good idea!",
      "parentUuid": "a840104d_875149ed",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a5cfe402_1a1ab482",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 122,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good point. I moved this check to initDiskCache().",
      "parentUuid": "56bde7a9_69ea7efa",
      "range": {
        "startLine": 122,
        "startChar": 12,
        "endLine": 122,
        "endChar": 30
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "405faa3f_d9c7aa9f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 148,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Should this assert that it is invoked from the UI thread since it\u0027s public?\nYou require that since you are creating an AsyncTask (which must be created on the UI thread)",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fae1884_dfde31fb",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 148,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Yes, good point.",
      "parentUuid": "405faa3f_d9c7aa9f",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6011f60f_8e78d078",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 152,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Should this be executed on a particular executor like AsyncTask.SERIAL_EXECUTOR.execute(...)?\nI know it\u0027s default in the current version of Android (but not in [donut,honeycomb) ), but I think it\u0027s still helpful to document, since it is heavily depended on throughout this class. I see that there have been discussions around this before, so it\u0027s up to you though. Feel free to keep around.",
      "range": {
        "startLine": 152,
        "startChar": 42,
        "endLine": 152,
        "endChar": 51
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "304cf855_5d74164a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 152,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "I had documented this briefly in the class description and have added the SERIAL_EXECUTOR explicitly to be clear. :)",
      "parentUuid": "6011f60f_8e78d078",
      "range": {
        "startLine": 152,
        "startChar": 42,
        "endLine": 152,
        "endChar": 51
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a759c534_b45ca627",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 190,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "This feels a little bit scary. Any reason why we\u0027re not writing protos to disk instead? Otherwise we could risk that the underlying object type could change, etc. I do realize this is the type String, but still though, it will be persisted forever.",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e525880_cc1ec29a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 190,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a759c534_b45ca627",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0865f1d1_18b61ec8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 203,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "invoked on?",
      "range": {
        "startLine": 203,
        "startChar": 43,
        "endLine": 203,
        "endChar": 45
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1aeff15c_bbf56bd8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 203,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0865f1d1_18b61ec8",
      "range": {
        "startLine": 203,
        "startChar": 43,
        "endLine": 203,
        "endChar": 45
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80dd5c62_aee85473",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 209,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Should these methods assert that the disk initialization has already happened?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae1873ff_64900d0a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 209,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good idea. I\u0027ve added an assert based on whether mDirectory has been initialized.",
      "parentUuid": "80dd5c62_aee85473",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c85cdbe6_675fcd93",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 219,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Could we use AtomicFile.startWrite(...) instead?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e23e7f15_251c9a37",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 219,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good idea! Done.",
      "parentUuid": "c85cdbe6_675fcd93",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "07418008_ba44ce9c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 224,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Oh, here we\u0027re writing even more data to disk. This feels iffy to write. What if we ever needed other data fields? As it is now, the versioning is set in stone in this commit :-/\n\nMaybe something like:\n\n  message ContentId {\n    optional string id \u003d 1;\n  }\n  \n  message CachedFile {\n    // required\n    optional ContentId content_id \u003d 1;\n    optional string compressed_png \u003d 2;\n  }\n\nThat way we could move away from PNG later for example, if we wanted something like WebP, etc., without having to go through hoops to figure out the compression technology used, etc.",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a942d049_c19701b0",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 224,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "I\u0027ve added a protobuf called ThumbnailEntry :)",
      "parentUuid": "07418008_ba44ce9c",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8d88150_874309c3",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 255,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-26T20:17:08Z",
      "side": 1,
      "message": "Hm, is \"the file doesn\u0027t exist\" a situation that can never happen under any circumstances (in the absence of bugs)? I have the feeling it isn\u0027t, because the file system can always be in a weird state, so you probably should handle it like the other exceptions below.",
      "range": {
        "startLine": 255,
        "startChar": 12,
        "endLine": 255,
        "endChar": 26
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f26eac91_f1fe7e5a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 255,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good point! Right now I just return null and force the thumbnail to be re-generated and rely on trim and restart to take care of the inconsistency with disk.",
      "parentUuid": "e8d88150_874309c3",
      "range": {
        "startLine": 255,
        "startChar": 12,
        "endLine": 255,
        "endChar": 26
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa2c2a11_8599cb16",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 282,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-26T20:17:08Z",
      "side": 1,
      "message": "Nit: {@code contentId}",
      "range": {
        "startLine": 282,
        "startChar": 77,
        "endLine": 282,
        "endChar": 86
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53c29b07_9a6d953a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 282,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aa2c2a11_8599cb16",
      "range": {
        "startLine": 282,
        "startChar": 77,
        "endLine": 282,
        "endChar": 86
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2203d2c_cc7ff4cf",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 288,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Add ThreadUtils.assertOnBackgroundThread(); ?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd738783_023d2263",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 288,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "This method can also be called by ThumbnailProviderImpl#removeThumbnail so it can be on the UI thread as well.",
      "parentUuid": "e2203d2c_cc7ff4cf",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f4ff304_3340a68b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 318,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "This implies that the directory is created by this method, where in fact, it is not?",
      "range": {
        "startLine": 318,
        "startChar": 7,
        "endLine": 318,
        "endChar": 32
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f03233a_a4d9fa1b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 318,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Right, thanks. I\u0027ve changed it to \"Get directory for thumbnail entries\" and clarify that the directory name must be unique.",
      "parentUuid": "0f4ff304_3340a68b",
      "range": {
        "startLine": 318,
        "startChar": 7,
        "endLine": 318,
        "endChar": 32
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e04879a9_1908ceb1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 321,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "mention that it returns the path?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b212c6a2_6d729b79",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailDiskStorage.java",
        "patchSetId": 8
      },
      "lineNbr": 321,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e04879a9_1908ceb1",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18b39492_aff7b0e8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailGenerator.java",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "This seems like a very specific API to require of the requestor, when the only method that\u0027s ever called is onThumbnailRetrieved(...). Could there be an interface ThumbnailGenerator.Callback { onThumbnailRetrieved(...); } or something like that?\n\nThat should enable you to test this class without the storage too.",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1ac1557_ec3ca47e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailGenerator.java",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Added!",
      "parentUuid": "18b39492_aff7b0e8",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "436619bd_9df2748a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailGenerator.java",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "This constructor doesn\u0027t seem to do anything.",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a72dae5c_88434b81",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailGenerator.java",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Removed!",
      "parentUuid": "436619bd_9df2748a",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d62eb347_6583b615",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailGenerator.java",
        "patchSetId": 8
      },
      "lineNbr": 35,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Any reason why we couldn\u0027t have this as part of the ThumbnailRequest and pass it through native?\nAs it stands now, if you ever call this again, the wrong requester would get the callback.",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4dbac9c6_5a9aa7bc",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailGenerator.java",
        "patchSetId": 8
      },
      "lineNbr": 35,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Good point! I\u0027ve added an interface that\u0027s implemented by ThumbnailDiskStorage and have made it a parameter of ThumbnailGenerator#retrieveThumbnail so the intended requester will get the callback.",
      "parentUuid": "d62eb347_6583b615",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "640cd597_30da3f81",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderCallback.java",
        "patchSetId": 8
      },
      "lineNbr": 10,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "This seems to be a little bit backwards to me? Is this only invoked by the disk storage, but implemented by the ThumbnailProvider?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a885e947_c09ae956",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderCallback.java",
        "patchSetId": 8
      },
      "lineNbr": 10,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "I\u0027ve renamed it, thanks :)",
      "parentUuid": "640cd597_30da3f81",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7e6d2bb_48b6e205",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 8
      },
      "lineNbr": 134,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-26T20:17:08Z",
      "side": 1,
      "message": "Nit: document parameter please :D",
      "range": {
        "startLine": 134,
        "startChar": 14,
        "endLine": 134,
        "endChar": 23
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab8a7687_b1a2273d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 8
      },
      "lineNbr": 134,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f7e6d2bb_48b6e205",
      "range": {
        "startLine": 134,
        "startChar": 14,
        "endLine": 134,
        "endChar": 23
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83c8d6c5_0ee402de",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 8
      },
      "lineNbr": 177,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-26T20:17:08Z",
      "side": 1,
      "message": "And document this one too :)",
      "range": {
        "startLine": 177,
        "startChar": 14,
        "endLine": 177,
        "endChar": 23
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "464440b3_65621642",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 8
      },
      "lineNbr": 177,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "83c8d6c5_0ee402de",
      "range": {
        "startLine": 177,
        "startChar": 14,
        "endLine": 177,
        "endChar": 23
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f29b4ba9_5b21fdec",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 8
      },
      "lineNbr": 179,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Should this also remove from memory? If not, why not specify it as removeThumbnailFromDisk()?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "680352af_178a0b32",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 8
      },
      "lineNbr": 179,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "I\u0027ve specified it as removeThumbnailsFromDisk, thanks!",
      "parentUuid": "f29b4ba9_5b21fdec",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "40873c24_c54b7fe8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/suggestions/ImageFetcher.java",
        "patchSetId": 8
      },
      "lineNbr": 368,
      "author": {
        "id": 1123275
      },
      "writtenOn": "2017-07-27T09:28:42Z",
      "side": 1,
      "message": "bauerb@: Should we also cache the download suggestions thumbnails to disk? They will be as stable as the ones for the downloads UI, right?",
      "range": {
        "startLine": 368,
        "startChar": 19,
        "endLine": 368,
        "endChar": 24
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74b92a76_3eadeebf",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/suggestions/ImageFetcher.java",
        "patchSetId": 8
      },
      "lineNbr": 368,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-27T13:44:24Z",
      "side": 1,
      "message": "Yeah, I don\u0027t see why they wouldn\u0027t, given that both UIs are showing the same set of data.",
      "parentUuid": "40873c24_c54b7fe8",
      "range": {
        "startLine": 368,
        "startChar": 19,
        "endLine": 368,
        "endChar": 24
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e89626e4_ed06e9f1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/suggestions/ImageFetcher.java",
        "patchSetId": 8
      },
      "lineNbr": 368,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "74b92a76_3eadeebf",
      "range": {
        "startLine": 368,
        "startChar": 19,
        "endLine": 368,
        "endChar": 24
      },
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23a60810_57067f9f",
        "filename": "chrome/browser/android/download/ui/thumbnail_generator.h",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Maybe mention that it invokes the Java method #onThumbnailRetrieved(...) when finished?",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23bc791b_d733d577",
        "filename": "chrome/browser/android/download/ui/thumbnail_generator.h",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "23a60810_57067f9f",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5aa57e53_f5d5dcca",
        "filename": "chrome/browser/android/download/ui/thumbnail_generator.h",
        "patchSetId": 8
      },
      "lineNbr": 35,
      "author": {
        "id": 1002237
      },
      "writtenOn": "2017-07-26T20:46:01Z",
      "side": 1,
      "message": "Nit: This seems like it could be a private method? It\u0027s only invoked by the callback for the retrieval.",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff70352a_7eae3e6d",
        "filename": "chrome/browser/android/download/ui/thumbnail_generator.h",
        "patchSetId": 8
      },
      "lineNbr": 35,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-08-09T00:47:09Z",
      "side": 1,
      "message": "It is called by ImageThumbnailRequest in the .cc file so I left it as public.",
      "parentUuid": "5aa57e53_f5d5dcca",
      "revId": "2267f2bb74ebec1702722186145e6dd87946eca3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}