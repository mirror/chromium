{
  "comments": [
    {
      "key": {
        "uuid": "75d3c659_dd4c7096",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2017-11-14T16:07:05Z",
      "side": 1,
      "message": "I guess it is unclear why there are multiple calls to the client now for left mouse down. Will that cause more work?\n\nie; left down is called here...\nhttps://cs.chromium.org/chromium/src/third_party/WebKit/Source/core/input/EventHandler.cpp?type\u003dcs\u0026sq\u003dpackage:chromium\u0026l\u003d717\n\nWould it make sense to change this to fire it always even without the left modifier?",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "600b2b45_46204574",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1145779
      },
      "writtenOn": "2017-11-14T16:11:55Z",
      "side": 1,
      "message": "\u003e I guess it is unclear why there are multiple calls to the client now for left mouse down. Will that cause more work?\n\u003e \n\u003e ie; left down is called here...\n\u003e https://cs.chromium.org/chromium/src/third_party/WebKit/Source/core/input/EventHandler.cpp?type\u003dcs\u0026sq\u003dpackage:chromium\u0026l\u003d717\n\u003e \n\u003e Would it make sense to change this to fire it always even without the left modifier?\noh, true. Do you mean to keep only kMouseDown and remove kMouseUp? \n\nAs I tested, there will be always only one even for either left and right clicks.",
      "parentUuid": "75d3c659_dd4c7096",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0856e00e_15d50c1c",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1145779
      },
      "writtenOn": "2017-11-15T10:10:48Z",
      "side": 1,
      "message": "\u003e \u003e I guess it is unclear why there are multiple calls to the client now for left mouse down. Will that cause more work?\n\u003e \u003e \n\u003e \u003e ie; left down is called here...\n\u003e \u003e https://cs.chromium.org/chromium/src/third_party/WebKit/Source/core/input/EventHandler.cpp?type\u003dcs\u0026sq\u003dpackage:chromium\u0026l\u003d717\n\u003e \u003e \n\u003e \u003e Would it make sense to change this to fire it always even without the left modifier?\n\u003e oh, true. Do you mean to keep only kMouseDown and remove kMouseUp? \n\u003e \n\u003e As I tested, there will be always only one even for either left and right clicks.\nNow I understand better what you meant. AutofillClient receives two notifications: about mouse click and focus change. They are triggered by different sets of cases. Not sure whether we can merge them into one.\n\nI\u0027ll add autofill folk. \n\nRoger: is it possible to replace WebAutofillClient::DidCompleteFocusChangeInFrame and WebAutofillClient::DidReceiveLeftMouseDownOrGestureTapInNode with one method? Seems either methods are about focus changes.",
      "parentUuid": "600b2b45_46204574",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0c98c43_84e13bd8",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1002376
      },
      "writtenOn": "2017-11-16T19:05:00Z",
      "side": 1,
      "message": "I would suggest having the two different triggers each call their own method, but then having both of those methods call a common event handler. Or is that not what you\u0027re asking?",
      "parentUuid": "0856e00e_15d50c1c",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "414aa1c8_5fa0244b",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1002376
      },
      "writtenOn": "2017-11-16T21:25:39Z",
      "side": 1,
      "message": "Or were you asking whether to only trigger on one event and not the other?\n\nThat would be reasonable to do, if the event you trigger on is a superset of the other. For example, don\u0027t trigger on mousedown and not on focus change, since you can tab into the window to give it focus without generating mousedown.",
      "parentUuid": "c0c98c43_84e13bd8",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e263d04_d9578161",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1145779
      },
      "writtenOn": "2017-11-16T21:35:39Z",
      "side": 1,
      "message": "\u003e Or were you asking whether to only trigger on one event and not the other?\n\u003e \n\u003e That would be reasonable to do, if the event you trigger on is a superset of the other. For example, don\u0027t trigger on mousedown and not on focus change, since you can tab into the window to give it focus without generating mousedown.\n\nIt needs research. Seems AutofillClient has very similar methods that call OnFocusChange but in different classes (page_click_tracker and passwords classes). Perhaps we can re-organize something. \n\nDo you mind keeping the current solution?",
      "parentUuid": "414aa1c8_5fa0244b",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "561d80ec_327805fb",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1002376
      },
      "writtenOn": "2017-11-16T21:57:02Z",
      "side": 1,
      "message": "I\u0027m coming into the conversation a little cold, so I\u0027m not sure I grok what I\u0027m trading off, sorry.\n\nIs the current solution that autofill gets notified twice? That seems like it would be OK as long as we ignore the 2nd notfication (since the ui is already visible). Or is the solution to ignore one of the events?",
      "parentUuid": "1e263d04_d9578161",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af856d7e_efc82a41",
        "filename": "content/renderer/input/render_widget_input_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 398,
      "author": {
        "id": 1145779
      },
      "writtenOn": "2017-11-17T14:32:46Z",
      "side": 1,
      "message": "\u003e I\u0027m coming into the conversation a little cold, so I\u0027m not sure I grok what I\u0027m trading off, sorry.\n\u003e \n\u003e Is the current solution that autofill gets notified twice? That seems like it would be OK as long as we ignore the 2nd notfication (since the ui is already visible). Or is the solution to ignore one of the events?\nSorry for the lack of context Roger. \nThe current solution is that we wait only for mouse down event (see https://chromium-review.googlesource.com/c/chromium/src/+/768811/10/content/renderer/input/render_widget_input_handler.cc#397). Either left and right click triggers MouseDown only once (FYI, the left click also triggers MouseUp. Thus, if we waited for either MouseUp and MouseDown (PatchSet 1), then the left click would trigger the handler twice which is not good). \n\nForget about WebAutofillClient\u0027s methods (DidCompleteFocusChangeInFrame, DidReceiveLeftMouseDownOrGestureTapInNode). I\u0027m happy not to change anything there. \n\nAutofillAgent::DidCompleteFocusChangeInFrame will be called not only when a user makes left click, but also right click. So, right click will also trigger |page_click_tracker_-\u003eDidCompleteFocusChangeInFrame()|. This is the only effect on autofill part. \n\nHope this manuscript makes things a bit more clear to you :)",
      "parentUuid": "561d80ec_327805fb",
      "range": {
        "startLine": 398,
        "startChar": 19,
        "endLine": 398,
        "endChar": 26
      },
      "revId": "c32db39d10b87ed5a6570b34802d3b3636fa0dab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}