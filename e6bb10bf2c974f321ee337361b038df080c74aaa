{
  "comments": [
    {
      "key": {
        "uuid": "691f666a_b85e9129",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 45,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-12T04:56:31Z",
      "side": 1,
      "message": "Do we need beginChange/endChange?",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6b418b6_385b4cca",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 45,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-12T09:26:24Z",
      "side": 1,
      "message": "From what I understand when looking at beginChange and endChange, they should be called whenever state gets changed (like by setting selectedIndexes); they have an internal counter to make sure they only get executed once (in the outermost function). The exact implementation does not affect this method, but I would keep it because the exact implementation might change at a later point so that it will affect us, and because it makes sense semantically.\nOrder of execution without beginChange/endChange: beginChange -\u003e ListSelectionModel.adjustToReordering logic -\u003e endChange -\u003e FileListSelectionModel.adjustToReordering logic\nOrder of execution with beginChange/endChange: beginChange -\u003e ListSelectionModel.adjustToReordering logic -\u003e FileListSelectionModel.adjustToReordering logic -\u003e endChange",
      "parentUuid": "691f666a_b85e9129",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11064e50_8f466f54",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 45,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-12T11:31:18Z",
      "side": 1,
      "message": "beginChange/endChange is used for minimizing the number of \u0027change\u0027 event.\nAs we know that the selection is not changed outside the superclass\u0027s function, let\u0027s remove beginChange/endChange here.\nFuture readers might be confused with the purpose of beginChange/endChange.",
      "parentUuid": "d6b418b6_385b4cca",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "211fcd69_59cc9cc2",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 45,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-13T02:22:24Z",
      "side": 1,
      "message": "Since we do change the selection outside the superclass\u0027s function (see my reply to the comment below), I\u0027m not sure if it is better coding style to keep beginChange/endChange here or not - what do you think?",
      "parentUuid": "11064e50_8f466f54",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca7e8a00_356bb39c",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-12T04:56:31Z",
      "side": 1,
      "message": "this.selectedIndexes.filter(i \u003d\u003e permutation[i] !\u003d -1).length will be simpler.",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16be74bc_3f4daf54",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-12T09:26:24Z",
      "side": 1,
      "message": "Of course.. thanks for pointing that out :)",
      "parentUuid": "ca7e8a00_356bb39c",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9fbddcf5_0e7e741e",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-12T11:31:18Z",
      "side": 1,
      "message": "The new code can still be simplified by using arrow function.\n\nWhen you are suggested actual code snippet, please follow it asap or choose different style with a rationale.",
      "parentUuid": "16be74bc_3f4daf54",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8b687d2_14542e40",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-13T02:22:24Z",
      "side": 1,
      "message": "Sorry for that - won\u0027t happen again!",
      "parentUuid": "9fbddcf5_0e7e741e",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6abf7dde_2ff6cef4",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 63,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-12T04:56:31Z",
      "side": 1,
      "message": "Why is selectedIndexes cleared? It should already be set in superclass method?",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e40ca00_cba58c2e",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 63,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-12T09:26:24Z",
      "side": 1,
      "message": "The superclass method will set the focus to the item nearest to the last item that got deleted if all of them were deleted (see https://codesearch.chromium.org/chromium/src/ui/webui/resources/js/cr/ui/list_selection_model.js?l\u003d352\u0026rcl\u003da3c45f3749fe0fab81aea4391518fd2bd9f090dc for reference), so we need to override this part. Except, of course, if I should move this logic to the superclass instead - I\u0027m just not sure if other teams are depending on the behavior of the superclass, so I did it in this file.",
      "parentUuid": "6abf7dde_2ff6cef4",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b8cce854_105194fc",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 63,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-12T11:31:18Z",
      "side": 1,
      "message": "IIUC, the expected behavior is that a new file should be selected when all selected files are deleted but we should leave check-select mode.\nSo I think we don\u0027t need to clear the selected indexes here.",
      "parentUuid": "1e40ca00_cba58c2e",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "546d4fd2_cd7374ae",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 63,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-13T02:22:24Z",
      "side": 1,
      "message": "The latest update on the bug 742689 by mcirimele@:\n\"In touch mode focus should not exist, so we should always remove selection and focus after deleting a file there. For now, we should do the same outside of touch mode. If a selected file is deleted, selection and focus is removed.\" \u003c-- so we need to remove focus \u003d empty selectedIndexes",
      "parentUuid": "b8cce854_105194fc",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "69699322_aecd579e",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 63,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-13T06:13:44Z",
      "side": 1,
      "message": "Oops, I didn\u0027t notice it.\nIf we can clear the selection, this CL can be even simpler.\nBut I have a concern about the new hehavior.\n\nLet\u0027s wait Maria\u0027s response on the bug.",
      "parentUuid": "546d4fd2_cd7374ae",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3047f701_093b7315",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model.js",
        "patchSetId": 15
      },
      "lineNbr": 63,
      "author": {
        "id": 1110159
      },
      "writtenOn": "2017-09-14T02:31:25Z",
      "side": 1,
      "message": "Maybe we don\u0027t have to wait the response.\n\nHow about keeping the existing behavior about selection (i.e. remove this line and the beginChange/endChange pair), and create another CL if Maria asks us to clear the selection?",
      "parentUuid": "69699322_aecd579e",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc2d4804_7b783930",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model_unittest.html",
        "patchSetId": 15
      },
      "lineNbr": 2,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2017-09-12T06:21:47Z",
      "side": 1,
      "message": "2017",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "740d8fbc_6205e569",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model_unittest.html",
        "patchSetId": 15
      },
      "lineNbr": 2,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-12T09:26:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bc2d4804_7b783930",
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b667e5c_3a0200c4",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model_unittest.js",
        "patchSetId": 15
      },
      "lineNbr": 1,
      "author": {
        "id": 1150179
      },
      "writtenOn": "2017-09-12T06:21:47Z",
      "side": 1,
      "message": "2017",
      "range": {
        "startLine": 1,
        "startChar": 13,
        "endLine": 1,
        "endChar": 17
      },
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aea16014_60e4646f",
        "filename": "ui/file_manager/file_manager/foreground/js/ui/file_list_selection_model_unittest.js",
        "patchSetId": 15
      },
      "lineNbr": 1,
      "author": {
        "id": 1241182
      },
      "writtenOn": "2017-09-12T09:26:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7b667e5c_3a0200c4",
      "range": {
        "startLine": 1,
        "startChar": 13,
        "endLine": 1,
        "endChar": 17
      },
      "revId": "e6bb10bf2c974f321ee337361b038df080c74aaa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}