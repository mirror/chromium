{
  "comments": [
    {
      "key": {
        "uuid": "be897a14_7c57b9eb",
        "filename": "third_party/WebKit/Source/platform/graphics/HighContrastImageClassifier.cpp",
        "patchSetId": 3
      },
      "lineNbr": 328,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2017-11-08T17:44:19Z",
      "side": 1,
      "message": "I like how the decision tree is easier to understand now.\nI wonder if it\u0027d make sense to just name these constants\nsomething meaningful rather than a kDecisionTree array.\nThen the code could look like this, much more readable:\n\nfloat color_count_ratio \u003d features[1];\nfloat low_color_count_threshold \u003d kLowColorCountThreshold[features[0]];\nfloat high_color_count_threshold \u003d kHighColorCountThreshold[features[0]];\nif (color_count_ratio \u003c low_color_count_threshold) {\n  // Very few colors means it\u0027s not a photo; we should filter the image.\n  result \u003d true;\n} else if (color_count_ratio \u003e high_color_count_threshold) {\n  // Very many colors means it\u0027s probably photorealistic; we should\n  // not filter the image.\n  result \u003d false;\n} else {\n  // In-between, we use a neural network to decide whether to filter or not\n  // based on the features.\n  ...\n}",
      "revId": "acae46f631ffaae948736d98a903bc3d0ca23d57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac108f0a_b4aefb31",
        "filename": "third_party/WebKit/Source/platform/graphics/highcontrast/highcontrast_classifier.cc",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2017-11-08T17:44:19Z",
      "side": 1,
      "message": "Since this is autogenerated I think it may belong in third_party.\nI think it still needs a copyright header.\n\nTypically files like this also have a message at the top\nsaying something like \"Autogenerated file, DO NOT EDIT\".\n\nI think the bigger issue here is that this isn\u0027t really open-source\nas-is now - someone external to Google doesn\u0027t have the ability to\nmodify this model and regenerate this file.\n\nIs tfnative public / open-source? If so, would it be possible\nto check in the source that generates this code? Even if we don\u0027t\ncheck in the training data, checking in the source model and\nbuild instructions would allow someone to regenerate this file.\n\nAnother option is to check this into src-internal, then maybe\nChromium could skip the tfnative step, but Google Chrome could\nlink to the neural net.",
      "revId": "acae46f631ffaae948736d98a903bc3d0ca23d57",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}