{
  "comments": [
    {
      "key": {
        "uuid": "a53342fe_b4561090",
        "filename": "components/suggestions/image_manager.cc",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2018-02-05T16:25:56Z",
      "side": 1,
      "message": "I think the 100 is arbitrary here and this code path may not be hit often (typical number of images is 8). We should probably remove from this change and think about slowdowns by filing a crbug.com entry.",
      "revId": "bcba05ebd822faf861cf25b1279f10cb3e2daae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4397dff2_5d04d018",
        "filename": "components/suggestions/image_manager.cc",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1263833
      },
      "writtenOn": "2018-02-01T23:11:27Z",
      "side": 1,
      "message": "Does this subtly alter the behavior of future ServeFromCacheOrNetwork calls?\n\nIf this cache is not cleared, the ImageCacheRequest.image_url for a given ImageCacheRequest.url key in pending_cache_requests_ never changes (even as callbacks are added) when the SuggestionsProfile is updated. By clearing the cache, a new entry (created in line 177-181) is added, using the current values in image_url_map_.\n\nOverall, this is probably a good thing! I\u0027m not super familiar with the codebase yet, so just raising this for confirmation.",
      "range": {
        "startLine": 310,
        "startChar": 2,
        "endLine": 310,
        "endChar": 33
      },
      "revId": "bcba05ebd822faf861cf25b1279f10cb3e2daae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa3ac678_376ce5c6",
        "filename": "components/suggestions/image_manager.cc",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1125359
      },
      "writtenOn": "2018-02-01T23:39:08Z",
      "side": 1,
      "message": "It looks like image_url_map_ is never changed? But I think i saw calls to AddImage yesterday! I believe the code the top sites and suggestion code has changed quite a bit in last week.\nWhateverz.. the pending_cache_request is never used after this point since the database is initialized. So, once we serve requests we can never add more requests. See |database_ready_|.",
      "parentUuid": "4397dff2_5d04d018",
      "range": {
        "startLine": 310,
        "startChar": 2,
        "endLine": 310,
        "endChar": 33
      },
      "revId": "bcba05ebd822faf861cf25b1279f10cb3e2daae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c47044a7_7d8a2961",
        "filename": "components/suggestions/image_manager.cc",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2018-02-05T16:25:56Z",
      "side": 1,
      "message": "BTW AddImageURL seems to be used only by GetPageThumbnailWithURL [1], which seems unused. Opportunity for cleanup?\n\nhttps://cs.chromium.org/chromium/src/components/suggestions/suggestions_service_impl.cc?rcl\u003d631048a10bb7eddb9da7dc812bb8d20eebc264a2\u0026l\u003d184",
      "parentUuid": "aa3ac678_376ce5c6",
      "range": {
        "startLine": 310,
        "startChar": 2,
        "endLine": 310,
        "endChar": 33
      },
      "revId": "bcba05ebd822faf861cf25b1279f10cb3e2daae8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}