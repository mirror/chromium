{
  "comments": [
    {
      "key": {
        "uuid": "5984bb31_35ad43f3",
        "filename": "chrome/browser/resources/settings/people_page/change_picture.js",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-18T22:30:05Z",
      "side": 1,
      "message": "Is this absolutely gauranteed to trigger \u0027old-image-changed\u0027 ? We should update the documenation, and maybe modify it to return false if it fails (if that\u0027s possible).\nhttps://cs.chromium.org/chromium/src/chrome/browser/resources/settings/people_page/change_picture_browser_proxy.js?type\u003dcs\u0026q\u003dChangePictureBrowserProxyImpl\u0026sq\u003dpackage:chromium\u0026l\u003d54",
      "revId": "42370bdf7dc7c8b395c4a859b03b145054bb100e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1a247bd_27598766",
        "filename": "chrome/browser/resources/settings/people_page/change_picture.js",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2018-01-19T21:36:35Z",
      "side": 1,
      "message": "I updated the documentation in latest patch. There are some error cases where we fail to generate old-image-changed but it shouldn\u0027t happen during normal usage. It can happen if there\u0027s a bug or we have malicious webui. I\u0027m not sure it\u0027s worth making this code more complicated to improve UX for that? Currently, if this would happen, we end up showing the image from the camera (that can\u0027t be discarded) until the user selects another image. Let me know what you think. Happy to add some code for the error cases in change_picture_handler.cc if you think that\u0027s needed. We just need to decide what would be the right reply to send in those cases..",
      "parentUuid": "5984bb31_35ad43f3",
      "revId": "42370bdf7dc7c8b395c4a859b03b145054bb100e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "209918f5_0a0a84f8",
        "filename": "chrome/browser/resources/settings/people_page/change_picture.js",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-19T21:49:31Z",
      "side": 1,
      "message": "The best way to handle this would be to use sendWithPromise and have Chrome return the new old image, but as long as it is logically impossible for Chrome to not fire \u0027old-image-changed\u0027 this is fine with the updated documentation. If there are any real edge cases (i.e. not due to a bug in the code) we should either make sure they send \u0027old-image-changed\u0027 anyway or use sendWithPromise.",
      "parentUuid": "e1a247bd_27598766",
      "revId": "42370bdf7dc7c8b395c4a859b03b145054bb100e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}