{
  "comments": [
    {
      "key": {
        "uuid": "aaa1d2f9_d000e6cd",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 28,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "This should be \u0027gusss\u0027 since you wrote the TODO.  We don\u0027t want to use TODOs in code to assign work so they are used to record who wrote the comment originally.",
      "range": {
        "startLine": 28,
        "startChar": 8,
        "endLine": 28,
        "endChar": 14
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7e4d19d_2ef6bb5c",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 28,
      "author": {
        "id": 1000528
      },
      "writtenOn": "2017-08-03T16:09:30Z",
      "side": 1,
      "message": "Actually, it\u0027s more about where to go for more context. Putting a (soon to be) Xoogler there isn\u0027t very helpful in the long term. Probably the best option is a bug reference, which can accumulate details over time if necessary.",
      "parentUuid": "aaa1d2f9_d000e6cd",
      "range": {
        "startLine": 28,
        "startChar": 8,
        "endLine": 28,
        "endChar": 14
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8eeaeb08_676e5755",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 28,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T16:17:43Z",
      "side": 1,
      "message": "This feels like an assignment though (i.e. Implement a thing), especially since the bug is referenced which will have enough context to take action. \n\nThis is a nit for me, I wouldn\u0027t do it personally but won\u0027t object too strongly if it is left as-is.",
      "parentUuid": "d7e4d19d_2ef6bb5c",
      "range": {
        "startLine": 28,
        "startChar": 8,
        "endLine": 28,
        "endChar": 14
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28ef4706_08fc9802",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 28,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "I changed it. With the bug there, it shouldn\u0027t matter one way or the other.",
      "parentUuid": "8eeaeb08_676e5755",
      "range": {
        "startLine": 28,
        "startChar": 8,
        "endLine": 28,
        "endChar": 14
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b76a293_4c09af12",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 34,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "You could add some checking up here if these are required:\nDCHECK(frame);\nDCHECK(done);\n\nThis is also helpful because you might store the params in a pending_encode_ callback and you won\u0027t know the original stacktrace if there is a problem with the params when the pending_encode_ callback is run.",
      "range": {
        "startLine": 34,
        "startChar": 1,
        "endLine": 34,
        "endChar": 2
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36fcf51a_73a91003",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 34,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6b76a293_4c09af12",
      "range": {
        "startLine": 34,
        "startChar": 1,
        "endLine": 34,
        "endChar": 2
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6611f7bb_4d995217",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 68,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "These cases are handled on lines 45 and 46.  We typically don\u0027t add DCHECKs if we are going to handle the condition.",
      "range": {
        "startLine": 66,
        "startChar": 1,
        "endLine": 68,
        "endChar": 0
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d5f3447_388f8650",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 68,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6611f7bb_4d995217",
      "range": {
        "startLine": 66,
        "startChar": 1,
        "endLine": 68,
        "endChar": 0
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0caa1373_57820219",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 73,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "Would this DCHECK be useful at the top of the function?  We often group DCHECKs for input params at the top so we know the params are valid before doing work on them.",
      "range": {
        "startLine": 73,
        "startChar": 5,
        "endLine": 73,
        "endChar": 62
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f157b28_ecca277c",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 73,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Makes sense! Done!",
      "parentUuid": "0caa1373_57820219",
      "range": {
        "startLine": 73,
        "startChar": 5,
        "endLine": 73,
        "endChar": 62
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1224aebf_6c9dd06a",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 89,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "Can we use a helper function for this (or does one already exist)?  If this isn\u0027t shared, we can just have a function in the anonymous namespace above.",
      "range": {
        "startLine": 79,
        "startChar": 0,
        "endLine": 89,
        "endChar": 59
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26d92b1e_7be3929e",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 89,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1224aebf_6c9dd06a",
      "range": {
        "startLine": 79,
        "startChar": 0,
        "endLine": 89,
        "endChar": 59
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b827b874_6b867754",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 93,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "nit: for unnamed params like true/false/42, it can be useful to add a comment on the param name to make it obvious what is being set to false:\n/*force_keyframe\u003d*/false",
      "range": {
        "startLine": 93,
        "startChar": 49,
        "endLine": 93,
        "endChar": 54
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "398682f8_ab7956b0",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 93,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b827b874_6b867754",
      "range": {
        "startLine": 93,
        "startChar": 49,
        "endLine": 93,
        "endChar": 54
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcb68523_a77f56d2",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 151,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "I haven\u0027t used this macro before but it looks like this will terminate the process on release builds.  We typically reserve that behavior for cases where the integrity of the process has been compromised or we know that we can no longer function correctly.  \n\nIs that the case here?  Or should this be a DLOG_ASSERT()?",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 151,
        "endChar": 12
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56a81b1c_703ce93e",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 151,
      "author": {
        "id": 1000528
      },
      "writtenOn": "2017-08-03T16:09:30Z",
      "side": 1,
      "message": "Or just DCHECK, for that matter.",
      "parentUuid": "bcb68523_a77f56d2",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 151,
        "endChar": 12
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "956964d9_2c9aeb8e",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 151,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done - I\u0027m not sure why I chose LOG_ASSERT in the first place - DCHECK is more appropriate.",
      "parentUuid": "56a81b1c_703ce93e",
      "range": {
        "startLine": 151,
        "startChar": 2,
        "endLine": 151,
        "endChar": 12
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a725049e_36f93056",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 159,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "Would LOG be appropriate here (to help debug a customer machine for example)?",
      "range": {
        "startLine": 159,
        "startChar": 2,
        "endLine": 159,
        "endChar": 6
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f5f0273_6a5e680c",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 159,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a725049e_36f93056",
      "range": {
        "startLine": 159,
        "startChar": 2,
        "endLine": 159,
        "endChar": 6
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95c458d9_7c5dc3bc",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 162,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "Can you move the c\u0027tor up above the d\u0027tor in this file?  We usually put the c\u0027tor d\u0027tor (and factory methods) first and then define the rest of the methods.",
      "range": {
        "startLine": 162,
        "startChar": 0,
        "endLine": 162,
        "endChar": 44
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4cfceeef_47faed9f",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 162,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "95c458d9_7c5dc3bc",
      "range": {
        "startLine": 162,
        "startChar": 0,
        "endLine": 162,
        "endChar": 44
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "86bfaa89_e1d2bf96",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 183,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "Is it worth logging an error here that will show up on release builds?",
      "range": {
        "startLine": 183,
        "startChar": 4,
        "endLine": 183,
        "endChar": 17
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0424ba3_fd48ec11",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 183,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "(apologies for the terrible formatting - not sure why gerrit is discarding all my newlines) Currently, the only place initialize is called is in Encode, where we do:\n\nif (!Initialize()) {\n      DLOG(ERROR) \u003c\u003c \"Could not initialize encoder.\";\n      state_ \u003d INITIALIZATION_ERROR;\n      return;\n}\n\nSo in this case, the \"return false\" is handled by logging out the error. I see a number of changes that could be made:\n(1) as you suggested, I could LOG inside Initialize(), instead of DLOGing after running Initialize() and getting false.\n(2) If I do that, though, I could also see an argument for moving the \"state_ \u003d INITIALIZATION_ERROR;\" line to within Initialize().\n\nAny opinions on these ideas?",
      "parentUuid": "86bfaa89_e1d2bf96",
      "range": {
        "startLine": 183,
        "startChar": 4,
        "endLine": 183,
        "endChar": 17
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "970186ce_956982fd",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 183,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T17:02:48Z",
      "side": 1,
      "message": "option #2 makes a lot of sense.  As a follow-up, I would have thought Intialize() would set state_ to \u0027INITIALIZED\u0027 on success but that happens in RequireBitstreamBuffers() which isn\u0027t directly called by Initialize() (it may be called as part of the CreateVEA() function but that wasn\u0027t apparent to me).\n\nIs it possible for the Initialize method to look something like this:\n\nbool Initialize() {\n  if (state_ !\u003d UNINITIALZED) {\n    return state_ \u003d\u003d INITIALIZED;\n  }\n  state_ \u003d INITIALIZING;\n\n  // DO INIT STUFF\n\n  if (init_failed) {\n    state_ \u003d INITIALIZATION_ERROR;\n    return false;\n  }\n\n  state_ \u003d INITIALIZED;\n  return true;\n}",
      "parentUuid": "e0424ba3_fd48ec11",
      "range": {
        "startLine": 183,
        "startChar": 4,
        "endLine": 183,
        "endChar": 17
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13156fc8_0dacd3a2",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 200,
      "author": {
        "id": 1133074
      },
      "writtenOn": "2017-08-03T15:27:51Z",
      "side": 1,
      "message": "):  -\u003e missing colon",
      "range": {
        "startLine": 200,
        "startChar": 15,
        "endLine": 200,
        "endChar": 16
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6160ef80_f386acaf",
        "filename": "remoting/codec/webrtc_video_encoder_gpu.cc",
        "patchSetId": 14
      },
      "lineNbr": 200,
      "author": {
        "id": 1223699
      },
      "writtenOn": "2017-08-03T16:53:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "13156fc8_0dacd3a2",
      "range": {
        "startLine": 200,
        "startChar": 15,
        "endLine": 200,
        "endChar": 16
      },
      "revId": "5ce320729a318a6bcbc628917cd04141f2370a71",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}