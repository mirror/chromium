{
  "comments": [
    {
      "key": {
        "uuid": "ae12e00b_ba7df3d1",
        "filename": "content/browser/renderer_host/render_widget_host_input_event_router.cc",
        "patchSetId": 2
      },
      "lineNbr": 724,
      "author": {
        "id": 1228384
      },
      "writtenOn": "2017-09-13T15:42:03Z",
      "side": 1,
      "message": "See comment below. We should probably fix the union access here as well.",
      "revId": "77d851cfede570516086348cfc28b68719fd1599",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "493f2992_85811c9f",
        "filename": "content/browser/renderer_host/render_widget_host_input_event_router.cc",
        "patchSetId": 2
      },
      "lineNbr": 750,
      "author": {
        "id": 1228384
      },
      "writtenOn": "2017-09-13T15:42:03Z",
      "side": 1,
      "message": "The DCHECK lets GesturePinchEnd events through and we\u0027ll end up accessing the scroll_update member.\n\nIt looks like the DCHECK was previously extended to allow GesturePinchEnd events without updating the union access. Indeed, at first glance, it\u0027s not all that clear that the DCHECK is for the union access.\n\nPerhaps it would be clearer to switch on the event type and have a |NOTREACHED()| for the default case, instead of having a separate DCHECK.",
      "revId": "77d851cfede570516086348cfc28b68719fd1599",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c086c02e_e4ff5159",
        "filename": "content/browser/renderer_host/render_widget_host_input_event_router.cc",
        "patchSetId": 2
      },
      "lineNbr": 750,
      "author": {
        "id": 1213209
      },
      "writtenOn": "2017-09-13T18:40:11Z",
      "side": 1,
      "message": "I did notice that pinchEnd uses update values, but there is no struct in the union for pinch_end.\nIf it makes the code clearer I can change it to the type based switch statement and for pinchEnd just send a scroll_end with default values for all fields.",
      "parentUuid": "493f2992_85811c9f",
      "revId": "77d851cfede570516086348cfc28b68719fd1599",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db19c0eb_4bf2bf9d",
        "filename": "content/browser/renderer_host/render_widget_host_input_event_router.cc",
        "patchSetId": 2
      },
      "lineNbr": 750,
      "author": {
        "id": 1228384
      },
      "writtenOn": "2017-09-13T21:13:51Z",
      "side": 1,
      "message": "Right, |data| is unused for GesturePinchBegin/End, so we just read zeros from |data|\u0027s memory. So fortunately, this is currently not causing issues.\n\nBut if |data| were being used, then reading |data| as |scroll_update| could give garbage values.\n\nSo, yeah, setting |data.scroll_end|\u0027s fields to their default values makes sense.\n\nUsing ifs would also work, but my concern with having if statements separated from the DCHECK is that the DCHECK could get extended without the |data| setup being noticed. If we have |data| being set inside a switch with a |NOTREACHED()|, I think it would be a lot clearer that |data| needs to be set in order to call this function with a new event type. Plus we wouldn\u0027t have to duplicate the list of supported types in both the if conditions and the DCHECK.",
      "parentUuid": "c086c02e_e4ff5159",
      "revId": "77d851cfede570516086348cfc28b68719fd1599",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}