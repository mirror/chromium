{
  "comments": [
    {
      "key": {
        "uuid": "b8770dd0_f0dd6496",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 20,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-23T21:14:57Z",
      "side": 1,
      "message": "nit: Mojo",
      "range": {
        "startLine": 20,
        "startChar": 41,
        "endLine": 20,
        "endChar": 45
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c356261_af33b917",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 28,
      "author": {
        "id": 1003166
      },
      "writtenOn": "2017-08-23T21:59:07Z",
      "side": 1,
      "message": "nit: \u003d default",
      "range": {
        "startLine": 28,
        "startChar": 33,
        "endLine": 28,
        "endChar": 35
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "524f799d_68649865",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 36,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-23T21:14:57Z",
      "side": 1,
      "message": "the docs for AppendFileDescriptor() say \"The FD will be duplicated so you still have to close the original FD.\" is release() leaking the FD?\n\nthis looks like it\u0027s copied from ArcOemCryptoClientImpl, so there may be a bug there as well.",
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "caf1d985_763f3d7f",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 36,
      "author": {
        "id": 1181480
      },
      "writtenOn": "2017-08-23T21:25:18Z",
      "side": 1,
      "message": "yup direct copy pasta from ArcOemCrypto.\n\nMy reasoning for the above code was that we std::move() the FD while calling BootstrapMojoConnection(), and so the base::ScopedFD would then be in function scope, so would automatically get closed when the BootstrapMojoConnection() returns.",
      "parentUuid": "524f799d_68649865",
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7c7e852_85b9eea2",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 36,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-23T21:42:57Z",
      "side": 1,
      "message": "assuming that ScopedFD does the standard thing when .release() is called (and it appears to), then it\u0027s not going to have anything left to free when its d\u0027tor runs... unless i\u0027m missing something.\n\nif you\u0027re just trying to get the underlying integer FD without telling the ScopedFD to release ownership of it, i think you want to call .get() instead.",
      "parentUuid": "caf1d985_763f3d7f",
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e15f226e_c35f04b1",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 36,
      "author": {
        "id": 1192808
      },
      "writtenOn": "2017-08-23T21:43:11Z",
      "side": 1,
      "message": "Good point, I\u0027ll clean that up in my code.\n\nPrashant, calling release() prevents the ScopedFD from cleaning up the handle itself because it relinquishes ownership when that\u0027s called. Just call .get() instead and then it should be fine.",
      "parentUuid": "caf1d985_763f3d7f",
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f64c2581_8695f075",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 36,
      "author": {
        "id": 1181480
      },
      "writtenOn": "2017-08-23T21:48:00Z",
      "side": 1,
      "message": "that makes sense. Will modify too.\n\nOnce this code stabilizes, I\u0027ll try pulling the common bits into a library (since I think in the future other services may also want to use D-BUS to bootstrap a mojo connection)",
      "parentUuid": "e15f226e_c35f04b1",
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed4a6598_1bd39519",
        "filename": "chromeos/dbus/arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 70,
      "author": {
        "id": 1003166
      },
      "writtenOn": "2017-08-23T21:59:07Z",
      "side": 1,
      "message": "nit: \u003d default",
      "range": {
        "startLine": 70,
        "startChar": 33,
        "endLine": 70,
        "endChar": 35
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9b765ad_62829849",
        "filename": "chromeos/dbus/arc_midis_client.h",
        "patchSetId": 13
      },
      "lineNbr": 19,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-23T21:14:57Z",
      "side": 1,
      "message": "nit: FD",
      "range": {
        "startLine": 19,
        "startChar": 37,
        "endLine": 19,
        "endChar": 39
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4c11c55_dbcbc4d4",
        "filename": "chromeos/dbus/arc_midis_client.h",
        "patchSetId": 13
      },
      "lineNbr": 20,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-23T21:14:57Z",
      "side": 1,
      "message": "nit: Mojo",
      "range": {
        "startLine": 20,
        "startChar": 19,
        "endLine": 20,
        "endChar": 23
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e838813f_ba0fa0aa",
        "filename": "chromeos/dbus/arc_midis_client.h",
        "patchSetId": 13
      },
      "lineNbr": 28,
      "author": {
        "id": 1003166
      },
      "writtenOn": "2017-08-23T21:59:07Z",
      "side": 1,
      "message": "can this be a std::unique_ptr\u003cArcMidisClient\u003e ?",
      "range": {
        "startLine": 28,
        "startChar": 9,
        "endLine": 28,
        "endChar": 24
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9813829_f6b44f5d",
        "filename": "chromeos/dbus/arc_midis_client.h",
        "patchSetId": 13
      },
      "lineNbr": 30,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-23T21:14:57Z",
      "side": 1,
      "message": "nit: Mojo",
      "range": {
        "startLine": 30,
        "startChar": 19,
        "endLine": 30,
        "endChar": 23
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a2c6cb1_25e63018",
        "filename": "chromeos/dbus/fake_arc_midis_client.cc",
        "patchSetId": 13
      },
      "lineNbr": 15,
      "author": {
        "id": 1003166
      },
      "writtenOn": "2017-08-23T21:59:07Z",
      "side": 1,
      "message": "nit: \u003d default",
      "range": {
        "startLine": 15,
        "startChar": 41,
        "endLine": 15,
        "endChar": 43
      },
      "revId": "710bf9b9abeb0dae237ba68ca9ecaa97d7599a40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}