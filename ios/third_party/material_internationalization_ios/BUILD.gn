# Copyright 2017 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/ios/ios_sdk.gni")
import("//build/config/ios/rules.gni")

config("material_internationalization_ios_config") {
  include_dirs = [ "src/Sources" ]
  visibility = [ ":material_internationalization_ios" ]
}

config("config") {
  include_dirs = [ "src/Sources" ]
}

ios_framework_bundle("material_internationalization_ios_framework") {
  output_name = "MDFInternationalization"
  info_plist = "Info.plist"

  sources = [
    "src/Sources/MDFRTL.h",
    "src/Sources/MDFRTL.m",
    "src/Sources/UIImage+MaterialRTL.h",
    "src/Sources/UIImage+MaterialRTL.m",
    "src/Sources/UIView+MaterialRTL.h",
    "src/Sources/UIView+MaterialRTL.m",
  ]
  public_headers = [
    "src/Sources/MDFRTL.h",
    "src/Sources/UIImage+MaterialRTL.h",
    "src/Sources/UIView+MaterialRTL.h",
  ]

  libs = [
    "UIKit.framework",
    "CoreImage.framework",
  ]

  public_configs = [ ":config" ]

  configs -= [
    "//build/config/gcc:symbol_visibility_hidden",
    "//build/config/compiler:chromium_code",
  ]
  configs += [
    "//build/config/compiler:no_chromium_code",
    "//build/config/compiler:enable_arc",
    "//build/config/gcc:symbol_visibility_default",
  ]
}

source_set("material_internationalization_ios") {
  sources = [
    "src/Sources/MDFInternationalization.h",
  ]
  public_deps = [
    ":material_internationalization_ios_framework",
    "//ios/third_party/material_internationalization_ios:material_internationalization_ios_framework+link",
  ]
  libs = [ "MDFInternationalization.framework" ]

  public_configs = [ ":material_internationalization_ios_config" ]
  configs -= [ "//build/config/compiler:chromium_code" ]
  configs += [
    ":material_internationalization_ios_config",
    "//build/config/compiler:enable_arc",
    "//build/config/compiler:no_chromium_code",
  ]
}
