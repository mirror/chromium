{
  "comments": [
    {
      "key": {
        "uuid": "3776c349_2735a328",
        "filename": "ui/views/widget/desktop_aura/desktop_window_tree_host_x11.cc",
        "patchSetId": 4
      },
      "lineNbr": 2089,
      "author": {
        "id": 1000111
      },
      "writtenOn": "2018-01-11T16:26:38Z",
      "side": 1,
      "message": "When can this happen? CoalescePendingMotionEvents() should not discard the move event that happened. Once we call EventTypeFromNative() above (line 2074), the rest of the code assumes that that remains the case. So if it becomes UNKNOWN for some reason, it would be useful to understand why/how that happens.",
      "revId": "1c2451dc7381bb104b6b6f70490f7e7a81ad901d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d25c267d_36d3ff4d",
        "filename": "ui/views/widget/desktop_aura/desktop_window_tree_host_x11.cc",
        "patchSetId": 4
      },
      "lineNbr": 2089,
      "author": {
        "id": 1228974
      },
      "writtenOn": "2018-01-12T07:26:12Z",
      "side": 1,
      "message": "The problem is that I can\u0027t make the browser crash. The issue couldn\u0027t be replicated. Given that it\u0027s the only affected path, I\u0027ve come with the above mentioned conclusion.",
      "parentUuid": "3776c349_2735a328",
      "revId": "1c2451dc7381bb104b6b6f70490f7e7a81ad901d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "954dab6c_f72642d4",
        "filename": "ui/views/widget/desktop_aura/desktop_window_tree_host_x11.cc",
        "patchSetId": 4
      },
      "lineNbr": 2089,
      "author": {
        "id": 1228974
      },
      "writtenOn": "2018-01-12T14:19:00Z",
      "side": 1,
      "message": "Ok, I\u0027ve been able to reproduce the issue.\n\nCoalescePendingMotionEvents can return a mouse scroll event, if user has a context menu or anything other window opened, which requires to translate event locations. To reproduce this, do the following: open a browser, open a context menu, start moving a mouse pointer around and scroll at the same time.\n\nAnd when MouseEvent is constructed, the EventTypeFromXEvent returns ET_UNKNOWN for the XI_Motion type events. It\u0027s this line - https://cs.chromium.org/chromium/src/ui/events/x/events_x_utils.cc?q\u003devents_x_ut\u0026sq\u003dpackage:chromium\u0026l\u003d439.\n\nAnd then we we do event-\u003eAsLocatedEvent(), it fails with a CHECK(IsLocatedEvent), because the current type is unknown and that event mustn\u0027t have been created.",
      "parentUuid": "d25c267d_36d3ff4d",
      "revId": "1c2451dc7381bb104b6b6f70490f7e7a81ad901d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2427946_e42bdb12",
        "filename": "ui/views/widget/desktop_aura/desktop_window_tree_host_x11.cc",
        "patchSetId": 4
      },
      "lineNbr": 2089,
      "author": {
        "id": 1000111
      },
      "writtenOn": "2018-01-12T16:30:32Z",
      "side": 1,
      "message": "Very interesting! Thank you for digging into this.\n\nCoalescePendingMotionEvents() seems to try to not coalesce with a scroll event though [1]. Is there a reason that isn\u0027t helping in this case?\n\nSince this can affect only mouse events, I think if we want to have this check, we should have it only for mouse events (i.e below).\n\n[1] https://cs.chromium.org/chromium/src/ui/base/x/x11_util.cc?l\u003d351",
      "parentUuid": "954dab6c_f72642d4",
      "revId": "1c2451dc7381bb104b6b6f70490f7e7a81ad901d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98ac0d37_155021c4",
        "filename": "ui/views/widget/desktop_aura/desktop_window_tree_host_x11.cc",
        "patchSetId": 4
      },
      "lineNbr": 2110,
      "author": {
        "id": 1000111
      },
      "writtenOn": "2018-01-11T16:26:38Z",
      "side": 1,
      "message": "ditto",
      "revId": "1c2451dc7381bb104b6b6f70490f7e7a81ad901d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}