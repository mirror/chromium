{
  "comments": [
    {
      "key": {
        "uuid": "7f1c4447_29723e2e",
        "filename": "base/BUILD.gn",
        "patchSetId": 13
      },
      "lineNbr": 73,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "i think it would be good to have a comment explaining why these are needed.",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf641e08_8e48cf1d",
        "filename": "base/win/com_base_util.h",
        "patchSetId": 13
      },
      "lineNbr": 18,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "is this comment correct? it\u0027s not combase but a bunch of other dlls that contain the symbols, no?",
      "range": {
        "startLine": 18,
        "startChar": 35,
        "endLine": 18,
        "endChar": 46
      },
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea198217_1005085e",
        "filename": "base/win/com_base_util.h",
        "patchSetId": 13
      },
      "lineNbr": 21,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "on second thought, is this namespace even needed? how about changing the Preload function to something like ResolveCoreWinRTDelayload? the other two functions can go away altogether, can they not?",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb91d5f7_76790ae3",
        "filename": "base/win/com_base_util.h",
        "patchSetId": 13
      },
      "lineNbr": 21,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-09-13T15:19:35Z",
      "side": 1,
      "message": "\u003e on second thought, is this namespace even needed?\n\nYou mean ResolveCoreWinRTDelayload should just be part of base/win namespace?\n\n\u003e the other two functions can go away altogether, can they not?\n\nWell, they are there to contain the spreading of the mincore.lib+delayload dance to other modules. This way media/ and chrome/ can just call this through here.",
      "parentUuid": "ea198217_1005085e",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21d3e686_fd48660d",
        "filename": "base/win/com_base_util.h",
        "patchSetId": 13
      },
      "lineNbr": 21,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-14T08:34:26Z",
      "side": 1,
      "message": "\u003e \u003e on second thought, is this namespace even needed?\n\u003e \n\u003e You mean ResolveCoreWinRTDelayload should just be part of base/win namespace?\n\nSure, why not? Namespaces are useful for either avoiding a naming collision or for making a logical grouping. In this case, there\u0027s so little to group and no risk of collision, so I don\u0027t think it adds much.\n\n\u003e \u003e the other two functions can go away altogether, can they not?\n\u003e \n\u003e Well, they are there to contain the spreading of the mincore.lib+delayload dance to other modules. This way media/ and chrome/ can just call this through here.\n\nHmm. So you\u0027re suggesting that for component builds, all callers should go through the resolution that happens in base.dll, right? (For static builds this is a non-issue.) Seems sensible.",
      "parentUuid": "cb91d5f7_76790ae3",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1662a8e7_44eac1f6",
        "filename": "base/win/com_base_util.h",
        "patchSetId": 13
      },
      "lineNbr": 25,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "Wow, __HrLoadAllImportsForDll is fantastic!\nSo, do we still need this kind of wrap functions?\n\nAll we need seems to have \"bool base::win::DelayLoad*\" methods in base/win/delay_load?",
      "range": {
        "startLine": 25,
        "startChar": 20,
        "endLine": 25,
        "endChar": 42
      },
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92be5d77_3dd8669a",
        "filename": "base/win/com_base_util_unittest.cc",
        "patchSetId": 13
      },
      "lineNbr": 16,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "is there a reason not to test on win7 as well? are there cases where the preload would succeed on win7?",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47cec873_178b4be1",
        "filename": "base/win/com_base_util_unittest.cc",
        "patchSetId": 13
      },
      "lineNbr": 16,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-09-13T15:19:35Z",
      "side": 1,
      "message": "The documentation for the two functions used (RoGetActivationFactory and RoActivateInstance) state a minimum on Win8, according to the documentation. Also, the DLL loaded is not present on my Win7 box (outside of an SDK/Web Tools directory).",
      "parentUuid": "92be5d77_3dd8669a",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c81478e0_9796d7b5",
        "filename": "base/win/com_base_util_unittest.cc",
        "patchSetId": 13
      },
      "lineNbr": 16,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-14T08:34:26Z",
      "side": 1,
      "message": "Right, so PreloadRequiredFunctions() should return false (and not crash!) on Win7. Why not test this?",
      "parentUuid": "47cec873_178b4be1",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8f2a93c_838b2088",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 29,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "i think it\u0027s cleaner for this to take a base::StringPiece16 so that wcslen isn\u0027t needed.",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19d24063_ab357423",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 44,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "just \": ScopedGeneric(hstr) {}\" does not work?",
      "range": {
        "startLine": 44,
        "startChar": 59,
        "endLine": 44,
        "endChar": 66
      },
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7315a729_715f4ac6",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 44,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "Could you have a DCHECK to ensure that Preload... was called beforehand?\nI\u0027m afraid that calling unresolved delayed load dll methods would crash?",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a338b523_9ccbda0a",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 49,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "?ResolveCoreWinRTStringDelayload?",
      "range": {
        "startLine": 49,
        "startChar": 20,
        "endLine": 49,
        "endChar": 44
      },
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ca203bf_c6fddf5a",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 68,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "implement this in terms of GetString16() to avoid duplicating code?",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9518620f_3d788e69",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 70,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "return std::string() here and below",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "637b3b05_7da3db79",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 72,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "I guess we want to ignore this error in most cases rather than assuming it as empty string.\nThis fails on invalid unicode characters, but conversion itself finishes with padding 0xFFFD for such invalid code places.\n\nHow about just ignoring the error, or taking an argument \"bool allow_invalid_unicode \u003d true\" so that callers can skip this error by default?",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ceb585b_528952d9",
        "filename": "base/win/scoped_hstring.cc",
        "patchSetId": 13
      },
      "lineNbr": 78,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "grab the length here and use it to construct the StringPiece16 to avoid another strlen",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d20af55d_a9d1f93c",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 22,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "nix BASE_EXPORT on the methods",
      "range": {
        "startLine": 22,
        "startChar": 2,
        "endLine": 22,
        "endChar": 13
      },
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5fb58e6_2904682c",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "Probably, you need explanations and some code examples here.\nUsers may not notice that this class requires PreloadrequiredFunctions() before using.",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50a8d65b_baee24f4",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 29,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-13T12:39:27Z",
      "side": 1,
      "message": "I may miss other reviewers\u0027 comments on this, but do you have any reason to have static factory methods rather than to expose constructors?",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a3725e0_286fe6ac",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 29,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-09-13T14:11:58Z",
      "side": 1,
      "message": "Robert made the argument that the API can fail and handling that in the constructor isn\u0027t ideal. Better to do so in a static Create method.",
      "parentUuid": "50a8d65b_baee24f4",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "970dd977_6df5c3ef",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 29,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "Hum... current code just initializes ScopedHString with a nullptr for error cases. It does not do something special for errors. So, my personal opinion is this does not meat the bar to use another method for initialization. In both designs, what callers need is to call is_valid() after the instantiation. Also, when we avoid such errors in constructors, initialization method would return error information that constructors can not.\n\nBut using Create to return a smart pointer is a pattern I often see. So, I\u0027m neutral on this. So feel free to skip this comment.",
      "parentUuid": "1a3725e0_286fe6ac",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb295026_31b33b2d",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 30,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "Another choice is to use Create for char16* and constructor for HSTRING. But it\u0027s up to you.",
      "range": {
        "startLine": 30,
        "startChar": 35,
        "endLine": 30,
        "endChar": 41
      },
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c15f663a_990535de",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 36,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "since the native format of an HString is a wide string, i think the API looks nice with:\n  const base::StringPiece16 Get() const;\n  std::string GetAsUTF8() const;",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1cd3d1a2_8c2d4563",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 36,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "c15f663a_990535de",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "938e9af2_aa38a423",
        "filename": "base/win/scoped_hstring.h",
        "patchSetId": 13
      },
      "lineNbr": 41,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2017-09-13T14:25:05Z",
      "side": 1,
      "message": "DISALLOW_COPY_AND_ASSIGN?",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fafce94e_8b8d446b",
        "filename": "base/win/scoped_hstring_unittest.cc",
        "patchSetId": 13
      },
      "lineNbr": 48,
      "author": {
        "id": 1002172
      },
      "writtenOn": "2017-09-14T06:45:27Z",
      "side": 1,
      "message": "may want to add a case to take invalid unicode string.",
      "revId": "a73f26f06af4fbaabb26f8610a16ac0c0dafb7ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}