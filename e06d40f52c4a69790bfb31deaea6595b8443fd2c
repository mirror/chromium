{
  "comments": [
    {
      "key": {
        "uuid": "717b821b_9d2ac7fc",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 16
      },
      "lineNbr": 69,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-17T17:28:05Z",
      "side": 0,
      "message": "Why do you need to change this code? Can\u0027t you continue to use accelerators, and just make sure the ActivationEventHandler routes KeyEvents correctly? Basically what I\u0027m saying is the pre target EventHandler installed by TrayBubbleView should route KeyEvents to the widget so that accelerators just work without changing these signatures.",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 38
      },
      "revId": "e06d40f52c4a69790bfb31deaea6595b8443fd2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "064c45b2_8e011114",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 16
      },
      "lineNbr": 69,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-18T00:46:00Z",
      "side": 0,
      "message": "Correct me if I\u0027m misunderstanding your comment.\n\nDo you mean that ActivationEventHandler routes key event to the widget of tray bubble view, and accelerator manager of it will handle it?\n\nThat\u0027s different from what we were doing with those methods.\n\nThose RegisterAccelerators and UnregisterAccelerators are methods of TrayBubbleView::Delegate. Those are used by tray bubble view to register accelerators at AcceleratorController which is at ash::Shell.",
      "parentUuid": "717b821b_9d2ac7fc",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 38
      },
      "revId": "e06d40f52c4a69790bfb31deaea6595b8443fd2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e84f8d84_4b1051f1",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 16
      },
      "lineNbr": 69,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-18T03:27:24Z",
      "side": 0,
      "message": "Yes, this is what I\u0027m suggesting. Further I\u0027m suggesting you route to ash\u0027s AcceleratorController too. Basically you should process the KeyEvent as if the tray was the focused widget.",
      "parentUuid": "064c45b2_8e011114",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 38
      },
      "revId": "e06d40f52c4a69790bfb31deaea6595b8443fd2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2896010e_ba54c658",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 16
      },
      "lineNbr": 69,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-18T03:42:06Z",
      "side": 0,
      "message": "The point would be to remove TrayBubbleView specific logic from ActivationEventHandler as it will be replaced with something used for menus. I agree with it. I\u0027ll change ActivateEventHandler to route events to AcceleratorController of widget of TrayBubbleView.\n\nBut I don\u0027t get the later part \"... you route to ash\u0027s AcceleratorController too.\". Does it mean \"route to ash\u0027s one by ActivationEventHandler\"? Ash\u0027s one is the global one. Other widgets also register their accelerators. It seems that global AcceleratorController behaves differently depending on the tray bubble view is open or not. I don\u0027t think other widgets expect it.",
      "parentUuid": "e84f8d84_4b1051f1",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 38
      },
      "revId": "e06d40f52c4a69790bfb31deaea6595b8443fd2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9112614_bf252706",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 16
      },
      "lineNbr": 69,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-18T06:35:04Z",
      "side": 0,
      "message": "Or how about to simply route events to FocusManager of widget of TrayBubbleView while ActivationEventHandler (different name might be better) is active. We can know when TrayBubbleView is activated by FocusManager with OnWidgetActivationChanged. We can remove the ActivationEventHandler when the view is activated.\n\nWDYT?",
      "parentUuid": "2896010e_ba54c658",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 38
      },
      "revId": "e06d40f52c4a69790bfb31deaea6595b8443fd2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "564276bd_71d39181",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 16
      },
      "lineNbr": 69,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-18T20:43:50Z",
      "side": 0,
      "message": "\u003e But I don\u0027t get the later part \"... you route to ash\u0027s AcceleratorController too.\". Does it mean \"route to ash\u0027s one by ActivationEventHandler\"? Ash\u0027s one is the global one. Other widgets also register their accelerators. It seems that global AcceleratorController behaves differently depending on the tray bubble view is open or not. I don\u0027t think other widgets expect it.\n\nYour EventHandler will be installed before ActivationEventHandler, right? By that I mean you\u0027re going to call PrependPreTargetHandler(), right? Assuming you do, and further if you stop the event from propagating the ash\u0027s ActivationEventHandler won\u0027t get a chance at the event. I think you want ash\u0027s ActivationEventHandler to see the event, right?\n\n\u003e Or how about to simply route events to FocusManager of widget of TrayBubbleView while ActivationEventHandler (different name might be better) is active. We can know when TrayBubbleView is activated by FocusManager with OnWidgetActivationChanged. We can remove the ActivationEventHandler when the view is activated.\n\u003e \n\u003e WDYT?\n\nI agree that you want to route it to the FocusManager too. Seems like you you want simulate the flow we have now:\n. Send to ActivationEventHandler first.\n. If not handled, then send to tray\u0027s focusmanager.\n. Mark handled/stop propagation.",
      "parentUuid": "f9112614_bf252706",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 38
      },
      "revId": "e06d40f52c4a69790bfb31deaea6595b8443fd2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}