{
  "comments": [
    {
      "key": {
        "uuid": "8abacfed_916db606",
        "filename": "chrome/browser/DEPS",
        "patchSetId": 6
      },
      "lineNbr": 86,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "It worries me that a testing-only change is adding Chrome browser-level dependencies: why do we need this line?",
      "range": {
        "startLine": 86,
        "startChar": 63,
        "endLine": 86,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4a8c1d0_5e998a01",
        "filename": "chrome/browser/DEPS",
        "patchSetId": 6
      },
      "lineNbr": 86,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "we need to import translate_bubble_view to get the translate_model, validate translate bubble pop up, etc.",
      "parentUuid": "8abacfed_916db606",
      "range": {
        "startLine": 86,
        "startChar": 63,
        "endLine": 86,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "99ec5136_1ce3a121",
        "filename": "chrome/browser/language/chrome_language_detection_client.h",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "Do you need a getter here, given you can just pull out the instance variable (because you\u0027re a friend)? If you do want it, consider just language_histogram() (since it is just an accessor).",
      "range": {
        "startLine": 47,
        "startChar": 61,
        "endLine": 47,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ffd97ef_6d7a5208",
        "filename": "chrome/browser/language/chrome_language_detection_client.h",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "99ec5136_1ce3a121",
      "range": {
        "startLine": 47,
        "startChar": 61,
        "endLine": 47,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8c2fa3c_81fc7595",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 8,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "Do you need all these headers? Some (e.g. translate_script.h) seem unnecessary.",
      "range": {
        "startLine": 8,
        "startChar": 30,
        "endLine": 8,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37cf0aff_569f8c53",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 8,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "Done. try my best to remove the uncessary",
      "parentUuid": "a8c2fa3c_81fc7595",
      "range": {
        "startLine": 8,
        "startChar": 30,
        "endLine": 8,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "07daf716_ecba3e96",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 49,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "Do you need two test classes here? It looks like you could combine them into one.",
      "range": {
        "startLine": 49,
        "startChar": 70,
        "endLine": 49,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3357f5c_e90e47c4",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 49,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "I copied this pattern from the translate_browser, but I agree with you, there\u0027s no need to have two test classes.",
      "parentUuid": "07daf716_ecba3e96",
      "range": {
        "startLine": 49,
        "startChar": 70,
        "endLine": 49,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a5bdc6a3_1c351284",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 78,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "A general comment:\n\nI find the logic in this class a bit too \"stateful\" to follow easily. I would suggest making this function accept a Browser* arg (which will either be browser() or CreateIncognitoBrowser(), depending on the individual test), and return a TranslateBubbleModel* (which will be checked for nullness or non-nullness depending on the individual test).\n\nThat way, we don\u0027t have to try and track what functions might have been called in the past etc. when reading the methods.\n\nAs an added benefit, this will let you move more EXPECTs/ASSERTs into actual tests, which improves error reporting (you\u0027ll get to see the exact line that failed, if it\u0027s like Google\u0027s internal setup).",
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94416f60_69cb3439",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 78,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "since GetUrlLanguageHistogram also needs a browser object, so it\u0027s easier we just store it in the test class, also browser_ is just a pointer since it\u0027s singleton, it\u0027s not create a browser object in the for loop, so even we pass in the browser  in browser(), it\u0027s still \"stateful\".",
      "parentUuid": "a5bdc6a3_1c351284",
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22212c87_f2ee0f82",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 78,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-28T04:57:48Z",
      "side": 1,
      "message": "Right, you could pass in the same browser object to GetUrlLanguageHistogram too.\n\nI was thinking it wouldn\u0027t be stateful because everything (except GetCurrentBubble) in this method applies to browser_, which could just be an argument.\n\nSpeaking of GetCurrentBubble: how does it work when you spawn an incognito window? Does it refer to the bubble on the incognito session or the original session?",
      "parentUuid": "94416f60_69cb3439",
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3693b71_8eb9a0d7",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 82,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "Could you please try to const as much of this stuff as possible?\n\nSame comment for GetUrlLanguageHistogram.",
      "range": {
        "startLine": 82,
        "startChar": 48,
        "endLine": 82,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10229641_d98f499b",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 82,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b3693b71_8eb9a0d7",
      "range": {
        "startLine": 82,
        "startChar": 48,
        "endLine": 82,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28cd6459_89758925",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "I think you should pull the language histogram out of the current browser context (i.e. call UrlLanguageHistogramFactory::GetInstance()-\u003eGetForBrowserContext(...)) instead. Here are some benefits:\n  - You don\u0027t have to add any code to ChromeLanguageDetectionClient just for testing\n  - You don\u0027t have to bother with the scoped feature stuff here\n  - The test becomes more general: it will keep working if we e.g. roll back the decoupling experiment, or if the language detection client stops holding a histogram pointer",
      "range": {
        "startLine": 110,
        "startChar": 50,
        "endLine": 110,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0cba587_4772b5cc",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "I think we might lose a little bit \"integration\" in this case. For example, if ChromeLanguageDetectionClient did not have urllanguagehistrogram at all will cause the test to pass but it will not work in real life (because in ChromeLanguageDetctionClient register page it will call language histogram register page).",
      "parentUuid": "28cd6459_89758925",
      "range": {
        "startLine": 110,
        "startChar": 50,
        "endLine": 110,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "060ad490_150cf951",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 113,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "For this method and the one below: you currently check they don\u0027t cause a crash (which is good), but is there anything we could use to check if they succeed? e.g. translate_manager.GetLanguageState().current_language() and ...HasLanguageChanged()",
      "range": {
        "startLine": 113,
        "startChar": 20,
        "endLine": 113,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2d9171d_e6799fc2",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 113,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "that\u0027s a very good suggestion, can you point me to where to get the translate_manager in this case?",
      "parentUuid": "060ad490_150cf951",
      "range": {
        "startLine": 113,
        "startChar": 20,
        "endLine": 113,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4bb37c1_d22caecd",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 113,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-28T04:57:48Z",
      "side": 1,
      "message": "You could use\nChromeTranslateClient::FromWebContents(web_contents())-\u003eGetLanguageState()\nand check e.g.\ncurrent_language()\ntranslation_error()\nIsPageTranslated()\n\nYou might have to define another observer (for the actual translation to complete), though.",
      "parentUuid": "a2d9171d_e6799fc2",
      "range": {
        "startLine": 113,
        "startChar": 20,
        "endLine": 113,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcbd1da7_b315432d",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 137,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "consts",
      "range": {
        "startLine": 137,
        "startChar": 73,
        "endLine": 137,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e974f768_f28c7475",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 137,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fcbd1da7_b315432d",
      "range": {
        "startLine": 137,
        "startChar": 73,
        "endLine": 137,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10b2034a_7f2012db",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 143,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "Do we have an expected value for \"en\" too?",
      "range": {
        "startLine": 143,
        "startChar": 51,
        "endLine": 143,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83996435_e1da818a",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 143,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "good point!",
      "parentUuid": "10b2034a_7f2012db",
      "range": {
        "startLine": 143,
        "startChar": 51,
        "endLine": 143,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d0e0f28_6609fa17",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 159,
      "author": {
        "id": 1215199
      },
      "writtenOn": "2017-08-25T03:03:24Z",
      "side": 1,
      "message": "consts",
      "range": {
        "startLine": 159,
        "startChar": 73,
        "endLine": 159,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4cf43a6_a81d9181",
        "filename": "chrome/browser/translate/translate_language_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 159,
      "author": {
        "id": 1176036
      },
      "writtenOn": "2017-08-25T04:07:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2d0e0f28_6609fa17",
      "range": {
        "startLine": 159,
        "startChar": 73,
        "endLine": 159,
        "endChar": 0
      },
      "revId": "24cc92647ef547173b20d1c4e9160699e6832ec8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}