{
  "comments": [
    {
      "key": {
        "uuid": "eff51a1c_51648de0",
        "filename": "chrome/browser/search_provider_logos/logo_service_factory.cc",
        "patchSetId": 12
      },
      "lineNbr": 30,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "\"bool UseGrayLogo\"? I find the current name quite unclear.",
      "range": {
        "startLine": 30,
        "startChar": 5,
        "endLine": 30,
        "endChar": 28
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a213a05a_180d6a5b",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 62,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "I don\u0027t think this should DCHECK. What if the query is just \"3\", which is perfectly legal?",
      "range": {
        "startLine": 62,
        "startChar": 4,
        "endLine": 62,
        "endChar": 13
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6879b61a_1cbb47cc",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 69,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "I think this is not quite correct: If the query is \"notasync\u003dfoo\", it\u0027d also match.\n\nOne step back: All this query parsing is necessary only because of the split of constant vs. non-constant params. Is there any particular reason for that split? Seems like things would be much easier otherwise.",
      "range": {
        "startLine": 69,
        "startChar": 45,
        "endLine": 69,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e0f7a3e_9ffabead",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 69,
      "author": {
        "id": 1123275
      },
      "writtenOn": "2017-11-02T10:22:51Z",
      "side": 1,
      "message": "The graybg:1 flag can change and when it does we should be able to make new requests, clear the cache, etc. The code currently relies on only checking logo_url_ and does not change it if only the param changes. So to fix that I decided to add graybg:1 and other things that don\u0027t change as often as the fingerprint in the logo_url_\n\nBetter solutions would be most welcome, as I don\u0027t have the big picture of the component.",
      "parentUuid": "6879b61a_1cbb47cc",
      "range": {
        "startLine": 69,
        "startChar": 45,
        "endLine": 69,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b27af618_df62a864",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 69,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T10:50:13Z",
      "side": 1,
      "message": "Aah, so baking \"graybg:\" into the intermediate URL causes the cache to be flushed, I totally missed that. That\u0027s kinda neat, but also quite subtle...\nMaybe we should just make LogoTracker aware of the graybg flag (again)? I.e. pass it as an extra param to SetServerAPI. Then LogoTracker can detect the change and clear the cache, but it\u0027ll be more explicit, and also the messy query parsing won\u0027t be required anymore. WDYT?",
      "parentUuid": "4e0f7a3e_9ffabead",
      "range": {
        "startLine": 69,
        "startChar": 45,
        "endLine": 69,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3e7c08d_3175e456",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 69,
      "author": {
        "id": 1123275
      },
      "writtenOn": "2017-11-07T11:12:39Z",
      "side": 1,
      "message": "Sorry missed your reply.\n\nThe issue would be about clearing the cache. It currently works by comparing the current url with the one saved in the logo metadata, and that happens on a file thread and would delete the file on disk. \nSo to make that work we would have to add whether it\u0027s a graybg logo in its metadata too. Would that be ok?",
      "parentUuid": "b27af618_df62a864",
      "range": {
        "startLine": 69,
        "startChar": 45,
        "endLine": 69,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ef3c753_281b7e8c",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 69,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-07T12:30:43Z",
      "side": 1,
      "message": "Ah, right :-/\nArguably it\u0027s still cleaner to have the flag explicitly in the metadata, rather than implicitly baked into the URL, but this does make the case less clear. I\u0027ll leave it to you, both options are okay with me.\nIf you stay with the current solution, I\u0027d suggest looking at the implementation of net::AppendOrReplaceQueryParameter. Essentially we need that minus the escaping.",
      "parentUuid": "e3e7c08d_3175e456",
      "range": {
        "startLine": 69,
        "startChar": 45,
        "endLine": 69,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b39b2bfe_c0befbc8",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 69,
      "author": {
        "id": 1123275
      },
      "writtenOn": "2017-11-07T15:02:11Z",
      "side": 1,
      "message": "Thanks! will have a look. I\u0027ll go with leaving it in the URL because I\u0027m not familiar with side effects of where this valued might end up being compared.",
      "parentUuid": "6ef3c753_281b7e8c",
      "range": {
        "startLine": 69,
        "startChar": 45,
        "endLine": 69,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16119479_af5cd6fe",
        "filename": "components/search_provider_logos/google_logo_api.cc",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "nit: braces",
      "range": {
        "startLine": 87,
        "startChar": 61,
        "endLine": 87,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ade82956_cbbf4d1c",
        "filename": "components/search_provider_logos/google_logo_api.h",
        "patchSetId": 12
      },
      "lineNbr": 22,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "Hrm, I should probably have landed crrev.com/c/716257 before this, would\u0027ve made things easier for everyone. Or maybe not, because then it\u0027d be hard to merge...",
      "range": {
        "startLine": 22,
        "startChar": 76,
        "endLine": 22,
        "endChar": 0
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "16bec630_1ad048bf",
        "filename": "components/search_provider_logos/google_logo_api.h",
        "patchSetId": 12
      },
      "lineNbr": 38,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "Why \"persistent\"? This is the one that\u0027s supposed to be re-built each time, no?",
      "range": {
        "startLine": 38,
        "startChar": 14,
        "endLine": 38,
        "endChar": 24
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ccb84974_b655ee6b",
        "filename": "components/search_provider_logos/logo_service_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 249,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "What happens to the cache if the value of |use_gray_background| changes? I think currently it\u0027d remain valid, which means the user will see the wrong Doodle once (or even more often if they\u0027re offline).",
      "range": {
        "startLine": 249,
        "startChar": 7,
        "endLine": 249,
        "endChar": 26
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ad00ae6_c508aa8b",
        "filename": "components/search_provider_logos/logo_service_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 42,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-11-02T09:24:30Z",
      "side": 1,
      "message": "want_gray_logo_getter? The current name doesn\u0027t say much. (It\u0027d be okay if it returned an enum rather than just a bool, but I\u0027m not sure that\u0027s worth it.)",
      "range": {
        "startLine": 42,
        "startChar": 38,
        "endLine": 42,
        "endChar": 64
      },
      "revId": "cbbe3a6adc09b55b641b000837618e1b157c8d87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}