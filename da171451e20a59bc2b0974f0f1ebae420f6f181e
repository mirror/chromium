{
  "comments": [
    {
      "key": {
        "uuid": "3c233b76_cd013033",
        "filename": "components/cronet/ios/test/cronet_http_test.mm",
        "patchSetId": 10
      },
      "lineNbr": 556,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Instead of using DISPATCH_TIME_FOREVER, please wait for some period of time and assert that the return value of dispatch_semaphore_wait() is equal to 0. Something like 10 seconds should be enough for the test to finish.\n\nHowever, if you are going to replace [NSRunLoop run] with a condition as recommended in the NSRunLoop docs (see the comment above), you could add a method \"streamClosed\" to StreamBodyRequestDelegate that returns \u0027true\u0027 when the output stream is closed. Instead of waiting for the semaphore you can simply assert that [StreamBodyRequestDelegate streamClosed] is equal to \"true\".",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e85a3f4f_51732d9b",
        "filename": "components/cronet/ios/test/cronet_http_test.mm",
        "patchSetId": 10
      },
      "lineNbr": 556,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "This semaphore is not only used for to make sure the run loop exits, but also guarantees the stream is not destroyed when the run loop is still running. If the request meets some error so as to close the input stream before all data is written, this function cannot return until the run loop handles error event. Therefore, I preserve the semaphore and add a assert.",
      "parentUuid": "3c233b76_cd013033",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab1db566_be21cdd0",
        "filename": "ios/net/chunked_data_stream_uploader.cc",
        "patchSetId": 10
      },
      "lineNbr": 38,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Could you please add a DCHECK that |pending_read_buffer_| is equal to nullptr?",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f19271d_0bd25231",
        "filename": "ios/net/chunked_data_stream_uploader.cc",
        "patchSetId": 10
      },
      "lineNbr": 38,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab1db566_be21cdd0",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8eb7e9b_f7f9e0b1",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 29,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Could you add CHECK that |buffer_length| \u003e\u003d |data_length_|?",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b58d8084_c252ba51",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 29,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e8eb7e9b_f7f9e0b1",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82989eb9_e4ad2dfc",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 37,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Could you CHECK that the data fits into |data_|?",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "913c2a22_9cc31d6a",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 37,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "82989eb9_e4ad2dfc",
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78bdf639_cd1a9043",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 43,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Why don\u0027t use \"char data_[kDefaultIOBufferSize]\" instead? I would actually changed the file extension to \".mm\" and used NSData instead but that is up to you.",
      "range": {
        "startLine": 43,
        "startChar": 2,
        "endLine": 43,
        "endChar": 47
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1990cf40_36631dd1",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 43,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "I am not familiar with Obj-C, so maybe I can use the traditional C style for it.",
      "parentUuid": "78bdf639_cd1a9043",
      "range": {
        "startLine": 43,
        "startChar": 2,
        "endLine": 43,
        "endChar": 47
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "57c0fa26_c904edf2",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 84,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "kTestData \u003d\u003e \"\"",
      "range": {
        "startLine": 84,
        "startChar": 25,
        "endLine": 84,
        "endChar": 34
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcb79f98_4a27f0fc",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 84,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "57c0fa26_c904edf2",
      "range": {
        "startLine": 84,
        "startChar": 25,
        "endLine": 84,
        "endChar": 34
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2023bddf_e1d12e92",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 131,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "if",
      "range": {
        "startLine": 131,
        "startChar": 45,
        "endLine": 131,
        "endChar": 47
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9dcd7b3_da52f210",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 131,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2023bddf_e1d12e92",
      "range": {
        "startLine": 131,
        "startChar": 45,
        "endLine": 131,
        "endChar": 47
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "990002ae_7642255d",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 132,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Remove \"case\"?",
      "range": {
        "startLine": 132,
        "startChar": 2,
        "endLine": 132,
        "endChar": 7
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9977a7b_16a44946",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 132,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "990002ae_7642255d",
      "range": {
        "startLine": 132,
        "startChar": 2,
        "endLine": 132,
        "endChar": 7
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24ec6d5d_82ab532c",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 135,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Same. Use \"\".",
      "range": {
        "startLine": 134,
        "startChar": 0,
        "endLine": 135,
        "endChar": 39
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8fbcac98_46a7d8da",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 135,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "24ec6d5d_82ab532c",
      "range": {
        "startLine": 134,
        "startChar": 0,
        "endLine": 135,
        "endChar": 39
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b3ee6f61_50a4fe44",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 161,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "If you like, you can also add some code here to check that the callback was called. That will prove that UploadDataStream::OnReadCompleted() was indeed called by the ChunkedDataStreamUploader.",
      "range": {
        "startLine": 161,
        "startChar": 56,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "424f6648_441412ac",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 161,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b3ee6f61_50a4fe44",
      "range": {
        "startLine": 161,
        "startChar": 56,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "09a037af_3443a1cb",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 164,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Don\u0027t need it here.",
      "range": {
        "startLine": 164,
        "startChar": 43,
        "endLine": 164,
        "endChar": 49
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "186bb355_46fac280",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 164,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "09a037af_3443a1cb",
      "range": {
        "startLine": 164,
        "startChar": 43,
        "endLine": 164,
        "endChar": 49
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ba1554e_f0f8c863",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 172,
      "author": {
        "id": 1143554
      },
      "writtenOn": "2018-02-05T20:59:18Z",
      "side": 1,
      "message": "Why don\u0027t use\n  EXPECT_FALSE(memcmp(test_data_long, buffer-\u003edata(), sizeof(test_data_long)));\nas in previous tests?",
      "range": {
        "startLine": 170,
        "startChar": 0,
        "endLine": 172,
        "endChar": 3
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d407c8f8_8b65857d",
        "filename": "ios/net/chunked_data_stream_uploader_unittest.cc",
        "patchSetId": 10
      },
      "lineNbr": 172,
      "author": {
        "id": 1255203
      },
      "writtenOn": "2018-02-06T08:45:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ba1554e_f0f8c863",
      "range": {
        "startLine": 170,
        "startChar": 0,
        "endLine": 172,
        "endChar": 3
      },
      "revId": "da171451e20a59bc2b0974f0f1ebae420f6f181e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}