{
  "comments": [
    {
      "key": {
        "uuid": "1aef67c2_fe09e005",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 45,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-21T21:52:05Z",
      "side": 1,
      "message": "made public so it can be used in downstream tests.",
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4aa36c91_efdec3a6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 130,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-21T22:16:15Z",
      "side": 1,
      "message": "Should there be a return after this line?",
      "range": {
        "startLine": 130,
        "startChar": 12,
        "endLine": 130,
        "endChar": 85
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ef6d49d_8788d38c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 156,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-21T22:16:15Z",
      "side": 1,
      "message": "The logic for when to show a survey has gotten kind of confusing. I think it\u0027d be helpful to list out the use-cases that we\u0027re trying to support and the ones we\u0027re explicitly not supporting.\n\nIn onSurveyAvailable, if the tab is valid and interactable and the web contents are done loading, we show the infobar. If the webcontents aren\u0027t done loading we add a tab observer. Here, after the tab model changed event, we just add an observer (without doing the checks for webcontents being loaded). Is there a reason these two paths are different?\n\nMaybe we can condense the logic? e.g. onSurveyAvailable() and this onChange() could both call a helper method\n\nattemptToShowOnCurrentTab() {\n // show if all conditions are met, otherwise add tab observer\n}",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 156,
        "endChar": 61
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aeb736b2_9c6f788c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 156,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-27T17:50:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3ef6d49d_8788d38c",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 156,
        "endChar": 61
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a98f13a5_ff2c819e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 156,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-27T21:00:20Z",
      "side": 1,
      "message": "I still think it\u0027d be helpful to list out the use cases that this CL is trying to support and the ones it\u0027s explicitly not supporting. Particularly, it would be good to capture what\u0027s expected to happen when the tab is loading, not interactable, interactability changes, tab changes, etc. The crbug would be a good place to capture this (at least for now).",
      "parentUuid": "aeb736b2_9c6f788c",
      "range": {
        "startLine": 155,
        "startChar": 16,
        "endLine": 156,
        "endChar": 61
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46fba957_7732db13",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 169,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-21T22:16:15Z",
      "side": 1,
      "message": "nit: I would just say something like \"Don\u0027t show the survey infobar until the tab is interactable\"",
      "range": {
        "startLine": 168,
        "startChar": 16,
        "endLine": 169,
        "endChar": 48
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "caf9d8ad_517d6bab",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 169,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-27T17:50:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "46fba957_7732db13",
      "range": {
        "startLine": 168,
        "startChar": 16,
        "endLine": 169,
        "endChar": 48
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9da5baa_7a102668",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 172,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-21T22:16:15Z",
      "side": 1,
      "message": "style nit: put this on one line and add a blank line after",
      "range": {
        "startLine": 170,
        "startChar": 16,
        "endLine": 172,
        "endChar": 17
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be9f42d8_ff67341a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 172,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-27T17:50:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9da5baa_7a102668",
      "range": {
        "startLine": 170,
        "startChar": 16,
        "endLine": 172,
        "endChar": 17
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4cd3d8bd_fdc17dd4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 176,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-21T22:16:15Z",
      "side": 1,
      "message": "Should this be done in showSurveyInfoBar() if mTabModelSelector !\u003d null?",
      "range": {
        "startLine": 176,
        "startChar": 20,
        "endLine": 176,
        "endChar": 72
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca89bdb9_634dac08",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 19
      },
      "lineNbr": 176,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-27T17:50:20Z",
      "side": 1,
      "message": "Done.\n\nI added a check to see if mTabModelSelector \u003d\u003d null before starting the survey process.",
      "parentUuid": "4cd3d8bd_fdc17dd4",
      "range": {
        "startLine": 176,
        "startChar": 20,
        "endLine": 176,
        "endChar": 72
      },
      "revId": "449637b8995bf7615a52207197cd11e6554125bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}