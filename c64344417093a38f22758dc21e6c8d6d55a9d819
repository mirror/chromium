{
  "comments": [
    {
      "key": {
        "uuid": "71318ad9_480f866d",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletGlobalScope.cpp",
        "patchSetId": 6
      },
      "lineNbr": 219,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-08-28T13:56:21Z",
      "side": 1,
      "message": "This needs to be initialized:\n\n  auto processor_info_list \u003d\n      WTF::MakeUnique\u003cVector\u003cCrossThreadAudioWorkletProcessorInfo\u003e\u003e()?\n\nIs it possible to add tests that cover code newly added by this CL?",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64aa2f68_0cc81534",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletGlobalScope.cpp",
        "patchSetId": 6
      },
      "lineNbr": 219,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-08-28T18:59:59Z",
      "side": 1,
      "message": "Done.\n\nI was planning to add a layout test once AudioWorkletNode, AudioNodeProcessor interface is completed. I looked up how to instantiate all infra (e.g. AudioWorkletMessagingProxy, AudioWorkletObjectProxy and AudioWorkletGlobalScope with multiple threads) within the unit test, and it wasn\u0027t really trivial. Instead, I would like to spend more time in writing layout test later.",
      "parentUuid": "71318ad9_480f866d",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "391376e5_1f85fe42",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletGlobalScope.cpp",
        "patchSetId": 6
      },
      "lineNbr": 219,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-08-29T00:16:28Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "64aa2f68_0cc81534",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "51c5327e_8846d082",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletObjectProxy.cpp",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-08-28T13:56:21Z",
      "side": 1,
      "message": "JFYI: I\u0027ll remove this function in favor of module loading and introduce WorkerReportingProxy::DidEvaluateModuleScript() to do something after module script evaluation. I\u0027ll move line 33-48 to the function later.",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "689e61c5_b61da6a0",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorkletObjectProxy.cpp",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-08-28T18:59:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "51c5327e_8846d082",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d131f759_ba8f3d5e",
        "filename": "third_party/WebKit/Source/modules/webaudio/CrossThreadAudioWorkletProcessorInfo.h",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-08-28T13:56:21Z",
      "side": 1,
      "message": "Can you call |param_info_list_.ReserveInitialCapacity(definition.GetAudioParamDescriptorNames().size())| here to avoid unnecessary reallocations of the vector?",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "110cb40a_42791f16",
        "filename": "third_party/WebKit/Source/modules/webaudio/CrossThreadAudioWorkletProcessorInfo.h",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-08-28T18:59:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d131f759_ba8f3d5e",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3ca9936_e43316d6",
        "filename": "third_party/WebKit/Source/modules/webaudio/CrossThreadAudioWorkletProcessorInfo.h",
        "patchSetId": 6
      },
      "lineNbr": 55,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-08-28T13:56:21Z",
      "side": 1,
      "message": "const Vector\u003cCrossThreadAudioParamInfo\u003e\u0026 ?",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "86d90268_a68b6007",
        "filename": "third_party/WebKit/Source/modules/webaudio/CrossThreadAudioWorkletProcessorInfo.h",
        "patchSetId": 6
      },
      "lineNbr": 55,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-08-28T18:59:59Z",
      "side": 1,
      "message": "This is difficult because of the copy assignment in AudioWorkletMessagingProxy::SynchronizeWorkletProcessorInfoList(). If this is a must, I\u0027ll handle it in a different CL.",
      "parentUuid": "d3ca9936_e43316d6",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c19ffb05_b2e8b9ef",
        "filename": "third_party/WebKit/Source/modules/webaudio/CrossThreadAudioWorkletProcessorInfo.h",
        "patchSetId": 6
      },
      "lineNbr": 55,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-08-29T00:16:28Z",
      "side": 1,
      "message": "This is not a must, but I\u0027m not sure why the copy assignment makes this difficult. Regardless of the returned value type of ParamInfoList(), it causes the copy (am I missing something?)\n\nIIUC, if ParamInfoList() returns Vector\u003cCTAP\u003e, it results in 2 copies on |ParamInfoList()| and |processor_info_map_.insert()|. If ParamInfoList() returns const Vector\u003cCTAP\u003e\u0026, it results in only 1 copy on |processor_info_map_.insert()|.",
      "parentUuid": "86d90268_a68b6007",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "265bd4ef_747fb9de",
        "filename": "third_party/WebKit/Source/modules/webaudio/CrossThreadAudioWorkletProcessorInfo.h",
        "patchSetId": 6
      },
      "lineNbr": 55,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-08-29T15:44:01Z",
      "side": 1,
      "message": "Yes, that was my guess, but I get a bunch of compile errors from CrossThreadAudioWorkletProcessorInfo class when I tried it.\n\n---\nconst Vector\u003cCrossThreadAudioParamInfo\u003e\u0026 ParamInfoList() const { \n      return param_info_list_; }\n---\n\n--- compile time error messages:\ncopy assignment operator of \u0027CrossThreadAudioParamInfo\u0027 is implicitly deleted because field \u0027name_\u0027 has no copy assignment operator\n---",
      "parentUuid": "c19ffb05_b2e8b9ef",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0d0dd5d_8fe9d2ee",
        "filename": "third_party/WebKit/Source/modules/webaudio/CrossThreadAudioWorkletProcessorInfo.h",
        "patchSetId": 6
      },
      "lineNbr": 55,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-08-29T16:35:51Z",
      "side": 1,
      "message": "I see... Thank you for sharing the log :)",
      "parentUuid": "265bd4ef_747fb9de",
      "revId": "c64344417093a38f22758dc21e6c8d6d55a9d819",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}