{
  "comments": [
    {
      "key": {
        "uuid": "de424ba2_d9114c90",
        "filename": "chrome/browser/ui/views/frame/browser_non_client_frame_view_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1001380
      },
      "writtenOn": "2017-11-02T17:09:15Z",
      "side": 1,
      "message": "shouldn\u0027t this be handled in GetTopInset ?",
      "revId": "b114c56408b60f14fb5c85c89bb4d926fffe26e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e146a032_05cf6d7f",
        "filename": "chrome/browser/ui/views/frame/browser_non_client_frame_view_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1228419
      },
      "writtenOn": "2017-11-07T00:03:29Z",
      "side": 1,
      "message": "I think here is a good place. Just like the special handling for browser_view()-\u003eIsTabStripVisible() below, for v1 app in overview mode, we only set the window property TopViewInset to 0. Not the GetTopInset() returned value.\n\nIf I handle in GetTopInset, set the return inset to 0, the header is not revealed because the The immversive mode controller will try to layout the header, but the GetTopInset return 0, so it will not updated. Please see the stack trace below:\n\n#1 0x5597a925c678 BrowserNonClientFrameViewAsh::GetTopInset() \u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e Cannot return 0.\n#2 0x5597a9088119 BrowserViewLayoutDelegateImpl::GetTopInsetInBrowserView()\n#3 0x5597a9088ddc BrowserViewLayout::UpdateTopContainerBounds()\n#4 0x5597a9088b71 BrowserViewLayout::Layout()\n#5 0x5597a8387f13 views::View::Layout()\n#6 0x5597a9086c6e BrowserView::Layout()\n#7 0x5597a8398baf views::NonClientView::Layout()\n#8 0x5597a8388052 views::View::Layout()\n#9 0x5597a9184537 ImmersiveModeControllerAsh::OnImmersiveRevealStarted()\n...",
      "parentUuid": "de424ba2_d9114c90",
      "revId": "b114c56408b60f14fb5c85c89bb4d926fffe26e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23e9f912_2147b704",
        "filename": "chrome/browser/ui/views/frame/browser_non_client_frame_view_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1001380
      },
      "writtenOn": "2017-11-08T01:46:06Z",
      "side": 1,
      "message": "thanks for explanation. Can you update the code like this?\n\nint inset \u003d tabstripvisible ? 0 (immersive ? : GetTopInset(false));\n\nI think kTopViewInset should be same regardless of revealed state,\nand restore should actually be false?",
      "parentUuid": "e146a032_05cf6d7f",
      "revId": "b114c56408b60f14fb5c85c89bb4d926fffe26e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0178aaac_9855be9a",
        "filename": "chrome/browser/ui/views/frame/browser_non_client_frame_view_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1228419
      },
      "writtenOn": "2017-11-08T02:07:14Z",
      "side": 1,
      "message": "What does the \"restore\" mean here? How can I test if I change restore to false?",
      "parentUuid": "23e9f912_2147b704",
      "revId": "b114c56408b60f14fb5c85c89bb4d926fffe26e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da5c4db3_1bbeb977",
        "filename": "chrome/browser/ui/views/frame/browser_non_client_frame_view_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1001380
      },
      "writtenOn": "2017-11-08T02:53:59Z",
      "side": 1,
      "message": "\u003e What does the \"restore\" mean here? How can I test if I change restore to false?\n\nyou\u0027re passing true for restore argument. What was the reason?",
      "parentUuid": "0178aaac_9855be9a",
      "revId": "b114c56408b60f14fb5c85c89bb4d926fffe26e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5974b415_e4973035",
        "filename": "chrome/browser/ui/views/frame/browser_non_client_frame_view_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1228419
      },
      "writtenOn": "2017-11-08T06:29:20Z",
      "side": 1,
      "message": "The old code passes true. Hope there is a test can explain why we need true. Or I can read more to find out how do we expect and use the window property kTopViewInset.",
      "parentUuid": "da5c4db3_1bbeb977",
      "revId": "b114c56408b60f14fb5c85c89bb4d926fffe26e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2267d622_b88c392a",
        "filename": "chrome/browser/ui/views/frame/browser_non_client_frame_view_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1001380
      },
      "writtenOn": "2017-11-08T13:42:24Z",
      "side": 1,
      "message": "restored means that it returns normal insets even if it\u0027s maximized in tabbed mode. since tab strip is always invislble for this case, you should pass false.\n\nSee also:\n\nhttps://cs.chromium.org/chromium/src/chrome/browser/ui/views/frame/browser_view_layout.cc?rcl\u003d7efabb4a472a7fdd10f7d4a3d0ec6b7915b238b5\u0026l\u003d342",
      "parentUuid": "5974b415_e4973035",
      "revId": "b114c56408b60f14fb5c85c89bb4d926fffe26e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}