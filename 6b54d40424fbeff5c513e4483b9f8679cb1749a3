{
  "comments": [
    {
      "key": {
        "uuid": "30ab7da1_be15973b",
        "filename": "device/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 127,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-04T22:53:43Z",
      "side": 1,
      "message": "These tests no longer depend on HID so they can move into the main sources list above.",
      "range": {
        "startLine": 125,
        "startChar": 0,
        "endLine": 127,
        "endChar": 33
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c1dd555_5009dd3a",
        "filename": "device/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 127,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "30ab7da1_be15973b",
      "range": {
        "startLine": 125,
        "startChar": 0,
        "endLine": 127,
        "endChar": 33
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "71395363_363ee157",
        "filename": "device/u2f/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-04T22:53:43Z",
      "side": 1,
      "message": "You should be able to move these files back up into the main sources list now.",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 48,
        "endChar": 19
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8d4e54b_b54bf97d",
        "filename": "device/u2f/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "71395363_363ee157",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 48,
        "endChar": 19
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4774d91a_8f23fcb1",
        "filename": "device/u2f/mock_u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-04T22:53:43Z",
      "side": 1,
      "message": "const DeviceStatusCallback\u0026",
      "range": {
        "startLine": 32,
        "startChar": 2,
        "endLine": 32,
        "endChar": 22
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c49353cb_be80f3b1",
        "filename": "device/u2f/mock_u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4774d91a_8f23fcb1",
      "range": {
        "startLine": 32,
        "startChar": 2,
        "endLine": 32,
        "endChar": 22
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90f49748_466a742a",
        "filename": "device/u2f/u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1175790
      },
      "writtenOn": "2017-10-06T13:13:41Z",
      "side": 1,
      "message": "Not used, please remove.",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "508ba71a_4b7ec089",
        "filename": "device/u2f/u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "90f49748_466a742a",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d62faff6_45d35a78",
        "filename": "device/u2f/u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1175790
      },
      "writtenOn": "2017-10-06T13:13:41Z",
      "side": 1,
      "message": "optional: What do you think about making this an explicit interface for more readability? Say, wrap these 3 callbacks into a U2fDiscovery[::](Client|Observer|Delegate), and derive U2fRequest from it.",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d00d2914_8e850035",
        "filename": "device/u2f/u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "I\u0027m not quite sure I follow. I could imagine the following: Implement U2fDiscovery::Observer, with the pure virtual methods OnStarted, OnStopped, OnDevice (or similar). Derive U2fRequest from this class, and introduces some kind of observer container in this class. Then, e.g. once |Start| finishes, we\u0027d iterate over all stored observers in the container and invoke |OnStart|. Is this what you had in mind?",
      "parentUuid": "d62faff6_45d35a78",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9443536_e3ef40d6",
        "filename": "device/u2f/u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1175790
      },
      "writtenOn": "2017-10-09T12:44:42Z",
      "side": 1,
      "message": "Yes, but even more simple. Instead of a container of Observers I propose to have just one Delegate (yes, with 3 methods: OnStarted, OnStopped, OnDeviceAdded; plus, we could add a method for device removal by its ID, i.e., OnDeviceRemoved(string id) ).\n\nThe problem, however, is that U2fRequest would be Delegate, and is created using a list of U2fDiscovery objects which would be created with supplied Delegate. So there would be a loop in initialization. One way to work around is to pass the Delegate to the Start method instead of ctor.",
      "parentUuid": "d00d2914_8e850035",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2494dcc_b3a573fd",
        "filename": "device/u2f/u2f_discovery.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-10T11:31:39Z",
      "side": 1,
      "message": "Done, I decided to do it in the ctor, as this is convenient for most callers. E.g., it does not require modification of U2fRequests\u0027 subclasses.",
      "parentUuid": "a9443536_e3ef40d6",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24328bf5_6fc822cb",
        "filename": "device/u2f/u2f_hid_discovery.cc",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1175790
      },
      "writtenOn": "2017-10-06T13:13:41Z",
      "side": 1,
      "message": "I\u0027d prefer some reference to where this constant comes from, or at least a named constant. Can you ask piperc@ or leave a TODO for him?",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c939b053_6d36e8f4",
        "filename": "device/u2f/u2f_hid_discovery.cc",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "24328bf5_6fc822cb",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "54f369ed_72f972e3",
        "filename": "device/u2f/u2f_hid_discovery.cc",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1175790
      },
      "writtenOn": "2017-10-06T13:13:41Z",
      "side": 1,
      "message": "nit: I am a bit concerned that we need to create a device from scratch in order to remove it. Maybe it would be better to use its ID for this purpose, but such an approach doesn\u0027t go well with the current callback API. Can you leave a TODO to think about this later?",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "964c82b3_13e1b0b8",
        "filename": "device/u2f/u2f_hid_discovery.cc",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "54f369ed_72f972e3",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d188ac7f_56bc3c86",
        "filename": "device/u2f/u2f_hid_discovery_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 51,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-04T22:53:43Z",
      "side": 1,
      "message": "{}",
      "range": {
        "startLine": 51,
        "startChar": 49,
        "endLine": 51,
        "endChar": 71
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de93ab54_d15fb172",
        "filename": "device/u2f/u2f_hid_discovery_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 51,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "This doesn\u0027t compile unfortunately. MakeRefCounted perfectly forwards its arguments, which doesn\u0027t support initializer_lists.",
      "parentUuid": "d188ac7f_56bc3c86",
      "range": {
        "startLine": 51,
        "startChar": 49,
        "endLine": 51,
        "endChar": 71
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "58d16226_533cdc3a",
        "filename": "device/u2f/u2f_hid_discovery_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-04T22:53:43Z",
      "side": 1,
      "message": "RunUntilIdle is generally discouraged. Instead create a base::RunLoop and run its QuitClosure when the expected condition (in this case OnDeviceDiscovered being called) is met.",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a869184_0cfb7d02",
        "filename": "device/u2f/u2f_hid_discovery_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "I was following the advice in base/test/scoped_task_environment.h. After consulting with a team mate of mine we told be that MessageLoop and RunLoop are effectively deprecated and shouldn\u0027t be relied upon anymore. That leaves RunUntilIdle as the only option here. Do you agree with this or do you still think I should introduce a RunLoop and QuitClosure here? I must admit I\u0027m not very familiar with these abstractions yet, so I currently don\u0027t know their best practices.",
      "parentUuid": "58d16226_533cdc3a",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac267a85_bde14315",
        "filename": "device/u2f/u2f_hid_discovery_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-06T20:18:45Z",
      "side": 1,
      "message": "RunLoop is not deprecated however RunUntilIdle is no longer considered to be a risk factor for flaky tests so it is fine to use.",
      "parentUuid": "3a869184_0cfb7d02",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3812278_f1b05ef5",
        "filename": "device/u2f/u2f_hid_discovery_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-10T11:31:39Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ac267a85_bde14315",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "296d379f_6bf81b07",
        "filename": "device/u2f/u2f_register_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-04T22:53:43Z",
      "side": 1,
      "message": "Since you are using a MockU2fDiscovery can you remove this HidService?",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 30,
        "endChar": 44
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b69f5e30_49333f4e",
        "filename": "device/u2f/u2f_register_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "296d379f_6bf81b07",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 30,
        "endChar": 44
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95500bae_c0f0af18",
        "filename": "device/u2f/u2f_request.h",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 1175790
      },
      "writtenOn": "2017-10-06T13:13:41Z",
      "side": 1,
      "message": "nit: Can you please hide as much as possible here?",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a8f5d5c_b6bcbe4b",
        "filename": "device/u2f/u2f_request.h",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "95500bae_c0f0af18",
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be3f602d_9bf89179",
        "filename": "device/u2f/u2f_request_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-10-04T22:53:43Z",
      "side": 1,
      "message": "Is there a callback that will be run when the expected condition is reached?",
      "range": {
        "startLine": 69,
        "startChar": 2,
        "endLine": 69,
        "endChar": 43
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2ab3a81_93399952",
        "filename": "device/u2f/u2f_request_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2017-10-06T15:28:22Z",
      "side": 1,
      "message": "This actually didn\u0027t do anything here, I updated the code.",
      "parentUuid": "be3f602d_9bf89179",
      "range": {
        "startLine": 69,
        "startChar": 2,
        "endLine": 69,
        "endChar": 43
      },
      "revId": "6b54d40424fbeff5c513e4483b9f8679cb1749a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}