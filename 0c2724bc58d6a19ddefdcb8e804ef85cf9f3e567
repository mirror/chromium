{
  "comments": [
    {
      "key": {
        "uuid": "d354e81b_482e426d",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-12-05T21:51:28Z",
      "side": 1,
      "message": "Suggest just making this return a std::string.  Regardless, I don\u0027t think I\u0027ve seen an array with a length as a function argument in Chrome - such lengths aren\u0027t enforced by the compiler, so seem very unsafe.",
      "range": {
        "startLine": 37,
        "startChar": 39,
        "endLine": 37,
        "endChar": 41
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "715dc41b_d32ae671",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d354e81b_482e426d",
      "range": {
        "startLine": 37,
        "startChar": 39,
        "endLine": 37,
        "endChar": 41
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc0728c5_e1bdf4b9",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-12-05T17:22:05Z",
      "side": 1,
      "message": "The param interface isn\u0027t used - I\u0027m guessing to gather feedback on the approach before going too far?",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6858e968_b3d47239",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-05T17:35:09Z",
      "side": 1,
      "message": "Oh yes, this was from a version of this code when I was toying with also testing against a QUIC server. I decided that probably wasn\u0027t necessary though. Assuming you both agree, I\u0027ll remove these remnants.",
      "parentUuid": "dc0728c5_e1bdf4b9",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b9b51b4_88e18bba",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6858e968_b3d47239",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c5addf3_1528c934",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 96,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-12-05T17:22:05Z",
      "side": 1,
      "message": "I think http://go/unit-test-practices#dos-and-donts-7 (internal only link) feels like advice against this pattern.\n\nIn particular, Line 100-107 directly influence the test results and set expectations, so it feels a bit weird to set it so far apart.",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c2c3f30_98594530",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 96,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "I had a similar thought when writing it, but this seemed more readable and the assertion is just to check that this code succeeds (not the code under test). However, it does hide the details of what\u0027s going on when looking at the test, so I\u0027ve inlined it.",
      "parentUuid": "5c5addf3_1528c934",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84987e71_0e0e7a01",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 122,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-12-05T21:51:28Z",
      "side": 1,
      "message": "Can we initialize this in the test fixture?  Seems like it should be set before we start setting stuff up, to minimize chance of a breakage in the test when the code still actually works.",
      "range": {
        "startLine": 122,
        "startChar": 7,
        "endLine": 122,
        "endChar": 31
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80afb326_ba781438",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 122,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "84987e71_0e0e7a01",
      "range": {
        "startLine": 122,
        "startChar": 7,
        "endLine": 122,
        "endChar": 31
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "790029e9_ab86de2e",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-12-05T21:51:28Z",
      "side": 1,
      "message": "I assume this won\u0027t expire at some point?",
      "range": {
        "startLine": 125,
        "startChar": 28,
        "endLine": 125,
        "endChar": 29
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50cf4075_93098567",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "No, though when Pilot is eventually removed from Chrome\u0027s log list, it won\u0027t work anymore. There\u0027s a TODO on line 147 to make it possible to override the log list for the duration of the test (this isn\u0027t trivial).",
      "parentUuid": "790029e9_ab86de2e",
      "range": {
        "startLine": 125,
        "startChar": 28,
        "endLine": 125,
        "endChar": 29
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "49dd4ec2_e8f808bf",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 145,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-12-05T17:22:05Z",
      "side": 1,
      "message": "The assumption baked into this test is that pilot and aviator remain trusted, right?",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4797515d_3568ee53",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 145,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-05T17:35:09Z",
      "side": 1,
      "message": "Yes, there\u0027s a TODO one line down to override the built-in log list with one that will permanently contain Pilot and Aviator. That doesn\u0027t appear to be trivial so I was deferring that to a separate change.",
      "parentUuid": "49dd4ec2_e8f808bf",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fceab5e5_a803510f",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-12-05T21:51:28Z",
      "side": 1,
      "message": "fulfill.",
      "range": {
        "startLine": 151,
        "startChar": 44,
        "endLine": 151,
        "endChar": 53
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a048c44_c8bfa4c1",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "I didn\u0027t realise American English spelled that word differently to British English. Fixed.",
      "parentUuid": "fceab5e5_a803510f",
      "range": {
        "startLine": 151,
        "startChar": 44,
        "endLine": 151,
        "endChar": 53
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "835c6570_be05e930",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 153,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-12-05T21:51:28Z",
      "side": 1,
      "message": "This isn\u0027t thread safe - should be done before starting the test server, as it runs off thread.  Should set this up before starting the server.  Also I don\u0027t think this method is intended to allow mutating the server\u0027s live cert...is it?",
      "range": {
        "startLine": 153,
        "startChar": 25,
        "endLine": 153,
        "endChar": 39
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "631e3e75_2de3278e",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 153,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "Done. I\u0027ve modelled this test after https://cs.chromium.org/chromium/src/chrome/browser/ssl/ssl_browsertest.cc and https://cs.chromium.org/chromium/src/chrome/browser/ssl/chrome_expect_ct_reporter_browsertest.cc. The former uses this technique to change the certificate Chrome thinks the server presented, as I\u0027m doing here. It\u0027s not actually changing the certificate used by the server though (given that, I don\u0027t think it actually matters whether the server is started or not when SwapCert() is called). I wasn\u0027t sure \"SwapCert\" was the best name for this method and, given Ryan\u0027s comment above about this method, I\u0027ll just inline it here to make what it\u0027s doing more obvious.",
      "parentUuid": "835c6570_be05e930",
      "range": {
        "startLine": 153,
        "startChar": 25,
        "endLine": 153,
        "endChar": 39
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c41e9b0c_4997a7d8",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-12-05T21:51:28Z",
      "side": 1,
      "message": "What does this get us?  Note that this just spins the UI thread\u0027s message loop, not the IO thread\u0027s, or the test servers.  So it\u0027s possible the UI thread could be idle while the other threads are not.",
      "range": {
        "startLine": 161,
        "startChar": 18,
        "endLine": 161,
        "endChar": 30
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5af1abaa_7f84c492",
        "filename": "chrome/browser/ssl/certificate_transparency_browsertest.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "Removed - unnecessary.",
      "parentUuid": "c41e9b0c_4997a7d8",
      "range": {
        "startLine": 161,
        "startChar": 18,
        "endLine": 161,
        "endChar": 30
      },
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "694b575e_8acde96d",
        "filename": "components/certificate_transparency/tree_state_tracker.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-12-05T17:22:05Z",
      "side": 1,
      "message": "The recommended approach here is to have a features.h (e.g. //components/certificate_transparency/features.h) with this feature, along with a features.cc with it",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba2398e5_783302de",
        "filename": "components/certificate_transparency/tree_state_tracker.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "694b575e_8acde96d",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65c035ec_f173b2a9",
        "filename": "net/data/ssl/certificates/comodo-chain.pem",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1000193
      },
      "writtenOn": "2017-12-05T17:22:05Z",
      "side": 1,
      "message": "Couple things:\n\n1) We try to avoid checking in \u0027real\u0027 certs, as they expire - could you explain why this part is necessary?\n2) Adding a new file here involves updating //net/BUILD.gn (to make sure it\u0027s bundled as part of unittest dependencies) and updating the README.md",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c077704b_6400b8f9",
        "filename": "net/data/ssl/certificates/comodo-chain.pem",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-05T17:35:09Z",
      "side": 1,
      "message": "The test required a cert with SCTs that comply with Chrome\u0027s policy, and the existing test certs don\u0027t. It doesn\u0027t matter whether the cert expires, because it isn\u0027t verified - it\u0027s swapped in post-cert-verification, but pre-CT-verification.",
      "parentUuid": "65c035ec_f173b2a9",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "04dd8d91_d2e780fd",
        "filename": "net/data/ssl/certificates/comodo-chain.pem",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1130929
      },
      "writtenOn": "2017-12-21T14:06:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c077704b_6400b8f9",
      "revId": "0c2724bc58d6a19ddefdcb8e804ef85cf9f3e567",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}