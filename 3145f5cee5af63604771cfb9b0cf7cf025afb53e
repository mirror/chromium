{
  "comments": [
    {
      "key": {
        "uuid": "195b74a5_a1cb2298",
        "filename": "content/renderer/render_frame_impl.cc",
        "patchSetId": 1
      },
      "lineNbr": 5170,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-09-28T21:18:58Z",
      "side": 1,
      "message": "Seems reasonable, thanks for the careful investigation.  However, I\u0027m confused about one thing -- why a problem has only been observed on Android, given that the explanation applies to all platforms.  Is it possible that Aura code sends OnDeviceScaleFactorChanged() more frequently, for example?  Could you test the similar scenario on Linux with --force-device-scale-factor\u003d2 and see what happens?  Then for example, maybe we could either fix this by adding OnDeviceScaleFactorChanged() to Android-specific code instead, or delete the line from the Aura code.\n\nFor testing, I guess this would have to be tested with like content_browsertests.  A detailed understanding of what happens on other platforms may also help to write the test.",
      "revId": "3145f5cee5af63604771cfb9b0cf7cf025afb53e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6fd0c9d9_7a16094d",
        "filename": "content/renderer/render_frame_impl.cc",
        "patchSetId": 1
      },
      "lineNbr": 5170,
      "author": {
        "id": 1237911
      },
      "writtenOn": "2017-09-29T06:44:01Z",
      "side": 1,
      "message": "Good suggestion. As far as I checked, RenderFrameImpl::SetHostZoomLevel() sets zoom_level only for non-Android platform and RenderFrameImpl::SendDidCommitProvisionalLoad() calls render_view_-\u003eSetZoomLevel() only when the host_zoom_levels_ has a zoom level for the URL. As a result, Aura calls render_view_-\u003eSetZoomLevel() and it updates DSF correctly, but Android does not call it.\n\nHere, an interesting thing is that the zoom level set by RenderFrameImpl::SetHostZoomLevel() is 0 when I checked it in Linux (i.e., not DSF). In addition, it is not easily realized that render_view_-\u003eSetZoomLevel() updates DSF (it updates both zoom level and DSF). An easy solution for this bug is just to change RenderFrameImpl::SetHostZoomLevel(), but I think is not intuitive. Why don\u0027t we just call render_view_-\u003eUpdateWebViewWithDeviceScaleFactor() in RenderFrameImpl::SwapIn()? It is more clear to understand.",
      "parentUuid": "195b74a5_a1cb2298",
      "revId": "3145f5cee5af63604771cfb9b0cf7cf025afb53e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1b8ac64_ef640d57",
        "filename": "content/renderer/render_frame_impl.cc",
        "patchSetId": 1
      },
      "lineNbr": 5170,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-09-29T20:40:38Z",
      "side": 1,
      "message": "Got it.  Then it\u0027s an accident that this works on other platforms because those happen to support Ctrl-+/- zoom level storage feature and Clank does not.  So your approach seems fine, ping again when you have the test.",
      "parentUuid": "6fd0c9d9_7a16094d",
      "revId": "3145f5cee5af63604771cfb9b0cf7cf025afb53e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}