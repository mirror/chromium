{
  "comments": [
    {
      "key": {
        "uuid": "89ee8741_4981de1e",
        "filename": "chrome/browser/ui/webui/settings/chromeos/device_stylus_handler.cc",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1115893
      },
      "writtenOn": "2017-09-20T17:49:52Z",
      "side": 1,
      "message": "Shouldn\u0027t this line also be moved elsewhere? AllowJavascript is not meant to be called by an async C++ callback. It is meant to be called once the page comes up (indicated by the 1st message of the page to the C++).",
      "revId": "4d6535e2f2fa3fbb1e36b9a31f7e83685d9e38da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25046a23_172f7245",
        "filename": "chrome/browser/ui/webui/settings/chromeos/device_stylus_handler.cc",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-09-20T17:57:58Z",
      "side": 1,
      "message": "We use this pattern pretty often (including in the previous example you gave). This may be the first time we make a JS call, i.e. we may send data to the page without the page explicitly requesting any data; we have that pattern in a lot of pages.",
      "parentUuid": "89ee8741_4981de1e",
      "revId": "4d6535e2f2fa3fbb1e36b9a31f7e83685d9e38da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa0d9beb_ba6e7fd3",
        "filename": "chrome/browser/ui/webui/settings/chromeos/device_stylus_handler.cc",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1115893
      },
      "writtenOn": "2017-09-20T18:03:20Z",
      "side": 1,
      "message": "In that case, I am wondering how this fix is working at all.\n\nCalling AllowJavascript() is what ends up triggering the OnJavascriptAllowed() above, see [1]. Which seems that the observer will never be registered, if the only thing calling AllowJavascript() is the observer method itself. What am I missing?\n\n[1] https://cs.chromium.org/chromium/src/content/browser/webui/web_ui_message_handler.cc?l\u003d25.",
      "parentUuid": "25046a23_172f7245",
      "revId": "4d6535e2f2fa3fbb1e36b9a31f7e83685d9e38da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ac35664_a7a78876",
        "filename": "chrome/browser/ui/webui/settings/chromeos/device_stylus_handler.cc",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-09-20T19:22:35Z",
      "side": 1,
      "message": "Ugh. I did not understand or forgot how this should work. In that case we need to audit all of the CrOS handlers. I will file an issue and put up a CL.",
      "parentUuid": "aa0d9beb_ba6e7fd3",
      "revId": "4d6535e2f2fa3fbb1e36b9a31f7e83685d9e38da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1961fb07_588893a9",
        "filename": "chrome/browser/ui/webui/settings/chromeos/device_stylus_handler.cc",
        "patchSetId": 2
      },
      "lineNbr": 106,
      "author": {
        "id": 1127641
      },
      "writtenOn": "2017-09-20T21:08:28Z",
      "side": 1,
      "message": "I\u0027ve uploaded https://chromium-review.googlesource.com/c/chromium/src/+/675579 to fix these issues.",
      "parentUuid": "9ac35664_a7a78876",
      "revId": "4d6535e2f2fa3fbb1e36b9a31f7e83685d9e38da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}