{
  "comments": [
    {
      "key": {
        "uuid": "aea8ecf6_ec38f7db",
        "filename": "testing/scripts/test.uploaded.json",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-11-09T17:03:32Z",
      "side": 1,
      "message": "Are we doing hashes? I thought we weren\u0027t (it\u0027s fine if we are, though).\n\nAlso, I think we were going to use the same hash that the isolate server uses, which I think is still SHA-1?",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ee7a2fc_5ed798c5",
        "filename": "testing/scripts/test.uploaded.json",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-10T01:04:39Z",
      "side": 1,
      "message": "I had decided to do hashes :)",
      "parentUuid": "aea8ecf6_ec38f7db",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "061ee9f4_777359cb",
        "filename": "testing/scripts/test.uploaded.json",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "(resolving)",
      "parentUuid": "9ee7a2fc_5ed798c5",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c313c0a6_18972a5f",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "this will fail on Windows; you need \u0027rb\u0027",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f99b8d4_5b243195",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c313c0a6_18972a5f",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eab095f7_1610e521",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-11-09T17:03:32Z",
      "side": 1,
      "message": "sha1?",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ceb77605_eaefc697",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-10T01:04:39Z",
      "side": 1,
      "message": "I think we want to move to sha256 in the future? But I\u0027m fine starting with sha1 for now. I\u0027ll wait for maruel to comment to switch.",
      "parentUuid": "eab095f7_1610e521",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e0e582b_97ab1be5",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "Use sha256 right away.",
      "parentUuid": "ceb77605_eaefc697",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca26dba5_997ea75b",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6e0e582b_97ab1be5",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "04903f4d_060864ce",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-11-13T17:09:58Z",
      "side": 1,
      "message": "@maruel - if we use sha256 right away, this means that the hashes we have here don\u0027t match the hashes the isolate server uses, and that would make it impossible for a generic viewer to link directly to the results in the isolateserver. Given that I think that\u0027s a plausible way to want to store most of our results, I\u0027m not happy taking this off the table at this time.\n\nAlso, my concern about us having hash collisions for test artifacts is almost nonexistent, and I think we can either trivially change the hash function at any point in time (since nothing is likely re-calculating it to check), or do so simply by bumping the version number in the file format.\n\nGiven the above, does that change your recommendation at all?",
      "parentUuid": "ca26dba5_997ea75b",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6593836c_a167d8d7",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "this will fail/be slow on large files, you need to chunk. Due to the way prefetching is implemented on OSes, 64kb chunks should give you the best performance.",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bebe06f8_751d0354",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "I tested this locally with different chunk sizes, didn\u0027t see any real performance differences on a 1 GB file. Am I testing something incorrectly? Is it different on different OSes?",
      "parentUuid": "6593836c_a167d8d7",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70befb8c_7fcbc217",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "this is a bit confusing, because key can either be a str or a tuple(str). It works in both cases as expected?",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3dc249df_bd326a61",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "get_tests always returns a dictionary with a tuple as the key. So it\u0027s always a tuple + tuple, which is always a tuple.",
      "parentUuid": "70befb8c_7fcbc217",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7e9fd19_4f95a421",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-08T20:22:47Z",
      "side": 1,
      "message": "I feel like this isn\u0027t the most optimal way to do this... It worked on my machine though.",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87ab1256_e8705b6e",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-11-09T17:03:32Z",
      "side": 1,
      "message": "This works, but will upload the files one at a time, which will be brutally slow. I think it\u0027s probably better to create a temporary copy of the whole tree in a directory and then upload everything at once.\n\nThen again, maruel@ might know some better way to upload-if-changed programmatically or something.",
      "parentUuid": "f7e9fd19_4f95a421",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02404794_109cc77b",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-10T01:04:39Z",
      "side": 1,
      "message": "Theoretically we could do a directory copy, so just `gsutil cp /path/to/local/sha1-ed/root gs://chromium_test_artifacts/sha1/\u0027 or something. That would probably be fairly efficient. We would need a staging directory though.",
      "parentUuid": "87ab1256_e8705b6e",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "157095b4_924bd6a4",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "I ended up doing this, and wrote some simple tests. Ends up being pretty fast for a fair number of files.",
      "parentUuid": "02404794_109cc77b",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dd1fc2fe_df52ebd2",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-08T20:22:47Z",
      "side": 1,
      "message": "maruel@, I vaguely remember you saying something about how switching the isolate server hash algorithm is really hard because of a design decisions? Is this a good way to handle this?",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2a12989_d6f68f86",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "It\u0027s not \"very\" hard, it\u0027s just not a priority yet.",
      "parentUuid": "dd1fc2fe_df52ebd2",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33d5a4d2_c07c934a",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "Ok. Will keep this.",
      "parentUuid": "d2a12989_d6f68f86",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f93e6c1_22182216",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 101,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "for test_run in itertools.chain.from_iterable(test_obj.get(\u0027artifacts\u0027) or []):",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb637ece_ed2be378",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 101,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4f93e6c1_22182216",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "875bc45f_55fc154c",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "What\u0027s the value of trying to be smart here?",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bf66ad4_674bab85",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "It was mostly for my testing. I\u0027ve removed the smartness here. Just rewrites the existing file.",
      "parentUuid": "875bc45f_55fc154c",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "276bb630_80e7afb7",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-08T20:22:47Z",
      "side": 1,
      "message": "I rename the file when I write it out. Should I do this or just override the actual file?",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ff60057_d0058dc6",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-11-09T17:03:32Z",
      "side": 1,
      "message": "I think you\u0027ll probably want to take the output path as a command line argument.",
      "parentUuid": "276bb630_80e7afb7",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93560ff6_1378d7a4",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-10T01:04:39Z",
      "side": 1,
      "message": "How do I do that for multiple files? Or do I just make this script only modify one file.",
      "parentUuid": "3ff60057_d0058dc6",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d65bda4_4ca80c28",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "when storing to a file, you may want to compact representation instead.",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d35da95c_abc3efd0",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7d65bda4_4ca80c28",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "721ecc91_10c35d69",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 126,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2017-11-10T20:29:28Z",
      "side": 1,
      "message": "you may want to use indent and separators and sort_keys here",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf8acbd6_877f1cd8",
        "filename": "testing/scripts/upload_test_result_artifacts.py",
        "patchSetId": 4
      },
      "lineNbr": 126,
      "author": {
        "id": 1148599
      },
      "writtenOn": "2017-11-11T00:36:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "721ecc91_10c35d69",
      "revId": "6d438391e39e521adfd9bd9ffc9cc24b00fba759",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}