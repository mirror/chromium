{
  "comments": [
    {
      "key": {
        "uuid": "8bb14adb_5d5a9ca1",
        "filename": "chrome/browser/safe_browsing/chrome_password_protection_service.cc",
        "patchSetId": 16
      },
      "lineNbr": 452,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-09-14T01:14:31Z",
      "side": 1,
      "message": "optional (since this \"false\" wasn\u0027t added in this CL): consider adding the argument name with booleans. e.g.\n\n        /*whitelist_only\u003d*/false, \u0026current_threat_type)) {\n\nSee:\nhttps://google.github.io/styleguide/cppguide.html#Implementation_Comments",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e59fde1_b65f15ff",
        "filename": "chrome/browser/safe_browsing/chrome_password_protection_service.cc",
        "patchSetId": 16
      },
      "lineNbr": 452,
      "author": {
        "id": 1144209
      },
      "writtenOn": "2017-09-14T16:50:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8bb14adb_5d5a9ca1",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f71dfd7_b566f8a0",
        "filename": "chrome/browser/safe_browsing/chrome_password_protection_service.h",
        "patchSetId": 16
      },
      "lineNbr": 185,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-09-15T18:50:36Z",
      "side": 1,
      "message": "maybe:\n\n1) I may be misunderstanding, but IIUC this is used to track how many entries are made into the map and the reason it\u0027s a map rather than a counter is avoid double counting. If that is so, could this get by with just an int64_t (or even an int32_t) hash of the Origin to save space? Again IIUC the price of a hash collision would just be a slight variance in a histogram stat. Since a collision is unlikely and the effect would be inconsequential, saving the bytes seems useful.\n\n2) It also looks like the value in the map (the navigation ID) isn\u0027t really used, so would a std::set work here (to avoid storing map values).\n\n(If I\u0027m wrong, please just let me know).",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d874304f_ab153a55",
        "filename": "chrome/browser/ui/webui/settings/change_password_handler.cc",
        "patchSetId": 16
      },
      "lineNbr": 23,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-09-14T01:14:31Z",
      "side": 1,
      "message": "Unless there\u0027s specific need to observer/unobserve in the ctor/dtor, please move these to (overrides of) OnJavascriptAllowed()/OnJavascriptDisallowed().\n\nWhy:\nPutting them in the ctor makes this active even when the settings is not being viewed/used. Putting them in the OnJavascriptAllowed/Disallowed makes the observer active while the webui is being viewed/used.\n\nOTOH:\nIf it\u0027s necessary to observe at all times, even when not in the webui, please add a comment explaining that (and why). (Because someone is likely to try to \u0027fix\u0027 it by moving this to OnJavascriptAllowed and accidentally break it if it really should be in the ctor).\n\nSee example:\nhttps://cs.chromium.org/chromium/src/chrome/browser/ui/webui/settings/on_startup_handler.cc?type\u003dcs\u0026sq\u003dpackage:chromium\u0026l\u003d33",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad39ea62_7e21b1c9",
        "filename": "chrome/browser/ui/webui/settings/change_password_handler.cc",
        "patchSetId": 16
      },
      "lineNbr": 23,
      "author": {
        "id": 1144209
      },
      "writtenOn": "2017-09-14T16:50:48Z",
      "side": 1,
      "message": "Ah, I wasn\u0027t aware of that. Thanks for pointing this out. \nMoved to OnJavaScriptAllowed()/...Disalowed()",
      "parentUuid": "d874304f_ab153a55",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6310d8d9_f42c68c9",
        "filename": "chrome/browser/ui/webui/settings/change_password_handler.cc",
        "patchSetId": 16
      },
      "lineNbr": 23,
      "author": {
        "id": 1144209
      },
      "writtenOn": "2017-09-14T18:50:09Z",
      "side": 1,
      "message": "After some manual testing, I found that:\n(1) if user navigate away from chrome://settings page  onJavascriptDisallowed() will be called\n(2) if user close chrome://settings page, onJavascriptDisallowed() will NOT be called, \n\nSo it seems I still need to call RemoveObserver() in dtor to make sure it is correctly unobserved.\nLet me know if I missed something here.\nUpdated comments too.",
      "parentUuid": "ad39ea62_7e21b1c9",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1415976a_eb31c9a0",
        "filename": "chrome/browser/ui/webui/settings/change_password_handler.cc",
        "patchSetId": 16
      },
      "lineNbr": 23,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-09-15T18:50:36Z",
      "side": 1,
      "message": "You are correct, though there\u0027s a preferred way to deal with that :)\n\nI should have pointed out ScopedObserver better in the example I linked to. A ScopedObserver is a helper class to help unobserve all the things its owner is observing.\n\nSince this is only observing one thing, I\u0027m not sure a ScopedObserver is useful, but I wanted to mention it. You may choose whether you\u0027d like to use ScopedObserver here since it\u0027s just one thing. If this starts observing more things, then I\u0027d ask that this use ScopedObserver.\n\nSee:\nhttps://cs.chromium.org/chromium/src/chrome/browser/ui/webui/settings/on_startup_handler.h?type\u003dcs\u0026sq\u003dpackage:chromium\u0026l\u003d64\n\nhttps://cs.chromium.org/chromium/src/base/scoped_observer.h?l\u003d21\u0026gsn\u003dScopedObserver",
      "parentUuid": "6310d8d9_f42c68c9",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f428db7a_f91d1d9e",
        "filename": "chrome/browser/ui/webui/settings/change_password_handler.h",
        "patchSetId": 16
      },
      "lineNbr": 32,
      "author": {
        "id": 1136204
      },
      "writtenOn": "2017-09-14T01:14:31Z",
      "side": 1,
      "message": "I\u0027m not against this comment style, but is there a style guide suggesting it? (I.e. why change from the style already used in the file)?",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f12cd156_79be2f40",
        "filename": "chrome/browser/ui/webui/settings/change_password_handler.h",
        "patchSetId": 16
      },
      "lineNbr": 32,
      "author": {
        "id": 1144209
      },
      "writtenOn": "2017-09-14T16:50:48Z",
      "side": 1,
      "message": "ACK.\nI\u0027m trying to make the comment style consistent across all the password protection related code.\ne.g. https://cs.chromium.org/chromium/src/chrome/browser/ui/views/safe_browsing/password_reuse_modal_warning_dialog.h?rcl\u003dd87c6ae8a330ba864c7873e04a0c09aa0af7941a\u0026l\u003d29",
      "parentUuid": "f428db7a_f91d1d9e",
      "revId": "cf8c4bca47374ce746be35f9dd8dc3d05c14d245",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}