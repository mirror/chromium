{
  "comments": [
    {
      "key": {
        "uuid": "6e578548_92e23533",
        "filename": "third_party/WebKit/Source/core/dom/Element.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3096,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2017-12-07T09:52:54Z",
      "side": 1,
      "message": "What is the criteria for selecting these elements?\n\nI guess they require special treatment even when empty string is given for innerHTML\n- but the readers of this code are not sure whether they are exhaustive, or if anything\nchanges (e.g. spec requirement etc.) does this optimization break?\n\nEven we copy the behavior of Mozilla, it looks Firefox also sets \"HasWeirdParserInsertionMode\"\nin HTMLSharedElement class, which is inherited by various elements, which seems missing.\n\nWe have a different implementation of HTML parser than Mozilla\u0027s, and the requirements\ncould be different.\n\nHmm, how can we make sure the set of elements that are optimizable...?",
      "revId": "0ae8c91382032003d705f98ebb5ff42c7a06fd21",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1633624_9b0174b3",
        "filename": "third_party/WebKit/Source/core/dom/Element.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3096,
      "author": {
        "id": 1247388
      },
      "writtenOn": "2017-12-07T10:30:05Z",
      "side": 1,
      "message": "This if clause is basically what Mozilla\u0027s HasWeirdParserInsertionMode does. These elements might have an insertion mode that might add some elements eventhough the text itself doesn\u0027t contain any markups (https://html.spec.whatwg.org/multipage/parsing.html#reset-the-insertion-mode-appropriately), so we can\u0027t skip the parsing and only edit the text content.\n\nThis function will only return true (optimize, skip the parsing and just update text content) if the text contains no markup and does not add any elements that aren\u0027t in the given string, so it should be fine, I think.",
      "parentUuid": "6e578548_92e23533",
      "revId": "0ae8c91382032003d705f98ebb5ff42c7a06fd21",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}