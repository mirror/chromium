{
  "comments": [
    {
      "key": {
        "uuid": "89a00dc3_8f004c7a",
        "filename": "components/download/content/public/download_navigation_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-08-25T21:15:46Z",
      "side": 1,
      "message": "I think we can use DidStartNavigation()  to mark as the start of page loading and DidFinishLoad() for end of page loading. We could also use DidFinishNavigation() for end of navigation which doesn\u0027t mean we have completed the load, but we have the delay so that should take care of the loading time, wdyt?",
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2ecb255_60543130",
        "filename": "components/download/content/public/download_navigation_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-08-31T18:07:41Z",
      "side": 1,
      "message": "On slow connections loading a page could take a minute.  Tracking end of page load makes sense.  Do we have to worry about the distinction between navigation loads and javascript driven loads?  IIRC there was some difference between load start/stop and page load start/stop?",
      "parentUuid": "89a00dc3_8f004c7a",
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23644b00_3418abb4",
        "filename": "components/download/content/public/download_navigation_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-09-01T01:56:56Z",
      "side": 1,
      "message": "I tested it a little bit on https://notepad-plus-plus.org/download/v7.3.1.html, and pretty suprised the actual call sequence.\n\nCall sequence of these functions seems to be:\nDidStartLoading \u003d\u003d\u003e DidStartNavigation \u003d\u003d\u003e DidFinishNavigation \u003d\u003d\u003e DidStartNavigation \u003d\u003d\u003e ....(10-20 navigation events pair) \u003d\u003d\u003e DidStopLoading.\n\n\nI guess probably each ajax request will be reflected as a navigation event pair which renders only some part of the page, like an ad.\n\nMaybe the loading pair is better, so we don\u0027t get 20 calls per page loading.\n\nAnd DidStopLoading is called before WebContentsDestroyed when we close the tab, so I only leave the loading event pair here.\n\nAlso, there are DidFinishLoad/DidFailLoad which ties to RenderFrameHost, I assume that\u0027s for different purpose, and DidStartLoading/DidStopLoading should also be called.\n\nIn general, DidStartLoading/DidStopLoading seems what we want here. And it seems to be safe to do counting based on them.",
      "parentUuid": "b2ecb255_60543130",
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03527e55_9221c0e0",
        "filename": "components/download/internal/navigation_monitor_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-08-31T18:07:41Z",
      "side": 1,
      "message": "remove \"for\"",
      "range": {
        "startLine": 16,
        "startChar": 43,
        "endLine": 16,
        "endChar": 47
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a35ed848_3c53245d",
        "filename": "components/download/internal/navigation_monitor_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-09-01T01:56:56Z",
      "side": 1,
      "message": "Done, change this to SetObserver, so removed this DCHECK.",
      "parentUuid": "03527e55_9221c0e0",
      "range": {
        "startLine": 16,
        "startChar": 43,
        "endLine": 16,
        "endChar": 47
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8c5fa05_eaaaf7fd",
        "filename": "components/download/internal/navigation_monitor_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-08-25T21:15:46Z",
      "side": 1,
      "message": "Should we have a similar method to unregister, or may be a set_observer() method is better?\n\nI think the life time of NavigationMonitor and ControllerImpl are different.",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 23
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cab843bb_e85b1d3a",
        "filename": "components/download/internal/navigation_monitor_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-09-01T01:56:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e8c5fa05_eaaaf7fd",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 23
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f820511c_3acce320",
        "filename": "components/download/internal/navigation_monitor_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-08-31T18:07:41Z",
      "side": 1,
      "message": "Do we have to deal with multiple tabs loading at the same time?  Count the number of starts/stops we see?",
      "range": {
        "startLine": 21,
        "startChar": 2,
        "endLine": 22,
        "endChar": 40
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "959a782c_37ba355d",
        "filename": "components/download/internal/navigation_monitor_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-09-01T01:56:56Z",
      "side": 1,
      "message": "Ack, talked offline, Shakti has added that change in his CL. I\u0027ll leave this function untouched for now.\n\nWe discussed the counting previously, there is a concern that WebContentObserver seems complex and some complete calls may or may not be called. This may introduce bugs or propagate the bugs from WebContentObserver to us.",
      "parentUuid": "f820511c_3acce320",
      "range": {
        "startLine": 21,
        "startChar": 2,
        "endLine": 22,
        "endChar": 40
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7afa480_408fd73e",
        "filename": "components/download/public/navigation_monitor.h",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-08-25T21:15:46Z",
      "side": 1,
      "message": "optional nit: START_NAVIGATION, NAVIGATION_COMPLETE?",
      "range": {
        "startLine": 16,
        "startChar": 2,
        "endLine": 17,
        "endChar": 10
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15f062d4_1ad6b8a1",
        "filename": "components/download/public/navigation_monitor.h",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-09-01T01:56:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d7afa480_408fd73e",
      "range": {
        "startLine": 16,
        "startChar": 2,
        "endLine": 17,
        "endChar": 10
      },
      "revId": "75f24c4d381a5f16f705c2cfd19847ffeecf7a89",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}