{
  "comments": [
    {
      "key": {
        "uuid": "00f3f140_3950feb9",
        "filename": "chrome/browser/DEPS",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-07T21:45:38Z",
      "side": 1,
      "message": "This fixed the checkdeps problem but doesn\u0027t seem like the best solution to me.",
      "range": {
        "startLine": 83,
        "startChar": 0,
        "endLine": 83,
        "endChar": 76
      },
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf9c51a3_9f2a3b7b",
        "filename": "chrome/browser/DEPS",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-09-08T01:20:17Z",
      "side": 1,
      "message": "yeah - let\u0027s see if we can avoid this",
      "parentUuid": "00f3f140_3950feb9",
      "range": {
        "startLine": 83,
        "startChar": 0,
        "endLine": 83,
        "endChar": 76
      },
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c69e83b_3f21c3a1",
        "filename": "chrome/browser/DEPS",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-10T22:24:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cf9c51a3_9f2a3b7b",
      "range": {
        "startLine": 83,
        "startChar": 0,
        "endLine": 83,
        "endChar": 76
      },
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da11c847_05bbe28c",
        "filename": "chrome/browser/apps/app_window_interactive_uitest.cc",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-09-08T01:20:17Z",
      "side": 1,
      "message": "Yeah I don\u0027t see a neat way to introduce the stuff you need into this file. c/b/ui/views #includes are not allowed under c/b/ui . BrowserWindow is able to expose a `GetExclusiveAccessContext()` on its cross-platform API, but the AppWindow class hierarchy isn\u0027t setup the same.\n\nHowever, I wonder whether it needs to be interactive. Desktop platforms need interactive for fullscreen stuff since multiple processes will fight. But on ash, each process gets its own ash desktop. So you might be able to use an existing file -- chrome_native_app_window_views_aura_ash_browsertest.cc (but if it\u0027s flaky, it may need an interactive_uitest.cc file).\n\n\nIf the things your test uses are only on AppWindowInteractiveTest, that can be moved to a header #included by both test files.",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca1d5abc_e032adb1",
        "filename": "chrome/browser/apps/app_window_interactive_uitest.cc",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-10T22:24:01Z",
      "side": 1,
      "message": "Thanks for this suggestion, moved it to chrome_native_app_window_views_aura_ash_interactive_uitest, it works now.",
      "parentUuid": "da11c847_05bbe28c",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "886f0862_d97387d4",
        "filename": "chrome/browser/ui/views/apps/chrome_native_app_window_views_aura_ash.cc",
        "patchSetId": 5
      },
      "lineNbr": 495,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-09-08T01:20:17Z",
      "side": 1,
      "message": "I don\u0027t think this is necessary - the ExclusiveAccessBubbleViews constructor seems to invoke it. See later comment.",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ada3341_b10939bf",
        "filename": "chrome/browser/ui/views/apps/chrome_native_app_window_views_aura_ash.cc",
        "patchSetId": 5
      },
      "lineNbr": 495,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-10T22:24:01Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "886f0862_d97387d4",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4aab7ffa_64a210cc",
        "filename": "chrome/browser/ui/views/exclusive_access_bubble_views.h",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-09-08T01:20:17Z",
      "side": 1,
      "message": "This doesn\u0027t look right. The method is protected in the base class - probably because it\u0027s not meant to be called directly from things that are not implementing it.\n\nHow is it normally called?\n\nI had a peek -- looks like possible paths that call Show() are the ExclusiveAccessBubbleViews() constructor or chrome::NOTIFICATION_FULLSCREEN_CHANGED being broadcast -- they both call UpdateMouseWatcher, and ExclusiveAccessBubble::StartWatchingMouse() invokes `ShowAndStartTimers()`",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8f0ec56_8f85f823",
        "filename": "chrome/browser/ui/views/exclusive_access_bubble_views.h",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-10T22:24:01Z",
      "side": 1,
      "message": "True. Tho UpdateMouseWatcher checks IsVisible (false since we don\u0027t show anything yet), and CanMouseTriggerSlideIn (which is !IsImmersiveModeEnabled, which is false in my case) before doing anything else - so it doesn\u0027t do anything in my case.\n\nRepurposing Show() seemed like a decent idea, I\u0027m not sure how to fix it in a different way. I\u0027ll do some more thinking tomorrow.",
      "parentUuid": "4aab7ffa_64a210cc",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4290b4a_3190438b",
        "filename": "chrome/browser/ui/views/exclusive_access_bubble_views.h",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-09-10T23:51:36Z",
      "side": 1,
      "message": "See how fullscreen does it. Perhaps you just need to use GetWidget()-\u003eShow(), to trigger  ExclusiveAccessBubbleViews::OnWidgetVisibilityChanged() (which also calls UpdateMouseWatcher())",
      "parentUuid": "a8f0ec56_8f85f823",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06011822_8a45fbbb",
        "filename": "chrome/browser/ui/views/exclusive_access_bubble_views.h",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-11T20:47:04Z",
      "side": 1,
      "message": "I\u0027ve taken a good look at this and haven\u0027t found a way to do the right thing without calling Show() directly. The indirect ways don\u0027t suit me unfortunately, the only thing I can do is make CanMouseTriggerSlideIn return true (by making IsImmersiveModeEnabled I implemented return false which is obviously not correct).\n\nWould you be fine with me adding a function to ExclusiveAccessBubbleViews that calls Show() so that in a sense I make an indirect call? Looking at ExclusiveAccessBubbleViews::UpdateContent, I would take the last part of it and make a new function that I would call:\n\n  Show();\n\n  // Stop watching the mouse even if UpdateMouseWatcher() will start watching\n  // it again so that the popup with the new content is visible for at least\n  // |kInitialDelayMs|.\n  StopWatchingMouse();\n\n  UpdateMouseWatcher();",
      "parentUuid": "e4290b4a_3190438b",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0d7b23d_bc757104",
        "filename": "chrome/browser/ui/views/exclusive_access_bubble_views.h",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-09-12T00:39:58Z",
      "side": 1,
      "message": "\u003e the only thing I can do is make CanMouseTriggerSlideIn return true (by making IsImmersiveModeEnabled I implemented return false which is obviously not correct).\n\nI think this perhaps _is_ the right approach :)\n\nYour CL introduces a new behaviour for immersive mode. So it makes sense that the logic in\n\n bool ExclusiveAccessBubbleViews::CanMouseTriggerSlideIn() const {\n   return !bubble_view_context_-\u003eIsImmersiveModeEnabled();\n }\n\nis now out of date.\n\n\nCanMouseTriggerSlideIn() should return true, since this is checked after a 15 minute delay without the mouse moving to \"remind\" the user that they are still in fullscreen (as a security feature) - I think you want that, but it needs to be decoupled from immersive mode.\n\n\nI think the right approach is to add a new virtual method to ExclusiveAccessBubbleViewsContext called \"bool CanTriggerOnMouse() const \u003d 0\"\n\nCanMouseTriggerSlideIn() should be renamed to match -- \"SlideIn\" is no longer a good name since the bubble no longer slides. It once did, but now it just animates opacity.",
      "parentUuid": "06011822_8a45fbbb",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3bad7cb_60031e6e",
        "filename": "chrome/browser/ui/views/exclusive_access_bubble_views.h",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-18T17:37:07Z",
      "side": 1,
      "message": "Good suggestion, thanks. Looks good?",
      "parentUuid": "b0d7b23d_bc757104",
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc8f37a7_b30a7c99",
        "filename": "chrome/test/BUILD.gn",
        "patchSetId": 5
      },
      "lineNbr": 551,
      "author": {
        "id": 1145669
      },
      "writtenOn": "2017-09-07T21:45:38Z",
      "side": 1,
      "message": "Putting this here didn\u0027t fix the checkdeps problem.",
      "range": {
        "startLine": 551,
        "startChar": 0,
        "endLine": 551,
        "endChar": 34
      },
      "revId": "3d265870d47406c806a9b8deed774ef695f6c779",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}