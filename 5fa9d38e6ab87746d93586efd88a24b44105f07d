{
  "comments": [
    {
      "key": {
        "uuid": "6cf752c7_0ff4895e",
        "filename": "components/safe_browsing/triggers/trigger_manager.cc",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1122060
      },
      "writtenOn": "2017-10-20T18:33:56Z",
      "side": 1,
      "message": "nit: Add a bug to remove this, and reference it here.",
      "revId": "5fa9d38e6ab87746d93586efd88a24b44105f07d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90d34624_32657b86",
        "filename": "components/safe_browsing/triggers/trigger_manager.cc",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1168342
      },
      "writtenOn": "2017-10-20T19:06:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6cf752c7_0ff4895e",
      "revId": "5fa9d38e6ab87746d93586efd88a24b44105f07d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "145709ca_874b31c0",
        "filename": "components/safe_browsing/triggers/trigger_manager_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 349,
      "author": {
        "id": 1122060
      },
      "writtenOn": "2017-10-20T18:33:56Z",
      "side": 1,
      "message": "Can you verify it\u0027s not actually sending the request?",
      "revId": "5fa9d38e6ab87746d93586efd88a24b44105f07d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e81128d_b7d391c9",
        "filename": "components/safe_browsing/triggers/trigger_manager_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 349,
      "author": {
        "id": 1168342
      },
      "writtenOn": "2017-10-20T19:06:48Z",
      "side": 1,
      "message": "Not here, that would belong in theat_details_unittest. However, the way that code works, the tests need to wait for a separate thread to return the generated report but we skip that call when we discard that report. It basically means the tests try to wait for this call and timeout - but i haven\u0027t figured out a way to fix the tests to confirm that the call is skipped.\n\nHowever, I have done a bunch of manual testing confirming that the reports are dropped, and we also have confirmation in dev that no reports are being sent. LMK if you think i should invest in tightening up the tests to cover this before making this change.",
      "parentUuid": "145709ca_874b31c0",
      "revId": "5fa9d38e6ab87746d93586efd88a24b44105f07d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d268ca69_30d1e895",
        "filename": "components/safe_browsing/triggers/trigger_manager_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 349,
      "author": {
        "id": 1122060
      },
      "writtenOn": "2017-10-23T00:06:01Z",
      "side": 1,
      "message": "I\u0027m a little concerned about the impact of a bug here -- collecting/sending for a ton of users would DDoS the backend and more importantly would share PII from people not opted-in.  Can you point me to the code that drops it before sending it?  I suppose since this is temporary code, it\u0027s not worth refactoring for more rigoruous tests...  So I\u0027ll say go for it.",
      "parentUuid": "2e81128d_b7d391c9",
      "revId": "5fa9d38e6ab87746d93586efd88a24b44105f07d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdfd3fed_a25c7867",
        "filename": "components/safe_browsing/triggers/trigger_manager_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 349,
      "author": {
        "id": 1168342
      },
      "writtenOn": "2017-10-23T00:58:05Z",
      "side": 1,
      "message": "Yeah that\u0027s a real concern, but I share the feeling that this is temporary and won\u0027t evolve beyond this so might not be worth sinking more effort into.\n\nThe code is here: https://cs.chromium.org/chromium/src/components/safe_browsing/browser/threat_details.cc?q\u003dthreat_details.cc\u0026sq\u003dpackage:chromium\u0026dr\u0026l\u003d749\n\nOne other thought I had was to push the \"discard\" step down a layer into ui_manager. ThreatDetails could pass an empty report string to ui_manager (based on the finch feature), and ui_manager already has a line to not send anything if the report is blank (but I don\u0027t like spreading the logic across two classes). Alternatively ui_manager could look at the feature and return early. But at a glance, ui_manager unit tests seem to be in a pretty rough state.",
      "parentUuid": "d268ca69_30d1e895",
      "revId": "5fa9d38e6ab87746d93586efd88a24b44105f07d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "669cc391_b0e23a3c",
        "filename": "components/safe_browsing/triggers/trigger_manager_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 418,
      "author": {
        "id": 1122060
      },
      "writtenOn": "2017-10-20T18:33:56Z",
      "side": 1,
      "message": "Check here too that it\u0027s not sent.",
      "revId": "5fa9d38e6ab87746d93586efd88a24b44105f07d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}