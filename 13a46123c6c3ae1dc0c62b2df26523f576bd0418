{
  "comments": [
    {
      "key": {
        "uuid": "86eb6689_575ae203",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1159306
      },
      "writtenOn": "2017-12-12T18:28:35Z",
      "side": 1,
      "message": "Nit: since we\u0027re not explicitly \"running\" the reporter here anymore, maybe change this to \"link reporter invocations together\".",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3647a50_7d9be15c",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T21:35:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "86eb6689_575ae203",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef5d07b3_655cedc4",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1159306
      },
      "writtenOn": "2017-12-12T18:28:35Z",
      "side": 1,
      "message": "Nit: \"create\" a single invocation or \"add\" a single invocation?",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc51c853_ff3bbc54",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T21:35:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef5d07b3_655cedc4",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7a79e3b_ceccbedc",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 350,
      "author": {
        "id": 1159306
      },
      "writtenOn": "2017-12-12T18:28:35Z",
      "side": 1,
      "message": "Nit: while we\u0027re changing this, this should use \"\u003d default;\" instead of \"{}\"",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38c230be_292e64a1",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 350,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T21:35:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f7a79e3b_ceccbedc",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b455f347_b33b6ea7",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 379,
      "author": {
        "id": 1159306
      },
      "writtenOn": "2017-12-12T18:28:35Z",
      "side": 1,
      "message": "I don\u0027t think we need this anymore, since we\u0027re not explicitly running the reporter here. It\u0027s checked inside OnSwReporterReady.\n\n+sorin: You said on the other bug there were \"reentrancy and concurrency issues\". I\u0027m not sure how that can be if this is always running on the browser thread?",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c922f78_0bb3acb6",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 379,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T21:35:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b455f347_b33b6ea7",
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "42f14a03_77fe9230",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 386,
      "author": {
        "id": 1116033
      },
      "writtenOn": "2017-12-08T23:34:10Z",
      "side": 1,
      "message": "That is the part where we need to be concerned with overlapped execution. \n\nThe idea here is that as soon as the function returns, the component updater is done handling this component, and it could allow an update check for this component, which could result in another ComponentReady() call.\n\nWe (the component updater owners) are in a tough spot here. There are many tasks serialized in the component updater execution flow. The component updater prefers to control the execution of these tasks and not rely on the installer code to call us back, had this call been non-blocking.",
      "range": {
        "startLine": 386,
        "startChar": 61,
        "endLine": 386,
        "endChar": 0
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0fc9e9c6_c86ee791",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 386,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T16:04:39Z",
      "side": 1,
      "message": "on_component_ready_callback_ will not try to request a component update.\n\nI don\u0027t think I understand the last paragraph. Are you asking to change this to a non-blocking PostTask?",
      "parentUuid": "42f14a03_77fe9230",
      "range": {
        "startLine": 386,
        "startChar": 61,
        "endLine": 386,
        "endChar": 0
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c9e85a6_b7f81200",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 386,
      "author": {
        "id": 1159306
      },
      "writtenOn": "2017-12-12T18:28:35Z",
      "side": 1,
      "message": "+1 to using PostTask here. Then instead of checking that we\u0027re already on BrowserThread::UI above, we can call \"content::BrowserThread::GetTaskRunnerForThread(content::BrowserThread::UI)-\u003ePostTask\" which is resilient in case the component updater ever moves off the UI thread and is easy to find and update when we change SwReporterRunner to no longer be bound to the UI thread.",
      "parentUuid": "0fc9e9c6_c86ee791",
      "range": {
        "startLine": 386,
        "startChar": 61,
        "endLine": 386,
        "endChar": 0
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1534ba3d_dbaa7444",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 386,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T21:35:32Z",
      "side": 1,
      "message": "If we\u0027re going to post task, we might as well merge it with the PostAfterStartupTask. PTAL.",
      "parentUuid": "0c9e85a6_b7f81200",
      "range": {
        "startLine": 386,
        "startChar": 61,
        "endLine": 386,
        "endChar": 0
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4fb9fa28_70e9b05a",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 386,
      "author": {
        "id": 1159306
      },
      "writtenOn": "2017-12-13T19:14:55Z",
      "side": 1,
      "message": "Does this have any weird effects in tests?\n\nI think PostAfterStartupTask is an implementation detail of the reporter runner. ComponentReady should simply notify the observer \"the component is now ready to run\" (by posting the on_component_ready_callback task). If the callback implementation doesn\u0027t want to do anything with this information until after the browser startup is complete, then it should handle that itself.\n\nThis does mean there will always be a chain of two posted tasks instead of just one, which is a bit inefficient. But that shouldn\u0027t matter here because ComponentReady gets called rarely, not in a tight loop.\n\nI don\u0027t feel strongly about it, though. I could see an argument that the exact timing of delivering the on_component_ready_callback notification (immediately vs. after browser startup is complete) is the responsibility of this function. If you do leave PostAfterStartupTask here, please add a comment explaining why it\u0027s used.",
      "parentUuid": "1534ba3d_dbaa7444",
      "range": {
        "startLine": 386,
        "startChar": 61,
        "endLine": 386,
        "endChar": 0
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "118ad7c7_79137a9f",
        "filename": "chrome/browser/component_updater/sw_reporter_installer_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 386,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-13T21:29:23Z",
      "side": 1,
      "message": "Yes, this had weird effects in tests. Moved it back out ComponentReady, now is a lambda in RegisterSwReporterComponent.",
      "parentUuid": "4fb9fa28_70e9b05a",
      "range": {
        "startLine": 386,
        "startChar": 61,
        "endLine": 386,
        "endChar": 0
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa11961b_897b4d68",
        "filename": "chrome/browser/safe_browsing/chrome_cleaner/reporter_runner_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 1111,
      "author": {
        "id": 1116033
      },
      "writtenOn": "2017-12-08T23:34:10Z",
      "side": 1,
      "message": "Maybe ask gab@ if a task scheduler task could be posted instead of using a browser thread api.",
      "range": {
        "startLine": 1111,
        "startChar": 26,
        "endLine": 1111,
        "endChar": 46
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34bad6d0_be1283bb",
        "filename": "chrome/browser/safe_browsing/chrome_cleaner/reporter_runner_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 1111,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T16:04:39Z",
      "side": 1,
      "message": "gab\u0027s OOO for now. ++fdoray",
      "parentUuid": "fa11961b_897b4d68",
      "range": {
        "startLine": 1111,
        "startChar": 26,
        "endLine": 1111,
        "endChar": 46
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e185350f_a16fb403",
        "filename": "chrome/browser/safe_browsing/chrome_cleaner/reporter_runner_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 1111,
      "author": {
        "id": 1159306
      },
      "writtenOn": "2017-12-12T18:28:35Z",
      "side": 1,
      "message": "I don\u0027t think there\u0027s a task scheduler construct that knows about the browser startup sequence.",
      "parentUuid": "34bad6d0_be1283bb",
      "range": {
        "startLine": 1111,
        "startChar": 26,
        "endLine": 1111,
        "endChar": 46
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7eb7faf5_0448bee5",
        "filename": "chrome/browser/safe_browsing/chrome_cleaner/reporter_runner_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 1111,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T21:35:32Z",
      "side": 1,
      "message": "++fdoray for real this time.",
      "parentUuid": "e185350f_a16fb403",
      "range": {
        "startLine": 1111,
        "startChar": 26,
        "endLine": 1111,
        "endChar": 46
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f5baf59_16ed2914",
        "filename": "chrome/browser/safe_browsing/chrome_cleaner/reporter_runner_win.h",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1116033
      },
      "writtenOn": "2017-12-08T23:34:10Z",
      "side": 1,
      "message": "Remove",
      "range": {
        "startLine": 188,
        "startChar": 19,
        "endLine": 188,
        "endChar": 26
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bd0957e_639246d3",
        "filename": "chrome/browser/safe_browsing/chrome_cleaner/reporter_runner_win.h",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1223356
      },
      "writtenOn": "2017-12-12T16:04:39Z",
      "side": 1,
      "message": "Done\n(patchset might be a little late coming in, making an official build in another branch at the moment)",
      "parentUuid": "2f5baf59_16ed2914",
      "range": {
        "startLine": 188,
        "startChar": 19,
        "endLine": 188,
        "endChar": 26
      },
      "revId": "13a46123c6c3ae1dc0c62b2df26523f576bd0418",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}