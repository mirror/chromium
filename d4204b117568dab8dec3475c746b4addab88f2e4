{
  "comments": [
    {
      "key": {
        "uuid": "f713d78c_874a6d91",
        "filename": "third_party/WebKit/Source/core/frame/VisualViewport.cpp",
        "patchSetId": 12
      },
      "lineNbr": 453,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-09-07T14:55:29Z",
      "side": 1,
      "message": "Hmm...is the UseZoomForDSF flag really not plumbed through to Blink at all? Is this the only place in Blink that this has to happen in?",
      "range": {
        "startLine": 453,
        "startChar": 15,
        "endLine": 453,
        "endChar": 61
      },
      "revId": "d4204b117568dab8dec3475c746b4addab88f2e4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a7f90e8_7819d801",
        "filename": "third_party/WebKit/Source/core/frame/VisualViewport.cpp",
        "patchSetId": 12
      },
      "lineNbr": 453,
      "author": {
        "id": 1237911
      },
      "writtenOn": "2017-09-08T15:34:59Z",
      "side": 1,
      "message": "I think so .. If we must explicitly plumb whether the flag is turned on into Blink, IsUseZoomForDSFEnabled() must be used. As far as I checked, the closest place where it is used from Blink is RenderViewImpl::UpdateWebViewWithDeviceScaleFactor(). Here, only when IsUseZoomForDSFEnabled() is false, webview()-\u003eSetDeviceScaleFactor(device_scale_factor_) is executed and GetPage().DeviceScaleFactorDeprecated() is set as DSF. Otherwise, it is 1.f.\n\naelias@, must we plumb IsUseZoomForDSFEnabled() into Blink explicitly?",
      "parentUuid": "f713d78c_874a6d91",
      "range": {
        "startLine": 453,
        "startChar": 15,
        "endLine": 453,
        "endChar": 61
      },
      "revId": "d4204b117568dab8dec3475c746b4addab88f2e4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12db2af8_a79131bc",
        "filename": "third_party/WebKit/Source/core/frame/VisualViewport.cpp",
        "patchSetId": 12
      },
      "lineNbr": 453,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-09-08T15:44:42Z",
      "side": 1,
      "message": "IMHO, it\u0027d be a lot of temporary boilerplate for just one corner case. If the UseZoomForDSF flag is _off_ but the DSF just happens to be 1, multiplying by the DSF below will be a no-op so it doesn\u0027t matter functionally. If this is the only case we need it I think a comment describing that this is to be applied only in UseZoomForDSF mode would be enough.\n\nHow do desktop scrollbars get DSF scaling on desktop (with the flag on) though? They don\u0027t grow with browser zoom but they must clearly be getting the DSF applied so they don\u0027t appear thinner.",
      "parentUuid": "7a7f90e8_7819d801",
      "range": {
        "startLine": 453,
        "startChar": 15,
        "endLine": 453,
        "endChar": 61
      },
      "revId": "d4204b117568dab8dec3475c746b4addab88f2e4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ea35981_0bdabc12",
        "filename": "third_party/WebKit/Source/core/frame/VisualViewport.cpp",
        "patchSetId": 12
      },
      "lineNbr": 453,
      "author": {
        "id": 1237911
      },
      "writtenOn": "2017-09-11T14:29:37Z",
      "side": 1,
      "message": "For the desktop, Scrollbar::ScrollbarThickness() scales the thickness through RenderWidget::ConvertWindowToViewport(). I just realized we can avoid using GetPage().DeviceScaleFactorDeprecated() and scale the mobile scrollbar with the same way of scaling the desktop one.\n\nIn terms of plumbing IsUseZoomForDSFEnabled() into Blink, I think we do not need it now, but I will do that if we must later.",
      "parentUuid": "12db2af8_a79131bc",
      "range": {
        "startLine": 453,
        "startChar": 15,
        "endLine": 453,
        "endChar": 61
      },
      "revId": "d4204b117568dab8dec3475c746b4addab88f2e4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e79a240a_5b2709fe",
        "filename": "third_party/WebKit/Source/core/frame/VisualViewport.cpp",
        "patchSetId": 12
      },
      "lineNbr": 454,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-09-07T14:55:29Z",
      "side": 1,
      "message": "DevicePixelRatio will include browser zoom (i.e. Ctrl+/-). We currently don\u0027t support changing that on Android but we shouldn\u0027t be applying that to scrollbars. Please use GetPage().GetChromeClient().GetScreenInfo().device_scale_factor;",
      "range": {
        "startLine": 454,
        "startChar": 37,
        "endLine": 454,
        "endChar": 53
      },
      "revId": "d4204b117568dab8dec3475c746b4addab88f2e4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7a7714a_26d5462c",
        "filename": "third_party/WebKit/Source/core/frame/VisualViewport.cpp",
        "patchSetId": 12
      },
      "lineNbr": 454,
      "author": {
        "id": 1237911
      },
      "writtenOn": "2017-09-08T15:34:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e79a240a_5b2709fe",
      "range": {
        "startLine": 454,
        "startChar": 37,
        "endLine": 454,
        "endChar": 53
      },
      "revId": "d4204b117568dab8dec3475c746b4addab88f2e4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}