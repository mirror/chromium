{
  "comments": [
    {
      "key": {
        "uuid": "1905e524_d5aef5d3",
        "filename": "content/browser/renderer_host/media/media_stream_manager.cc",
        "patchSetId": 8
      },
      "lineNbr": 1372,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-15T12:29:28Z",
      "side": 1,
      "message": "I think we didn\u0027t realize that it\u0027s possible for AudioInputDeviceManager::Open via GetInputDeviceInfo to return empty(nullop) AudioParameters. In that case, |input| can be nullop and this DCHECK will fail which is what has caused the current browser test failure. So, this DCHECK also should be removed.\n\nShould we add a check here for opened_device-\u003einput or assign some dummy audio params to device.input?",
      "revId": "f4e9aec4771c28a11827f25a47f142873176b1e5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "622cc4a6_d1d105f6",
        "filename": "content/browser/renderer_host/media/media_stream_manager.cc",
        "patchSetId": 8
      },
      "lineNbr": 1372,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-15T13:06:13Z",
      "side": 1,
      "message": "\u003e Should we add a check here for opened_device-\u003einput or assign some dummy audio params to device.input?\n\nI mean assign UnavailableDeviceParams().",
      "parentUuid": "1905e524_d5aef5d3",
      "revId": "f4e9aec4771c28a11827f25a47f142873176b1e5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b543e25_9425ef42",
        "filename": "content/browser/renderer_host/media/media_stream_manager.cc",
        "patchSetId": 8
      },
      "lineNbr": 1372,
      "author": {
        "id": 1153409
      },
      "writtenOn": "2017-12-15T14:35:02Z",
      "side": 1,
      "message": "I can understand using UnavailableDeviceParams for tab/desktop capture. But here it\u0027s explicitly not audio capture. When do we end up with nullopt params here and where are they propagated further to?\n\nIt\u0027s really hard to track what\u0027s going on in MediaStreamManager.\nI\u0027m also concerned about DHCEKS in renderer-side *audio_source.cc\n\nI would recommend to document all the cases/paths where in the old we fallback (or rely on fallback) to Unavailable params. And then we should decide for each case if fallback is desired (like for tab capture) or if we should handle \"no device\" situation instead.\n\nguidou@ WDYT? Are you comfortable navigating this CL? (I\u0027m not)",
      "parentUuid": "622cc4a6_d1d105f6",
      "revId": "f4e9aec4771c28a11827f25a47f142873176b1e5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08fb3153_81b616db",
        "filename": "content/browser/renderer_host/media/media_stream_manager.cc",
        "patchSetId": 8
      },
      "lineNbr": 1372,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-18T09:40:02Z",
      "side": 1,
      "message": "\u003e I can understand using UnavailableDeviceParams for tab/desktop capture. But here it\u0027s explicitly not audio capture. When do we end up with nullopt params here and where are they propagated further to?\n\nIn case of DesktopCaptureApiTest.ChooseDesktopMedia browser test, AudioInputDeviceManager::Open(internally audio_system_-\u003eGetInputDeviceInfo) seems to return nullopt params which results in a DCHECK here. These params(|input|) are then sent to the renderer(to *audio_source.cc) over mojo IPC.",
      "parentUuid": "1b543e25_9425ef42",
      "revId": "f4e9aec4771c28a11827f25a47f142873176b1e5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}