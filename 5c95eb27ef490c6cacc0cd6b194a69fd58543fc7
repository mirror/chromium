{
  "comments": [
    {
      "key": {
        "uuid": "02f09aa0_a379b02b",
        "filename": "third_party/WebKit/Source/platform/heap/HeapAllocator.h",
        "patchSetId": 7
      },
      "lineNbr": 238,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "Save ThreadState::Current() to a local variable.",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c787b869_e70a8588",
        "filename": "third_party/WebKit/Source/platform/heap/HeapAllocator.h",
        "patchSetId": 7
      },
      "lineNbr": 238,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "02f09aa0_a379b02b",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59f13ffe_8595e070",
        "filename": "third_party/WebKit/Source/platform/heap/Member.h",
        "patchSetId": 7
      },
      "lineNbr": 594,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "tmp -\u003e object",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "79d499dd_07bc90fa",
        "filename": "third_party/WebKit/Source/platform/heap/Member.h",
        "patchSetId": 7
      },
      "lineNbr": 594,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "59f13ffe_8595e070",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95d06ba7_fc02ae87",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "I think you can remove the Allocator parameter by adding ConstructElement and NewInitializedElements to HeapAllocator and ParitionAllocator.",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c8d9339_e2915613",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "How would we specialize for the \"true\" part (is traceable)? I like the indirection of ConstructTraits here as it separates concerns. \n\nAm I missing something?\n\n(As a side note: We restrict placement new to ConstructTrait using the current approach.)",
      "parentUuid": "95d06ba7_fc02ae87",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfba09dc_6579bf25",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-20T05:09:43Z",
      "side": 1,
      "message": "So, I think this is related to the question I asked before... When is HeapAllocator \u0026 false possible?\n\nI think that the possible cases are:\n\n- PartitionAlloctor \u0026 false\n- HeapAllocator \u0026 true\n\nFor example, Vector\u003cObjectThatHasTrace\u003e is invalid because no one calls Trace of that object.",
      "parentUuid": "9c8d9339_e2915613",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75ecfe06_ddd935b1",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-20T11:55:08Z",
      "side": 1,
      "message": "Done. As discussed offline, we keep Allocator but remove the IsTraceableInCollection bool.\n\nFor documentation: This was done initially this way to avoid adding the Notify methods to PartitionAllocator. Since it is ok to add an empty stub there we can remove the complexity.",
      "parentUuid": "bfba09dc_6579bf25",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4acc3eb_95985d18",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "Add a very good comment about what ConstructTraits is.",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c22f1022_27bb5057",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c4acc3eb_95985d18",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff76b00c_e0215394",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 31,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "Once we remove the Allocator parameter, I think that this specialization will be gone.",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b73b1a5_44b90cca",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 31,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "See above, I think we need it to specialize for the true case.",
      "parentUuid": "ff76b00c_e0215394",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e017941b_f7d18f65",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 31,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-20T11:55:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3b73b1a5_44b90cca",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4a0f092_6665fa6d",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 53,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "tmp \u003d\u003e object",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e485436_9de634d0",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 53,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e4a0f092_6665fa6d",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4fc17bb_d05df8ae",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 55,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "NotifyNewObject \u003d\u003e ConstructElement ?",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd789f4e_27f96f20",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 55,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "The allocator doesn\u0027t really construct but is just notified about construction from here.",
      "parentUuid": "e4fc17bb_d05df8ae",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a9f2e88_93b9abfe",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "NewInitializedElements \u003d\u003e ConstructElements ?",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3c44f32_6cdb4d0f",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a9f2e88_93b9abfe",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "86f4b17a_30ba1405",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 60,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "NotifyNewObjects \u003d\u003e ConstructElements ?",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f55619f6_87802d12",
        "filename": "third_party/WebKit/Source/platform/wtf/ConstructTraits.h",
        "patchSetId": 7
      },
      "lineNbr": 60,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "See above.",
      "parentUuid": "86f4b17a_30ba1405",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a151e5fb_4fa2a170",
        "filename": "third_party/WebKit/Source/platform/wtf/Deque.h",
        "patchSetId": 7
      },
      "lineNbr": 501,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "Don\u0027t you need to insert a write-barrier here?\n\nI\u0027m fine with addressing Deque in a follow-up.",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0abf829b_db573db6",
        "filename": "third_party/WebKit/Source/platform/wtf/Deque.h",
        "patchSetId": 7
      },
      "lineNbr": 501,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "HeapDeque is a follow up as it also needs tests.\n\nSneak peak:\n  https://chromium-review.googlesource.com/c/chromium/src/+/833935",
      "parentUuid": "a151e5fb_4fa2a170",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db6a4069_100712d8",
        "filename": "third_party/WebKit/Source/platform/wtf/Vector.h",
        "patchSetId": 7
      },
      "lineNbr": 254,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-19T15:14:21Z",
      "side": 1,
      "message": "You could use NewInitializedElements outside the while loop.\n\nThe same comment for other loops in this file.",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3c95082_f99b7df1",
        "filename": "third_party/WebKit/Source/platform/wtf/Vector.h",
        "patchSetId": 7
      },
      "lineNbr": 254,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2017-12-19T16:06:12Z",
      "side": 1,
      "message": "Then we would mix placement new and ConstructTraits calls across the code base.\n\nI\u0027d like to restrict access to placement new to the ConstructTraits in a followup.",
      "parentUuid": "db6a4069_100712d8",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be77d077_2ebc40ea",
        "filename": "third_party/WebKit/Source/platform/wtf/Vector.h",
        "patchSetId": 7
      },
      "lineNbr": 254,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2017-12-20T05:09:43Z",
      "side": 1,
      "message": "Sounds reasonable.",
      "parentUuid": "d3c95082_f99b7df1",
      "revId": "5c95eb27ef490c6cacc0cd6b194a69fd58543fc7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}