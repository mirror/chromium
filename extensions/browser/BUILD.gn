# Copyright 2014 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/features.gni")

source_set("browser") {
  sources = []

  deps = [
    "//base:i18n",
    "//components/cast_certificate",
    "//components/guest_view/browser",
    "//components/keyed_service/content",
    "//components/keyed_service/core",
    "//components/pref_registry",
    "//components/sessions",
    "//components/update_client",
    "//components/version_info",
    "//components/web_cache/browser",
    "//components/web_modal",
    "//components/zoom",
    "//content/public/browser",
    "//crypto:platform",
    "//extensions/common",
    "//extensions/common/api",
    "//extensions/common/api:api_registration",
    "//extensions/strings",
    "//google_apis",
    "//skia",
    "//third_party/leveldatabase",
    "//third_party/re2",
    "//ui/display",
  ]

  configs += [
    "//build/config:precompiled_headers",

    # TODO(jschuh): crbug.com/167187 fix size_t to int truncations.
    "//build/config/compiler:no_size_t_to_int_warning",
  ]

  if (enable_extensions) {
    # Includes all API implementations and the ExtensionsApiClient
    # interface. Moving an API from src/chrome to src/extensions implies
    # it can be cleanly disabled with enable_extensions=false.
    # TODO: Eventually the entire extensions module should not be built
    # when enable_extensions=false.
    sources = [
      # NOTE: When moving an API out of Chrome be sure to verify that the
      # Android build still compiles. See conditions below.
      "api/activity_log/web_request_constants.cc",
      "api/activity_log/web_request_constants.h",
      "api/alarms/alarm_manager.cc",
      "api/alarms/alarm_manager.h",
      "api/alarms/alarms_api.cc",
      "api/alarms/alarms_api.h",
      "api/alarms/alarms_api_constants.cc",
      "api/alarms/alarms_api_constants.h",
      "api/api_resource.cc",
      "api/api_resource.h",
      "api/api_resource_manager.h",
      "api/app_current_window_internal/app_current_window_internal_api.cc",
      "api/app_current_window_internal/app_current_window_internal_api.h",
      "api/app_runtime/app_runtime_api.cc",
      "api/app_runtime/app_runtime_api.h",
      "api/app_window/app_window_api.cc",
      "api/app_window/app_window_api.h",
      "api/async_api_function.cc",
      "api/async_api_function.h",
      "api/audio/audio_api.cc",
      "api/audio/audio_api.h",
      "api/audio/audio_service.h",
      "api/bluetooth/bluetooth_api.cc",
      "api/bluetooth/bluetooth_api.h",
      "api/bluetooth/bluetooth_api_pairing_delegate.cc",
      "api/bluetooth/bluetooth_api_pairing_delegate.h",
      "api/bluetooth/bluetooth_api_utils.cc",
      "api/bluetooth/bluetooth_api_utils.h",
      "api/bluetooth/bluetooth_event_router.cc",
      "api/bluetooth/bluetooth_event_router.h",
      "api/bluetooth/bluetooth_extension_function.cc",
      "api/bluetooth/bluetooth_extension_function.h",
      "api/bluetooth/bluetooth_private_api.cc",
      "api/bluetooth/bluetooth_private_api.h",
      "api/bluetooth_socket/bluetooth_api_socket.cc",
      "api/bluetooth_socket/bluetooth_api_socket.h",
      "api/bluetooth_socket/bluetooth_socket_api.cc",
      "api/bluetooth_socket/bluetooth_socket_api.h",
      "api/bluetooth_socket/bluetooth_socket_event_dispatcher.cc",
      "api/bluetooth_socket/bluetooth_socket_event_dispatcher.h",
      "api/cast_channel/cast_auth_util.cc",
      "api/cast_channel/cast_auth_util.h",
      "api/cast_channel/cast_channel_api.cc",
      "api/cast_channel/cast_channel_api.h",
      "api/cast_channel/cast_framer.cc",
      "api/cast_channel/cast_framer.h",
      "api/cast_channel/cast_message_util.cc",
      "api/cast_channel/cast_message_util.h",
      "api/cast_channel/cast_socket.cc",
      "api/cast_channel/cast_socket.h",
      "api/cast_channel/cast_transport.cc",
      "api/cast_channel/cast_transport.h",
      "api/cast_channel/keep_alive_delegate.cc",
      "api/cast_channel/keep_alive_delegate.h",
      "api/cast_channel/logger.cc",
      "api/cast_channel/logger.h",
      "api/cast_channel/logger_util.cc",
      "api/cast_channel/logger_util.h",
      "api/clipboard/clipboard_api.cc",
      "api/clipboard/clipboard_api.h",
      "api/declarative/declarative_api.cc",
      "api/declarative/declarative_api.h",
      "api/declarative/declarative_rule.h",
      "api/declarative/deduping_factory.h",
      "api/declarative/rules_cache_delegate.cc",
      "api/declarative/rules_cache_delegate.h",
      "api/declarative/rules_registry.cc",
      "api/declarative/rules_registry.h",
      "api/declarative/rules_registry_service.cc",
      "api/declarative/rules_registry_service.h",
      "api/declarative/test_rules_registry.cc",
      "api/declarative/test_rules_registry.h",
      "api/declarative_content/content_rules_registry.h",
      "api/declarative_webrequest/request_stage.cc",
      "api/declarative_webrequest/request_stage.h",
      "api/declarative_webrequest/webrequest_action.cc",
      "api/declarative_webrequest/webrequest_action.h",
      "api/declarative_webrequest/webrequest_condition.cc",
      "api/declarative_webrequest/webrequest_condition.h",
      "api/declarative_webrequest/webrequest_condition_attribute.cc",
      "api/declarative_webrequest/webrequest_condition_attribute.h",
      "api/declarative_webrequest/webrequest_constants.cc",
      "api/declarative_webrequest/webrequest_constants.h",
      "api/declarative_webrequest/webrequest_rules_registry.cc",
      "api/declarative_webrequest/webrequest_rules_registry.h",
      "api/device_permissions_manager.cc",
      "api/device_permissions_manager.h",
      "api/device_permissions_prompt.cc",
      "api/device_permissions_prompt.h",
      "api/display_source/display_source_api.cc",
      "api/display_source/display_source_api.h",
      "api/display_source/display_source_connection_delegate.cc",
      "api/display_source/display_source_connection_delegate.h",
      "api/display_source/display_source_connection_delegate_factory.cc",
      "api/display_source/display_source_connection_delegate_factory.h",
      "api/display_source/display_source_event_router.cc",
      "api/display_source/display_source_event_router.h",
      "api/display_source/display_source_event_router_factory.cc",
      "api/display_source/display_source_event_router_factory.h",
      "api/dns/dns_api.cc",
      "api/dns/dns_api.h",
      "api/dns/host_resolver_wrapper.cc",
      "api/dns/host_resolver_wrapper.h",
      "api/document_scan/document_scan_api.cc",
      "api/document_scan/document_scan_api.h",
      "api/document_scan/document_scan_interface.cc",
      "api/document_scan/document_scan_interface.h",
      "api/document_scan/document_scan_interface_chromeos.cc",
      "api/execute_code_function.cc",
      "api/execute_code_function.h",
      "api/extensions_api_client.cc",
      "api/extensions_api_client.h",
      "api/guest_view/app_view/app_view_guest_internal_api.cc",
      "api/guest_view/app_view/app_view_guest_internal_api.h",
      "api/guest_view/extension_view/extension_view_internal_api.cc",
      "api/guest_view/extension_view/extension_view_internal_api.h",
      "api/guest_view/guest_view_internal_api.cc",
      "api/guest_view/guest_view_internal_api.h",
      "api/guest_view/web_view/web_view_internal_api.cc",
      "api/guest_view/web_view/web_view_internal_api.h",
      "api/hid/hid_api.cc",
      "api/hid/hid_api.h",
      "api/hid/hid_connection_resource.cc",
      "api/hid/hid_connection_resource.h",
      "api/hid/hid_device_manager.cc",
      "api/hid/hid_device_manager.h",
      "api/idle/idle_api.cc",
      "api/idle/idle_api.h",
      "api/idle/idle_api_constants.cc",
      "api/idle/idle_api_constants.h",
      "api/idle/idle_manager.cc",
      "api/idle/idle_manager.h",
      "api/idle/idle_manager_factory.cc",
      "api/idle/idle_manager_factory.h",
      "api/management/management_api.cc",
      "api/management/management_api.h",
      "api/management/management_api_constants.cc",
      "api/management/management_api_constants.h",
      "api/management/management_api_delegate.h",
      "api/messaging/native_message_host.cc",
      "api/mime_handler_private/mime_handler_private.cc",
      "api/mime_handler_private/mime_handler_private.h",
      "api/networking_private/networking_private_api.cc",
      "api/networking_private/networking_private_api.h",
      "api/networking_private/networking_private_chromeos.cc",
      "api/networking_private/networking_private_chromeos.h",
      "api/networking_private/networking_private_delegate.cc",
      "api/networking_private/networking_private_delegate.h",
      "api/networking_private/networking_private_delegate_factory.cc",
      "api/networking_private/networking_private_delegate_factory.h",
      "api/networking_private/networking_private_delegate_observer.h",
      "api/networking_private/networking_private_event_router.h",
      "api/networking_private/networking_private_event_router_chromeos.cc",
      "api/networking_private/networking_private_event_router_factory.cc",
      "api/networking_private/networking_private_event_router_factory.h",
      "api/power/power_api.cc",
      "api/power/power_api.h",
      "api/printer_provider/printer_provider_api.cc",
      "api/printer_provider/printer_provider_api.h",
      "api/printer_provider/printer_provider_api_factory.cc",
      "api/printer_provider/printer_provider_api_factory.h",
      "api/printer_provider/printer_provider_print_job.cc",
      "api/printer_provider/printer_provider_print_job.h",
      "api/printer_provider_internal/printer_provider_internal_api.cc",
      "api/printer_provider_internal/printer_provider_internal_api.h",
      "api/printer_provider_internal/printer_provider_internal_api_observer.h",
      "api/runtime/runtime_api.cc",
      "api/runtime/runtime_api.h",
      "api/runtime/runtime_api_delegate.cc",
      "api/runtime/runtime_api_delegate.h",
      "api/serial/serial_api.cc",
      "api/serial/serial_api.h",
      "api/serial/serial_connection.cc",
      "api/serial/serial_connection.h",
      "api/serial/serial_event_dispatcher.cc",
      "api/serial/serial_event_dispatcher.h",
      "api/serial/serial_service_factory.cc",
      "api/serial/serial_service_factory.h",
      "api/socket/socket.cc",
      "api/socket/socket.h",
      "api/socket/socket_api.cc",
      "api/socket/socket_api.h",
      "api/socket/tcp_socket.cc",
      "api/socket/tcp_socket.h",
      "api/socket/tls_socket.cc",
      "api/socket/tls_socket.h",
      "api/socket/udp_socket.cc",
      "api/socket/udp_socket.h",
      "api/sockets_tcp/sockets_tcp_api.cc",
      "api/sockets_tcp/sockets_tcp_api.h",
      "api/sockets_tcp/tcp_socket_event_dispatcher.cc",
      "api/sockets_tcp/tcp_socket_event_dispatcher.h",
      "api/sockets_tcp_server/sockets_tcp_server_api.cc",
      "api/sockets_tcp_server/sockets_tcp_server_api.h",
      "api/sockets_tcp_server/tcp_server_socket_event_dispatcher.cc",
      "api/sockets_tcp_server/tcp_server_socket_event_dispatcher.h",
      "api/sockets_udp/sockets_udp_api.cc",
      "api/sockets_udp/sockets_udp_api.h",
      "api/sockets_udp/udp_socket_event_dispatcher.cc",
      "api/sockets_udp/udp_socket_event_dispatcher.h",
      "api/storage/local_value_store_cache.cc",
      "api/storage/local_value_store_cache.h",
      "api/storage/settings_namespace.cc",
      "api/storage/settings_namespace.h",
      "api/storage/settings_observer.h",
      "api/storage/settings_storage_quota_enforcer.cc",
      "api/storage/settings_storage_quota_enforcer.h",
      "api/storage/storage_api.cc",
      "api/storage/storage_api.h",
      "api/storage/storage_frontend.cc",
      "api/storage/storage_frontend.h",
      "api/storage/value_store_cache.cc",
      "api/storage/value_store_cache.h",
      "api/storage/weak_unlimited_settings_storage.cc",
      "api/storage/weak_unlimited_settings_storage.h",
      "api/system_cpu/cpu_info_provider.cc",
      "api/system_cpu/cpu_info_provider.h",
      "api/system_cpu/cpu_info_provider_linux.cc",
      "api/system_cpu/cpu_info_provider_mac.cc",
      "api/system_cpu/cpu_info_provider_win.cc",
      "api/system_cpu/system_cpu_api.cc",
      "api/system_cpu/system_cpu_api.h",
      "api/system_display/display_info_provider.cc",
      "api/system_display/display_info_provider.h",
      "api/system_display/system_display_api.cc",
      "api/system_display/system_display_api.h",
      "api/system_info/system_info_api.cc",
      "api/system_info/system_info_api.h",
      "api/system_info/system_info_provider.cc",
      "api/system_info/system_info_provider.h",
      "api/system_memory/memory_info_provider.cc",
      "api/system_memory/memory_info_provider.h",
      "api/system_memory/system_memory_api.cc",
      "api/system_memory/system_memory_api.h",
      "api/system_network/system_network_api.cc",
      "api/system_network/system_network_api.h",
      "api/system_storage/storage_info_provider.cc",
      "api/system_storage/storage_info_provider.h",
      "api/system_storage/system_storage_api.cc",
      "api/system_storage/system_storage_api.h",
      "api/test/test_api.cc",
      "api/test/test_api.h",
      "api/usb/usb_api.cc",
      "api/usb/usb_api.h",
      "api/usb/usb_device_resource.cc",
      "api/usb/usb_device_resource.h",
      "api/usb/usb_event_router.cc",
      "api/usb/usb_event_router.h",
      "api/usb/usb_guid_map.cc",
      "api/usb/usb_guid_map.h",
      "api/virtual_keyboard_private/virtual_keyboard_delegate.h",
      "api/virtual_keyboard_private/virtual_keyboard_private_api.cc",
      "api/virtual_keyboard_private/virtual_keyboard_private_api.h",
      "api/web_contents_capture_client.cc",
      "api/web_contents_capture_client.h",
      "api/web_request/form_data_parser.cc",
      "api/web_request/form_data_parser.h",
      "api/web_request/upload_data_presenter.cc",
      "api/web_request/upload_data_presenter.h",
      "api/web_request/web_request_api.cc",
      "api/web_request/web_request_api.h",
      "api/web_request/web_request_api_constants.cc",
      "api/web_request/web_request_api_constants.h",
      "api/web_request/web_request_api_helpers.cc",
      "api/web_request/web_request_api_helpers.h",
      "api/web_request/web_request_event_details.cc",
      "api/web_request/web_request_event_details.h",
      "api/web_request/web_request_event_router_delegate.h",
      "api/web_request/web_request_permissions.cc",
      "api/web_request/web_request_permissions.h",
      "api/web_request/web_request_time_tracker.cc",
      "api/web_request/web_request_time_tracker.h",
      "api_activity_monitor.cc",
      "api_activity_monitor.h",
      "app_sorting.h",
      "app_window/app_delegate.h",
      "app_window/app_web_contents_helper.cc",
      "app_window/app_web_contents_helper.h",
      "app_window/app_window.cc",
      "app_window/app_window.h",
      "app_window/app_window_client.cc",
      "app_window/app_window_client.h",
      "app_window/app_window_contents.cc",
      "app_window/app_window_contents.h",
      "app_window/app_window_geometry_cache.cc",
      "app_window/app_window_geometry_cache.h",
      "app_window/app_window_registry.cc",
      "app_window/app_window_registry.h",
      "app_window/native_app_window.h",
      "app_window/size_constraints.cc",
      "app_window/size_constraints.h",
      "bad_message.cc",
      "bad_message.h",
      "blacklist_state.h",
      "blob_holder.cc",
      "blob_holder.h",
      "blocked_action_type.h",
      "browser_context_keyed_api_factory.h",
      "browser_context_keyed_service_factories.cc",
      "browser_context_keyed_service_factories.h",
      "component_extension_resource_manager.h",
      "computed_hashes.cc",
      "computed_hashes.h",
      "content_hash_fetcher.cc",
      "content_hash_fetcher.h",
      "content_hash_reader.cc",
      "content_hash_reader.h",
      "content_hash_tree.cc",
      "content_hash_tree.h",
      "content_verifier.cc",
      "content_verifier.h",
      "content_verifier_delegate.h",
      "content_verifier_io_data.cc",
      "content_verifier_io_data.h",
      "content_verify_job.cc",
      "content_verify_job.h",
      "crx_file_info.cc",
      "crx_file_info.h",
      "declarative_user_script_manager.cc",
      "declarative_user_script_manager.h",
      "declarative_user_script_manager_factory.cc",
      "declarative_user_script_manager_factory.h",
      "declarative_user_script_master.cc",
      "declarative_user_script_master.h",
      "deferred_start_render_host.h",
      "deferred_start_render_host_observer.h",
      "error_map.cc",
      "error_map.h",
      "event_listener_map.cc",
      "event_listener_map.h",
      "event_page_tracker.h",
      "event_router.cc",
      "event_router.h",
      "event_router_factory.cc",
      "event_router_factory.h",
      "extension_api_frame_id_map.cc",
      "extension_api_frame_id_map.h",
      "extension_dialog_auto_confirm.cc",
      "extension_dialog_auto_confirm.h",
      "extension_error.cc",
      "extension_error.h",
      "extension_function.cc",
      "extension_function.h",
      "extension_function_dispatcher.cc",
      "extension_function_dispatcher.h",
      "extension_function_registry.cc",
      "extension_function_registry.h",
      "extension_host.cc",
      "extension_host.h",
      "extension_host_delegate.h",
      "extension_host_observer.h",
      "extension_host_queue.h",
      "extension_icon_image.cc",
      "extension_icon_image.h",
      "extension_icon_placeholder.cc",
      "extension_icon_placeholder.h",
      "extension_message_filter.cc",
      "extension_message_filter.h",
      "extension_navigation_throttle.cc",
      "extension_navigation_throttle.h",
      "extension_pref_store.cc",
      "extension_pref_store.h",
      "extension_pref_value_map.cc",
      "extension_pref_value_map.h",
      "extension_pref_value_map_factory.cc",
      "extension_pref_value_map_factory.h",
      "extension_prefs.cc",
      "extension_prefs.h",
      "extension_prefs_factory.cc",
      "extension_prefs_factory.h",
      "extension_prefs_observer.h",
      "extension_prefs_scope.h",
      "extension_protocols.cc",
      "extension_protocols.h",
      "extension_registry.cc",
      "extension_registry.h",
      "extension_registry_factory.cc",
      "extension_registry_factory.h",
      "extension_registry_observer.h",
      "extension_request_limiting_throttle.cc",
      "extension_request_limiting_throttle.h",
      "extension_scoped_prefs.h",
      "extension_service_worker_message_filter.cc",
      "extension_service_worker_message_filter.h",
      "extension_system.cc",
      "extension_system.h",
      "extension_system_provider.cc",
      "extension_system_provider.h",
      "extension_throttle_entry.cc",
      "extension_throttle_entry.h",
      "extension_throttle_entry_interface.h",
      "extension_throttle_manager.cc",
      "extension_throttle_manager.h",
      "extension_user_script_loader.cc",
      "extension_user_script_loader.h",
      "extension_util.cc",
      "extension_util.h",
      "extension_web_contents_observer.cc",
      "extension_web_contents_observer.h",
      "extension_zoom_request_client.cc",
      "extension_zoom_request_client.h",
      "extensions_browser_client.cc",
      "extensions_browser_client.h",
      "external_install_info.cc",
      "external_install_info.h",
      "external_provider_interface.h",
      "file_highlighter.cc",
      "file_highlighter.h",
      "file_reader.cc",
      "file_reader.h",
      "granted_file_entry.cc",
      "granted_file_entry.h",
      "guest_view/app_view/app_view_constants.cc",
      "guest_view/app_view/app_view_constants.h",
      "guest_view/app_view/app_view_guest.cc",
      "guest_view/app_view/app_view_guest.h",
      "guest_view/app_view/app_view_guest_delegate.cc",
      "guest_view/app_view/app_view_guest_delegate.h",
      "guest_view/extension_options/extension_options_constants.cc",
      "guest_view/extension_options/extension_options_constants.h",
      "guest_view/extension_options/extension_options_guest.cc",
      "guest_view/extension_options/extension_options_guest.h",
      "guest_view/extension_options/extension_options_guest_delegate.cc",
      "guest_view/extension_options/extension_options_guest_delegate.h",
      "guest_view/extension_view/extension_view_constants.cc",
      "guest_view/extension_view/extension_view_constants.h",
      "guest_view/extension_view/extension_view_guest.cc",
      "guest_view/extension_view/extension_view_guest.h",
      "guest_view/extension_view/whitelist/extension_view_whitelist.cc",
      "guest_view/extension_view/whitelist/extension_view_whitelist.h",
      "guest_view/extensions_guest_view_manager_delegate.cc",
      "guest_view/extensions_guest_view_manager_delegate.h",
      "guest_view/extensions_guest_view_message_filter.cc",
      "guest_view/extensions_guest_view_message_filter.h",
      "guest_view/guest_view_events.cc",
      "guest_view/guest_view_events.h",
      "guest_view/mime_handler_view/mime_handler_stream_manager.cc",
      "guest_view/mime_handler_view/mime_handler_stream_manager.h",
      "guest_view/mime_handler_view/mime_handler_view_constants.cc",
      "guest_view/mime_handler_view/mime_handler_view_constants.h",
      "guest_view/mime_handler_view/mime_handler_view_guest.cc",
      "guest_view/mime_handler_view/mime_handler_view_guest.h",
      "guest_view/mime_handler_view/mime_handler_view_guest_delegate.cc",
      "guest_view/mime_handler_view/mime_handler_view_guest_delegate.h",
      "guest_view/web_view/javascript_dialog_helper.cc",
      "guest_view/web_view/javascript_dialog_helper.h",
      "guest_view/web_view/web_ui/web_ui_url_fetcher.cc",
      "guest_view/web_view/web_ui/web_ui_url_fetcher.h",
      "guest_view/web_view/web_view_constants.cc",
      "guest_view/web_view/web_view_constants.h",
      "guest_view/web_view/web_view_content_script_manager.cc",
      "guest_view/web_view/web_view_content_script_manager.h",
      "guest_view/web_view/web_view_find_helper.cc",
      "guest_view/web_view/web_view_find_helper.h",
      "guest_view/web_view/web_view_guest.cc",
      "guest_view/web_view/web_view_guest.h",
      "guest_view/web_view/web_view_guest_delegate.h",
      "guest_view/web_view/web_view_permission_helper.cc",
      "guest_view/web_view/web_view_permission_helper.h",
      "guest_view/web_view/web_view_permission_helper_delegate.cc",
      "guest_view/web_view/web_view_permission_helper_delegate.h",
      "guest_view/web_view/web_view_permission_types.h",
      "guest_view/web_view/web_view_renderer_state.cc",
      "guest_view/web_view/web_view_renderer_state.h",
      "image_loader.cc",
      "image_loader.h",
      "image_loader_factory.cc",
      "image_loader_factory.h",
      "info_map.cc",
      "info_map.h",
      "install/crx_install_error.h",
      "install/extension_install_ui.cc",
      "install/extension_install_ui.h",
      "install_flag.h",
      "io_thread_extension_message_filter.cc",
      "io_thread_extension_message_filter.h",
      "lazy_background_task_queue.cc",
      "lazy_background_task_queue.h",
      "lazy_background_task_queue_factory.cc",
      "lazy_background_task_queue_factory.h",
      "load_monitoring_extension_host_queue.cc",
      "load_monitoring_extension_host_queue.h",
      "management_policy.cc",
      "management_policy.h",
      "mojo/keep_alive_impl.cc",
      "mojo/keep_alive_impl.h",
      "mojo/service_registration.cc",
      "mojo/service_registration.h",
      "mojo/stash_backend.cc",
      "mojo/stash_backend.h",
      "notification_types.cc",
      "notification_types.h",
      "null_app_sorting.cc",
      "null_app_sorting.h",
      "pref_names.cc",
      "pref_names.h",
      "process_manager.cc",
      "process_manager.h",
      "process_manager_delegate.h",
      "process_manager_factory.cc",
      "process_manager_factory.h",
      "process_manager_observer.h",
      "process_map.cc",
      "process_map.h",
      "process_map_factory.cc",
      "process_map_factory.h",
      "quota_service.cc",
      "quota_service.h",
      "renderer_startup_helper.cc",
      "renderer_startup_helper.h",
      "requirements_checker.h",
      "runtime_data.cc",
      "runtime_data.h",
      "sandboxed_unpacker.cc",
      "sandboxed_unpacker.h",
      "script_execution_observer.h",
      "script_executor.cc",
      "script_executor.h",
      "serial_extension_host_queue.cc",
      "serial_extension_host_queue.h",
      "service_worker_manager.cc",
      "service_worker_manager.h",
      "state_store.cc",
      "state_store.h",
      "suggest_permission_util.cc",
      "suggest_permission_util.h",
      "uninstall_ping_sender.cc",
      "uninstall_ping_sender.h",
      "uninstall_reason.h",
      "update_observer.h",
      "updater/extension_cache.h",
      "updater/extension_downloader.cc",
      "updater/extension_downloader.h",
      "updater/extension_downloader_delegate.cc",
      "updater/extension_downloader_delegate.h",
      "updater/extension_downloader_test_delegate.h",
      "updater/manifest_fetch_data.cc",
      "updater/manifest_fetch_data.h",
      "updater/null_extension_cache.cc",
      "updater/null_extension_cache.h",
      "updater/request_queue.h",
      "updater/request_queue_impl.h",
      "updater/safe_manifest_parser.cc",
      "updater/safe_manifest_parser.h",
      "updater/update_client_config.cc",
      "updater/update_client_config.h",
      "updater/update_data_provider.cc",
      "updater/update_data_provider.h",
      "updater/update_install_shim.cc",
      "updater/update_install_shim.h",
      "updater/update_service.cc",
      "updater/update_service.h",
      "updater/update_service_factory.cc",
      "updater/update_service_factory.h",
      "url_request_util.cc",
      "url_request_util.h",
      "user_script_loader.cc",
      "user_script_loader.h",
      "value_store/lazy_leveldb.cc",
      "value_store/lazy_leveldb.h",
      "value_store/legacy_value_store_factory.cc",
      "value_store/legacy_value_store_factory.h",
      "value_store/leveldb_scoped_database.cc",
      "value_store/leveldb_scoped_database.h",
      "value_store/leveldb_value_store.cc",
      "value_store/leveldb_value_store.h",
      "value_store/test_value_store_factory.cc",
      "value_store/test_value_store_factory.h",
      "value_store/testing_value_store.cc",
      "value_store/testing_value_store.h",
      "value_store/value_store.cc",
      "value_store/value_store.h",
      "value_store/value_store_change.cc",
      "value_store/value_store_change.h",
      "value_store/value_store_factory.h",
      "value_store/value_store_factory_impl.cc",
      "value_store/value_store_factory_impl.h",
      "value_store/value_store_frontend.cc",
      "value_store/value_store_frontend.h",
      "verified_contents.cc",
      "verified_contents.h",
      "view_type_utils.cc",
      "view_type_utils.h",
      "warning_service.cc",
      "warning_service.h",
      "warning_service_factory.cc",
      "warning_service_factory.h",
      "warning_set.cc",
      "warning_set.h",
      "web_ui_user_script_loader.cc",
      "web_ui_user_script_loader.h",
    ]

    deps += [
      "//components/browsing_data/content",
      "//components/onc",
      "//components/storage_monitor",
      "//components/update_client",
      "//components/variations",
      "//crypto:platform",
      "//device/bluetooth",
      "//device/core",
      "//device/hid",
      "//device/power_save_blocker",
      "//device/serial",
      "//device/usb",
      "//extensions:extensions_browser_resources",
      "//extensions/common/api/cast_channel:cast_channel_proto",
    ]

    if (is_chromeos) {
      deps += [ "//chromeos" ]
    }

    if (is_chromeos) {
      sources += [
        "api/audio/audio_service_chromeos.cc",
        "api/diagnostics/diagnostics_api.cc",
        "api/diagnostics/diagnostics_api.h",
        "api/diagnostics/diagnostics_api_chromeos.cc",
        "api/networking_config/networking_config_api.cc",
        "api/networking_config/networking_config_api.h",
        "api/networking_config/networking_config_service.cc",
        "api/networking_config/networking_config_service.h",
        "api/networking_config/networking_config_service_factory.cc",
        "api/networking_config/networking_config_service_factory.h",
        "api/socket/app_firewall_hole_manager.cc",
        "api/socket/app_firewall_hole_manager.h",
        "api/vpn_provider/vpn_provider_api.cc",
        "api/vpn_provider/vpn_provider_api.h",
        "api/vpn_provider/vpn_service.cc",
        "api/vpn_provider/vpn_service.h",
        "api/vpn_provider/vpn_service_factory.h",
        "api/webcam_private/v4l2_webcam.cc",
        "api/webcam_private/v4l2_webcam.h",
        "api/webcam_private/visca_webcam.cc",
        "api/webcam_private/visca_webcam.h",
        "api/webcam_private/webcam.cc",
        "api/webcam_private/webcam.h",
        "api/webcam_private/webcam_private_api.h",
        "api/webcam_private/webcam_private_api_chromeos.cc",
      ]
    } else {
      sources += [
        "api/audio/audio_service.cc",
        "api/document_scan/document_scan_interface_nonchromeos.cc",
      ]

      if (is_linux) {
        if (use_dbus) {
          deps += [ "//dbus" ]
        }
        sources += [
          "api/networking_private/network_config_dbus_constants_linux.cc",
          "api/networking_private/network_config_dbus_constants_linux.h",
          "api/networking_private/networking_private_event_router_nonchromeos.cc",
          "api/networking_private/networking_private_linux.cc",
          "api/networking_private/networking_private_linux.h",
        ]
      } else {
        if (is_win || is_mac) {
          sources += [
            "api/networking_private/networking_private_event_router_nonchromeos.cc",
            "api/networking_private/networking_private_service_client.cc",
            "api/networking_private/networking_private_service_client.h",
          ]
          deps += [ "//components/wifi" ]
        }
      }
      if (proprietary_codecs && enable_wifi_display) {
        wifi_display_sources = [
          "api/display_source/wifi_display/wifi_display_media_service_impl.cc",
          "api/display_source/wifi_display/wifi_display_media_service_impl.h",
          "api/display_source/wifi_display/wifi_display_session_service_impl.cc",
          "api/display_source/wifi_display/wifi_display_session_service_impl.h",
        ]
        sources += wifi_display_sources
      }
    }
  }
}

source_set("browser_tests") {
  testonly = true
  sources = [
    "api/audio/audio_apitest.cc",
    "api/bluetooth_socket/bluetooth_socket_apitest.cc",
    "api/display_source/display_source_apitest.cc",
    "api/display_source/display_source_apitestbase.cc",
    "api/display_source/display_source_apitestbase.h",
    "api/dns/dns_apitest.cc",
    "api/hid/hid_apitest.cc",
    "api/printer_provider/printer_provider_apitest.cc",
    "api/socket/socket_apitest.cc",
    "api/sockets_tcp/sockets_tcp_apitest.cc",
    "api/sockets_tcp_server/sockets_tcp_server_apitest.cc",
    "api/sockets_udp/sockets_udp_apitest.cc",
    "api/system_cpu/system_cpu_apitest.cc",
    "api/system_display/system_display_apitest.cc",
    "api/system_memory/system_memory_apitest.cc",
    "api/system_network/system_network_apitest.cc",
    "api/system_storage/storage_api_test_util.cc",
    "api/system_storage/storage_api_test_util.h",
    "api/system_storage/system_storage_apitest.cc",
    "api/system_storage/system_storage_eject_apitest.cc",
    "api/usb/usb_apitest.cc",
    "guest_view/app_view/app_view_apitest.cc",
    "guest_view/web_view/web_view_apitest.cc",
    "guest_view/web_view/web_view_apitest.h",
    "guest_view/web_view/web_view_media_access_apitest.cc",
  ]

  defines = [ "HAS_OUT_OF_PROC_TEST_RUNNER" ]

  deps = [
    ":browser",
    "//base",
    "//components/guest_view/browser:test_support",
    "//components/storage_monitor:test_support",
    "//content/test:test_support",
    "//device/bluetooth:mocks",
    "//device/core:mocks",
    "//device/hid:mocks",
    "//device/usb:test_support",
    "//extensions:test_support",
    "//extensions/common",
    "//extensions/common/api",
    "//extensions/shell:app_shell_lib",
    "//extensions/shell:browser_tests",
    "//net:test_support",
  ]

  if (is_mac) {
    # Needed for App Shell.app's Helper.
    deps += [ "//extensions/shell:app_shell" ]
  }
  if (is_chromeos) {
    deps += [ "//chromeos" ]
  }
}

source_set("unit_tests") {
  testonly = true
  sources = [
    "api/alarms/alarms_api_unittest.cc",
    "api/api_resource_manager_unittest.cc",
    "api/bluetooth/bluetooth_event_router_unittest.cc",
    "api/cast_channel/cast_auth_util_unittest.cc",
    "api/cast_channel/cast_channel_api_unittest.cc",
    "api/cast_channel/cast_framer_unittest.cc",
    "api/cast_channel/cast_socket_unittest.cc",
    "api/cast_channel/cast_transport_unittest.cc",
    "api/cast_channel/keep_alive_delegate_unittest.cc",
    "api/cast_channel/logger_unittest.cc",
    "api/declarative/declarative_rule_unittest.cc",
    "api/declarative/deduping_factory_unittest.cc",
    "api/declarative/rules_registry_unittest.cc",
    "api/declarative_webrequest/webrequest_condition_attribute_unittest.cc",
    "api/declarative_webrequest/webrequest_condition_unittest.cc",
    "api/device_permissions_prompt_unittest.cc",
    "api/document_scan/document_scan_api_unittest.cc",
    "api/document_scan/document_scan_interface_chromeos_unittest.cc",
    "api/document_scan/mock_document_scan_interface.cc",
    "api/idle/idle_api_unittest.cc",
    "api/mime_handler_private/mime_handler_private_unittest.cc",
    "api/networking_config/networking_config_service_chromeos_unittest.cc",
    "api/power/power_api_unittest.cc",
    "api/runtime/restart_after_delay_api_unittest.cc",
    "api/sockets_tcp/sockets_tcp_api_unittest.cc",
    "api/sockets_udp/sockets_udp_api_unittest.cc",
    "api/storage/settings_quota_unittest.cc",
    "api/storage/storage_api_unittest.cc",
    "api/storage/storage_frontend_unittest.cc",
    "api/web_request/form_data_parser_unittest.cc",
    "api/web_request/upload_data_presenter_unittest.cc",
    "api/web_request/web_request_time_tracker_unittest.cc",
    "app_window/app_window_geometry_cache_unittest.cc",
    "computed_hashes_unittest.cc",
    "content_hash_tree_unittest.cc",
    "error_map_unittest.cc",
    "event_listener_map_unittest.cc",
    "event_router_unittest.cc",
    "extension_api_frame_id_map_unittest.cc",
    "extension_icon_image_unittest.cc",
    "extension_pref_value_map_unittest.cc",
    "extension_registry_unittest.cc",
    "extension_throttle_simulation_unittest.cc",
    "extension_throttle_test_support.cc",
    "extension_throttle_test_support.h",
    "extension_throttle_unittest.cc",
    "file_highlighter_unittest.cc",
    "file_reader_unittest.cc",
    "image_loader_unittest.cc",
    "info_map_unittest.cc",
    "lazy_background_task_queue_unittest.cc",
    "load_monitoring_extension_host_queue_unittest.cc",
    "management_policy_unittest.cc",
    "mojo/keep_alive_impl_unittest.cc",
    "mojo/stash_backend_unittest.cc",
    "process_manager_unittest.cc",
    "process_map_unittest.cc",
    "quota_service_unittest.cc",
    "runtime_data_unittest.cc",
    "sandboxed_unpacker_unittest.cc",
    "updater/update_service_unittest.cc",
    "value_store/leveldb_scoped_database_unittest.cc",
    "value_store/leveldb_value_store_unittest.cc",
    "value_store/testing_value_store_unittest.cc",
    "value_store/value_store_change_unittest.cc",
    "value_store/value_store_frontend_unittest.cc",
    "value_store/value_store_unittest.cc",
    "value_store/value_store_unittest.h",
    "verified_contents_unittest.cc",
    "warning_service_unittest.cc",
  ]

  deps = [
    ":browser",
    "//base",
    "//base/test:test_support",
    "//components/cast_certificate:test_support",
    "//components/crx_file",
    "//components/keyed_service/content",
    "//components/pref_registry:test_support",
    "//components/prefs:test_support",
    "//components/update_client",
    "//components/url_matcher",
    "//components/user_prefs",
    "//content/test:test_support",
    "//device/bluetooth:mocks",
    "//device/power_save_blocker",
    "//extensions:extensions_browser_resources",
    "//extensions:test_support",
    "//extensions/common",
    "//extensions/common/api",
    "//ipc:test_support",
    "//net:test_support",
    "//third_party/leveldatabase",
    "//third_party/zlib:zip",
  ]

  if (is_chromeos) {
    sources += [ "api/webcam_private/visca_webcam_unittest.cc" ]
    deps += [ "//chromeos:test_support" ]
  }
}
