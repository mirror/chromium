{
  "comments": [
    {
      "key": {
        "uuid": "c4170da4_9848934e",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T01:32:27Z",
      "side": 1,
      "message": "This method doesn\u0027t seem very useful. Its single call could be replaced directly by `{guid, item.second}`.",
      "range": {
        "startLine": 22,
        "startChar": 35,
        "endLine": 22,
        "endChar": 51
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7922f8d5_fb88f672",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c4170da4_9848934e",
      "range": {
        "startLine": 22,
        "startChar": 35,
        "endLine": 22,
        "endChar": 51
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f444a7de_402e730c",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "Do we want to limit this query with download_initiation_attempts \u003c\u003d kMaxAttempts?",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18011c89_0041ddba",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-15T23:47:06Z",
      "side": 1,
      "message": "That should be done in the reconciler, since nothing should get into RECEIVED_BUNDLE with too many attempts.",
      "parentUuid": "f444a7de_402e730c",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52e163be_13c7abba",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "I think tasks should be cleaned up or state should be advanced before that happens... I can add such code in the follow up patch, where selection is much more conscious... we may also be changing the sort order between now and then.",
      "parentUuid": "18011c89_0041ddba",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a64a766f_ead0fdd1",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T17:44:06Z",
      "side": 1,
      "message": "Just to make sure this is clear: this task\u0027s behavior shouldn\u0027t be affected based on the attempts counter. A to-be-created reconciler task will take care of that.",
      "parentUuid": "52e163be_13c7abba",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8bb00fb2_416bad89",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T01:32:27Z",
      "side": 1,
      "message": "Note to all: We need to discuss when the freshness date should be updated. It\u0027s not as simple as resetting it here. Let\u0027s discuss tomorrow.",
      "range": {
        "startLine": 49,
        "startChar": 7,
        "endLine": 49,
        "endChar": 13
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be0c0946_1ba06059",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Since I am not changing it here, I am not sure how exactly to proceed. Let\u0027s discuss tomorrow.",
      "parentUuid": "8bb00fb2_416bad89",
      "range": {
        "startLine": 49,
        "startChar": 7,
        "endLine": 49,
        "endChar": 13
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37ecc1e9_e4d933b5",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T17:44:06Z",
      "side": 1,
      "message": "As discussed: update freshness date only if current attempt counter equals zero.",
      "parentUuid": "be0c0946_1ba06059",
      "range": {
        "startLine": 49,
        "startChar": 7,
        "endLine": 49,
        "endChar": 13
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc32b593_43a754ec",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T19:48:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "37ecc1e9_e4d933b5",
      "range": {
        "startLine": 49,
        "startChar": 7,
        "endLine": 49,
        "endChar": 13
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79080769_5447eb8a",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "We can bait out earlier if |ready_items| is empty.",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c3deaea_933574c6",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "79080769_5447eb8a",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdc6ecd5_2e317604",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 75,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "This means that we\u0027re going to update guid each time when we ask the download service to retry the download. If so, we need to update the comment for this in PrefetchItem.\n\nAlso, guid is only valid in the sense of download.",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a819b9a5_a7cc48e8",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 75,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Good catch, but now that I think about it, will it be OK to request the same file with the same GUID? Are we sure that Downloads won\u0027t just tell us that it has been tried and failed?",
      "parentUuid": "cdc6ecd5_2e317604",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "811a16e5_01342752",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 75,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T17:44:06Z",
      "side": 1,
      "message": "Good catch and questioning! Sounds like ideally we would have a test verifying that multiple, non-concurrent download requests are allowed to reused the same GUID (or the opposite). Not for this patch though...",
      "parentUuid": "a819b9a5_a7cc48e8",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99f7e18f_b39ff264",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 75,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T19:48:09Z",
      "side": 1,
      "message": "I added a comment that we are updating the GUID on purpose.",
      "parentUuid": "811a16e5_01342752",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae713b9a_102c9e9c",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 85,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-08-15T23:47:06Z",
      "side": 1,
      "message": "nit: blank line after }",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a73d233_94f7e8fd",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.cc",
        "patchSetId": 3
      },
      "lineNbr": 85,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae713b9a_102c9e9c",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a1219b44_d48510b9",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T01:32:27Z",
      "side": 1,
      "message": "nit: for entries that already received the bundle information.",
      "range": {
        "startLine": 20,
        "startChar": 43,
        "endLine": 21,
        "endChar": 23
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a971022a_549a6776",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a1219b44_d48510b9",
      "range": {
        "startLine": 20,
        "startChar": 43,
        "endLine": 21,
        "endChar": 23
      },
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "838af8d7_baa46118",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "This can be moved into private section.",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31f85e4d_8f0aafcf",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Don\u0027t think so. See below.",
      "parentUuid": "838af8d7_baa46118",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b24deca8_a828297c",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "ditto",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6eef0a57_f66c4af1",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Can\u0027t do it, because then I would not be able to use it in the XXXSync method as a result. Therefore the above has to be like that too.",
      "parentUuid": "b24deca8_a828297c",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f2303a8_a8b0507a",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T17:44:06Z",
      "side": 1,
      "message": "You should be able to if you only forward declare ItemsToDownload here.",
      "parentUuid": "6eef0a57_f66c4af1",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e459be95_06093d26",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "empty line",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e08d392_9ec0d607",
        "filename": "components/offline_pages/core/prefetch/download_archives_task.h",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e459be95_06093d26",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0d23b42_384f3fae",
        "filename": "components/offline_pages/core/prefetch/download_archives_task_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 116,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "Do we also want to validate guid and download_initiation_attempts?",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75e2c65e_8570236d",
        "filename": "components/offline_pages/core/prefetch/download_archives_task_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 116,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f0d23b42_384f3fae",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "845ae9e9_9b8d18ac",
        "filename": "components/offline_pages/core/prefetch/download_archives_task_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 116,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T17:44:06Z",
      "side": 1,
      "message": "nit: Could also be reflected in the next test. Could event initialize an entry\u0027s counter to non-zero.",
      "parentUuid": "75e2c65e_8570236d",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "592eac4b_bbe7faf8",
        "filename": "components/offline_pages/core/prefetch/download_archives_task_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1115922
      },
      "writtenOn": "2017-08-15T23:41:55Z",
      "side": 1,
      "message": "This should be ASSERT_TRUE.",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7e8068b_23959fbf",
        "filename": "components/offline_pages/core/prefetch/download_archives_task_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1002911
      },
      "writtenOn": "2017-08-16T01:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "592eac4b_bbe7faf8",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e662492_a01f544b",
        "filename": "components/offline_pages/core/prefetch/download_archives_task_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-08-16T17:44:06Z",
      "side": 1,
      "message": "Next test also needs this update.",
      "parentUuid": "d7e8068b_23959fbf",
      "revId": "197e078000dd2a727c3d971f85c6e09664311732",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}