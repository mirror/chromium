{
  "comments": [
    {
      "key": {
        "uuid": "4a66e35c_48a98eaa",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-15T13:53:14Z",
      "side": 1,
      "message": "nit: needs_full_damage\n\nas we\u0027re not drawing, just creating a frame that will be submitting to the display compositor",
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0024718a_a30b27da",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 1127931
      },
      "writtenOn": "2017-08-15T22:11:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a66e35c_48a98eaa",
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "743b5ab7_37b24225",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 422,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-15T13:53:14Z",
      "side": 1,
      "message": "nit: please move the state checks into the if scope below. something like\n\nbool needs_full_damage \u003d frame_type \u003d\u003d FRAME_TYPE_RECREATED_RESOURCES;\n\nif (needs_commit) {\n  needs_commit_surface_hierarchy_ \u003d false;\n  \n  if (pending_state_.buffer_scale !\u003d state_.buffer_scale ||\n      ...) {\n    needs_full_damage \u003d true;\n  }",
      "range": {
        "startLine": 422,
        "startChar": 7,
        "endLine": 422,
        "endChar": 19
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd9b9d0c_06c1ae80",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 422,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-15T13:53:14Z",
      "side": 1,
      "message": "nit: use \"new !\u003d old\" (e.g. pending_state_.crop !\u003d state_.crop instead of state_.crop !\u003d pending_state_.crop) as I think that has a minor advantage for readability",
      "range": {
        "startLine": 422,
        "startChar": 24,
        "endLine": 422,
        "endChar": 74
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70086a49_21d28505",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 422,
      "author": {
        "id": 1127931
      },
      "writtenOn": "2017-08-15T22:11:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fd9b9d0c_06c1ae80",
      "range": {
        "startLine": 422,
        "startChar": 24,
        "endLine": 422,
        "endChar": 74
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e691949e_3e793843",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 422,
      "author": {
        "id": 1127931
      },
      "writtenOn": "2017-08-15T22:11:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "743b5ab7_37b24225",
      "range": {
        "startLine": 422,
        "startChar": 7,
        "endLine": 422,
        "endChar": 19
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "49bc6ac0_f01554f0",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 426,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-15T13:53:14Z",
      "side": 1,
      "message": "what about opaque_region and only_visible_on_secure_output? they can effect output..",
      "range": {
        "startLine": 422,
        "startChar": 24,
        "endLine": 426,
        "endChar": 60
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d1217cd_78b16a73",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 426,
      "author": {
        "id": 1127931
      },
      "writtenOn": "2017-08-15T22:11:06Z",
      "side": 1,
      "message": "I didn\u0027t think either would affect what part of the output was damaged though. Am I wrong about that?\n\nOr are you saying that we need to set a non-empty damage rectangle if those change, because the compositor might decide to entirely ignore this frame if the damage is empty (and so it would not do the right thing with the secure output flag). I don\u0027t have enough of an understanding of cc/viz to know if this is true.\n\nI\u0027ve added those two in, but I\u0027m happy to remove them if my original instincts were correct. Worst case it causes some extra compositing work when it the output is otherwise not changed.",
      "parentUuid": "49bc6ac0_f01554f0",
      "range": {
        "startLine": 422,
        "startChar": 24,
        "endLine": 426,
        "endChar": 60
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4804835_51d8b6f4",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 426,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-15T22:29:34Z",
      "side": 1,
      "message": "opaque_region is questionable as it\u0027s a hint from the client and while it can result in the output changing it shouldn\u0027t if used correctly by the client. I think it\u0027s best to have this result in damage and not expect the client to use it correctly.\n\nonly_visible_on_secure_output can definitely result in a change in output as it might require us to draw black instead of the contents or the other way around.",
      "parentUuid": "6d1217cd_78b16a73",
      "range": {
        "startLine": 422,
        "startChar": 24,
        "endLine": 426,
        "endChar": 60
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c7659c8_6b9cfcd6",
        "filename": "components/exo/surface.cc",
        "patchSetId": 2
      },
      "lineNbr": 657,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-15T13:53:14Z",
      "side": 1,
      "message": "nit: needs_full_damage",
      "range": {
        "startLine": 657,
        "startChar": 41,
        "endLine": 657,
        "endChar": 60
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13af9c7e_0affebef",
        "filename": "components/exo/surface.h",
        "patchSetId": 2
      },
      "lineNbr": 268,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-15T13:53:14Z",
      "side": 1,
      "message": "nit: needs_full_damage",
      "range": {
        "startLine": 268,
        "startChar": 34,
        "endLine": 268,
        "endChar": 53
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb12873f_dfaf3490",
        "filename": "components/exo/surface.h",
        "patchSetId": 2
      },
      "lineNbr": 268,
      "author": {
        "id": 1127931
      },
      "writtenOn": "2017-08-15T22:11:06Z",
      "side": 1,
      "message": "Renamed everywhere",
      "parentUuid": "13af9c7e_0affebef",
      "range": {
        "startLine": 268,
        "startChar": 34,
        "endLine": 268,
        "endChar": 53
      },
      "revId": "e1fde46d1528dc0ea8eeccded51731e811626b02",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}