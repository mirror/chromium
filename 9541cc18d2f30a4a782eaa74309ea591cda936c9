{
  "comments": [
    {
      "key": {
        "uuid": "9965e372_6a282925",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-07T23:25:09Z",
      "side": 1,
      "message": "In what form does the multi-instance bits complicate things? Because of different Activity instances or because of multiple Windows? If it is the former than it is not a multi-instance problem but an overall ChromeActivity related complication, right?",
      "range": {
        "startLine": 21,
        "startChar": 31,
        "endLine": 21,
        "endChar": 39
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62713e97_4c1929e4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "This is a strong reference to the Context.  I think we don\u0027t want to 100% rely on a proper destroy() call to clean this up.  Is there a map that holds weak reference keys?  I think so?  Look at the thumbnail stuff or something.",
      "range": {
        "startLine": 25,
        "startChar": 23,
        "endLine": 25,
        "endChar": 30
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "502c89f9_65d847dd",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-07T23:25:09Z",
      "side": 1,
      "message": "For an outsider using this public getter, it will be tempting and straightforward to just do ContentUtils.getApplicationContext() here. Does that worry us? Are the multiple keys above Activities in fact? Note that each tab even will have a different Context depending on the ChromeActivity they sit in (because their Application Context is a ThemedContext with the theme depending on the ChromeActivity).\n\nI guess my overall worry is reading for the first time, it is not clear to me what type of Context is OK to use here.",
      "range": {
        "startLine": 44,
        "startChar": 64,
        "endLine": 44,
        "endChar": 65
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3214d702_1c9c0e60",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "Should this ever be set more than once?",
      "range": {
        "startLine": 56,
        "startChar": 8,
        "endLine": 56,
        "endChar": 27
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78d06070_9b12cd63",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "assert mUpdateHost !\u003d null?",
      "range": {
        "startLine": 63,
        "startChar": 71,
        "endLine": 63,
        "endChar": 72
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b39d59bd_e62cc2fd",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "What else sets this to true?",
      "range": {
        "startLine": 75,
        "startChar": 12,
        "endLine": 75,
        "endChar": 47
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a273bac_18d957b2",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "if (!mAnimators.empty()) return; ?",
      "range": {
        "startLine": 85,
        "startChar": 12,
        "endLine": 85,
        "endChar": 34
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "839eb9db_dc7ce397",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "Would it be more gc friendly to have a cached list you always use?  You can just copy the elements into it and clear it after.  Would avoid the allocation, although I\u0027m sure we do a ton of those each frame anyway.",
      "range": {
        "startLine": 87,
        "startChar": 46,
        "endLine": 87,
        "endChar": 57
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "986abb40_bb882819",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "Makes an allocator IIRC?  Might not matter though.",
      "range": {
        "startLine": 91,
        "startChar": 13,
        "endLine": 91,
        "endChar": 61
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9a7f5f4_00c160a7",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 99,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "if (!mAnimators.empty()) mUpdateHost.requestUpdate()?",
      "range": {
        "startLine": 99,
        "startChar": 8,
        "endLine": 99,
        "endChar": 36
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1349b41_65e4da1c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimationHandler.java",
        "patchSetId": 6
      },
      "lineNbr": 115,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "Count?",
      "range": {
        "startLine": 115,
        "startChar": 33,
        "endLine": 115,
        "endChar": 34
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2eb4914_5f9c81d5",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 76,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "Do we need all of these?  It runs the risk of forgetting to update one on state changes.  Could we have a state machine or infer some from others?",
      "range": {
        "startLine": 60,
        "startChar": 4,
        "endLine": 76,
        "endChar": 30
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35a87de5_9e66cda2",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 93,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "I think we already have some static interpolators?  If not put this in another class IMO.  InterpolatorFactory?",
      "range": {
        "startLine": 84,
        "startChar": 4,
        "endLine": 93,
        "endChar": 5
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f1b408d_4fa04634",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 96,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-07T23:25:09Z",
      "side": 1,
      "message": "do we wanna consider this extending AnimatorListener or the Adaptor? Not sure if it is needed or not but wanted to point it out since you are extending Animator.",
      "range": {
        "startLine": 96,
        "startChar": 21,
        "endLine": 96,
        "endChar": 43
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "257cc77c_f6658809",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 134,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "Maybe try:\n\nlong animationTimeMs \u003d MathUtils.min(mTimeSinceStartMs - mStartDelayMs, mDurationMs);\nif (time \u003c 0) return;\n\nmIsRunning \u003d true;\n...",
      "range": {
        "startLine": 129,
        "startChar": 8,
        "endLine": 134,
        "endChar": 9
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe0e55ab_74225551",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 140,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "Can this be null?  If it\u0027s null you just have a LinearInterpolator right?",
      "range": {
        "startLine": 140,
        "startChar": 12,
        "endLine": 140,
        "endChar": 29
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "060c6701_43035dda",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 174,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-07T23:25:09Z",
      "side": 1,
      "message": "I believe this should be AnimatorUpdateListener in the param",
      "range": {
        "startLine": 174,
        "startChar": 37,
        "endLine": 174,
        "endChar": 53
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42e5acba_87182599",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 206,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-07T23:25:09Z",
      "side": 1,
      "message": "Going back to the above question here, if we are OK with AnimatorListeners listening in on this, why not just extend it with the new call you are adding and have a single list of listeners?",
      "range": {
        "startLine": 206,
        "startChar": 28,
        "endLine": 206,
        "endChar": 44
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "762a9bca_211c4a53",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 226,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-07T23:25:09Z",
      "side": 1,
      "message": "I kinda feel like these will be hard to keep track of as well. Even if we need the same interface that exposes these bits separately (since Animator has them), I would use a state machine inside to make sense of them internally.",
      "range": {
        "startLine": 226,
        "startChar": 8,
        "endLine": 226,
        "endChar": 18
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b9edfec_b2f3a96b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimator.java",
        "patchSetId": 6
      },
      "lineNbr": 256,
      "author": {
        "id": 1107754
      },
      "writtenOn": "2017-09-07T18:29:31Z",
      "side": 1,
      "message": "can we be running but not started or cancelled?  Also what if mHasEnded \u003d true?",
      "range": {
        "startLine": 256,
        "startChar": 8,
        "endLine": 256,
        "endChar": 62
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43e0040d_6671cde6",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/compositor/animation/CompositorAnimatorTest.java",
        "patchSetId": 6
      },
      "lineNbr": 38,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-07T23:25:09Z",
      "side": 1,
      "message": "just to avoid going insane later, I would add a test for the multiwindow stuff here with the necessary annotations and check the keying logic (no need to check the actual animation running).",
      "range": {
        "startLine": 38,
        "startChar": 32,
        "endLine": 38,
        "endChar": 33
      },
      "revId": "9541cc18d2f30a4a782eaa74309ea591cda936c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}