{
  "comments": [
    {
      "key": {
        "uuid": "dffc9718_702b019e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 9,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Nit: please remove the repeated title.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 6
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49ab51af_08eebae8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 9,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Nit: remove the repeated title.",
      "range": {
        "startLine": 9,
        "startChar": 23,
        "endLine": 9,
        "endChar": 24
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1eac389_362a0ddc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 9,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dffc9718_702b019e",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 6
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "533df62d_1f25613a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Please have a bug for this CL, it\u0027s nowhere near trivial enough to not have a bug attached.",
      "range": {
        "startLine": 21,
        "startChar": 4,
        "endLine": 21,
        "endChar": 0
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7d611ae_f16b9777",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "533df62d_1f25613a",
      "range": {
        "startLine": 21,
        "startChar": 4,
        "endLine": 21,
        "endChar": 0
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b2eb38f_77e545bb",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/metrics/WebApkUma.java",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Can this metric be removed if we\u0027re not forcing updates any more? Doesn\u0027t seem like it\u0027ll be meaningful any more since it\u0027s always called with a value of 1.",
      "range": {
        "startLine": 87,
        "startChar": 23,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba300984_d823d33c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/metrics/WebApkUma.java",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "I think that it is interesting to compare how often a WebAPK update is scheduled vs how often a WebAPK update is performed. The \"scheduling\" and the \"updating\" occur at least 1 hour apart.",
      "parentUuid": "4b2eb38f_77e545bb",
      "range": {
        "startLine": 87,
        "startChar": 23,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "467ab08d_3a23de18",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateManager.java",
        "patchSetId": 6
      },
      "lineNbr": 168,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Nit: can this be called in storeWebApkUpdateRequestToFile, so that method can take one fewer argument?",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 84
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06b23802_6a955284",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateManager.java",
        "patchSetId": 6
      },
      "lineNbr": 168,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "The reason that storeWebApkUpdateRequestToFile() exists is so that it can be overwritten in JUnit tests. I would rather not make storeWebApkUpdateRequestToFile() more complicated",
      "parentUuid": "467ab08d_3a23de18",
      "range": {
        "startLine": 168,
        "startChar": 8,
        "endLine": 168,
        "endChar": 84
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6a16104_66f849b8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateManager.java",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Can this be called \"updateInBackground\" or \"updateFromBackground\" or something else that indicates that the WebAPK should not be running? updateNow makes it sound like something that can be forced to run.",
      "range": {
        "startLine": 191,
        "startChar": 16,
        "endLine": 191,
        "endChar": 25
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d703a9a_601e2f46",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateManager.java",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "Renamed method to updateWhileNotRunning()",
      "parentUuid": "b6a16104_66f849b8",
      "range": {
        "startLine": 191,
        "startChar": 16,
        "endLine": 191,
        "endChar": 25
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc726886_d5d9068c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateManager.java",
        "patchSetId": 6
      },
      "lineNbr": 192,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Is this necessary?",
      "range": {
        "startLine": 192,
        "startChar": 5,
        "endLine": 192,
        "endChar": 33
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05ec8069_e5661f13",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateManager.java",
        "patchSetId": 6
      },
      "lineNbr": 192,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "I am generally against Log statements. However, this log statement is super useful for testing updates (in debug mode). My understanding is that Log.v() is stripped in release.",
      "parentUuid": "bc726886_d5d9068c",
      "range": {
        "startLine": 192,
        "startChar": 5,
        "endLine": 192,
        "endChar": 33
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f10823a9_6eec619e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateTask.java",
        "patchSetId": 6
      },
      "lineNbr": 45,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "This is kind of wasteful: \n 1. we loop over the storages, get the ids of all that have an update pending\n 2. we loop over the ids, fetch the object, and filter out those that aren\u0027t installed\n 3. we loop over the ids, fetch the object again, and filter out the ones that are running\n\nAnd we repeat that until we get nothing back.\n\nCan we just have one loop that does all three checks at this point?",
      "range": {
        "startLine": 45,
        "startChar": 32,
        "endLine": 45,
        "endChar": 69
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3823e23e_677c8784",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateTask.java",
        "patchSetId": 6
      },
      "lineNbr": 45,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "I have merged WebApkUpdateTask#findInstalledWebApksWithPendingUpdate() into WebappRegistry#findWebApksWithPendingUpdate().\n\nI can\u0027t merge the check for whether a WebAPK is running into WebappRegistry#findWebApksWithPendingUpdate() because I need to compute |mMoreToUpdate|.",
      "parentUuid": "f10823a9_6eec619e",
      "range": {
        "startLine": 45,
        "startChar": 32,
        "endLine": 45,
        "endChar": 69
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "536d1f76_24b8dc6a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateTask.java",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Can you inline this into the updateNow call?",
      "range": {
        "startLine": 63,
        "startChar": 17,
        "endLine": 63,
        "endChar": 33
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1369212c_308a91b6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkUpdateTask.java",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "536d1f76_24b8dc6a",
      "range": {
        "startLine": 63,
        "startChar": 17,
        "endLine": 63,
        "endChar": 33
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "854a23d7_89024445",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/webapps/WebApkUpdateManagerTest.java",
        "patchSetId": 6
      },
      "lineNbr": 504,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-10-19T03:58:00Z",
      "side": 1,
      "message": "Nit: remove the extra newline",
      "range": {
        "startLine": 504,
        "startChar": 11,
        "endLine": 504,
        "endChar": 17
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c13f9b0_b2b6aa5c",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/webapps/WebApkUpdateManagerTest.java",
        "patchSetId": 6
      },
      "lineNbr": 504,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-22T22:48:59Z",
      "side": 1,
      "message": "Which new line are you referring to. Line 503 or line 505 (or both)?\n\nI think that separating this comment from the one below is useful because it indicates what we are simulating occurred, not the expectations. We don\u0027t have an assert to check whether WebApkUpdateCallback#onResultFromNative() is called",
      "parentUuid": "854a23d7_89024445",
      "range": {
        "startLine": 504,
        "startChar": 11,
        "endLine": 504,
        "endChar": 17
      },
      "revId": "f1f9fbb77a9c30c4e9e9062ee30b55c6cff74d6d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}