{
  "comments": [
    {
      "key": {
        "uuid": "b373691b_ce51213c",
        "filename": "chrome/browser/search/local_ntp_source.cc",
        "patchSetId": 5
      },
      "lineNbr": 302,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-01T11:29:41Z",
      "side": 1,
      "message": "Hmm. Is there any guarantee that the different resources we\u0027re serving come from the same server result?\n\n(If not, I guess this problem existed before)",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1bbf1c0b_944e1a58",
        "filename": "chrome/browser/search/local_ntp_source.cc",
        "patchSetId": 5
      },
      "lineNbr": 302,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-01T11:46:24Z",
      "side": 1,
      "message": "No, there isn\u0027t, and yes, it\u0027s a pre-existing problem.\nI have some vague plans to fix this by serving all the things through a single json file, but I haven\u0027t gotten around to it yet.",
      "parentUuid": "b373691b_ce51213c",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c5bae289_72a85897",
        "filename": "chrome/browser/search/local_ntp_source.cc",
        "patchSetId": 5
      },
      "lineNbr": 439,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-01T11:29:41Z",
      "side": 1,
      "message": "If I understand correctly, if the user is online, and opens an NTP, they get a OGB. If they go offline, and open another NTP, they get the same, cached OGB.\n\nIs this intended? It seems like it isn\u0027t according to the CL description.",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a07c6963_73dc2ee3",
        "filename": "chrome/browser/search/local_ntp_source.cc",
        "patchSetId": 5
      },
      "lineNbr": 439,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-01T11:46:24Z",
      "side": 1,
      "message": "Yeah, that\u0027s intended, even though the CL description didn\u0027t really capture it :)  Updated.\n\nDo you have concerns with that? A possibly-slightly-outdated OGB seems better than no OGB at all. (In practice, changes are rare, and they don\u0027t always propagate fast enough for the next request anyway, so.. eh.)",
      "parentUuid": "c5bae289_72a85897",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f753ae68_343dfcc1",
        "filename": "chrome/browser/search/local_ntp_source.cc",
        "patchSetId": 5
      },
      "lineNbr": 439,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-01T12:16:42Z",
      "side": 1,
      "message": "I don\u0027t have any concerns about it, but I also didn\u0027t have any concerns about the old way. I don\u0027t recall any explanation (in the CL description or the code) about why it wouldn\u0027t be safe to use the cached version, so that might be useful.\n\nThe only thing that jumps out at me is that we are relying on the HTTP cache for the user\u0027s icon (not the notification icon: that\u0027s inline-svg). If we don\u0027t have it, we apparently show a white (invisible) circle there, which isn\u0027t great.\n\nI\u0027m not sure how much effort it\u0027s worth putting into getting the OGB to work offline, but it might be worth filing a feature request against OGB folks to make sure that it displays \"acceptably\" in the absence of resources that aren\u0027t included in the payload: e.g. a gray circle when the icon is missing.",
      "parentUuid": "a07c6963_73dc2ee3",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe77f2bd_0c093d7b",
        "filename": "chrome/browser/search/local_ntp_source.cc",
        "patchSetId": 5
      },
      "lineNbr": 439,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-01T12:26:29Z",
      "side": 1,
      "message": "Well, \"not safe\" is kinda too strong. One example that breaks with caching is reordering the icons in the app drawer: With the previous code, the next NTP after a reordering would show the old order again, and only the second one would have the new ordering. In principle, the same applies to, say, changes to the profile picture, but in my experience those take a few minutes to propagate anyway.\n\nYes, the offline state relies on the HTTP cache and things will break if some resources are missing. But that\u0027s no worse than you could get on a flaky connection, so I think that\u0027s okay.\n\nProper offline support is a good feature request, I\u0027ll file a bug so we don\u0027t forget.",
      "parentUuid": "f753ae68_343dfcc1",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8a7c44fc_53e5ea79",
        "filename": "chrome/browser/search/one_google_bar/one_google_bar_service.cc",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-01T11:29:41Z",
      "side": 1,
      "message": "errors",
      "range": {
        "startLine": 83,
        "startChar": 26,
        "endLine": 83,
        "endChar": 31
      },
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "220321b7_925e2a25",
        "filename": "chrome/browser/search/one_google_bar/one_google_bar_service.cc",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-01T11:46:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8a7c44fc_53e5ea79",
      "range": {
        "startLine": 83,
        "startChar": 26,
        "endLine": 83,
        "endChar": 31
      },
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4083dc8e_ed771b9f",
        "filename": "chrome/browser/search/one_google_bar/one_google_bar_service.cc",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-01T11:29:41Z",
      "side": 1,
      "message": "SetOneGoogleBarData() is simpler and would be a good candidate for inlining now; it\u0027s not obvious reading this method that both branches call NotifyObservers().",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a525889_b08ef701",
        "filename": "chrome/browser/search/one_google_bar/one_google_bar_service.cc",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-01T11:46:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4083dc8e_ed771b9f",
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a367a50a_f39f6503",
        "filename": "chrome/browser/search/one_google_bar/one_google_bar_service_observer.h",
        "patchSetId": 5
      },
      "lineNbr": 11,
      "author": {
        "id": 1150535
      },
      "writtenOn": "2017-08-01T11:29:41Z",
      "side": 1,
      "message": "Clarify \"updated\" re: successful vs. failed fetch?",
      "range": {
        "startLine": 11,
        "startChar": 41,
        "endLine": 11,
        "endChar": 48
      },
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e1a4721_7e38abfc",
        "filename": "chrome/browser/search/one_google_bar/one_google_bar_service_observer.h",
        "patchSetId": 5
      },
      "lineNbr": 11,
      "author": {
        "id": 1116059
      },
      "writtenOn": "2017-08-01T11:46:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a367a50a_f39f6503",
      "range": {
        "startLine": 11,
        "startChar": 41,
        "endLine": 11,
        "endChar": 48
      },
      "revId": "9ad07515f70af2b0c0026fb65c71a40298592e9c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}