{
  "comments": [
    {
      "key": {
        "uuid": "7a731ddd_48d684d8",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1002258
      },
      "writtenOn": "2018-01-15T04:05:59Z",
      "side": 1,
      "message": "Since we can\u0027t continue if \"compositionstart\" event handler removes frame\nand all call sites should check |IsActive()|, it is better to make this\nfunction to return |IsActive()| and mark |WARN_UNUSED_RESULT| to make\nsure we check IsActive() at every call sites.",
      "range": {
        "startLine": 62,
        "startChar": 5,
        "endLine": 62,
        "endChar": 34
      },
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db9d9bcb_c1c7287a",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2018-01-16T22:53:59Z",
      "side": 1,
      "message": "Updated",
      "parentUuid": "7a731ddd_48d684d8",
      "range": {
        "startLine": 62,
        "startChar": 5,
        "endLine": 62,
        "endChar": 34
      },
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5cd92d9_40c924fa",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 857,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2018-01-13T00:02:43Z",
      "side": 1,
      "message": "Note: the spec for compositionstart says:\n\nhttps://www.w3.org/TR/uievents/#event-type-compositionstart\n“Some implementations MAY populate the data attribute of the compositionstart event with the text currently selected in the document (for editing and replacement). Otherwise, the value of the data attribute MUST be the empty string.”\n\nFor SetComposition(), we set the data attribute as the selected text (if there is a selection), since we’re replacing the currently selected text with the new composition text. Here, I am setting the data attribute to the empty string, since the selected text has absolutely no bearing on what the composition ends up being (we use the composition_start and composition_end offsets and ignore the selection).",
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3483aca3_c450c2a4",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 857,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2018-01-13T02:28:34Z",
      "side": 1,
      "message": "Sounds reasonable.",
      "parentUuid": "d5cd92d9_40c924fa",
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15527040_470187e2",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 894,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2018-01-13T00:02:43Z",
      "side": 1,
      "message": "Should this be dispatched before or after composition_range_ is updated? The spec says:\n\nhttps://www.w3.org/TR/uievents/#event-type-compositionupdate\n“A user agent SHOULD dispatch this event during a composition session when a text composition system updates its active text passage with a new character, which is reflected in the string in data.\n\nIn text composition systems which keep the ongoing composition in sync with the input control, the compositionupdate event MUST be dispatched before the control is updated.”\n\n\nNote that SetCompositionFromExistingText() does not change the text of the “input control.”",
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d44d5b8f_588f79ff",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 894,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2018-01-13T02:28:34Z",
      "side": 1,
      "message": "The spec seems a little bit vague... Anyway, I think it should be here, so that the |data| string can reflect the active text passage update as required by the spec.\n\nOr, what does other browsers do for this case?",
      "parentUuid": "15527040_470187e2",
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a1e9913_7e1d202c",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 894,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2018-01-16T22:30:41Z",
      "side": 1,
      "message": "I tested Firefox (Gecko) and Dolphin (WebKit).\n\nIt appears that neither of these browsers fires compositionstart or compositionupdate events for SetCompositionWithText(). I\u0027m not sure if Firefox even updates the composition range properly (it doesn\u0027t draw the composition underline in this case, but editing seems to work fine).\n\nI guess it doesn\u0027t really matter whether we set composition_range_ before or after calling DispatchCompositionUpdateEvent() since JS doesn\u0027t have any way to access it (as far as I\u0027m aware). If we did have a JS API for this though, I think it would make the most sense for it to have access to the new range already.",
      "parentUuid": "d44d5b8f_588f79ff",
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97b91edd_fa4c35ff",
        "filename": "third_party/WebKit/Source/core/editing/ime/InputMethodController.cpp",
        "patchSetId": 1
      },
      "lineNbr": 894,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2018-01-17T01:19:38Z",
      "side": 1,
      "message": "Sounds reasonable.",
      "parentUuid": "1a1e9913_7e1d202c",
      "revId": "c0954983ef084b024d1d111dc2c774b40dca67ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}