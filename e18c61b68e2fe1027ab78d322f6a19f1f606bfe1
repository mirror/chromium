{
  "comments": [
    {
      "key": {
        "uuid": "ce6cf10a_c1bef762",
        "filename": "extensions/browser/api/networking_private/networking_private_chromeos.cc",
        "patchSetId": 2
      },
      "lineNbr": 683,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-08-02T16:59:07Z",
      "side": 1,
      "message": "I think this would be more clear as:\n\nif (require_pin) {\n  if (new_pin.empty()) {\n    failure_callback.Run(networking_private::kErrorInvalidPin);\n    return;\n  }\n  ...ChangePin(path, current_pin, new_pin, ...);\n} else {\n  ...RequirePin(path, false, ...);\n}",
      "revId": "e18c61b68e2fe1027ab78d322f6a19f1f606bfe1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "542d4706_a503a22b",
        "filename": "extensions/browser/api/networking_private/networking_private_chromeos.cc",
        "patchSetId": 2
      },
      "lineNbr": 683,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2017-08-02T18:13:41Z",
      "side": 1,
      "message": "If |require_pin| is true, and |new_pin| is empty, the code should call RequirePin(true) to enable SIM locking.",
      "parentUuid": "ce6cf10a_c1bef762",
      "revId": "e18c61b68e2fe1027ab78d322f6a19f1f606bfe1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb763962_aede0b83",
        "filename": "extensions/browser/api/networking_private/networking_private_chromeos.cc",
        "patchSetId": 2
      },
      "lineNbr": 683,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-08-02T22:07:19Z",
      "side": 1,
      "message": "OK, so let\u0027s make that explicit / more clear. set_new_pin only made sense with the old logic when we always called RequirePin().\n\nif (!require_pin || new_pin.empty()) {\n  // Set the RequirePin state.\n  ...RequirePin(...);\n} else {\n  // Change the pin. RequirePin must already have been set to true.\n  // TODO(benchan): Check that Cellular.SIMLockStatus.LockEnabled is true.\n  ...ChangePin(..., new_pin, ...);\n}",
      "parentUuid": "542d4706_a503a22b",
      "revId": "e18c61b68e2fe1027ab78d322f6a19f1f606bfe1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57af3f1b_835d08b3",
        "filename": "extensions/browser/api/networking_private/networking_private_chromeos.cc",
        "patchSetId": 2
      },
      "lineNbr": 683,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2017-08-02T22:24:11Z",
      "side": 1,
      "message": "I found it a bit confusing to say `if (!require_pin) RequirePin()`, so we should simply check `if (new_pin.empty())` with a DCHECK(require_pin) for the ChangePin case.  Still, it\u0027s probably better to break SetCellularSimState into two methods: SetCellularSimLocking() and ChangeCellularSimPin(), which we clean up in a follow-up CL. WDYT?",
      "parentUuid": "cb763962_aede0b83",
      "revId": "e18c61b68e2fe1027ab78d322f6a19f1f606bfe1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c97fa0e_1a894d87",
        "filename": "extensions/browser/api/networking_private/networking_private_chromeos.cc",
        "patchSetId": 2
      },
      "lineNbr": 683,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-08-03T17:55:54Z",
      "side": 1,
      "message": "Changing the API is probably more trouble than it\u0027s worth, and I think it\u0027s reasonable from a UI perspective. We already have \u0027requirePin must be true if newPin is specified\u0027 in networking_private.idl:\nhttps://cs.chromium.org/chromium/src/extensions/common/api/networking_private.idl?l\u003d197\n\nThat said, the new logic makes sense to me.",
      "parentUuid": "57af3f1b_835d08b3",
      "revId": "e18c61b68e2fe1027ab78d322f6a19f1f606bfe1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}