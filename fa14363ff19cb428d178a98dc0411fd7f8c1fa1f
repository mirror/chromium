{
  "comments": [
    {
      "key": {
        "uuid": "59bc7d49_5a8aa1be",
        "filename": "content/public/test/test_utils.cc",
        "patchSetId": 6
      },
      "lineNbr": 164,
      "author": {
        "id": 1001534
      },
      "writtenOn": "2018-01-28T22:51:50Z",
      "side": 1,
      "message": "I find it confusing that this method would have a different behavior if already in a RunLoop (as it blocks the underlying loop from making progress and it also doesn\u0027t wait).\n\nI guess it did before (the RunLoopUntilIdle below would, unintentionally, be a no-op when nested).\n\nI think we should allow nested runloops to run application tasks in tests. The side-effects are either finding re-entrancy bugs in tests (a good outcome), or it doesn\u0027t matter (a fine outcome that avoids devs wasting time).",
      "revId": "fa14363ff19cb428d178a98dc0411fd7f8c1fa1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac1954f6_60a8904c",
        "filename": "content/public/test/test_utils.cc",
        "patchSetId": 6
      },
      "lineNbr": 164,
      "author": {
        "id": 1003325
      },
      "writtenOn": "2018-01-29T17:02:34Z",
      "side": 1,
      "message": "Maybe we should go ahead and allow application tasks first. I was considering throwing the switch after this change, but it doesn\u0027t really make a difference if this goes first or the other one.",
      "parentUuid": "59bc7d49_5a8aa1be",
      "revId": "fa14363ff19cb428d178a98dc0411fd7f8c1fa1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "51174b2c_290e45cf",
        "filename": "content/public/test/test_utils.cc",
        "patchSetId": 6
      },
      "lineNbr": 164,
      "author": {
        "id": 1001534
      },
      "writtenOn": "2018-01-29T17:11:14Z",
      "side": 1,
      "message": "Yeah, let\u0027s do it. Allow nested first.",
      "parentUuid": "ac1954f6_60a8904c",
      "revId": "fa14363ff19cb428d178a98dc0411fd7f8c1fa1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b14e1ba_2755e53b",
        "filename": "content/public/test/test_utils.cc",
        "patchSetId": 6
      },
      "lineNbr": 164,
      "author": {
        "id": 1003325
      },
      "writtenOn": "2018-01-29T19:12:05Z",
      "side": 1,
      "message": "After discussing offline, we\u0027re going to hold off on this because of the semantic changes this introduces with regards to RunAllTaskUntilIdle.\n\nThere is general agreement that this would be better handled an \"control\" style task (tasks that control the behavior of the system and are reentrant safe), but those don\u0027t exist yet!\n\nThere is also general agreement that calling RunAllTasksUntilIdle while in a loop is an error, so perhaps the way to fix it is to have the CrOS tests work around this and then introduce a DCHCEK to disallow this behavior.",
      "parentUuid": "51174b2c_290e45cf",
      "revId": "fa14363ff19cb428d178a98dc0411fd7f8c1fa1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}