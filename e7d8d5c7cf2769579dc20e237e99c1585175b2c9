{
  "comments": [
    {
      "key": {
        "uuid": "6d9adf43_3c3b18fe",
        "filename": "content/renderer/render_view_impl.cc",
        "patchSetId": 10
      },
      "lineNbr": 2351,
      "author": {
        "id": 1125359
      },
      "writtenOn": "2018-02-01T02:53:11Z",
      "side": 1,
      "message": "Not sure I understand how SharedMemory works. But each process that calls mmap() should call munmap() to free the memory right?\nThis process has mapped the memory and the browser process when receiving the handle calls mmap again. Does this mean this process never munmaps?",
      "range": {
        "startLine": 2350,
        "startChar": 0,
        "endLine": 2351,
        "endChar": 73
      },
      "revId": "e7d8d5c7cf2769579dc20e237e99c1585175b2c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "899d7ef8_c62d86e9",
        "filename": "content/renderer/render_view_impl.cc",
        "patchSetId": 10
      },
      "lineNbr": 2351,
      "author": {
        "id": 1146978
      },
      "writtenOn": "2018-02-01T14:23:21Z",
      "side": 1,
      "message": "Hmmm, I was under the assumption that calling Close() on the SharedMemory would call Unmap() but reading the code/comments that\u0027s not true. Let me double check if that\u0027s a problem, neither render or browser process calls Unmap() after calling Map().",
      "parentUuid": "6d9adf43_3c3b18fe",
      "range": {
        "startLine": 2350,
        "startChar": 0,
        "endLine": 2351,
        "endChar": 73
      },
      "revId": "e7d8d5c7cf2769579dc20e237e99c1585175b2c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27fa2bdb_950ee4f4",
        "filename": "content/renderer/render_view_impl.cc",
        "patchSetId": 10
      },
      "lineNbr": 2351,
      "author": {
        "id": 1146978
      },
      "writtenOn": "2018-02-01T14:36:34Z",
      "side": 1,
      "message": "The call to Unmap() happens in the SharedMemory destructor normally.\n\nhttps://cs.chromium.org/chromium/src/base/memory/shared_memory_posix.cc?l\u003d48\u0026rcl\u003dae1e8023bd48be9fd2c9546b7140e7e535c64884\n\nTakeHandle() resets |memory_| so that won\u0027t do anything. I have no idea if Unmap() needs to be called before calling TakeHandle() though.\n\nhttps://cs.chromium.org/chromium/src/base/memory/shared_memory_posix.cc?l\u003d346\u0026rcl\u003dae1e8023bd48be9fd2c9546b7140e7e535c64884",
      "parentUuid": "899d7ef8_c62d86e9",
      "range": {
        "startLine": 2350,
        "startChar": 0,
        "endLine": 2351,
        "endChar": 73
      },
      "revId": "e7d8d5c7cf2769579dc20e237e99c1585175b2c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f217fcaf_eeaf9ca9",
        "filename": "content/renderer/render_view_impl.cc",
        "patchSetId": 10
      },
      "lineNbr": 2351,
      "author": {
        "id": 1148065
      },
      "writtenOn": "2018-02-01T18:02:06Z",
      "side": 1,
      "message": "IMO, TakeHandle() is wrong in clearing memory_ without unmapping - we would leak address space.",
      "parentUuid": "27fa2bdb_950ee4f4",
      "range": {
        "startLine": 2350,
        "startChar": 0,
        "endLine": 2351,
        "endChar": 73
      },
      "revId": "e7d8d5c7cf2769579dc20e237e99c1585175b2c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c031c49_5aef00e7",
        "filename": "content/renderer/render_view_impl.cc",
        "patchSetId": 10
      },
      "lineNbr": 2351,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2018-02-01T18:07:56Z",
      "side": 1,
      "message": "Yes, that seems like a bug: I agree that TakeHandle() should Unmap() internally. In fact, the comments for TakeHandle() claim this is more or less what happens. This would also make the behavior of OS X consistent with all other platforms.",
      "parentUuid": "f217fcaf_eeaf9ca9",
      "range": {
        "startLine": 2350,
        "startChar": 0,
        "endLine": 2351,
        "endChar": 73
      },
      "revId": "e7d8d5c7cf2769579dc20e237e99c1585175b2c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}