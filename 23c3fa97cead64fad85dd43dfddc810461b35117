{
  "comments": [
    {
      "key": {
        "uuid": "1c274945_f35cbcbe",
        "filename": "ash/system/session/tray_session_length_limit.cc",
        "patchSetId": 7
      },
      "lineNbr": 154,
      "author": {
        "id": 1162075
      },
      "writtenOn": "2017-11-23T20:18:42Z",
      "side": 1,
      "message": "AFAIU, the notification will never be shown in this case?\nShouldn\u0027t a timer be scheduled here to fire an event to show the notification, when it will be exactly kNotificationThreshold left?",
      "range": {
        "startLine": 154,
        "startChar": 6,
        "endLine": 154,
        "endChar": 54
      },
      "revId": "23c3fa97cead64fad85dd43dfddc810461b35117",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b119021_e0ac4955",
        "filename": "ash/system/session/tray_session_length_limit.cc",
        "patchSetId": 7
      },
      "lineNbr": 154,
      "author": {
        "id": 1252512
      },
      "writtenOn": "2017-11-23T20:34:28Z",
      "side": 1,
      "message": "Good point but https://cs.chromium.org/chromium/src/ash/system/session/tray_session_length_limit.cc?l\u003d118\u0026rcl\u003d8b411de0034dd83ccd909207895b4044f15c4066 already does that by putting `Update()\u0027 in a RepeatingTimer which in turn calls https://cs.chromium.org/chromium/src/ash/system/session/tray_session_length_limit.cc?l\u003d92\u0026rcl\u003d8b411de0034dd83ccd909207895b4044f15c4066 `UpdateState()\u0027 and `UpdateNotification()\u0027. This is run every 500 ms as of now and is responsible for updating the \"countdown\" in the UI.\n\nTested it manually too. A notification \"popped up\" when there was 1 hour left in the session.",
      "parentUuid": "1c274945_f35cbcbe",
      "range": {
        "startLine": 154,
        "startChar": 6,
        "endLine": 154,
        "endChar": 54
      },
      "revId": "23c3fa97cead64fad85dd43dfddc810461b35117",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2920ed4b_acca328f",
        "filename": "ash/system/session/tray_session_length_limit.cc",
        "patchSetId": 7
      },
      "lineNbr": 154,
      "author": {
        "id": 1162075
      },
      "writtenOn": "2017-11-23T20:59:09Z",
      "side": 1,
      "message": "Ack. Thanks, didn\u0027t notice the update and didn\u0027t expect that the timer is fired every 500 ms :)\nBTW, is it possible to add a unit test for this case, i.e.that notification pops up when about |kNotificationThreshold| left?",
      "parentUuid": "8b119021_e0ac4955",
      "range": {
        "startLine": 154,
        "startChar": 6,
        "endLine": 154,
        "endChar": 54
      },
      "revId": "23c3fa97cead64fad85dd43dfddc810461b35117",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1e7e25b0_f8f06a8d",
        "filename": "ash/system/session/tray_session_length_limit.cc",
        "patchSetId": 7
      },
      "lineNbr": 154,
      "author": {
        "id": 1252512
      },
      "writtenOn": "2017-11-23T21:18:46Z",
      "side": 1,
      "message": "Yes, kinda have a test case. Unable to link inside the patch sorry, here is the CS link, now that it is merged : https://cs.chromium.org/chromium/src/ash/system/session/tray_session_length_limit_unittest.cc?l\u003d155\u0026rcl\u003dc19bd1dbd9bf350b63f7835f4a80ebdba3b44684 Doesnt exactly use RepeatingTimer but simulates the same set of `Update()\u0027 code paths.",
      "parentUuid": "2920ed4b_acca328f",
      "range": {
        "startLine": 154,
        "startChar": 6,
        "endLine": 154,
        "endChar": 54
      },
      "revId": "23c3fa97cead64fad85dd43dfddc810461b35117",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}