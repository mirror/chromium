{
  "comments": [
    {
      "key": {
        "uuid": "6d52515f_b16a5781",
        "filename": "chrome/browser/net/profile_network_context_service.cc",
        "patchSetId": 8
      },
      "lineNbr": 74,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "For my information: Does this imply that those tests end up posting messages on the profile_io_data_main_network_context_ end of the pipe?  Or are requests considered pending if they\u0027re just never bound to an implementation?",
      "range": {
        "startLine": 74,
        "startChar": 11,
        "endLine": 74,
        "endChar": 16
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34e8ea5e_b265f0aa",
        "filename": "chrome/browser/net/profile_network_context_service.cc",
        "patchSetId": 8
      },
      "lineNbr": 74,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "No chrome unittests enable the network service, and no chrome tests use NetworkContexts.  So those tests call CreateMainNetworkContext(), but not SetUpProfileIODataMainContext() (TestProfile bypasses normal URLRequestContextCreation, for reasons that are unclear).  The TestChromeContextBrowserClient may have fixed those, though - I\u0027ll try removing this, and see if tests pass.",
      "parentUuid": "6d52515f_b16a5781",
      "range": {
        "startLine": 74,
        "startChar": 11,
        "endLine": 74,
        "endChar": 16
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "105976f7_0216fcec",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 45,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "nit, suggestion: Given that the order in which these routines are called is important, would it make sense to put CreateMainNetworkContext() first in the files, so the naive instinct matches with the requirement?",
      "range": {
        "startLine": 45,
        "startChar": 28,
        "endLine": 45,
        "endChar": 29
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0b8a215_1b4da755",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 45,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "nit, suggestion: I prefer to phrase method documentation comments as restrictions on the consumer, rather than as description of the consumer.  Prescriptive comments are (to me) clearer than descriptive ones in terms of what changes are allowed.  So I\u0027d prefer to have this phrased \"This must be called before SetUpProfileIODataMainContext.\".  (Same comment about the paired statement in that function\u0027s comment.)",
      "range": {
        "startLine": 45,
        "startChar": 36,
        "endLine": 45,
        "endChar": 42
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2171cf5b_64f79e4a",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 45,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Good idea, done.  They\u0027re in the wrong order because that used to be the order they were expected to be called in, back in the days or yore (i.e., for the last two weeks) when this class held on to the NetworkContext.",
      "parentUuid": "105976f7_0216fcec",
      "range": {
        "startLine": 45,
        "startChar": 28,
        "endLine": 45,
        "endChar": 29
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26ed56da_d9707b92",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 45,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "In general, I think you\u0027re right.  However, this class doesn\u0027t have a single consumer...The call paths are:\n\nStorageParitionImpl-\u003eChromeContentBrowserClient-\u003ethis::CreateMainNetworkContext()\n\nand\n\nStoragePartitionImplMap-\u003e[OTR]Profile[Impl]-\u003e[OTR]Profile[*]IOData::Handle-\u003eProfileIOData-\u003ethis::SetUpProfileIODataMainContext()\n\nSo it doesn\u0027t exactly have a consumer to respect the interface.  It\u0027s...more of a symbiotic (parasitic?) everyone kind of leeches off of each other and hopes everything works kind of thing.  So I think in this particular, one-off case, descriptive comments are more informative than prescriptive ones.  Thoughts?",
      "parentUuid": "f0b8a215_1b4da755",
      "range": {
        "startLine": 45,
        "startChar": 36,
        "endLine": 45,
        "endChar": 42
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "faba27d5_1cfe6eb6",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 59,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "Do you mean ProfileNetworkContextService::SetUpProfileIODataMainContext()?",
      "range": {
        "startLine": 59,
        "startChar": 37,
        "endLine": 59,
        "endChar": 65
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c81435d_58763037",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 59,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Yes, Done.",
      "parentUuid": "faba27d5_1cfe6eb6",
      "range": {
        "startLine": 59,
        "startChar": 37,
        "endLine": 59,
        "endChar": 65
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "709329b4_4dffd015",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "Confirming: The reason for the existence of this is so that CreateMainNetworkContext() can be called in the !network service case and we\u0027ll have something to vend because the pipe was setup in construction?",
      "range": {
        "startLine": 60,
        "startChar": 40,
        "endLine": 60,
        "endChar": 72
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65efb5a1_64daeec3",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1001472
      },
      "writtenOn": "2017-08-03T11:34:47Z",
      "side": 1,
      "message": "(Hm, sorry I wasn\u0027t fully sure why we need to keep this here- why isn\u0027t calling MakeRequest in SetUpProfileIODataMainContext enough?)",
      "parentUuid": "709329b4_4dffd015",
      "range": {
        "startLine": 60,
        "startChar": 40,
        "endLine": 60,
        "endChar": 72
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "074a1e15_92c816ef",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Randy:  Correct.\n\nKinuko:  Because CreateMainNetworkContext() is called before SetUpProfileIODataMainContext().\n\nI\u0027ve switched to only initializing this in CreateMainNetworkContext() the !network service case, and just initializing the request directly in SetUpProfileIODataMainContext otherwise.",
      "parentUuid": "65efb5a1_64daeec3",
      "range": {
        "startLine": 60,
        "startChar": 40,
        "endLine": 60,
        "endChar": 72
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ed387e5_91697519",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Correct.",
      "parentUuid": "709329b4_4dffd015",
      "range": {
        "startLine": 60,
        "startChar": 40,
        "endLine": 60,
        "endChar": 72
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "372515f6_b4c3a628",
        "filename": "chrome/browser/net/profile_network_context_service.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1001472
      },
      "writtenOn": "2017-08-04T06:52:00Z",
      "side": 1,
      "message": "Ah I see. The new change in CreateMainNetworkContext made it easier to see what could happen, thanks!",
      "parentUuid": "5ed387e5_91697519",
      "range": {
        "startLine": 60,
        "startChar": 40,
        "endLine": 60,
        "endChar": 72
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e08d054_2c7d2c64",
        "filename": "chrome/test/base/test_chrome_content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 24,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "nit, but could you amplify?  Specifically, I think the \"In particular\" phrase is describing what happens in the non-TestProfile case, and I presume that in the TestProfile case CreateNetworkContext is called after Profile::CreateRequestContext and there\u0027s more than one (zero?) StoragePartition per BrowserContextKeyedService, but I\u0027m not sure, and I\u0027d like the comment to be clearer.",
      "range": {
        "startLine": 24,
        "startChar": 3,
        "endLine": 24,
        "endChar": 29
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56ea3aef_f2fa9ffd",
        "filename": "chrome/test/base/test_chrome_content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 24,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "I\u0027ve tried to get a little more detail, but don\u0027t want to spend any more time investigating this \n- there are a bunch of broken test fixtures, and the most broken two tests are OSX unittests, which is just a pain to work with, due to issue https://crbug.com/696529.  Also, TestingProfile is sufficiently broken that I\u0027m not interested in hacking in a workaround until we can get rid of the legacy path, in which most cases may just work (The two most broken ones may not, though - they create two TestProfiles for the same BrowserContext in some cases).",
      "parentUuid": "2e08d054_2c7d2c64",
      "range": {
        "startLine": 24,
        "startChar": 3,
        "endLine": 24,
        "endChar": 29
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f1d7863_21b9b8f1",
        "filename": "chrome/test/base/test_chrome_content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 24,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-04T12:08:31Z",
      "side": 1,
      "message": "I\u0027ve switched to an alternate solution that I think is a bit cleaner.  I still think we want to get the Profile out of the NetworkContext creation path, but for now, putting it there lets the TestingProfile work around precisely those cases it breaks...hopefully.",
      "parentUuid": "56ea3aef_f2fa9ffd",
      "range": {
        "startLine": 24,
        "startChar": 3,
        "endLine": 24,
        "endChar": 29
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "935fbad4_d8a0e875",
        "filename": "chrome/test/base/test_chrome_content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 33,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "Confirming I understand: So in the TestProfile+network service case we request from the network service, and in the TestProfile+!network service case we wrap, and just completely dodge the Chrome-level construction of the NetworkContext?",
      "range": {
        "startLine": 33,
        "startChar": 5,
        "endLine": 33,
        "endChar": 16
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c4fc6f0_5febabe9",
        "filename": "chrome/test/base/test_chrome_content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 33,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Both cases are affected, and just fall back to the content case.  The TestProfile+network service case this will return a NetworkContextPtr, but not the one Chrome would normally make (Content\u0027s creation code doesn\u0027t have an expectation that it\u0027s only called once per context with an empty partition path, while Chrome\u0027s does).",
      "parentUuid": "935fbad4_d8a0e875",
      "range": {
        "startLine": 33,
        "startChar": 5,
        "endLine": 33,
        "endChar": 16
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1e0e89a_3056cbaf",
        "filename": "content/browser/storage_partition_impl.cc",
        "patchSetId": 8
      },
      "lineNbr": 458,
      "author": {
        "id": 1001472
      },
      "writtenOn": "2017-08-03T11:34:47Z",
      "side": 1,
      "message": "Would BrowserThread::DeleteSoon(BrowserThread::IO, FROM_HERE, std::move(...)) be enough?",
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c86c8ab5_fa6b94f5",
        "filename": "content/browser/storage_partition_impl.cc",
        "patchSetId": 8
      },
      "lineNbr": 458,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Done, thanks!  I looked for a DeleteTask, but was looking for the wrong thing.  :(",
      "parentUuid": "e1e0e89a_3056cbaf",
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99f67572_adab96df",
        "filename": "content/browser/storage_partition_impl.h",
        "patchSetId": 8
      },
      "lineNbr": 263,
      "author": {
        "id": 1001472
      },
      "writtenOn": "2017-08-03T11:34:47Z",
      "side": 1,
      "message": "created -\u003e created by",
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a16fa35_fb9f6244",
        "filename": "content/browser/storage_partition_impl.h",
        "patchSetId": 8
      },
      "lineNbr": 263,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "99f67572_adab96df",
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8bc83b94_048a15bf",
        "filename": "content/public/browser/content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 836,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "Nit: It-\u003eIf.",
      "range": {
        "startLine": 836,
        "startChar": 29,
        "endLine": 836,
        "endChar": 32
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d2714e0_d79c0e1a",
        "filename": "content/public/browser/content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 836,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8bc83b94_048a15bf",
      "range": {
        "startLine": 836,
        "startChar": 29,
        "endLine": 836,
        "endChar": 32
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "851ef031_424001a0",
        "filename": "content/public/browser/content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 838,
      "author": {
        "id": 1001809
      },
      "writtenOn": "2017-08-02T23:34:07Z",
      "side": 1,
      "message": "Suggestion: Maybe phrase this instead in terms of the options available to the embedder?  \"If the network service is disabled, the embedder may return a NetworkContext, or it may return nullptr, in which case the StoragePartition will create one wrapping its URLRequestContext\"?",
      "range": {
        "startLine": 838,
        "startChar": 36,
        "endLine": 838,
        "endChar": 37
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "597abd50_1d24f98a",
        "filename": "content/public/browser/content_browser_client.h",
        "patchSetId": 8
      },
      "lineNbr": 838,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-08-03T23:29:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "851ef031_424001a0",
      "range": {
        "startLine": 838,
        "startChar": 36,
        "endLine": 838,
        "endChar": 37
      },
      "revId": "0d9082f9c09519757d387353618fece739e648c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}