{
  "comments": [
    {
      "key": {
        "uuid": "5fa73350_4958e949",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T20:20:47Z",
      "side": 1,
      "message": "This code applies to both WebXR and VR browsing, right?",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5dffcb2_243cf134",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T20:46:31Z",
      "side": 1,
      "message": "Nevermind - this is in Blink.",
      "parentUuid": "5fa73350_4958e949",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e9558b1_b242b3ac",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-12T22:42:12Z",
      "side": 1,
      "message": "This is only for WebXR",
      "parentUuid": "d5dffcb2_243cf134",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4bf6a73_6b80339f",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-16T21:12:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9e9558b1_b242b3ac",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9d8733e3_521d7a96",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T20:46:31Z",
      "side": 1,
      "message": "Related to the comment about naming below: The fact that this code translates to returning a device to the client is a bit indirect. Are there even perhaps cases where this code runs but no device is returned?\n\nIt\u0027s probably not WebXR.HasDevice either because you could access `navigator.xr` without this code being called.\n\nI think we need to figure out what exactly we want to report and rename and potentially move the metric recording accordingly.\n\nIs there a method where we report the result of requestDevices where we could look at the result? Also, is it worth reporting the case where there were 0 devices? While that may be the difference between DidRequest and HasDevice, there will be some amount of unresolved promises. I\u0027m not sure whether that\u0027s worth recording, though.",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e43a375e_d642e8aa",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-12T22:42:12Z",
      "side": 1,
      "message": "Devices may be returned through getVRDisplays promises or the onvrdisplayconnect window event.  Both of these go through this codepath when we obtain displays from the browser, and there are no other cases where we go through this codepath.\n\nThe promises are resolved in VRController::OnGetDisplays or VRController::GetDisplays if display_synced_ is true.  I could trigger the UKM from both of these locations, but we\u0027d miss the onvrdisplayconnect window event - perhaps it is worth having multiple metrics for these?\n\nI\u0027m leaning towards either keeping the metric as-is, or triggering it in OnGetDisplays/GetDisplays and not worrying about measuring onvrdisplayconnect displays for now (since none of our devices currently support hot-plug for the current milestone).",
      "parentUuid": "9d8733e3_521d7a96",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b390296e_15041133",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T23:44:17Z",
      "side": 1,
      "message": "The new WebXR API\u0027s devicechange does not return devices like this, so I think we can ignore that scenario.\n\nMy main concern is that it\u0027s not obvious or enforced that this path is only called in those cases. We can worry about that in WebXR since this will be deprecated soon. We should, however, determine what we want this metric to mean and name it such.",
      "parentUuid": "e43a375e_d642e8aa",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44bdf0ee_b2179418",
        "filename": "third_party/WebKit/Source/modules/vr/VRController.cpp",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-16T21:12:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b390296e_15041133",
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe0b992f_827ea57a",
        "filename": "third_party/WebKit/Source/modules/vr/VRDisplay.cpp",
        "patchSetId": 4
      },
      "lineNbr": 173,
      "author": {
        "id": 1124674
      },
      "writtenOn": "2018-01-13T00:07:34Z",
      "side": 1,
      "message": "Since https://chromium-review.googlesource.com/c/chromium/src/+/767209 has landed, you can call UkmSourceID() before UkmRecorder() now, so you could simplify this to:\n\nif (!already_logged_getFrameData_ \u0026\u0026 GetDocument() \u0026\u0026\n      GetDocument()-\u003eIsInMainFrame()) {\n    already_logged_getFrameData_ \u003d true;\n    ukm::builders::XR_Devices_Api(GetDocument()-\u003eUkmSourceID())\n        .SetDidRequestPose(1)\n        .Record(GetDocument()-\u003eUkmRecorder());\n}",
      "range": {
        "startLine": 173,
        "startChar": 16,
        "endLine": 173,
        "endChar": 28
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55a2a7e6_13df6d6f",
        "filename": "third_party/WebKit/Source/modules/vr/VRDisplay.cpp",
        "patchSetId": 4
      },
      "lineNbr": 173,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-16T21:12:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe0b992f_827ea57a",
      "range": {
        "startLine": 173,
        "startChar": 16,
        "endLine": 173,
        "endChar": 28
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ea0f361_f00b3b00",
        "filename": "third_party/WebKit/Source/modules/vr/VRDisplay.h",
        "patchSetId": 4
      },
      "lineNbr": 217,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T23:44:17Z",
      "side": 1,
      "message": "nit: whether",
      "range": {
        "startLine": 217,
        "startChar": 30,
        "endLine": 217,
        "endChar": 34
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ece31b0_5bf87c7d",
        "filename": "third_party/WebKit/Source/modules/vr/VRDisplay.h",
        "patchSetId": 4
      },
      "lineNbr": 217,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-16T21:12:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ea0f361_f00b3b00",
      "range": {
        "startLine": 217,
        "startChar": 30,
        "endLine": 217,
        "endChar": 34
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eda80b2c_d7ef1e8c",
        "filename": "third_party/WebKit/Source/modules/vr/VRDisplay.h",
        "patchSetId": 4
      },
      "lineNbr": 219,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T23:44:17Z",
      "side": 1,
      "message": "I think `has` (or `did`) is more common.",
      "range": {
        "startLine": 219,
        "startChar": 7,
        "endLine": 219,
        "endChar": 14
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fd32c95_874a2f9c",
        "filename": "third_party/WebKit/Source/modules/vr/VRDisplay.h",
        "patchSetId": 4
      },
      "lineNbr": 219,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-16T21:12:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eda80b2c_d7ef1e8c",
      "range": {
        "startLine": 219,
        "startChar": 7,
        "endLine": 219,
        "endChar": 14
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "466a8faa_f1413bdf",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2355,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T20:20:47Z",
      "side": 1,
      "message": "`WebXR` as discussed",
      "range": {
        "startLine": 2355,
        "startChar": 16,
        "endLine": 2355,
        "endChar": 27
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29dbe521_c0ff89b7",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2372,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T20:20:47Z",
      "side": 1,
      "message": "The objects in the \"Did\" and \"Has\" metrics are different. In fact, these metrics aren\u0027t even specific to the WebXR API, so maybe they should be in a separate namespace. (I don\u0027t know what that does to our ability to understand the data. Maybe we should do namespacing  within the metric names rather than the event name. Does that mean there should be a single \"XR\" event name with everything else recorded as metrics under it?",
      "range": {
        "startLine": 2372,
        "startChar": 16,
        "endLine": 2372,
        "endChar": 19
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9fadc7b9_ed326180",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2372,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T20:46:31Z",
      "side": 1,
      "message": "Ignore this and see the replacement below.",
      "parentUuid": "29dbe521_c0ff89b7",
      "range": {
        "startLine": 2372,
        "startChar": 16,
        "endLine": 2372,
        "endChar": 19
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95668c3b_eb294dbf",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2372,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-12T22:42:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9fadc7b9_ed326180",
      "range": {
        "startLine": 2372,
        "startChar": 16,
        "endLine": 2372,
        "endChar": 19
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5c394c4_e598ba2f",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2377,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T20:46:31Z",
      "side": 1,
      "message": "The objects in the \"Did\" and \"Has\" metrics are different. Should we be more specific in the metric name? Maybe this should be DidReceive or (still has the object issue) DidReturn.",
      "range": {
        "startLine": 2377,
        "startChar": 16,
        "endLine": 2377,
        "endChar": 19
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d887af6c_2ccb1f00",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2377,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-12T22:42:12Z",
      "side": 1,
      "message": "There is both the window.onvrdisplayconnected event and the navigator.getVRDisplays call that can return devices to a site.  The current implementation will trigger this ukm for either.  \n\nI\u0027m ok with a rename or new metric indicating specifically whether getVRDisplays returned a device, and whether that supports presentation.\n\nI\u0027ll think about naming to differentiate these cases a bit.",
      "parentUuid": "b5c394c4_e598ba2f",
      "range": {
        "startLine": 2377,
        "startChar": 16,
        "endLine": 2377,
        "endChar": 19
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "09529d43_1023b692",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2377,
      "author": {
        "id": 1000158
      },
      "writtenOn": "2018-01-12T23:44:17Z",
      "side": 1,
      "message": "See above. Let\u0027s assume it\u0027s only getVRDisplays()/xr.requestDevice().",
      "parentUuid": "d887af6c_2ccb1f00",
      "range": {
        "startLine": 2377,
        "startChar": 16,
        "endLine": 2377,
        "endChar": 19
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfe31012_7249c069",
        "filename": "tools/metrics/ukm/ukm.xml",
        "patchSetId": 4
      },
      "lineNbr": 2377,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2018-01-16T21:12:02Z",
      "side": 1,
      "message": "ok, changed to ReturnedDevice and ReturnedPresentationCapableDevice",
      "parentUuid": "09529d43_1023b692",
      "range": {
        "startLine": 2377,
        "startChar": 16,
        "endLine": 2377,
        "endChar": 19
      },
      "revId": "c437347caa1bb17b0cfe0b4accb6266afd6c03a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}