{
  "comments": [
    {
      "key": {
        "uuid": "167d103e_7e2fb95a",
        "filename": "components/signin/core/browser/gaia_cookie_manager_service.h",
        "patchSetId": 10
      },
      "lineNbr": 281,
      "author": {
        "id": 1001438
      },
      "writtenOn": "2017-10-05T11:35:13Z",
      "side": 1,
      "message": "I don\u0027t really like this name and comment. I think we should not mention CHROME-CONNECTED here, because this class actually does not actually touch it.\n\nI suggest StartPreGaiaLogOut(), and mention in the comment that it calls SigninClient::PreGaiaLogout().",
      "range": {
        "startLine": 280,
        "startChar": 2,
        "endLine": 281,
        "endChar": 31
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2bf63dc_1065e73c",
        "filename": "components/signin/core/browser/gaia_cookie_manager_service.h",
        "patchSetId": 10
      },
      "lineNbr": 281,
      "author": {
        "id": 1161750
      },
      "writtenOn": "2017-10-06T12:31:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "167d103e_7e2fb95a",
      "range": {
        "startLine": 280,
        "startChar": 2,
        "endLine": 281,
        "endChar": 31
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f442473a_e9071a09",
        "filename": "components/signin/ios/browser/account_consistency_service.h",
        "patchSetId": 10
      },
      "lineNbr": 105,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-10-05T10:00:04Z",
      "side": 1,
      "message": "I think you may add \"\u003d default\" in the header file.",
      "range": {
        "startLine": 105,
        "startChar": 4,
        "endLine": 105,
        "endChar": 17
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cfc418c6_16b6fc69",
        "filename": "components/signin/ios/browser/account_consistency_service.h",
        "patchSetId": 10
      },
      "lineNbr": 105,
      "author": {
        "id": 1161750
      },
      "writtenOn": "2017-10-06T12:31:14Z",
      "side": 1,
      "message": "No, constructors and destructors should not be inlined.\n\"Showing Recent Issues\n../../components/signin/ios/browser/account_consistency_service.h:105:5: error: [chromium-style] Complex constructor has an inlined body.\"",
      "parentUuid": "f442473a_e9071a09",
      "range": {
        "startLine": 105,
        "startChar": 4,
        "endLine": 105,
        "endChar": 17
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77777487_9a31ef54",
        "filename": "components/signin/ios/browser/account_consistency_service.h",
        "patchSetId": 10
      },
      "lineNbr": 106,
      "author": {
        "id": 1001438
      },
      "writtenOn": "2017-10-05T11:35:13Z",
      "side": 1,
      "message": "Does the \"rule of five\" apply here?\nhttp://en.cppreference.com/w/cpp/language/rule_of_three",
      "range": {
        "startLine": 106,
        "startChar": 4,
        "endLine": 106,
        "endChar": 34
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cc5da6a_45052bce",
        "filename": "components/signin/ios/browser/account_consistency_service.h",
        "patchSetId": 10
      },
      "lineNbr": 106,
      "author": {
        "id": 1161750
      },
      "writtenOn": "2017-10-06T12:31:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77777487_9a31ef54",
      "range": {
        "startLine": 106,
        "startChar": 4,
        "endLine": 106,
        "endChar": 34
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e57d637_14d7458e",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 297,
      "author": {
        "id": 1001438
      },
      "writtenOn": "2017-10-05T11:35:13Z",
      "side": 1,
      "message": "Are we sure that these tasks finish in the same order they are posted?",
      "range": {
        "startLine": 297,
        "startChar": 2,
        "endLine": 297,
        "endChar": 39
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcf4a8fd_599611a3",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 297,
      "author": {
        "id": 1161750
      },
      "writtenOn": "2017-10-06T12:31:14Z",
      "side": 1,
      "message": "Unit tests was not implemented yet. This is now done with web_view_load_expection_count_ in AccountConsistencyServiceTest::RemoveCookieDone().",
      "parentUuid": "0e57d637_14d7458e",
      "range": {
        "startLine": 297,
        "startChar": 2,
        "endLine": 297,
        "endChar": 39
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57e9a013_eabea4d6",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 412,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-10-05T10:00:04Z",
      "side": 1,
      "message": "Is is really needed to make a copy of the callback here?",
      "range": {
        "startLine": 412,
        "startChar": 20,
        "endLine": 412,
        "endChar": 28
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0b61f43_c9474253",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 412,
      "author": {
        "id": 1161750
      },
      "writtenOn": "2017-10-06T12:31:14Z",
      "side": 1,
      "message": "the request is destroyed at line 413. I prefer to do the cleanup first (removing it from the queue), and then call the callback.",
      "parentUuid": "57e9a013_eabea4d6",
      "range": {
        "startLine": 412,
        "startChar": 20,
        "endLine": 412,
        "endChar": 28
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef679a2b_17b9584b",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 482,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-10-05T10:00:04Z",
      "side": 1,
      "message": "It looks like the AccountConsistencyService is already an observer for GaiaCookieManager (see https://cs.chromium.org/chromium/src/components/signin/core/browser/gaia_cookie_manager_service.h?rcl\u003d1ca8b3be7d04a0fde6519125f212c64839a4212b\u0026l\u003d79 ), so it already has a dependency on GaiaCookieManagerService.\n\nOne option would have been to add a OnLogOutAccountsFromCookieWillStart() instead of going through the client interface - that would require use to pass a callback to all observers, and wait for all callbacks before doing the logout. So this does not really work well.\n\nI think another option would be to do the following: add a LogoutHelper observer interface in GaiaCookieManagerService with a method named CleanupBeforeLogout(calllback) and a setter method named SetLogoutHelper. The AccountConsistencyService would implement this interface and would set it as the helper when it is initialized.\n\nDavid: In terms of architecture, is it better to go through the client, or would you prefer the helper as I suggested above.",
      "range": {
        "startLine": 482,
        "startChar": 2,
        "endLine": 482,
        "endChar": 27
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0867bce_069975d8",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 482,
      "author": {
        "id": 1001438
      },
      "writtenOn": "2017-10-05T13:36:03Z",
      "side": 1,
      "message": "Sorry, I missed this question.\n\nWith your suggestion, you save an indirection through the client, but at the cost of introducing an additional interface and code to register/unregister. Both seem similar to me in terms of complexity.",
      "parentUuid": "ef679a2b_17b9584b",
      "range": {
        "startLine": 482,
        "startChar": 2,
        "endLine": 482,
        "endChar": 27
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50003b31_dec03ada",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 482,
      "author": {
        "id": 1161750
      },
      "writtenOn": "2017-10-06T12:31:14Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e0867bce_069975d8",
      "range": {
        "startLine": 482,
        "startChar": 2,
        "endLine": 482,
        "endChar": 27
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc3e4f32_c743f15c",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 499,
      "author": {
        "id": 1115972
      },
      "writtenOn": "2017-10-05T10:00:04Z",
      "side": 1,
      "message": "Please add a comment here why it removing chrome connected cookies here is no longer needed. We may actually be able to leave the clean-up here as well: trying to remove the cookies multiple times should not be a problem, right? We would just need to make sure that we call the callbacks in this case.",
      "range": {
        "startLine": 499,
        "startChar": 54,
        "endLine": 499,
        "endChar": 57
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48f1da43_6634f9fb",
        "filename": "components/signin/ios/browser/account_consistency_service.mm",
        "patchSetId": 10
      },
      "lineNbr": 499,
      "author": {
        "id": 1161750
      },
      "writtenOn": "2017-10-06T12:31:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bc3e4f32_c743f15c",
      "range": {
        "startLine": 499,
        "startChar": 54,
        "endLine": 499,
        "endChar": 57
      },
      "revId": "3bfe798dc4ef3b32567f90ca020209ea1aa2b291",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}