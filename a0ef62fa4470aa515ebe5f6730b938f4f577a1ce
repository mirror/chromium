{
  "comments": [
    {
      "key": {
        "uuid": "6c9cf5d3_7fb25efe",
        "filename": "chrome/browser/profiles/profile_info_cache.cc",
        "patchSetId": 18
      },
      "lineNbr": 1013,
      "author": {
        "id": 1151884
      },
      "writtenOn": "2017-08-10T22:22:57Z",
      "side": 1,
      "message": "I don\u0027t like this. First of all, I believe this new call will leak; the caller doesn\u0027t expect to become the owner of the Image instance. Secondly, you\u0027ve introduced a tri-state here where I\u0027m not sure we need one. Why would we ever fall back to the built-in icons if there\u0027s no image to display? While displaying nothing in an error case isn\u0027t ideal, it\u0027s better than the current behavior. Is there anything wrong with just returning from AvatarMenu::GetImageForMenuButton if IsUsingGAIAPicture is true but we don\u0027t get an image back?",
      "range": {
        "startLine": 1013,
        "startChar": 9,
        "endLine": 1013,
        "endChar": 23
      },
      "revId": "a0ef62fa4470aa515ebe5f6730b938f4f577a1ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf7c1dd4_935238e7",
        "filename": "chrome/browser/profiles/profile_info_cache.cc",
        "patchSetId": 18
      },
      "lineNbr": 1013,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-08-11T18:39:12Z",
      "side": 1,
      "message": "The reason why the tri-state is introduced is that the last NULL return is indeed a third state. All the NULL returns except for the last one basically say that I cannot find Gaia image, please use the built-in icon. While the last NULL return actually wants to say \"please don\u0027t draw anything now, let\u0027s wait until the callback finish\". So they want different actions, but the caller only see a NULL return and therefore cannot tell the difference. \n\nHowever, I agree with the leak issue. So I have turned to another method now.\n\nAlso agreed that the correct Gaia behavior should be \"avoid displaying anything until the async load finishes, fall back to the built-in icon if the Gaia image load fails somehow.\"",
      "parentUuid": "6c9cf5d3_7fb25efe",
      "range": {
        "startLine": 1013,
        "startChar": 9,
        "endLine": 1013,
        "endChar": 23
      },
      "revId": "a0ef62fa4470aa515ebe5f6730b938f4f577a1ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a930344f_e41c922f",
        "filename": "chrome/browser/profiles/profile_info_cache.cc",
        "patchSetId": 18
      },
      "lineNbr": 1013,
      "author": {
        "id": 1151884
      },
      "writtenOn": "2017-08-12T03:10:18Z",
      "side": 1,
      "message": "What I mean was, in the case where there\u0027s an actual error, won\u0027t we hit the same buggy path we\u0027re talking about fixing? Won\u0027t it show the decoration for a different profile?\n\nBut in any case I like your new approach better.",
      "parentUuid": "cf7c1dd4_935238e7",
      "range": {
        "startLine": 1013,
        "startChar": 9,
        "endLine": 1013,
        "endChar": 23
      },
      "revId": "a0ef62fa4470aa515ebe5f6730b938f4f577a1ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad34060f_212929ef",
        "filename": "chrome/browser/profiles/profile_info_cache.cc",
        "patchSetId": 18
      },
      "lineNbr": 1013,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-08-14T05:48:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a930344f_e41c922f",
      "range": {
        "startLine": 1013,
        "startChar": 9,
        "endLine": 1013,
        "endChar": 23
      },
      "revId": "a0ef62fa4470aa515ebe5f6730b938f4f577a1ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}