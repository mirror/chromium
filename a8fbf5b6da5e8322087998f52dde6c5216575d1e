{
  "comments": [
    {
      "key": {
        "uuid": "8e4359ca_60099814",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 721,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-11-09T13:49:48Z",
      "side": 1,
      "message": "Clarification: do we want to start mini instance for other cases, like for OOBE or L708 (\u003d Accept ToS, but for some reason (e.g. force shutdown), ARC is stopped, then re-sign-in case, or ARC is managed, and both prefs for checkbox are managed, too, case)?\n\nIf both are yes, then how about moving this to around L704?",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44b32e79_0aa088b7",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 721,
      "author": {
        "id": 1228980
      },
      "writtenOn": "2017-11-10T20:48:38Z",
      "side": 1,
      "message": "The mini-container is being started for the OOBE case. Or rather, it\u0027s being started during the login screen, and is kept running the in OOBE case, so starting it isn\u0027t necessary. It looks like we CAN call RequestStart again in that case though, since it\u0027ll just early out if the mini-container start request was already running. In the other cases, where ARC is managed but in the case of accepted TOS but no sign in, the management check seems to be very quick (simple boolean check, no network access), so I don\u0027t think we\u0027d gain anything by starting the mini-container earlier. In fact, I think we might take a small performance penalty because the starting the mini-container then upgrading it is slower than just starting the full container outright.",
      "parentUuid": "8e4359ca_60099814",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "30a0f0f6_128bab1c",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 721,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-11-13T05:28:36Z",
      "side": 1,
      "message": "Thank you for explanation. Please let me ask two more questions just for clarification.\n\n1) Unlike the name represents, OOBE does NOT only used for OOBE, but also the wizard for assistance UI, too. (It was named OOBE, and not yet renamed just for historical reason :\u0027-(). At that timing, mini-contaienr is not running. What we should do then?\n\n2) As for latter case, my main point was; ARC is not managed, and user accepts TOS, then for some reason, stops it before AUTH is completed successfully (like shutdown), then re-enables it.\nIs managed check is fast for non-managed users, too?",
      "parentUuid": "44b32e79_0aa088b7",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40a6372c_44de9a2f",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 721,
      "author": {
        "id": 1228980
      },
      "writtenOn": "2017-11-13T20:25:16Z",
      "side": 1,
      "message": "1) I guess we could start the mini-container during the wizard for assistance UI TOS too. Yusuke, what do you think? In any case, it should probably be a separate commit.\n\n2) Yes, I believe the AndroidManagement check is very fast for non-managed users, cause it just calls IsNonEnterpriseUser, which is just a string comparison. No network IO is needed.",
      "parentUuid": "30a0f0f6_128bab1c",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16dc5d40_9b723c75",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 721,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-11-13T23:29:31Z",
      "side": 1,
      "message": "I\u0027d +1 for starting the mini container for the UI (in a separate CL) unless it\u0027s difficult to implement.",
      "parentUuid": "40a6372c_44de9a2f",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b8ca455_c3a1e317",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 721,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-11-14T04:56:00Z",
      "side": 1,
      "message": "Thank you for clarification.\n\nRe 1): So then could you move these lines into L733? I\u0027m ok either you\u0027ve done in this CL or in a separate CL as long as it is tested.",
      "parentUuid": "16dc5d40_9b723c75",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2a8f65b_33b3b5aa",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 723,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-11-09T20:20:03Z",
      "side": 1,
      "message": "To not break master, you probably want to guard this with ShouldArcOnlyStartAfterLogin() for now (until your run_oci work is done.)\n\n if (!ShouldArcOnlyStartAfterLogin())\n   arc_session_runner_-\u003eRequestStart(ArcInstanceMode::MINI_INSTANCE);",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa132dc8_7b1329d1",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 723,
      "author": {
        "id": 1228980
      },
      "writtenOn": "2017-11-10T20:48:38Z",
      "side": 1,
      "message": "Good point. I can\u0027t call ShouldARcOnlyStartAfterLogin from here, since that function is defined in componenets/arc/, not in chrome/browser/chromeos/arc/. Instead, I\u0027ll change the IsRequestAllowed to disallow starting the mini-instance when we should only start after login.",
      "parentUuid": "d2a8f65b_33b3b5aa",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ac6ef0b_04719d99",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 723,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-11-10T21:26:46Z",
      "side": 1,
      "message": "I think you can? The function is defined in components/arc/arc_util.h and that file is already #included here (component/ cannot call into chrome/ but the other way around is allowed.)",
      "parentUuid": "aa132dc8_7b1329d1",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8300d99_512df77b",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 723,
      "author": {
        "id": 1228980
      },
      "writtenOn": "2017-11-10T21:32:34Z",
      "side": 1,
      "message": "Oh! You\u0027re right. I\u0027m not really sure which is preferable in that case. I kind of like way I do it now, because it has the call to ShouldArcOnlyStartAfterLogin in one place, and means ArcSessionManager doesn\u0027t need to understand that concept. That being said, I don\u0027t like making calls to function where we already know that the call will do nothing at the call site. Do you have any preferences?",
      "parentUuid": "6ac6ef0b_04719d99",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31d773ca_31afda7d",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 723,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-11-10T21:43:01Z",
      "side": 1,
      "message": "The current code LG too. +1\u0027ed.",
      "parentUuid": "c8300d99_512df77b",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84d66c4f_5e71d374",
        "filename": "chrome/browser/chromeos/arc/arc_session_manager.cc",
        "patchSetId": 1
      },
      "lineNbr": 723,
      "author": {
        "id": 1228980
      },
      "writtenOn": "2017-11-13T20:25:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "31d773ca_31afda7d",
      "revId": "a8fbf5b6da5e8322087998f52dde6c5216575d1e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}