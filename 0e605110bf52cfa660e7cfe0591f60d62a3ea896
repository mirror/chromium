{
  "comments": [
    {
      "key": {
        "uuid": "6c05ec97_5ab8016c",
        "filename": "third_party/WebKit/Source/core/frame/Frame.h",
        "patchSetId": 4
      },
      "lineNbr": 175,
      "author": {
        "id": 1115930
      },
      "writtenOn": "2017-06-12T23:36:22Z",
      "side": 1,
      "message": "I can\u0027t immediately see a situation in which has_received_user_gesture_ and has_received_user_gesture_before_nav_ should be different. I\u0027m suspicious that the existing bit is sufficient.",
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e67b47f_7c49afa1",
        "filename": "third_party/WebKit/Source/core/frame/Frame.h",
        "patchSetId": 4
      },
      "lineNbr": 175,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-06-13T09:24:29Z",
      "side": 1,
      "message": "That\u0027s something mustaq@ and I decided to do so consumers can decide whether or not they want there feature to accept user gesture after navigation. This is something we can easily change but at the moment, we don\u0027t want to force all the other features to use the persisting bit because auotplay needs it. If it happens that everyone checks both bits, we could merge them.",
      "parentUuid": "6c05ec97_5ab8016c",
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d298a765_d36f1114",
        "filename": "third_party/WebKit/Source/core/frame/Frame.h",
        "patchSetId": 4
      },
      "lineNbr": 175,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-06-13T09:48:07Z",
      "side": 1,
      "message": "Btw, this isn\u0027t going to persist the bit correctly for OOPIF.\n\nMore generally, we need to clean this logic up if we want to add a new field: right now, has_received_user_gesture is also (sometimes) reset by LocalFrame::DocumentAttached, so we end up in a state where it\u0027s sometimes reset... and sometimes not.",
      "parentUuid": "8e67b47f_7c49afa1",
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "788023c0_1bd4f60b",
        "filename": "third_party/WebKit/Source/core/frame/Frame.h",
        "patchSetId": 4
      },
      "lineNbr": 175,
      "author": {
        "id": 1212719
      },
      "writtenOn": "2017-06-15T15:35:01Z",
      "side": 1,
      "message": "I\u0027ve added it to the FrameReplicationState to persist the bit for OOPIF. In terms of resetting has_received_user_gesture we could reset it in CommitProvisionalLoad although I am not quite sure why it isn\u0027t always being reset in DocumentAttached.",
      "parentUuid": "d298a765_d36f1114",
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5b773d7_771d1b2c",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1455,
      "author": {
        "id": 1115930
      },
      "writtenOn": "2017-06-12T23:36:22Z",
      "side": 1,
      "message": "provisional_document_loader_-\u003eGetFrame() is always the same as frame_ here.",
      "range": {
        "startLine": 1455,
        "startChar": 34,
        "endLine": 1455,
        "endChar": 42
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1737d9ce_1f91e302",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1455,
      "author": {
        "id": 1212719
      },
      "writtenOn": "2017-06-13T09:37:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d5b773d7_771d1b2c",
      "range": {
        "startLine": 1455,
        "startChar": 34,
        "endLine": 1455,
        "endChar": 42
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b7b9b8a_68d7f3d8",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1460,
      "author": {
        "id": 1115930
      },
      "writtenOn": "2017-06-12T23:36:22Z",
      "side": 1,
      "message": "You probably don\u0027t want to clear this bit here. This is at navigation start time, but the navigation might not result in the current Document being replaced if the navigation fails. You probably want to reset this state at commit time.",
      "range": {
        "startLine": 1460,
        "startChar": 10,
        "endLine": 1460,
        "endChar": 59
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3474cd9a_b6dcee2e",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1460,
      "author": {
        "id": 1212719
      },
      "writtenOn": "2017-06-13T09:37:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2b7b9b8a_68d7f3d8",
      "range": {
        "startLine": 1460,
        "startChar": 10,
        "endLine": 1460,
        "endChar": 59
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e2c4697_05f7d9d1",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1486,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-06-13T09:48:07Z",
      "side": 1,
      "message": "This should probably be based on the origin... what happens if it\u0027s an about:blank frame?",
      "range": {
        "startLine": 1486,
        "startChar": 23,
        "endLine": 1486,
        "endChar": 59
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cc44fb6_5514941a",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1486,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-06-13T10:12:48Z",
      "side": 1,
      "message": "The explanation wrt using eTLD+1 is given in the docs linked from the bug. TL;DR is that for autoplay, we don\u0027t want to penalise websites having www.foo.com and category.foo.com.",
      "parentUuid": "6e2c4697_05f7d9d1",
      "range": {
        "startLine": 1486,
        "startChar": 23,
        "endLine": 1486,
        "endChar": 59
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6ee0441_81e2d61f",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1486,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-06-13T10:30:47Z",
      "side": 1,
      "message": "Not sure why this penalizes those sites? We can still use the eTLD+1 logic.",
      "parentUuid": "6cc44fb6_5514941a",
      "range": {
        "startLine": 1486,
        "startChar": 23,
        "endLine": 1486,
        "endChar": 59
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33193fb4_722d27b3",
        "filename": "third_party/WebKit/Source/core/loader/FrameLoader.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1486,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-06-15T10:06:37Z",
      "side": 1,
      "message": "I guess I completely misunderstood what you meant. FWIW, `GetDomainAndRegistry` seems to expect a `host`.",
      "parentUuid": "c6ee0441_81e2d61f",
      "range": {
        "startLine": 1486,
        "startChar": 23,
        "endLine": 1486,
        "endChar": 59
      },
      "revId": "0e605110bf52cfa660e7cfe0591f60d62a3ea896",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}