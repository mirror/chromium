{
  "comments": [
    {
      "key": {
        "uuid": "f248b12c_bc2c6aea",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2018-01-06T02:44:14Z",
      "side": 1,
      "message": "I thought the ShelfWidget should be shown for some reason (the background black bar or something, maybe it insets the working area?) but if hiding the widget here seems to fix the defect without any negative side effects, then that part of the fix sgtm. Can you just call Hide() here instead of adding new functions?",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02126f52_a33525c1",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1127641
      },
      "writtenOn": "2018-01-08T20:22:16Z",
      "side": 1,
      "message": "I believe previous behavior was for it to be hidden entirely on webui, as that implements a separate shelf. iirc oobe/login/lock webui has logic to account for the size of the self.",
      "parentUuid": "f248b12c_bc2c6aea",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37525735_1f464ad8",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2018-01-10T02:03:27Z",
      "side": 1,
      "message": "To my best knowledge, shelf widget is not needed when web UI shelf is shown.\n\nMy previous cl simplified initialization of shelf by moving it into one place (instead of creating shelf in different places, create it once at the beginning and then just modify visibility). In the previous cl I was just hiding shelf views and not the widget itself. Unfortunately, shelf widget is consuming mouse input when inactive. Hiding the widget fixes the problem.\n\nIf I just call Show() and Hide() lot of tests (ShelfLayoutTests for instance) start to fail, so I am showing/hiding when it is really needed.",
      "parentUuid": "02126f52_a33525c1",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "277b2fab_69c0438a",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2018-01-10T20:29:03Z",
      "side": 1,
      "message": "What causes the test failures when just calling Hide and Show? Does calling Hide when it\u0027s already hidden (or calling Show when it\u0027s already showing) have some effect? That doesn\u0027t seem right. If so, can you check for widget [target] visibility instead of storing a separate boolean flag |is_shown_|?\n  if (IsVisible())\n    Hide();\n\n  if (!IsVisible())\n    Show();",
      "parentUuid": "37525735_1f464ad8",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "37f6f3ba_ac4b88de",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 396,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2018-01-06T02:44:14Z",
      "side": 1,
      "message": "Maybe just make the top if statement do:\n  if (!IsUsingViewsShelf() || state \u003d\u003d session_manager::SessionState::UNKNOWN) {\nThen the else block can just have one call to Show() outside the switch statement",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34971502_b5173e25",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 396,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2018-01-10T02:03:27Z",
      "side": 1,
      "message": "Switch was used here for readability, so you can easily see that all states are handled (and how they are handled). If I remove UNKNOWN, I will need to handle default case as NOTREACHED and I think some of the clarity will be lost. Do you prefer that version?",
      "parentUuid": "37f6f3ba_ac4b88de",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "928f0b48_ea420457",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2018-01-06T02:44:14Z",
      "side": 1,
      "message": "Why do we need to make the views invisible if we\u0027re hiding the widget? Shouldn\u0027t Hide() be sufficient?",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b2f8990_8642afb6",
        "filename": "ash/shelf/shelf_widget.cc",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2018-01-10T02:03:27Z",
      "side": 1,
      "message": "It is not necessary. Done.",
      "parentUuid": "928f0b48_ea420457",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf0e64d3_dc3c9ca5",
        "filename": "ash/shelf/shelf_widget_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 433,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2018-01-06T02:44:14Z",
      "side": 1,
      "message": "Check this unconditionally: EXPECT_EQ(shelf_visibility \u003d\u003d kNone, !shelf_view_-\u003evisible());",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "685e3983_1af09cf0",
        "filename": "ash/shelf/shelf_widget_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 433,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2018-01-10T02:03:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cf0e64d3_dc3c9ca5",
      "revId": "ad8cc13be491cc83d0035544091ca2e5574d225d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}