{
  "comments": [
    {
      "key": {
        "uuid": "ecc64505_82c41aa7",
        "filename": "chrome/browser/android/vr_shell/vr_shell.h",
        "patchSetId": 9
      },
      "lineNbr": 247,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2017-11-28T01:21:47Z",
      "side": 1,
      "message": "nit: confusing naming with your new class and this one.  Can/should they be merged, or can we differentiate the names better?",
      "range": {
        "startLine": 247,
        "startChar": 35,
        "endLine": 247,
        "endChar": 50
      },
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fa2b920_18d955db",
        "filename": "chrome/browser/android/vr_shell/vr_shell.h",
        "patchSetId": 9
      },
      "lineNbr": 247,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-11-28T14:56:04Z",
      "side": 1,
      "message": "Yeah, I know, the naming is not perfect. That is why I was wondering of the vr_shell metrics helper would become cross platform, which it seems to get. Let\u0027s discuss naming after branch cut.",
      "parentUuid": "ecc64505_82c41aa7",
      "range": {
        "startLine": 247,
        "startChar": 35,
        "endLine": 247,
        "endChar": 50
      },
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d169643_56682881",
        "filename": "chrome/browser/android/vr_shell/vr_usage_monitor.h",
        "patchSetId": 9
      },
      "lineNbr": 7,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2017-11-28T01:21:47Z",
      "side": 1,
      "message": "Take a look at https://chromium-review.googlesource.com/c/chromium/src/+/784095 - perhaps we can land part of that to avoid merge conflicts?",
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a259b412_1d17ef25",
        "filename": "chrome/browser/android/vr_shell/vr_usage_monitor.h",
        "patchSetId": 9
      },
      "lineNbr": 7,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-11-28T14:56:04Z",
      "side": 1,
      "message": "What about I revert the changes in vr usage monitor and you use the vr::Mode enum in your CL?",
      "parentUuid": "2d169643_56682881",
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f4a5028_d933d46c",
        "filename": "chrome/browser/android/vr_shell/vr_usage_monitor.h",
        "patchSetId": 9
      },
      "lineNbr": 7,
      "author": {
        "id": 1189473
      },
      "writtenOn": "2017-11-28T21:19:00Z",
      "side": 1,
      "message": "You can land your change, and I\u0027ll handle the merge.  Yours is ready to go, and I have an issue to work out still.",
      "parentUuid": "a259b412_1d17ef25",
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1cd2a8a_211b7f77",
        "filename": "chrome/browser/android/vr_shell/vr_usage_monitor.h",
        "patchSetId": 9
      },
      "lineNbr": 7,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-11-28T21:19:51Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "4f4a5028_d933d46c",
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b78807b0_c24b8f7e",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 23,
      "author": {
        "id": 1002483
      },
      "writtenOn": "2017-11-27T20:47:48Z",
      "side": 1,
      "message": "Are you sure about this value range? Do you really expect the VR assets component to take an hour to be ready? And is sub 500ms not possible? A histogram allocates an array of size \u003d num buckets, so if you don\u0027t expect or care about latencies above 1 minute, you\u0027re basically wasting half that array and costing yourself granularity. You can look at https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md#count-histograms for more detail (talks about counts histograms, but it also aplies to times)",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 23,
        "endChar": 62
      },
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34b66c98_e0a83c63",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 23,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-11-27T21:12:54Z",
      "side": 1,
      "message": "The latency depends a lot on how long the user\u0027s have Chrome open for until they enter VR. If they enter VR immediately after launching Chrome and the component is not installed the expectation is at least 6mins. However, it could be much longer depending on the component update queuing and data connection. I think it can be even longer than 1h. But if it is that long we have a problem and we don\u0027t get much out of more precise numbers. I picked this upper bound to get more granularity for the lower values. If the component is installed it takes a very short amount of time until the component infrastructure becomes aware of it and report the readiness. That\u0027s why I picked the lower bound. Everything below that should be fine for us.",
      "parentUuid": "b78807b0_c24b8f7e",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 23,
        "endChar": 62
      },
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e745a10_b04906b1",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 23,
      "author": {
        "id": 1002483
      },
      "writtenOn": "2017-11-28T20:31:26Z",
      "side": 1,
      "message": "It seems like it could be useful to log the installed/not-installed cases separately is it possible to distinguish them from the code? Otherwise I think you\u0027ll have trouble making meaningful statements about the metric.",
      "parentUuid": "34b66c98_e0a83c63",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 23,
        "endChar": 62
      },
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6751a1f9_048a1c0a",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 23,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-11-28T21:18:23Z",
      "side": 1,
      "message": "I don\u0027t know a good signal whether the component is installed already. It requires a check of the disk, which happens asynchronously. It\u0027s probably possible to dig into the component updater code more and plumb something through. However, I\u0027m worried this will not make it in for M-64. We discussed this in the team and we feel a single histogram would give us enough information. Why do you think the metric could not meaningful?",
      "parentUuid": "5e745a10_b04906b1",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 23,
        "endChar": 62
      },
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bef58205_95894f36",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 23,
      "author": {
        "id": 1002483
      },
      "writtenOn": "2017-11-29T19:51:30Z",
      "side": 1,
      "message": "Ok, then I guess you\u0027ll be going with this!\n\nI\u0027m worried that it might not be meaningful because it\u0027s really two metrics squished into one. A scenario I could imagine is, you set a particular threshold for reasonable latency, but you\u0027d maybe want it different for installed vs not-installed. In that case, you\u0027d have trouble knowing how many times you\u0027re above the threshold for the installed case since the not-installed case is mixed in.\n\nAnyway, you\u0027re right, you\u0027ll probably get useful data from this as is!",
      "parentUuid": "6751a1f9_048a1c0a",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 23,
        "endChar": 62
      },
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf972f9c_5c1662b6",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1002483
      },
      "writtenOn": "2017-11-27T20:47:48Z",
      "side": 1,
      "message": "If you don\u0027t have a need for the extra granularity, I\u0027d prefer you use 50 buckets instead.",
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c003a570_27c51761",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-11-27T21:12:54Z",
      "side": 1,
      "message": "I chose 100 since that gives us about minute granularity at the 6min mark IIUC. 50 buckets would be around 1.5min granularity. We could properly work with that. Are you concerned about the memory impact?",
      "parentUuid": "bf972f9c_5c1662b6",
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2f62fe4_94b21cfd",
        "filename": "chrome/browser/vr/metrics_helper.cc",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-11-29T17:30:42Z",
      "side": 1,
      "message": "Lowered to 50.",
      "parentUuid": "c003a570_27c51761",
      "revId": "1a9e93b8d2078bb219b87ba712df4c0907d629dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}