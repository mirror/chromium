{
  "comments": [
    {
      "key": {
        "uuid": "fd3da85f_7e49054d",
        "filename": "content/renderer/media/webrtc/two_keys_map.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "It would be good to also document something about the rationale for this data structure.",
      "range": {
        "startLine": 17,
        "startChar": 22,
        "endLine": 17,
        "endChar": 23
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "973f09fc_eb0d6320",
        "filename": "content/renderer/media/webrtc/two_keys_map.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fd3da85f_7e49054d",
      "range": {
        "startLine": 17,
        "startChar": 22,
        "endLine": 17,
        "endChar": 23
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d4a07fb_3eefaf80",
        "filename": "content/renderer/media/webrtc/two_keys_map.h",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "Name sounds a bit too generic for the content namespace, even if the class itself is generic. Maybe TwoKeysAdapterMap?\nAlso, consider moving this to a .cc file if possible to avoid exposing it.\nIf you do expose it, add documentation for all methods, including preconditions, etc.",
      "range": {
        "startLine": 21,
        "startChar": 6,
        "endLine": 21,
        "endChar": 16
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db74bedf_e08063bc",
        "filename": "content/renderer/media/webrtc/two_keys_map.h",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d4a07fb_3eefaf80",
      "range": {
        "startLine": 21,
        "startChar": 6,
        "endLine": 21,
        "endChar": 16
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6390b37c_377bee28",
        "filename": "content/renderer/media/webrtc/two_keys_map.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "Would returning by const ref instead of by pointer work?",
      "range": {
        "startLine": 45,
        "startChar": 7,
        "endLine": 45,
        "endChar": 8
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1028a59d_5e7341ac",
        "filename": "content/renderer/media/webrtc/two_keys_map.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Returning by pointer allows me to return null if no such element exists without implementing iterator support or doing a separate lookup for \"if exists\". Returning bool and having a Value* out argument leads to having to copy by value instead. Returning base::Optional has the same problems as returning by pointer except you end up having to copy the value.",
      "parentUuid": "6390b37c_377bee28",
      "range": {
        "startLine": 45,
        "startChar": 7,
        "endLine": 45,
        "endChar": 8
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "721c455d_dbca5263",
        "filename": "content/renderer/media/webrtc/two_keys_map.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T16:31:42Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1028a59d_5e7341ac",
      "range": {
        "startLine": 45,
        "startChar": 7,
        "endLine": 45,
        "endChar": 8
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a5304b93_500da398",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "Remove reference to crbug.com/758850. Leave only the one the reference to crbug.com/705901 and add extra details in that bug itself if necessary.",
      "range": {
        "startLine": 20,
        "startChar": 37,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "179f4da4_99d5b137",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a5304b93_500da398",
      "range": {
        "startLine": 20,
        "startChar": 37,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b67e9a4_850e7902",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.cc",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "you can use release() and avoid the nullptr assignment.",
      "range": {
        "startLine": 32,
        "startChar": 54,
        "endLine": 32,
        "endChar": 57
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b78f07c_99cb947a",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.cc",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Ah, no because it\u0027s a scoped_refptr, not a unique_ptr.",
      "parentUuid": "1b67e9a4_850e7902",
      "range": {
        "startLine": 32,
        "startChar": 54,
        "endLine": 32,
        "endChar": 57
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c8ba234_c4682514",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.cc",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T16:31:42Z",
      "side": 1,
      "message": "Ack. So many pointers :)",
      "parentUuid": "5b78f07c_99cb947a",
      "range": {
        "startLine": 32,
        "startChar": 54,
        "endLine": 32,
        "endChar": 57
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7010cdc2_b602d763",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.cc",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "how can you be sure that there will be a secondary key?\nWould it be incorrect to delete by primary key?",
      "range": {
        "startLine": 37,
        "startChar": 36,
        "endLine": 37,
        "endChar": 52
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6fcbd20_35d221a5",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.cc",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "We set the secondary key as soon as it the adapter is initialized in both local and remote cases.\nIn the local case we know this because initialization is synchronous.\nIn the remote case this is ensured by posting OnRemoteTrackAdapterInitialized with an AdapterRef. This ensures that there is at least one AdapterRef alive until after it has been initialized and secondary key set.",
      "parentUuid": "7010cdc2_b602d763",
      "range": {
        "startLine": 37,
        "startChar": 36,
        "endLine": 37,
        "endChar": 52
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a17f71b7_1bc37b8e",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "these scoped_refptrs should be passed by values since they are saved.",
      "range": {
        "startLine": 60,
        "startChar": 35,
        "endLine": 60,
        "endChar": 67
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2d97bfb_7c78f6f1",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a17f71b7_1bc37b8e",
      "range": {
        "startLine": 60,
        "startChar": 35,
        "endLine": 60,
        "endChar": 67
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "412c60c3_c503e5eb",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "HasOneRef-\u003eHasOneRef()\nAlso, add \"when an adapter is in use\"  or something like that to explain when HasOneRef() is false.",
      "range": {
        "startLine": 66,
        "startChar": 57,
        "endLine": 66,
        "endChar": 66
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d485784_ffe657c3",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "412c60c3_c503e5eb",
      "range": {
        "startLine": 66,
        "startChar": 57,
        "endLine": 66,
        "endChar": 66
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65051ceb_2d93900e",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "the new reference -\u003e a new reference",
      "range": {
        "startLine": 74,
        "startChar": 10,
        "endLine": 74,
        "endChar": 13
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64ad3ef2_03696557",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "65051ceb_2d93900e",
      "range": {
        "startLine": 74,
        "startChar": 10,
        "endLine": 74,
        "endChar": 13
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9714dce1_19053a42",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 78,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "How do you know which one to call?",
      "range": {
        "startLine": 78,
        "startChar": 30,
        "endLine": 78,
        "endChar": 50
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e18b3e01_c1594a53",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 78,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "That would depend on what the caller has, generally speaking calls from blink come with a blink object and callbacks from webrtc come with a webrtc object, but I don\u0027t think that should be documented here. If you think I should write something about that I could do it above the class? Here I added \"The adapter is a associated with a blink and webrtc track, lookup works by either track.\"\nOnly when you\u0027re creating a new adapter are you forced to use one or the other (local are created from blink, remote are created from webrtc)",
      "parentUuid": "9714dce1_19053a42",
      "range": {
        "startLine": 78,
        "startChar": 30,
        "endLine": 78,
        "endChar": 50
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "769c78b4_d5c869a7",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 78,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T16:31:42Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e18b3e01_c1594a53",
      "range": {
        "startLine": 78,
        "startChar": 30,
        "endLine": 78,
        "endChar": 50
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b2da0008_ec519d00",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "the new reference -\u003e a new reference",
      "range": {
        "startLine": 82,
        "startChar": 37,
        "endLine": 82,
        "endChar": 38
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f9f05bb_9a63335b",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b2da0008_ec519d00",
      "range": {
        "startLine": 82,
        "startChar": 37,
        "endLine": 82,
        "endChar": 38
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc4858f4_73c6239d",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "If you create by web_track, why do you ever need to look up by webrtc_track?\nWhat value does having the two keys add in this case?\nThe CL description mentions a problem only with remote tracks.",
      "range": {
        "startLine": 87,
        "startChar": 40,
        "endLine": 87,
        "endChar": 49
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f310b669_b72fd46f",
        "filename": "content/renderer/media/webrtc/webrtc_media_stream_track_adapter_map.h",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "Any callback or return value from webrtc would use webrtc tracks. For example, you might do getSenders() and webrtc returns webrtc senders with webrtc tracks and webrtc streams even though they were initially created with a blink track doing addTrack/addStream",
      "parentUuid": "bc4858f4_73c6239d",
      "range": {
        "startLine": 87,
        "startChar": 40,
        "endLine": 87,
        "endChar": 49
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d17d7c4d_a4872edf",
        "filename": "third_party/WebKit/Source/platform/mediastream/MediaStreamDescriptor.h",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-29T17:18:19Z",
      "side": 1,
      "message": "Note: Since I only needed to update the track adapter map, I could wait with adding a UniqueId to the descriptor until I fix the stream adapter map.",
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3584e87_c44ea402",
        "filename": "third_party/WebKit/public/platform/WebMediaStream.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-08-30T09:48:38Z",
      "side": 1,
      "message": "Why not call this UniqueId?",
      "range": {
        "startLine": 75,
        "startChar": 34,
        "endLine": 75,
        "endChar": 46
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15b067ee_072baa00",
        "filename": "third_party/WebKit/public/platform/WebMediaStream.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1126249
      },
      "writtenOn": "2017-08-30T15:11:08Z",
      "side": 1,
      "message": "No reason, leftover from old thing, changed to UniqueId().",
      "parentUuid": "f3584e87_c44ea402",
      "range": {
        "startLine": 75,
        "startChar": 34,
        "endLine": 75,
        "endChar": 46
      },
      "revId": "8cd6f4e5d44ea6af4b552637a28216ffe7204679",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}