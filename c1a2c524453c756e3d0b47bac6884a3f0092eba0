{
  "comments": [
    {
      "key": {
        "uuid": "49c7f89b_6026f8a7",
        "filename": "ios/chrome/browser/ui/browser_view_controller.mm",
        "patchSetId": 6
      },
      "lineNbr": 2501,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2017-12-05T09:32:08Z",
      "side": 1,
      "message": "This mean that the tab helper will be null for pre-rendering tab. So every use of PassKitTabHelper::FromWebState() should check for null return value.",
      "range": {
        "startLine": 2501,
        "startChar": 2,
        "endLine": 2501,
        "endChar": 72
      },
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a24795f_1f95e7d1",
        "filename": "ios/chrome/browser/ui/browser_view_controller.mm",
        "patchSetId": 6
      },
      "lineNbr": 2501,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-12-05T23:54:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "49c7f89b_6026f8a7",
      "range": {
        "startLine": 2501,
        "startChar": 2,
        "endLine": 2501,
        "endChar": 72
      },
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "34e571f7_436c1ba1",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.h",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1191445
      },
      "writtenOn": "2017-12-06T01:12:12Z",
      "side": 1,
      "message": "I am wondering if these properties should be stored as state on the object.\n\nAfter an initial download, |pass| and |webState| will be held for the lifetime of the BVC, even though they are not needed beyond the download.\n\nI also don\u0027t think these should be exposed publicly. The interface for presenting PassKit UI is through the TabHelper delegate, so these properties (and the start method) don\u0027t really need to be public.",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "229e024a_6cb0ec49",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.h",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-12-06T01:24:09Z",
      "side": 1,
      "message": "I think these property are the actual interface. PassKitTabHelperDelegate looks like a temp hack, because a better delegate does not exist. So these properties should be public. \n\nMark, what do you think?",
      "parentUuid": "34e571f7_436c1ba1",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d43e9d7_aa07809c",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.h",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1191445
      },
      "writtenOn": "2017-12-07T23:28:33Z",
      "side": 1,
      "message": "If we are going to keep these properties, then they should probably be cleared after presentation is done. If we don\u0027t, then they will be held for the lifetime of the BVC.",
      "parentUuid": "229e024a_6cb0ec49",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "094b8411_4907d7dd",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.h",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-12-07T23:40:13Z",
      "side": 1,
      "message": "Where do you propose to clear them? |start| is asynchronous method, so we can\u0027t clear them in delegate callback. Clearing in |start| would be incorrect, because start did not set them. I think it\u0027s an existing pattern to hold the properties for the lifetime of the BVC.",
      "parentUuid": "9d43e9d7_aa07809c",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9496187c_1d8186ac",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.h",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-12-08T21:44:59Z",
      "side": 1,
      "message": "Reset properties inside |stop| per offline conversation.",
      "parentUuid": "094b8411_4907d7dd",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46eaa9d7_2147104d",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.mm",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1191445
      },
      "writtenOn": "2017-12-06T01:12:12Z",
      "side": 1,
      "message": "I don\u0027t know if I see a particular benefit for putting this code in start instead of in |presentDialogForPass|. We have a variety of examples where the start method is not overridden, and the coordinator is sent messages through a different API. (https://cs.chromium.org/chromium/src/ios/chrome/browser/ui/activity_services/activity_service_legacy_coordinator.mm?q\u003dactivityservicelegacy\u0026dr\u003dC)\n\nUsing the delegate callback would allow us to avoid storing |pass| and |WebState| as properties.",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a202a234_8a45d0cc",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.mm",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-12-06T01:24:09Z",
      "side": 1,
      "message": "AFAIK this is how Mark sees the coordinator. |start| starts the activity and |stop| stops it. PassKitTabHelperDelegate looks like a hack to me because a better delegate does not exist (BVC is too big to add code there).",
      "parentUuid": "46eaa9d7_2147104d",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a731bbb_2e54f983",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.mm",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2017-12-07T22:58:11Z",
      "side": 1,
      "message": "That\u0027s essentially right; something has to be the PKTHDelegate. I would actually prefer it not to be this object, but the BVC has too many jobs at the moment. Conceptually, imagine that the delegate implementation and |pass| and |webState| properties belong to a tiny shim object. \n\nAs far as existing coordinator patterns as precedent: it\u0027s a good point, and I\u0027d like us to gradually get more consistent. Realistically, we\u0027re sorting out which patterns fit best and it doesn\u0027t always line up consistently. As long as we\u0027re moving towards less coupling, I\u0027m happy.",
      "parentUuid": "a202a234_8a45d0cc",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9ba41bf_58fece6f",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.mm",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1191445
      },
      "writtenOn": "2017-12-07T23:28:33Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2a731bbb_2e54f983",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "011229f8_b1f1076e",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.mm",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2017-12-05T09:32:08Z",
      "side": 1,
      "message": "InfoBarManagerImpl::CreateForWebState() is invoked in AttachTabHelpers(), so it cannot be null for any WebState that is used for a tab (pre-rendered or not). I think we can remove the TODO here and instead use a DCHECK as it is not possible to have a null value here if PassKitTabHelper::FromWebState() returns non-null value (which is the condition for this code to be invoked).",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc69ab8c_8711c4c2",
        "filename": "ios/chrome/browser/ui/download/pass_kit_coordinator.mm",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2017-12-05T23:54:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "011229f8_b1f1076e",
      "revId": "c1a2c524453c756e3d0b47bac6884a3f0092eba0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}