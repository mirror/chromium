{
  "comments": [
    {
      "key": {
        "uuid": "7176b9f0_a8861210",
        "filename": "chrome/browser/page_load_metrics/page_load_metrics_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 1246,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-11-29T01:12:51Z",
      "side": 1,
      "message": "this test appears to be failing on some of the bots not totally sure why though. can you take a look?",
      "revId": "4e06e791a91c187649110577832dc7ad5a896180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8f6e791_228776de",
        "filename": "chrome/browser/page_load_metrics/page_load_metrics_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 1246,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-11-29T01:17:48Z",
      "side": 1,
      "message": "ah, i think i know. we expect that first_layout must be set before first_paint, but that doesn\u0027t appear to be a valid assumption for svg files. because this expectation is not met, we do not dispatch any timing updates, so it looks to the test like the load event never fires, and it times out.\n\ni think it\u0027s reasonable to remove this check, since it doesn\u0027t hold generally.\n\nthe code to remove is:\n  if (!EventsInOrder(timing.document_timing-\u003efirst_layout,\n                     timing.paint_timing-\u003efirst_paint)) {\n    // This can happen when we process an XHTML document that doesn\u0027t contain\n    // well formed XML. See crbug.com/627607.\n    DLOG(ERROR) \u003c\u003c \"Invalid first_layout \"\n                \u003c\u003c timing.document_timing-\u003efirst_layout \u003c\u003c \" for first_paint \"\n                \u003c\u003c timing.paint_timing-\u003efirst_paint;\n    return internal::INVALID_ORDER_FIRST_LAYOUT_FIRST_PAINT;\n  }\n\nin IsValidPageLoadTiming in page_load_metrics_update_dispatcher.cc.",
      "parentUuid": "7176b9f0_a8861210",
      "revId": "4e06e791a91c187649110577832dc7ad5a896180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "625e83ce_05d7f5b7",
        "filename": "chrome/browser/page_load_metrics/page_load_metrics_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 1246,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-11-30T19:29:16Z",
      "side": 1,
      "message": "It looks like you applied this fix and the issue is still happening, IIUC.\n\nIs it possible that SVG documents do not fire a load event? Or that the load event isn\u0027t properly instrumented by our code that tracks load event firing in blink?\n\nAs a near term workaround since we know we get first paint notifications, could we change the line waiter-\u003eAddPageExpectation(TimingField::LOAD_EVENT); to waiter-\u003eAddPageExpectation(TimingField::FIRST_PAINT); and see if that gets the test passing?",
      "parentUuid": "d8f6e791_228776de",
      "revId": "4e06e791a91c187649110577832dc7ad5a896180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fef6701b_9846c345",
        "filename": "chrome/browser/page_load_metrics/page_load_metrics_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 1246,
      "author": {
        "id": 1221384
      },
      "writtenOn": "2017-12-04T16:21:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d8f6e791_228776de",
      "revId": "4e06e791a91c187649110577832dc7ad5a896180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef0a7631_8d9b51b6",
        "filename": "chrome/browser/page_load_metrics/page_load_metrics_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 1246,
      "author": {
        "id": 1221384
      },
      "writtenOn": "2017-12-04T16:21:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "625e83ce_05d7f5b7",
      "revId": "4e06e791a91c187649110577832dc7ad5a896180",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}