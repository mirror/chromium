{
  "comments": [
    {
      "key": {
        "uuid": "95188da6_0a2532c7",
        "filename": "third_party/WebKit/Source/core/animation/CompositorMutatorImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 61,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-11-01T23:50:37Z",
      "side": 1,
      "message": "If we post to the worklet thread before walking over the animators_ it seems like we no longer need the lock (all of the locked methods would be on the worklet thread) and we save posting and waiting for a task per animator. I think this will be necessary in the longrun too in order to aggregate all of the mutators output and send back a single message rather than risk having animators update at different rates.",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45a56fc2_45c5425c",
        "filename": "third_party/WebKit/Source/core/animation/CompositorMutatorImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 61,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2018-01-15T21:57:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "95188da6_0a2532c7",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef431d55_3db840ec",
        "filename": "third_party/WebKit/Source/core/workers/ThreadedWorkletGlobalScope.cpp",
        "patchSetId": 31
      },
      "lineNbr": 41,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-02T01:54:32Z",
      "side": 1,
      "message": "GetThread() should return a valid instance while this context is alive. Can you remove the former condition?\n\nI know this was necessary because we needed to make AnimationWorkletGlobalScope outlive WorkerThread for running MutateWithEvent(), and IsContextThread() can be called after WorkerThread destruction. However, in the latest patchset, we no longer need it because MutateWithEvent() is moved to AnimationWorkletProxyClientImpl.",
      "range": {
        "startLine": 41,
        "startChar": 9,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf55a241_8a65731e",
        "filename": "third_party/WebKit/Source/core/workers/ThreadedWorkletGlobalScope.cpp",
        "patchSetId": 31
      },
      "lineNbr": 41,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2017-11-16T21:44:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef431d55_3db840ec",
      "range": {
        "startLine": 41,
        "startChar": 9,
        "endLine": 41,
        "endChar": 23
      },
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "21a22198_36faec55",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletProxyClientImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 39,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-02T01:54:32Z",
      "side": 1,
      "message": "Can you also nullify |global_scope_| so that it\u0027s able to be GC\u0027ed as soon as possible? Without this, a posted task (MutateWithEvent) may extend the lifetime.",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fff26a2_0f329022",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletProxyClientImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 39,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2017-11-16T21:44:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "21a22198_36faec55",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "478e4c39_d1485cfb",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletProxyClientImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 57,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-02T01:54:32Z",
      "side": 1,
      "message": "Sorry for my misdirection. This |global_scope_| access could also cause race condition, so can you remove the latter condition?\n\nThe intention of this DCHECK is to confirm we\u0027re on the compositor thread. It\u0027d be nice that we\u0027ll have a thread checker specific for the compositor thread like IsCompositorThread() in a following CL.",
      "range": {
        "startLine": 57,
        "startChar": 29,
        "endLine": 57,
        "endChar": 42
      },
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f85d9c4_44966338",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletProxyClientImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 57,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2017-11-16T21:44:04Z",
      "side": 1,
      "message": "Quite - now when we are on the AnimationWorklet thread we may only access global_scope_ when active_ is true.\n\nFor other (queuing work) I taught the mutator_ how to check it is on the originating thread, I have exposed it and added the check here.",
      "parentUuid": "478e4c39_d1485cfb",
      "range": {
        "startLine": 57,
        "startChar": 29,
        "endLine": 57,
        "endChar": 42
      },
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31cef471_f524f50e",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletProxyClientImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 63,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-02T01:54:32Z",
      "side": 1,
      "message": "Can you add a TODO comment about switching GetSharedBackingThread to TaskRunnerHelper?",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16a494eb_2946b19a",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletProxyClientImpl.cpp",
        "patchSetId": 31
      },
      "lineNbr": 63,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2017-11-16T21:44:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "31cef471_f524f50e",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e842b2bc_34c3adca",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletThread.h",
        "patchSetId": 31
      },
      "lineNbr": 48,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-02T01:54:32Z",
      "side": 1,
      "message": "Do we need to move these functions from private to protected?",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a3a74e0_2f43ee5c",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletThread.h",
        "patchSetId": 31
      },
      "lineNbr": 48,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2017-11-16T21:44:04Z",
      "side": 1,
      "message": "Not any more, fixed.",
      "parentUuid": "e842b2bc_34c3adca",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79438234_2be0a44a",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletThreadTest.cpp",
        "patchSetId": 31
      },
      "lineNbr": 45,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-02T01:54:32Z",
      "side": 1,
      "message": "\u003d default; ?",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb156e7b_fa187000",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletThreadTest.cpp",
        "patchSetId": 31
      },
      "lineNbr": 45,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2017-11-16T21:44:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "79438234_2be0a44a",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46422e1e_0a949573",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletThreadTest.cpp",
        "patchSetId": 31
      },
      "lineNbr": 84,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-11-02T01:54:32Z",
      "side": 1,
      "message": "Can you remove this line?",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66ff33c1_30cfbd29",
        "filename": "third_party/WebKit/Source/modules/animationworklet/AnimationWorkletThreadTest.cpp",
        "patchSetId": 31
      },
      "lineNbr": 84,
      "author": {
        "id": 1000279
      },
      "writtenOn": "2017-11-16T21:44:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "46422e1e_0a949573",
      "revId": "a028f2421ee90f2156d8b4f636c8f9773635d41b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}