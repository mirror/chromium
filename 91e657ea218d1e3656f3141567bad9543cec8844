{
  "comments": [
    {
      "key": {
        "uuid": "fef6c063_b3ccd799",
        "filename": "chrome/browser/vr/service/vr_device_manager.cc",
        "patchSetId": 10
      },
      "lineNbr": 84,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-11-30T01:12:35Z",
      "side": 1,
      "message": "Can you throw in a TODO under RemoveDevice to connect the fallback device if it\u0027s the only remaining device? (Alternatively, implement that now, even though it won\u0027t actually be hit)",
      "range": {
        "startLine": 84,
        "startChar": 9,
        "endLine": 84,
        "endChar": 45
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2cfc1130_ced650a0",
        "filename": "chrome/browser/vr/service/vr_device_manager.cc",
        "patchSetId": 10
      },
      "lineNbr": 84,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fef6c063_b3ccd799",
      "range": {
        "startLine": 84,
        "startChar": 9,
        "endLine": 84,
        "endChar": 45
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa86a7a_af3b9f3c",
        "filename": "device/vr/orientation/orientation_device.cc",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-12-01T11:23:21Z",
      "side": 1,
      "message": "\u003d default;",
      "range": {
        "startLine": 76,
        "startChar": 40,
        "endLine": 76,
        "endChar": 42
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "403b33cd_77e19357",
        "filename": "device/vr/orientation/orientation_device.cc",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baa86a7a_af3b9f3c",
      "range": {
        "startLine": 76,
        "startChar": 40,
        "endLine": 76,
        "endChar": 42
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b3ba83d_e55e8831",
        "filename": "device/vr/orientation/orientation_device.cc",
        "patchSetId": 10
      },
      "lineNbr": 90,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-11-30T00:59:22Z",
      "side": 1,
      "message": "|default_config_| can be a local variable.",
      "range": {
        "startLine": 90,
        "startChar": 2,
        "endLine": 90,
        "endChar": 17
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e5a8bc2_0ef10f41",
        "filename": "device/vr/orientation/orientation_device.cc",
        "patchSetId": 10
      },
      "lineNbr": 90,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7b3ba83d_e55e8831",
      "range": {
        "startLine": 90,
        "startChar": 2,
        "endLine": 90,
        "endChar": 17
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a9ca897_70b675ad",
        "filename": "device/vr/orientation/orientation_device.cc",
        "patchSetId": 10
      },
      "lineNbr": 153,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-11-30T00:59:22Z",
      "side": 1,
      "message": "latest_reading",
      "range": {
        "startLine": 153,
        "startChar": 16,
        "endLine": 153,
        "endChar": 31
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1961755e_6fd88b84",
        "filename": "device/vr/orientation/orientation_device.cc",
        "patchSetId": 10
      },
      "lineNbr": 153,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1a9ca897_70b675ad",
      "range": {
        "startLine": 153,
        "startChar": 16,
        "endLine": 153,
        "endChar": 31
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fdd3ef03_f063cdb4",
        "filename": "device/vr/orientation/orientation_device.h",
        "patchSetId": 10
      },
      "lineNbr": 20,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-11-30T01:12:35Z",
      "side": 1,
      "message": "nit: newline above",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 9
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85202d0c_3316b37d",
        "filename": "device/vr/orientation/orientation_device.h",
        "patchSetId": 10
      },
      "lineNbr": 20,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fdd3ef03_f063cdb4",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 9
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9008782_aba9f4cb",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-12-01T11:23:21Z",
      "side": 1,
      "message": "style: you need to leave one empty line between these two includes",
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b92bd80_c48942b8",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9008782_aba9f4cb",
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "687d00aa_894084ab",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 14,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-12-01T11:23:21Z",
      "side": 1,
      "message": "BTW, when I said \"inside the class\" I mean inside the class declaration. Something like:\n```\nclass OrientationProvider {\n public:\n  using GetDeviceCallback \u003d base::OnceCallback\u003cvoid(VRDevice*)\u003e;\n};\n```\n\nThe difference between this and what you had before (`using` instruction outside of the `class` block) is that callers will have to prefix the type like this: `device::OrientatioProvider::GetDeviceCallback`. Basically, the class behaves like a namespace.",
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96071ce5_143907f2",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 14,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "That was supposed to have been deleted in the refactor, it\u0027s now gone :). Thanks for the explanation though, that does make sense.",
      "parentUuid": "687d00aa_894084ab",
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a5a15b56_25c22944",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1113896
      },
      "writtenOn": "2017-11-30T00:59:22Z",
      "side": 1,
      "message": "This connection error handler isn\u0027t necessary. Removing it guarantees that |sensor_provider_| is always valid. Otherwise you need to check in Initialize().",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "226f2957_b92d0937",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a5a15b56_25c22944",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c97de0a_e28b4d2c",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-11-30T01:12:35Z",
      "side": 1,
      "message": "Why have a separate call to set the ready callback? Can you move it to the constructor?",
      "range": {
        "startLine": 40,
        "startChar": 13,
        "endLine": 40,
        "endChar": 29
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7daced4f_6fc5d417",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c97de0a_e28b4d2c",
      "range": {
        "startLine": 40,
        "startChar": 13,
        "endLine": 40,
        "endChar": 29
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "044b3537_3535ce8b",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 61,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-12-01T11:23:21Z",
      "side": 1,
      "message": "Would it make sense to do this before the `add_device_callback_` call?\n\nAlso, you might want to make a local copy of the callbacks being run after another callback to avoid a callback interfering with the state of the object.",
      "range": {
        "startLine": 60,
        "startChar": 0,
        "endLine": 61,
        "endChar": 41
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa0409d7_e060a16b",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 61,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "I\u0027m not 100% sure what you mean, can you clarify?",
      "parentUuid": "044b3537_3535ce8b",
      "range": {
        "startLine": 60,
        "startChar": 0,
        "endLine": 61,
        "endChar": 41
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "852481b7_25977f65",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 61,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-12-04T16:03:25Z",
      "side": 1,
      "message": "We definitely want to run the add_device_callback_ before the initialized_callback_ so that when the VrService is notified of initialization being complete the devices have already been added.\n\nThe ordering really shouldn\u0027t matter, but there\u0027s kind of a deficiency in the WebVR 1.1 spec where most sites only call Navigator.getVRDisplays() once, and don\u0027t register onDisplayConnected event handlers, so if we add the device after responding to getVRDisplays they won\u0027t pick it up :(\n\nMounir, is the worry that running the callback could theoretically trigger the DeviceManager to delete this provider, and hence reset the second callback before it\u0027s used if it isn\u0027t copied? If we were to copy the second callback to allow the provider to be deleted in the first callback we would also have to take into account that the initialized callback could be run for a provider that\u0027s been deleted, which could get quite complicated.",
      "parentUuid": "fa0409d7_e060a16b",
      "range": {
        "startLine": 60,
        "startChar": 0,
        "endLine": 61,
        "endChar": 41
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40dfb937_3babf26e",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 61,
      "author": {
        "id": 1115974
      },
      "writtenOn": "2017-12-05T19:35:27Z",
      "side": 1,
      "message": "I guess because the only way to reset `initialized_callback_` is to call `Initialize()` which will be a no-op for the callback if the `device_` is set, it\u0027s probably not a real problem in practice. So feel free to ignore my comment :)",
      "parentUuid": "852481b7_25977f65",
      "range": {
        "startLine": 60,
        "startChar": 0,
        "endLine": 61,
        "endChar": 41
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5bf38f2_4e105164",
        "filename": "device/vr/orientation/orientation_device_provider.cc",
        "patchSetId": 10
      },
      "lineNbr": 61,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-06T22:17:29Z",
      "side": 1,
      "message": "Done :)",
      "parentUuid": "40dfb937_3babf26e",
      "range": {
        "startLine": 60,
        "startChar": 0,
        "endLine": 61,
        "endChar": 41
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "58167ef6_53e21eae",
        "filename": "device/vr/orientation/orientation_device_provider.h",
        "patchSetId": 10
      },
      "lineNbr": 46,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-11-30T00:22:50Z",
      "side": 1,
      "message": "This does not belong here.",
      "range": {
        "startLine": 45,
        "startChar": 4,
        "endLine": 46,
        "endChar": 0
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e09f4ab_342a425f",
        "filename": "device/vr/orientation/orientation_device_provider.h",
        "patchSetId": 10
      },
      "lineNbr": 46,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "58167ef6_53e21eae",
      "range": {
        "startLine": 45,
        "startChar": 4,
        "endLine": 46,
        "endChar": 0
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "050f9e9f_265d2431",
        "filename": "device/vr/vr_device.h",
        "patchSetId": 10
      },
      "lineNbr": 32,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-11-30T01:12:35Z",
      "side": 1,
      "message": "You should probably clarify in this comment how it behaves differently :P",
      "range": {
        "startLine": 32,
        "startChar": 6,
        "endLine": 32,
        "endChar": 72
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8adcdf8a_2481df50",
        "filename": "device/vr/vr_device.h",
        "patchSetId": 10
      },
      "lineNbr": 32,
      "author": {
        "id": 1243285
      },
      "writtenOn": "2017-12-02T01:16:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "050f9e9f_265d2431",
      "range": {
        "startLine": 32,
        "startChar": 6,
        "endLine": 32,
        "endChar": 72
      },
      "revId": "91e657ea218d1e3656f3141567bad9543cec8844",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}