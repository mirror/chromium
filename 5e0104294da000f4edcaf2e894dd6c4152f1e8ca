{
  "comments": [
    {
      "key": {
        "uuid": "fc9835e3_5e35300a",
        "filename": "ui/message_center/message_center_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1000175
      },
      "writtenOn": "2018-01-11T01:18:06Z",
      "side": 0,
      "message": "Could you keep this flag? I want to prevent someone from modifying notifications while another modification. For example, someone had removed notifications in OnNotificationUpdated observer and it had caused a crash. I want to prohibit such a complex flow.",
      "range": {
        "startLine": 121,
        "startChar": 2,
        "endLine": 121,
        "endChar": 26
      },
      "revId": "5e0104294da000f4edcaf2e894dd6c4152f1e8ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d00c5f9_2d8e19e5",
        "filename": "ui/message_center/message_center_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-11T17:52:29Z",
      "side": 0,
      "message": "Are you suggesting just DCHECKing when that happens?\n\n\u003e someone had removed notifications in OnNotificationUpdated observer and it had caused a crash. I want to prohibit such a complex flow.\n\nCan you point me at that example? Are you referring to the tether notification code?",
      "parentUuid": "fc9835e3_5e35300a",
      "range": {
        "startLine": 121,
        "startChar": 2,
        "endLine": 121,
        "endChar": 26
      },
      "revId": "5e0104294da000f4edcaf2e894dd6c4152f1e8ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7b2dc87_95d901ba",
        "filename": "ui/message_center/message_center_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1000175
      },
      "writtenOn": "2018-01-12T03:20:34Z",
      "side": 0,
      "message": "Ah, yes. Sorry for lacking words. I meant:\n- keeping ScopedNotificationsIterationLock only if DCHECK_IS_ON()\n- keeping current DCHECK\n- replacing code checking the \"iterating\" flag with DHCEK (these code are in MessageCenterImpl::AddNotification, UpdateNotification, RemoveNotificaiton, SetNotificationIcon, SetNotificationImage and SetNotificationButtonIcon)\n\nI want to prevent someone from adding the code of manipulating notification in observers in feature. I think this kind of bug is easy to be added by mistake. This check with the \"iterating\" flag is inspired by views::View::iterating_;\n\nWhat I was referring in my previous comment is the tether notification code issue (http://crbug.com/762803), which you also mentioned in the description.",
      "parentUuid": "0d00c5f9_2d8e19e5",
      "range": {
        "startLine": 121,
        "startChar": 2,
        "endLine": 121,
        "endChar": 26
      },
      "revId": "5e0104294da000f4edcaf2e894dd6c4152f1e8ca",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}