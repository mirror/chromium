{
  "comments": [
    {
      "key": {
        "uuid": "3839b87c_135631fa",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "final for all the members here",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fff55aa7_57ece293",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3839b87c_135631fa",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea57bd28_28fbf559",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 39,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "ThumbnailStorage is better",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33fe292e_8dbf38e4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 39,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Done. I\u0027ve also changed the class name to \u0027ThumbnailDiskStorage\u0027",
      "parentUuid": "ea57bd28_28fbf559",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c284fcf_eb2322cc",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "use executeOnExecutor(SERIAL_EXECUTOR), so that all the asynctask in this class won\u0027t interfere each other",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c92f3a14_2ac98877",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-20T18:44:55Z",
      "side": 1,
      "message": "The SERIAL_EXECUTOR is used by default. If you don\u0027t need the tasks to be sequential, you can use the THREAD_POOL_EXECUTOR.",
      "parentUuid": "5c284fcf_eb2322cc",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5ae066a_385505d6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Thanks for pointing this out. I\u0027ve added a note that clarifies that tasks are sequential.",
      "parentUuid": "c92f3a14_2ac98877",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8acad9f_226713e8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "executeOnExecutor(SERIAL_EXECUTOR)",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff851c43_82e65989",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "I kept it the same because after HONEYCOMB, tasks are executed on a single thread, so this won\u0027t be a problem.",
      "parentUuid": "a8acad9f_226713e8",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a930782_0ebd5020",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "executeOnExecutor(SERIAL_EXECUTOR)",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9639d62d_6ceb73da",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3a930782_0ebd5020",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b8c8385_57643a1d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 181,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "Synchronizing a function is bad, only synchronize the block that you need to protect against simultaneous access.\nadd is a bad name, use addEntriesToDisk() is better",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98cc6261_022b1226",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 181,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Thanks! I\u0027ve taken out the synchronized blocks now that sDiskLruCache is only accessed in AsyncTask and all AsyncTasks are executed serially.",
      "parentUuid": "4b8c8385_57643a1d",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "60d594ca_1462b5a9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 221,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "ditto",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20810278_81a11f67",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 221,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "60d594ca_1462b5a9",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df6a2701_ecd6ac4e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 286,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "This can also happen as an async task, right?",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "953e811b_35720643",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderDiskStorage.java",
        "patchSetId": 3
      },
      "lineNbr": 286,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Good idea! I\u0027ve moved this call into initDiskCache() which is called by InitTask.",
      "parentUuid": "df6a2701_ecd6ac4e",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "42a6ebfd_6ff998d7",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1123275
      },
      "writtenOn": "2017-07-20T09:51:40Z",
      "side": 1,
      "message": "This is now unused?",
      "range": {
        "startLine": 107,
        "startChar": 77,
        "endLine": 107,
        "endChar": 89
      },
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5c6f8d6_69449a13",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "I\u0027ve reverted back to include it. Thanks.",
      "parentUuid": "42a6ebfd_6ff998d7",
      "range": {
        "startLine": 107,
        "startChar": 77,
        "endLine": 107,
        "endChar": 89
      },
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bda3c4ce_ca655fab",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 1123275
      },
      "writtenOn": "2017-07-20T09:51:40Z",
      "side": 1,
      "message": "Why not let the caller of the ThumbnailProvider say whether they should be cached? Would this change much for a single instance? For example downloads home wants the cache but Zine probably wouldn\u0027t use it because the thumbnails will change a more frequently. (or maybe we should so that we can discard them from the memory more aggressively... +bauerb@ thoughts?)",
      "range": {
        "startLine": 126,
        "startChar": 16,
        "endLine": 126,
        "endChar": 33
      },
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f79d999_f7a0d839",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-07-20T12:45:21Z",
      "side": 1,
      "message": "I agree that it would be better to make this part of the Request interface than inferring it from the class (which means that this class would have to know about its clients, which is a circular dependency). I would be tempted to keep the current caching strategy, if only because download suggestions are going to go away with CH anyway.",
      "parentUuid": "bda3c4ce_ca655fab",
      "range": {
        "startLine": 126,
        "startChar": 16,
        "endLine": 126,
        "endChar": 33
      },
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4df41432_cc37887b",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/download/ui/ThumbnailProviderImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Good idea! I\u0027ve made it part of the Request interface.\nThumbnailProviderImpl is used in download home as well, where a disk cache would help. I\u0027ve included the design doc in the bug now.",
      "parentUuid": "9f79d999_f7a0d839",
      "range": {
        "startLine": 126,
        "startChar": 16,
        "endLine": 126,
        "endChar": 33
      },
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "032d076e_c8d3229d",
        "filename": "chrome/browser/android/chrome_jni_registrar.cc",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "why we need this file?",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcc0a580_c42ebc28",
        "filename": "chrome/browser/android/chrome_jni_registrar.cc",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "I think it was auto-merged in because I worked from the version that was two weeks ago. I\u0027ve removed it now.",
      "parentUuid": "032d076e_c8d3229d",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "11f6db25_e2ae6ad1",
        "filename": "chrome/browser/android/download/ui/thumbnail_provider_generator.cc",
        "patchSetId": 3
      },
      "lineNbr": 5,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "use \"\" instead of \u003c\u003e",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5aff2d3_352a0c9c",
        "filename": "chrome/browser/android/download/ui/thumbnail_provider_generator.cc",
        "patchSetId": 3
      },
      "lineNbr": 5,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "11f6db25_e2ae6ad1",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b2b931bd_3d270d2b",
        "filename": "chrome/browser/android/download/ui/thumbnail_provider_generator.h",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-07-20T17:34:25Z",
      "side": 1,
      "message": "I think ThumbnailGenerator is more proper name",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8fd9f4b9_7469d8e8",
        "filename": "chrome/browser/android/download/ui/thumbnail_provider_generator.h",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1211000
      },
      "writtenOn": "2017-07-21T15:33:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b2b931bd_3d270d2b",
      "revId": "289892fa49a638f4f919ab0e782f5ec04bbc03a8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}