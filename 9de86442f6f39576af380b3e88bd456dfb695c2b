{
  "comments": [
    {
      "key": {
        "uuid": "e6381285_7c767e09",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/PwaAmbientBadgeInfoBar.java",
        "patchSetId": 4
      },
      "lineNbr": 58,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2018-01-23T23:43:00Z",
      "side": 1,
      "message": "mdjones: it seems that using a bitmap icon for the compact infobar results in the icon having no padding to the left or to the right, which looks awful (i.e. the text is right next to the icon). I\u0027m assuming this might be because the icons shipped with Chrome and accessed with an ID already have padding? In any case, that\u0027s why I\u0027m manually added this padding back here. Let me know if there\u0027s a better solution (perhaps pushing this change into InfoBarCompactLayout if the icon is from a bitmap?).",
      "range": {
        "startLine": 57,
        "startChar": 8,
        "endLine": 58,
        "endChar": 58
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60aab911_a4c36c8d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/PwaAmbientBadgeInfoBar.java",
        "patchSetId": 4
      },
      "lineNbr": 58,
      "author": {
        "id": 1135279
      },
      "writtenOn": "2018-01-26T19:37:39Z",
      "side": 1,
      "message": "It doesn\u0027t look like there\u0027s any logic for this (which is surprising) so I think what you have is fine. I\u0027m going to try to dig up the infobar spec to confirm this is ok.",
      "parentUuid": "e6381285_7c767e09",
      "range": {
        "startLine": 57,
        "startChar": 8,
        "endLine": 58,
        "endChar": 58
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66033567_05a29fa6",
        "filename": "chrome/browser/about_flags.cc",
        "patchSetId": 4
      },
      "lineNbr": 3420,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2018-01-28T05:42:20Z",
      "side": 1,
      "message": "I think we should just have one flag which enables this and also modal dialogs on Android (similar to how we now have one flag on desktop to enable all the new stuff).",
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8afc9eb9_554bcd67",
        "filename": "chrome/browser/about_flags.cc",
        "patchSetId": 4
      },
      "lineNbr": 3420,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2018-01-30T01:04:12Z",
      "side": 1,
      "message": "I\u0027ve moved this to be under the experimental app banner flag.",
      "parentUuid": "66033567_05a29fa6",
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65b0f0c5_b3924eb3",
        "filename": "chrome/browser/banners/app_banner_infobar_delegate_android.cc",
        "patchSetId": 4
      },
      "lineNbr": 197,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2018-01-28T05:42:20Z",
      "side": 1,
      "message": "Is this change related? It\u0027s strange that this isn\u0027t guarded by a feature / flag.",
      "range": {
        "startLine": 197,
        "startChar": 20,
        "endLine": 197,
        "endChar": 32
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b3478a5_001f0d33",
        "filename": "chrome/browser/banners/app_banner_infobar_delegate_android.cc",
        "patchSetId": 4
      },
      "lineNbr": 197,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2018-01-30T01:04:12Z",
      "side": 1,
      "message": "Yes, this change is part of moving the CreateShortcutInfo() method from the anonymous namespace in app_banner_manager_android.cc to a static method so that it can be used by the PwaAmbientInfobarManager. These lines of code were formerly in the anonymous method.",
      "parentUuid": "65b0f0c5_b3924eb3",
      "range": {
        "startLine": 197,
        "startChar": 20,
        "endLine": 197,
        "endChar": 32
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4a0e84aa_e5ca9176",
        "filename": "chrome/browser/banners/app_banner_infobar_delegate_android.cc",
        "patchSetId": 4
      },
      "lineNbr": 197,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2018-01-30T20:14:45Z",
      "side": 1,
      "message": "Ah ok, nice - this is a much better place for this!",
      "parentUuid": "3b3478a5_001f0d33",
      "range": {
        "startLine": 197,
        "startChar": 20,
        "endLine": 197,
        "endChar": 32
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bbacf1dc_610ad2ad",
        "filename": "chrome/browser/installable/pwa_ambient_badge_manager_android.h",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2018-01-28T05:42:20Z",
      "side": 1,
      "message": "I would have thought we\u0027d add this functionality to the normal manager, since it seems quite linked to it. E.g. while it is an infobar, we might want to prevent showing it if the site prevents default or something.",
      "range": {
        "startLine": 18,
        "startChar": 6,
        "endLine": 18,
        "endChar": 35
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8897019f_0fef08cd",
        "filename": "chrome/browser/installable/pwa_ambient_badge_manager_android.h",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2018-01-30T01:04:12Z",
      "side": 1,
      "message": "I did it this way because I didn\u0027t want to bloat the existing manager even more without refactoring, and I want to be able to have UX play with this asap.\n\nThe eventual structure I want to get to is that there is one installability manager which owns both the AppBannerManager and the PwaAmbientBadgeManager. That installability manager:\n\n1. checks for installability on page load\n2. tells PwaAmbientBadgeManager to show the badge or not\n3. tells AppBannerManager to start the banner pipeline\n\nAppBannerManager would then:\n\n1. check engagement / trigger when enough engagement\n2. interface with Blink for beforeinstallpromptevent\n\nSo I want to land this as a separate class because that\u0027s how I think it should ideally end up. The next step is teasing apart AppBannerManager into the installability manager and the actual AppBannerManager, and then refactoring. WDYT?",
      "parentUuid": "bbacf1dc_610ad2ad",
      "range": {
        "startLine": 18,
        "startChar": 6,
        "endLine": 18,
        "endChar": 35
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f450dc1b_65a72c07",
        "filename": "chrome/browser/installable/pwa_ambient_badge_manager_android.h",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2018-01-30T20:14:45Z",
      "side": 1,
      "message": "OK that structure makes sense. It would be good to move to the new structure quickly as I think getting the interaction with the banner right might be tricky.\n\nDid you consider adding it as a field to the AppBannerManager now? That way you don\u0027t need to create a new WebContentsObserver / add it to the list of global helpers, can integrate it a little to the AppBannerManager flow, but still keep the code separate / avoid bloating.",
      "parentUuid": "8897019f_0fef08cd",
      "range": {
        "startLine": 18,
        "startChar": 6,
        "endLine": 18,
        "endChar": 35
      },
      "revId": "9de86442f6f39576af380b3e88bd456dfb695c2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}