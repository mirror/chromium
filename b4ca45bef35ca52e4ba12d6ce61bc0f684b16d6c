{
  "comments": [
    {
      "key": {
        "uuid": "033a4520_c1586a5a",
        "filename": "cc/paint/display_item_list.cc",
        "patchSetId": 17
      },
      "lineNbr": 101,
      "author": {
        "id": 1128438
      },
      "writtenOn": "2017-05-16T00:43:21Z",
      "side": 1,
      "message": "It\u0027s been a while but at one point I think the idea was that this whole conditional was redundant, because we wouldn\u0027t have even gotten here if we hadn\u0027t matched the item\u0027s rect in the rtree. So we thought we could remove it. But we may have overlooked some issues, or I could have been mistaken, or both.\n\nWhat happens if we remove this line and next, layout-test-wise?",
      "revId": "b4ca45bef35ca52e4ba12d6ce61bc0f684b16d6c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7999648_806a607e",
        "filename": "cc/paint/display_item_list.cc",
        "patchSetId": 17
      },
      "lineNbr": 101,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2017-05-16T14:56:24Z",
      "side": 1,
      "message": "This is interesting, thanks for bringing it up. Some good news is this code goes away entirely soon.  https://chromium-review.googlesource.com/c/506430/ stops using cc::DisplayItem for the UI. The next step would be to do that for blink also, which would effectively get rid of this line. I will make a patch to try out removing just this line to make us aware of any problems that may be awaiting.",
      "parentUuid": "033a4520_c1586a5a",
      "revId": "b4ca45bef35ca52e4ba12d6ce61bc0f684b16d6c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b362e04_76064193",
        "filename": "cc/paint/display_item_list.cc",
        "patchSetId": 17
      },
      "lineNbr": 101,
      "author": {
        "id": 1002513
      },
      "writtenOn": "2017-05-16T15:18:34Z",
      "side": 1,
      "message": "We were looking at this recently with Khushal. There was some awkward interaction with images that had padding. Specifically, we\u0027d hit the image hijack canvas and see an image that was actually outside of the cull rect, which we would process but skia would then ignore. \n\nHowever, I don\u0027t really recall the details or whether we\u0027ve narrowed down our search sufficiently. +khushalsagar, do you remember if this was necessary for our use-case? It seems that both cullRect() and item.bounds would contain the same padding as we would use in the rtree, so maybe this is a red herring.",
      "parentUuid": "c7999648_806a607e",
      "revId": "b4ca45bef35ca52e4ba12d6ce61bc0f684b16d6c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ef9bc19_7e65cd81",
        "filename": "cc/paint/display_item_list.cc",
        "patchSetId": 17
      },
      "lineNbr": 101,
      "author": {
        "id": 1002513
      },
      "writtenOn": "2017-05-16T15:22:25Z",
      "side": 1,
      "message": "(to put it differently, I think relying on layout tests as verification that this line is unnecessary is insufficient, since the effect might be a degradation in performance and not a visual artifact)",
      "parentUuid": "0b362e04_76064193",
      "revId": "b4ca45bef35ca52e4ba12d6ce61bc0f684b16d6c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e61710ac_b203691b",
        "filename": "third_party/WebKit/Source/platform/graphics/paint/DrawingDisplayItem.h",
        "patchSetId": 17
      },
      "lineNbr": 21,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-05-15T17:40:37Z",
      "side": 1,
      "message": "Looks better, thanks. BTW in case it was not already clear, the reason we pass along the visual rect is for\nperformance. It is indeed the case that it is possible to compute it from the surrounding context of transforms,\nclips etc.",
      "revId": "b4ca45bef35ca52e4ba12d6ce61bc0f684b16d6c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a5629e0_7ba7448d",
        "filename": "third_party/WebKit/Source/platform/graphics/paint/DrawingDisplayItem.h",
        "patchSetId": 17
      },
      "lineNbr": 21,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2017-05-15T17:43:36Z",
      "side": 1,
      "message": "Yep that makes sense, since we\u0027re going to be writing our own transform/clip stack at some point for doing raster, we may be able to leverage that to remove one of the two rects, or we may find other ways to do so that maintain performance. We shall see, thanks for the valuable feedbacks.",
      "parentUuid": "e61710ac_b203691b",
      "revId": "b4ca45bef35ca52e4ba12d6ce61bc0f684b16d6c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}