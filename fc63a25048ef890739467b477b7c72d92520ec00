{
  "comments": [
    {
      "key": {
        "uuid": "f951d58c_14099cf5",
        "filename": "third_party/WebKit/LayoutTests/http/tests/serviceworker/chromium/usecounted-features.html",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-06-27T09:36:34Z",
      "side": 1,
      "message": "nhiroki: My test seems to fail here, this promise doesn\u0027t resolve. Am I using these internals functions incorrectly? I thought if the service worker uses isReload, the use counter would be propogated to this iframe and this window?\n\nAh, just realized maybe the request for the main resource doesn\u0027t get caught because the document doesn\u0027t exist yet?",
      "revId": "fc63a25048ef890739467b477b7c72d92520ec00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd64b13f_9656791f",
        "filename": "third_party/WebKit/LayoutTests/http/tests/serviceworker/chromium/usecounted-features.html",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1115976
      },
      "writtenOn": "2017-06-27T09:56:45Z",
      "side": 1,
      "message": "\"window\" needs to be controlled because counts are notified only to controlled documents. How about calling claim() in SW or opening another window (openWindow()) to be controlled?",
      "parentUuid": "f951d58c_14099cf5",
      "revId": "fc63a25048ef890739467b477b7c72d92520ec00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "920c8f7a_59883dda",
        "filename": "third_party/WebKit/LayoutTests/http/tests/serviceworker/chromium/usecounted-features.html",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-06-28T01:48:27Z",
      "side": 1,
      "message": "I thought that the top-level window shares its use counter with iframes in the window, and the iframe is controlled.\n\nBut I think I found a root cause of the bug:\nhttps://bugs.chromium.org/p/chromium/issues/detail?id\u003d737355\n\nEven when changing to use a window and observing the UseCounter on that, the count was never observed. It looks like this is due to the ProviderClient not yet existing when the use count is propagated to the controllee, because the page has not yet been created.\n\nI uploaded a new patch to workaround this, but it seems like a bug we should fix for accurate numbers.",
      "parentUuid": "fd64b13f_9656791f",
      "revId": "fc63a25048ef890739467b477b7c72d92520ec00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}