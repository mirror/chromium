{
  "comments": [
    {
      "key": {
        "uuid": "c8ed53bd_957d3c3b",
        "filename": "chrome/test/chromedriver/session_commands.cc",
        "patchSetId": 7
      },
      "lineNbr": 204,
      "author": {
        "id": 1181690
      },
      "writtenOn": "2017-07-17T15:07:49Z",
      "side": 1,
      "message": "I see there was some discussion of this earlier in the review, but I\u0027m not sure I understand why the declaration of tmp_list should survive the if block below. As is, this is always allocating a list but only using it if firstMatch isn\u0027t present.",
      "revId": "105a7bad6cb35f15fa0b3bf82e6535300d3fc173",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e006164_e1ccd4ce",
        "filename": "chrome/test/chromedriver/session_commands.cc",
        "patchSetId": 7
      },
      "lineNbr": 204,
      "author": {
        "id": 1225899
      },
      "writtenOn": "2017-07-20T17:56:53Z",
      "side": 1,
      "message": "Good point, if the if statement fails then there is no need for tmp_list. If the statement passes then shouldn\u0027t first_match_list still points to the correct thing outside the block since it was declared outside (even though tmp_list is now out of scope).",
      "parentUuid": "c8ed53bd_957d3c3b",
      "revId": "105a7bad6cb35f15fa0b3bf82e6535300d3fc173",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57333eb7_0a6d2b92",
        "filename": "chrome/test/chromedriver/session_commands.cc",
        "patchSetId": 7
      },
      "lineNbr": 204,
      "author": {
        "id": 1181690
      },
      "writtenOn": "2017-07-20T18:00:30Z",
      "side": 1,
      "message": "oh wait, now I see what\u0027s going on. tmp_list maintains ownership throughout. Hrm.",
      "parentUuid": "2e006164_e1ccd4ce",
      "revId": "105a7bad6cb35f15fa0b3bf82e6535300d3fc173",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4778e7a1_7a8c92c3",
        "filename": "chrome/test/chromedriver/session_commands.cc",
        "patchSetId": 7
      },
      "lineNbr": 204,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2017-07-20T18:18:28Z",
      "side": 1,
      "message": "Yes, when the |if| block below is entered, |first_match_list| will end up containing a pointer to |tmp_list|, and thus |tmp_list| must remain valid for as long as |first_match_list| is valid. Thus the declaration of |tmp_list| must be before the |if| block. However, it doesn\u0027t need to allocate memory at the point of declaration. Something like the following would work:\n   std::unique_ptr\u003cbase::ListValue\u003e tmp_list;\n   if (...) {\n      tmp_list \u003d new base::ListValue();\n      ...\n   }",
      "parentUuid": "57333eb7_0a6d2b92",
      "revId": "105a7bad6cb35f15fa0b3bf82e6535300d3fc173",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c714058b_ed840e36",
        "filename": "chrome/test/chromedriver/session_commands.cc",
        "patchSetId": 7
      },
      "lineNbr": 204,
      "author": {
        "id": 1181690
      },
      "writtenOn": "2017-07-20T18:22:39Z",
      "side": 1,
      "message": "yeah, something like this would be fine with me.",
      "parentUuid": "4778e7a1_7a8c92c3",
      "revId": "105a7bad6cb35f15fa0b3bf82e6535300d3fc173",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}