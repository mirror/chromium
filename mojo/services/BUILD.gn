# Copyright 2014 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/ui.gni")

group("services") {
  deps = [
    "//mojo/services/network/public/interfaces",
    "//third_party/mojo_services/src/clipboard/public/interfaces",
    "//third_party/mojo_services/src/content_handler/public/interfaces",
    "//third_party/mojo_services/src/geometry/public/interfaces",
    "//third_party/mojo_services/src/input_events/public/interfaces",
    "//third_party/mojo_services/src/native_viewport/public/interfaces",
    "//third_party/mojo_services/src/navigation/public/interfaces",
    "//third_party/mojo_services/src/surfaces/public/interfaces",
    "//third_party/mojo_services/src/view_manager/public/interfaces",
  ]

  if (!is_component_build) {
    deps += [
      "//components/clipboard",
      "//components/kiosk_wm:window_manager",
      "//components/native_viewport",
      "//components/surfaces",
      "//components/view_manager",
      "//components/window_manager:lib",
      "//mojo/services/html_viewer",
      "//mojo/services/network",
      "//mojo/services/tracing",
    ]

    # TODO(GYP): Make this work.
    if (is_mac) {
      deps -= [
        "//components/kiosk_wm:window_manager",
        "//components/native_viewport",
        "//components/view_manager",
        "//components/window_manager:lib",
        "//mojo/services/html_viewer",
      ]
    }
  }
}

group("tests") {
  testonly = true
  deps = [
    ":services",
  ]
  if (!is_component_build) {
    deps += [
      "//components/view_manager:view_manager_service_unittests",
      "//components/window_manager:window_manager_unittests",
      "//mojo/services/html_viewer:tests",
    ]

    # TODO(GYP): Make this work.
    if (is_mac) {
      deps -= [
        "//components/view_manager:view_manager_service_unittests",
        "//components/window_manager:window_manager_unittests",
        "//mojo/services/html_viewer:tests",
      ]
    }
  }
}

group("apptests") {
  testonly = true
  deps = [
    ":services",
  ]
  if (!is_component_build) {
    deps += [
      "//components/clipboard:apptests",
      "//components/view_manager:apptests",
      "//components/window_manager:apptests",
      "//mojo/services/html_viewer:apptests",
      "//mojo/services/network:apptests",
    ]

    # TODO(GYP): Make this work.
    if (is_mac) {
      deps -= [
        "//components/view_manager:apptests",
        "//components/window_manager:apptests",
        "//mojo/services/html_viewer:apptests",
      ]
    }
  }
}
