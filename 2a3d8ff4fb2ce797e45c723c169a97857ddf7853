{
  "comments": [
    {
      "key": {
        "uuid": "cb2d25e0_e412e8d7",
        "filename": "ash/system/ime_menu/ime_menu_tray.cc",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-23T15:37:48Z",
      "side": 1,
      "message": "Make sure to remove any unnecessary includes. I suspect this isn\u0027t needed, perhaps others as well.",
      "range": {
        "startLine": 7,
        "startChar": 10,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad957ff3_7951944c",
        "filename": "ash/system/ime_menu/ime_menu_tray.cc",
        "patchSetId": 21
      },
      "lineNbr": 7,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-24T02:39:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cb2d25e0_e412e8d7",
      "range": {
        "startLine": 7,
        "startChar": 10,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64e9e6c8_e9fa7da8",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-23T15:37:48Z",
      "side": 1,
      "message": "Remember that is called *before* the EventHandlers installed by ash. Are you sure you want that? It seems like you want ash\u0027s AcceleratorDelegate to have a chance to consume the event *first*, then widget_.",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6c154dc_f2a3a17a",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-24T02:39:07Z",
      "side": 1,
      "message": "Yes, that\u0027s an intention. We want TrayBubbleView capture those events earlier than GlobalAcceleratorManager (ash\u0027s accelerator controller) capture them. IIUC, currently focused view can capture key events earlier than the ash\u0027s accelerator controller. With this CL, we want to make TrayBubbleView behave as the focused view if it\u0027s opened.",
      "parentUuid": "64e9e6c8_e9fa7da8",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae0cc7be_2e9db5aa",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-24T13:38:10Z",
      "side": 1,
      "message": "I don\u0027t believe that is the case. Ash\u0027s accelerator controller has a crack at events *before* the widget (pre target handler). The pre-targeting happens through a delegate on AcceleratorFilter. Not all accelerators are processed during this phase, but ash certainly has the opportunity.",
      "parentUuid": "b6c154dc_f2a3a17a",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35cc6b9c_fad7a62a",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-24T17:14:06Z",
      "side": 1,
      "message": "Also, don\u0027t you want to mark the event as handled and/or stop-propagation? Otherwise the event is going to go to the normal target and you aren\u0027t really capturing.",
      "parentUuid": "ae0cc7be_2e9db5aa",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "735d2768_93a7929f",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-28T15:04:37Z",
      "side": 1,
      "message": "I think it\u0027s okay that reserved key combos are consumed before tray bubble view consumes it. My understanding is that key event will be consumed in the following order.\n\n1. Reserved key combos\n2. Focus manager of the currently focused widget\n3. Accelerator Controller of the widget\n4. Global Accelerator Controller (non reserved ones)\n\nWe want to capture key combos between 1 and 2.\n\nFor marking the event, I think it\u0027s the responsibility of the widget. RerouteEventHandler is just rerouting it. I\u0027ll double check whether it\u0027s the case or not by injecting log here tomorrow.",
      "parentUuid": "35cc6b9c_fad7a62a",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b236d61b_9fedd29b",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-28T16:59:28Z",
      "side": 1,
      "message": "\u003e I think it\u0027s okay that reserved key combos are consumed before tray bubble view consumes it. My understanding is that key event will be consumed in the following order.\n\u003e \n\u003e 1. Reserved key combos\n\u003e 2. Focus manager of the currently focused widget\n\u003e 3. Accelerator Controller of the widget\n\u003e 4. Global Accelerator Controller (non reserved ones)\n\u003e \n\u003e We want to capture key combos between 1 and 2.\n\nDon\u0027t you also want to avoid sending to the focused widget? The tray is up and you want to eat key events, right? Again, this seems similar to a menu which does not events go to the focused widget (2 \u0026 3).\n\n\u003e \n\u003e For marking the event, I think it\u0027s the responsibility of the widget. RerouteEventHandler is just rerouting it. I\u0027ll double check whether it\u0027s the case or not by injecting log here tomorrow.",
      "parentUuid": "735d2768_93a7929f",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7471ca3e_4495dd36",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-29T01:00:38Z",
      "side": 1,
      "message": "If RerouteEventHandler captures key event between 1 and 2, I don\u0027t think key events go to the focus manager of the currently focused widget.\n\nAfter a thought, I think we may be talking about the different key events. I think you are talking (also) about the events which TrayBubbleView has no interest at. I was talking about the events which TrayBubbleView has interest at. Yes, to align with the behavior of the menu, let\u0027s capture all key events by RerouteEventHandler. Changed RerouteEventHandler to capture all key events.",
      "parentUuid": "b236d61b_9fedd29b",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f932661_6aad94d1",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 154,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-29T01:11:16Z",
      "side": 1,
      "message": "While this no longer matters as we mark all key events as stopPropagation in RerouteEventHandler, for marking the events with stopPropagation or handled by the widget, the widget of TrayBubbleView is doing it for key events which it has interest at (e.g. Tab key).",
      "parentUuid": "7471ca3e_4495dd36",
      "range": {
        "startLine": 154,
        "startChar": 2,
        "endLine": 154,
        "endChar": 29
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c12869b_600421cd",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 195,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-23T15:37:48Z",
      "side": 1,
      "message": "Please move add/removal into RerouteEventHandler as that\u0027s less error prone. When you don\u0027t need the activation_handler_ to be active, delete it.",
      "range": {
        "startLine": 195,
        "startChar": 28,
        "endLine": 195,
        "endChar": 50
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68489346_700a221b",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 195,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-24T02:39:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6c12869b_600421cd",
      "range": {
        "startLine": 195,
        "startChar": 28,
        "endLine": 195,
        "endChar": 50
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "648084b4_88f01011",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 223,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-23T15:37:48Z",
      "side": 1,
      "message": "use MakeUnique.",
      "range": {
        "startLine": 223,
        "startChar": 30,
        "endLine": 223,
        "endChar": 53
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88eff15c_3a19bba5",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 223,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-24T02:39:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "648084b4_88f01011",
      "range": {
        "startLine": 223,
        "startChar": 30,
        "endLine": 223,
        "endChar": 53
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b79762a_91bd3e69",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 398,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-23T15:37:48Z",
      "side": 1,
      "message": "I would be inclined to move this into RerouteEventHandler too.",
      "range": {
        "startLine": 398,
        "startChar": 21,
        "endLine": 398,
        "endChar": 46
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9968f7b_b819a2da",
        "filename": "ui/views/bubble/tray_bubble_view.cc",
        "patchSetId": 21
      },
      "lineNbr": 398,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-24T02:39:07Z",
      "side": 1,
      "message": "How do you move this logic into RerouteEventHandler?\n\nI prefer to keep this logic in TrayBubbleView. TrayBubbleView is controlling when RerouteEventHandler is active or not (by constructing or destructing it). I think moving this logic there means that RerouteEventHandler becomes to change its active state for some cases.",
      "parentUuid": "7b79762a_91bd3e69",
      "range": {
        "startLine": 398,
        "startChar": 21,
        "endLine": 398,
        "endChar": 46
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2a5eea2_db4bd692",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 21
      },
      "lineNbr": 171,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-23T15:37:48Z",
      "side": 1,
      "message": "remove as this is obvious from the signature.",
      "range": {
        "startLine": 171,
        "startChar": 5,
        "endLine": 171,
        "endChar": 45
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea6ef945_d6b405e7",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 21
      },
      "lineNbr": 171,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-24T02:39:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f2a5eea2_db4bd692",
      "range": {
        "startLine": 171,
        "startChar": 5,
        "endLine": 171,
        "endChar": 45
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf46ee2c_7d2b9770",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 21
      },
      "lineNbr": 172,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-08-23T15:37:48Z",
      "side": 1,
      "message": "The interesting thing is the \u0027why\u0027. Why do we need this code? (I know why, but the comment should explain the why).",
      "range": {
        "startLine": 172,
        "startChar": 5,
        "endLine": 172,
        "endChar": 52
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4761361_cda9bd12",
        "filename": "ui/views/bubble/tray_bubble_view.h",
        "patchSetId": 21
      },
      "lineNbr": 172,
      "author": {
        "id": 1121230
      },
      "writtenOn": "2017-08-24T02:39:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bf46ee2c_7d2b9770",
      "range": {
        "startLine": 172,
        "startChar": 5,
        "endLine": 172,
        "endChar": 52
      },
      "revId": "2a3d8ff4fb2ce797e45c723c169a97857ddf7853",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}