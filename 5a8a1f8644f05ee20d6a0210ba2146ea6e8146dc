{
  "comments": [
    {
      "key": {
        "uuid": "58f2498a_14a51374",
        "filename": "ash/shell.cc",
        "patchSetId": 1
      },
      "lineNbr": 1070,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2018-01-05T20:41:51Z",
      "side": 1,
      "message": "I don\u0027t think this will work under mash. I don\u0027t think the LoginState singleton is initialized in the ash process. (We should probably deps-ban it.) ash::SessionController is the canonical source of information for session state. Unfortunately, I don\u0027t know if it has data during Shell init, since it gets data async from chrome over mojo. Xiyuan is the expert here.",
      "revId": "5a8a1f8644f05ee20d6a0210ba2146ea6e8146dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51b1a656_905ba48d",
        "filename": "ash/shell.cc",
        "patchSetId": 1
      },
      "lineNbr": 1070,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-05T21:26:11Z",
      "side": 1,
      "message": "Yeah, it breaks tests too.\n\nSome network UI uses LoginState but that seems to be it, so I agree that we should fix that and DEPS ban it.\n\nIt seems like setting session state before Shell::Init is the right thing to do. Currently it starts at UNKNOWN then gets set to ACTIVE sometime after Init when starting after a crash.\n\nI will try that and see what breaks.",
      "parentUuid": "58f2498a_14a51374",
      "revId": "5a8a1f8644f05ee20d6a0210ba2146ea6e8146dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80a02ebf_c1458a28",
        "filename": "ash/shell.cc",
        "patchSetId": 1
      },
      "lineNbr": 1070,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-05T23:14:53Z",
      "side": 1,
      "message": "OK, I did some experimenting and learned two things:\n1. LoginState (and SessionState) are both UNKNOWN in ash_init.cc (where the test used to be) after a crash or in guest mode. As near as I can tel, this code only affects the case of running chrome without --login-manager in Linux.\n2. Running in Linux without --login-manager and always hiding the cursor seems to work just fine (i.e. the cursor still shows up).\n\nThis code has been around since 2012 and has been moved around a bit, so I think the best thing to do is to remove the hack and always hide the cursor.",
      "parentUuid": "51b1a656_905ba48d",
      "revId": "5a8a1f8644f05ee20d6a0210ba2146ea6e8146dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3398cdc8_07deb17d",
        "filename": "ash/shell.cc",
        "patchSetId": 1
      },
      "lineNbr": 1070,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2018-01-05T23:26:47Z",
      "side": 1,
      "message": "SGTM. If that gets annoying on Linux we could add an IsRunningOnChromeOS check later.",
      "parentUuid": "80a02ebf_c1458a28",
      "revId": "5a8a1f8644f05ee20d6a0210ba2146ea6e8146dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d089d7d7_1c831527",
        "filename": "chrome/browser/ui/views/ash/chrome_browser_main_extra_parts_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2018-01-05T20:26:43Z",
      "side": 1,
      "message": "std::make_unique",
      "range": {
        "startLine": 101,
        "startChar": 22,
        "endLine": 101,
        "endChar": 38
      },
      "revId": "5a8a1f8644f05ee20d6a0210ba2146ea6e8146dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71912850_b5acfd07",
        "filename": "chrome/browser/ui/views/ash/chrome_browser_main_extra_parts_ash.cc",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-05T23:14:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d089d7d7_1c831527",
      "range": {
        "startLine": 101,
        "startChar": 22,
        "endLine": 101,
        "endChar": 38
      },
      "revId": "5a8a1f8644f05ee20d6a0210ba2146ea6e8146dc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}