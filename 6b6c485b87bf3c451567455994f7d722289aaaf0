{
  "comments": [
    {
      "key": {
        "uuid": "9e3f07f6_47e51c4c",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2017-11-20T00:34:13Z",
      "side": 1,
      "message": "What about if there are multiple apps that match the URL?",
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a425af4_c630fd8a",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-11-20T02:00:00Z",
      "side": 1,
      "message": "Depending on when the ExtensionRegistry returns the app, we might open a new app window. So:\n\nhttps://www.google.com/ -\u003e https://www.google.com/maps\n\nmight result in a new app window if the user has both Google and Maps installed.\n\nWe can make this return an array of the matching apps and check if the target app is in the array. OK to do in a follow up?",
      "parentUuid": "9e3f07f6_47e51c4c",
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3593d22_1d994dd4",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2017-11-20T02:24:36Z",
      "side": 1,
      "message": "I\u0027m interested in exploring what it should do first, then maybe we can fix in a follow up or here.\n\nShould we make the app for a given URL the most specific app that is installed? That way this function doesn\u0027t need to return an array and the behavior won\u0027t depend on sorting / what order apps were installed in / etc.",
      "parentUuid": "5a425af4_c630fd8a",
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f31eab20_4beec74c",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-11-20T04:47:05Z",
      "side": 1,
      "message": "No strong opinions here, but I think we might be taking choice away from developers if we went that route.\n\nIf we use the array, developers can choose to keep their navigations in the same context. If they want to open another app they can use target\u003d_blank or window.open() if they don\u0027t they can just keep using target\u003d_self links.\n\nIf we pick the most specific app, developers no longer have this option. Both target\u003d_self links and target\u003d_blank links will open the more specific app.",
      "parentUuid": "b3593d22_1d994dd4",
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc442411_0a8b88cb",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1115963
      },
      "writtenOn": "2017-11-20T05:43:37Z",
      "side": 1,
      "message": "I strongly agree with Ben. If a URL is covered by two or more manifest scopes, it belongs to the most specific one.\n\n(If two manifests declare *exactly* the same scope, we can\u0027t deal with that here, but I think that\u0027s an extreme edge case we can deal with by just... picking one arbitrarily.)\n\nWe never consider a URL to belong to the less specific manifests; for example if you have both https://www.google.com/ and https://www.google.com/maps/ apps installed, if you are in the google.com/ app window and click a link to https://www.google.com/maps/place, you are kicked out of the app window because that URL is *not* considered part of the google.com/ app, even though the URL resides within its manifest scope.\n\nThis makes the behaviour a little non-deterministic since it the behaviour for app A depends on whether app B is installed. But that\u0027s still entirely within the control of the domain owner. The easy solution is \"don\u0027t nest manifest scopes\". If you must nest them, I think we can help out this in the future by adding a \"exclude\" set to the manifest scope, so google.com/ can exclude the /maps/ paths from its scope, even if the Maps app is not installed.",
      "parentUuid": "f31eab20_4beec74c",
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93badc81_d7defd78",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 122,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2017-11-20T00:34:13Z",
      "side": 1,
      "message": "Nit: personally I\u0027m not a fan of encoding type info in variable names (i.e. _ref suffixes), but if you\u0027re going to do it you should be consistent.",
      "range": {
        "startLine": 122,
        "startChar": 7,
        "endLine": 122,
        "endChar": 26
      },
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "220de6f9_1d0455e6",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 122,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-11-20T02:00:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "93badc81_d7defd78",
      "range": {
        "startLine": 122,
        "startChar": 7,
        "endLine": 122,
        "endChar": 26
      },
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae40f63c_f8260b7d",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 1002272
      },
      "writtenOn": "2017-11-20T00:34:13Z",
      "side": 1,
      "message": "Nit: this is a little non-obvious, could you add a comment?",
      "range": {
        "startLine": 130,
        "startChar": 29,
        "endLine": 130,
        "endChar": 43
      },
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0cd632c_08df8627",
        "filename": "chrome/browser/extensions/bookmark_app_navigation_throttle.cc",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 1133035
      },
      "writtenOn": "2017-11-20T02:00:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae40f63c_f8260b7d",
      "range": {
        "startLine": 130,
        "startChar": 29,
        "endLine": 130,
        "endChar": 43
      },
      "revId": "6b6c485b87bf3c451567455994f7d722289aaaf0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}