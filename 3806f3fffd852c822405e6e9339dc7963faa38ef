{
  "comments": [
    {
      "key": {
        "uuid": "06dc8b40_3430ea88",
        "filename": "third_party/WebKit/Source/bindings/core/v8/V8Initializer.cpp",
        "patchSetId": 19
      },
      "lineNbr": 559,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2018-01-12T00:28:48Z",
      "side": 1,
      "message": "Would it be possible to pass in v8::Context to Allocate? It\u0027s not nice that the Blink side needs to call GetCurrent and get the current context.\n\nYou\u0027ll need to change the V8 side though. A follow-up CL is fine.",
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b8c33e3_817a7c28",
        "filename": "third_party/WebKit/Source/bindings/core/v8/V8Initializer.cpp",
        "patchSetId": 19
      },
      "lineNbr": 559,
      "author": {
        "id": 1001213
      },
      "writtenOn": "2018-01-12T00:48:51Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "06dc8b40_3430ea88",
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0b2f04d_855a1906",
        "filename": "third_party/WebKit/Source/bindings/core/v8/V8Initializer.cpp",
        "patchSetId": 19
      },
      "lineNbr": 561,
      "author": {
        "id": 1001213
      },
      "writtenOn": "2018-01-11T23:40:08Z",
      "side": 1,
      "message": "I thought about restricting this to 64-bit systems, since it doesn\u0027t help as much on 32-bit systems. Opinions?",
      "range": {
        "startLine": 561,
        "startChar": 0,
        "endLine": 561,
        "endChar": 76
      },
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d614c40f_80547bf2",
        "filename": "third_party/WebKit/Source/platform/wtf/typed_arrays/ArrayBufferContents.cpp",
        "patchSetId": 19
      },
      "lineNbr": 47,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2018-01-12T00:28:48Z",
      "side": 1,
      "message": "Instead of creating a mapping, can we make SecurityOrigin own the Partition? Then we won\u0027t need to maintain the mapping between the keys and the partitions.",
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2e6abb8_252d0304",
        "filename": "third_party/WebKit/Source/platform/wtf/typed_arrays/ArrayBufferContents.cpp",
        "patchSetId": 19
      },
      "lineNbr": 47,
      "author": {
        "id": 1001213
      },
      "writtenOn": "2018-01-12T00:48:51Z",
      "side": 1,
      "message": "We can. I was reluctant to attach a partition to SecurityOrigin, as it\u0027s not really related to the class.\n\nSince there are likely only a few origins in a process, a base::small_map could be used instead of std::unordered_map.",
      "parentUuid": "d614c40f_80547bf2",
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6845cb5_1ee0ebf2",
        "filename": "third_party/WebKit/Source/platform/wtf/typed_arrays/ArrayBufferContents.cpp",
        "patchSetId": 19
      },
      "lineNbr": 47,
      "author": {
        "id": 1001213
      },
      "writtenOn": "2018-01-12T00:52:21Z",
      "side": 1,
      "message": "I should add, if it\u0027s OK to add a partition to SecurityOrigin, that would help with lifetime management. Related question: Is there a cheap way to tell when a PartitionRootGeneric is empty, so we could potentially release memory? Otherwise, we would have to track allocations per partition.",
      "parentUuid": "c2e6abb8_252d0304",
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "297e7fa3_147ccc6f",
        "filename": "third_party/WebKit/Source/platform/wtf/typed_arrays/ArrayBufferContents.cpp",
        "patchSetId": 19
      },
      "lineNbr": 50,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2018-01-12T00:28:48Z",
      "side": 1,
      "message": "Oh, you have to create a mapping between allocated entries and partitions... This should be pretty heavy (i.e., O(# of allocated entries)), right?\n\nHmm. The reason you need the mapping is that ArrayBuffers are not guaranteed to be created and destructed on the same SecurityOrigin, right? (considering document.domain etc)",
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ca00e7c_5dd3f5d0",
        "filename": "third_party/WebKit/Source/platform/wtf/typed_arrays/ArrayBufferContents.cpp",
        "patchSetId": 19
      },
      "lineNbr": 50,
      "author": {
        "id": 1001213
      },
      "writtenOn": "2018-01-12T00:48:51Z",
      "side": 1,
      "message": "Yes, it is pretty heavy. Unfortunately I couldn\u0027t get the mapping from void* (allocation base) to PartitionRootGeneric* to work robustly (it returned pointers that didn\u0027t match the root I thought I created.)\n\nAlso, ArrayBuffer::Allocator::Free can be called on a background thread, where it\u0027s not clear what the Context is.",
      "parentUuid": "297e7fa3_147ccc6f",
      "revId": "3806f3fffd852c822405e6e9339dc7963faa38ef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}