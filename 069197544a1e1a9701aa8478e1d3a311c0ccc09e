{
  "comments": [
    {
      "key": {
        "uuid": "5cfa7b32_7cdcd006",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-10-17T23:06:55Z",
      "side": 0,
      "message": "I don\u0027t really know what this was supposed to mean. What\u0027s a more appropriate ShelfItemDelegate subclass for apps? And why would this class have methods for getting running apps if it shouldn\u0027t have associated windows?",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb5363ad_7fc62ca6",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-17T23:42:41Z",
      "side": 0,
      "message": "These are replaced with [Extension|Arc]AppWindowLauncherItemController instances when launched. I believe the point of GetRunningApplications on this class is to instantiate one of these delegates to see if any instances of the app are running:\nhttps://cs.chromium.org/chromium/src/chrome/browser/ui/ash/launcher/chrome_launcher_controller.cc?rcl\u003d269c8ebdce06f2df62be0cec2cd2820ef4183e80\u0026l\u003d419\n\nI agree that neither is straightforward; I dislike the item delegate pattern, not to mention the practice of swapping delegates at various times. That said, I believe this comment is fairly accurate, and should be clarified/corrected, but probably not reduced to the suggestion on the right.",
      "parentUuid": "5cfa7b32_7cdcd006",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16a1a450_2a39c42d",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-10-17T23:46:02Z",
      "side": 0,
      "message": "It\u0027s been a while, but IIRC:\n* A pinned app that isn\u0027t opened needs to have an entry in the shelf; that is what this is for.\n* Once a pinned app is opened, a new launcher item will be created for the running app; I believe that the new launcher item will instantiate a different class and the shortcut class will be destroyed (but that may have changed).\n\nAssuming the behavior is the same as it used ot be, the new comment is incorrect. We should probably clarify the existing comment though.",
      "parentUuid": "5cfa7b32_7cdcd006",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f608016_a48f0d25",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-10-18T01:34:57Z",
      "side": 0,
      "message": "\u003e These are replaced with [Extension|Arc]AppWindowLauncherItemController instances when launched.\n\nMaybe, but not in the case of a v1 packaged app. In this repro case, only this class, AppShortcutLauncherItemController, is instantiated. Perhaps that\u0027s the cause of this bug, that we\u0027re using it for a running app but shouldn\u0027t be?\n\nI\u0027ve verified that the AppShortcutLauncherItemController::Close() is the function being executed. And that makes sense -- that\u0027s the function that calls GetV1ApplicationsFromAppId().\n\nNotably, AppWindowLauncherItemController::Close() does *not* run, again at least in this v1 packaged app case. (That\u0027s what would run when calling Close() on an instance of the Extension* subclass.) In fact, in my repro steps AppWindowLauncherItemController\u0027s constructor never runs.\n\nBTW, it\u0027s also worth noting that this class and ChromeLauncherController\u0027s tests are referring to *hosted* apps as v1 apps. Hosted apps and v1 packaged apps aren\u0027t quite the same. https://chromium.googlesource.com/chromium/src/+/master/extensions/docs/extension_and_app_types.md#Hosted-app",
      "parentUuid": "16a1a450_2a39c42d",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a241202d_092199d2",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-19T21:54:35Z",
      "side": 0,
      "message": "Sorry, I definitely didn\u0027t understand the different app types well when I wrote/rewrote comments in this area, and I\u0027m still not sure I understand how their differences apply to the shelf behavior.\n\nYour updated comment may be okay (given that it\u0027s describing behavior you\u0027re actually observing), but maybe it shouldn\u0027t mention anything about windows and maybe is should say something like \"opening a shortcut may replace the item\u0027s associated ShelfItemDelegate instance.\"",
      "parentUuid": "9f608016_a48f0d25",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfd5363a_8cedc577",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-10-26T01:43:00Z",
      "side": 0,
      "message": "Done",
      "parentUuid": "a241202d_092199d2",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68c5b3c4_b49214ab",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2017-10-26T16:19:21Z",
      "side": 0,
      "message": "It has been a long time since I have been in this code, however it seems possible that:\n* v2 Apps behave as msw@ describes.\n* v1 apps and hosted apps (i.e. bookmarks) do not create a new controller but continue to use the shortcut controller.\n\nEither way we really need to confirm and document the behavior in the various headers. michaelpg@, I hate to impose this on you, but someone needs to do it :)",
      "parentUuid": "9f608016_a48f0d25",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d0ff961_b992a71f",
        "filename": "chrome/browser/ui/ash/launcher/app_shortcut_launcher_item_controller.h",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-08T00:41:09Z",
      "side": 0,
      "message": "I\u0027ve updated this comment to explain what gets replaced when. The other headers look relatively okay.",
      "parentUuid": "68c5b3c4_b49214ab",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 58
      },
      "revId": "069197544a1e1a9701aa8478e1d3a311c0ccc09e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}