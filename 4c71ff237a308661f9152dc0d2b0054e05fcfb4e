{
  "comments": [
    {
      "key": {
        "uuid": "8dcc0758_00509d15",
        "filename": "third_party/WebKit/Source/platform/graphics/compositing/PaintArtifactCompositor.cpp",
        "patchSetId": 3
      },
      "lineNbr": 593,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2018-01-29T22:01:29Z",
      "side": 1,
      "message": "How about this which is shorter:\n\n  bool path_in_layer_changed;\n  if (path \u003d\u003d path_) {\n    path_in_layer_changed \u003d path \u0026\u0026 layer_origin_ !\u003d new_layer_origin;\n  } else {\n    SkPath new_path \u003d path-\u003eGetSkPath();\n    new_path.offset(layer_origin_.x() - new_layer_origin.x(),\n                    layer_origin_.y() - new_layer_origin.y());\n    path_in_layer_changed \u003d path_-\u003eGetSkPath() !\u003d new_path;\n  }",
      "revId": "4c71ff237a308661f9152dc0d2b0054e05fcfb4e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8c9b32b_b748daf8",
        "filename": "third_party/WebKit/Source/platform/graphics/compositing/PaintArtifactCompositor.cpp",
        "patchSetId": 3
      },
      "lineNbr": 593,
      "author": {
        "id": 1003330
      },
      "writtenOn": "2018-01-29T22:24:41Z",
      "side": 1,
      "message": "Great suggestion! This also removed the double negation. Done.",
      "parentUuid": "8dcc0758_00509d15",
      "revId": "4c71ff237a308661f9152dc0d2b0054e05fcfb4e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f8a3e30_9d0fe105",
        "filename": "third_party/WebKit/Source/platform/graphics/compositing/PaintArtifactCompositor.cpp",
        "patchSetId": 3
      },
      "lineNbr": 593,
      "author": {
        "id": 1003330
      },
      "writtenOn": "2018-01-30T00:16:42Z",
      "side": 1,
      "message": "Turns out we still need a third branch for null checking both path and path_. Done.",
      "parentUuid": "c8c9b32b_b748daf8",
      "revId": "4c71ff237a308661f9152dc0d2b0054e05fcfb4e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9f895b9_dfc6df36",
        "filename": "third_party/WebKit/Source/platform/graphics/compositing/PaintArtifactCompositor.cpp",
        "patchSetId": 3
      },
      "lineNbr": 630,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2018-01-27T01:11:09Z",
      "side": 1,
      "message": "Can we store and use rrect and path in layer\u0027s local space?",
      "revId": "4c71ff237a308661f9152dc0d2b0054e05fcfb4e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fc0447c_beb813d9",
        "filename": "third_party/WebKit/Source/platform/graphics/compositing/PaintArtifactCompositor.cpp",
        "patchSetId": 3
      },
      "lineNbr": 630,
      "author": {
        "id": 1003330
      },
      "writtenOn": "2018-01-29T21:12:17Z",
      "side": 1,
      "message": "I have considered that, but that will disallow identity comparison for path. The update logic in this CL uses identity comparison for the (common) unchanging case, and only resort to deep comparison for non-trivial changes.",
      "parentUuid": "e9f895b9_dfc6df36",
      "revId": "4c71ff237a308661f9152dc0d2b0054e05fcfb4e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3da085e6_e28828c6",
        "filename": "third_party/WebKit/Source/platform/graphics/compositing/PaintArtifactCompositor.cpp",
        "patchSetId": 3
      },
      "lineNbr": 630,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2018-01-29T22:01:29Z",
      "side": 1,
      "message": "I see.\n\nHow about still storing rrect_ (-\u003e local_rrect_) in layer space and changing the above code to:\n\n  if (path_) {\n     SaveOp\n     TranslateOp\n     ClipPathOp\n     RestoreOp\n  }\n  ...\n  DrawRRectOp(local_rrect_, flags);\n?\n\nIn this way we won\u0027t output SaveOp/TranslateOp/RestoreOp if there is no clip path (which is common).",
      "parentUuid": "5fc0447c_beb813d9",
      "revId": "4c71ff237a308661f9152dc0d2b0054e05fcfb4e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1dc63a9_1443f862",
        "filename": "third_party/WebKit/Source/platform/graphics/compositing/PaintArtifactCompositor.cpp",
        "patchSetId": 3
      },
      "lineNbr": 630,
      "author": {
        "id": 1003330
      },
      "writtenOn": "2018-01-29T22:24:41Z",
      "side": 1,
      "message": "This way the clip path won\u0027t enclose DrawRRect... If the worry is about Save/Translate/Restore being expensive, this can be done:\n\nif (!path_) {\n  DrawRRectOp(rrect_ - layer_origin);\n} else {\n  SaveOp\n  TranslateOp\n  ClipPathOp\n  DrawRRectOp\n  RestoreOp\n}",
      "parentUuid": "3da085e6_e28828c6",
      "revId": "4c71ff237a308661f9152dc0d2b0054e05fcfb4e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}