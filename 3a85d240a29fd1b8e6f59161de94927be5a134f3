{
  "comments": [
    {
      "key": {
        "uuid": "9f5885cb_60a3d3ac",
        "filename": "content/browser/cache_storage/cache_storage.cc",
        "patchSetId": 1
      },
      "lineNbr": 358,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2018-02-02T17:55:55Z",
      "side": 1,
      "message": "Can we verify with tests and/or DCHECK that these are equal. I\u0027m concerned that GURL::spec() may have a trailing / whereas origin_.Serialize() does not.\n\nWe may already have a test which verifies this - if so, great! But if not a change here would mean we would lose old data on upgrade.\n\ne.g. add:\n\nDCHECK_EQ(origin_.Serialize(), origin_.GetURL().spec());\n\nIf that fails, then we may need to append \"/\" to the result of Serialize().",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3b9a023_ea21ccbc",
        "filename": "content/browser/cache_storage/cache_storage.cc",
        "patchSetId": 1
      },
      "lineNbr": 358,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2018-02-02T21:55:53Z",
      "side": 1,
      "message": "I did a local build with the code as-is and confirmed - an Origin serializes as e.g. \"http://example.com:80\" while a GURL serializes as \"http://example.com:80/\"\n\nSo I\u0027d advise changing this to:\n\n// GetURL().spec() is used here rather than Serialize() to ensure\n// backwards compatibility with older data. The serializations are\n// subtly different, e.g. Origin does not include a trailing \"/\".\nprotobuf_index.set_origin(origin_.GetURL().spec());",
      "parentUuid": "9f5885cb_60a3d3ac",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8eba47fd_3a2b1406",
        "filename": "content/browser/cache_storage/cache_storage.cc",
        "patchSetId": 1
      },
      "lineNbr": 358,
      "author": {
        "id": 1259876
      },
      "writtenOn": "2018-02-05T07:50:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b3b9a023_ea21ccbc",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "904ccc5a_2ad1089b",
        "filename": "content/browser/cache_storage/cache_storage.cc",
        "patchSetId": 1
      },
      "lineNbr": 358,
      "author": {
        "id": 1163599
      },
      "writtenOn": "2018-02-05T09:05:46Z",
      "side": 1,
      "message": "+1 to the suggestion above. Either a new test or a pointer to an existing test would be good.",
      "parentUuid": "8eba47fd_3a2b1406",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6fec02e_e1509134",
        "filename": "content/browser/cache_storage/cache_storage.cc",
        "patchSetId": 1
      },
      "lineNbr": 358,
      "author": {
        "id": 1259876
      },
      "writtenOn": "2018-02-05T09:36:05Z",
      "side": 1,
      "message": "Do you mean to add a test into cache_storage_index_unittest.cc to check there should be a trailing \"/\" ?\nEven after applying patch set 2?",
      "parentUuid": "904ccc5a_2ad1089b",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d91f08d_cab8de51",
        "filename": "content/browser/cache_storage/cache_storage.cc",
        "patchSetId": 1
      },
      "lineNbr": 358,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2018-02-05T19:11:19Z",
      "side": 1,
      "message": "Adding a test would be great, to prevent someone in the future from making a similar change and not realizing that there was a compatibility problem.\n\nBut it doesn\u0027t look like we have existing tests that would be easy to extend, and it might require refactoring, which is out of scope for this CL. I would be okay with a TODO(crbug.com/XXXX) to add a test for validating fields in the proto.\n\n(unless cmumford or pwnall see where we could easily test this now?)",
      "parentUuid": "f6fec02e_e1509134",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9547cb8f_54544b68",
        "filename": "content/browser/cache_storage/cache_storage_manager.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1001349
      },
      "writtenOn": "2018-02-02T17:55:55Z",
      "side": 1,
      "message": "Can this be removed?",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bd00063_24ae8dfd",
        "filename": "content/browser/cache_storage/cache_storage_manager.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1259876
      },
      "writtenOn": "2018-02-05T07:50:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9547cb8f_54544b68",
      "revId": "3a85d240a29fd1b8e6f59161de94927be5a134f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}