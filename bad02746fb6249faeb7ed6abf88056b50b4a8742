{
  "comments": [
    {
      "key": {
        "uuid": "9d878cf4_eb82af1e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/browseractions/BrowserActionsTabModelSelector.java",
        "patchSetId": 10
      },
      "lineNbr": 118,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-05T18:11:05Z",
      "side": 1,
      "message": "Should we just be calling saveTabListAsynchronously here?\n\nOne thing we could do is actually expose a method on this class (that basically is the contents of the ChromeTabbedActivity method) that would call the save at the end.  With this, we\u0027ll be calling this in quick succession for all the tabs being removed, so optimize that slightly by only doing it once at the end.\n\nThis optimization could be a TODO as well.",
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9795239_758c02a1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/browseractions/BrowserActionsTabModelSelector.java",
        "patchSetId": 10
      },
      "lineNbr": 118,
      "author": {
        "id": 1161045
      },
      "writtenOn": "2017-10-05T21:11:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9d878cf4_eb82af1e",
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "afb49bf0_8f10bb32",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 508,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-05T18:11:05Z",
      "side": 1,
      "message": "I wonder if we can do this without introducing a new launch type.  I think we could remove the launch type checks altogether and do:\n\nmIsDetached \u003d getActivity() \u003d\u003d null;\n\nAnytime you don\u0027t have an activity associated with your window android, you are detached.\n\nAs a separate CL, I think we should rename FROM_DETACHED to better reflect it\u0027s general use (FROM_SPECULATIVE_BACKGROUND_CREATION or something).  FROM_DETACHED is too conflated with reparenting IMO and we should make that clearer.",
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b5eb815_1d94e2fd",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 508,
      "author": {
        "id": 1161045
      },
      "writtenOn": "2017-10-05T21:11:36Z",
      "side": 1,
      "message": "I think using getActivity()\u003d\u003dnull is almost fine except TabDelegate.createFrozenTab passes null for WindowAndroid. But getWindowAndroid() !\u003dnull \u0026\u0026 getActivity() \u003d\u003d null looks fine.",
      "parentUuid": "afb49bf0_8f10bb32",
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05210800_b39b5bb1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 508,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-05T23:11:05Z",
      "side": 1,
      "message": "I would change getActivity() to handle the windowAndroid being null then.  I\u0027m not convinced anyone uses createFrozenTab except for some legacy document mode stuff and the tab persistent store.  We could likely change TabDelegate to also pass a non-null WindowAndroid if we wanted to enforce non-null WindowAndroids.",
      "parentUuid": "7b5eb815_1d94e2fd",
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9623d17e_32cd8e5d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 515,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-05T18:11:05Z",
      "side": 1,
      "message": "One thing I just realized is that this will be wrong for reparented tabs.  We should likely be recalculating the default theme color in the attach call.",
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c88e17a_b1d09147",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 515,
      "author": {
        "id": 1161045
      },
      "writtenOn": "2017-10-05T21:11:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9623d17e_32cd8e5d",
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e37b2285_cb6f1fa9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 1451,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-05T18:11:05Z",
      "side": 1,
      "message": "Tangent unrelated, but I\u0027d love to still see a point where Tab calls this for all types and not just reparenting.  It would help us catch issues where values are getting out of date if set outside of this.\n\nMight need some tweaking here as all tabs might need to start as detached and only attached in either initialize or some other place.\n\nWe should keep this in might going forward.",
      "range": {
        "startLine": 1451,
        "startChar": 16,
        "endLine": 1451,
        "endChar": 22
      },
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c4fac14_655cb319",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 1451,
      "author": {
        "id": 1161045
      },
      "writtenOn": "2017-10-05T21:11:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e37b2285_cb6f1fa9",
      "range": {
        "startLine": 1451,
        "startChar": 16,
        "endLine": 1451,
        "endChar": 22
      },
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e229dbd_0aeaf466",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 2940,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-10-05T18:01:37Z",
      "side": 1,
      "message": "Like we discussed offline, isDetached should never be a developer set state here but should always depend on the ability to link this construction to a live ChromeActivity.\n\nYou are giving a WindowAndroid here. Right now you can give a base class WindowAndroid with no Activity (nativeWindow.getActivity() returns null) and set isDetached to false which will be very confusing.\n\nThat state should only be set through the availability of an Activity. Here what happens if we set\n\n\ntab.mIsDetached \u003d nativeWindow.getActivity() \u003d\u003d null;\n\nDoes it work for all old and new use cases of this constructor?",
      "range": {
        "startLine": 2940,
        "startChar": 78,
        "endLine": 2940,
        "endChar": 88
      },
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9f53ee1_a58dd19f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tab/Tab.java",
        "patchSetId": 10
      },
      "lineNbr": 2940,
      "author": {
        "id": 1161045
      },
      "writtenOn": "2017-10-05T21:11:36Z",
      "side": 1,
      "message": "I think the safest way is inside Tab construct, check getWindownAndroid() !\u003d null \u0026\u0026 getActivity() \u003d\u003d null. The first part is needed because TabDelegate.creatFrozenTabFromState pass null for WindowAndroid.",
      "parentUuid": "6e229dbd_0aeaf466",
      "range": {
        "startLine": 2940,
        "startChar": 78,
        "endLine": 2940,
        "endChar": 88
      },
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02bfc932_7aed28ae",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tabmodel/TabModel.java",
        "patchSetId": 10
      },
      "lineNbr": 72,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-10-05T18:11:05Z",
      "side": 1,
      "message": "as mentioned in my other comment, I think we should be able to not need this or any of the plumbing and have detached simply mean no activity available.  I believe all action types could infer that w/o new launch types.",
      "range": {
        "startLine": 72,
        "startChar": 8,
        "endLine": 72,
        "endChar": 37
      },
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26a4e53a_e552c988",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/tabmodel/TabModel.java",
        "patchSetId": 10
      },
      "lineNbr": 72,
      "author": {
        "id": 1161045
      },
      "writtenOn": "2017-10-05T21:11:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "02bfc932_7aed28ae",
      "range": {
        "startLine": 72,
        "startChar": 8,
        "endLine": 72,
        "endChar": 37
      },
      "revId": "bad02746fb6249faeb7ed6abf88056b50b4a8742",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}