{
  "comments": [
    {
      "key": {
        "uuid": "5e4e2343_4515fde8",
        "filename": "components/download/content/internal/download_driver_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-10-24T04:53:35Z",
      "side": 1,
      "message": "no {} needed",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98e3ab37_04e5cbb0",
        "filename": "components/download/content/internal/download_driver_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-10-24T06:32:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5e4e2343_4515fde8",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0e1f0ef_9b6ee2af",
        "filename": "components/download/internal/DEPS",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-10-19T08:04:32Z",
      "side": 1,
      "message": "content::ResourceRequestBody cannot be used directly inside components/download/internal. If we decide to use it, may be it has to be wrapped inside another class something like download::UploadRequestBody?",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 1
      },
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eebd7aa1_8391694e",
        "filename": "components/download/internal/controller_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 464,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-10-24T04:53:35Z",
      "side": 1,
      "message": "i would refactor this a little bit to remove some indentations:\n\nif (!entry)\n  return nullptr;\n\nauto* client \u003d clients_-\u003eGetClient(entry-\u003eclient);\nif (!client)\n  return nullptr;\n      \nreturn client-\u003eGetUploadData();",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7adc43a4_8c9b7fa0",
        "filename": "components/download/internal/controller_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 464,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-10-24T06:32:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eebd7aa1_8391694e",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "27f6e95f_e2e430f6",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 217,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-10-19T08:04:32Z",
      "side": 1,
      "message": "Not sure where to keep these functions. Originally trimmed from the code in content/browser/loader/upload_data_stream_builder.cc",
      "range": {
        "startLine": 217,
        "startChar": 1,
        "endLine": 217,
        "endChar": 2
      },
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "650695d5_40063f3d",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 217,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-10-19T22:36:18Z",
      "side": 1,
      "message": "Does UploadDataStreamBuilder::Build work?  DownloadManagerImpl::BeginDownloadInternal seems to get file system context and blob context that can be passed to Build, but not sure if it works.\n\nIt seems the advantage of using content::ResourceRequestBody is it supports different kind of storage, like file, blob and bytes. So we can defer the costly IO operation when the upload happens. However in the function below we didn\u0027t implement blob and file, so it only supports bytes, which is also a in-memory copy same as copying std::string.\n\nI\u0027m not sure but alternatively, what about ask the download::Client for element_readers, so we can directly do net::ElementsUploadDataStream(std::move(element_readers), 0). In that way, we also don\u0027t have to use content::ResourceRequestBody. But this moves the work to build the reader to client.\n\nPlease discuss with David also.",
      "parentUuid": "27f6e95f_e2e430f6",
      "range": {
        "startLine": 217,
        "startChar": 1,
        "endLine": 217,
        "endChar": 2
      },
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "689b73cc_8e60eb70",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 217,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-10-20T05:41:29Z",
      "side": 1,
      "message": "Yea, UploadDataStreamBuilder::Build would be my preference. I wasn\u0027t sure if we can get the FileSystemContext and BlobStorageContext, Looks like we can, so we can get rid of these copied over functions. We would need to pass BrowserContext from DownloadManagerImpl/ParalleDownloadJob to this function, which is required to build the FileSystemContext. Also this conversion from ResourceRequestBody -\u003e UploadDataStream is only required for one of the two functions in download_utils.cc. The other one (CreateURLRequestOnIOThread which is called for network service) works fine with ResourceRequestBody, so no conversions required there.",
      "parentUuid": "650695d5_40063f3d",
      "range": {
        "startLine": 217,
        "startChar": 1,
        "endLine": 217,
        "endChar": 2
      },
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de5267c0_a755f09a",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 217,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-10-24T04:53:35Z",
      "side": 1,
      "message": "I think we should use UploadDataStreamBuilder::Build, FileSystemContext and BlobStorageContext are tied to the BrowserContext, but i don\u0027t see that\u0027s needed since we don\u0027t support blob and filesystem URIs for now",
      "parentUuid": "689b73cc_8e60eb70",
      "range": {
        "startLine": 217,
        "startChar": 1,
        "endLine": 217,
        "endChar": 2
      },
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07f14388_e265d973",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 217,
      "author": {
        "id": 1145120
      },
      "writtenOn": "2017-10-24T06:32:23Z",
      "side": 1,
      "message": "Done. Using UploadDataStreamBuilder::Build() with nullptr for FileSystemContext and BlobStorageContext.",
      "parentUuid": "de5267c0_a755f09a",
      "range": {
        "startLine": 217,
        "startChar": 1,
        "endLine": 217,
        "endChar": 2
      },
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "812a970c_7c326962",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 229,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-10-24T04:53:35Z",
      "side": 1,
      "message": "\u003d default;",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb5cf94e_c8782930",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 232,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-10-24T04:53:35Z",
      "side": 1,
      "message": "is this needed? And it seems the whole class is not needed, just use the super class?",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcde069c_c0eb524e",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 239,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-10-24T04:53:35Z",
      "side": 1,
      "message": "BlobData? or just file?",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9acb811_69c28bdd",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 281,
      "author": {
        "id": 1116010
      },
      "writtenOn": "2017-10-24T04:53:35Z",
      "side": 1,
      "message": "is this NOTREACHED or NOTIMPLEMENTED?",
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d746692_70657266",
        "filename": "content/browser/download/download_utils.cc",
        "patchSetId": 2
      },
      "lineNbr": 294,
      "author": {
        "id": 1197289
      },
      "writtenOn": "2017-10-19T22:36:18Z",
      "side": 1,
      "message": "Is this always 0?",
      "range": {
        "startLine": 294,
        "startChar": 40,
        "endLine": 294,
        "endChar": 50
      },
      "revId": "301ed9b451aeeae9bd76f95b3afe9c9f1767fccd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}