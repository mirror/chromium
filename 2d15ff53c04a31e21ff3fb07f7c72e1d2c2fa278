{
  "comments": [
    {
      "key": {
        "uuid": "8324234e_a0594e1e",
        "filename": "content/common/dom_storage/dom_storage_map.cc",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 1115965
      },
      "writtenOn": "2017-08-01T01:01:38Z",
      "side": 1,
      "message": "Don\u0027t we need to count the size of the key here? Also, fyi, i don\u0027t think we expect any is_null() values given how this is used?\n\nI\u0027d vote to retain the old code which did this:\n\nreturn (key.length() + value.string().length()) * sizeof(base::char16);\n\nIf if the value.is_null(), this is correct because value.string() returns a reference to an empty string in that case.",
      "revId": "2d15ff53c04a31e21ff3fb07f7c72e1d2c2fa278",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69889632_a9dc3f33",
        "filename": "content/common/dom_storage/dom_storage_map.cc",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 1125359
      },
      "writtenOn": "2017-08-04T23:20:56Z",
      "side": 1,
      "message": "I think is_null can be true when we use CommitBatch::GetSize() where it could be a remove change in the commit batch.\nhttps://chromium-review.googlesource.com/c/511562 has added dcheck for string() access.\n(key.length() + value.string().length()) * sizeof(base::char16) would return wrong value in case the string is null since we do not want to count the key\u0027s size in the quota when the item is removed. I don\u0027t understand which case we need to count the size of key.\nAlso I have a different CL to fix the memory_usage count which is no longer bytes_used.",
      "parentUuid": "8324234e_a0594e1e",
      "revId": "2d15ff53c04a31e21ff3fb07f7c72e1d2c2fa278",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dba87a51_f8b20b11",
        "filename": "content/common/dom_storage/dom_storage_map.cc",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 1115965
      },
      "writtenOn": "2017-08-09T22:45:06Z",
      "side": 1,
      "message": "Got it! Maybe add a comment about null values indicating deletions so we don\u0027t need to count them.",
      "parentUuid": "69889632_a9dc3f33",
      "revId": "2d15ff53c04a31e21ff3fb07f7c72e1d2c2fa278",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a67aa72_aa07157e",
        "filename": "content/common/dom_storage/dom_storage_map.cc",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1115965
      },
      "writtenOn": "2017-08-01T01:01:38Z",
      "side": 1,
      "message": "please put the methods in the .cc file in the same order as they are in the .h file",
      "revId": "2d15ff53c04a31e21ff3fb07f7c72e1d2c2fa278",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c98c00eb_05ef5cb4",
        "filename": "content/common/dom_storage/dom_storage_map.cc",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1125359
      },
      "writtenOn": "2017-08-04T23:20:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a67aa72_aa07157e",
      "revId": "2d15ff53c04a31e21ff3fb07f7c72e1d2c2fa278",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c88c023_942133df",
        "filename": "content/common/dom_storage/dom_storage_map_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1115965
      },
      "writtenOn": "2017-08-01T01:01:38Z",
      "side": 1,
      "message": "nice!",
      "revId": "2d15ff53c04a31e21ff3fb07f7c72e1d2c2fa278",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66c177fb_2bbb9a9c",
        "filename": "content/common/dom_storage/dom_storage_map_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1125359
      },
      "writtenOn": "2017-08-04T23:20:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1c88c023_942133df",
      "revId": "2d15ff53c04a31e21ff3fb07f7c72e1d2c2fa278",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}