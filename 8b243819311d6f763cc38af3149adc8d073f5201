{
  "comments": [
    {
      "key": {
        "uuid": "9c255f74_8246d8d7",
        "filename": "net/http/http_stream_factory_impl_job.h",
        "patchSetId": 2
      },
      "lineNbr": 343,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-12-22T21:45:29Z",
      "side": 1,
      "message": "nit: This is a member function. Can we just use |pushed_stream_id_| instead of passing it as an arg?",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c50ef2b_c5f1b48d",
        "filename": "net/http/http_stream_factory_impl_job.h",
        "patchSetId": 2
      },
      "lineNbr": 343,
      "author": {
        "id": 1116491
      },
      "writtenOn": "2018-01-02T19:54:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9c255f74_8246d8d7",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65c54b12_56e8daa1",
        "filename": "net/spdy/chromium/spdy_http_stream.cc",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-12-22T21:45:29Z",
      "side": 1,
      "message": "Should we conditionally invoke GetPushStream() here?\n\nIt\u0027s a bit non-intuitive that GetPushStream() is always called even though |pushed_stream_id_| is kNoPushedStreamFound in most cases.\n\nint error \u003d OK;\nif (pushed_stream_id_ !\u003d kNoPushedStreamFound) {\n   error  \u003d  spdy_session_-\u003eGetPushedStream(..);\n}",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0f18804_27e69877",
        "filename": "net/spdy/chromium/spdy_http_stream.cc",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1116491
      },
      "writtenOn": "2018-01-02T19:54:38Z",
      "side": 1,
      "message": "Unfortunately GetPushStream() needs to be called here unconditionally, because\n(1) if the pushed stream was created after HttpStreamFactoryImpl::Job called ClaimPushedStream(), then pushed_stream_id_ is kNoPushedStreamFound, but GetPushStream() can find the stream, also\n(2) if the pushed stream has http scheme, then ClaimPushedStream() does not return it, because such pushes are only allowed on the SpdySession that is selected by the normal pooling logic.  Such pushed streams are found by GetPushStream().",
      "parentUuid": "65c54b12_56e8daa1",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95c2fd45_d81294d5",
        "filename": "net/spdy/chromium/spdy_http_stream.cc",
        "patchSetId": 2
      },
      "lineNbr": 85,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2018-01-03T15:17:30Z",
      "side": 1,
      "message": "Ah, I see.\nFor (1), if Impl::Job doesn\u0027t find a push stream, it seems reasonable to me to not expect a second lookup attempt. Given that this is a racy case, I think it\u0027s fine to not handle it.\n\nFor (2), is there a discussion somewhere on why we are allowing push for http SpdySession that is selected by the normal pooling logic? Apologies if I am asking you questions that you answered before. I am trying to see if we can simplify the logic here. It\u0027s not exactly clear on why we need to perform lookup twice for every GET requests (since the kNoPushedStreamFound will be the majority cases).",
      "parentUuid": "a0f18804_27e69877",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ac99738_37effbc5",
        "filename": "net/spdy/chromium/spdy_session.cc",
        "patchSetId": 2
      },
      "lineNbr": 833,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-12-22T21:45:29Z",
      "side": 1,
      "message": "If you agree with my other comment, this method should be only called when pushed_stream_id !\u003d kNoPushedStreamFound.",
      "range": {
        "startLine": 833,
        "startChar": 26,
        "endLine": 833,
        "endChar": 46
      },
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "deee5aca_0f7a9cb3",
        "filename": "net/spdy/chromium/spdy_session.cc",
        "patchSetId": 2
      },
      "lineNbr": 833,
      "author": {
        "id": 1116491
      },
      "writtenOn": "2018-01-02T19:54:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9ac99738_37effbc5",
      "range": {
        "startLine": 833,
        "startChar": 26,
        "endLine": 833,
        "endChar": 46
      },
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5dd192a2_3ac805e1",
        "filename": "net/spdy/chromium/spdy_session.cc",
        "patchSetId": 2
      },
      "lineNbr": 835,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-12-22T21:45:29Z",
      "side": 1,
      "message": "Do we have a unit test covering this case?",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b54b8c2_e269c6fe",
        "filename": "net/spdy/chromium/spdy_session.cc",
        "patchSetId": 2
      },
      "lineNbr": 835,
      "author": {
        "id": 1116491
      },
      "writtenOn": "2018-01-02T19:54:38Z",
      "side": 1,
      "message": "Case 1: http scheme.  This is only allowed for trusted proxies.  This is covered by existing HttpNetworkTransactionTest.CrossOriginSPDYProxyPush test.\n\nCase 2: stream pushed later.  Good catch.  I am adding SpdyHttpStreamTest.UsePushedStreamEvenWithKNoPushedStreamFound for this.  Also, I am adding a few lines to SpdySessionTest.GetPushedStream to test that GetPushedStream() can return an error to a stream ID at one point and can return an actual stream for the same stream ID later.",
      "parentUuid": "5dd192a2_3ac805e1",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c4f9bd7_96aeb208",
        "filename": "net/spdy/chromium/spdy_session.h",
        "patchSetId": 2
      },
      "lineNbr": 287,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-12-22T21:45:29Z",
      "side": 1,
      "message": "nit:pushed_stream_id -\u003e |pushed_stream_id| to match the style of the rest of the comments.",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23d6e55f_97cd89d0",
        "filename": "net/spdy/chromium/spdy_session.h",
        "patchSetId": 2
      },
      "lineNbr": 287,
      "author": {
        "id": 1116491
      },
      "writtenOn": "2018-01-02T19:54:38Z",
      "side": 1,
      "message": "Good catch.  I put the whole expression into ||, here and in the next paragraph.",
      "parentUuid": "7c4f9bd7_96aeb208",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9eb9d68_9d675300",
        "filename": "net/spdy/chromium/spdy_session.h",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-12-22T21:45:29Z",
      "side": 1,
      "message": "optional nit: maybe consider renaming this method to GetPushedStream()\n\nOther places (e.g. ClaimPushedStream) refer to \"pushed stream\" instead of \"push stream\"",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a397dc97_e6f52502",
        "filename": "net/spdy/chromium/spdy_session.h",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1116491
      },
      "writtenOn": "2018-01-02T19:54:38Z",
      "side": 1,
      "message": "Good catch!",
      "parentUuid": "a9eb9d68_9d675300",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e8be9cc_3059247b",
        "filename": "net/spdy/chromium/spdy_session_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 5664,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-12-22T21:45:29Z",
      "side": 1,
      "message": "nit: not to bikeshed, my reviewers have been telling me that\n\n4 /*pushed_stream_id */ \nis more commonly used than\n/*pushed_stream_id \u003d*/ 4",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55ebea4f_fb809e8f",
        "filename": "net/spdy/chromium/spdy_session_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 5664,
      "author": {
        "id": 1116491
      },
      "writtenOn": "2018-01-02T19:54:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e8be9cc_3059247b",
      "revId": "8b243819311d6f763cc38af3149adc8d073f5201",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}