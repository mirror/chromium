{
  "comments": [
    {
      "key": {
        "uuid": "7a27fa19_05df4853",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 477,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-07-06T14:33:05Z",
      "side": 1,
      "message": "Do we have another VSyncEstimator? I am not sure I understand why do you want to call it RealVSyncEstimator?",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ea355dd_0a9d8311",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 477,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-07-06T15:01:48Z",
      "side": 1,
      "message": "Changed.",
      "parentUuid": "7a27fa19_05df4853",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f1c45439_0d33e72e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 478,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-07-06T14:33:05Z",
      "side": 1,
      "message": "Nit: do you need NANOS_PER_MILLISECOND? It looks like you can directly define NANOS_PER_SECOND as 1000000000",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6ddfca5_cbe516d9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 478,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-07-06T15:01:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f1c45439_0d33e72e",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8feb5149_a37faf73",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 496,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-07-06T14:33:05Z",
      "side": 1,
      "message": "Why do you want to postFrameCallback again?",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f71e6757_41f32e94",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 496,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-07-06T15:01:48Z",
      "side": 1,
      "message": "It\u0027s like requestAnimationFrame.",
      "parentUuid": "8feb5149_a37faf73",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c9dd65e_ce7f5f45",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 507,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-07-06T14:33:05Z",
      "side": 1,
      "message": "Use a const to replace 5 here.",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fe2d494_4884ef5a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 507,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-07-06T15:01:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6c9dd65e_ce7f5f45",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "582af941_5183df18",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 515,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-07-06T14:33:05Z",
      "side": 1,
      "message": "It is a good practice to handle assert failure. Do we observe this assert failure in practice at all? If so, we probably should figure out why and try to fix it. If it is not fixable by us, then perhaps use log instead of assert and document why.",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f13868d_1bffadc8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 515,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-07-06T15:01:48Z",
      "side": 1,
      "message": "As the comment above says, it shouldn\u0027t happen in practice, but while I was improving the algorithm I would hit it a lot, so it\u0027s useful there as a safeguard.\n\nIt\u0027s kind of impossible to solve in general if Android starts doing weird things like firing VSync callbacks too quickly, which does happen, and is why I added the 5 frame constant above.\n\nThere are also some edge cases that probably aren\u0027t possible, but may be, like if we somehow miss the perfectly wrong number of frames to slowly up the vsync interval prediction until it finds a new (wrong) stable value, or goes unstable.\n\nThis will also catch any devices that report the wrong frame rate, which used to happen on older devices, but hopefully doesn\u0027t on any cardboard/daydream devices - we\u0027ll find out.",
      "parentUuid": "582af941_5183df18",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4491eb_ea5f0be1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 542,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-07-06T14:33:05Z",
      "side": 1,
      "message": "Do we want to reset mVSyncTimebaseNanos here?",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be8a2075_bab8c3d6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 2
      },
      "lineNbr": 542,
      "author": {
        "id": 1002411
      },
      "writtenOn": "2017-07-06T15:01:48Z",
      "side": 1,
      "message": "Probably not. It wouldn\u0027t make much of a difference either way, other than to make us wait an extra vsync before updating the native timebase.",
      "parentUuid": "5f4491eb_ea5f0be1",
      "revId": "593d0a03cc4d24870544ee17091e48eb14bede4c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}