{
  "comments": [
    {
      "key": {
        "uuid": "87ece703_648c8469",
        "filename": "chrome/browser/chromeos/eol_notification.cc",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-19T17:13:32Z",
      "side": 1,
      "message": "Prefer enum class.",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b542281_9c22a678",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-19T17:13:32Z",
      "side": 1,
      "message": "Let\u0027s call this EPHEMERAL. \"Simple\" does not properly capture the fact that its lifetime semantics will be entirely different from the other handler types, which needs to be documented.",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2b7c6f1_196108b3",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-10-20T04:23:39Z",
      "side": 1,
      "message": "I think ephemeral is pretty confusing here. The notification itself is no more short-lived than any other notification. I don\u0027t think the lifetime semantics of the notification\u0027s handler (which are actually undefined, but must be longer than the notification) are the best way to describe the kind of notification. I\u0027m not married to \"simple\", but I don\u0027t want to wind up calling DisplayEphemeralNotification in a bunch of places. I think it makes more sense to reference the fact that the notification is somewhat of a singleton (each source of this type only shows one notification at a time), or that it\u0027s Chrome itself and not some third party that\u0027s ultimately the source.",
      "parentUuid": "9b542281_9c22a678",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "363c2536_edb9fcf3",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-23T09:10:28Z",
      "side": 1,
      "message": "\"Simple\" does not convey either of those ideas to me.\n\nThe notification *is* more short-lived than other notifications -- these ones are closed on profile shutdown, the other ones persist beyond it. They\u0027re ephemeral (or transient?) in comparison to that.\n\nIs your concern for DisplayEphemeralNotification purely aesthetical?",
      "parentUuid": "d2b7c6f1_196108b3",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33db54af_36bc2faa",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-10-23T23:56:11Z",
      "side": 1,
      "message": "\u003e \"Simple\" does not convey either of those ideas to me.\n\nAgain, I\u0027m up for calling it something besides \"simple\". Those two aspects are salient and we can build on them since you dislike \"simple\". We could call it BROWSER, as in browser vs content. I\u0027m open to other suggestions that give a hint as to the kind of notification.\n\n\u003e \n\u003e The notification *is* more short-lived than other notifications -- these ones are closed on profile shutdown, the other ones persist beyond it. They\u0027re ephemeral (or transient?) in comparison to that.\n\n\"ephemeral\" just doesn\u0027t suggest to me \"goes away on profile shutdown\". It sounds like something that can disappear at any time.\n\n\u003e \n\u003e Is your concern for DisplayEphemeralNotification purely aesthetical?\n\nI\u0027m not sure what you mean by aesthetic in this case. It is not self-documenting.  It is not analogous to the other names in this list, because \"persistent\", \"non persistent\", \"extension\", etc., do not describe what happens when a profile shuts down (and compare \"ephemeral\" to \"non persistent\" --- it would be a real head scratcher to have to guess what the difference there is). Ultimately, if I read \"DisplayEphemeralNotification\" I have somewhere between no idea and a wrong idea of what that will do if I don\u0027t already know exactly why it\u0027s called ephemeral.",
      "parentUuid": "363c2536_edb9fcf3",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51cbcf56_12ed50ae",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-25T16:16:32Z",
      "side": 1,
      "message": "The assumption we want to strive for is that notifications will be able to outlive their creator *unless* it\u0027s the new type, so we\u0027re adding the exception here.\n\nWhat about \"Transient\"?",
      "parentUuid": "33db54af_36bc2faa",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfb14698_a5c907ea",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-10-25T16:38:21Z",
      "side": 1,
      "message": "\u003e The assumption we want to strive for is that notifications will be able to outlive their creator *unless* it\u0027s the new type, so we\u0027re adding the exception here.\n\u003e \n\u003e What about \"Transient\"?\n\nThat is more or less a synonym of ephemeral. I don\u0027t dislike the word ephemeral itself. I guess I actually don\u0027t care too much about this enum name, I only care about the name of the new NDS function since that is what callsites will use (and in turn be copy-pasted into new callsites). So as long as we can call that DisplayBrowserNotification or similar, I\u0027d be happy.",
      "parentUuid": "51cbcf56_12ed50ae",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bd3d726_12adc541",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-25T16:49:22Z",
      "side": 1,
      "message": "Please just call it something that emphasises on the difference in lifetime, which is the important bit here. Neither \"Simple\" nor \"Browser\" do. Both \"Ephemeral\" and \"Transient\" do. Find a different word on that spectrum if you don\u0027t like those.\n\nNotifications that can be shown on any platforms where the notification can outlive the browser process (which includes non-Chrome OS desktop platforms) *and* could reasonably add value that way (which something like EOL would, if it were not Chrome OS-only) should be a default notification.\n\nNotifications that are limited to Chrome OS or are very context sensitive, like \"an extension has been installed\", are fine as the transient ones.\n\nThis all encapsulates thinking we have about the future direction some of the platforms may take.",
      "parentUuid": "dfb14698_a5c907ea",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f22f5e00_33caa7d9",
        "filename": "chrome/browser/notifications/notification_common.h",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-10-25T17:08:08Z",
      "side": 1,
      "message": "\u003e Please just call it something that emphasises on the difference in lifetime, which is the important bit here. Neither \"Simple\" nor \"Browser\" do.\n\nI disagree. How many pieces of browser ui outlive the browser?\n\n\u003e Both \"Ephemeral\" and \"Transient\" do. Find a different word on that spectrum if you don\u0027t like those.\n\nI object to the entire spectrum, but this conversation isn\u0027t going anywhere, so I\u0027ll pick one. Are you planning to rename the ones for web notifications any time soon? I maintain that having both TRANSIENT and PERSISTENT/NON_PERSISTENT is incredibly unhelpful nomenclature.",
      "parentUuid": "9bd3d726_12adc541",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "211b149a_44b93f3a",
        "filename": "chrome/browser/notifications/notification_display_service.cc",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-10-10T03:59:43Z",
      "side": 1,
      "message": "what do you think of the changes to this file? Do they address your concerns about closing?\n\nNote that simple notification handlers would not get OnClose calls if the notification is removed by NDS::Close (i.e. when !by_user).",
      "range": {
        "startLine": 40,
        "startChar": 4,
        "endLine": 40,
        "endChar": 9
      },
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97466609_33d52597",
        "filename": "chrome/browser/notifications/notification_display_service.cc",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-19T17:13:32Z",
      "side": 1,
      "message": "|by_user| can also be set to false for other reasons, notably when the notification expires. That\u0027s my only concern about these changes, the rest looks fine.",
      "parentUuid": "211b149a_44b93f3a",
      "range": {
        "startLine": 40,
        "startChar": 4,
        "endLine": 40,
        "endChar": 9
      },
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b75a226_88986f57",
        "filename": "chrome/browser/notifications/notification_display_service.cc",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-10-20T04:23:39Z",
      "side": 1,
      "message": "I actually can no longer remember why I wrote that, apparently my memory lasts less than 10 days. I think it\u0027s only in the MessageCenterDisplayService that this is true and we can fix this by changing NativeNotificationDisplayService::DoClose to pass the OnClose along in both the native bridge and MC cases.",
      "parentUuid": "97466609_33d52597",
      "range": {
        "startLine": 40,
        "startChar": 4,
        "endLine": 40,
        "endChar": 9
      },
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f127335_e3f9807b",
        "filename": "chrome/browser/notifications/notification_display_service.cc",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-19T17:13:32Z",
      "side": 1,
      "message": "nit: delete (nobody does this, on purpose)",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "325e3fc0_0007a3a8",
        "filename": "chrome/browser/notifications/notification_display_service.cc",
        "patchSetId": 4
      },
      "lineNbr": 48,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-19T17:13:32Z",
      "side": 1,
      "message": "nit: DCHECK(!simple_handlers_.count(notification.id());",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a1d77a9_12ccccee",
        "filename": "chrome/browser/notifications/notification_display_service.h",
        "patchSetId": 4
      },
      "lineNbr": 48,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-19T17:13:32Z",
      "side": 1,
      "message": "dito re: Simple -\u003e Ephemeral\n\nThis needs documentation. Specifically, the lifetime requirements of |handler|. It must outlive the notification. If the caller is a KeyedService on the same profile without its factory defining a dependency on the NotificationDisplayService, shut down may happen in the wrong order.",
      "revId": "e80115b34e2708c978a5bebdf1c0f582418c2e1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}