{
  "comments": [
    {
      "key": {
        "uuid": "78d44bf7_527bf4b2",
        "filename": "third_party/WebKit/Source/platform/loader/fetch/Resource.h",
        "patchSetId": 5
      },
      "lineNbr": 285,
      "author": {
        "id": 1176519
      },
      "writtenOn": "2017-06-20T07:58:49Z",
      "side": 1,
      "message": "what about introducing an enum class instead of encoding the state in a number of booleans, i.e.\n\nenum class CORSStatus { kSameOrigin, kSuccessfull, kFailed };",
      "revId": "7e398a573d411fdb520d6d07027b5143f5237fc8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5662307_a61f6a4b",
        "filename": "third_party/WebKit/Source/platform/loader/fetch/Resource.h",
        "patchSetId": 5
      },
      "lineNbr": 285,
      "author": {
        "id": 1217370
      },
      "writtenOn": "2017-06-20T08:17:28Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "78d44bf7_527bf4b2",
      "revId": "7e398a573d411fdb520d6d07027b5143f5237fc8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "588e6bf9_51849453",
        "filename": "third_party/WebKit/Source/platform/loader/fetch/ResourceLoader.cpp",
        "patchSetId": 5
      },
      "lineNbr": 396,
      "author": {
        "id": 1176519
      },
      "writtenOn": "2017-06-20T07:58:49Z",
      "side": 1,
      "message": "why don\u0027t you have to do this in the service worker case?",
      "revId": "7e398a573d411fdb520d6d07027b5143f5237fc8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7cd83f5c_4020c095",
        "filename": "third_party/WebKit/Source/platform/loader/fetch/ResourceLoader.cpp",
        "patchSetId": 5
      },
      "lineNbr": 396,
      "author": {
        "id": 1217370
      },
      "writtenOn": "2017-06-20T08:17:28Z",
      "side": 1,
      "message": "I don\u0027t know why, but before my changes, the following lines would only be reached when not fetched via service worker. I changed the \u003celse if\u003e construct to a separate \u003cif\u003e, so that I could call SetCORSStatus in between, i.e. after the initial error checks but before the call to CanAccessResponse (L401), which uses the result of the cors check.",
      "parentUuid": "588e6bf9_51849453",
      "revId": "7e398a573d411fdb520d6d07027b5143f5237fc8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8832a889_32a4e8f4",
        "filename": "third_party/WebKit/Source/platform/loader/fetch/ResourceLoader.cpp",
        "patchSetId": 5
      },
      "lineNbr": 396,
      "author": {
        "id": 1176519
      },
      "writtenOn": "2017-06-20T09:35:48Z",
      "side": 1,
      "message": "Right, but why not call SetCORSStatus in line 353 (in this patchset)?",
      "parentUuid": "7cd83f5c_4020c095",
      "revId": "7e398a573d411fdb520d6d07027b5143f5237fc8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd4112e9_a170cdc4",
        "filename": "third_party/WebKit/Source/platform/loader/fetch/ResourceLoader.cpp",
        "patchSetId": 5
      },
      "lineNbr": 396,
      "author": {
        "id": 1217370
      },
      "writtenOn": "2017-06-20T12:56:43Z",
      "side": 1,
      "message": "Right, moved it up",
      "parentUuid": "8832a889_32a4e8f4",
      "revId": "7e398a573d411fdb520d6d07027b5143f5237fc8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bb1abb9_52108958",
        "filename": "third_party/WebKit/Source/platform/loader/fetch/ResourceLoader.cpp",
        "patchSetId": 5
      },
      "lineNbr": 396,
      "author": {
        "id": 1002864
      },
      "writtenOn": "2017-06-21T07:30:45Z",
      "side": 1,
      "message": "We run CanAccessResponse() only when not fetched by SW because SW performs the CORS by itself.\n\nYou can see that ImageResource::IsAccessAllowed() and ScriptResource::CalculateAccessControlStatus() are looking at the response\u0027s type to see that it\u0027s not opaque which they shouldn\u0027t use. This is a result of CORS computation inside SW.\n\nI think Resource::IsEligibleForIntegrityCheck() should also see it. Maybe just a bug?",
      "parentUuid": "cd4112e9_a170cdc4",
      "revId": "7e398a573d411fdb520d6d07027b5143f5237fc8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}