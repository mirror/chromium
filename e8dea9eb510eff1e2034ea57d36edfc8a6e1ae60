{
  "comments": [
    {
      "key": {
        "uuid": "406137cd_9a156583",
        "filename": "content/browser/loader/cross_site_document_resource_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-12-21T17:12:04Z",
      "side": 1,
      "message": "instead of doing this, you can use\n\nukm::GetSourceIdForWebContentsDocument(web_contents);\n\nonce you do this, you should no longer call recorder-\u003eUpdateSourceURL() below, as this is taken care of for you for the shared source id you get via GetSourceIdForWebContentsDocument.\n\nwe\u0027re trying to move UKM clients away from creating their own source ids to using shared source ids, since it allows us to better audit how UKM URLs are recorded.",
      "revId": "e8dea9eb510eff1e2034ea57d36edfc8a6e1ae60",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f8c02d1_ae7823e7",
        "filename": "content/browser/loader/cross_site_document_resource_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2017-12-21T17:34:55Z",
      "side": 1,
      "message": "The code here cannot call ukm::GetSourceIdForWebContentsDocument(web_contents), because that method is exposed via components/ukm/content/source_url_recorder.h and //content is in general not allowed to take a dependency on //components.\n\nNote that holte@ has already taken a look at the usage of ukm::UkmRecorder::GetNewSourceID and UpdateSourceURL here - see https://chromium-review.googlesource.com/c/chromium/src/+/833021/2/content/browser/loader/cross_site_document_resource_handler.cc#55",
      "parentUuid": "406137cd_9a156583",
      "revId": "e8dea9eb510eff1e2034ea57d36edfc8a6e1ae60",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "79d9b0a1_5d2626bb",
        "filename": "content/browser/loader/cross_site_document_resource_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-12-25T17:23:36Z",
      "side": 1,
      "message": "Makes sense, thanks. We\u0027re going to be pushing back pretty hard on additional calls to UpdateSourceURL going forward. I guess this one sneaks through.\n\nWe\u0027ll need to figure out how to expose ukm::GetSourceIdForWebContentsDocument to content/ code. We will send you a patch to update your code to use this new method once it is available.",
      "parentUuid": "8f8c02d1_ae7823e7",
      "revId": "e8dea9eb510eff1e2034ea57d36edfc8a6e1ae60",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cb3c6db_729dfd5e",
        "filename": "content/browser/loader/cross_site_document_resource_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 121,
      "author": {
        "id": 1142059
      },
      "writtenOn": "2018-01-02T17:39:37Z",
      "side": 1,
      "message": "#include \"base/bind_helpers.h\", \"base/bind.h\", and \"content/public/browser/browser_thread.h\"",
      "range": {
        "startLine": 121,
        "startChar": 10,
        "endLine": 121,
        "endChar": 22
      },
      "revId": "e8dea9eb510eff1e2034ea57d36edfc8a6e1ae60",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da7acf66_9fe04ca9",
        "filename": "content/browser/loader/cross_site_document_resource_handler.cc",
        "patchSetId": 5
      },
      "lineNbr": 121,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2018-01-02T21:28:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9cb3c6db_729dfd5e",
      "range": {
        "startLine": 121,
        "startChar": 10,
        "endLine": 121,
        "endChar": 22
      },
      "revId": "e8dea9eb510eff1e2034ea57d36edfc8a6e1ae60",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}