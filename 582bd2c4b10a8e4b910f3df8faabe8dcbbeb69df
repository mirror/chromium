{
  "comments": [
    {
      "key": {
        "uuid": "fce812bc_40243369",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 252,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "(optional) I slightly prefer breaking this up into two if statements, just seems easier to read for me.\n\nif (reason !\u003d Success) {\n  owner_-\u003eOnFinish(reason);\n  return;\n}\nif (MetaData() \u0026\u0026 Body()) {\n  owner_-\u003eOnFinish(Succes);\n}",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eecad2ef_3b96751b",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 252,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "I agree. Updated.",
      "parentUuid": "fce812bc_40243369",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a241c159_472a5b44",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 402,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "unnecessary return",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2540122c_8ddeb093",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 402,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a241c159_472a5b44",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d650a692_6d5e6e45",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 414,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "isn\u0027t there pending_scripts_.clear()?",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6058c296_ff6f6571",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 414,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "No, std::queue doesn\u0027t have clear.",
      "parentUuid": "d650a692_6d5e6e45",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bbf82429_9a1445a7",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 483,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "Why is the has_main_script_streamed_ needed?\n\nIs the to accoutn for a service worker named sw.js doing importScript(\u0027sw.js\u0027)? Can you add comments?",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8fb6f47_e2a5bce6",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.cc",
        "patchSetId": 12
      },
      "lineNbr": 483,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bbf82429_9a1445a7",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f5cb040_ff13345c",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 29,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "Although it\u0027s not an explicit state, I think this documentation should explain the three phases and what \"streaming\" means (it seems to mean the first time the script are sent, without RequestInstalledScript(). i.e.,\n\nSender has three phases.\n\n1. All installed scripts are sent to the renderer. |pending_scripts_| is set to all the scripts and |state_| is kSendingScripts. This initial phase is called \"streaming\".\n\n2. |pending_scripts_| is empty and |state_| is kIdle. If the renderer calls RequestInstallScript(), the requested script is added to |pending_scripts_| and |state_| is kSendingScripts again.\n\n3. Whenever |pending_scripts_| empties, we return to 2.",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a5f8bc4_074ef73f",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 29,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Thanks, it seems better:) Updated.",
      "parentUuid": "0f5cb040_ff13345c",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8844a46f_efd04639",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 62,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "Does finished_reason get updated every time we enter idle, or only the first time?\n\nIf it gets updated every time, the comment seems inaccurate talking about \"starting the worker\". A service worker that\u0027s already running can call importScripts().",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29589eb5_df2f09fe",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 62,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Ah, that\u0027s right. Thanks.\nFixed a bit.",
      "parentUuid": "8844a46f_efd04639",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f873d30d_a57db9b5",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 63,
      "author": {
        "id": 1001472
      },
      "writtenOn": "2017-10-06T09:43:27Z",
      "side": 1,
      "message": "Hm... if the finished_reason_ gets updated every time pending_scripts_ becomes empty I prefer calling it last_finished_reason_ or last_ something, which feels a little clearer.",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d86c63d_7d675f24",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 63,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Sounds good! Done.",
      "parentUuid": "f873d30d_a57db9b5",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "32213d3a_d64c0651",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 78,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "\"if the installed script stored in the disk cache is corrupted\" -\u003e something like \"if |reason| indicates failure to read the installed script from the disk cache (kNoHttpInfoError or kResponseReaderError), then |owner_|  is doomed via ServiceWorkerRegistration::DeleteVersion()\"",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88c2fc7e_e850ebce",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 78,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "32213d3a_d64c0651",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e0e8f15b_7aaee754",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 92,
      "author": {
        "id": 1001472
      },
      "writtenOn": "2017-10-06T09:43:27Z",
      "side": 1,
      "message": "This Finish() feels a bit confusing too, while I know this is aligned with the enum name FinishedReason (and I don\u0027t have any better idea about what the enum could be called otherwise)\n\nUpdateFinishedReasonAndBecomeIdle()\n\nis the best descriptive name I can think of, but it\u0027s probably a bit too long?",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2232c183_a50b146b",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 92,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Yeah, I also felt it\u0027s a bit awkward but couldn\u0027t come up with another good name. OnSendingScriptsFinished was another option I originally thought of, but it doesn\u0027t describe what it does. \nI changed it to UpdateFinishedReasonAndBecomeIdle() while it still seems a little bit detail.",
      "parentUuid": "e0e8f15b_7aaee754",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6bd1d050_0a423baa",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 101,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "Can you document |has_main_script_streamed_|? \"streamed\" here means it\u0027s the first time the script is being sent?",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7407dde_275ce970",
        "filename": "content/browser/service_worker/service_worker_installed_scripts_sender.h",
        "patchSetId": 12
      },
      "lineNbr": 101,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Sorry, I\u0027ve forgot to change \"streamed\" to \"sent\". I think it could be somewhat better description. \nHow about |has_main_script_sent_| and no document? Is it still better to have short description?",
      "parentUuid": "6bd1d050_0a423baa",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e4dd88f_92e92110",
        "filename": "content/common/service_worker/service_worker_installed_scripts_manager.mojom",
        "patchSetId": 12
      },
      "lineNbr": 33,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "A bit hard to read, sounds like the renderer is being requested to send installed scripts.\n\nFor consistency with below: Browser-side interface. The renderer uses this interface to request installed scripts from the browser process.",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67feafd2_b32752b8",
        "filename": "content/common/service_worker/service_worker_installed_scripts_manager.mojom",
        "patchSetId": 12
      },
      "lineNbr": 33,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5e4dd88f_92e92110",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "34f9999b_6871d82e",
        "filename": "third_party/WebKit/Source/core/workers/InstalledScriptsManager.h",
        "patchSetId": 12
      },
      "lineNbr": 63,
      "author": {
        "id": 1000128
      },
      "writtenOn": "2017-10-06T08:24:45Z",
      "side": 1,
      "message": "optional nit: may be nice to just set *out \u003d ScriptData()  for safety",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b06eccf5_38ba29a9",
        "filename": "third_party/WebKit/Source/core/workers/InstalledScriptsManager.h",
        "patchSetId": 12
      },
      "lineNbr": 63,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-17T02:28:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "34f9999b_6871d82e",
      "revId": "582bd2c4b10a8e4b910f3df8faabe8dcbbeb69df",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}