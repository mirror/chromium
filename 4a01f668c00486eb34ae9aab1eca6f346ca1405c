{
  "comments": [
    {
      "key": {
        "uuid": "7b941ab2_0e212c4b",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2018-01-30T16:34:52Z",
      "side": 1,
      "message": "Is it possible for this to indefinitely delay entering tablet mode? The accelerometer readings in this case could fluctuate between 359 -\u003e 1 -\u003e 359 etc.",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5dfe768f_dec369ba",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1199459
      },
      "writtenOn": "2018-01-30T19:18:12Z",
      "side": 1,
      "message": "There are four scenarios here:\na.Open lid: [359, 1, 5, 30, ...]\nb.Close lid: [30, 5, 1, 359, close lid event]\nc.Rotate lid to fully opened: [320, 359, 1, |tablet_mode_switch_is_on_|\u003dtrue]\nd.Rotate lid from fully opened: [|tablet_mode_switch_is_on_|\u003dfalse, 240, 230, ...]\n\nWhen |tablet_mode_switch_is_on_|\u003dtrue, lid angle will not be handled, it seems to be turned on when lid angle goes larger than 300 (?) and turned off when lid angle goes less than 240 (?).\n\nBased on above scenarios, the lid angle will never fall in incorrect zone for a long time. So fluctuation between 359 and 1 is not possible.\n\nHowever, I found my current solution won\u0027t solve scenario c (although it never occurs in my eve.). While the solution in patch set 6 can solve all scenario6.\n\nAlso, I found that closing lid hardly may trigger an angle outside [355,360] (e.g. 352), so I think we should still use the existing unstable zone [340, 360], [0, 20].\n\nIn summary, how do you think about switching to the solution in patch set 6?",
      "parentUuid": "7b941ab2_0e212c4b",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "379ad750_0cfd31f5",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1199459
      },
      "writtenOn": "2018-01-30T19:29:48Z",
      "side": 1,
      "message": "(Sorry, please ignore my above comment, because current solution can solve scenario c because unstable angle won\u0027t be used to exit tablet mode [1]\n\n[1] https://cs.chromium.org/chromium/src/ash/wm/tablet_mode/tablet_mode_controller.cc?dr\u0026l\u003d365)\n\nThere are four scenarios here:\na.Open lid: [359, 1, 5, 30, ...]\nb.Close lid: [30, 5, 1, 359, close lid event]\nc.Rotate lid to fully opened: [320, 359, 1, |tablet_mode_switch_is_on_|\u003dtrue]\nd.Rotate lid from fully opened: [|tablet_mode_switch_is_on_|\u003dfalse, 240, 230, ...]\n\nWhen |tablet_mode_switch_is_on_|\u003dtrue, lid angle will not be handled, it seems to be turned on when lid angle goes larger than 300 (?) and turned off when lid angle goes less than 240 (?).\n\nBased on above scenarios, the lid angle will never fall in incorrect zone for a long time. So fluctuation between 359 and 1 is not possible.\n\nAlso, I found that closing lid hardly may trigger an angle outside [355,360] (e.g. 352), so I think we should still use the existing unstable zone [340, 360] instead of [355, 360].\n\nI will make the change and upload a new patch set.",
      "parentUuid": "5dfe768f_dec369ba",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c153401_1f78f751",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2018-01-30T20:25:33Z",
      "side": 1,
      "message": "Not all devices have a tablet mode switch, some rely strictly on the accelerometer. I\u0027m not sure if we actually know (other than having seen lid events) whether the device supports it - but jonross might know for sure.",
      "parentUuid": "379ad750_0cfd31f5",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a794c81_908d1b2b",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1199459
      },
      "writtenOn": "2018-01-31T18:07:34Z",
      "side": 1,
      "message": "Even without the |tablet_mode_switch_is_on_| being set, scenario c and d still work fine because  unstable angle [0, 20] won\u0027t be used to exit tablet mode.",
      "parentUuid": "4c153401_1f78f751",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2041b7f7_05d50a6c",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2018-02-01T15:51:37Z",
      "side": 1,
      "message": "However we may never enter tablet mode in the first place: for example, if you resume a sleeping device in tablet mode. This is why the existing logic only discarded events near a lid open event. If we only treat [0, 20], [340, 360] as a single range and keep the last time we entered that range then we could make sure the delay was a maximum of 2 seconds.",
      "parentUuid": "7a794c81_908d1b2b",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "654f89e2_948d8d06",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1199459
      },
      "writtenOn": "2018-02-01T18:20:34Z",
      "side": 1,
      "message": "Yes, you are right. The CL in patch set 6 is : treating [0, 20] [340, 360] as a single range and only using the angle after the lid angle readings continuously fall into this range for 2 seconds. Should I revert back to that solution?",
      "parentUuid": "2041b7f7_05d50a6c",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8471dbb8_b724bf6a",
        "filename": "ash/wm/tablet_mode/tablet_mode_controller.cc",
        "patchSetId": 9
      },
      "lineNbr": 371,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2018-02-02T16:13:25Z",
      "side": 1,
      "message": "Yes, that sounds best. Thanks!",
      "parentUuid": "654f89e2_948d8d06",
      "revId": "4a01f668c00486eb34ae9aab1eca6f346ca1405c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}