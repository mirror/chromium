{
  "comments": [
    {
      "key": {
        "uuid": "a42cd281_c8b57922",
        "filename": "content/browser/renderer_host/media/media_stream_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1216,
      "author": {
        "id": 1153409
      },
      "writtenOn": "2017-12-15T08:38:45Z",
      "side": 1,
      "message": "Why we DCHECK() input parameters everywhere?\nWhich parts of code guarantee that nullop won\u0027t leak in here (and other places)? Could you elaborate in each case?\n\nThey used to be UnavailableParameters if a device is not found, so we would silently fallback to a fake device in some situations. I\u0027m not sure the code is fully prepared to deal with an absence of parameters.",
      "revId": "89a42f425507ba91573376c34d3e12daebaaa43c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1d36b58_5058f6e7",
        "filename": "content/browser/renderer_host/media/media_stream_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1216,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-15T11:16:43Z",
      "side": 1,
      "message": "I have removed the two DCHECKs(one here and another at l.1548 in the next patchset(ps8).\n\nThe one at l.1373 is required to ensure that |input| is not nullop after the device has been opened. AudioInputDeviceManager::Open guarantees that |input| is never nullop.",
      "parentUuid": "a42cd281_c8b57922",
      "revId": "89a42f425507ba91573376c34d3e12daebaaa43c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65c0bf95_31e9f41e",
        "filename": "content/browser/renderer_host/media/media_stream_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 1548,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-14T12:57:53Z",
      "side": 1,
      "message": "The current failures are due to this DCHECK. Should we DCHECK in HandleAccessRequestResponse? devices are not yet opened in HandleAccessRequestResponse and therefore it\u0027s possible for |input| to be empty. HandleAccessRequestResponse is a callback run from RequestMediaAccessPermission() where, MediaStreamDevices are set without |input|.\n\nhttps://cs.chromium.org/chromium/src/chrome/browser/media/webrtc/tab_capture_access_handler.cc?l\u003d43 is one such example. There are many such cases.\n\nI think we should add checks for |input| instead of DCHECKs in HandleAccessRequestResponse.",
      "range": {
        "startLine": 1548,
        "startChar": 27,
        "endLine": 1548,
        "endChar": 0
      },
      "revId": "89a42f425507ba91573376c34d3e12daebaaa43c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}