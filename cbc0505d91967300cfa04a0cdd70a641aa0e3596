{
  "comments": [
    {
      "key": {
        "uuid": "274578ba_4296c520",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 39,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-01-02T14:17:23Z",
      "side": 1,
      "message": "per earlier comment thread, please rename this and update the comment to match what it contains:\n\n  // Whether the browser containing the tab is visible.\n  bool is_browser_visible;\n\nif \"visible\" isn\u0027t well-defined in chrome, it\u0027d probably also be good to mention exactly what it means:\n\na) browser isn\u0027t minimized or on another desktop\nb) browser isn\u0027t obscured by another (possibly fullscreen?) window\n\ni think that this probably just implies a), but i\u0027m not 100% sure.",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0c6bd36_3af69e43",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 39,
      "author": {
        "id": 1215104
      },
      "writtenOn": "2018-01-03T01:56:29Z",
      "side": 1,
      "message": "Sorry if I wasn\u0027t very clear, I actually meant for the tab to be visible, i.e. painted and visible to users. I think we can have a visible browser with 2 tabs: one visible and one isn\u0027t (i.e. covered by another browser window). So this field is to record whether a tab is visible.",
      "parentUuid": "274578ba_4296c520",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfb0880d_fa5e9f07",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 39,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-01-03T16:18:59Z",
      "side": 1,
      "message": "sorry, i don\u0027t understand \"we can have a visible browser with 2 tabs: one visible and one isn\u0027t (i.e. covered by another browser window)\". browser windows usually (always?) just display a single tab, i.e. the active one, right? if a browser is visible, won\u0027t its (single) active tab always be visible, while all of the other tabs will be inactive and not visible? see also below.",
      "parentUuid": "f0c6bd36_3af69e43",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3deaf3c_289c278f",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 39,
      "author": {
        "id": 1215104
      },
      "writtenOn": "2018-01-05T03:29:46Z",
      "side": 1,
      "message": "Thanks for your comments. I had a different about tab\u0027s visibility. After some rethinking, I\u0027ve replaced it with is_browser_visible.",
      "parentUuid": "bfb0880d_fa5e9f07",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00592f3f_d7e2e311",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-01-02T14:17:23Z",
      "side": 1,
      "message": "could this be changed?\n\n  // Whether the tab is the selected tab in its browser.\n  bool is_selected;\n\n(or s/selected/active/ if \"active\" is the word that chrome uses for this concept.)\n\n\"is_active\" feels a bit confusing to me on its own, since this apparently actually means \"is_tab_active_and_browser_visible\".\n\nwhat i was trying to get at before is that this seems like it overlaps with is_browser_visible, e.g. is_selected will never be true in a TabProperty if is_browser_visible is false. if that\u0027s correct, would it be strictly better to only track the tab\u0027s active/selected state here instead of mixing in information about the browser?",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9bade36_eec5bc53",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1215104
      },
      "writtenOn": "2018-01-03T01:56:29Z",
      "side": 1,
      "message": "I think \"active\" is the word that\u0027s used (e.g. active_index), maybe Michael can comment as well?\n\nThe only browser-property I\u0027m checking is is_browser_focused. The other properties (is_active and is_visible) are both tab-properties. About their relationships, I think the following holds (-/-\u003e means \"does not imply\"):\n\n(i). is_browser_focused -/-\u003e is_active or is_visible\n- A tab in the focused browser may still be invisible and/or not the active one.\n\n(ii). is_visible -/-\u003e is_browser_focused or is_active\n- A visible tab doesn\u0027t have to be the active one of its browser. Its browser should be visible, but doesn\u0027t have to be the one in focus.\n\n(iii). is_active -/-\u003e is_browser_focused\n- Another app may be running and is focused so the active tab\u0027s browser may not be in focus.\n\n(iv). is_active -/-\u003e is_visible\n- Its browser is partially visible, and so its active tab may be hidden.\n\nAs there\u0027s not much overlap and I don\u0027t think any property is redundant, I\u0027d prefer to track them separately just so that I\u0027m not missing out on any corner cases. I\u0027ll analyse these data in a post-processing pipeline.\n\nThanks.",
      "parentUuid": "00592f3f_d7e2e311",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb7486e2_a380a879",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2018-01-03T16:18:59Z",
      "side": 1,
      "message": "i\u0027m a bit surprised that a visible tab doesn\u0027t need to be active. under what circumstances is a tab that\u0027s not the active one still visible?\n\ni also don\u0027t think that is_visible is influenced by whether a tab is obscured by another window (or possibly even by whether it\u0027s partially offscreen). visibility testing like that seems like it would be very expensive. is https://cs.chromium.org/chromium/src/content/browser/web_contents/web_contents_impl.cc?rcl\u003d11a328b955d3cf6c24fa96df733edda96910c7fc\u0026l\u003d1555 the underlying method that\u0027s being called here?\n\nif you haven\u0027t already, please do some manual testing of which of these are true and false in different cases and update the comment in this file to offer a detailed description of what \"visible\" means. (and if a visible tab can be completely obscured by another window, is it still a useful thing to track here?)",
      "parentUuid": "c9bade36_eec5bc53",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49942d71_ef5b69f2",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2018-01-04T19:56:49Z",
      "side": 1,
      "message": "Jia, are you by chance looking at the TabStripImpl\u0027s idea of \"visible\" tabs? Those are referring to the UI for the tab itself in the tab strip.\n\nI don\u0027t know when a tab (meaning the tab\u0027s root WebContents) could be visible when the tab isn\u0027t the active one in its browser.\n\nAs far as whether a tab is obscured by another window, the only check I know of for that is a new method in TabManager that checks browser window occlusion for the purposes of tab management. I wouldn\u0027t worry about that here, I think we\u0027re just using the IsVisible method Dan linked above.",
      "parentUuid": "bb7486e2_a380a879",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4093f91_ba797e82",
        "filename": "chrome/browser/chromeos/power/ml/user_activity_logger_delegate_ukm.h",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1215104
      },
      "writtenOn": "2018-01-05T03:29:46Z",
      "side": 1,
      "message": "Thanks for your comments. I\u0027ve replaced it with is_browser_visible. Although I doubt the usefulness of invisible browsers\u0027 tabs in making predictions, I\u0027d like to log them for offline analysis. Given the usual release cycle and the lag in getting data, having more than required is probably better than not having enough. :)",
      "parentUuid": "49942d71_ef5b69f2",
      "revId": "cbc0505d91967300cfa04a0cdd70a641aa0e3596",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}