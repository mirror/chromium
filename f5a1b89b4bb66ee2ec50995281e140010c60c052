{
  "comments": [
    {
      "key": {
        "uuid": "832ad6c1_77b0d71e",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2018-01-17T20:18:01Z",
      "side": 1,
      "message": "This will not apply the MD alpha to other users of custom placeholder text colors:\n  https://cs.chromium.org/search/?q\u003dset_placeholder_text_color\u0026type\u003dcs\nAre you sure this change should also affect folder headers, login passwords, and notification inputs?\n\nOne possible alternative is to build that alpha into the default value of placeholder_text_color_ and the values passed to set_placeholder_text_color (with secondary MD on)",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f720fab_fc7db5e7",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1189880
      },
      "writtenOn": "2018-01-17T21:04:24Z",
      "side": 1,
      "message": "As for: AppListView Folder header, SearchBoxView, and Notification Views:\nThe UX designer for these features has already said that harmony is not intended to change CrOs, it was supposed to be isolated to Chrome.\n\nI\u0027ll check with the designer for Login View.\n\nPerhaps the proper answer is to have this behind #if defined(OS_CHROMEOS)",
      "parentUuid": "832ad6c1_77b0d71e",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b88d5192_f8b9611f",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-17T22:19:51Z",
      "side": 1,
      "message": "So by my reading, this is rendering kDefaultPlaceholderTextColor pretty much unused, which means it would make more sense to make placeholder_text_color_ an Optional that defaults to nullopt (for harmony) or kDefaultPlaceholderTextColor (for !harmony, until we rip that out).",
      "parentUuid": "9f720fab_fc7db5e7",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "939b7783_7d80f812",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1189880
      },
      "writtenOn": "2018-01-17T22:31:52Z",
      "side": 1,
      "message": "Estade@,\n\nYour comment is true for chrome (where harmony will be the default behavior) but not for CrOS.\nIn CrOS we want the default to be kDefaultPlaceholderTextColor.\n\nMSW@,\nI just checked with sgabriel@ and all of the effects of harmony mentioned above were only intended for Chrome, not CrOS. \n\nSo this change will bring the CrOS UI back into alignment with the spec without changing Chrome.",
      "parentUuid": "9f720fab_fc7db5e7",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a73817f8_30301df8",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-17T22:40:11Z",
      "side": 1,
      "message": "Chrome OS does also run Chrome, so I think you\u0027re talking about a distinction between ash (cros native ui) and the browser.\n\nUnfortunately (or fortunately), it\u0027s not easy to treat \"chrome\" and \"chrome os\" as totally separate products, so while I\u0027m sure Sebastien is correct in the sense that Harmony designers weren\u0027t explicitly thinking about Chrome OS, I\u0027m not sure we should maintain this line in the sand at all costs.\n\nIn short, I don\u0027t think we want to keep kDefaultPlaceholderTextColor. The search box in the bug Sebastien filed wasn\u0027t using that color anyway.",
      "parentUuid": "939b7783_7d80f812",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8df1333_77c68980",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2018-01-17T22:47:10Z",
      "side": 1,
      "message": "I\u0027m confused... don\u0027t some textfields use the placeholder feature without setting the color? In those cases, shouldn\u0027t they use kDefaultPlaceholderTextColor (with 0x83 alpha if IsSecondaryUiMaterial?). So, it seems like the desired change is:\n(1) Init placeholder_text_color_ to kDefaultPlaceholderTextColor in the ctor.\n(2) Change the alpha to 0x83 in the ctor if IsSecondaryUiMaterial.\n(3) Continue allowing callers to override placeholder_text_color_.\n(4) Use |placeholder_text_color_| as-is here, without alpha changes.\n\nThat seems like it should allow CrOS UI elements to override the color without being affected by alpha changes, and continue to use the intended default color elsewhere.",
      "parentUuid": "a73817f8_30301df8",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48ae229b_4a15ba32",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1189880
      },
      "writtenOn": "2018-01-17T22:53:23Z",
      "side": 1,
      "message": "Estade@,\nYou\u0027re right, I got the distinction incorrect, thanks for clarifying.\n\nUnfortunately the AppList is in the browser process as well, so we can\u0027t even split this by process.\n\n+1 to MSW\u0027s approach. We shouldn\u0027t modify or enforce a new default placeholder text color without an explicit decision from designers IMO.",
      "parentUuid": "c8df1333_77c68980",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "853982de_eef3684d",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-17T22:57:30Z",
      "side": 1,
      "message": "\u003e don\u0027t some textfields use the placeholder feature without setting the color? In those cases, shouldn\u0027t they use kDefaultPlaceholderTextColor \n\nWith this CL, in Harmony, no. They\u0027re using SkColorSetA(GetTextColor(), 0x83);",
      "parentUuid": "48ae229b_4a15ba32",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7bbda8ce_fa51f77d",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1189880
      },
      "writtenOn": "2018-01-17T23:06:18Z",
      "side": 1,
      "message": "So with the new patchset with harmony disabled in CrOS, all is well.\n\nUnfortunately with Harmony enabled, harmony design is still leaking into CrOS system UI by overriding the expected default placeholder text color.\n\nThis patch will prevent harmony from overriding explicitly set placeholder text colors though, which is an improvement.\n\nEstade, what do you think about detecting if we are in Ash or Browser process (once the AppList migration is complete) before enforcing harmony?",
      "parentUuid": "48ae229b_4a15ba32",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "039f071f_eef68e59",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-18T01:08:12Z",
      "side": 1,
      "message": "We don\u0027t want to detect the process. We\u0027d want to use a different NativeTheme for different situations.\n\nI still don\u0027t understand this code. In Harmony, kDefaultPlaceholderTextColor is totally ignored. It\u0027s a hack to use that as the indicator for unset color. This is pretty much exactly what Optional is for.",
      "parentUuid": "7bbda8ce_fa51f77d",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8c545b0_5966ba39",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1189880
      },
      "writtenOn": "2018-01-18T17:25:15Z",
      "side": 1,
      "message": "Edited the comment.\nI understand this seems hacky and I know that Harmony is supposed to be the default behavior for Chrome UI in the future(not Chrome OS UI).\n\nIf Harmony is going to be enabled in M65, I\u0027d prefer to get this fix in as it will prevent harmony from breaking CrOS UI in various places. I don\u0027t have any experience with NativeTheme, is it easy enough to do before the M65 branch later tonight?\n\nIf we don\u0027t have to worry about harmony being enabled in M65, this patch can obviously wait.",
      "parentUuid": "039f071f_eef68e59",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e949221d_372f592b",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-18T17:32:16Z",
      "side": 1,
      "message": "\u003e (not Chrome OS UI)\n\nHarmony sort of is going to be the default chrome os ui. Harmony implies a /lot/ of changes. Many of them, like ink drops and the appearance of controls etc., will apply on chrome os if they don\u0027t already. Some things like typography may differ on Chrome OS ui but I wouldn\u0027t go so far as to say Ash isn\u0027t getting harmony (\"harmony\" \u003d\u003d \"material design\" as far as I\u0027m concerned, hence \"IsSecondaryUiMaterial\").\n\nI just want it to be the case that when we delete IsSecondaryUiMaterial because it always returns true, the code looks right after we do so. Imagine the world where that\u0027s the case: there, kDefaultPlaceholderTextColor has no value except as a sort of hacky special value. What I\u0027m asking for at this point is\n\n  base::Optional\u003cSkColor\u003e placeholder_text_color_;\n\ninstead of \n\n  SkColor placeholder_text_color_;",
      "parentUuid": "d8c545b0_5966ba39",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b53f0dad_cda18397",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1189880
      },
      "writtenOn": "2018-01-18T18:11:54Z",
      "side": 1,
      "message": "Ok! Understood. I think we are playing defense with harmony because we didn\u0027t know much about it until our designers started filing bug reports about incorrect UI elements.\n\nThanks for being explicit, I\u0027ll upload a patch with that. I didn\u0027t know we could use features of C++17!! Awesome.",
      "parentUuid": "e949221d_372f592b",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "964f972e_21c9ac8f",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-18T22:43:57Z",
      "side": 1,
      "message": "we can\u0027t, that\u0027s why we have recreated std::optional as base::Optional",
      "parentUuid": "b53f0dad_cda18397",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73292843_e1ec3cb0",
        "filename": "ui/views/controls/textfield/textfield.cc",
        "patchSetId": 1
      },
      "lineNbr": 2037,
      "author": {
        "id": 1189880
      },
      "writtenOn": "2018-01-18T22:51:51Z",
      "side": 1,
      "message": "I should have been more specific. \"use features of c++17\" -\u003e \"use recreated features of C++17\"",
      "parentUuid": "964f972e_21c9ac8f",
      "revId": "f5a1b89b4bb66ee2ec50995281e140010c60c052",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}