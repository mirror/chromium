{
  "comments": [
    {
      "key": {
        "uuid": "df631088_d7a4c32a",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-04T22:43:18Z",
      "side": 1,
      "message": "this is the purpose of the 1x icons. Did you find https://chromium.googlesource.com/chromium/src/+/master/components/vector_icons/README.md",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e96e1fe_731572a0",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1160861
      },
      "writtenOn": "2017-12-04T23:32:21Z",
      "side": 1,
      "message": "Yes, I did - I started off making all of these icons the .x1.icon variants, but was hitting this DCHECK https://cs.chromium.org/chromium/src/ui/gfx/paint_vector_icon.cc?rcl\u003d7be49f33afa3174281ad1617d5d1ba5dfa423175\u0026l\u003d544 when testing with --force-device-scale-factor\u003d2 on CrOS when opening the other UI surface the same icons were being used in.\n\nThat led me to the bug cited in this TODO (https://crbug.com/647286) which seems to suggest that the idea is to have separate .icon files for differently sized vector icons?\n\nPlease let me know if I\u0027ve misunderstood something - basically what I want is to have the same icon be used at 18x18dip in one UI surface and 16x16 in another, regardless of the device scale factor. Thanks for the help!",
      "parentUuid": "df631088_d7a4c32a",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7492d9d_cab02924",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-05T00:41:10Z",
      "side": 1,
      "message": "is the actual visible icon different, or just the amount of padding?",
      "parentUuid": "9e96e1fe_731572a0",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20bd3f46_e785dc10",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1160861
      },
      "writtenOn": "2017-12-05T07:24:06Z",
      "side": 1,
      "message": "No - the visible icons should be the same (the exception is the content paste icon). So padding is the main issue, with a few icons which also a bit fuzzy. I took a screenshot so you can see as well: https://drive.google.com/file/d/1RbbuzxIjBrIM-8VfYE-j7qh_ErT9L9y0/view?usp\u003dsharing (left is using the existing icons, right is after applying this patch).\n\nIn the screenshot, it seems like the location, notification, flash/extension and MIDI icons look fuzzy. The rest look clear but the size is wrong (I assumed due to additional internal padding).",
      "parentUuid": "c7492d9d_cab02924",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0fb590fd_0c1dc327",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-05T17:07:00Z",
      "side": 1,
      "message": "We shouldn\u0027t be adding multiple copies of the same icon that only differ in padding (regardless of whether it\u0027s all in one file or not). Probably the easiest way to fix this is to change the 18x18 icons to 16px/32px optimized and adding 1dip of padding on all sides as part of the layout wherever they\u0027re being used.",
      "parentUuid": "20bd3f46_e785dc10",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f53ccde_0f57628e",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1160861
      },
      "writtenOn": "2017-12-07T05:31:20Z",
      "side": 1,
      "message": "OK - I\u0027ve replaced the original icons with the 16x16 versions below, except for the content paste icon which looks different. I wasn\u0027t able to test all the UI surfaces the icons are used on to check stuff still looks OK though (e.g. the VR changes).\n\nAs for the padding, I can do that in a follow-up patchset (I assume you mean to reduce the 18x18 icons to 17x17, then add 1 dip of padding?) for the other PermissionPromptImpls icons (which is the other UI surface that uses these icons at 18x18).",
      "parentUuid": "0fb590fd_0c1dc327",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69e8dbdd_755b682b",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-07T17:11:47Z",
      "side": 1,
      "message": "\u003e OK - I\u0027ve replaced the original icons with the 16x16 versions below, except for the content paste icon which looks different. I wasn\u0027t able to test all the UI surfaces the icons are used on to check stuff still looks OK though (e.g. the VR changes).\n\nDid you confirm with a designer that the content paste icon is supposed to look different in two different surfaces (location bar/OIB I assume)? Seems confusing.\n\nI see now that I was under the false impression that these were just icons being used for content settings in the location bar, but now I can see they\u0027re being used in many surfaces, like in the status tray, wherever extension icons are used, etc. So I don\u0027t think we want to change layout in all those places. But you did say that the only thing wrong with the icons as they currently stand is padding, right? So I\u0027m confused, why aren\u0027t we just rendering the icons at 18dip and then removing some amount of padding from layout?\n\nNote that a while back I filed a specific bug for this at crbug.com/647551\n\n\u003e \n\u003e As for the padding, I can do that in a follow-up patchset (I assume you mean to reduce the 18x18 icons to 17x17, then add 1 dip of padding?) for the other PermissionPromptImpls icons (which is the other UI surface that uses these icons at 18x18).\n\nwouldn\u0027t it be a regression if you didn\u0027t add the padding now? And no, I meant 16x16 with 1dip padding on all sides. 1dip left + 16dip icon + 1dip right \u003d 18dip width.",
      "parentUuid": "6f53ccde_0f57628e",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be2f0afd_272da25f",
        "filename": "chrome/app/vector_icons/BUILD.gn",
        "patchSetId": 14
      },
      "lineNbr": 110,
      "author": {
        "id": 1160861
      },
      "writtenOn": "2017-12-12T07:47:05Z",
      "side": 1,
      "message": "\u003e Did you confirm with a designer that the content paste icon is supposed to look different in two different surfaces (location bar/OIB I assume)? Seems confusing.\n\nYes - maxwalker@ requested it be changed because he thought it looked bad at that size.\n\n\u003e I see now that I was under the false impression that these were just icons being used for content settings in the location bar, but now I can see they\u0027re being used in many surfaces, like in the status tray, wherever extension icons are used, etc. So I don\u0027t think we want to change layout in all those places. But you did say that the only thing wrong with the icons as they currently stand is padding, right? So I\u0027m confused, why aren\u0027t we just rendering the icons at 18dip and then removing some amount of padding from layout?\n\nYes, a few of them are used in lots of places - sorry I didn\u0027t clarify earlier (most of them just have the 16x16 in Page Info and then 18x18 in permission prompt bubbles). RE rendering at 18dip - that sounds like a reasonable workaround. I\u0027ve gone ahead and done that in the next patchset and also sent an updated screenshot to maxwalker@ to approve.\n\n\u003e Note that a while back I filed a specific bug for this at crbug.com/647551\n\nThank you! I added it to the CL description.\n\n\u003e wouldn\u0027t it be a regression if you didn\u0027t add the padding now? And no, I meant 16x16 with 1dip padding on all sides. 1dip left + 16dip icon + 1dip right \u003d 18dip width.\n\nWhoops, you\u0027re right - I think we don\u0027t need to do this now though that we\u0027re changing stuff to be 18x18dip.",
      "parentUuid": "69e8dbdd_755b682b",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 110,
        "endChar": 65
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7dd32ca0_fb2397e9",
        "filename": "chrome/browser/ui/cocoa/page_info/page_info_bubble_controller.mm",
        "patchSetId": 14
      },
      "lineNbr": 449,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-12-01T05:08:01Z",
      "side": 1,
      "message": "so... although I *think* these are safe due to ref counting. There\u0027s a scary comment above Image::ToNSImage which says \"The returned result is a weak pointer owned by and scoped to the life of the Image.\". Which in this case is a temporary.\n\nAlso we don\u0027t really need NSImage.\n\nOther places in mac code that deal with vector icons (e.g. LocationBarViewMac::UpdateLocationIcon()) are calling NSImageFromImageSkiaWithColorSpace directly with base::mac::GetSRGBColorSpace()\n\nwe should do that here too. Maybe with a helper function.",
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0659a968_91f685ad",
        "filename": "chrome/browser/ui/cocoa/page_info/page_info_bubble_controller.mm",
        "patchSetId": 14
      },
      "lineNbr": 449,
      "author": {
        "id": 1160861
      },
      "writtenOn": "2017-12-05T07:24:06Z",
      "side": 1,
      "message": "Ah, thank you! Done",
      "parentUuid": "7dd32ca0_fb2397e9",
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdd8a290_1baa2892",
        "filename": "chrome/browser/ui/page_info/page_info_ui.cc",
        "patchSetId": 14
      },
      "lineNbr": 50,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-12-07T17:11:47Z",
      "side": 1,
      "message": "see comment on bug",
      "range": {
        "startLine": 50,
        "startChar": 31,
        "endLine": 50,
        "endChar": 59
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a7eefc65_69277b77",
        "filename": "chrome/browser/ui/page_info/page_info_ui.cc",
        "patchSetId": 14
      },
      "lineNbr": 50,
      "author": {
        "id": 1160861
      },
      "writtenOn": "2017-12-12T07:47:05Z",
      "side": 1,
      "message": "Done - I also replied on the bug.",
      "parentUuid": "cdd8a290_1baa2892",
      "range": {
        "startLine": 50,
        "startChar": 31,
        "endLine": 50,
        "endChar": 59
      },
      "revId": "dbcba4593611c228031269a31ea740b9d1f71f51",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}