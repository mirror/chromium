{
  "comments": [
    {
      "key": {
        "uuid": "0f754e89_8d7ca257",
        "filename": "build/android/gyp/merge_manifest.py",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1126674
      },
      "writtenOn": "2017-07-05T15:21:22Z",
      "side": 1,
      "message": "In order to not hardcode this version number here, it would be better to pass --output-directory as a flag (which in .gn just means doing \"--output-directory\u003d.\").\n\nThen read the value from build_vars.txt.\n\nAlso, I think I\u0027ve seen that preview SDKs have these jars without versions appended to them, so it might be a good idea to call the variable \"android_tools_version_suffix\" or something along those lines.\n\nWhere to add the GN variable:\nhttps://cs.chromium.org/chromium/src/build/config/android/config.gni?q\u003dconfig.gni\u0026sq\u003dpackage:chromium\u0026l\u003d45\n\nWhere to write it to build_vars.txt:\nhttps://cs.chromium.org/chromium/src/build/android/BUILD.gn?sq\u003dpackage:chromium\u0026q\u003dfile:%5C.gn+write_file+build_vars\u0026l\u003d57\n\nHow to read build_vars.txt:\nhttps://cs.chromium.org/chromium/src/build/android/resource_sizes.py?type\u003dcs\u0026q\u003dfile:%5C.py+build_vars.txt\u0026l\u003d775\n\nIf you wanted to add a ReadBuildVars() to build_utils.py, I\u0027d be fine with that. If you want to just copy/paste, that\u0027s fine with me as well.",
      "range": {
        "startLine": 19,
        "startChar": 25,
        "endLine": 19,
        "endChar": 32
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4d534aa_c08ac653",
        "filename": "build/android/gyp/merge_manifest.py",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1113224
      },
      "writtenOn": "2017-07-07T10:45:33Z",
      "side": 1,
      "message": "Done\n\nI took the liberty of moving the path to \"build_vars\" to build/android/config.gni, and pass the file path instead of the more generic \"--output-directory\" to the Python script. Unfortunately resource_sizes.py has to duplicate the constant (Catch 22: it would have to read the variable from the build_vars.txt).\n\nSo I did it a bit differently than you suggested. But If you think it\u0027s better to keep the changes minimal I\u0027m fine with using a \"--output-directory\".",
      "parentUuid": "0f754e89_8d7ca257",
      "range": {
        "startLine": 19,
        "startChar": 25,
        "endLine": 19,
        "endChar": 32
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b6b307a_97f5d334",
        "filename": "build/android/gyp/merge_manifest.py",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1126674
      },
      "writtenOn": "2017-07-05T15:21:22Z",
      "side": 1,
      "message": "Likewise, it\u0027s better to use build_vars.txt\u0027s android_sdk_root value.",
      "range": {
        "startLine": 20,
        "startChar": 43,
        "endLine": 20,
        "endChar": 59
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed1764da_cf73eeb8",
        "filename": "build/android/gyp/merge_manifest.py",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1113224
      },
      "writtenOn": "2017-07-07T10:45:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7b6b307a_97f5d334",
      "range": {
        "startLine": 20,
        "startChar": 43,
        "endLine": 20,
        "endChar": 59
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65279af1_55b1bd42",
        "filename": "build/android/gyp/merge_manifest.py",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1126674
      },
      "writtenOn": "2017-07-05T15:21:22Z",
      "side": 1,
      "message": "nit: List -\u003e GN list",
      "range": {
        "startLine": 43,
        "startChar": 28,
        "endLine": 43,
        "endChar": 32
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb7cdc26_65405e00",
        "filename": "build/android/gyp/merge_manifest.py",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1113224
      },
      "writtenOn": "2017-07-07T10:45:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "65279af1_55b1bd42",
      "range": {
        "startLine": 43,
        "startChar": 28,
        "endLine": 43,
        "endChar": 32
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b584b34b_0b0cd2d5",
        "filename": "build/android/gyp/write_build_config.py",
        "patchSetId": 1
      },
      "lineNbr": 710,
      "author": {
        "id": 1126674
      },
      "writtenOn": "2017-07-05T15:21:22Z",
      "side": 1,
      "message": "Wrapping here is a bit funny. I\u0027d suggest:\n\nconfig[\u0027extra_android_manifests\u0027] \u003d filter(None, (\n    d.get(\u0027android_manifest\u0027) for d in all_resources_deps))",
      "range": {
        "startLine": 710,
        "startChar": 43,
        "endLine": 710,
        "endChar": 44
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcba869d_ebfa95bc",
        "filename": "build/android/gyp/write_build_config.py",
        "patchSetId": 1
      },
      "lineNbr": 710,
      "author": {
        "id": 1113224
      },
      "writtenOn": "2017-07-07T10:45:33Z",
      "side": 1,
      "message": "Done\n\nI agree, it\u0027s a bit weird. But this is me following suit for how it\u0027s done for \u0027tested_apk_resource_jars\u0027 a few lines below. That\u0027s not a reason not do to it differently though, but isn\u0027t list comprehensions more \"pythonic\" than using \u0027filter\u0027? Also, \u0027filter\u0027 is moved to functools in Python3 so one could argue that using it is bad form.\n\nBut I\u0027m not here to argue, so I\u0027ll apply your suggestion ðŸ˜Š",
      "parentUuid": "b584b34b_0b0cd2d5",
      "range": {
        "startLine": 710,
        "startChar": 43,
        "endLine": 710,
        "endChar": 44
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4daea33a_bb5c128d",
        "filename": "build/config/android/rules.gni",
        "patchSetId": 1
      },
      "lineNbr": 1856,
      "author": {
        "id": 1126674
      },
      "writtenOn": "2017-07-05T15:21:22Z",
      "side": 1,
      "message": "nit: prefix with _ (do so far all variables that are not parameters to a template)",
      "range": {
        "startLine": 1856,
        "startChar": 4,
        "endLine": 1856,
        "endChar": 27
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54a34fc4_80e55430",
        "filename": "build/config/android/rules.gni",
        "patchSetId": 1
      },
      "lineNbr": 1856,
      "author": {
        "id": 1113224
      },
      "writtenOn": "2017-07-07T10:45:33Z",
      "side": 1,
      "message": "Should I rename the other _target variables too, like \u0027final_dex_target_name\u0027, \u0027build_config_target\u0027 and so on? It\u0027s a little weird if only this target has a \u0027_\u0027 prefix..",
      "parentUuid": "4daea33a_bb5c128d",
      "range": {
        "startLine": 1856,
        "startChar": 4,
        "endLine": 1856,
        "endChar": 27
      },
      "revId": "906122c1a4c166aaaf981236fda030b48afda141",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}