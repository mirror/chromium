{
  "comments": [
    {
      "key": {
        "uuid": "fd79e129_8445fcd4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/bookmarks/BookmarkBridge.java",
        "patchSetId": 2
      },
      "lineNbr": 308,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-20T15:57:08Z",
      "side": 1,
      "message": "We start loading the model as soon as the bridge is created: https://cs.chromium.org/chromium/src/chrome/browser/bookmarks/bookmark_model_factory.cc?sq\u003dpackage:chromium\u0026dr\u003dCSs\u0026l\u003d83\n\nShould this be in the constructor so that we kick off reading partner bookmarks at the same time? It seems odd to me that the constructor would kick off some loading while a call to #runAfterBookmarkModelLoaded() would kick off the rest.",
      "range": {
        "startLine": 308,
        "startChar": 8,
        "endLine": 308,
        "endChar": 82
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e00685a_c049e9c1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/bookmarks/BookmarkBridge.java",
        "patchSetId": 2
      },
      "lineNbr": 308,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-10-20T16:15:30Z",
      "side": 1,
      "message": "User bookmarks and partner bookmarks are loaded at different time. Partner bookmarks are costly to initialize (crbug/742386), so it was converted to lazy loading. User bookmarks should be loaded early in the initialization process, so that we know whether to show the colored star in the UI.",
      "parentUuid": "fd79e129_8445fcd4",
      "range": {
        "startLine": 308,
        "startChar": 8,
        "endLine": 308,
        "endChar": 82
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e2888b5_1ea5b940",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/bookmarks/BookmarkBridge.java",
        "patchSetId": 2
      },
      "lineNbr": 308,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-20T16:27:54Z",
      "side": 1,
      "message": "I still think it\u0027s odd that #runAfterBookmarkModelLoaded would have this side effect. If the call to #kickOffReading() needs to stay here then please rename the method to something like finishLoadingBookmarkModel(final Runnable runAfterModelLoaded).\n\nWhich calls to \"new BookmarkModel()\" are you concerned about? Looking through the code base, we have these current call sites:\n - BookmarkMananger\n - BookmarkAddActivity\n - BookmarkEditActivity\n - BookmarkFolderSelectActivity\n - BookmarkWidgetService\n - ChromeActivity\n - SyncUserDataWiper\n\n\nAlmost all of those currently include a call to #kickOffReading(), with the exception of BookmarkEditActivity, which I believe are created from ChromeActivity#addOrEditBookmark, and BookmarkFolderSelectActivity, which is created from the BookmarkActivity or BookmarkEditActivity.",
      "parentUuid": "2e00685a_c049e9c1",
      "range": {
        "startLine": 308,
        "startChar": 8,
        "endLine": 308,
        "endChar": 82
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06b56497_1b6b4900",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/bookmarks/BookmarkBridge.java",
        "patchSetId": 2
      },
      "lineNbr": 308,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-10-20T21:34:19Z",
      "side": 1,
      "message": "Calling #kickOffReading() in BookmarkModel constructor should work. With some tweaks in the tests, it is still possible to test that partner bookmark is lazily loaded.\n\nBookmarkBridge has other users, which should not call #kickOffReading(). However, both #runAfterBookmarkModelLoaded() and #isBookmarkModelLoaded() is in BookmarkBridge, so it feels a bit strange that BookmarkBridge doesn\u0027t do kickOffReading, but BookmarkModel does.\n\nI\u0027m leaning toward keeping kickOffReading in the renamed finishLoadingBookmarkModel. WDYT?",
      "parentUuid": "5e2888b5_1ea5b940",
      "range": {
        "startLine": 308,
        "startChar": 8,
        "endLine": 308,
        "endChar": 82
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42d40fc5_b9f606e4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/bookmarks/BookmarkBridge.java",
        "patchSetId": 2
      },
      "lineNbr": 308,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-10-20T21:41:24Z",
      "side": 1,
      "message": "That sounds good to me. Thank you for investigating!",
      "parentUuid": "06b56497_1b6b4900",
      "range": {
        "startLine": 308,
        "startChar": 8,
        "endLine": 308,
        "endChar": 82
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba84da38_471c879b",
        "filename": "chrome/test/android/javatests/src/org/chromium/chrome/test/util/BookmarkTestUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1209769
      },
      "writtenOn": "2017-10-20T15:13:57Z",
      "side": 1,
      "message": "Nit: use lambda?",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 34,
        "endChar": 42
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be9c8a59_0d718033",
        "filename": "chrome/test/android/javatests/src/org/chromium/chrome/test/util/BookmarkTestUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-10-20T16:08:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba84da38_471c879b",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 34,
        "endChar": 42
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43519e2a_ff6ded84",
        "filename": "chrome/test/android/javatests/src/org/chromium/chrome/test/util/BookmarkTestUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1144344
      },
      "writtenOn": "2017-10-20T17:00:26Z",
      "side": 1,
      "message": "OK, to my astonishment, Criteria cannot be converted to lambda because it is not an interface. We should probably make Criteria compatible with lambda, since we have so many oneliners. I\u0027ve reverted this part back to Criteria.",
      "parentUuid": "be9c8a59_0d718033",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 34,
        "endChar": 42
      },
      "revId": "79dcd340bfeb27d8f69b82987f975e86739674ed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}