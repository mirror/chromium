{
  "comments": [
    {
      "key": {
        "uuid": "6818b547_b35b2675",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-04T16:57:55Z",
      "side": 1,
      "message": "Why is not setting collapsed_border_values_valid_ to false sufficient?\nThis is what InvalidateCollapsedBorderValues does. Alternatively, why\nis there a collapsed_border_values_valid_ field at all? Can that just be setting\ncollapsed_border_values_ to nullptr?\n\nApologies if this is a repeat of comments in earlier patches, it\u0027s hard to remember\nall these details over time.",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f213a2c8_23f6217b",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-10-04T17:25:17Z",
      "side": 1,
      "message": "We have separate collapsed_border_values_valid_ and collapsed_border_values_ because there are cases that we invalidate the collapsed borders by setting collapsed_border_values_valid_ to false but the recomputed collapsed borders are the same as before. In these cases we won\u0027t invalidate anything.\n\nUpdateCollapsedBorderValues() doesn\u0027t track lengths of collapsed borders -\n layout change should trigger repaint of them, but we missed invalidation of the rows into which the spanning cell overhangs. Previously for rowspan/colspan changes, the recomputed collapsed borders will be the same as before and |changed| in UpdateCollapsedBorderValues() would be false, so we now set collapsed_border_values_ to nullptr here to ensure |changed|.",
      "parentUuid": "6818b547_b35b2675",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42cfb21f_02817b85",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-04T17:50:38Z",
      "side": 1,
      "message": "I see. Would using collapsed_border_values_valid_ \u003d\u003d true as a reason to set |changed| to true\ncause over-invalidation in that method?",
      "parentUuid": "f213a2c8_23f6217b",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "187570bb_b2edcb3d",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-10-04T18:15:44Z",
      "side": 1,
      "message": "Do you mean \"collapsed_border_values_valid_ \u003d\u003d false\" and we invalidate rows in UpdateCollapsedBorderValues()? Yes, that would cause over-invalidation. For now we invalidate collapsed borders of all cells aggressively, even only one cell changed collapsed borders, and per-cell invalidation has not been fully implemented yet, so change detection is needed to prevent over-invalidations.",
      "parentUuid": "42cfb21f_02817b85",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1559037c_56ecab87",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-04T18:48:36Z",
      "side": 1,
      "message": "I see. It does seem hard to understand in its current state though.\ncollapsed_border_values_valid_ is defined in the .h file as\n\"set when collapsed_border_values_ needs recalculation\", which is\ntrue but doesn\u0027t handle the subtlety of when invalidation happens.\nWould it be clearer to introduce a collapsed_border_values_needs_invalidation_?\nThis would be similar to repaint-after-layout, which sometimes inherits\nforced invalidations, and sometimes tries to compute invalidations based\non a geometry algorithm.",
      "parentUuid": "187570bb_b2edcb3d",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae7ffff0_d19d1997",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-10-04T20:13:24Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "1559037c_56ecab87",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "688bca54_31065993",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1108,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-10-04T16:46:47Z",
      "side": 1,
      "message": "What about colspan?",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee6afcb8_393c5468",
        "filename": "third_party/WebKit/Source/core/layout/LayoutTableCell.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1108,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-10-04T16:49:14Z",
      "side": 1,
      "message": "Now we paint collapsed borders by rows, so colspan doesn\u0027t matter.",
      "parentUuid": "688bca54_31065993",
      "revId": "8e903035e09abc344404ae592da836acea12dbc3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}