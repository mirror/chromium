{
  "comments": [
    {
      "key": {
        "uuid": "844751f6_b002b945",
        "filename": "ash/wm/overview/scoped_overview_animation_settings.cc",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-18T15:21:30Z",
      "side": 1,
      "message": "Are render surfaces always required for these animations? It\u0027s not obvious as there\u0027s no opacity transition. We need to be careful to not force render surface use when not needed. It should be easy to check using \"Show UI composited layer borders\" set to RenderPass, \"Partial swap\" set to disabled and \"Slow UI animations\" turned on in about:flags.\n\nI suspect that the render surface requirement is conditional on how the window caption is removed from the window. If we enable cache here then we need to make sure it\u0027s only used on layers that already require a render surface.\n\nFyi, I\u0027d like to see us enable trilinear filtering for overview mode in the near future to make down scaling look better and then it will likely make sense to use render surface caching for all layers.\n\nAlso, does this only enable it during the transition or keep it turned on until we exit overview mode?",
      "revId": "ac737fab1f288ee9ddaba0da7d18d1dd92d96bb8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "405c79cf_50a6b703",
        "filename": "ash/wm/overview/scoped_overview_animation_settings.cc",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1002647
      },
      "writtenOn": "2017-08-18T16:03:46Z",
      "side": 1,
      "message": "There is an opacity animation for the screen shield. Do we need to use render surface caching there ([1]) as well as during overview mode shutdown ([2])?\n\n[1] - https://cs.chromium.org/chromium/src/ash/wm/overview/window_grid.cc?sq\u003dpackage:chromium\u0026dr\u003dCSs\u0026l\u003d674\n\n[2] https://cs.chromium.org/chromium/src/ash/wm/overview/window_grid.cc?sq\u003dpackage:chromium\u0026dr\u003dCSs\u0026l\u003d294",
      "parentUuid": "844751f6_b002b945",
      "revId": "ac737fab1f288ee9ddaba0da7d18d1dd92d96bb8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e90783fe_c8e34f17",
        "filename": "ash/wm/overview/scoped_overview_animation_settings.cc",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-18T16:11:07Z",
      "side": 1,
      "message": "No, as the widget being animated there is a simple solid color. That doesn\u0027t require a render surface. Render surfaces are only required when animating the opacity of windows that contain a hierarchy of layers. E.g. a browser or app window where frame, client contents and potentially different client areas use separate layers.",
      "parentUuid": "405c79cf_50a6b703",
      "revId": "ac737fab1f288ee9ddaba0da7d18d1dd92d96bb8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b55cf195_8fb59751",
        "filename": "ash/wm/overview/scoped_overview_animation_settings.cc",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1002647
      },
      "writtenOn": "2017-08-18T16:36:45Z",
      "side": 1,
      "message": "I see, thanks for explaining. Yes, I don\u0027t think we change the browse windows opacity and the captions should not have a hierarchy of layers - it should only use a layer for the view that contains the caption and the close button.",
      "parentUuid": "e90783fe_c8e34f17",
      "revId": "ac737fab1f288ee9ddaba0da7d18d1dd92d96bb8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eeff0471_a848023d",
        "filename": "ash/wm/overview/scoped_overview_animation_settings.cc",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1228419
      },
      "writtenOn": "2017-08-18T17:23:22Z",
      "side": 1,
      "message": "Do we want to cache render surface for transform animation?. Looks like we need not to update frames in those as well. But as you pointed, transform animation does not require render surface.\n\nBut when turning on ui-show-composited-layer-borders, I do see render surface of the browser window when Exit the overview mode (not enter). I can investigate why.\n\nThis is only enable during transition.",
      "parentUuid": "b55cf195_8fb59751",
      "revId": "ac737fab1f288ee9ddaba0da7d18d1dd92d96bb8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e71a87c5_4c6d1bf2",
        "filename": "ash/wm/overview/scoped_overview_animation_settings.cc",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2017-08-18T19:46:44Z",
      "side": 1,
      "message": "When we can enable mipmaps we want this to be enabled for all layers from start of transition into overview mode to end of transition out of overview mode. Let\u0027s wait with this until we can also enable mipmaps.",
      "parentUuid": "eeff0471_a848023d",
      "revId": "ac737fab1f288ee9ddaba0da7d18d1dd92d96bb8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7905abba_2c22e397",
        "filename": "ash/wm/overview/scoped_overview_animation_settings.cc",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1228419
      },
      "writtenOn": "2017-08-18T19:54:54Z",
      "side": 1,
      "message": "sg.\nBut I am really interested in how much we can improve by just caching the render surface.\nMemory seems the same as when we turn on the mipmaps in the future?",
      "parentUuid": "e71a87c5_4c6d1bf2",
      "revId": "ac737fab1f288ee9ddaba0da7d18d1dd92d96bb8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}