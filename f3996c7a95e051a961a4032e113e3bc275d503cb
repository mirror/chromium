{
  "comments": [
    {
      "key": {
        "uuid": "5be4a12d_bd72ad5d",
        "filename": "ash/session/session_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 169,
      "author": {
        "id": 1000369
      },
      "writtenOn": "2017-08-10T18:29:09Z",
      "side": 1,
      "message": "What about USER_TYPE_PUBLIC_ACCOUNT, USER_TYPE_SUPERVISED, USER_TYPE_GUEST and USER_TYPE_ACTIVE_DIRECTORY?\n\nYou\u0027re going to be using the setting to control the actual turning on/off of the power adapter; hence you *need* to set the setting for all these account types. Some of them may not save any settings (for example, the guest user) and some may not even have a GAIA account (for example AD users) but they should still be able to turn their Bluetooth on and off.\n\nThe preference is not sync\u0027able anyway, so whether it is a local only account or authenticated GAIA account shouldn\u0027t matter.",
      "range": {
        "startLine": 169,
        "startChar": 43,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "724ed5c8_903989bd",
        "filename": "ash/session/session_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 169,
      "author": {
        "id": 1181214
      },
      "writtenOn": "2017-08-10T18:59:11Z",
      "side": 1,
      "message": "This only affects whether we should apply the bluetooth setting at user session startup. Any type of user can still toggle their bluetooth pref and bluetooth power controller will still honor the pref change and apply it.",
      "parentUuid": "5be4a12d_bd72ad5d",
      "range": {
        "startLine": 169,
        "startChar": 43,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "131ff34d_b241e4f2",
        "filename": "ash/session/session_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 169,
      "author": {
        "id": 1181214
      },
      "writtenOn": "2017-08-10T19:00:04Z",
      "side": 1,
      "message": "Maybe I should name this function UserShouldApplyBluetoothSettingAtSessionStartup or something like that?",
      "parentUuid": "724ed5c8_903989bd",
      "range": {
        "startLine": 169,
        "startChar": 43,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46b42a74_c55d5102",
        "filename": "ash/session/session_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 169,
      "author": {
        "id": 1181214
      },
      "writtenOn": "2017-08-10T21:30:06Z",
      "side": 1,
      "message": "I have renamed this function to UserShouldApplyBluetoothSetting, maybe this will make it more readable.",
      "parentUuid": "131ff34d_b241e4f2",
      "range": {
        "startLine": 169,
        "startChar": 43,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba4cc128_6a4413c8",
        "filename": "ash/session/session_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 169,
      "author": {
        "id": 1000369
      },
      "writtenOn": "2017-08-10T23:29:06Z",
      "side": 1,
      "message": "That still leaves active directory and supervised users - which are local users but still have local preferences. Note, we don\u0027t use supervised users at the moment but in the future may, so it is good to have the behavior still be correctly implemented for them.",
      "parentUuid": "46b42a74_c55d5102",
      "range": {
        "startLine": 169,
        "startChar": 43,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c74f29e_1d49f90a",
        "filename": "ash/session/session_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 169,
      "author": {
        "id": 1181214
      },
      "writtenOn": "2017-08-10T23:59:34Z",
      "side": 1,
      "message": "I see, added more user types to this function then.",
      "parentUuid": "ba4cc128_6a4413c8",
      "range": {
        "startLine": 169,
        "startChar": 43,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a0ef163a_8f5f3323",
        "filename": "ash/system/bluetooth/bluetooth_power_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1000369
      },
      "writtenOn": "2017-08-10T18:29:09Z",
      "side": 1,
      "message": "//ash should not have a dependency on //device/bluetooth. Ash should be able to just set the preference and fire and forget. The BluetoothPowerController should live somewhere that has access to both preferences and //device/bluetooth. Since it doesn\u0027t have any //chrome dependencies, it can just live directly in //device/bluetooth.\n\n//ash and //chrome should independently be able to set the Bluetooth preference and the BluetoothPowerController should honor that setting, without having to live in the same code base.\n\nFor now, just moving this class to //device/bluetooth could work (Check with James if having an //ash dependency from //device is okay. If not, for now leave this in //ash). In either case, put a TODO somewhere for yourself and james, to make sure this works with --mash. i.e., when Ash is running as a separate process, it should only change the preference - the actual powering on and off should be done by the Chrome process (or whichever process that contains and runs the //device code).",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 55
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "309ce575_9ccb4c08",
        "filename": "ash/system/bluetooth/bluetooth_power_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1181214
      },
      "writtenOn": "2017-08-10T18:59:11Z",
      "side": 1,
      "message": "jamescook@, what do you think about this?",
      "parentUuid": "a0ef163a_8f5f3323",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 55
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06593d63_cd21e1f0",
        "filename": "ash/system/bluetooth/bluetooth_power_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2017-08-10T20:55:19Z",
      "side": 1,
      "message": "//device should not depend on //ash. //device is a very low-level library and //ash is very high level UI code. Also, //ash already has //device dependencies, so that would introduce a cycle. I would just leave this here.\n\nBluetooth already works under mash. I can verify that things still work on device with mash after this CL lands -- I don\u0027t anticipate any problems. Just ping me if you\u0027d like me to do that.\n\nRahul, I\u0027m not sure how ash, prefs and //device should work together. I had imagined a mojo device service would get built (I think this is being worked on) and ash would communicate with that service. I haven\u0027t heard suggestions that prefs would be used to communicate state -- I\u0027m not sure if //device owners want a prefs dependency. Prefs seem kind of like a UI / sync concept to me. Anyhow, we shouldn\u0027t block this CL on this issue, and we can discuss in person or via email if you want.",
      "parentUuid": "309ce575_9ccb4c08",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 55
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bed18e7c_e7b5eef7",
        "filename": "ash/system/bluetooth/bluetooth_power_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1000369
      },
      "writtenOn": "2017-08-10T23:29:06Z",
      "side": 1,
      "message": "I am fine with leaving it here for 61 too. Let me think a bit more about how we want to handle this in the future - I\u0027ll start a thread about it or talk to you in person.",
      "parentUuid": "06593d63_cd21e1f0",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 55
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "efd445ee_b1f7bae4",
        "filename": "ash/system/bluetooth/bluetooth_power_controller.cc",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1181214
      },
      "writtenOn": "2017-08-10T23:59:34Z",
      "side": 1,
      "message": "Marking as resolved.",
      "parentUuid": "bed18e7c_e7b5eef7",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 55
      },
      "revId": "f3996c7a95e051a961a4032e113e3bc275d503cb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}