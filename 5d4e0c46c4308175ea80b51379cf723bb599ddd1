{
  "comments": [
    {
      "key": {
        "uuid": "cabf53de_60592c8e",
        "filename": "chrome/browser/chrome_browser_main.cc",
        "patchSetId": 23
      },
      "lineNbr": 1369,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "Add a comment as to why this is called here.",
      "range": {
        "startLine": 1369,
        "startChar": 2,
        "endLine": 1369,
        "endChar": 36
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4de6e1be_76b6adb2",
        "filename": "chrome/browser/chrome_browser_main.cc",
        "patchSetId": 23
      },
      "lineNbr": 1369,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "cabf53de_60592c8e",
      "range": {
        "startLine": 1369,
        "startChar": 2,
        "endLine": 1369,
        "endChar": 36
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4a816fb2_cb4365e9",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 20,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "Add description.",
      "range": {
        "startLine": 20,
        "startChar": 26,
        "endLine": 20,
        "endChar": 47
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ecd5c70_b668c13e",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 20,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a816fb2_cb4365e9",
      "range": {
        "startLine": 20,
        "startChar": 26,
        "endLine": 20,
        "endChar": 47
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2f3454d_a323b51c",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 25,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "Please add a description.",
      "range": {
        "startLine": 25,
        "startChar": 26,
        "endLine": 25,
        "endChar": 41
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72d5c470_df572f2f",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 25,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d2f3454d_a323b51c",
      "range": {
        "startLine": 25,
        "startChar": 26,
        "endLine": 25,
        "endChar": 41
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3718f4ab_4b4c4699",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 59,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "Are you guaranteed a new value here? If the value doesn\u0027t change, should you leave last_log_time_for_source_ alone?",
      "range": {
        "startLine": 59,
        "startChar": 4,
        "endLine": 59,
        "endChar": 19
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53da92c3_e4d61d35",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 59,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "It should be unique: This function is called during ~NavigationHandle(), and GetNavigationId() should return a unique ID. Added DCHECK.",
      "parentUuid": "3718f4ab_4b4c4699",
      "range": {
        "startLine": 59,
        "startChar": 4,
        "endLine": 59,
        "endChar": 19
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "234ce4e4_d20bf729",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 66,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "Did you verify that you don\u0027t attempt to log tabs when closing a window/shutting-down? My concern is that if you close a window with multiple tabs the visible tab may change, and it isn\u0027t clear to me that you really want to log in this case.",
      "range": {
        "startLine": 66,
        "startChar": 39,
        "endLine": 66,
        "endChar": 50
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "526d4364_895aec09",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 66,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "We need to at least check IsBeingDestroyed() here -- I\u0027ve added that, and a test class that tries to trigger this when the WebContents is being destroyed in order to verify the logger isn\u0027t called.\n\nThere *could* be cases where the tab becomes hidden for some reason immediately before it is actually destroyed, but TabStripModelImpl tries to avoid this, e.g.  https://cs.chromium.org/chromium/src/chrome/browser/ui/tabs/tab_strip_model_impl.cc?type\u003dcs\u0026sq\u003dpackage:chromium\u0026l\u003d307-316",
      "parentUuid": "234ce4e4_d20bf729",
      "range": {
        "startLine": 66,
        "startChar": 39,
        "endLine": 66,
        "endChar": 50
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7108961_95ebaa5c",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 116,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "Do you care if the id is still 0?",
      "range": {
        "startLine": 116,
        "startChar": 41,
        "endLine": 116,
        "endChar": 75
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a358385_bd0eca7a",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher.cc",
        "patchSetId": 23
      },
      "lineNbr": 116,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "TabSnapshotLogger::LogBackgroundTab() itself returns early if the SourceID \u003d\u003d 0. I think that\u0027s the right place to enforce this.",
      "parentUuid": "f7108961_95ebaa5c",
      "range": {
        "startLine": 116,
        "startChar": 41,
        "endLine": 116,
        "endChar": 75
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a367e15_142ba19e",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher_unittest.cc",
        "patchSetId": 23
      },
      "lineNbr": 63,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-11-28T02:13:10Z",
      "side": 1,
      "message": "nit: \n  // Owned by TabActivityWatcher.\n\nor similar",
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82c8737b_03de602b",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher_unittest.cc",
        "patchSetId": 23
      },
      "lineNbr": 63,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0a367e15_142ba19e",
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f0a4636_04ecd5bd",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher_unittest.cc",
        "patchSetId": 23
      },
      "lineNbr": 70,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-11-28T02:13:10Z",
      "side": 1,
      "message": "nit: auto* ? (I thought there was a clang plugin for this..). Or just Browser* - auto doesn\u0027t improve readability here.",
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "404b8e2f_7438a80c",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher_unittest.cc",
        "patchSetId": 23
      },
      "lineNbr": 70,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "It\u0027s a std::unique_ptr\u003cBrowser\u003e :-)",
      "parentUuid": "7f0a4636_04ecd5bd",
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16a2b1c9_3dc0aa66",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher_unittest.cc",
        "patchSetId": 23
      },
      "lineNbr": 70,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-11-28T23:15:58Z",
      "side": 1,
      "message": "\u003e It\u0027s a std::unique_ptr\u003cBrowser\u003e :-)\n\nah, neat.",
      "parentUuid": "404b8e2f_7438a80c",
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b02cc62_d2c8df42",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher_unittest.cc",
        "patchSetId": 23
      },
      "lineNbr": 100,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2017-11-28T02:13:10Z",
      "side": 1,
      "message": "why this call? It seems out of place. Is it needed because this is not a browser test, and so some plumbing is required? Perhaps comment here (maybe http://crbug.com/590981 has context). E.g.\n\n// \u003csomething\u003e usually calls WebContents::WasHidden() when switching tabs, but that\u0027s\n// not present in a unit test, so invoke directly.\n\nAnd perhaps make it more clear whether it\u0027s this line or the line above that triggers the EXPECT_CALL (e.g. by reordering, or adding EXPECT_CALL(... .Times(0));",
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3823ca81_b3f653ba",
        "filename": "chrome/browser/ui/tabs/tab_activity_watcher_unittest.cc",
        "patchSetId": 23
      },
      "lineNbr": 100,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "\u003e why this call? It seems out of place. Is it needed because this is not a browser test, and so some plumbing is required?\n\nYes. Activating the tab doesn\u0027t trigger TabActivityWatcher, because we observe the WebContents being hidden instead of observing the TabStripModel\u0027s deactivation event. The ActivateTabAt() call is basically to keep things seemingly consistent.\n\n\u003e Perhaps comment here (maybe http://crbug.com/590981 has context). E.g.\n\u003e \n\u003e // \u003csomething\u003e usually calls WebContents::WasHidden() when switching tabs, but that\u0027s\n\u003e // not present in a unit test, so invoke directly.\n\u003e \n\u003e And perhaps make it more clear whether it\u0027s this line or the line above that triggers the EXPECT_CALL (e.g. by reordering, or adding EXPECT_CALL(... .Times(0));\n\n\nI think the new comment explains it more clearly.\n\nAlso, I do want to test what happens when the tab is hidden but not deactivated -- added HideWindow test below.",
      "parentUuid": "1b02cc62_d2c8df42",
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "719fa3ae_80011e0b",
        "filename": "chrome/browser/ui/tabs/tab_event.proto",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "Could you elaborate on why this proto has \u0027event\u0027 in the name?",
      "range": {
        "startLine": 12,
        "startChar": 8,
        "endLine": 12,
        "endChar": 17
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7933e083_f9df08a2",
        "filename": "chrome/browser/ui/tabs/tab_event.proto",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "Done - to correspond to the UKM event. And I\u0027ve renamed to TabSnapshotEvent, to be slightly little less generic.",
      "parentUuid": "719fa3ae_80011e0b",
      "range": {
        "startLine": 12,
        "startChar": 8,
        "endLine": 12,
        "endChar": 17
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e84e3c5_58fad2b9",
        "filename": "chrome/browser/ui/tabs/tab_snapshot_logger.h",
        "patchSetId": 23
      },
      "lineNbr": 28,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-11-28T16:47:07Z",
      "side": 1,
      "message": "How about making this pure virtual with the implementation else where? Easy to understand mocking that way.",
      "range": {
        "startLine": 28,
        "startChar": 15,
        "endLine": 28,
        "endChar": 31
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d4879d4_9aecc08a",
        "filename": "chrome/browser/ui/tabs/tab_snapshot_logger.h",
        "patchSetId": 23
      },
      "lineNbr": 28,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-11-28T20:55:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8e84e3c5_58fad2b9",
      "range": {
        "startLine": 28,
        "startChar": 15,
        "endLine": 28,
        "endChar": 31
      },
      "revId": "5d4e0c46c4308175ea80b51379cf723bb599ddd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}