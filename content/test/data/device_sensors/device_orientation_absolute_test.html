<html>
  <head>
    <title>DeviceOrientationAbsolute test</title>
    <script type="text/javascript">
      let eventTimeoutId; // To be set in start().
      const kEventTimeoutMs = 200;

      function checkOrientationAbsoluteEvent(event) {
        // Return true if the orientation is close enough to (4, 5, 6).
        return Math.abs(event.alpha - 4) < 0.01 &&
               Math.abs(event.beta  - 5) < 0.01 &&
               Math.abs(event.gamma - 6) < 0.01 &&
               event.absolute == true;
      }

      function onOrientationAbsolute(event) {
        if (checkOrientationAbsoluteEvent(event)) {
          window.removeEventListener('deviceorientationabsolute', onOrientationAbsolute);
          window.clearTimeout(eventTimeoutId);
          pass();
        } else {
          fail();
        }
      }

      function pass() {
        document.getElementById('status').innerHTML = 'PASS';
        document.location = '#pass';
      }

      function fail() {
        document.location = '#fail';
      }

      function start() {
        window.addEventListener('deviceorientationabsolute', onOrientationAbsolute);
        eventTimeoutId = window.setTimeout(fail, kEventTimeoutMs);
      }
    </script>
  </head>
  <body onLoad="start()">
    <div id="status">FAIL</div>
  </body>
</html>
