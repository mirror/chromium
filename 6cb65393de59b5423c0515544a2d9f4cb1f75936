{
  "comments": [
    {
      "key": {
        "uuid": "f21e89b1_160fe4f1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-09-01T18:06:00Z",
      "side": 1,
      "message": "Daydream Home",
      "range": {
        "startLine": 9,
        "startChar": 29,
        "endLine": 9,
        "endChar": 37
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60e1d196_8c9538cd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-09-01T18:06:00Z",
      "side": 1,
      "message": "Daydream Home",
      "range": {
        "startLine": 15,
        "startChar": 80,
        "endLine": 15,
        "endChar": 81
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc571203_17b768fd",
        "filename": "chrome/android/java/src/com/google/android/apps/chrome/vr/VrMain.java",
        "patchSetId": 3
      },
      "lineNbr": 5,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-09-05T20:51:28Z",
      "side": 1,
      "message": "The only reason the Main alias has this package is historical.  I think we can put this in the existing chromium package structure.",
      "range": {
        "startLine": 5,
        "startChar": 12,
        "endLine": 5,
        "endChar": 18
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88e47aef_bd5ca2c0",
        "filename": "chrome/android/java/src/com/google/android/apps/chrome/vr/VrMain.java",
        "patchSetId": 3
      },
      "lineNbr": 5,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-06T17:33:14Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "cc571203_17b768fd",
      "range": {
        "startLine": 5,
        "startChar": 12,
        "endLine": 5,
        "endChar": 18
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06fca776_f3b01b64",
        "filename": "chrome/android/java/src/com/google/android/apps/chrome/vr/VrMain.java",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1116074
      },
      "writtenOn": "2017-09-05T20:13:53Z",
      "side": 1,
      "message": "Why can\u0027t we name ChromeLauncherVrActivity accordingly so that its name becomes the alias in the future? I believe our current alias for Chrome is the class name for the first Activity that we used.",
      "range": {
        "startLine": 16,
        "startChar": 20,
        "endLine": 16,
        "endChar": 27
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a67fd67d_393182dd",
        "filename": "chrome/android/java/src/com/google/android/apps/chrome/vr/VrMain.java",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-09-05T20:51:28Z",
      "side": 1,
      "message": "Since this isn\u0027t an alias, I don\u0027t think we need to have this extend another class.  We could just call this VrLauncherActivity and have the contents here.  I also think \"Main\" is a bit overloaded and likely is meant to represent ACTION_MAIN for the intent, which this doesn\u0027t handle.  I think the VrLauncherActiivty is a fine name to expose.\n\nI think the question is whether you believe vr_shell will be the package name long term.  That is where we want to keep with something stable and expect it not to move around.  If we restructure the chrome packages, then this would break (as we can\u0027t rename anything in the manifest) and thus will have to orphan this somewhere.",
      "range": {
        "startLine": 16,
        "startChar": 13,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89768040_1214250f",
        "filename": "chrome/android/java/src/com/google/android/apps/chrome/vr/VrMain.java",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-05T21:29:30Z",
      "side": 1,
      "message": "I\u0027m not sure if vr_shell is the package name long term, \"..chrome.browser.vr\" seems safer? I was going for consistency with the Main launcher, but I agree that if its only for legacy reasons, we shouldn\u0027t do it.\n\nWith that in mind, IIUC, all you\u0027d suggest we do here is rename ChromeLauncherVrActivity to VrLauncherActivity, move it to org/chromium/chrome/browser/vr and export that?",
      "parentUuid": "a67fd67d_393182dd",
      "range": {
        "startLine": 16,
        "startChar": 13,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "275b89e3_07356778",
        "filename": "chrome/android/java/src/com/google/android/apps/chrome/vr/VrMain.java",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-06T17:33:14Z",
      "side": 1,
      "message": "Removed the intermediate launcher in the most recent PS and added the exported activity to chrome.browser.vr.",
      "parentUuid": "89768040_1214250f",
      "range": {
        "startLine": 16,
        "startChar": 13,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc7216c3_fdf04f3a",
        "filename": "chrome/android/java/src/com/google/android/apps/chrome/vr/VrMain.java",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-06T17:33:14Z",
      "side": 1,
      "message": "Removed the intermediate launcher in the most recent PS",
      "parentUuid": "06fca776_f3b01b64",
      "range": {
        "startLine": 16,
        "startChar": 20,
        "endLine": 16,
        "endChar": 27
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d23cea1_4bbf1135",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/ChromeLauncherVrActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-09-05T20:51:28Z",
      "side": 1,
      "message": "The things from ChromeLauncher that should be shared in my opinion are:\n\nsetIntent(IntentUtils.sanitizeIntent(getIntent()));\nIntentHandler.addTimestampToIntent(getIntent());\nrecordIntentMetrics();\n\nThose at least look generic enough, but I\u0027ll need to defer to mariakhomenko@ about the metrics stuff to see if it should be recorded for VR.\n\nIf all of those are valid, I think we should add a static to ChromeLauncherActivity that does something like \"validateIntentForLaunch\" that runs through the necessary bits for stuff skipping the launcher.",
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cbe96e7a_1dd42b22",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/ChromeLauncherVrActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-06T17:33:14Z",
      "side": 1,
      "message": "Its not clear to me if this is still relevant.\n\nHaving a sanitized intent with a timestamp still seems reasonable, but we\u0027ve already started a CCT VR before that? If we should still have this, where should it go? We can\u0027t override onCreate for CCT VR.\n\nI think we should probably not worry about this?",
      "parentUuid": "5d23cea1_4bbf1135",
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05735fe3_93fec184",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/ChromeLauncherVrActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-09-05T20:51:28Z",
      "side": 1,
      "message": "I would do:\n\nif (!VrIntentUtils....) {\n    finish();\n}\n\nThen the rest isn\u0027t as indented.  You might also want to consider finishAndRemoveTask in the failure case.",
      "range": {
        "startLine": 22,
        "startChar": 12,
        "endLine": 22,
        "endChar": 25
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5dec6e5_464df674",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/ChromeLauncherVrActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-06T17:33:14Z",
      "side": 1,
      "message": "N/A in latest PS.",
      "parentUuid": "05735fe3_93fec184",
      "range": {
        "startLine": 22,
        "startChar": 12,
        "endLine": 22,
        "endChar": 25
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "230c69e1_495295a0",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/ChromeLauncherVrActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1116043
      },
      "writtenOn": "2017-09-05T20:51:28Z",
      "side": 1,
      "message": "what does this do that the CustomTabVrActivity doesn\u0027t?  I still don\u0027t get from the description why that isn\u0027t being exposed.  Does this add necessary intent bits?  Does the first run handling do it?  CCTs already eject in the case where first run hasn\u0027t been completed, so I\u0027m wondering if it is just the extra intent flags that need to be added that are causing this indirection?\n\nThere are discussions that these bouncers might incur some amount of performance penalty, so I\u0027d like a slightly better handle on why we need it.",
      "range": {
        "startLine": 37,
        "startChar": 19,
        "endLine": 37,
        "endChar": 31
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bd470c2_4f674be9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/ChromeLauncherVrActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-05T21:29:30Z",
      "side": 1,
      "message": "Yes, its mainly the intent bits and FRE.\n- createCustomTabActivityIntent adds the necessary extra intent flags for how to start the CCT.\n- The FRE for VR is a bit complicated. We don\u0027t want to just crash or exit if the FRE isn\u0027t complete. We have an intermediate FRE activity that prompts the user to exit VR mode. The flow is as follows: 1) We see that FRE isn\u0027t complete (in ChromeLaucherActivity for now), 2) We launcher FRE VR that prompts the user to take the phone off of the headset 3) When the user does so, we finish VR FRE and start regular FRE, 4) When the regular FRE is done, we remove the VR extras from the intent and have it open in a regular Chrome Tab via ChromeLauncherActivity. \n\nAnother reason for an intermediate launcher is that its more future proof. Please see my comment from Patch Set 3, Sept 1.\n\nRE performance penalty, do you know how bad it is?",
      "parentUuid": "230c69e1_495295a0",
      "range": {
        "startLine": 37,
        "startChar": 19,
        "endLine": 37,
        "endChar": 31
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52f1d617_4a68e609",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/ChromeLauncherVrActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-06T17:33:14Z",
      "side": 1,
      "message": "Removed the intermediate launcher in the latest PS.",
      "parentUuid": "0bd470c2_4f674be9",
      "range": {
        "startLine": 37,
        "startChar": 19,
        "endLine": 37,
        "endChar": 31
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "969df389_b246c603",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 3
      },
      "lineNbr": 795,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-09-01T18:06:00Z",
      "side": 1,
      "message": "why using assert?",
      "range": {
        "startLine": 795,
        "startChar": 12,
        "endLine": 795,
        "endChar": 18
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2711cdb4_0693f550",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 3
      },
      "lineNbr": 795,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-01T18:52:33Z",
      "side": 1,
      "message": "We should never get an intent to launch an unsupported activity from Daydream. The idea is that if an intent through the launcher, we should always auto-present, otherwise we\u0027re in a state where we start CCT VR for auto-presentation but don\u0027t actually enter VR mode.",
      "parentUuid": "969df389_b246c603",
      "range": {
        "startLine": 795,
        "startChar": 12,
        "endLine": 795,
        "endChar": 18
      },
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7428e6b1_e4413b25",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 3
      },
      "lineNbr": 810,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-09-01T18:06:00Z",
      "side": 1,
      "message": "why checking if activity is valid auto present activity no longer needed?",
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed757761_4ec102f9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 3
      },
      "lineNbr": 810,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-01T18:52:33Z",
      "side": 1,
      "message": "For the same reason as above.",
      "parentUuid": "7428e6b1_e4413b25",
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b314cb24_f1ec4ade",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 3
      },
      "lineNbr": 810,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-09-01T20:01:55Z",
      "side": 1,
      "message": "I should probably rephrase my question. I guess I don\u0027t quite understand why we don\u0027t need to check activitySupportsAutopresentation(activity) here like we used to do. Is it because of the new code path make this checking not necessary? Since VrShellDelegate is quite complex and delicate, it would be good to keep it the old way unless we absolutely know what we are changing. So just want to confirm with you that this is intended.",
      "parentUuid": "ed757761_4ec102f9",
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc91b9b3_cf553e0f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/vr_shell/VrShellDelegate.java",
        "patchSetId": 3
      },
      "lineNbr": 810,
      "author": {
        "id": 1144349
      },
      "writtenOn": "2017-09-05T17:03:44Z",
      "side": 1,
      "message": "\"Is it because of the new code path make this checking not necessary\": Kind of. That check was redundant because we only go through this code path for trusted daydream intents, and we control which activity to open when we get a trusted Daydream intent.",
      "parentUuid": "b314cb24_f1ec4ade",
      "revId": "6cb65393de59b5423c0515544a2d9f4cb1f75936",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}