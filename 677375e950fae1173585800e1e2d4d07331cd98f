{
  "comments": [
    {
      "key": {
        "uuid": "a0c94f9a_1a7e03c4",
        "filename": "chrome/browser/ui/toolbar/chrome_toolbar_model_delegate.cc",
        "patchSetId": 1
      },
      "lineNbr": 80,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-13T02:31:24Z",
      "side": 1,
      "message": "I don\u0027t think this is what you want to check.  Based on the bug description, you\u0027re trying to copy desktop\u0027s behavior of having an empty omnibox on the NTP.  The NTP should have an active WebContents, which should be caught by the code above.  Is that somehow not what happens in your case?  I\u0027d like to understand this better if so, because various places in the omnibox code assume a valid WebContents even when on the NTP, so just patching here doesn\u0027t seem like the right thing -- rather, I\u0027d think we\u0027d want to ensure we do have a WebContents, and its URL is the NewTabHost as the code above checks.",
      "revId": "677375e950fae1173585800e1e2d4d07331cd98f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64c62a54_7f797ca4",
        "filename": "chrome/browser/ui/toolbar/chrome_toolbar_model_delegate.cc",
        "patchSetId": 1
      },
      "lineNbr": 80,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-07-13T15:51:03Z",
      "side": 1,
      "message": "Thank you for looking at the CL! I agree that this is a hacky solution. However, on Clank you can have tabs with a native page, which are not a web content (such as chrome://newtab).  In 2D mode clank does not call ChromeToolbarModelDelegate::ShouldDisplayURL for the native page. However, in VR we try to avoid special casing different types of tabs. My rationale was that if there is no web contents you cannot show a URL.",
      "parentUuid": "a0c94f9a_1a7e03c4",
      "revId": "677375e950fae1173585800e1e2d4d07331cd98f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48f49dcb_e25af41c",
        "filename": "chrome/browser/ui/toolbar/chrome_toolbar_model_delegate.cc",
        "patchSetId": 1
      },
      "lineNbr": 80,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-13T18:04:12Z",
      "side": 1,
      "message": "It\u0027s tough for me to say how you should solve this, as I\u0027m not familiar with the Clank model.  If you can have tabs with non-web content, and they can be associated with URLs like chrome://newtab, that seems like it contradicts the view that if there is no web contents there can be no URL; rather, it seems like if there are no web contents, any associated URL would have to be found elsewhere.\n\nThe idea of there being no web contents seems like a Clank-specific one, and I wonder whether it wouldn\u0027t actually be better to handle this case in Clank-specific code.  The conditional here seems not only unnecessary but confusing for non-Clank cases, so it makes me a little uncomfortable to add it here.  If there\u0027s a Clank override of this delegate, or some similar place, that would be a good spot to put this check and then fall back on the cross platform code afterwards.",
      "parentUuid": "64c62a54_7f797ca4",
      "revId": "677375e950fae1173585800e1e2d4d07331cd98f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38a23036_830940bc",
        "filename": "chrome/browser/ui/toolbar/chrome_toolbar_model_delegate.cc",
        "patchSetId": 1
      },
      "lineNbr": 80,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-07-14T01:08:07Z",
      "side": 1,
      "message": "Good point! I moved the check into the VR code since we also return the null web contents there.",
      "parentUuid": "48f49dcb_e25af41c",
      "revId": "677375e950fae1173585800e1e2d4d07331cd98f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}