{
  "comments": [
    {
      "key": {
        "uuid": "873b1fa3_7292edb2",
        "filename": "chrome/browser/ui/views/hover_button.cc",
        "patchSetId": 15
      },
      "lineNbr": 240,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "does `if (!GetWidget()-\u003eIsActive())` work?\n\n(if not.. it\u0027s probably a bug, or there should be a comment why - we shouldn\u0027t need platform_util)\n\nAlso note sometimes GetWidget() returns null. This method should either\n\n DCHECK(GetWidget());\n if (!GetWidget()-\u003eIsActive())\n   return;\n\nor\n\n if (!GetWidget() || !GetWidget()-\u003eIsActive())\n   return;\n\n(preferably the first, if there\u0027s no codepath where there is no widget)",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d210ef48_05e36220",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "comment?",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59f021ed_4acb13dd",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d210ef48_05e36220",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c80c01b_f9b566cc",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 55,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "private:\n DISALLOW_COPY_AND_ASSIGN(..)\n\nyou\u0027ll need a default constructor",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "667d1229_bf836930",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 55,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2c80c01b_f9b566cc",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a44c4272_82bf46d5",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 97,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "\u003d nullptr",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8293f2ce_9e1267cc",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 97,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a44c4272_82bf46d5",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "acf14b66_57adc7a0",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 191,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "browser_tests can\u0027t rely on activation usually - another test can run in parallel and steal focus away. For Mac, there\u0027s  #import \"ui/base/test/scoped_fake_nswindow_focus.h\" but it\u0027s not typically used in browser_tests (just unit tests).\n\nTypically for focus tests, we use an interactive_ui_test rather than a browser_test. see e.g. browser_focus_uitest.cc views/frame/browser_view_focus_uitest.cc\n\nIf this is working on Windows currently, it may be flaky. Try something like --gtest_repeat\u003d10 --gtest_filter\u003dHoverButtonWidgetTest.* and see if you get any errors.",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f6586c9_29f921ed",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 191,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Isn\u0027t this a unit test? Or is it a browser test because I deal with widgets?",
      "parentUuid": "acf14b66_57adc7a0",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5fffcae_cfb8a94d",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 191,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-29T11:06:34Z",
      "side": 1,
      "message": "\u003e Isn\u0027t this a unit test? Or is it a browser test because I deal with widgets?\n\nah, you are correct. I missed that this is a unit test. However, the same applies in this respect -- only interactive_ui_tests can reliably test for native window focus.\n\nBut that makes it even more confusing - since there should be a ViewsTestHelperMac in scope, which already has a scoped_fake_nswindow_focus.h :/. There may simply be gaps in how well it simulate hover. There\u0027s definitely something to investigate here",
      "parentUuid": "1f6586c9_29f921ed",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "025a6846_d433efa5",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 205,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "note this doesn\u0027t make \"authentic\" bubbles anywhere except ChromeOS. Switching to CreateNativeDesktopWidget() will probably expose Linux to the activation issues you\u0027re seeing on Mac.",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1794496_1f05064c",
        "filename": "chrome/browser/ui/views/hover_button_unittest.cc",
        "patchSetId": 15
      },
      "lineNbr": 205,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Yes you are right, with CreateNativeDesktopWidget the test fails",
      "parentUuid": "025a6846_d433efa5",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d4f5eb6_a516a894",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 21,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "remove empty line",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "608ce385_3b5f6772",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 21,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Thanks. Forgot to remove the includes.",
      "parentUuid": "3d4f5eb6_a516a894",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c513166_4f03ea44",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 29,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "This should come from LayoutProvider::Get() -- DISTANCE_CONTENT_LIST_VERTICAL_MULTI or DISTANCE_RELATED_CONTROL_VERTICAL_SMALL . At the very least it needs a comment and a better name -- \"vertical space\" is too ambiguous.",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f01fe132_e9b9121a",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 29,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c513166_4f03ea44",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8f93013_4ab725dd",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 32,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "it\u0027s -\u003e its",
      "range": {
        "startLine": 32,
        "startChar": 12,
        "endLine": 32,
        "endChar": 16
      },
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "475ba3b8_ad7547e4",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 32,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a8f93013_4ab725dd",
      "range": {
        "startLine": 32,
        "startChar": 12,
        "endLine": 32,
        "endChar": 16
      },
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be1e7819_916ae9f0",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 48,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "DISALLOW_COPY..",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7be1669d_a8d2a8d7",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 48,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "be1e7819_916ae9f0",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b3892af6_020c149b",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 60,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "comment about this?  (do you know this can happen or is it hypothetical?)",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "347b82ad_4d720c37",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 60,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "It does not happen in this implementation, but there should always only be one bubble.\nDo you think a DCHECK is better here?",
      "parentUuid": "b3892af6_020c149b",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0794bd43_4649d4ee",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 60,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-29T11:06:34Z",
      "side": 1,
      "message": "\u003e It does not happen in this implementation, but there should always only be one bubble.\n\u003e Do you think a DCHECK is better here?\n\nA DCHECK is usually preferred, unless it\u0027s a known thing that needs to be handled. The risk is that code added later can start depend on it, or that some refactoring occurs that unintentionally relies on it. It can make troubleshooting bugs harder, or mask leaks. (basically anything unplanned should trigger a crash so it can be planned for properly)",
      "parentUuid": "347b82ad_4d720c37",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f4bd2bd_7ee6a1dd",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 65,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "can this happen before CreateBubble()? Otherwise it will resize/relayout a second time",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ec1ca0a_4e14415a",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 65,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "This has to be called after CreateBubble() otherwise it crashes. Apparently the widget has to exist at the point the method is called. Should I add a comment?",
      "parentUuid": "1f4bd2bd_7ee6a1dd",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6233f081_47d41be2",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 65,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-29T11:06:34Z",
      "side": 1,
      "message": "Ah, yeah I think it needs a comment - there\u0027s one on SetAlignment(), but the more interesting thing is why it needs to be called at all. most bubbles just use the default (and the default is different with/without chrome://flags/#secondary-ui-md ).\n\n\n(another option could be to pass something other than views::BubbleBorder::NONE to the BubbleDialogDelegateView constructor, and combine that with an ArrowPaintType -- that might give better anchoring behaviour [e.g. flipping in RTL locales]. SetArrowPaintType needs to be called in a similar way, but PaintNone is default under Harmony so in the long run shouldn\u0027t do a second layout).",
      "parentUuid": "1ec1ca0a_4e14415a",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6c51837_3abe08e3",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 66,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "remove commented code",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1c2e05e_ab2e8abd",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 66,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d6c51837_3abe08e3",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c182a153_83910397",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 118,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "BubbleDialogDelegateView observes two widgets -- which one do you care about here? Also you need to call the parent class implementation.",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "214ef946_2f39fed9",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 118,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Usually this should only be called for DiceAccountsMenu because the observer gets removed from the parent when the DiceAccountsMenu bubble is destroyed.\nBut I added a check just in case.",
      "parentUuid": "c182a153_83910397",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "abc5e119_f8283cea",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 118,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-29T11:06:34Z",
      "side": 1,
      "message": "\u003e Usually this should only be called for DiceAccountsMenu because the observer gets removed from the parent when the DiceAccountsMenu bubble is destroyed.\n\u003e But I added a check just in case.\n\nSadly, it\u0027s always possible for the parent widget to be destroyed first. (that\u0027s why BubbleDialogDelegateView observes it in SetAnchorView() and checks in BubbleDialogDelegateView::OnWidgetDestroying()). Sometimes it can be hard to trigger manually (might involve a11y tools, third-party \u0027desktop enhancers\u0027, system logoff flows, timed reboots, etc.), but the crash reports certainly indicate it as a common occurrence.\n\nHere, I think parent_bubble_-\u003eGetWidget() may be passed in for |widget| -- if that happens, the code below shouldn\u0027t try to close it again, since it\u0027s in the process of being destroyed already.\n\nTo trigger in code, you just need to call anchor_widget()-\u003eCloseNow() (with \"real\" desktop widgets -- not the fake ones that CreateTopLevelPlatformWidget() makes)",
      "parentUuid": "214ef946_2f39fed9",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f803f27b_5f9517dc",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 120,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "shouldn\u0027t the parent window be responsible for closing itself still? I don\u0027t understand why you need this.",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9fb00b1_0d17974f",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 120,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "The parent bubble only closes when it changes from active to inactive. (in this case it either changes from inactive to inactive or from inactive to active)\nSo it could listen for this itself, but I found it more convenient to do it in the DiceAccountsMenu bubble, when the widget is destroyed. It also makes it easier to install into other bubbles which is handy since it will not only be used in the ProfileChooserView, but also for the BookmarksBubble, ...",
      "parentUuid": "f803f27b_5f9517dc",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2805c3b0_60eaa78d",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 120,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-29T11:06:34Z",
      "side": 1,
      "message": "I think this is worth highlighting in the comment more directly. I.e. is the only way this can happen by the user clicking the parent bubble? (in all other cases I can think of, both bubbles should dismiss) E.g. \n\n  // If the user clicked the parent bubble (thereby causing it to activate, and this\n  // bubble to deactivate and close), the parent bubble should stay open. In all other\n  // cases, close the parent bubble if it hasn\u0027t been destroyed already.\n\n(perhaps also mention behavior on pressing escape?)\n\nAlso note I think bubbles on mac are different in this respect (via the BubbleDialogDelegateView::mac_bubble_closer_ member) and don\u0027t need this (or didn\u0027t while the ScopedCloseBubbleOnDeactivate was out of scope).",
      "parentUuid": "b9fb00b1_0d17974f",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ebc16be_53274416",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 124,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "activation is asynchronous on Linux and Mac -- I don\u0027t think you can rely on this. I expect it will never work, or at best be flaky, since activation hasn\u0027t transferred yet when the widget is destroyed.",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c9cecc0_48ef2ddb",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 124,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "I tested it a lot on both platforms and I never ran into problems.",
      "parentUuid": "5ebc16be_53274416",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "08f83249_c211f95a",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 125,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "try something like pressing the browser window\u0027s close button while both popups are active, or right-clicking the Chrome taskbar icon and selecting close from there. I suspect you\u0027ll encounter lifetime issues here.",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "505a84af_04b1fda4",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.cc",
        "patchSetId": 15
      },
      "lineNbr": 125,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "No issues. But maybe it\u0027s only on my machine, I\u0027ll try it on others as well.",
      "parentUuid": "08f83249_c211f95a",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca67f1e8_68e57628",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.h",
        "patchSetId": 15
      },
      "lineNbr": 44,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "rather than a raw pointer, I think this would be better as a helper function doing\n\nanchor_widget()-\u003ewidget_delegate()-\u003eAsBubbleDialogDelegate()\n\nBubbleDialogDelegateView already does some lifetime management of anchor_widget_",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f875a9d_56eed957",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.h",
        "patchSetId": 15
      },
      "lineNbr": 44,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-29T11:06:34Z",
      "side": 1,
      "message": "\u003e rather than a raw pointer, I think this would be better as a helper function doing\n\u003e \n\u003e anchor_widget()-\u003ewidget_delegate()-\u003eAsBubbleDialogDelegate()\n\u003e \n\u003e BubbleDialogDelegateView already does some lifetime management of anchor_widget_\n\nIs this still possible? It would be nice to remove this raw/weak/unmanaged pointer.",
      "parentUuid": "ca67f1e8_68e57628",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8cdb5464_486530d9",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.h",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "we typically put these things in an anonymous namespace - is that possible?",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a589b36f_0c20664e",
        "filename": "chrome/browser/ui/views/profiles/dice_accounts_menu.h",
        "patchSetId": 15
      },
      "lineNbr": 49,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "I also need it for the tests, so I found this is the best option.",
      "parentUuid": "8cdb5464_486530d9",
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f4677c58_42f1fe6b",
        "filename": "chrome/test/BUILD.gn",
        "patchSetId": 15
      },
      "lineNbr": 4118,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-24T17:39:33Z",
      "side": 1,
      "message": "Do I have to move the above line down here?",
      "range": {
        "startLine": 4118,
        "startChar": 18,
        "endLine": 4118,
        "endChar": 0
      },
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ecd4cda8_27763d4b",
        "filename": "chrome/test/BUILD.gn",
        "patchSetId": 15
      },
      "lineNbr": 4118,
      "author": {
        "id": 1002092
      },
      "writtenOn": "2018-01-24T23:55:17Z",
      "side": 1,
      "message": "\u003e Do I have to move the above line down here?\n\nthat would exclude it from Mac. The best way is probably to add an `else`  to the `if (is_chromeos) { } ...` above",
      "parentUuid": "f4677c58_42f1fe6b",
      "range": {
        "startLine": 4118,
        "startChar": 18,
        "endLine": 4118,
        "endChar": 0
      },
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "006ea3db_5e438c49",
        "filename": "chrome/test/BUILD.gn",
        "patchSetId": 15
      },
      "lineNbr": 4118,
      "author": {
        "id": 1246408
      },
      "writtenOn": "2018-01-26T16:19:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ecd4cda8_27763d4b",
      "range": {
        "startLine": 4118,
        "startChar": 18,
        "endLine": 4118,
        "endChar": 0
      },
      "revId": "f6b39569538872cff0113b4eca5f77e19695cab3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}