{
  "comments": [
    {
      "key": {
        "uuid": "b063023e_4df8684e",
        "filename": "content/renderer/media/user_media_client_impl_unittest.cc",
        "patchSetId": 4
      },
      "lineNbr": 1391,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-12-13T16:36:14Z",
      "side": 1,
      "message": "Is it possible to have a RenderToAssociatedSinkTrue test where matched_output_device_id is not empty?",
      "range": {
        "startLine": 1391,
        "startChar": 32,
        "endLine": 1391,
        "endChar": 59
      },
      "revId": "b4e83d133eea402382fd233e20efb9ef67e6ba82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8646a152_e5219c9b",
        "filename": "content/renderer/media/user_media_client_impl_unittest.cc",
        "patchSetId": 4
      },
      "lineNbr": 1391,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-13T17:58:02Z",
      "side": 1,
      "message": "I think currently it\u0027s possible for tests(that use fake devices) to have an empty matched_output_device_id even if renderToAssociatedSink is true. We need to handle such cases similar to |input| field. May be then we can have a RenderToAssociatedSinkTrue test.",
      "parentUuid": "b063023e_4df8684e",
      "range": {
        "startLine": 1391,
        "startChar": 32,
        "endLine": 1391,
        "endChar": 59
      },
      "revId": "b4e83d133eea402382fd233e20efb9ef67e6ba82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d345cdba_2207ba8c",
        "filename": "content/renderer/media/user_media_client_impl_unittest.cc",
        "patchSetId": 4
      },
      "lineNbr": 1391,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-12-13T21:09:14Z",
      "side": 1,
      "message": "If it was trivial to get fake input devices that have associated output devices, please add the test.\nIf not, file a bug and add a TODO (you can assign it to me).",
      "parentUuid": "8646a152_e5219c9b",
      "range": {
        "startLine": 1391,
        "startChar": 32,
        "endLine": 1391,
        "endChar": 59
      },
      "revId": "b4e83d133eea402382fd233e20efb9ef67e6ba82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a00fce3_d5210f4b",
        "filename": "content/renderer/media/user_media_client_impl_unittest.cc",
        "patchSetId": 4
      },
      "lineNbr": 1391,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-14T05:38:38Z",
      "side": 1,
      "message": "If my understanding is correct, input devices may or may not have associated output devices even if renderToAssociatedSink is true. Also as per maxmorin@\u0027s suggestion, I\u0027ll be changing |matched_output_device_id| to use base::Optional in a future CL. So, what do we verify for |matched_output_device_id| in a RenderToAssociatedSinkTrue test?\n\nEarlier RenderToAssociatedSinkTrueAudioParams test and EXPECT_TRUE(source-\u003edevice().matched_output.IsValid()); was possible because |matched_output| was set to UnavailableDeviceParameters() even if there were no associated output devices. But that is not the case for |matched_output_device_id|.",
      "parentUuid": "d345cdba_2207ba8c",
      "range": {
        "startLine": 1391,
        "startChar": 32,
        "endLine": 1391,
        "endChar": 59
      },
      "revId": "b4e83d133eea402382fd233e20efb9ef67e6ba82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29833ab1_637ca452",
        "filename": "content/renderer/media/user_media_client_impl_unittest.cc",
        "patchSetId": 4
      },
      "lineNbr": 1391,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-12-14T07:14:47Z",
      "side": 1,
      "message": "To make this test you just have to modify MockMojoMediaStreamDispatcherHost::GenerateStream()[1] to make sure the audio MediaStreamDevice it returns has a nonempty |matched_output_device_id|.\n\nThen you have to verify that the matched_output_device_id remains nonempty after getUserMedia() returns. \n\n[1] https://cs.chromium.org/chromium/src/content/renderer/media/mock_mojo_media_stream_dispatcher_host.cc?gsn\u003dMockMojoMediaStreamDispatcherHost\u0026l\u003d23",
      "parentUuid": "1a00fce3_d5210f4b",
      "range": {
        "startLine": 1391,
        "startChar": 32,
        "endLine": 1391,
        "endChar": 59
      },
      "revId": "b4e83d133eea402382fd233e20efb9ef67e6ba82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "463abda3_8b8e55d4",
        "filename": "content/renderer/media/user_media_client_impl_unittest.cc",
        "patchSetId": 4
      },
      "lineNbr": 1391,
      "author": {
        "id": 1120018
      },
      "writtenOn": "2017-12-14T07:32:14Z",
      "side": 1,
      "message": "Sure. I had figured out why source-\u003edevice().matched_output_device_id is empty for RenderToAssociatedSinkTrue test and that we need to set a non-empty |matched_output_device_id| in MockMojoMediaStreamDispatcherHost::GenerateStream() for this test to pass.\n\nI was only expecting a little bit of clarification on \n\"input devices may or may not have associated output devices even if renderToAssociatedSink is true.\", before I upload the next patchset with the RenderToAssociatedSinkTrue test.\nDoes renderToAssociatedSink\u003dtrue always imply |matched_output_device_id| is not empty?\nIsn\u0027t it possible for input devices to not have associated output devices even if renderToAssociatedSink is true?(let\u0027s say in a real time scenario and not tests).\nThank you.",
      "parentUuid": "29833ab1_637ca452",
      "range": {
        "startLine": 1391,
        "startChar": 32,
        "endLine": 1391,
        "endChar": 59
      },
      "revId": "b4e83d133eea402382fd233e20efb9ef67e6ba82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ad92eab_c2279bdd",
        "filename": "content/renderer/media/user_media_client_impl_unittest.cc",
        "patchSetId": 4
      },
      "lineNbr": 1391,
      "author": {
        "id": 1143639
      },
      "writtenOn": "2017-12-14T09:51:28Z",
      "side": 1,
      "message": "renderToAssociatedSink is a request coming from the application that is interpreted the following way:\n\n* renderToAssociatedSink true means that, if the input device has an associated output device, the audio of a remote stream should go to that associated device.\n\n* renderToAssociatedSink false means that, even if the input device has an associated output device, the audio of the remote stream should go to the default output device.\n\nWhen there is no associated device, audio will go to the default output device regardless of the value of renderToAssociatedSink.\n\nThe test you just added is exactly what\u0027s needed, so you probably figured this out already.",
      "parentUuid": "463abda3_8b8e55d4",
      "range": {
        "startLine": 1391,
        "startChar": 32,
        "endLine": 1391,
        "endChar": 59
      },
      "revId": "b4e83d133eea402382fd233e20efb9ef67e6ba82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}