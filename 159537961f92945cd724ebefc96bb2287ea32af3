{
  "comments": [
    {
      "key": {
        "uuid": "96e9984a_579601ff",
        "filename": "chrome/browser/android/vr_shell/vr_shell_gl.cc",
        "patchSetId": 8
      },
      "lineNbr": 103,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-17T22:05:52Z",
      "side": 1,
      "message": "Maybe call this GetMinimalFovAndViewport (I\u0027m not sure anymore after our discussion that this would be the right name) to make it clearer what it does? A function comment would be good too. How useful do you think this is for other platforms? I was mainly concerned with adding another 100 lines to the already pretty big vr_shell_gl.cc. Do you think it makes sense to put this into the platform independent code, e.g. vr_gl_util.cc?",
      "range": {
        "startLine": 103,
        "startChar": 5,
        "endLine": 103,
        "endChar": 39
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07c56770_890f7a1a",
        "filename": "chrome/browser/android/vr_shell/vr_shell_gl.cc",
        "patchSetId": 8
      },
      "lineNbr": 103,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-08-18T18:36:07Z",
      "side": 1,
      "message": "I don\u0027t really know if other platform need this or not. But FOV may mean different things in other platforms. So I would need an abstraction here which I am not quite clear yet what should it be. Moved it to gvr_util.* for now. If we need them in the future, we can move it to chrome/browesr/vr. And by that time, it should be more clear what the abstraction should be.\nAdded comment and changed function name too.",
      "parentUuid": "96e9984a_579601ff",
      "range": {
        "startLine": 103,
        "startChar": 5,
        "endLine": 103,
        "endChar": 39
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ff259b7_34f13453",
        "filename": "chrome/browser/android/vr_shell/vr_shell_gl.cc",
        "patchSetId": 8
      },
      "lineNbr": 103,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-18T20:32:31Z",
      "side": 1,
      "message": "That is fine.",
      "parentUuid": "07c56770_890f7a1a",
      "range": {
        "startLine": 103,
        "startChar": 5,
        "endLine": 103,
        "endChar": 39
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0947530b_4a1d8b13",
        "filename": "chrome/browser/vr/elements/ui_element.h",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-17T22:05:52Z",
      "side": 1,
      "message": "If I understand this correctly, all viewport aware elements must be a child of ViewportAwareRoot and have viewport_aware_ set to true? And the only reason we need this flag is to distinguish between world and view port aware elements when we call UiScene::GetWorldElements() and UiScene::GetViewportAwareElements()? Would it be possible if we draw the viewport aware elements as part of the world elements since they will be drawn in the same buffer anyways? In order to only draw the viewport aware elements we could take all children of the viewport aware root. By doing so, we could remove this flag and wouldn\u0027t have the problem that an element can have the view_aware flag set to true but is not a child of the ViewportAwareRoot.",
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8bac49e_47dfbd2c",
        "filename": "chrome/browser/vr/elements/ui_element.h",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-08-18T18:36:07Z",
      "side": 1,
      "message": "We could definitely remove this flag. I was just trying to avoid doing too much things in this CL. Mind if I doing it in a follow up?",
      "parentUuid": "0947530b_4a1d8b13",
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20084259_2d2ea190",
        "filename": "chrome/browser/vr/elements/ui_element.h",
        "patchSetId": 8
      },
      "lineNbr": 114,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-18T20:32:31Z",
      "side": 1,
      "message": "Ok, sounds good. Can you file a bug for this and reference it here?",
      "parentUuid": "e8bac49e_47dfbd2c",
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce02a877_a83ac7df",
        "filename": "chrome/browser/vr/elements/ui_element.h",
        "patchSetId": 8
      },
      "lineNbr": 259,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-17T22:05:52Z",
      "side": 1,
      "message": "Call this AdjustTransformation or Update since it actually updates the rotation in this patch?",
      "range": {
        "startLine": 259,
        "startChar": 15,
        "endLine": 259,
        "endChar": 29
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1bfa9803_d85de6a4",
        "filename": "chrome/browser/vr/elements/ui_element.h",
        "patchSetId": 8
      },
      "lineNbr": 259,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-08-18T18:36:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ce02a877_a83ac7df",
      "range": {
        "startLine": 259,
        "startChar": 15,
        "endLine": 259,
        "endChar": 29
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "152025d5_116bffbd",
        "filename": "chrome/browser/vr/elements/ui_element.h",
        "patchSetId": 8
      },
      "lineNbr": 259,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-18T20:32:31Z",
      "side": 1,
      "message": "Maybe there was an error with the upload. It is still called AdjustPosition.",
      "parentUuid": "1bfa9803_d85de6a4",
      "range": {
        "startLine": 259,
        "startChar": 15,
        "endLine": 259,
        "endChar": 29
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c6102b8_565eba70",
        "filename": "chrome/browser/vr/elements/viewport_aware_root.cc",
        "patchSetId": 8
      },
      "lineNbr": 22,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-18T20:32:31Z",
      "side": 1,
      "message": "Why can the ViewportAwareRoot not be the child of another element? Like the root root.",
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "385a480e_41d5e857",
        "filename": "chrome/browser/vr/elements/viewport_aware_root.cc",
        "patchSetId": 8
      },
      "lineNbr": 35,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-18T20:32:31Z",
      "side": 1,
      "message": "Remove this function? Why not let the children layout to anchors if they wish?",
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c81051c4_b6fba8c2",
        "filename": "chrome/browser/vr/elements/viewport_aware_root.cc",
        "patchSetId": 8
      },
      "lineNbr": 38,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-17T22:05:52Z",
      "side": 1,
      "message": "Correct me if I\u0027m wrong, all viewport aware elements will be rotated together if we surpass the threshold? Could we use the element\u0027s normal rotation instead of the viewport_aware_rotation_? By doing so, this property would be animateable, which may be a neat effect.",
      "range": {
        "startLine": 38,
        "startChar": 9,
        "endLine": 38,
        "endChar": 33
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3416c17_9bd383a9",
        "filename": "chrome/browser/vr/elements/viewport_aware_root.cc",
        "patchSetId": 8
      },
      "lineNbr": 38,
      "author": {
        "id": 1002161
      },
      "writtenOn": "2017-08-18T18:36:07Z",
      "side": 1,
      "message": "We probably don\u0027t want to animate rotation of these elements. What we want is probably opacity animation. So making it animateable is probably not going to be useful for us.\n \nWe would also have to recursively apply the rotation to all children and children\u0027s children. However, with this approach, we get this for free as LocalTransform is used in ApplyRecursiveTransforms, which happens after we set viewport_aware_rotation_. Not that it is a big deal, but I think the current way makes the code simpler.",
      "parentUuid": "c81051c4_b6fba8c2",
      "range": {
        "startLine": 38,
        "startChar": 9,
        "endLine": 38,
        "endChar": 33
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc06a9de_11bb69a8",
        "filename": "chrome/browser/vr/elements/viewport_aware_root.cc",
        "patchSetId": 8
      },
      "lineNbr": 38,
      "author": {
        "id": 1213279
      },
      "writtenOn": "2017-08-18T20:32:31Z",
      "side": 1,
      "message": "I think the rotation is part of the LocalTransform already (https://cs.chromium.org/chromium/src/chrome/browser/vr/elements/ui_element.cc?rcl\u003d65c8da95cbc89501e08ba28cd3bc9d308f20a026\u0026l\u003d277). So, setting the rotation should be applied to the children. Reusing existing attributes probably works better with the rest of the code. Also, it would allow us to use the scale and position as well. And, we may not want to animate the rotation right now. But we would have the flexibility to do so.",
      "parentUuid": "d3416c17_9bd383a9",
      "range": {
        "startLine": 38,
        "startChar": 9,
        "endLine": 38,
        "endChar": 33
      },
      "revId": "159537961f92945cd724ebefc96bb2287ea32af3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}