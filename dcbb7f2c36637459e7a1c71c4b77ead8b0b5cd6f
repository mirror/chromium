{
  "comments": [
    {
      "key": {
        "uuid": "a8066df2_9826b95e",
        "filename": "android_webview/java/src/org/chromium/android_webview/AwSwitches.java",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "nit: variable name should match string value",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4b95de0_f0db1969",
        "filename": "android_webview/java/src/org/chromium/android_webview/AwSwitches.java",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a8066df2_9826b95e",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8766d96_0347b138",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 59,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "remove?",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4025f7e7_dfb7997f",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 59,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d8766d96_0347b138",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fce2803f_3375bdcd",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 88,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "I don\u0027t see the security issue I mentioned on tony\u0027s code review being addressed in anyway? Pasting over comment from tony\u0027s code review:\n\nwill definitely need a security check here that this is in fact from AwVariationsSeedFetchService, otherwise a malicious app can set is own seed data and whatnot for all other apps on the device\n\nI don\u0027t know if it\u0027s possible to do with the messenger pattern (which I assume is asynchronous), but with aidl, can check with inside a synchronous call with https://developer.android.com/reference/android/os/Binder.html#getCallingPid(), and check in this case that it matches our pid.\n\nOr more hacky solution: job binds to service to make sure it\u0027s started, and then directly set a static variable since both job and service are in the same process, and then send a message to service to handle the new data",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb4e0b3f_3175fb14",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 88,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-18T23:54:17Z",
      "side": 1,
      "message": "I implemented the hacky solution, with a TODO to fix it.",
      "parentUuid": "fce2803f_3375bdcd",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5915ffec_0c76c83a",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "else assert false",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13cf07be_7e531c53",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T23:18:31Z",
      "side": 1,
      "message": "\u003e else assert false\n\nnot done :p",
      "parentUuid": "5915ffec_0c76c83a",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "590f6592_d0d12384",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-18T23:54:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "13cf07be_7e531c53",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bbf216a4_b2091e61",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 104,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "this lock is not needed either? all on one thread? in fact, sIsScheduling isn\u0027t used at all afaict?",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a12b08b4_1694ec61",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 104,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bbf216a4_b2091e61",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c54baf6_06245f85",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 127,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "this can happen when seed is expired, and a job is pending, but in that case, we don\u0027t have valid data to send back?",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5e5d927_64e2ca91",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 127,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T23:18:31Z",
      "side": 1,
      "message": "\u003e this can happen when seed is expired, and a job is pending, but in that case, we don\u0027t have valid data to send back?\n\nnot done",
      "parentUuid": "5c54baf6_06245f85",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c1177210_2b779de1",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 127,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-18T23:54:17Z",
      "side": 1,
      "message": "I\u0027m not sure what we should do in this case. It could be possible that the seed is expired from the Service\u0027s perspective, but would still be more fresh than the version of the seed that the app has. Should we not give them the most recent seed we have available?",
      "parentUuid": "a5e5d927_64e2ca91",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9f7381f_9da8b959",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 127,
      "author": {
        "id": 1147294
      },
      "writtenOn": "2017-08-21T16:44:49Z",
      "side": 1,
      "message": "Depends on what we mean by a seed being \"expired\", what does Chrome do in this situation?\n\nAlso, what does the app do if all it has is an expired seed, does it still use that seed, or fall back to some kind of default implementation?",
      "parentUuid": "c1177210_2b779de1",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "edb86eb4_85f166eb",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 127,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2017-08-21T17:01:52Z",
      "side": 1,
      "message": "I think the \"expired\" terminology is not great to use here. Sorry I didn\u0027t comment on this earlier.\n\nMainly because in Chrome, we ignore Finch configs entirely if they\u0027re are \"expired\" (different meaning than here) - where expired is over 30 days old.\n\nThe meaning used here is \"needs update\" - i.e. we need to fetch it again from the server to pick up any changes. So suggest changing the CL to use \"NeedsUpdate()\" terminology instead - or something like \"ShouldBeRefreshed()\".\n\nIt is fine and actually correct to use the current seed value (even if it needs an update) for instantiating trials - because that\u0027s more correct than disabling them entirely. (Unless the seed is super old - i.e. 30 days per Chromium logic). I think the \"super old\" logic doesn\u0027t need to be added at this time, but the point is you should still use the seed even if \"needs update\" is true.",
      "parentUuid": "a9f7381f_9da8b959",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28a3d23b_0db2cda1",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsConfigurationService.java",
        "patchSetId": 5
      },
      "lineNbr": 127,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-21T18:16:38Z",
      "side": 1,
      "message": "That SGTM. So, I think, what we want for now is to unconditionally send whatever seed the service has back to the app. There are two issues here that could make this a waste, but for now it seems ok.\n1. The app and service already have the same seed. We\u0027re not currently checking for this anyways\n2. The service has a seed \u003e 30days old, so even if the app receives it it will later be ignored during field trial setup.",
      "parentUuid": "edb86eb4_85f166eb",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18d5126d_b7f40813",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsSeedFetchService.java",
        "patchSetId": 5
      },
      "lineNbr": 62,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "umm...but if task is not finished, we *should* reschedule the job?",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "415e9c8c_011c00de",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsSeedFetchService.java",
        "patchSetId": 5
      },
      "lineNbr": 62,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "Hmm, maybe the reasoning is that we\u0027ll just give up this time and try again next time an app starts and needs a WebView? I\u0027ll have to look through this more to understand",
      "parentUuid": "18d5126d_b7f40813",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9a4f7d6_75ed3447",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsSeedFetchService.java",
        "patchSetId": 5
      },
      "lineNbr": 62,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T23:18:31Z",
      "side": 1,
      "message": "\u003e Hmm, maybe the reasoning is that we\u0027ll just give up this time and try again next time an app starts and needs a WebView? I\u0027ll have to look through this more to understand\n\nyeah I guess that works too. depends on how frequently we\u0027ll be stopped I guess",
      "parentUuid": "415e9c8c_011c00de",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fac935e4_e4142553",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 104,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "you only need to hold the lock for rename, not the entire copy paste operation?\n\nalso rename should probably come after closing the out file?",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "642963b5_42a0e458",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 104,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "removed locks.\n\nmoved rename.",
      "parentUuid": "fac935e4_e4142553",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0047cb0_38c110f0",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 123,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "do a try/finally just for the recursivelyDeleteFile call. disable before, and enable again after. and add a comment this needs to be fixed before shipping to production",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e71221f_e388df2b",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 123,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0047cb0_38c110f0",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc9f7bac_9c9668bb",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 179,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "maybe leave a clean up, this feels kinda dangerous, doing serialization ourselves, eg relying on Boolean.toString and parseBoolean.\n\nmight be easier if we pick an existing library that supports structured data, eg json?",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29460ff3_cbeb82d4",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 179,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "isGzipCompressed isn\u0027t actually needed anywhere, so we should be able to remove it completely",
      "parentUuid": "bc9f7bac_9c9668bb",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c36fa49_0c904de3",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 222,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2017-08-17T17:54:27Z",
      "side": 1,
      "message": "close before unlock",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf216d59_e296fdd4",
        "filename": "android_webview/java/src/org/chromium/android_webview/variations/AwVariationsUtils.java",
        "patchSetId": 5
      },
      "lineNbr": 222,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-08-17T22:40:47Z",
      "side": 1,
      "message": "removed lock",
      "parentUuid": "9c36fa49_0c904de3",
      "revId": "dcbb7f2c36637459e7a1c71c4b77ead8b0b5cd6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}