{
  "comments": [
    {
      "key": {
        "uuid": "48a6f915_4f029886",
        "filename": "chrome/browser/ui/webui/offline/offline_internals_ui_message_handler.cc",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1111029
      },
      "writtenOn": "2017-12-14T01:01:50Z",
      "side": 1,
      "message": "It appears that you are trying to construct a JSON object using string formatting.\n\nGenerally we would use a combination of ListValue and DictionaryValue here. Or, if the only member is a URL, we would just send a ListValue of strings.",
      "revId": "cfc08be7a0e431cde74e66f0c0986affd7eec2b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a591f846_8bed3e63",
        "filename": "chrome/browser/ui/webui/offline/offline_internals_ui_message_handler.cc",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2017-12-14T01:26:07Z",
      "side": 1,
      "message": "The intention was to mimic previous version of the output (https://chromium.googlesource.com/chromium/src/+/2e49f498ca48a78e6a2227748e661be67144bd4d/chrome/browser/ui/webui/offline/offline_internals_ui_message_handler.cc#103), which was lost when the implementation was changed. The advantage of using the existing format is test code already expects that format and only needs minimal updates.\n\nI do realize that the output is now much shorter compared to the previous version (due to the less amount of information available). If you think JSON is now an overkill for the kind of data, I can certainly change it to a ListValue of strings. It does mean the test code (which lives in a different repo) will need to be updated to understand the new format.",
      "parentUuid": "48a6f915_4f029886",
      "revId": "cfc08be7a0e431cde74e66f0c0986affd7eec2b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6e10ee1_d5f2483d",
        "filename": "chrome/browser/ui/webui/offline/offline_internals_ui_message_handler.cc",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1111029
      },
      "writtenOn": "2017-12-14T16:58:42Z",
      "side": 1,
      "message": "Hey John -- thank you for the context. That explains more why we went the string formatting route.\n\nThat being said -- I probably would have pushed back on the old string formatting version as well. I don\u0027t know what the source of the data is, but it looks like a malicious URL could escape out of the JSON and start executing arbitrary JavaScript calls.\n\nI would be okay with either using a combo of ListValue and DictionaryValue or just a plain ListValue -- and I\u0027m okay with whichever you choose. If you do use a ListValue+DictionaryValue, I\u0027d suggest leave a comment that this is to support a legacy format in a different repo.\n\nIf you do choose to make it a plain ListValue, it probably enhances maintainability for the future at the expense of current work.\n\nLet me know what you think.",
      "parentUuid": "a591f846_8bed3e63",
      "revId": "cfc08be7a0e431cde74e66f0c0986affd7eec2b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23536c55_87067612",
        "filename": "chrome/browser/ui/webui/offline/offline_internals_ui_message_handler.cc",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2017-12-14T17:21:35Z",
      "side": 1,
      "message": "Sounds good. I\u0027ll change it to a plain ListValue and update the CL.",
      "parentUuid": "a6e10ee1_d5f2483d",
      "revId": "cfc08be7a0e431cde74e66f0c0986affd7eec2b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef8234cf_3b43e9a7",
        "filename": "chrome/browser/ui/webui/offline/offline_internals_ui_message_handler.cc",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1134722
      },
      "writtenOn": "2017-12-14T22:42:48Z",
      "side": 1,
      "message": "Thanks for improving the security of our code! Would you also please add a code comment explaining why we\u0027re using these safer structures so that future devs (myself included) don\u0027t go about changing it due to their security-holes ignorance?",
      "parentUuid": "23536c55_87067612",
      "revId": "cfc08be7a0e431cde74e66f0c0986affd7eec2b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44f02e58_af9ef468",
        "filename": "chrome/browser/ui/webui/offline/offline_internals_ui_message_handler.cc",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2017-12-15T03:40:18Z",
      "side": 1,
      "message": "Updated code to use ListValue. Please let me know if I missed anything.",
      "parentUuid": "ef8234cf_3b43e9a7",
      "revId": "cfc08be7a0e431cde74e66f0c0986affd7eec2b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}