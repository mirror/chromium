{
  "comments": [
    {
      "key": {
        "uuid": "d170f0e0_3d9717cd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "Please update name, and make sure we don\u0027t refer to \"Most Likely\".",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b19f8ca_9f0809da",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-19T16:44:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d170f0e0_3d9717cd",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f58b4e1_85f355e9",
        "filename": "components/ntp_tiles/constants.h",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "We already have the json number scheme anyway to toggle the feature, but I guess this extra precaution makes sense to avoid accidental launches (assuming clients behave well for all combinations). However, I propose you only verify this feature *once*, during the processing of the JSON in PopularSitesImpl, to avoid diverging codepaths (and hence testability issues).",
      "range": {
        "startLine": 27,
        "startChar": 52,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "956c058c_ac02cf42",
        "filename": "components/ntp_tiles/constants.h",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "Done (by deprecating onMostVisitedURLsAvailable. Removing was not really an option as I really don\u0027t want to change iOS code here.)",
      "parentUuid": "9f58b4e1_85f355e9",
      "range": {
        "startLine": 27,
        "startChar": 52,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "faf14f05_6780f9f4",
        "filename": "components/ntp_tiles/constants.h",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-19T08:57:39Z",
      "side": 1,
      "message": "What\u0027s the problem with updating iOS? You\u0027d probably only need to update the bridge so it adapts to the old signature and only propagates the personalized category.",
      "parentUuid": "956c058c_ac02cf42",
      "range": {
        "startLine": 27,
        "startChar": 52,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "822b410d_4903a2b8",
        "filename": "components/ntp_tiles/most_visited_sites.cc",
        "patchSetId": 5
      },
      "lineNbr": 501,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "Why would you want to check popular_sites_ or ShouldShowPopularSites()? It feels like OnExplorationTilesAvailable() should be called only with kSiteExplorationsFeature disabled.",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a41fa1e_4231e31d",
        "filename": "components/ntp_tiles/most_visited_sites.cc",
        "patchSetId": 5
      },
      "lineNbr": 501,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "OnExplorationTilesAvailable() is now _always_ called.\nThe condition only applies to the non-personalized sections.",
      "parentUuid": "822b410d_4903a2b8",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f21eac6_f5aa0c4e",
        "filename": "components/ntp_tiles/most_visited_sites.cc",
        "patchSetId": 5
      },
      "lineNbr": 505,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "This implementation seems fragile: it relies on PopularSites necessarily populating this entry, which is not documented to be guaranteed (and should IMO stay like this).",
      "range": {
        "startLine": 505,
        "startChar": 55,
        "endLine": 505,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b6de7c8_9107701e",
        "filename": "components/ntp_tiles/most_visited_sites.cc",
        "patchSetId": 5
      },
      "lineNbr": 505,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "I absolutely agree. The personalized section does not depend on popular sites anymore. This became easily possible because we now always call |OnExplorationTilesAvailable|.",
      "parentUuid": "0f21eac6_f5aa0c4e",
      "range": {
        "startLine": 505,
        "startChar": 55,
        "endLine": 505,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cde5ae67_b06e629f",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 90,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "Is this now deprecated? If yes please add a TODO.",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d937e36e_c3597d9a",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 90,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "Added deprecation notice and java-side annotaions.\n(As mentioned, removing would touch iOS code)",
      "parentUuid": "cde5ae67_b06e629f",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6aacad2c_06dd9477",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 202,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "Seems unnecessary: the implementation can access the sites.",
      "range": {
        "startLine": 202,
        "startChar": 45,
        "endLine": 202,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "750eebe1_7a426066",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 202,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "It only processes a single section. \nIf I omit the parameter, I would return a map now (sites for every section) of which I could only use the PERSONALIZED entry when creating the MV tiles.\nThis would move the complexity to the caller and introduce unused results.",
      "parentUuid": "6aacad2c_06dd9477",
      "range": {
        "startLine": 202,
        "startChar": 45,
        "endLine": 202,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3956e52_c54ec8ac",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 202,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-19T08:57:39Z",
      "side": 1,
      "message": "I\u0027m not really convinced: the function anyway accesses popular_sites_ so the possibility to pass in an arbitrary |sites| seems an illusion and error-prone. I see two slightly better alternatives:\n1. Make this function static such that popular_sites_ is not read at all (and keep |sites|). This would presumably involve moving the various empty-returning case-handling to the callers side.\n2. Revert introducing |sites| and instead rename the function to something like CreatePopularSitesForPersonalizedSection().",
      "parentUuid": "750eebe1_7a426066",
      "range": {
        "startLine": 202,
        "startChar": 45,
        "endLine": 202,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f588d59_aec243c5",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 202,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-20T08:56:11Z",
      "side": 1,
      "message": "Bump.",
      "parentUuid": "e3956e52_c54ec8ac",
      "range": {
        "startLine": 202,
        "startChar": 45,
        "endLine": 202,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78dc5ab6_690c404b",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 202,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-20T11:59:29Z",
      "side": 1,
      "message": "Reverted introducing |sites|. But it returns now all sections because we need to pass them to the observer anyway.\n\n(Considering 1.: It also depends on top_sites_, icon_cacher_, and num_sites_...)",
      "parentUuid": "8f588d59_aec243c5",
      "range": {
        "startLine": 202,
        "startChar": 45,
        "endLine": 202,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2897f40e_421d4cfe",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "You\u0027d need to capitalize For, but ideally we\u0027d avoid this function altogether (see my comment below).",
      "range": {
        "startLine": 215,
        "startChar": 39,
        "endLine": 215,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7303a272_b2c9f3d0",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2897f40e_421d4cfe",
      "range": {
        "startLine": 215,
        "startChar": 39,
        "endLine": 215,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b1d5bbaa_aa44531c",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "Perhaps for a follow-up patch, but I\u0027d hope this vector gets replaced with the new map.",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8bad436_d0126dda",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "We already hold a copy of the other non-personalized sites in the popular_sites_ object so I would like to avoid this kind of redundancy.\n(Especially because this section would always be even more of a special case than it is right now.)",
      "parentUuid": "b1d5bbaa_aa44531c",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b387afe7_b3c266c2",
        "filename": "components/ntp_tiles/most_visited_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-19T08:57:39Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a8bad436_d0126dda",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78a239de_438088a3",
        "filename": "components/ntp_tiles/popular_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 66,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "Add TODO to remove?",
      "range": {
        "startLine": 66,
        "startChar": 47,
        "endLine": 66,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12423b1f_afef049b",
        "filename": "components/ntp_tiles/popular_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 66,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "Removed. (Was only used in MV and there I already replaced it)",
      "parentUuid": "78a239de_438088a3",
      "range": {
        "startLine": 66,
        "startChar": 47,
        "endLine": 66,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "880f7d05_cadcbe33",
        "filename": "components/ntp_tiles/popular_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 69,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "I\u0027d propose typedef-ing this map since it gets passed around quite a lot.",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b460eb91_46dae5cd",
        "filename": "components/ntp_tiles/popular_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 69,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "I considered that and would really like to keep the key and the vector visible.\nEspecially, because there are two very similar maps:\nstd::map\u003cSectionType, SitesVector\u003e and\nstd::map\u003cSectionType, NTPTilesVector\u003e\nBeing conscious about the first and second value here is not easy - even without having to look up what map is hidden behind a typedef.\n\nYou can easily convince me otherwise as I don\u0027t really enjoy typing this. WDYT?\n\n(BTW: in one zine-weekly, we had feedback, that our code is hard to read because we use a huge amount of typedefs for vectors and maps already.)",
      "parentUuid": "880f7d05_cadcbe33",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef268760_dac03480",
        "filename": "components/ntp_tiles/popular_sites.h",
        "patchSetId": 5
      },
      "lineNbr": 69,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-19T08:57:39Z",
      "side": 1,
      "message": "I agree leaving without typedefs is also fine and arguably more readable (I myself usually like typedefs for maps, but this is somewhat arbitrary).\n\nAs per the naming collision or subtle differences in the two maps, it would be mitigated by the fact that you could typedef within the class, and fully qualifying the typedef would avoid ambiguities, e.g. PopularSites::SitesPerSectionMap vs MostVisitedSites::TilesPerSectionMap.\n\nIn this particular case, I think the vector typedefs (SitesVector and NTPTilesVector) would be better candidates to drop as opposed to the maps IMO.\n\nI\u0027m fine either way though.",
      "parentUuid": "b460eb91_46dae5cd",
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8da06ce_ed4513e4",
        "filename": "components/ntp_tiles/popular_sites_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 208,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-07-17T17:46:00Z",
      "side": 1,
      "message": "Nit: I think it\u0027d make more sense to cause ParseSiteList (possibly renamed) return the whole map, since we\u0027ll eventually cache it all in prefs.",
      "range": {
        "startLine": 208,
        "startChar": 60,
        "endLine": 208,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26ed2c99_0b05ebaf",
        "filename": "components/ntp_tiles/popular_sites_impl.cc",
        "patchSetId": 5
      },
      "lineNbr": 208,
      "author": {
        "id": 1200319
      },
      "writtenOn": "2017-07-18T17:14:26Z",
      "side": 1,
      "message": "Done (and simplified the sample data creation stuff.)",
      "parentUuid": "b8da06ce_ed4513e4",
      "range": {
        "startLine": 208,
        "startChar": 60,
        "endLine": 208,
        "endChar": 0
      },
      "revId": "c8cd42bf577b55a98177518085f682c103cd11b1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}