{
  "comments": [
    {
      "key": {
        "uuid": "ca512b13_87617931",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2695,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-07-17T15:36:29Z",
      "side": 1,
      "message": "What about this condition here? I think this was intended to handle root layer scrolling, is it obsolete? It seems to me that with root layer scrolling you actually want to prefer painting in the scrolling contents layer (as this is the default for the viewport w/o root layer scrolling) which is different than calling GetBackgroundPaintLocation which prefers the graphics layer as a safe fallback (i.e. I think this function might need to change for the root layer).",
      "revId": "75a5bf45336a2b8e5e0ff1fd303d06640f1d6a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a89b7e19_27ed6dd7",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2695,
      "author": {
        "id": 1116039
      },
      "writtenOn": "2017-07-17T17:06:04Z",
      "side": 1,
      "message": "Yes this path will need tweaking for low DPI fixed backgrounds.  I\u0027m doing that separately for http://crbug.com/734187.",
      "parentUuid": "ca512b13_87617931",
      "revId": "75a5bf45336a2b8e5e0ff1fd303d06640f1d6a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40bb9710_9288fb65",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2695,
      "author": {
        "id": 1001365
      },
      "writtenOn": "2017-07-18T00:00:55Z",
      "side": 1,
      "message": "Without changes, we will also prefer painting mixed backgrounds (fixed and non-fixed) into the graphics layer which means the non-fixed background will move with scroll and need to be repainted (opposite of the problem with mixed backgrounds without RLS). I\u0027m thinking we might want to change GetBackgroundPaintLocation on the root to prefer the scrolling contents layer in the tricky cases so that we have the same behavior as without the flag.",
      "parentUuid": "a89b7e19_27ed6dd7",
      "revId": "75a5bf45336a2b8e5e0ff1fd303d06640f1d6a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1874e686_99b0fdbc",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2695,
      "author": {
        "id": 1116039
      },
      "writtenOn": "2017-07-18T00:21:17Z",
      "side": 1,
      "message": "With a high DPI mixed background, it shouldn\u0027t matter which GraphicsLayer we use since we are repainting on every scroll regardless?\n\nAnd on high DPI with an entirely fixed or entirely non-fixed background we already get the right answer from LayoutBoxModelObject::GetBackgroundPaintLocation.\n\nSo I think \"low DPI \u003d\u003e scrolling contents layer\" is the only condition that needs to be added here.  On low DPI we don\u0027t care whether the background is fixed, non-fixed, or mixed; we want LCD text at the cost of repaints on scroll.\n\nBut getting fixed backgrounds painting correctly into the scrolling contents layer is not trivial, it needs some changes to invalidation and painting code too.  So I want to do that separately and limit the scope of this change to resolving the regression for simple (non-fixed) backgrounds.",
      "parentUuid": "40bb9710_9288fb65",
      "revId": "75a5bf45336a2b8e5e0ff1fd303d06640f1d6a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4c6cc4c_c4dc962a",
        "filename": "third_party/WebKit/Source/core/paint/ViewPainter.cpp",
        "patchSetId": 5
      },
      "lineNbr": 79,
      "author": {
        "id": 1002681
      },
      "writtenOn": "2017-07-17T15:29:51Z",
      "side": 1,
      "message": "Shouldn\u0027t this be based on HasCompositedLayers \u0026\u0026 ScrollsOverflow rather than the scroll offset? i.e. if this really is scrollable but just happens to be at offset 0, we still want to emit the scroll display items, right?",
      "range": {
        "startLine": 79,
        "startChar": 4,
        "endLine": 79,
        "endChar": 57
      },
      "revId": "75a5bf45336a2b8e5e0ff1fd303d06640f1d6a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc436dd2_74ddac14",
        "filename": "third_party/WebKit/Source/core/paint/ViewPainter.cpp",
        "patchSetId": 5
      },
      "lineNbr": 79,
      "author": {
        "id": 1116039
      },
      "writtenOn": "2017-07-17T17:06:04Z",
      "side": 1,
      "message": "I wondered about that but then noticed several existing uses of ScrollRecorder conditional on non-zero offsets.  In particular, PaintLayerPainter::PaintFragmentWithPhase has this check to apply the scroll offset for non-background content.\n\n@chrishtr: Should we emit BeginScroll / EndScroll display items when the offset is zero?  If so, I guess that should be changed everywhere.",
      "parentUuid": "b4c6cc4c_c4dc962a",
      "range": {
        "startLine": 79,
        "startChar": 4,
        "endLine": 79,
        "endChar": 57
      },
      "revId": "75a5bf45336a2b8e5e0ff1fd303d06640f1d6a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50ec40c0_2f31c0cc",
        "filename": "third_party/WebKit/Source/core/paint/ViewPainter.cpp",
        "patchSetId": 5
      },
      "lineNbr": 79,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-07-18T00:45:15Z",
      "side": 1,
      "message": "If the offset is zero, the scroll recorder will have no effect (and is harmless).\n\nGiven that, why did you need line 79?",
      "parentUuid": "bc436dd2_74ddac14",
      "range": {
        "startLine": 79,
        "startChar": 4,
        "endLine": 79,
        "endChar": 57
      },
      "revId": "75a5bf45336a2b8e5e0ff1fd303d06640f1d6a32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}