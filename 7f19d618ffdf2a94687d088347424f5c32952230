{
  "comments": [
    {
      "key": {
        "uuid": "fcc34ea3_47ae7fc4",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/input/SpellCheckMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T18:28:31Z",
      "side": 1,
      "message": "Hmm... Unless there is a big difference in the setUp(), I prefer that this single test case be merged into TextSuggestionMenuTest.",
      "range": {
        "startLine": 30,
        "startChar": 13,
        "endLine": 30,
        "endChar": 31
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "451b4810_4562174c",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/input/SpellCheckMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-23T18:41:08Z",
      "side": 1,
      "message": "The issue is that ImeActivityTestRule is a ContentShellActivityTestRule (so I assume it doesn\u0027t work with a ChromeActivityTestCase?), but when I tried to convert SpellCheckMenuTest to ContentShellActivityTestRule, the spell check underline doesn\u0027t appear. Do you know why that is?",
      "parentUuid": "fcc34ea3_47ae7fc4",
      "range": {
        "startLine": 30,
        "startChar": 13,
        "endLine": 30,
        "endChar": 31
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "176ed965_7404325c",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/input/SpellCheckMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T19:07:37Z",
      "side": 1,
      "message": "timvolodine@, you\u0027ve enabled spellcheck for webview. Is there any Java-side test that we can follow? Any idea how can we enable spellcheck in content shell?",
      "parentUuid": "451b4810_4562174c",
      "range": {
        "startLine": 30,
        "startChar": 13,
        "endLine": 30,
        "endChar": 31
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66979c5a_fd11ce9e",
        "filename": "chrome/android/javatests/src/org/chromium/chrome/browser/input/SpellCheckMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 79,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T18:28:31Z",
      "side": 1,
      "message": "Ditto here: you\u0027ll need to poll for the condition to avoid potential test flakiness.",
      "range": {
        "startLine": 79,
        "startChar": 41,
        "endLine": 79,
        "endChar": 56
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b58f1eea_6353dd06",
        "filename": "content/public/android/java/src/org/chromium/content/browser/input/ImeAdapter.java",
        "patchSetId": 2
      },
      "lineNbr": 917,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T18:28:31Z",
      "side": 1,
      "message": "could you refactor this block into a private method?",
      "range": {
        "startLine": 917,
        "startChar": 16,
        "endLine": 917,
        "endChar": 19
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06178acf_60c740d3",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T18:28:31Z",
      "side": 1,
      "message": "Some more basic test cases I\u0027d suggest:\n1) Multiple suggestions:\n- Do we get the original suggestions? Is the order as expected?\n- Select the n-th suggestion\n\n2) Menu dismissal case:\n- Input loses focus?\n- Touch other part of text?\n- JS deletes/modifies text?\n\n3) Cursor position after replacement:\n- What should happen when you replace a text far from the current caret position?\n(I think this can be covered in TextSuggestionControllerTest instead.)\n\n4) [stretch] Scrolling: does the menu follows the text position when the webpage is scrolled?\n- This may be difficult to test.",
      "range": {
        "startLine": 35,
        "startChar": 13,
        "endLine": 35,
        "endChar": 35
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5768e3a_2397c5f4",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-23T18:41:08Z",
      "side": 1,
      "message": "2) We don\u0027t dismiss the menu in the case that the input loses focus. In theory, you could tap on one spell check underline, then some JavaScript could move the cursor to another misspelled word, and you could end up replacing the wrong word. yosin@ filed a bug for this: crbug.com/736181. I think this is currently more of a theoretical concern than something that\u0027s actually causing issues in practice. For suggestion markers, we won\u0027t ever replace the wrong span, since we look for it by a unique identifier, but the replacement will fail if the cursor gets moved off the span in question.\n\nWe dismiss for touching outside the menu; it doesn\u0027t matter whether you\u0027re tapping text or not.\n\nWe don\u0027t dismiss for JS deleting/modifying text. We could, I suppose, but this issue hasn\u0027t come up in practice yet.\n\n\n4) We don\u0027t scroll the menu if the webpage is scrolled. The user can\u0027t scroll the page by touch when the menu is open, since tapping outside the menu closes it. There may be some other input device (e.g. an external keyboard) that lets you scroll it though? At one point I had code that used CursorAnchorInfo so we could track cases like this, but aelias@ said it would probably be better just to close the menu.",
      "parentUuid": "06178acf_60c740d3",
      "range": {
        "startLine": 35,
        "startChar": 13,
        "endLine": 35,
        "endChar": 35
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0892a74d_e0235362",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-23T18:44:18Z",
      "side": 1,
      "message": "3) What should happen when you replace a text far from the current caret position?\n\nThe current implementation does not support this (the replacement will fail, but the menu should close properly).",
      "parentUuid": "a5768e3a_2397c5f4",
      "range": {
        "startLine": 35,
        "startChar": 13,
        "endLine": 35,
        "endChar": 35
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd08768a_6c859766",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T18:28:31Z",
      "side": 1,
      "message": "Is this intended? 1 is the default value. If 0 is intended, please leave some comment.",
      "range": {
        "startLine": 60,
        "startChar": 39,
        "endLine": 60,
        "endChar": 40
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0222af7b_0db8fb2c",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-23T18:41:08Z",
      "side": 1,
      "message": "Oh really? It doesn\u0027t matter as long as the cursor ends up still touching the word. I\u0027ll change it to 1 if 0 is distracting.",
      "parentUuid": "cd08768a_6c859766",
      "range": {
        "startLine": 60,
        "startChar": 39,
        "endLine": 60,
        "endChar": 40
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5589da10_5100db45",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T18:28:31Z",
      "side": 1,
      "message": "Do you also need to check if the menu gets dismissed?",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 5
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47322af4_156110d0",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-23T18:41:08Z",
      "side": 1,
      "message": "I suppose that would be good to test :)",
      "parentUuid": "5589da10_5100db45",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 5
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "849951d3_563e8ddb",
        "filename": "content/public/android/javatests/src/org/chromium/content/browser/input/TextSuggestionMenuTest.java",
        "patchSetId": 2
      },
      "lineNbr": 89,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-08-23T18:28:31Z",
      "side": 1,
      "message": "I think you need to explicitly poll for the condition even for deletion.",
      "range": {
        "startLine": 89,
        "startChar": 36,
        "endLine": 89,
        "endChar": 67
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "471a7814_6dc27961",
        "filename": "services/ui/public/interfaces/ime/ime_struct_traits.cc",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2017-08-23T19:45:42Z",
      "side": 1,
      "message": "nit: rename this variable.",
      "range": {
        "startLine": 72,
        "startChar": 26,
        "endLine": 72,
        "endChar": 52
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "947b5399_ce241dda",
        "filename": "services/ui/public/interfaces/ime/ime_struct_traits.h",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2017-08-23T19:45:42Z",
      "side": 1,
      "message": "nit: rename this variable.",
      "range": {
        "startLine": 117,
        "startChar": 28,
        "endLine": 117,
        "endChar": 54
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ee4a132_ba7da268",
        "filename": "third_party/WebKit/Source/core/editing/suggestion/TextSuggestionBackendImpl.cpp",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2017-08-23T19:45:42Z",
      "side": 1,
      "message": "Should check |frame_|",
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3605187_ce45e2d5",
        "filename": "third_party/WebKit/Source/core/editing/suggestion/TextSuggestionController.cpp",
        "patchSetId": 2
      },
      "lineNbr": 314,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2017-08-23T19:45:42Z",
      "side": 1,
      "message": "This function is very complicated as it does many things. Can we split it into:\n\n1. Construct |suggestion_infos| from |node_suggestion_marker_pairs|\n2. Add an ActiveSuggestionMarker from |suggestion_infos|\n3. Pass |suggestion_infos| to text suggestion menu",
      "range": {
        "startLine": 314,
        "startChar": 31,
        "endLine": 314,
        "endChar": 49
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b3f506d_fc7b9bca",
        "filename": "third_party/WebKit/Source/core/editing/suggestion/TextSuggestionController.cpp",
        "patchSetId": 2
      },
      "lineNbr": 314,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-25T02:30:15Z",
      "side": 1,
      "message": "I don\u0027t think 2) makes sense to split out. I can split out the other two.",
      "parentUuid": "e3605187_ce45e2d5",
      "range": {
        "startLine": 314,
        "startChar": 31,
        "endLine": 314,
        "endChar": 49
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12679f15_998e4a36",
        "filename": "third_party/WebKit/Source/core/editing/suggestion/TextSuggestionController.cpp",
        "patchSetId": 2
      },
      "lineNbr": 406,
      "author": {
        "id": 1002258
      },
      "writtenOn": "2017-08-23T08:38:57Z",
      "side": 1,
      "message": "nit: Can we use ternary to use |const Color|?",
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a388fc03_25bb04a2",
        "filename": "third_party/WebKit/Source/core/editing/suggestion/TextSuggestionController.cpp",
        "patchSetId": 2
      },
      "lineNbr": 406,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-23T18:41:08Z",
      "side": 1,
      "message": "Ok",
      "parentUuid": "12679f15_998e4a36",
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e63c33c5_1ca9ed3b",
        "filename": "third_party/WebKit/Source/core/editing/suggestion/TextSuggestionInfo.h",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1002258
      },
      "writtenOn": "2017-08-23T08:38:57Z",
      "side": 1,
      "message": "Which do we want to use |int32_t| or |uint32_t| for |suggestion_index|?\n\nTextSuggestionController::ApplyTextSuggestion() takes |uint32_t| for\n|suggestion_index|.",
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b588885_4df61949",
        "filename": "third_party/WebKit/Source/core/editing/suggestion/TextSuggestionInfo.h",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-23T18:41:08Z",
      "side": 1,
      "message": "Probably uint32_t in C++...it does get cast to a signed int when we send it up to Java though.",
      "parentUuid": "e63c33c5_1ca9ed3b",
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f241f374_101d8a1d",
        "filename": "third_party/WebKit/public/platform/input_host.mojom",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1144165
      },
      "writtenOn": "2017-08-23T19:45:42Z",
      "side": 1,
      "message": "nit: Now the timer is named after \"SpellCheck\" in TextSuggestionHost, but its callback is named after \"SuggestionMenu\" in TextSuggestionBackend. Please consider some unification to reduce confusion.",
      "range": {
        "startLine": 20,
        "startChar": 2,
        "endLine": 20,
        "endChar": 26
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6230c88_61086cd1",
        "filename": "third_party/WebKit/public/platform/input_host.mojom",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1229332
      },
      "writtenOn": "2017-08-25T02:30:15Z",
      "side": 1,
      "message": "Anything that applies to both menus should be called SuggestionMenu, not SpellCheckMenu",
      "parentUuid": "f241f374_101d8a1d",
      "range": {
        "startLine": 20,
        "startChar": 2,
        "endLine": 20,
        "endChar": 26
      },
      "revId": "7f19d618ffdf2a94687d088347424f5c32952230",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}