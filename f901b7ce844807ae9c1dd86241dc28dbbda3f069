{
  "comments": [
    {
      "key": {
        "uuid": "d9602ca7_387977dd",
        "filename": "ash/link_handler_controller.cc",
        "patchSetId": 6
      },
      "lineNbr": 13,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-08-22T19:46:17Z",
      "side": 1,
      "message": "nit: \u003d default; ?",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c249675_99f00749",
        "filename": "ash/link_handler_controller.cc",
        "patchSetId": 6
      },
      "lineNbr": 13,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-08-23T01:39:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9602ca7_387977dd",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89e8c3c2_3d11f6a4",
        "filename": "ash/link_handler_controller.cc",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-08-22T19:46:17Z",
      "side": 1,
      "message": "same",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ac051ed_1e60cfa9",
        "filename": "ash/link_handler_controller.cc",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-08-23T01:39:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89e8c3c2_3d11f6a4",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d20dcc46_f85cf3de",
        "filename": "ash/public/interfaces/link_handler.mojom",
        "patchSetId": 6
      },
      "lineNbr": 8,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-08-22T19:46:17Z",
      "side": 1,
      "message": "sort?",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e43bece_1c2e8c3f",
        "filename": "ash/public/interfaces/link_handler.mojom",
        "patchSetId": 6
      },
      "lineNbr": 8,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-08-23T01:39:57Z",
      "side": 1,
      "message": "Done (I guess clang format doesn\u0027t hit mojom files)",
      "parentUuid": "d20dcc46_f85cf3de",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "73fe9486_ec4b49eb",
        "filename": "ash/shell.cc",
        "patchSetId": 6
      },
      "lineNbr": 637,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-08-22T19:46:17Z",
      "side": 1,
      "message": "base::MakeUnique\u003c\u003e?",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1faccc71_88ad0bf0",
        "filename": "ash/shell.cc",
        "patchSetId": 6
      },
      "lineNbr": 637,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-08-23T01:39:57Z",
      "side": 1,
      "message": "I don\u0027t know why the rest of these use MakeUnique which is much more verbose, and generally more useful when you\u0027re creating a temp for a parameter. std::unique_ptr still has a bare pointer ctor so that seems more appropriate here. That said I don\u0027t even know why I made this a unique_ptr except to follow convention; we can actually just make it a normal member variable.",
      "parentUuid": "73fe9486_ec4b49eb",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6fa1329_640dff1c",
        "filename": "chrome/browser/renderer_context_menu/open_with_menu_factory_ash.cc",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-08-22T19:46:17Z",
      "side": 1,
      "message": "I tested your CL on my Chromebook with the link_url_ fix. It worked mostly well, but sometimes (not always) I saw empty items in the menu. I needed to right-click the same link 2-3 times to properly show app names and icons.\n\nSo there seems to be a code path where this callback is not called at all. Can you take a look at the ash or component code again?\n\nScreenshots (please do not share externally):\nhttps://drive.google.com/open?id\u003d0B0PiDA6D07IvNWpfbHJvb2w4NnM (empty items)\nhttps://drive.google.com/open?id\u003d0B0PiDA6D07IvR2paZWVpR3k2OFU (after 2-3 right clicks)",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1120b8b1_7908406a",
        "filename": "chrome/browser/renderer_context_menu/open_with_menu_factory_ash.cc",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-08-23T01:39:57Z",
      "side": 1,
      "message": "thanks for the testing. I pored over the code (found a few cleanups but nothing that seems related to this bug) and can\u0027t see where this would fail to be called. I added some println debugging statements in the latest patchset. Would it be possible to run the latest patchset and share the output for a context menu run where the icons fail to appear?",
      "parentUuid": "f6fa1329_640dff1c",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8527e11d_e6e140ae",
        "filename": "chrome/browser/renderer_context_menu/open_with_menu_factory_ash.cc",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1000303
      },
      "writtenOn": "2017-08-23T17:07:38Z",
      "side": 1,
      "message": "Done.\n\nWhen the issue reproduced, the log was like this:\n\n[12288:12288:0823/095647.459047:ERROR:link_handler_model_impl.cc(74)] Not implemented reached in bool arc::LinkHandlerModelImpl::Init(const GURL \u0026)\n[12288:12288:0823/095647.467106:ERROR:link_handler_model_impl.cc(110)] Not implemented reached in void arc::LinkHandlerModelImpl::OnUrlHandlerList(std::vector\u003cmojom::IntentHandlerInfoPtr\u003e)0\n[12288:12288:0823/095647.467155:ERROR:link_handler_model_impl.cc(145)] Not implemented reached in void arc::LinkHandlerModelImpl::NotifyObserver(std::unique_ptr\u003cArcIntentHelperBridge::ActivityToIconsMap\u003e)3\n[12288:12288:0823/095647.467229:ERROR:validation_errors.cc(76)] Invalid message: VALIDATION_ERROR_UNEXPECTED_NULL_POINTER (null icon field in LinkHandlerInfo)\n[12288:12288:0823/095647.501188:ERROR:link_handler_model_impl.cc(145)] Not implemented reached in void arc::LinkHandlerModelImpl::NotifyObserver(std::unique_ptr\u003cArcIntentHelperBridge::ActivityToIconsMap\u003e)3\n\n\nWhen it didn\u0027t repro, the log was:\n\n[12288:12288:0823/100019.742903:ERROR:link_handler_model_impl.cc(74)] Not implemented reached in bool arc::LinkHandlerModelImpl::Init(const GURL \u0026)\n[12288:12288:0823/100019.749428:ERROR:link_handler_model_impl.cc(145)] Not implemented reached in void arc::LinkHandlerModelImpl::NotifyObserver(std::unique_ptr\u003cArcIntentHelperBridge::ActivityToIconsMap\u003e)3\n[12288:12288:0823/100019.749788:ERROR:link_handler_model_impl.cc(110)] Not implemented reached in void arc::LinkHandlerModelImpl::OnUrlHandlerList(std::vector\u003cmojom::IntentHandlerInfoPtr\u003e)1\n[12288:12288:0823/100019.750387:ERROR:open_with_menu_factory_ash.cc(89)] Not implemented reached in virtual void OpenWithMenuObserver::OnLinkHandlerModelChanged(std::vector\u003cash::mojom::LinkHandlerInfoPtr\u003e)3",
      "parentUuid": "1120b8b1_7908406a",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "992624b0_33891be6",
        "filename": "chrome/browser/renderer_context_menu/open_with_menu_factory_ash.cc",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2017-08-23T21:54:27Z",
      "side": 1,
      "message": "thanks, that helps. ARC is sending back empty images (and then presumably updating with non-null images shortly after). Luckily all we have to do is allow empty/null images (see link_handler.mojom)",
      "parentUuid": "8527e11d_e6e140ae",
      "revId": "f901b7ce844807ae9c1dd86241dc28dbbda3f069",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}