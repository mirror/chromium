{
  "comments": [
    {
      "key": {
        "uuid": "ed67ad18_aa6c510f",
        "filename": "third_party/WebKit/Source/core/dom/ClassicPendingScript.cpp",
        "patchSetId": 3
      },
      "lineNbr": 92,
      "author": {
        "id": 1115924
      },
      "writtenOn": "2017-06-01T01:45:12Z",
      "side": 1,
      "message": "If ready_state_ was kWaitingForStreaming, then ScriptRunner receives two notifications from StreamingFinished:\none via FinishWaitingForStreaming() -\u003e PendingScript -\u003e ScriptLoader\u003d\u003dPendingScriptClient -\u003e ScriptRunner (normal ready notification), and\none directly via NotifyScriptStreamerFinished().\n\nI think ScriptRunner should be notified only once (basically sending two notifications are prone to errors if some state changes occur in the first notification and the second notification is sent without considering the state changes), but haven\u0027t figured out clear semantics for that.\nFor a short-term, probably we can avoid NotifyScriptStreamerFinished() call when kWaitingForStreaming and let FinishWaitingForStreaming() handle the streaming finish appropriately just as before.",
      "range": {
        "startLine": 92,
        "startChar": 4,
        "endLine": 92,
        "endChar": 43
      },
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c1cf574_8cdba96e",
        "filename": "third_party/WebKit/Source/core/dom/ClassicPendingScript.cpp",
        "patchSetId": 3
      },
      "lineNbr": 92,
      "author": {
        "id": 1115949
      },
      "writtenOn": "2017-06-01T07:18:45Z",
      "side": 1,
      "message": "Maybe we should move this to FinishReadyStreaming()",
      "parentUuid": "ed67ad18_aa6c510f",
      "range": {
        "startLine": 92,
        "startChar": 4,
        "endLine": 92,
        "endChar": 43
      },
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcecf834_3ebe75e1",
        "filename": "third_party/WebKit/Source/core/dom/ClassicPendingScript.cpp",
        "patchSetId": 3
      },
      "lineNbr": 92,
      "author": {
        "id": 1117099
      },
      "writtenOn": "2017-06-01T08:59:09Z",
      "side": 1,
      "message": "Hmm. Not sure about the two notifications. My assumptions are:\n- Each script would be streamed at most once.\n- This is enforced in both SetStreamer and StartStreamingIfPossible, which check for !streamer_.\n- Since StreamingFinished is the streamer callback (now separate from the \u0027internal\u0027 use of FinishWaitingForStreaming), it would be called once when for each streamer_.\n- Since we\u0027ll have only one streamer_ (points 1 + 2), we should only have one callback.",
      "parentUuid": "6c1cf574_8cdba96e",
      "range": {
        "startLine": 92,
        "startChar": 4,
        "endLine": 92,
        "endChar": 43
      },
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68eceac7_c13961cf",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.cpp",
        "patchSetId": 3
      },
      "lineNbr": 278,
      "author": {
        "id": 1115949
      },
      "writtenOn": "2017-06-01T07:18:45Z",
      "side": 1,
      "message": "Can we put this under RuntimeEnabledFlag controlled by Finch?\nI strongly encourage this as we can have a precise impact measurement.",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a658c62_08815abe",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.cpp",
        "patchSetId": 3
      },
      "lineNbr": 278,
      "author": {
        "id": 1117099
      },
      "writtenOn": "2017-06-01T08:59:09Z",
      "side": 1,
      "message": "I think you\u0027re right.\n\nAlthough last time I tried, the results were quite noisy. :-]",
      "parentUuid": "68eceac7_c13961cf",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ea56649_38706042",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.cpp",
        "patchSetId": 3
      },
      "lineNbr": 285,
      "author": {
        "id": 1115949
      },
      "writtenOn": "2017-06-01T07:18:45Z",
      "side": 1,
      "message": "if (currently_streamed_script_)\n  return;\n\nfor (auto\u0026 async_script : async_scripts_to_execute_soon_) {\n  if (TryStream(async_script, AsynchronousScript))\n    return;\n}",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c67d64d3_8db95b5f",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.cpp",
        "patchSetId": 3
      },
      "lineNbr": 285,
      "author": {
        "id": 1117099
      },
      "writtenOn": "2017-06-07T18:01:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ea56649_38706042",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0aff8f9_6ee4a566",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.cpp",
        "patchSetId": 3
      },
      "lineNbr": 307,
      "author": {
        "id": 1115949
      },
      "writtenOn": "2017-06-01T07:18:45Z",
      "side": 1,
      "message": "return success;",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e1de0cf_e9f07d13",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.cpp",
        "patchSetId": 3
      },
      "lineNbr": 307,
      "author": {
        "id": 1117099
      },
      "writtenOn": "2017-06-07T18:01:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0aff8f9_6ee4a566",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "08f30d62_05147896",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.h",
        "patchSetId": 3
      },
      "lineNbr": 88,
      "author": {
        "id": 1115949
      },
      "writtenOn": "2017-06-01T07:18:45Z",
      "side": 1,
      "message": "Please avoid bool. Use enum:\nhttps://docs.google.com/document/d/1ZQLiQKw9hCOyDDhDS4JhckhuiJmLqSbw9FLfySMyxgU/edit#heading\u003dh.n3iwacnythgz",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3dc9fa5b_c9b8be64",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.h",
        "patchSetId": 3
      },
      "lineNbr": 88,
      "author": {
        "id": 1117099
      },
      "writtenOn": "2017-06-07T18:01:50Z",
      "side": 1,
      "message": "Ack. But due to refactoring, this no longer requires a parameter at all. :)",
      "parentUuid": "08f30d62_05147896",
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3048f2a4_59d7af37",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.h",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1115949
      },
      "writtenOn": "2017-06-01T07:18:45Z",
      "side": 1,
      "message": "Would you add a one-line description comment to this member func?\n(and/or more descriptive name if possible, I don\u0027t have a good suggestion)",
      "range": {
        "startLine": 89,
        "startChar": 23,
        "endLine": 89,
        "endChar": 0
      },
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27668bc4_2f5e4d04",
        "filename": "third_party/WebKit/Source/core/dom/ScriptRunner.h",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1117099
      },
      "writtenOn": "2017-06-07T18:01:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3048f2a4_59d7af37",
      "range": {
        "startLine": 89,
        "startChar": 23,
        "endLine": 89,
        "endChar": 0
      },
      "revId": "ae1df96c046a69c32998722123d412abf883062d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}