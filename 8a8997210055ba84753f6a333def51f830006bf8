{
  "comments": [
    {
      "key": {
        "uuid": "457847d6_e1963cf4",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1230,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-10-18T23:01:21Z",
      "side": 0,
      "message": "Wow, this is super complex logic for how to show the tab (especially the else branch).  Will using NEW_FOREGROUND_TAB be a sufficient replacement?  (I hope so.)",
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e58fc4ca_ff432524",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1230,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2017-10-19T21:29:40Z",
      "side": 0,
      "message": "I think so.  The new code should mostly mimic the else branch here - |tab_strip_model()-\u003eAddWebContents(...)| is also called in case of NEW_FOREGROUND_TAB toward the end of chrome::Navigate.  OTOH, I am not really sure\n\n1) why the code below special-cases CanSupportWindowFeature(FEATURE_TABSTRIP).\n2) why explicit calls to SetBounds and Show are needed.\n\nDo you think we can ask somebody else to take a look here?  FWIW, it seems to work fine.",
      "parentUuid": "457847d6_e1963cf4",
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9367de7d_a10e0416",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1230,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-10-20T19:33:28Z",
      "side": 0,
      "message": "I think it\u0027s worth getting sky@\u0027s thoughts on this (and comparing to the new code you\u0027ve added in WebContentsImpl::ViewSource).",
      "parentUuid": "e58fc4ca_ff432524",
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d8d4335_b1978a2e",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1230,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-20T22:52:32Z",
      "side": 0,
      "message": "I don\u0027t think the else branch is exactly the same. It looks like NEW_FOREGROUND_TAB when used with a browser that doesn\u0027t have a tabstrip will search for a tabbed browser. The code nere creates a new one.",
      "parentUuid": "9367de7d_a10e0416",
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3d3cbdc_f3f088d0",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1230,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2017-10-23T22:40:03Z",
      "side": 0,
      "message": "I note that before https://codereview.chromium.org/5716003/patch/16001/17003 we just used NEW_FOREGROUND_TAB.  It seems to me that the code here copied the behavior of Browser::DuplicateContentsAt in https://codereview.chromium.org/5716003/patch/16001/17008, but that the copying was mostly accidental / was not core to the changes being made to support HTTP POST.\n\nI think the new behavior (opening a view-source of a popup in an existing rather than new tabbed browser) is okay from UX perspective.  This is based on 1) the note that this was the behavior long time ago [and changing this behavior seems accidental] and 2) the behavior seemed okay when I tried it manually at http://www.popuptest.com/goodpopups.html",
      "parentUuid": "9d8d4335_b1978a2e",
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "69bd62bc_df587223",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1263,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-20T22:52:32Z",
      "side": 0,
      "message": "I don\u0027t see this in the new code?",
      "range": {
        "startLine": 1262,
        "startChar": 2,
        "endLine": 1263,
        "endChar": 62
      },
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1550a306_0130002c",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1263,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2017-10-23T22:40:03Z",
      "side": 0,
      "message": "Yes.  Similarly to the above, I think inclusion of this call was accidentally copied from Browser::DuplicateContentsAt in https://codereview.chromium.org/5716003/patch/16001/17008 and is not core to the changes made in this old CL.\n\nI think not including this call in the new code is okay.  If session_service work is important, then it should be taken care of for *all* NEW_FOREGROUND_TAB actions (e.g. also for middle-click).",
      "parentUuid": "69bd62bc_df587223",
      "range": {
        "startLine": 1262,
        "startChar": 2,
        "endLine": 1263,
        "endChar": 62
      },
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c68b667_2d2a54c1",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1263,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-24T14:02:34Z",
      "side": 0,
      "message": "The difference between this code and a middle click is that it clones the webcontents. No other action does that. This is why there is an explicit call to SessionService.",
      "parentUuid": "1550a306_0130002c",
      "range": {
        "startLine": 1262,
        "startChar": 2,
        "endLine": 1263,
        "endChar": 62
      },
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "34e43ee9_728ecf2f",
        "filename": "chrome/browser/ui/browser_commands.cc",
        "patchSetId": 15
      },
      "lineNbr": 1263,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2017-10-25T16:52:38Z",
      "side": 0,
      "message": "So - if we created a brand new WebContents, then there would be no need to call into the SessionService?  Arthur is taking this step in a follow-up CL @ https://chromium-review.googlesource.com/c/chromium/src/+/725812, so maybe I can address the feedback here by integrating his changes into the current CL.\n\nDoes that sound good?",
      "parentUuid": "8c68b667_2d2a54c1",
      "range": {
        "startLine": 1262,
        "startChar": 2,
        "endLine": 1263,
        "endChar": 62
      },
      "revId": "8a8997210055ba84753f6a333def51f830006bf8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}