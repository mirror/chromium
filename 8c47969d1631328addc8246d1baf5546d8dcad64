{
  "comments": [
    {
      "key": {
        "uuid": "86e4c97e_3def6e82",
        "filename": "chrome/app/chrome_exe_main_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 233,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-17T11:06:07Z",
      "side": 1,
      "message": "Hmm, we have a base::Feature flag for this, but I guess that hasn\u0027t yet been initialized by this point?",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5f2afa9_f6f58767",
        "filename": "chrome/app/chrome_exe_main_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 233,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "Yes, the feature flag is not initialized at this point. I am still trying to find a way to solve this.",
      "parentUuid": "86e4c97e_3def6e82",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e6cdd05_7d1e345b",
        "filename": "chrome/app/chrome_exe_main_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 233,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-26T00:48:47Z",
      "side": 1,
      "message": "Any suggestions on how to execute this piece of code behind a flag please? base::Feature flag hasn\u0027t been initialized here yet, so I cannot run chrome using something like \"chrome.exe --enable-features\u003dNativeNotifications\".",
      "parentUuid": "b5f2afa9_f6f58767",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb763108_f2e49c17",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 23,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-10-17T12:00:50Z",
      "side": 1,
      "message": "s/complie/compile/",
      "range": {
        "startLine": 23,
        "startChar": 45,
        "endLine": 23,
        "endChar": 53
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d42cb99_c5ae4168",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 23,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fb763108_f2e49c17",
      "range": {
        "startLine": 23,
        "startChar": 45,
        "endLine": 23,
        "endChar": 53
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0d67953_ce4c5714",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 104,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-17T11:06:07Z",
      "side": 1,
      "message": "nit: here and elsewhere: hacker_case for variable names",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d736f881_def0fadc",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 104,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0d67953_ce4c5714",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "efb302ac_b19538a5",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 124,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-17T11:06:07Z",
      "side": 1,
      "message": "I think this is a use-after-free. The result of GetBrowserModelId is a base::string16 that goes out of scope before the value is used. (And thus gets destructed.)",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd137766_9894c5c8",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 124,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "That makes sense. Done.",
      "parentUuid": "efb302ac_b19538a5",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b8101c0_07619423",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 189,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-17T11:06:07Z",
      "side": 1,
      "message": "Does it really have to go in the Start Menu? That may be rather intrusive. What happens after the user deletes such a shortcut?",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3ee4837_a3a08e69",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 189,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "afaik, that app must have a shortcut on the start menu for this to work. If the user deletes the shortcut, we\u0027ll try to install a new one; if the app has been registered already, we simply exist early in this method. The \"if (fileExists) ... \" code below handles this.",
      "parentUuid": "9b8101c0_07619423",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e55987d_9a04e9e0",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 189,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-19T16:05:54Z",
      "side": 1,
      "message": "Hmm we\u0027ll definitely want to include UX people on that. Intuitively that feels really user hostile to me. Fine as a stepping stone, but something we need to refine for production.",
      "parentUuid": "b3ee4837_a3a08e69",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28cefe42_c6a881fe",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 189,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-26T00:48:47Z",
      "side": 1,
      "message": "Actually, if the shortcut has been created during installation already, we just need to update proper information for that shortcut. If the shortcut is somehow missing (e.g., deleted by the user), then we need to recreate one with proper information. There won\u0027t be any shortcuts created with strange names.",
      "parentUuid": "9e55987d_9a04e9e0",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8962d305_38467f94",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 223,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-17T01:05:57Z",
      "side": 1,
      "message": "The code commented out in RegisterActivator() and UnregisterActivator() below generated the linker errors. Note that any single line of them generates all those linker errors. The Module class is in \\winrt\\wrl\\module.h",
      "range": {
        "startLine": 221,
        "startChar": 2,
        "endLine": 223,
        "endChar": 72
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74be4eee_c255b348",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 223,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-10-17T12:00:50Z",
      "side": 1,
      "message": "Hmm... I\u0027m not sure how to proceed. Hoping Rob knows. I\u0027ll comment on the doc.",
      "parentUuid": "8962d305_38467f94",
      "range": {
        "startLine": 221,
        "startChar": 2,
        "endLine": 223,
        "endChar": 72
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8abd5e3_c3fa17d7",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 250,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-10-17T12:00:50Z",
      "side": 1,
      "message": "s/has_reg/has_registered_/",
      "range": {
        "startLine": 250,
        "startChar": 7,
        "endLine": 250,
        "endChar": 15
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06d115eb_b04f3f65",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 250,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a8abd5e3_c3fa17d7",
      "range": {
        "startLine": 250,
        "startChar": 7,
        "endLine": 250,
        "endChar": 15
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eb359f8d_97ab119b",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 253,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-10-17T12:00:50Z",
      "side": 1,
      "message": "Wondering if this can this be returned back to the caller of PrepareForNativeNotification for ownership somewhere. Or does that break everything?\n\nAlso:\ns/activator_reg/activator_register/",
      "range": {
        "startLine": 253,
        "startChar": 34,
        "endLine": 253,
        "endChar": 35
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "627b3b26_dc7064e2",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 253,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "Hmm, I am not sure if we need to do the ownership transfer as it\u0027s used only once in PrepareForNativeNotification().",
      "parentUuid": "eb359f8d_97ab119b",
      "range": {
        "startLine": 253,
        "startChar": 34,
        "endLine": 253,
        "endChar": 35
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "611c8fe4_8368340c",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 253,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-10-19T14:58:08Z",
      "side": 1,
      "message": "Well, my worry is about the lifetime of the activator. It looks like it will survive until shutdown -- does that mean we can have attempts to call into our code while we\u0027re being torn down, resulting in shutdown crashes?",
      "parentUuid": "627b3b26_dc7064e2",
      "range": {
        "startLine": 253,
        "startChar": 34,
        "endLine": 253,
        "endChar": 35
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ee04b33_1eeb0871",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 253,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-26T00:48:47Z",
      "side": 1,
      "message": "I did try to make activator_reg a local variable in PrepareForNativeNotification() using the code snippet below:\n\nauto activator_reg \u003d std::make_unique\u003cActivatorRegister\u003e();\nactivator_reg-\u003eRun();\n\nHowever, after the change, the Activate() method in this file seems not to be called when Chrome is triggered to launch by clicking the toast notification, which is undesired. The reason behind this is unclear though.",
      "parentUuid": "611c8fe4_8368340c",
      "range": {
        "startLine": 253,
        "startChar": 34,
        "endLine": 253,
        "endChar": 35
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51994dd6_6f58f511",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 258,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-17T01:05:57Z",
      "side": 1,
      "message": "This fixed the linker errors #1 and #2 in the shared google doc.",
      "range": {
        "startLine": 257,
        "startChar": 0,
        "endLine": 258,
        "endChar": 72
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00683d52_94838ffc",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 259,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-17T11:06:07Z",
      "side": 1,
      "message": "I guess we\u0027d want to add this to core_winrt_util.h?",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6346ef8d_905f10f3",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 259,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-10-17T12:00:50Z",
      "side": 1,
      "message": "I suspect Rob Liao has some construct in mind to use here that does the same thing, but if not then I think we should add an Initialize function in core_winrt_utils.h that does the LoadLib/GetProcAddress dance. Then we can think about whether to add a RoInitializeWrapper either there or as a separate .h/.cc pair.\n\nOnce you move it into base, you can use base::RoInitializeWrapper (and drop the \u00272\u0027 suffix).",
      "parentUuid": "00683d52_94838ffc",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7a6acdb_a9c7a29d",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 259,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "Thanks for the suggestions~\n\nI\u0027ll definitely clean this up after I get everything here to work. Currently, I just want to stay consistent as much as possible with the original implementation in the Windows header files. In this way, I can make sure there are no bugs introduced in those code and then focus on the code that are not working now.",
      "parentUuid": "6346ef8d_905f10f3",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "281c33d8_5c645454",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 260,
      "author": {
        "id": 1002500
      },
      "writtenOn": "2017-10-17T12:00:50Z",
      "side": 1,
      "message": "Don\u0027t you need to initialize _hr? \nAlso:\ns/_hr/hr_/",
      "range": {
        "startLine": 260,
        "startChar": 10,
        "endLine": 260,
        "endChar": 13
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d2ef95e_a1b00208",
        "filename": "chrome/app/chrome_native_notification_prep_win.cc",
        "patchSetId": 24
      },
      "lineNbr": 260,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "RoInitializeWrapper2 is a reimplementaton of RoInitializeWrapper in corewrappers.h.\nThere\u0027s no initialization for this variable in the original implementation, so I guess it\u0027s working fine although I admit that the variable \"should\" be initialized explicitly. Anyway, I\u0027ve added the initialization.",
      "parentUuid": "281c33d8_5c645454",
      "range": {
        "startLine": 260,
        "startChar": 10,
        "endLine": 260,
        "endChar": 13
      },
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43ed6a24_cd598278",
        "filename": "chrome/app/chrome_native_notification_prep_win.h",
        "patchSetId": 24
      },
      "lineNbr": 4,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-10-17T11:06:07Z",
      "side": 1,
      "message": "micro nit: blank line after the copyright header. In the .cc too",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0ed67ed_20222663",
        "filename": "chrome/app/chrome_native_notification_prep_win.h",
        "patchSetId": 24
      },
      "lineNbr": 4,
      "author": {
        "id": 1228990
      },
      "writtenOn": "2017-10-19T01:18:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "43ed6a24_cd598278",
      "revId": "8c47969d1631328addc8246d1baf5546d8dcad64",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}