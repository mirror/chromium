// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

module ash.mojom;

import "ui/gfx/image/mojo/image.mojom";
import "ui/message_center/mojo/notification.mojom";
import "ui/message_center/mojo/notifier_settings.mojom";
import "mojo/common/string16.mojom";

struct NotifierUiData {
  message_center.mojom.NotifierId notifier_id;

  mojo.common.mojom.String16 name;

  bool has_advanced_settings;

  bool enabled;

  gfx.mojom.ImageSkia? icon;
};

// The message center controller funnels notification requests from the client
// to the MessageCenter.
interface AshMessageCenterController {
  SetClient(associated AshMessageCenterClient client);

  ShowClientNotification(message_center.mojom.Notification notification);

  UpdateNotifierIcon(message_center.mojom.NotifierId notifier_id,
                     gfx.mojom.ImageSkia icon);

  NotifierEnabledChanged(message_center.mojom.NotifierId notifier_id,
                         bool enabled);
};

// The message center client interface mimics
// message_center::NotificationDelegate. The ID strings match the id passed in
// |notification| in ShowClientNotification and the format of the ID is up to
// the client.
interface AshMessageCenterClient {
  // Called when a notification previously displayed by the client is closed.
  HandleNotificationClosed(string id, bool by_user);

  // Called when the body of a notification is clicked.
  HandleNotificationClicked(string id);

  // Called when a notification that has buttons (e.g., "Learn more") receives a
  // click on one of the buttons.
  HandleNotificationButtonClicked(string id, int32 button_index);

  // FIXME
  SetNotifierEnabled(message_center.mojom.NotifierId notifier_id, bool enabled);

  // FIXME
  HandleNotifierAdvancedSettingsRequested(
      message_center.mojom.NotifierId notifier_id);

  GetNotifierList() => (array<NotifierUiData> notifiers);
};
