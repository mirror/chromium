{
  "comments": [
    {
      "key": {
        "uuid": "e8485bf9_f2232ea2",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 300,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-18T15:09:38Z",
      "side": 1,
      "message": "I wonder if a unit test would have sufficed...",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73cd48b1_b2f9023f",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 300,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-10-18T17:17:16Z",
      "side": 1,
      "message": "that was my initial attempt, but found that it would be hard to achieve desired result without test to be too synthetic.",
      "parentUuid": "e8485bf9_f2232ea2",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "957cbdf0_1618197e",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 321,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-18T15:09:38Z",
      "side": 1,
      "message": "This should probably be controller-\u003eFlushForTesting() to avoid flakes.\n(forces CLC to send mojo messages to Ash to update the ShelfModel there)",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf3f6166_eefc062f",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 321,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-10-18T17:17:16Z",
      "side": 1,
      "message": "Good to know. Thanks!",
      "parentUuid": "957cbdf0_1618197e",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14f24cff_399859fd",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 326,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-18T15:09:38Z",
      "side": 1,
      "message": "Bummer, I\u0027d support making ShelfButton\u0027s overrides match Button visibility. Or better yet, avoid using Button here and avoid changing override visibility and remove the base_event_utils.h and button.h includes by using EventGenerator instead of calling OnMouse* below.",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dd68be90_8a777fd3",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 326,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-10-18T17:17:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "14f24cff_399859fd",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea9eeaa7_a1d66cbe",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-18T15:09:38Z",
      "side": 1,
      "message": "nit: s/center/point/ or actually find the center \u003d button-\u003ebounds().CenterPoint();",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c1b192d3_ee7393de",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-10-18T17:17:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ea9eeaa7_a1d66cbe",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "914206e4_d001b6ca",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-18T15:09:38Z",
      "side": 1,
      "message": "This should probably also flush a binding to avoid flakes, I guess we need a new ash::ShelfItemDelegate::FlushForTesting, since its binding is used for item selection...",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "285afc57_ef633b85",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1136699
      },
      "writtenOn": "2017-10-18T17:17:16Z",
      "side": 1,
      "message": "I did like this but following just hangs:\n\n  controller-\u003eshelf_model()-\u003eGetShelfItemDelegate(ash::ShelfID(app_id))-\u003eFlushForTesting();\n\nvoid ShelfItemDelegate::FlushForTesting() {\n  binding_.FlushForTesting();\n}",
      "parentUuid": "914206e4_d001b6ca",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80f7c378_ecc47d43",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-18T17:45:50Z",
      "side": 1,
      "message": "Ah, that\u0027s almost right, but I think it should flush Ash\u0027s ShelfItemDelegate, not Chrome\u0027s:\n  ash::Shell::Get()-\u003eshelf_model()-\u003eGetShelfItemDelegate(ash::ShelfID(app_id))-\u003eFlushForTesting();\nAnd that call probably belongs before the AppAnimatedWaiter (ie. notify Chrome before making Chrome wait)\n(or perhaps the AppAnimatedWaiter isn\u0027t needed at all with this test case, that\u0027d be even better)\nThe test should not need to flush Chrome\u0027s ShelfItemDelegate to execute the callback.\n\nIt would be good to run this test a bunch locally to help make sure it doesn\u0027t flake:\nbrowser_tests --ozone-platform\u003d\"headless\" --gtest_break_on_failure --gtest_repeat\u003d100 --gtest_filter\u003dArcAppDeferredLauncherBrowserTest.StartAppDeferredFromShelfButton",
      "parentUuid": "285afc57_ef633b85",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0406b3e5_bfd42666",
        "filename": "chrome/browser/ui/ash/launcher/arc_app_launcher_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1136695
      },
      "writtenOn": "2017-10-18T18:23:53Z",
      "side": 1,
      "message": "Yep, I forgot that we have diff models :) Anyway this way does not work. Binding is discarded after clicking the button (LaunchApp replaces the controller) and if I try to flash I get exception.\nBrowserTestBase received signal: Segmentation fault. Backtrace:\n#0 0x7fccfdd52ebd base::debug::StackTrace::StackTrace()\n#1 0x7fccfdd5143c base::debug::StackTrace::StackTrace()\n#2 0x0000062c7aaf content::(anonymous namespace)::DumpStackTraceSignalHandler()\n#3 0x7fcce2736cb0 \u003cunknown\u003e\n#4 0x7fccf9c045d3 mojo::internal::ControlMessageProxy::FlushForTesting()\n#5 0x7fccf9c0dd6c mojo::InterfaceEndpointClient::FlushForTesting()\n#6 0x7fccf9bf8811 mojo::internal::BindingStateBase::FlushForTesting()\n#7 0x7fcceddff675 mojo::Binding\u003c\u003e::FlushForTesting()\n#8 0x7fcceddfe605 ash::ShelfItemDelegate::FlushForTesting()\n\n\nYes, AppAnimatedWaiter is very optional for this test. Can remove.\n\nDone 100 tests.",
      "parentUuid": "80f7c378_ecc47d43",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b344c7b_98015e33",
        "filename": "chrome/browser/ui/ash/launcher/chrome_launcher_controller_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1001118
      },
      "writtenOn": "2017-10-18T15:09:38Z",
      "side": 1,
      "message": "nit: Remove this, move the defaults to SelectShelfItem and inline calls to that function throughout this file. Or add a TODO...",
      "revId": "c872b753606ca8551fb2ec90d980ec6e227bc69f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}