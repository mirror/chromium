{
  "comments": [
    {
      "key": {
        "uuid": "d3b00ac6_e979d0b1",
        "filename": "chrome/browser/ui/blocked_content/popup_blocker_tab_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 167,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-24T21:05:42Z",
      "side": 1,
      "message": "This function looks like a near-dupe of the one above, and if the provided disposition is CURRENT_TAB, it ought to behave the same way as the one above (see next comment).\n\nAccordingly, I\u0027d combine the two, by eliminating the one-arg version.",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc09d3a2_78263853",
        "filename": "chrome/browser/ui/blocked_content/popup_blocker_tab_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 167,
      "author": {
        "id": 1232454
      },
      "writtenOn": "2017-07-25T06:35:29Z",
      "side": 1,
      "message": "I agree. This is quite dupe. What I concerned were\n1. I thought this won\u0027t be used in android and I didn\u0027t want to affect android version. That\u0027s also why I guarded this with OS_ANDROID.\n2. Like you commented, I thought this version doesn\u0027t send IPC message; please see comments below.\n\nI\u0027m not sure about these. Please give me your ideas on these.",
      "parentUuid": "d3b00ac6_e979d0b1",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4afc0c3_0a7b0398",
        "filename": "chrome/browser/ui/blocked_content/popup_blocker_tab_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 167,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-25T06:53:13Z",
      "side": 1,
      "message": "I think (1) prioritizes \"make this change safe\" over the long-term health of the code.  There\u0027s no obvious reason Android should differ.  For (2), see below.",
      "parentUuid": "fc09d3a2_78263853",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0300cbe9_824e6091",
        "filename": "chrome/browser/ui/blocked_content/popup_blocker_tab_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 178,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-24T21:05:42Z",
      "side": 1,
      "message": "Why don\u0027t you need the SetWindowFeatures IPC here the way the other function does?",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea8bea43_b0573276",
        "filename": "chrome/browser/ui/blocked_content/popup_blocker_tab_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 178,
      "author": {
        "id": 1232454
      },
      "writtenOn": "2017-07-25T06:35:29Z",
      "side": 1,
      "message": "As far as I understand, this message is sent only when the contents is opened in popup window. And WindowFeature seems to have visibility of toolbar and so on. If we open the blocked contents in a tabbed browser, WindowFeature will say wrong to webview. I can adjust window features based on disposition but I thought this needn\u0027t be sent as we open the contents in alternative disposition. WDYT?",
      "parentUuid": "0300cbe9_824e6091",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1b56c34_2f5a3787",
        "filename": "chrome/browser/ui/blocked_content/popup_blocker_tab_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 178,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-25T06:53:13Z",
      "side": 1,
      "message": "I see, so this is what makes the new window be a \"popup-style\" window.  That wasn\u0027t obvious to me as a reader -- clearly, that should have been documented.\n\nI think what we want is for dispositions like NEW_WINDOW to mean \"new normal window\" and the default CURRENT_TAB to mean \"new popup window\".  So something like this:\n\n  const bool open_as_popup_window \u003d disposition \u003d\u003d CURRENT_TAB;\n  if (!open_as_popup_window)\n    params.disposition \u003d disposition;\n\n  ... code to do the navigation goes here\n\n  // Make popup windows actually have the features of a popup window (standard\n  // frame, no tabstrip, etc.).\n  if (open_as_popup_window) {\n    ... send IPC message",
      "parentUuid": "ea8bea43_b0573276",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87a92417_0d354c29",
        "filename": "chrome/browser/ui/cocoa/content_settings/content_setting_bubble_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 1034,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-24T21:05:42Z",
      "side": 1,
      "message": "How come you are ORing in LEFT_MOUSE_BUTTON?  I suspect that\u0027s only because of the conditional in the bubble model, which I think we don\u0027t want; see comments there.",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "255c047b_a6d18877",
        "filename": "chrome/browser/ui/cocoa/content_settings/content_setting_bubble_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 1034,
      "author": {
        "id": 1232454
      },
      "writtenOn": "2017-07-25T06:35:29Z",
      "side": 1,
      "message": "Ack. And I wanted this to do the same things with views::Link. It sets mouse flags too. But like you said, this is not necessary.",
      "parentUuid": "87a92417_0d354c29",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5cb57e68_5eb7a579",
        "filename": "chrome/browser/ui/content_settings/content_setting_bubble_model.cc",
        "patchSetId": 5
      },
      "lineNbr": 601,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-24T21:05:42Z",
      "side": 1,
      "message": "Seems like you should be able to eliminate this conditional and always call the two-arg version, since the two-arg version needs to handle CURRENT_TAB correctly, and that\u0027s what will be returned if the user merely left-clicks.  See also comments on ShowBlockedPopup().",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18b9e0c0_9459d7d1",
        "filename": "chrome/browser/ui/content_settings/content_setting_bubble_model.cc",
        "patchSetId": 5
      },
      "lineNbr": 601,
      "author": {
        "id": 1232454
      },
      "writtenOn": "2017-07-25T06:35:29Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5cb57e68_5eb7a579",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2e63bf7_e024f8be",
        "filename": "chrome/browser/ui/content_settings/content_setting_bubble_model_browsertest.cc",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-24T21:05:42Z",
      "side": 1,
      "message": "Something in this file should probably be testing that if we modifier-click a blocked popup, it is opened with the correct disposition.",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70f839dc_184cd977",
        "filename": "chrome/browser/ui/content_settings/content_setting_bubble_model_browsertest.cc",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1232454
      },
      "writtenOn": "2017-07-25T06:35:29Z",
      "side": 1,
      "message": "I agree :)",
      "parentUuid": "f2e63bf7_e024f8be",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "273ea1d0_3f07c647",
        "filename": "chrome/browser/ui/views/content_setting_bubble_contents.cc",
        "patchSetId": 5
      },
      "lineNbr": 505,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-24T21:05:42Z",
      "side": 1,
      "message": "Why do we want to explicitly close here?  It seems like if I middle-click a popup link I\u0027d probably want the dropdown to stay open so I could middle-click another?",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f69f8e76_9670b71e",
        "filename": "chrome/browser/ui/views/content_setting_bubble_contents.cc",
        "patchSetId": 5
      },
      "lineNbr": 505,
      "author": {
        "id": 1232454
      },
      "writtenOn": "2017-07-25T06:35:29Z",
      "side": 1,
      "message": "Oh I thought the opposite. If so, I need your opinion. Middle-clicking removes |blocked_popup| from popup_blocker_tab_helper now. I think we have two options here if we don\u0027t close widget.\nFirst, we can update this bubble contents to remove the link label. But this means users can\u0027t open the same link multiple times in different disposition. Second, we can create new web contents and keep the blocked contents when user uses modifier. Which one do you think is better?\n\nIf second one is better, I think it\u0027s better not to combine ShowBlockedPopup()s, cuz they\u0027ll be quite different.",
      "parentUuid": "273ea1d0_3f07c647",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2349bc66_5be6a961",
        "filename": "chrome/browser/ui/views/content_setting_bubble_contents.cc",
        "patchSetId": 5
      },
      "lineNbr": 505,
      "author": {
        "id": 1000805
      },
      "writtenOn": "2017-07-25T06:53:13Z",
      "side": 1,
      "message": "I think we should probably do the first for consistency with existing behavior.  One could make an argument that we should never remove anything from this list; but I think there\u0027s something to be said for \"this is a list of blocked popups, so if you open one, it\u0027s no longer blocked, and thus shouldn\u0027t be here\".\n\nI can\u0027t think of a great use case for allowing opening the same blocked popup multiple times with a different disposition, and I think it\u0027s OK if that\u0027s not convenient.  Duplicate Tab still exists.\n\nNote that bug 35097 already suggests that this dropdown needs to handle dynamic updates better.  It\u0027s possible that the right fix could fix that as well.  Not sure.",
      "parentUuid": "f69f8e76_9670b71e",
      "revId": "2ea9752bc376c824e727480ffa3f3502a4cbb3bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}