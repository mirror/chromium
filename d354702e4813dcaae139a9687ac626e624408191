{
  "comments": [
    {
      "key": {
        "uuid": "55a36eae_fb075a8d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-27T00:54:45Z",
      "side": 1,
      "message": "Why is this a set?\n\nThe current web share target spec states that there is only one share target in the manifest (https://wicg.github.io/web-share-target/). This might change in the future, but for now we can assume that we\u0027ll only ever get one share target (since it\u0027s a syntax error to list more than one).\n\nThe proto having a repeated field is future proof, but until we know what a multiple share target world looks like spec-wise (each ShareTarget may possibly get more fields, e.g. an identifying name to go with each target), we should stick to a single String for the share template throughout. Having just a set of strings here is almost certainly not going to match what the multiple share target world will be - +mgiuca (spec author) who I chatted with on this.\n\nIs there a case now where this set will (validly) have more than one element in it?",
      "range": {
        "startLine": 42,
        "startChar": 12,
        "endLine": 42,
        "endChar": 15
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e950d13_d670ef30",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1115963
      },
      "writtenOn": "2017-11-27T06:07:44Z",
      "side": 1,
      "message": "+1\n\n\u003e Having just a set of strings here is almost certainly not going to match what the multiple share target world will be\n\nIndeed. Because if we do allow multiple share targets, we will certainly have to add at least one more field: \"name\", which will let the user agent distinguish the different share targets in the UI by name (so this data structure will certainly need to change). Having just a set of strings representing different URL templates is nonsensical, since we would never be able to present to the user two or more URL templates without names.",
      "parentUuid": "55a36eae_fb075a8d",
      "range": {
        "startLine": 42,
        "startChar": 12,
        "endLine": 42,
        "endChar": 15
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "100eae68_9ccd68c9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/webapps/WebApkInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-12-01T03:01:58Z",
      "side": 1,
      "message": "I have changed this to just be a string. I now extract the share target info from the first activity which can handle share intents. As the spec is now, the WebAPK server will only generate WebAPKs with a single ShareActivity which can handle Android share intents.",
      "parentUuid": "4e950d13_d670ef30",
      "range": {
        "startLine": 42,
        "startChar": 12,
        "endLine": 42,
        "endChar": 15
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dbc310fd_22a990b0",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/webapps/WebApkInfoTest.java",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1117405
      },
      "writtenOn": "2017-11-13T19:55:40Z",
      "side": 1,
      "message": "Nit: How about changing WebApkTestHelper#registerWebApkWithMetaData() to have a List\u003cString\u003e as input, not List\u003cActivityInfo\u003e?",
      "range": {
        "startLine": 132,
        "startChar": 81,
        "endLine": 132,
        "endChar": 91
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c51034b_7a7a1f65",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/webapps/WebApkInfoTest.java",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-11-21T03:20:09Z",
      "side": 1,
      "message": "I think that List\u003cActivityInfo\u003e is more extensible. Given that we don\u0027t make much use of the new parameter yet, it does not really matter either way in my opinion.",
      "parentUuid": "dbc310fd_22a990b0",
      "range": {
        "startLine": 132,
        "startChar": 81,
        "endLine": 132,
        "endChar": 91
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4ca4e9c_a15bb7d1",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/webapps/WebApkInfoTest.java",
        "patchSetId": 1
      },
      "lineNbr": 371,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-27T00:54:45Z",
      "side": 1,
      "message": "Is this testing a circumstance that can actually happen at the moment (i.e. can WebAPKs have more than 2 activities - the main one and at most a single ShareTarget activity?)",
      "range": {
        "startLine": 371,
        "startChar": 16,
        "endLine": 371,
        "endChar": 72
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cbf9138_7258cbeb",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/webapps/WebApkInfoTest.java",
        "patchSetId": 1
      },
      "lineNbr": 371,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-12-01T03:01:58Z",
      "side": 1,
      "message": "Yes, this is testing a circumstance that does happen. Each WebAPK has a MainActivity and a ShareActivity. MainActivity.java does not have an intent filter for share intents",
      "parentUuid": "c4ca4e9c_a15bb7d1",
      "range": {
        "startLine": 371,
        "startChar": 16,
        "endLine": 371,
        "endChar": 72
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c38a17b6_2b7ffed2",
        "filename": "chrome/browser/android/shortcut_info.h",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 1186534
      },
      "writtenOn": "2017-11-27T00:54:45Z",
      "side": 1,
      "message": "This shouldn\u0027t be a vector until it is legal under the spec to have multiple share targets (https://wicg.github.io/web-share-target/).",
      "range": {
        "startLine": 92,
        "startChar": 2,
        "endLine": 92,
        "endChar": 29
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afaf2c39_cc4d1624",
        "filename": "chrome/browser/android/shortcut_info.h",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-12-01T03:01:58Z",
      "side": 1,
      "message": "Ok, changed this back to not a vector",
      "parentUuid": "c38a17b6_2b7ffed2",
      "range": {
        "startLine": 92,
        "startChar": 2,
        "endLine": 92,
        "endChar": 29
      },
      "revId": "d354702e4813dcaae139a9687ac626e624408191",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}