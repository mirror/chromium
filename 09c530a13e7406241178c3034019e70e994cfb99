{
  "comments": [
    {
      "key": {
        "uuid": "c96132ba_f05c9dc5",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 459,
      "author": {
        "id": 1115885
      },
      "writtenOn": "2017-12-05T23:54:49Z",
      "side": 1,
      "message": "I\u0027let the other folks (whose dayjob is chrome) but the IsDeviceUsedAsATablet() name is misleading and it might be improperly used in the future.\n\nFor example I don\u0027t see why split the original function in two at this point, what I would imagine you want here, if I understood the bug correctly is to have a heuristic that tells you the user has not pressed a hard key in N seconds and has touched the screen in the last M seconds and the rest as you have it.\n\nBut if this resolves the bug, then maybe a better name?",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4c2a4b8_24de3ff2",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 459,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2017-12-06T00:07:54Z",
      "side": 1,
      "message": "What I want to avoid for the the MQ is relying on IsWindows10TabletMode which software test if the tablet mode of windows is on/off. Please note that the tablet mode of Windows is purely aesthetic and is not sync with with the actual hardware state. For example in the case of these convertible/detachable laptops, one can use the tablet mode (by triggering it in the taskbar or settings) but the keyboard/mouse are still connected/used. This is purely a user choice.\n\nHowever the MQ should reflect the state of the hardware and not relying on the tablet mode. Reason is that user can still use Windows in \"desktop mode\" yet the keyboard/trackpad has been detached and you want website to know that the pointer is touch and hover is not possible.\n\nThe reason I split is because IsTabletDevice is used in some other call sites which I\u0027m not entirely sure want or not to trace if the device is actually used in tablet mode (the windows 10 mode).\n\nConcerning the keyboard suggestion I\u0027m not sure this is a good alternative. We already have the mechanism to detect that the keyboard/trackapad has been attached/detached/flipped, that part works well. What didn\u0027t work well and the patch fixes, is when we react from that state change we read the hardware status only not the tablet mode and then the hardware status. They may become out of sync depending what the user do.\n\nI agree the name could be better but on top of my head nothing better came. I hope I\u0027m being clearer here.",
      "parentUuid": "c96132ba_f05c9dc5",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72408229_c15fd704",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 476,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "can this code be removed in favor of adding AR_DOCKED to the propertied checked below?",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43be9618_0734ec9b",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 476,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "I don\u0027t think GetAutoRotationState fct is guaranteed to be always present. GetSystemMetrics is supported since Windows 2000.",
      "parentUuid": "72408229_c15fd704",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "343b6db4_2f55eda2",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 476,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-08T09:18:26Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "43be9618_0734ec9b",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c6ab42a_df3764cc",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 495,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "??? rotation_state is an int. how about changing line 494 to:\n    AR_STATE rotation_state \u003d 0;",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0aa9b3f_eeebac28",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 495,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5c6ab42a_df3764cc",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1866d626_a5df4e42",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "nit:\n    if (get_auto_rotation_state_func(\u0026rotation_state) \u0026\u0026\n        (rotation_state \u0026 (AR_NOT_SUPPORTED | AR_LAPTOP | AR_NOSENSOR)) !\u003d 0) {\n      return false;\n    }",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14f5fa06_3b5bb08f",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1866d626_a5df4e42",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4ebc774_052d107c",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "nit: get rid of these two locals and inline the |role| comparisons on line 509",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a1dc5ac_b2246bac",
        "filename": "base/win/win_util.cc",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e4ebc774_052d107c",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c51535a_5ecea772",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 147,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "https://support.microsoft.com/en-us/help/17210/windows-10-use-your-pc-like-a-tablet uses \"tablet mode\" rather than \"Tablet Mode\".",
      "range": {
        "startLine": 147,
        "startChar": 47,
        "endLine": 147,
        "endChar": 58
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83ce2507_cfe5a08e",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 147,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3c51535a_5ecea772",
      "range": {
        "startLine": 147,
        "startChar": 47,
        "endLine": 147,
        "endChar": 58
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be81d0b4_fd98eada",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 151,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2018-01-02T21:12:59Z",
      "side": 1,
      "message": "Remove \u0027 \u0027 between.",
      "range": {
        "startLine": 151,
        "startChar": 36,
        "endLine": 151,
        "endChar": 37
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c69e4a0_af046cbf",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 151,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "nit: \"Windows 10 tablet mode\"",
      "range": {
        "startLine": 151,
        "startChar": 0,
        "endLine": 151,
        "endChar": 22
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4745e7c3_19cdcf2e",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 151,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2c69e4a0_af046cbf",
      "range": {
        "startLine": 151,
        "startChar": 0,
        "endLine": 151,
        "endChar": 22
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e39dd5b9_034a69f9",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 151,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "be81d0b4_fd98eada",
      "range": {
        "startLine": 151,
        "startChar": 36,
        "endLine": 151,
        "endChar": 37
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a1a59e5_2ba7cebf",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "while this list is better than nothing at all, i think it\u0027s beneficial to be more explicit. how about:\n\n// - The system is running Windows 8 or newer,\n// - has a touch digitizer,\n// - is not docked,\n// - has a supported rotation sensor,\n// - is not in laptop mode,\n// - the device\u0027s OEM prefers the mobile or slate power management profile, and\n// - the system is in slate mode.",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e35c40d3_44b701b9",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9a1a59e5_2ba7cebf",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df988d33_f4f911f1",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "this doesn\u0027t seem relevant to consumers of this function. if you think it\u0027s really important to spell this out, please move it into the .cc file with a comment along the lines of:\n\n\"This function does not check for Windows 10 tablet mode because it is used to determine the correct interaction media queries. blahblah more detail blahblah.\"\n\nThis will make it less likely that someone will do a handy refactor in the impl, while removing clutter from the public api.",
      "range": {
        "startLine": 157,
        "startChar": 3,
        "endLine": 157,
        "endChar": 67
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17d62212_d81fb115",
        "filename": "base/win/win_util.h",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "df988d33_f4f911f1",
      "range": {
        "startLine": 157,
        "startChar": 3,
        "endLine": 157,
        "endChar": 67
      },
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd6c7a9c_579d09e2",
        "filename": "ui/base/touch/touch_device_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1178124
      },
      "writtenOn": "2018-01-04T10:58:27Z",
      "side": 1,
      "message": "it seems possible that IsDeviceUsedAsATablet would return false (e.g., the device is docked), but that it has a digitizer. NONE is the wrong answer in this case, no?",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0f7359a_5ca201cb",
        "filename": "ui/base/touch/touch_device_win.cc",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1108044
      },
      "writtenOn": "2018-01-05T20:35:41Z",
      "side": 1,
      "message": "Yes but only if there no mouse connected. Just as a reminder (and thus why Windows is the only platform to have such complicated code for that feature) SM_MOUSEPRESENT is almost never false and can\u0027t really be used to detect the presence of a mouse. Per Microsoft documentation \"This value is rarely zero, because of support for virtual mice and because some systems detect the presence of the port instead of the presence of a mouse.\"\n\nFor the sake of completeness we can do an extra check to see if there is no touch digitizer before returning POINTER_TYPE_NONE.",
      "parentUuid": "dd6c7a9c_579d09e2",
      "revId": "09c530a13e7406241178c3034019e70e994cfb99",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}