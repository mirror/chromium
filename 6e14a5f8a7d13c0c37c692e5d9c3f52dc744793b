{
  "comments": [
    {
      "key": {
        "uuid": "97b9ebc8_29d9fbce",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-12-06T02:52:05Z",
      "side": 1,
      "message": "I don\u0027t quite follow this logic, since we early return if is_background_ is true above. Maybe I\u0027m misunderstanding how this works though...",
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5011afb_0c0f3f63",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T03:38:37Z",
      "side": 1,
      "message": "This ensures we create one foreground reporter and one background reporter. Clients always call WatchTimeReporter with is_background \u003d false to get the foreground reporter, we then flip is_background to true for the cloned properties and create an \"inner\" reporter for background reporting.",
      "parentUuid": "97b9ebc8_29d9fbce",
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dc1ffc5_eabbc3f6",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 224,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T02:37:29Z",
      "side": 1,
      "message": "Should we report small videos as audio only? Why do we filter small videos?",
      "range": {
        "startLine": 224,
        "startChar": 0,
        "endLine": 224,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d446e04b_70c46a6f",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 224,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T03:38:37Z",
      "side": 1,
      "message": "No, we want UKM reporting to be as accurate as possible. In a CL soon I\u0027ll introduce an abandonment metric which we can use for tracking upper bounds on what we throw away.\n\nThe second is a product decision. We want to avoid small ads or things animated emojis in video tags",
      "parentUuid": "9dc1ffc5_eabbc3f6",
      "range": {
        "startLine": 224,
        "startChar": 0,
        "endLine": 224,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e523e88_ba176c57",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 224,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T19:38:24Z",
      "side": 1,
      "message": "It seems like the most accurate thing is to report all videos of all sizes and do the filtering in the queries/dashboard.\n\n\u003e We want to avoid small ads or things animated emojis in video tags\n\nEmojis will be filtered out by duration. Why would metrics from small ads not be interesting?",
      "parentUuid": "d446e04b_70c46a6f",
      "range": {
        "startLine": 224,
        "startChar": 0,
        "endLine": 224,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1045de0b_94c678b6",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 224,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T20:01:00Z",
      "side": 1,
      "message": "We can discuss this more off-CL and with the PMs, but regardless it\u0027s not something I\u0027ll change in this CL. The logic we\u0027re using is similar to YouTube\u0027s requirements. You can take a look at how they were defined here:\nhttps://docs.google.com/document/d/19mP_EVPkHkzN22QObhL0GYUMzyCAJDpRw3v8Mn3wf5s/edit\n\nThis isn\u0027t something we can filter on UMA, only UKM - so we need to apply a filter here. Emojis may not be filtered by duration. Things below a certain size are generally not things actively being watched, we\u0027re trying to primarily track engagement here.\n\nFeel free to file a bug or start an e-mail with dahlke@ and I if you think we should be doing otherwise.",
      "parentUuid": "4e523e88_ba176c57",
      "range": {
        "startLine": 224,
        "startChar": 0,
        "endLine": 224,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "63b21bf2_04b31a73",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 399,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T02:37:29Z",
      "side": 1,
      "message": "Am I right that for each of these RECORD_WATCH_TIME would also do the correct thing? IIUC, you\u0027ve defined separate macros just as an assert that we don\u0027t report things like NativeControls status for background video?",
      "range": {
        "startLine": 399,
        "startChar": 8,
        "endLine": 399,
        "endChar": 36
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "596b14e5_5cd3b0d4",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 399,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T03:38:37Z",
      "side": 1,
      "message": "Yes, that\u0027s correct.",
      "parentUuid": "63b21bf2_04b31a73",
      "range": {
        "startLine": 399,
        "startChar": 8,
        "endLine": 399,
        "endChar": 36
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16c5ab70_0744b0ca",
        "filename": "media/blink/watch_time_reporter.cc",
        "patchSetId": 1
      },
      "lineNbr": 399,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T19:38:24Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "596b14e5_5cd3b0d4",
      "range": {
        "startLine": 399,
        "startChar": 8,
        "endLine": 399,
        "endChar": 36
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a1f4da69_96e9aa10",
        "filename": "media/blink/watch_time_reporter_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T02:37:29Z",
      "side": 1,
      "message": "maybe add a default: clause to catch anything that slips past",
      "range": {
        "startLine": 172,
        "startChar": 17,
        "endLine": 172,
        "endChar": 22
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a581f5eb_b57fa04b",
        "filename": "media/blink/watch_time_reporter_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T03:38:37Z",
      "side": 1,
      "message": "No, we intentionally don\u0027t have default: so that missing keys are a compile error.",
      "parentUuid": "a1f4da69_96e9aa10",
      "range": {
        "startLine": 172,
        "startChar": 17,
        "endLine": 172,
        "endChar": 22
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6276398a_48d1c0c4",
        "filename": "media/blink/watch_time_reporter_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T19:38:24Z",
      "side": 1,
      "message": "How does that work? Does the compiler look for all values of an enum for any switch?",
      "parentUuid": "a581f5eb_b57fa04b",
      "range": {
        "startLine": 172,
        "startChar": 17,
        "endLine": 172,
        "endChar": 22
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "147ae68c_f21d0c00",
        "filename": "media/blink/watch_time_reporter_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T20:01:00Z",
      "side": 1,
      "message": "Essentially yes, http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options search for -Wswitch.",
      "parentUuid": "6276398a_48d1c0c4",
      "range": {
        "startLine": 172,
        "startChar": 17,
        "endLine": 172,
        "endChar": 22
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edf13132_d9b0a917",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T02:37:29Z",
      "side": 1,
      "message": "How do we reason about which metrics to include/exclude in UMA?",
      "range": {
        "startLine": 23,
        "startChar": 9,
        "endLine": 23,
        "endChar": 21
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ceda97c5_84bbc371",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T03:38:37Z",
      "side": 1,
      "message": "We don\u0027t have these currently and I\u0027m wary of adding 19 new UMA metrics we may not use... husain@ and I chatted about this before leaving and decided we\u0027re good with UKM for most new metrics for the time being to avoid exploding the UMA reporting too much. I\u0027ll double check with dahlke@ though to get his thoughts.",
      "parentUuid": "edf13132_d9b0a917",
      "range": {
        "startLine": 23,
        "startChar": 9,
        "endLine": 23,
        "endChar": 21
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad1e82ff_52bd88d1",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T19:38:24Z",
      "side": 1,
      "message": "Do we think of UMA as needing more resources than UKM? I would guess the reverse, so favor putting experimental things in UMA instead?",
      "parentUuid": "ceda97c5_84bbc371",
      "range": {
        "startLine": 23,
        "startChar": 9,
        "endLine": 23,
        "endChar": 21
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2314e147_433b03b5",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T20:01:00Z",
      "side": 1,
      "message": "+holte, I generally think yes, adding more UMA key+value pairs is more expensive then one new column in our UKM data. We\u0027re already the biggest UMA histogram_suffixes user, so like I said, I\u0027m wary of expanding it further.",
      "parentUuid": "ad1e82ff_52bd88d1",
      "range": {
        "startLine": 23,
        "startChar": 9,
        "endLine": 23,
        "endChar": 21
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8a0b8b3_6001a5af",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T21:10:16Z",
      "side": 1,
      "message": "Confirmed with dahlke@ that UKM is sufficient for these.",
      "parentUuid": "2314e147_433b03b5",
      "range": {
        "startLine": 23,
        "startChar": 9,
        "endLine": 23,
        "endChar": 21
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf9450e4_d15d1ab6",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 204,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T02:37:29Z",
      "side": 1,
      "message": "Just realizing how rough this calculation is. Have we considered more precise tracking of time between rebuffers? Does this match YT\u0027s approach?",
      "range": {
        "startLine": 204,
        "startChar": 39,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e5c29e5b_adfb863c",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 204,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-12-06T03:38:37Z",
      "side": 1,
      "message": "What do you mean by rough? It\u0027s the same as YouTube\u0027s calculation. I\u0027ve e-mailed you the internal link with those details.",
      "parentUuid": "bf9450e4_d15d1ab6",
      "range": {
        "startLine": 204,
        "startChar": 39,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a02df74c_5c3e3eda",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 204,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T05:55:39Z",
      "side": 1,
      "message": "Yeah, on second thought it makes sense. Not sure what I was thinking",
      "parentUuid": "e5c29e5b_adfb863c",
      "range": {
        "startLine": 204,
        "startChar": 39,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e30d0706_dc33a12b",
        "filename": "media/mojo/services/watch_time_recorder.cc",
        "patchSetId": 1
      },
      "lineNbr": 204,
      "author": {
        "id": 1129179
      },
      "writtenOn": "2017-12-06T19:38:24Z",
      "side": 1,
      "message": "(resolving)",
      "parentUuid": "a02df74c_5c3e3eda",
      "range": {
        "startLine": 204,
        "startChar": 39,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "6e14a5f8a7d13c0c37c692e5d9c3f52dc744793b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}