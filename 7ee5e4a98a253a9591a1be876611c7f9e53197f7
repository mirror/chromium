{
  "comments": [
    {
      "key": {
        "uuid": "44e5e62b_7ecd9701",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2366,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-14T22:52:17Z",
      "side": 1,
      "message": "Why is this only in the opener_suppressed case?  (I\u0027m sure there\u0027s a reason, but I don\u0027t know what it is at first glance.)",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "349e5e89_48da2c0c",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2366,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2017-08-14T23:04:54Z",
      "side": 1,
      "message": "In the usual case, the popup window is created here and shown in WebContentsImpl::ShowCreatedWindow. In the opener_suppressed case, it\u0027s created and shown here.\n\nIn this change I was going for dropping fullscreen right before the WebContentsDelegate::AddNewContents call, so I did so. Perhaps, since this function is called during popup creation (even though the popup will happen later) I could adjust it so it always was done here.",
      "parentUuid": "44e5e62b_7ecd9701",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d3bad93_a6ccce67",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2366,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-14T23:23:25Z",
      "side": 1,
      "message": "I see-- thanks for the reminder.  I\u0027m ok with this split approach if we make it clearer, maybe with a comment like: \"Be sure to exit fullscreen for popups before showing them, whether here or in ShowCreatedWindow.\"",
      "parentUuid": "349e5e89_48da2c0c",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bfb8e6a_2ad45566",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2367,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-14T22:52:17Z",
      "side": 1,
      "message": "What happens for other dispositions, like NEW_FOREGROUND_TAB?  Does that already kick us out of fullscreen?",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5c6d8bf_91b919b0",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2367,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2017-08-14T23:04:54Z",
      "side": 1,
      "message": "No, it doesn\u0027t, but I was trying to accomplish \"drop fullscreen when a popup is shown\". I suppose we could include NEW_FOREGROUND_TAB, but at that point we\u0027re making a web-visible change and probably should write up an intent.",
      "parentUuid": "5bfb8e6a_2ad45566",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20a99807_3c23e4da",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2367,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-14T23:23:25Z",
      "side": 1,
      "message": "It only matters to me if the other case is exploitable.  If a page can trigger NEW_FOREGROUND_TAB while a tab is in fullscreen, will it cause use to hide the fullscreen notification?",
      "parentUuid": "c5c6d8bf_91b919b0",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae414943_03e58c92",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2367,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2017-08-14T23:32:19Z",
      "side": 1,
      "message": "Creating a new tab already drops you out of fullscreen. Just tried it out.",
      "parentUuid": "20a99807_3c23e4da",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1df933f4_1a907885",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2468,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-14T22:52:17Z",
      "side": 1,
      "message": "Why do we need to have this code in two places?  (I\u0027m guessing it has to do with the opener_suppressed logic, but again, I don\u0027t know the background.)\n\nComments cross-referencing the two places might help?",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3227cfd_fb2d802c",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2468,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2017-08-14T23:04:54Z",
      "side": 1,
      "message": "This is an artifact of the weirdness of how, in Blink, window creation is split between WebContentsImpl::CreateNewWindow and WebContentsImpl::ShowCreatedWindow. They separately create the new popup window and then show it.",
      "parentUuid": "1df933f4_1a907885",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5858ac9f_00cb3817",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2468,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-08-14T23:23:25Z",
      "side": 1,
      "message": "Thanks.  Maybe the start of this method should mention some warning like \"Note: New windows with opener_suppressed are shown within CreateNewWindow above.  Some checks may need to be duplicated there.\"",
      "parentUuid": "f3227cfd_fb2d802c",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb4e4876_3ecca6aa",
        "filename": "content/browser/web_contents/web_contents_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 2468,
      "author": {
        "id": 1002169
      },
      "writtenOn": "2017-08-16T17:31:32Z",
      "side": 1,
      "message": "I\u0027m curious how things go wrong if we always exited fullscreen in the CreateNewWindow. Is there a user-visible difference?\n\nAFAIK, the blink message loop doesn\u0027t run between the IPCs that trigger CreateNewWindow, and the one that triggers ShowCreatedWindow -- they\u0027re part of the same operation, just at different points in the stack. I used to think there was a delay in these two operations, but my current understanding is that they arrive back-to-back.",
      "parentUuid": "5858ac9f_00cb3817",
      "revId": "7ee5e4a98a253a9591a1be876611c7f9e53197f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}