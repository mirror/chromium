{
  "comments": [
    {
      "key": {
        "uuid": "93fbb383_44157d8c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "You have a lot of state caching here in slightly different formats and I think it could be systematized into a private class:\n\nclass AutocompleteState {\n  String mUserText;\n  String mAutocompleteText;\n  int mSelectionStart, mSelectionEnd;\n\n  boolean isWholeTextSelected();\n  boolean isCursorAtEndOfText();\n}\n\nAutocompleteState mCurrentState;\nAutocompleteState mSetAutocompleteState;\nAutocompleteState mPreviouslyNotifiedState;\nAutocompleteState mPreBatchEditState;",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d02504b_d8572632",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Added a TODO.",
      "parentUuid": "93fbb383_44157d8c",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "40b4b5dc_00e77e19",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "mIsPastedText and mLastEditWasDelete seem to be basically the same thing.  Maybe we could merge them into mLastEditWasTyping and suppress autocomplete if it\u0027s false?",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93a37de4_4c0fa8e0",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "I don\u0027t think this is a simple task.\n\n1) When text gets pasted.\nonTextChanged() resets mIsPastedText state\nonPaste() sets mIsPastedText\nnotify...() resets mLastEditWasDelete\n\n2) When text gets deleted.\nonTextChanged() resets mIsPastedText state\nnotify...() sets mLastEditWasDelete\n\n3) When typing a character.\nonTextChanged() resets mIsPastedText state\nnotify...() resets mLastEditWasDelete\n\nBy the time notify...() is called, we cannot check whether mLastEditWasTyping should be set or reset.",
      "parentUuid": "40b4b5dc_00e77e19",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63a55a34_0c0a8e25",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-23T00:26:46Z",
      "side": 1,
      "message": "Well, OK, at least please rename mIsPastedText to mLastEditWasPaste.",
      "parentUuid": "93a37de4_4c0fa8e0",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2314ba9d_8373c4e1",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-23T09:25:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "63a55a34_0c0a8e25",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "018b8c54_c125cf8a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-28T17:09:39Z",
      "side": 1,
      "message": "Hmm.. Actually after some logic change, I\u0027ve merged them as you suggested in the new model. However, I had to keep the old logic in old model and UrlBar.java.",
      "parentUuid": "2314ba9d_8373c4e1",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0d18ff3_3077ccf9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "I think these should be put in the base class as all of them are in overridden methods (and this causes clutter around super.endBatchEdit calls in particular).  Or even better, find a way to avoid this by mocking InputMethodManager.",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "240d9d1a_56805edd",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "There is no easy way to mock out InputMethodManager since Android framework statically instantiates it. I\u0027ve moved updateSelection...() method into BatchEditTrackedInputConnection#endBatchEdit().",
      "parentUuid": "b0d18ff3_3077ccf9",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b1ea7e4c_05cbaec5",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "Instead of this assertion, please call super.beginBatchEdit()/super.endBatchEdit() around this code, and remove those calls from removeAutocomplete().",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "032cd2bd_b18ec8d2",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "You cannot call InputConnection\u0027s super methods from this method.",
      "parentUuid": "b1ea7e4c_05cbaec5",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70af0fdb_c05482d9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "If you want to call the \"Changed\" method regardless of whether it changed or not, that indicates the name is wrong.  Maybe we have a method called \"refreshAutocompleteDisplay\" instead which is called from notifyAutocompleteTextStateChanged() (and for example, there is no need to set mPreviouslyNotifiedText and mPreviouslyWholeTextSelected in refreshAutocompleteDisplay()).",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b20afb99_7a5c4424",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Notifying the change to the locationbarlayout is the main objective of the method, so refreshAutocompleteDisplay() does not convey the core meaning. NoCheck is not a good name, but it just means it does not do the batch edit check and assign values. Could you suggest another name?",
      "parentUuid": "70af0fdb_c05482d9",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "228e5e02_a1ec2fce",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-28T17:09:39Z",
      "side": 1,
      "message": "Fixed now.",
      "parentUuid": "b20afb99_7a5c4424",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b35f1dd_3af405e9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "The textDeleted is used to suppress autocomplete, but I don\u0027t like how this decentralizes the suppression policy, particularly as the delegate calls back anyway to know about suppression.  Please remove the textDeleted argument from the delegate (may be appropriate to do this in a separate dependent patch).",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce6960fa_a8a4fb6d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Good idea! Fixed in https://chromium-review.googlesource.com/c/544516/",
      "parentUuid": "5b35f1dd_3af405e9",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8114cd3b_9ef20bd8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "I think the Spannable is best thought of as part of the \"View\" in MVC style factoring, so we should not use it for model-impacting decisions like this -- we should just write to it to reflect the model but generally not read it.  Please use AutocompleteState.mAutocompleteText for purposes like this.",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4614f73b_2b1286d6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "That\u0027s what I have in mind, too, but I don\u0027t think we have enough time to make the change. (FC is tomorrow). I\u0027ve added a TODO for that.",
      "parentUuid": "8114cd3b_9ef20bd8",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90af0485_364171cc",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-23T00:26:46Z",
      "side": 1,
      "message": "It\u0027s very unlikely that this patch will be fully ready to land tomorrow anyway, and I think the TODOs are low-risk refactorings that should only be a day or two of coding, so please do them now and we can figure out the launch timeline questions next week.",
      "parentUuid": "4614f73b_2b1286d6",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6141ff45_e436ebc5",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-23T09:25:22Z",
      "side": 1,
      "message": "Refactored as suggested.",
      "parentUuid": "90af0485_364171cc",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f15e7989_3aaaa180",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "This is only used in sendAccessibilityEventUnchecked() and its meaning isn\u0027t very clear, can this be removed and covered by batch edit or something?",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0eb98488_9e0b9671",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Hmm... Probably I could move the ignoretextchangefromautocomplete logic into AutocompleteEditText(), but not beyond it for now. But I don\u0027t think the gain is huge if I move there. Let me know if you have a better idea.",
      "parentUuid": "f15e7989_3aaaa180",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03c22c24_a9ffdaab",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-23T00:26:46Z",
      "side": 1,
      "message": "This seems like a questionable method of suppressing the accessibility event in the first place. With the new spannable approach, the text is more hidden than before.  Is there a way to mark the spannable in such a way that it\u0027s hidden from accessibility as well as from the IME?",
      "parentUuid": "0eb98488_9e0b9671",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee6d90d5_4a22f72f",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-23T09:25:22Z",
      "side": 1,
      "message": "That is possible, but that does not remove this method as AutocompleteEditText still inquires it. I\u0027ll file a separate bug to handle this when the new model fully replaces the old one.",
      "parentUuid": "03c22c24_a9ffdaab",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e05750e2_2d935805",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-23T22:50:04Z",
      "side": 1,
      "message": "For now, could you always return false from this method in the Spannable implementation and implement the better solution for this class as part of this CL?  Then, deleting shouldIgnoreTextChangeFromAutocomplete() later will be a simple task of cleaning up dead code rather than a substantive change.",
      "parentUuid": "ee6d90d5_4a22f72f",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c015752d_dd840dcb",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 298,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-28T17:09:39Z",
      "side": 1,
      "message": "Actually, the approach we discussed offline does not apply here - Span is not a separate View. I\u0027ve moved the logic to AutocompleteEditText.java.",
      "parentUuid": "e05750e2_2d935805",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50ad7f0a_6e781376",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "I don\u0027t think we should have !isComposing() condition, seems too flaky and complicated.",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eeb2d987_e9fd1acd",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "We\u0027ve been using the same mechanism in AutocompleteEditTextModel. Without it, we will expose autocomplete text for non-English character set when the keyboard composes text and then deletion behavior will be different.",
      "parentUuid": "50ad7f0a_6e781376",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c2f7672_046c0f07",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-23T22:50:04Z",
      "side": 1,
      "message": "As discussed offline, it\u0027s safer and cleaner to add additional \"naturally non-combining\" scripts (which I would define as, \"scripts that have a small number of characters which do not need to be decomposed into parts during entry\" -- maybe write that verbatim in a comment) to the initial list: all variations of Latin, Cyrillic, Hebrew, Greek, and any others you discover.",
      "parentUuid": "eeb2d987_e9fd1acd",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a1330a6_667e52a3",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-28T17:09:39Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "0c2f7672_046c0f07",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e54ffd1e_151080fc",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 342,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "A more futureproof and purpose-oriented way of naming what this is scanning for might be something like \"isPhysicalKeyboardOneToOneTypable\"?",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89176eef_13be40a2",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 342,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e54ffd1e_151080fc",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "736529da_d1e0bd60",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 343,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "\"To start with, we are only activating this for English language and URLs\nto avoid potential bad interactions with more complex IMEs.\nTODO(changwan): also scan for other traditionally non-IME charsets like Latin1 and Cyrillic\"",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "962c95ea_b0741a59",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 343,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "736529da_d1e0bd60",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96f801a2_3b1ebb87",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 519,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "This assertion is covered by an early-return 4 lines above, so I don\u0027t think it adds any value; please delete it.",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "592914a6_89897653",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 519,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "96f801a2_3b1ebb87",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df84998f_e8c8e117",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 527,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "Seems worth splitting off into private method \"restoreBackspacedText\"",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c45a7c5c_7e84a608",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 527,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Thanks, I\u0027ve restructured it as follows:\n\n            if (isBackspacedText(currText)) {\n                // Update selection first such that keyboard app gets what it expects.\n                super.endBatchEdit();\n\n                restoreBackspacedText(currText);\n                // Text did not change but still notify the deletion.\n                notifyAutocompleteTextStateChangedNoCheck(mPreBatchEditText, true, false);\n                return true;\n            }",
      "parentUuid": "df84998f_e8c8e117",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44cf6b50_e0d55a35",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 528,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "These two debug logs seem intended to bound the action, so they\u0027d be clearer as \"restoreBackspacedText START: \" + diff, \"restoreBackspaceText END\"",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6b0fa8d_89694d79",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 528,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Changed to one logging inside restoreBackspacedText().",
      "parentUuid": "44cf6b50_e0d55a35",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f78c8622_7b120118",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 532,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "Please move this nesting counter into the base class with a protected getter to avoid these manual adjustments.",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16b67c8d_3a28d405",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 532,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Good idea. I\u0027ve refactored it into BatchEditTrackedInputConnection. But I\u0027m still looking up mBatchEditNestCount directly in the methods. Please let me know if it still needs fixing.",
      "parentUuid": "f78c8622_7b120118",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2df6feb9_f0f059ec",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 551,
      "author": {
        "id": 1115852
      },
      "writtenOn": "2017-06-22T00:12:09Z",
      "side": 1,
      "message": "It\u0027s weird to put this carefully between \"mBatchEditNestCount \u003d 0\" and \"endBatchEdit\" and that\u0027s incompatible with my other proposal, so just do notifyAutocompleteTextStateChangedNoCheck() here instead.",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75565696_31478ac7",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/omnibox/SpannableAutocompleteEditTextModel.java",
        "patchSetId": 2
      },
      "lineNbr": 551,
      "author": {
        "id": 1116193
      },
      "writtenOn": "2017-06-22T19:24:46Z",
      "side": 1,
      "message": "Good point. I still have to notify the change, but now mBatchEditNestCount check has been removed in notifyAutocompleteTextStateChanged() whose call sites are onSelectionChanged() and this one.",
      "parentUuid": "2df6feb9_f0f059ec",
      "revId": "e193697550b818d0902238cbe82ce3128708564d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}