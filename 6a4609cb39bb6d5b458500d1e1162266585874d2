{
  "comments": [
    {
      "key": {
        "uuid": "3f676110_30ece1eb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-25T08:59:59Z",
      "side": 1,
      "message": "nit: The motivations for this change are the following:",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "948a4526_f6f21b11",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 15,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3f676110_30ece1eb",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75fcff96_47267dc5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-22T09:54:15Z",
      "side": 1,
      "message": "If the only remaining usage of AccessTokenStore after this CL is to check whether it\u0027s null or not, would it reasonable to just eliminate those unittests as part of this CL, thus enabling removing the unused functionality in this CL as well?",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ed1411f_178c6501",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-22T11:06:42Z",
      "side": 1,
      "message": "Yep I could do that.\n\nThis falls into the category I was labeling a \u0027weird state\u0027, in this case: a unit of untested albeit unused, partially deconstructed (i.e. URLRequestContext parts excised) code.\n\nAnother option, I could almost-wholly deconstruct it, i.e. reduce AccessTokenStore to basically \"class AccessTokenStore() {};\". But using that as an of/off marker for NetworkLocationProvider is a \u0027weird state\u0027 in its own way.\n\nIn the end it\u0027s all for a short time, so happy to go with any of these really. What\u0027s your preference for review purposes?",
      "parentUuid": "75fcff96_47267dc5",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58dfa5f5_a701249f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-22T15:19:23Z",
      "side": 1,
      "message": "OK, it makes sense for the removal of AccessTokenStore to be a \"clean removal\", i.e., it could be reverted to bring all the code back as it was. It\u0027s the end of my day now, so I\u0027ll review this CL on Monday (as-is). Apologies for the delay!",
      "parentUuid": "7ed1411f_178c6501",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5f00cac_be74a8e6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Resolved",
      "parentUuid": "58dfa5f5_a701249f",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3adb2c6b_72054195",
        "filename": "chrome/browser/chrome_content_browser_client.cc",
        "patchSetId": 7
      },
      "lineNbr": 805,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-25T08:59:59Z",
      "side": 1,
      "message": "nit: I would just call this GetSystemRequestContextOnUIThread().",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "687a2047_3cf8d4e2",
        "filename": "chrome/browser/chrome_content_browser_client.cc",
        "patchSetId": 7
      },
      "lineNbr": 805,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3adb2c6b_72054195",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c1dc5ad0_9100b2a2",
        "filename": "chromecast/browser/cast_content_browser_client.cc",
        "patchSetId": 7
      },
      "lineNbr": 139,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-25T08:59:59Z",
      "side": 1,
      "message": "nit: I don\u0027t think you need this DCHECK and the below one, as them failing would just cause basically the same crash right below anyway. i.e., dereferencing something is an implicit CHECK that it\u0027s non-null.",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13c83499_aea59fb6",
        "filename": "chromecast/browser/cast_content_browser_client.cc",
        "patchSetId": 7
      },
      "lineNbr": 139,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c1dc5ad0_9100b2a2",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ff9e547_28b056f5",
        "filename": "content/browser/service_manager/service_manager_context.cc",
        "patchSetId": 7
      },
      "lineNbr": 351,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-25T08:59:59Z",
      "side": 1,
      "message": "Hmm, can you investigate exactly what the lifetime guarantee of ContentBrowserClient is and document it here? It will be good to have this documentation for when we move this into the Device Service, so we can reason about whether this is then problematic or not.",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61f8ef5e_0abeb511",
        "filename": "content/browser/service_manager/service_manager_context.cc",
        "patchSetId": 7
      },
      "lineNbr": 351,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Update: I\u0027m still trying to figure this out. From what I can tell so far, it looks like ContentBrowserClient is created early and never destroyed. But I don\u0027t exactly know what the lifetime guarantee may be.",
      "parentUuid": "5ff9e547_28b056f5",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42b6d72f_5039be5c",
        "filename": "content/browser/service_manager/service_manager_context.cc",
        "patchSetId": 7
      },
      "lineNbr": 351,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-10-04T00:50:19Z",
      "side": 1,
      "message": "Empirically:\nI looked at embedders in the Chromium repo and they all have the same story:\nContentBrowserClient owned by a ContentMainDelegate on the stack in int main():\n  chrome/app/chrome_main.cc:63\n  chromecast/app/cast_main.cc:9\n  content/shell/app/shell_content_main.cc:14\n  content/shell/app/shell_main.cc:44\n  ash/shell/content/shell_with_content_main.cc:25\n  extensions/shell/app/shell_main.cc:26\n  headless/lib/browser/headless_browser_impl.cc:63\n\nPer offline discussion, will follow up a definitive answer on this asynchronously, in https://groups.google.com/a/chromium.org/forum/#!topic/chromium-dev/euvxNn8PEDY or with jam@.\nAdded a TODO for that.",
      "parentUuid": "61f8ef5e_0abeb511",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c2f4df83_1a0e0d35",
        "filename": "content/browser/service_manager/service_manager_context.cc",
        "patchSetId": 7
      },
      "lineNbr": 351,
      "author": {
        "id": 1001216
      },
      "writtenOn": "2017-10-06T22:58:10Z",
      "side": 1,
      "message": "Not sure if there\u0027s problems in practice here; I\u0027ll defer to jam@ for that.\n\nHowever, there\u0027s lots of tests where it won\u0027t be true (see calls to SetBrowserClientForTesting).  Many of these tests change the ContentBrowserClient halfway through the test, which seems like it could be an issue for this code.  Are you concerned about test code, or is that not a problem?",
      "parentUuid": "42b6d72f_5039be5c",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7a47558_6a5b1bb5",
        "filename": "content/public/browser/content_browser_client.h",
        "patchSetId": 7
      },
      "lineNbr": 443,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-25T08:59:59Z",
      "side": 1,
      "message": "nit: ok, after all the bikeshedding, I now think this can just be called GetGeolocationRequestContext(). Apologies if that\u0027s what you originally had :P.",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "361cd394_d4361020",
        "filename": "content/public/browser/content_browser_client.h",
        "patchSetId": 7
      },
      "lineNbr": 443,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b7a47558_6a5b1bb5",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3bdf5484_ab971be2",
        "filename": "device/geolocation/location_arbitrator.cc",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-25T08:59:59Z",
      "side": 1,
      "message": "nit: Can you add a TODO here to replace this usage of GetAccessTokenStore() by checking the return value of |request_context_producer_|?",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5819e9be_6561ac4a",
        "filename": "device/geolocation/location_arbitrator.cc",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3bdf5484_ab971be2",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0316f16e_871959e6",
        "filename": "device/geolocation/location_arbitrator_unittest.cc",
        "patchSetId": 7
      },
      "lineNbr": 112,
      "author": {
        "id": 1113941
      },
      "writtenOn": "2017-09-25T08:59:59Z",
      "side": 1,
      "message": "hmm, this seems like it might require working in your followup CL to short-circuit out when there\u0027s a null URLRequestContext.",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47e9fa43_f507b761",
        "filename": "device/geolocation/location_arbitrator_unittest.cc",
        "patchSetId": 7
      },
      "lineNbr": 112,
      "author": {
        "id": 1182889
      },
      "writtenOn": "2017-09-26T07:24:09Z",
      "side": 1,
      "message": "Yep for that I add a second version that produces a TestURLRequestContextGetter instead of a nullptr: crrev.com/c/676826",
      "parentUuid": "0316f16e_871959e6",
      "revId": "6a4609cb39bb6d5b458500d1e1162266585874d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}