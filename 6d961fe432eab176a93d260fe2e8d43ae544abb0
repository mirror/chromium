{
  "comments": [
    {
      "key": {
        "uuid": "0ae3c819_8c325147",
        "filename": "ash/shutdown_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-23T20:41:52Z",
      "side": 1,
      "message": "do you still need this, or was it just for testing?",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd1e3586_ed54a163",
        "filename": "ash/shutdown_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1210164
      },
      "writtenOn": "2017-06-23T21:07:24Z",
      "side": 1,
      "message": "It would help if you were trying to debug shutdown metrics.",
      "parentUuid": "0ae3c819_8c325147",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83073871_1600b080",
        "filename": "ash/shutdown_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-23T21:40:29Z",
      "side": 1,
      "message": "i\u0027m not sure if it\u0027s the most recent discussion of this on chromium-dev, but see https://groups.google.com/a/chromium.org/d/topic/chromium-dev/nAiKeh-zLws/discussion.\n\ni\u0027d advise against adding VLOGs unless you plan to temporarily turn them on in production by adding a --vmodule flag when we run chrome (which we do sometimes for debugging hard-to-track down issues). otherwise we\u0027re just shipping strings and code that are never going to be used.\n\nif you really want to include this, consider using DVLOG(1) instead. i think it\u0027s better if anyone who\u0027s working on this code in the future just adds their own logging statements in their own local builds in the spots where they need them, though.",
      "parentUuid": "fd1e3586_ed54a163",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a79c0291_305c427e",
        "filename": "ash/shutdown_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1210164
      },
      "writtenOn": "2017-06-23T21:47:54Z",
      "side": 1,
      "message": "OK, will remove.",
      "parentUuid": "83073871_1600b080",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "206ca701_064b7677",
        "filename": "ash/shutdown_controller.h",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-23T20:41:52Z",
      "side": 1,
      "message": "nit: maybe also mention that this reports a user action for ShutdownReason::POWER_BUTTON but not otherwise. or do you plan to add additional actions for the other reasons? it doesn\u0027t look like the other reasons get consumed by anything right now, do they?",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f72382a_fc6a7ea6",
        "filename": "ash/shutdown_controller.h",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1210164
      },
      "writtenOn": "2017-06-23T21:07:24Z",
      "side": 1,
      "message": "I don\u0027t think the metrics behavior is fundamental to the method. I\u0027m on the fence about whether other metrics should move in here; the metrics advice seems to be to move metrics recording as \"close to\" the UI as possible.",
      "parentUuid": "206ca701_064b7677",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46660e69_952f867d",
        "filename": "ash/shutdown_controller.h",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-23T21:40:29Z",
      "side": 1,
      "message": "my thinking is that these metrics seem most likely to be used by someone who\u0027s trying to compare the relative frequencies of the various ways that users can shut the system down. if all of these metrics are reported in this method, then that provides more of a guarantee that they\u0027re comparable.\n\nwith that said, the same argument could be made for e.g. keeping the system tray shutdown button\u0027s metric in the system tray code, so the metric is easy to compare against those of other system tray buttons. :-P\n\ncc-ing mark in case he can offer guidance here.",
      "parentUuid": "5f72382a_fc6a7ea6",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e5d8b243_6969d5de",
        "filename": "ash/shutdown_controller.h",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1001310
      },
      "writtenOn": "2017-06-26T20:47:53Z",
      "side": 1,
      "message": "Metrics should ideally only be recorded in a single place (function), those metrics you want to compare are guaranteed to be comparable to each other.  That said, there\u0027s an opposite concern, which means you don\u0027t want to move the metrics too low into a function / the depth of code, so that people may end up calling the function in other places (say, programmatically), that aren\u0027t relevant to the logging / user action.  (I think it\u0027s that latter sense that Lann is channeling when he cites my advice to make sure the metrics is \"close to the UI\". It should be somewhere that non-UI code will never end up calling it for any reason.)\n\nHope this helps.",
      "parentUuid": "46660e69_952f867d",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1aa1f6a3_966dcef6",
        "filename": "ash/shutdown_controller.h",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1210164
      },
      "writtenOn": "2017-06-26T21:00:39Z",
      "side": 1,
      "message": "I think part of the issue here is that these are \"Accel\" metrics, suggesting that they reflect key/button presses, but semantically it seems they only record actual shut down requests. If the intention is to record key presses then this is the wrong patch. If the intention is to record shut down reasons, then maybe they should all move here, and arguably the metrics should be renamed to e.g. ShutDown_Reason_* though that might not be worth the churn.",
      "parentUuid": "e5d8b243_6969d5de",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e186788a_0af3a2c3",
        "filename": "ash/shutdown_controller.h",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-27T02:22:23Z",
      "side": 1,
      "message": "i think the intention (at least when i tried to use these metrics) was to answer someone\u0027s question about how often users shut down by holding the power button vs. by other methods.\n\nthe power button is weird, as far as accelerators go, since we don\u0027t take action on clamshell chromebooks unless it\u0027s held for some period of time, and the action we take depends on the state we started in and the amount of time it was held. (the duration of power button presses is reported as a histogram by a separate process, but it doesn\u0027t know anything about the actual actions that were taken.)\n\nfor the purposes of my original task, just (accurately) reporting power-button-triggered shutdowns here would\u0027ve been sufficient for comparison with other reported actions like how often the shut down button in the tray is clicked, so i\u0027m okay with going that route if it\u0027s simplest.\n\nif we want reporting to live up in the UI layer, the code that implements the power button delay would probably need to take a callback that it can use to communicate the action that it\u0027s taking back to the code that handles the power button event. (this code used to all live in one place before it got really complicated due to a UI redesign, i think. :-/) i\u0027m fine with saying that\u0027s not worth the effort.",
      "parentUuid": "1aa1f6a3_966dcef6",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d717534_ac5c9620",
        "filename": "ash/wm/lock_state_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-23T20:41:52Z",
      "side": 1,
      "message": "do you need to set shutdown_after_lock_ to false when you aren\u0027t being called by StartLockThenShutdownAnimation? maybe it already gets cleared in all of the cancel paths...",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38053dd0_74b3c03d",
        "filename": "ash/wm/lock_state_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1210164
      },
      "writtenOn": "2017-06-23T21:07:24Z",
      "side": 1,
      "message": "It gets reset at 131 below.",
      "parentUuid": "5d717534_ac5c9620",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e37809da_d9337487",
        "filename": "ash/wm/lock_state_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-23T21:40:29Z",
      "side": 1,
      "message": "not just 131, but also 149, 256, and 511, right?",
      "parentUuid": "38053dd0_74b3c03d",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c8e967e_f0197194",
        "filename": "ash/wm/lock_state_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1210164
      },
      "writtenOn": "2017-06-23T21:47:54Z",
      "side": 1,
      "message": "Yep.",
      "parentUuid": "e37809da_d9337487",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "649af06a_e38c0165",
        "filename": "ash/wm/lock_state_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 112,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-06-23T20:41:52Z",
      "side": 1,
      "message": "same question here; should this also set shutdown_after_lock_ to false?",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca3a97ff_3b773441",
        "filename": "ash/wm/lock_state_controller.cc",
        "patchSetId": 2
      },
      "lineNbr": 112,
      "author": {
        "id": 1210164
      },
      "writtenOn": "2017-06-23T21:07:24Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "649af06a_e38c0165",
      "revId": "6d961fe432eab176a93d260fe2e8d43ae544abb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}