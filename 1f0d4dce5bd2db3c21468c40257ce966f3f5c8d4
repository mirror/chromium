{
  "comments": [
    {
      "key": {
        "uuid": "799d92a4_15dbb56f",
        "filename": "third_party/WebKit/Source/platform/memory_profiler/SamplingNativeHeapProfiler.cpp",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1002871
      },
      "writtenOn": "2018-01-25T16:59:11Z",
      "side": 1,
      "message": "something that I realized only now:\nvery likely some allocations will happen before you install the shim.\nSo some allocations might be made before is intercepted by your functions.\nWhat happens in this case? I mean if you get passed a pointer of something that was allocated by the real malloc, ptr-1 might point before the beginning of the malloc arena and crash.",
      "range": {
        "startLine": 38,
        "startChar": 20,
        "endLine": 38,
        "endChar": 60
      },
      "revId": "1f0d4dce5bd2db3c21468c40257ce966f3f5c8d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a76a383_714c0fe4",
        "filename": "third_party/WebKit/Source/platform/memory_profiler/SamplingNativeHeapProfiler.cpp",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1115861
      },
      "writtenOn": "2018-01-25T17:05:26Z",
      "side": 1,
      "message": "Even when the hook has already been installed, but the allocation was not sampled address is pointing to the beginning of the allocated region. The check relies on the fact that an underlying allocator stores some internal data right before an allocated region.",
      "parentUuid": "799d92a4_15dbb56f",
      "range": {
        "startLine": 38,
        "startChar": 20,
        "endLine": 38,
        "endChar": 60
      },
      "revId": "1f0d4dce5bd2db3c21468c40257ce966f3f5c8d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b26c78e_e0e28251",
        "filename": "third_party/WebKit/Source/platform/memory_profiler/SamplingNativeHeapProfiler.cpp",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1115861
      },
      "writtenOn": "2018-01-26T02:14:40Z",
      "side": 1,
      "message": "Uh-oh. Primiano, you\u0027re so cool!\n\nI tried the profiler on Clank Canary and got two crashes with SEGV at addresses 0xc997fffc and 0xcb4ffffc.\nThis definitely looks like reads from the previous page. dalvik alloc seems to leave no space at the beginning of [some] allocations. I removed the optimization in a separate patch. I still want to have this patch landed as it addresses MacOS hooks implementations.",
      "parentUuid": "7a76a383_714c0fe4",
      "range": {
        "startLine": 38,
        "startChar": 20,
        "endLine": 38,
        "endChar": 60
      },
      "revId": "1f0d4dce5bd2db3c21468c40257ce966f3f5c8d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}