{
  "comments": [
    {
      "key": {
        "uuid": "8afd2bc3_59d66dc3",
        "filename": "chrome/browser/ui/views/feature_promos/bookmark_promo_bubble_view.h",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-16T15:53:02Z",
      "side": 1,
      "message": "It seems like this is only called once. Can the browser be supplied during creation so that FeaturePromoBubble only has a single function, ClosePromoBubble() in it? That said it is preferable if the call site triggering creation actually owns the object. That way you don\u0027t need an explicit close, just delete the object.\n\nWhat happens if the bubble is closed outside of ClosePromoBubble? Say it\u0027s deleted by the os? In that case how does IncognitoWindowPromoBubbleView know to null out the reference?",
      "range": {
        "startLine": 22,
        "startChar": 7,
        "endLine": 22,
        "endChar": 23
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "772df54b_32de7111",
        "filename": "chrome/browser/ui/views/feature_promos/bookmark_promo_bubble_view.h",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1223632
      },
      "writtenOn": "2017-10-20T01:00:29Z",
      "side": 1,
      "message": "I don\u0027t understand what you are saying in the first part. The triggering logic goes to the feature tracker after a user action. The tracker checks if we should show the promo. If so, this means that the tracker has to show the promo. The tracker is on the components side which is why I created the interface feature_promo_bubble.h to have this method that the views implementations will implement. This is to allow the tracker to call ShowPromoBubble. Also I wanted to call browser on ShowPromoBubble in case the user has multiple windows with the same profile open, so I want to only show the promo only for the current active browser\n\n\nI believe that it should go straight into OnWidgetDestroying which will null out the reference.",
      "parentUuid": "8afd2bc3_59d66dc3",
      "range": {
        "startLine": 22,
        "startChar": 7,
        "endLine": 22,
        "endChar": 23
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94fdb0d4_8f0d70e3",
        "filename": "chrome/browser/ui/views/feature_promos/bookmark_promo_bubble_view.h",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-20T02:50:34Z",
      "side": 1,
      "message": "Sorry for not being clear. I\u0027m suggesting the following:\n\n1. CreateIncognitoFeaturePromoBubble() *already* takes a Browser. There is no need to also pass the Browser to show, so remove it.\n2. Do you really need a separate Create/Show step? Can CreateIncognitoFeaturePromoBubble() be renamed ShowIncognitoFeaturePromoBubble(Browser*) and remove ShowPromoBubble from from FeaturePromoBubble.\n3. Remove ClosePromoBubble and have close triggered by deleting FeaturePromoBubble. I realize this means you end up with an empty interface, but it clears up expectations and makes it clear how this class is used. That is, the bubble can and is only shown once and that deleting closes.",
      "parentUuid": "772df54b_32de7111",
      "range": {
        "startLine": 22,
        "startChar": 7,
        "endLine": 22,
        "endChar": 23
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1f5751e_d971196b",
        "filename": "chrome/browser/ui/views/feature_promos/bookmark_promo_bubble_view.h",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-20T02:52:32Z",
      "side": 1,
      "message": "Note that doing my last suggestion may mean you need to move stuff around, but again, it results in clearer ownership and expectations.",
      "parentUuid": "94fdb0d4_8f0d70e3",
      "range": {
        "startLine": 22,
        "startChar": 7,
        "endLine": 22,
        "endChar": 23
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d98b968f_24a1952d",
        "filename": "chrome/browser/ui/views/feature_promos/bookmark_promo_bubble_view.h",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1223632
      },
      "writtenOn": "2017-10-27T06:51:41Z",
      "side": 1,
      "message": "1. done\n\n2. done\n\n3. I had a seg fault when trying to delete the feature_promo_bubble_ directly. I believe it has something to do with how the feature_promo_bubble_view_ has a widget that needs to be closed first.",
      "parentUuid": "e1f5751e_d971196b",
      "range": {
        "startLine": 22,
        "startChar": 7,
        "endLine": 22,
        "endChar": 23
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "079e050a_33328b15",
        "filename": "chrome/browser/ui/views/feature_promos/bookmark_promo_bubble_view.h",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-30T16:07:15Z",
      "side": 1,
      "message": "You have two options for the last one:\n1. Don\u0027t have FeaturePromoBubbleView.\n2. Have FeaturePromoBubbleView manage it\u0027s own lifetime. In this case you\u0027ll likely need an explicit Close() function.",
      "parentUuid": "d98b968f_24a1952d",
      "range": {
        "startLine": 22,
        "startChar": 7,
        "endLine": 22,
        "endChar": 23
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9647b124_8715fc6e",
        "filename": "chrome/browser/ui/views/feature_promos/new_tab_promo_bubble_view.cc",
        "patchSetId": 10
      },
      "lineNbr": 69,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2017-10-16T15:53:02Z",
      "side": 1,
      "message": "When is this false?",
      "range": {
        "startLine": 69,
        "startChar": 2,
        "endLine": 69,
        "endChar": 52
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8447ef92_35bc21b6",
        "filename": "chrome/browser/ui/views/feature_promos/new_tab_promo_bubble_view.cc",
        "patchSetId": 10
      },
      "lineNbr": 69,
      "author": {
        "id": 1223632
      },
      "writtenOn": "2017-10-20T01:00:29Z",
      "side": 1,
      "message": "It would be false if for example:\n\n-\u003eshow promo, then close it which goes into this function and removes it from observation.\n-\u003e call CloseBubble on the NewTabPromoBubbleView",
      "parentUuid": "9647b124_8715fc6e",
      "range": {
        "startLine": 69,
        "startChar": 2,
        "endLine": 69,
        "endChar": 52
      },
      "revId": "a11095ae8e07929cb349221760366c19c7f319d2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}