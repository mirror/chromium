{
  "comments": [
    {
      "key": {
        "uuid": "29af4688_92fee74e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-10T16:33:29Z",
      "side": 1,
      "message": "I think we need to find a way to cancel the logging handler when the tab is hidden, since the tab could get hidden during the  5 seconds between when the handler is started and when it finishes.",
      "range": {
        "startLine": 83,
        "startChar": 8,
        "endLine": 89,
        "endChar": 11
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3d9d9c3_af0c2e6a",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-15T01:17:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "29af4688_92fee74e",
      "range": {
        "startLine": 83,
        "startChar": 8,
        "endLine": 89,
        "endChar": 11
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c8acef7_1e3bdbe0",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-17T04:17:24Z",
      "side": 1,
      "message": "I\u0027m not very familiar with onInteractabilityChanged. When does it get called in comparison to onHidden?",
      "parentUuid": "b3d9d9c3_af0c2e6a",
      "range": {
        "startLine": 83,
        "startChar": 8,
        "endLine": 89,
        "endChar": 11
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fae3b9cf_dc0d87e9",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-21T21:52:05Z",
      "side": 1,
      "message": "onInteractabilityChanged gets called if the user enters the tab switcher.\nIt\u0027s redundant to put two methods here since onInteractabilityChanged will always be called first (so I removed onHidden).\nIf we want the behavior to be s.t. we don\u0027t want the user to see an infobar upon returning to the tab (i.e. the infobar should remain as long as the user stays on the tab), then it\u0027s more fitting to have onInteractabilityChanged over onHidden.",
      "parentUuid": "2c8acef7_1e3bdbe0",
      "range": {
        "startLine": 83,
        "startChar": 8,
        "endLine": 89,
        "endChar": 11
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61bf8a2a_8e307d8d",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-21T22:16:15Z",
      "side": 1,
      "message": "\u003e we don\u0027t want the user to see an infobar upon returning to the tab (i.e. the infobar should remain as long as the user stays on the tab), then it\u0027s more fitting to have onInteractabilityChanged over onHidden.\n\nIn the most recent patchset it looks like we will show the user an infobar if the they enter the tab switcher while a tab is loading, it loads in the background, then they exit the tab switcher (without  changing tabs). But if we show the infobar, then the user goes to the tab switcher, we will close the infobar. Does that all sound correct to you?",
      "parentUuid": "fae3b9cf_dc0d87e9",
      "range": {
        "startLine": 83,
        "startChar": 8,
        "endLine": 89,
        "endChar": 11
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8818520_db083a25",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 118,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-09T22:13:17Z",
      "side": 1,
      "message": "While this may work now, I think it\u0027s prone to errors in the future. It should be reasonable for developers to assume #onCloseButtonClicked() is only called when the user clicks the close button.\n\n+mdjones@ - is there a better way to do this?",
      "range": {
        "startLine": 118,
        "startChar": 9,
        "endLine": 118,
        "endChar": 37
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63851cbf_68e48c6e",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 118,
      "author": {
        "id": 1135279
      },
      "writtenOn": "2017-11-09T22:22:28Z",
      "side": 1,
      "message": "This is an issue with the infobar api; we could add a method that calls to native (which is unfortunately necessary to properly close the infobar), but this event is relatively inert in the infobar base class.\n\nDaniel, can you add a todo for me to add a proper close method?",
      "parentUuid": "c8818520_db083a25",
      "range": {
        "startLine": 118,
        "startChar": 9,
        "endLine": 118,
        "endChar": 37
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b72190e_61f585d6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/infobar/SurveyInfoBar.java",
        "patchSetId": 13
      },
      "lineNbr": 118,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-10T01:24:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "63851cbf_68e48c6e",
      "range": {
        "startLine": 118,
        "startChar": 9,
        "endLine": 118,
        "endChar": 37
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6bc0201f_ebf0baa8",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 13
      },
      "lineNbr": 147,
      "author": {
        "id": 1122966
      },
      "writtenOn": "2017-11-10T16:33:29Z",
      "side": 1,
      "message": "I wonder if we need to guard against the tab finishing loading while it\u0027s in the background. For example, I think right now it\u0027s possible for something like this to happen:\n\n1. Get into this block, tab is still loading so we register an observer.\n2. User switches tabs\n3. Tab finishes loading, infobar is shown on tab\n4. User switches back to tab and sees survey",
      "range": {
        "startLine": 147,
        "startChar": 28,
        "endLine": 147,
        "endChar": 41
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eff90c88_0f833fc4",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/survey/ChromeHomeSurveyController.java",
        "patchSetId": 13
      },
      "lineNbr": 147,
      "author": {
        "id": 1227244
      },
      "writtenOn": "2017-11-15T01:17:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6bc0201f_ebf0baa8",
      "range": {
        "startLine": 147,
        "startChar": 28,
        "endLine": 147,
        "endChar": 41
      },
      "revId": "757d938f0ee6c2dbc65f3bc96b1510b050f6e5ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}