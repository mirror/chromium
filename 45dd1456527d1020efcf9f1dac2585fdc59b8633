{
  "comments": [
    {
      "key": {
        "uuid": "3717345d_abff3e2a",
        "filename": "android_webview/browser/aw_browser_main_parts.cc",
        "patchSetId": 3
      },
      "lineNbr": 123,
      "author": {
        "id": 1147299
      },
      "writtenOn": "2017-06-20T18:46:38Z",
      "side": 1,
      "message": "All this GUID stuff should be deduplicated with AwMetricsServiceClient. Also, since we\u0027re now doing file I/O synchronously, we should add some aggressive timeout value, just in case.",
      "range": {
        "startLine": 123,
        "startChar": 5,
        "endLine": 123,
        "endChar": 20
      },
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7981bee_8280781d",
        "filename": "android_webview/browser/aw_browser_main_parts.cc",
        "patchSetId": 3
      },
      "lineNbr": 123,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-06-20T21:58:57Z",
      "side": 1,
      "message": "One question I had was if we were going to synchronously read the file here, and later asynchronously read it when AwMetricsServiceClient is initialized, I don\u0027t think the service client is ready to store the ID at the time we need it while setting up fieldtrials.\n\nEither way, having both places reuse the same function should be easy enough. How would we implement the timeout on the I/O?",
      "parentUuid": "3717345d_abff3e2a",
      "range": {
        "startLine": 123,
        "startChar": 5,
        "endLine": 123,
        "endChar": 20
      },
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "043d239c_1e239df5",
        "filename": "android_webview/browser/aw_browser_main_parts.cc",
        "patchSetId": 3
      },
      "lineNbr": 123,
      "author": {
        "id": 1147299
      },
      "writtenOn": "2017-06-20T22:49:17Z",
      "side": 1,
      "message": "\u003e I don\u0027t think the service client is ready to store the ID\n\nYeah, just store the GUID for later. Perhaps as a static value in AwMetricsServiceClient? Or you could pass it to AwMetricsServiceClient::Initialize. Then you\u0027ll want to combine AwMetricsServiceClient::Initialize with AwMetricsServiceClient::InitializeWithGUID (they were only separated to support the asynchronous file access). And then if native initialization is no longer asynchronous, we can probably simplify some other things (see the block comments in AwMetricsServiceClient.java and aw_metrics_service_client.h).\n\n\u003e How would we implement the timeout on the I/O?\n\nCome to think of it, I don\u0027t think it\u0027s possible without threads (or signals, which would be rul ugly). Can we start a thread here just to do the read, and wait on that thread synchronously, with a timeout? No sure if possible. Maybe not worth it.",
      "parentUuid": "c7981bee_8280781d",
      "range": {
        "startLine": 123,
        "startChar": 5,
        "endLine": 123,
        "endChar": 20
      },
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c94f1fd_2f9f71f9",
        "filename": "android_webview/browser/aw_browser_main_parts.cc",
        "patchSetId": 3
      },
      "lineNbr": 146,
      "author": {
        "id": 1147299
      },
      "writtenOn": "2017-06-20T18:46:38Z",
      "side": 1,
      "message": "If I\u0027m reading base/logging.h correctly, this will do nothing (and so continue with no user_data_dir, which we definitely don\u0027t want) in release builds, and crash in debug builds (not sure whether we want that).",
      "range": {
        "startLine": 146,
        "startChar": 4,
        "endLine": 146,
        "endChar": 14
      },
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dec457fb_65e39577",
        "filename": "android_webview/browser/aw_browser_main_parts.cc",
        "patchSetId": 3
      },
      "lineNbr": 146,
      "author": {
        "id": 1223121
      },
      "writtenOn": "2017-06-20T21:58:57Z",
      "side": 1,
      "message": "I\u0027ll change it around so that if the check fails we don\u0027t enable field trials on this run, if that seems reasonable to you.",
      "parentUuid": "2c94f1fd_2f9f71f9",
      "range": {
        "startLine": 146,
        "startChar": 4,
        "endLine": 146,
        "endChar": 14
      },
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afb81442_57317343",
        "filename": "android_webview/browser/aw_browser_main_parts.cc",
        "patchSetId": 3
      },
      "lineNbr": 146,
      "author": {
        "id": 1147299
      },
      "writtenOn": "2017-06-20T22:49:17Z",
      "side": 1,
      "message": "Sure.",
      "parentUuid": "dec457fb_65e39577",
      "range": {
        "startLine": 146,
        "startChar": 4,
        "endLine": 146,
        "endChar": 14
      },
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28b03bb0_e69df7d9",
        "filename": "android_webview/browser/aw_browser_main_parts.cc",
        "patchSetId": 3
      },
      "lineNbr": 159,
      "author": {
        "id": 1129010
      },
      "writtenOn": "2017-06-19T23:55:48Z",
      "side": 1,
      "message": "I think the major work to be done here is to extract the common part between this method and ChromeBrowserMainParts::SetupFieldTrials() and call this common part from two places.\n\nIt seems like the common part needs an entropy provider, a FlagsStorage and a VariationService. How are you going to create a variation service?",
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "713562c4_1291600e",
        "filename": "android_webview/browser/aw_browser_main_parts.h",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1129010
      },
      "writtenOn": "2017-06-19T23:55:48Z",
      "side": 1,
      "message": "Not used in this header?",
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b91d4cf_2138c486",
        "filename": "android_webview/browser/aw_browser_main_parts.h",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1129010
      },
      "writtenOn": "2017-06-19T23:55:48Z",
      "side": 1,
      "message": "Not used in this header?",
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f3778b8_18b1439f",
        "filename": "android_webview/browser/aw_browser_main_parts.h",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1129010
      },
      "writtenOn": "2017-06-19T23:55:48Z",
      "side": 1,
      "message": "s/entire browser/entire application/ ?\n\nstd::unique_ptr is called \"empty\" when not initialized, so s/nullptr/empty/",
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fce2ff8_8fda37b5",
        "filename": "android_webview/browser/aw_browser_main_parts.h",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1129010
      },
      "writtenOn": "2017-06-19T23:55:48Z",
      "side": 1,
      "message": "Move this declaration up to the other data members, by convention DISALLOW_COPY_AND_ASSIGN() should be last one.",
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ea2e395_1ce1b4d4",
        "filename": "android_webview/browser/aw_metrics_service_client.cc",
        "patchSetId": 3
      },
      "lineNbr": 72,
      "author": {
        "id": 1129010
      },
      "writtenOn": "2017-06-19T23:55:48Z",
      "side": 1,
      "message": "I see only white space differences, remove this file from CL then.",
      "revId": "45dd1456527d1020efcf9f1dac2585fdc59b8633",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}