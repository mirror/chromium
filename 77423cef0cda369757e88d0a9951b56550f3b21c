{
  "comments": [
    {
      "key": {
        "uuid": "d7e0bb03_fe7a4267",
        "filename": "content/renderer/media/media_factory.cc",
        "patchSetId": 16
      },
      "lineNbr": 95,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "Usually we lazy bound mojo interfaces.\n\nHere\u0027s an example: https://cs.chromium.org/chromium/src/components/autofill/content/renderer/autofill_agent.cc?rcl\u003dfabec6f7debd266555a11c09be9344331ab20311\u0026l\u003d810\n\nActually, see below comment about whether we can pass down remote_interfaces_ directly and get rid of the provider interface.",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a82eb4a_d53e021d",
        "filename": "content/renderer/media/media_factory.cc",
        "patchSetId": 16
      },
      "lineNbr": 95,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-27T00:51:04Z",
      "side": 1,
      "message": "Done. Moved to CreateMediaPlayer() where we create other globals needed for WMPI.",
      "parentUuid": "d7e0bb03_fe7a4267",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2e5c6a7_7fd32b1d",
        "filename": "media/base/ipc/media_param_traits_macros.h",
        "patchSetId": 16
      },
      "lineNbr": 117,
      "author": {
        "id": 1001500
      },
      "writtenOn": "2017-07-24T21:56:40Z",
      "side": 1,
      "message": "Can\u0027t we use IPC_ENUM_TRAITS_MAX_VALUE? Since all the values are consecutive and start at 0, we don\u0027t need to convert to string to validate, we can just look at the range of the enum values. Or am I missing something more subtle?",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "836773ab_6663ca28",
        "filename": "media/base/ipc/media_param_traits_macros.h",
        "patchSetId": 16
      },
      "lineNbr": 117,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-24T22:09:12Z",
      "side": 1,
      "message": "No you\u0027re not missing anything that seems reasonable; I\u0027m not sure what I was thinking when I wrote this.",
      "parentUuid": "b2e5c6a7_7fd32b1d",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9513f1d9_f80233e9",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 21,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "nit: Add a brief comment about what this is. Actually, is there a good doc/link to know what this exactly means? I tracked it all the ways down to TabAndroid::EnableEmbeddedMediaExperience() can still couldn\u0027t find a good comment/description about this feature. We should at least document it in media interfaces.",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16b05fe9_6cfb5732",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 21,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-27T00:51:04Z",
      "side": 1,
      "message": "Oof, didn\u0027t realize this isn\u0027t documented anywhere. Done.",
      "parentUuid": "9513f1d9_f80233e9",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7771ced8_32f934d0",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 22,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "1. \"natural size\"? Or add a comment about what size we are reporting.\n2. \"initial size\"? Or add a comment about this. Basically we are not always creating a new WatchTimeRecorder when video resolution changes, which seems to contradict the comment on line 13.",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb90c7d9_0c586d82",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 22,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-25T18:33:09Z",
      "side": 1,
      "message": "Will switch to natural_size. You\u0027re currently correct, but that\u0027s intention since I\u0027m avoiding any functional changes in this CL. I\u0027ll address that in followup CLs that prepare us better for UKM reporting.",
      "parentUuid": "7771ced8_32f934d0",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f3e8613_7c5fac1d",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 30,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "here and below, s/histograms/UMA? Not all histograms are UMA...",
      "range": {
        "startLine": 30,
        "startChar": 30,
        "endLine": 30,
        "endChar": 40
      },
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa6e9a9d_5b8d3d08",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 30,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-27T00:51:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9f3e8613_7c5fac1d",
      "range": {
        "startLine": 30,
        "startChar": 30,
        "endLine": 30,
        "endChar": 40
      },
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8bb3820_5e846165",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 37,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "nit: Is |watch_time| based on media time or wall time?",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37764fa6_3ca4b7c2",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 37,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-27T00:51:04Z",
      "side": 1,
      "message": "Done. But also said added comment directly such questions to WatchTimeReporter.",
      "parentUuid": "a8bb3820_5e846165",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c60f5cdf_675b7120",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 53,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "I don\u0027t see anything wrong with a SetPlaybackProperties() type method, which is pretty much like an Initialize() method, which is fairly common given that there\u0027s no \"constructor\" that can pass initial parameters when using mojo.\n\nBut from the code, it seems the biggest benefit is that all MediaPlayers in the same RenderFrame can use this provider interface to create it\u0027s own recorder. \n\nAn alternative solution would be to pass MediaFactory::remote_interfaces_ to WMPI, which can be used to connect to the WatchTimeRecorder interface directly. After immediately after the connection, call Initialize() to pass the |properties|. (In the future, if WMPI needs other mojo services, it can reuse |remote_interfaces_|.)\n\nPersonally I feel this would be cleaner. But I don\u0027t have a strong opinion on this.",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69213283_c80dd191",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 53,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-25T18:33:09Z",
      "side": 1,
      "message": "Per many previous discussions the mojo team actively dislikes interfaces that have one-time setters. See discussion on both the mojo audio APIs as well as the single sample metric API. I.e., we should have no new mojo APIs that have an Initialize() or type method (barring those that are used far from where they\u0027re created).\n\nI agree with them, it\u0027s better to have a separate provider interface for one time properties given current mojom constructs. That said... I\u0027d love it if mojom allowed the expression of a constructor type so we didn\u0027t need to define multiple interfaces like this.",
      "parentUuid": "c60f5cdf_675b7120",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97583690_e0afb142",
        "filename": "media/mojo/interfaces/watch_time_recorder.mojom",
        "patchSetId": 16
      },
      "lineNbr": 53,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T18:35:45Z",
      "side": 1,
      "message": "I didn\u0027t follow these discussions. SGTM and thanks for the info!",
      "parentUuid": "69213283_c80dd191",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e9e47dc_a6fdc317",
        "filename": "media/mojo/services/watch_time_recorder.h",
        "patchSetId": 16
      },
      "lineNbr": 12,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "not needed?",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21521854_94abebf1",
        "filename": "media/mojo/services/watch_time_recorder.h",
        "patchSetId": 16
      },
      "lineNbr": 12,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-27T00:51:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9e9e47dc_a6fdc317",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a020973_3f9bbf22",
        "filename": "media/mojo/services/watch_time_recorder.h",
        "patchSetId": 16
      },
      "lineNbr": 32,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "nit: s/value/watch_time to be consistent with the interface",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab12abb0_80d3558c",
        "filename": "media/mojo/services/watch_time_recorder.h",
        "patchSetId": 16
      },
      "lineNbr": 32,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-27T00:51:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a020973_3f9bbf22",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "984cbed6_32dd9d44",
        "filename": "media/mojo/services/watch_time_recorder_unittest.cc",
        "patchSetId": 16
      },
      "lineNbr": 22,
      "author": {
        "id": 1002182
      },
      "writtenOn": "2017-07-25T05:51:59Z",
      "side": 1,
      "message": "nit: no need for \"static\" here",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee3be31a_88fdae4f",
        "filename": "media/mojo/services/watch_time_recorder_unittest.cc",
        "patchSetId": 16
      },
      "lineNbr": 22,
      "author": {
        "id": 1001250
      },
      "writtenOn": "2017-07-27T00:51:04Z",
      "side": 1,
      "message": "This isn\u0027t an anonymous namespace, so I thought it is needed?",
      "parentUuid": "984cbed6_32dd9d44",
      "revId": "77423cef0cda369757e88d0a9951b56550f3b21c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}