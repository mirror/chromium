{
  "comments": [
    {
      "key": {
        "uuid": "51e3e85e_94b897b7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 8,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-10T06:17:15Z",
      "side": 1,
      "message": "Could you describe more about the refreshment of Mojo connection and the IPC ordering?",
      "revId": "650ddd3b033e30e54c260558ebfcead5ead5f458",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b49894d0_2eb3dc74",
        "filename": "content/browser/service_worker/service_worker_registration_handle.h",
        "patchSetId": 6
      },
      "lineNbr": 83,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-10T06:17:15Z",
      "side": 1,
      "message": "Could you have a bit more detail explanation about the rebound mechanism?",
      "revId": "650ddd3b033e30e54c260558ebfcead5ead5f458",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "09f19c9c_55a29b6b",
        "filename": "content/child/service_worker/web_service_worker_registration_impl.h",
        "patchSetId": 6
      },
      "lineNbr": 46,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-10T06:17:15Z",
      "side": 1,
      "message": "I feel \"RegistrationObject\" is WebSWRegistrationImpl itself. RefreshConnection() or something might be better.",
      "revId": "650ddd3b033e30e54c260558ebfcead5ead5f458",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a6ab425_a4647cee",
        "filename": "content/child/service_worker/web_service_worker_registration_impl.h",
        "patchSetId": 6
      },
      "lineNbr": 116,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-10T06:17:15Z",
      "side": 1,
      "message": "Could you describe a bit more detail? The reconnection mechanism is a bit complicated to understand since usually |binding_| is kept during whole lifecycle of the owner.\n\nThis keeps the Mojo connection to the content::ServiceWorkerRegistrationHandle in the browser process, and the connection retains the reference to the registration object on the browser. If another Mojo connection to the same registration is passed from the browser (e.g. WebSWProviderImpl::OnDidGetRegistration()), |binding_| is refreshed with the new connection by RebindRegistrationObject().",
      "revId": "650ddd3b033e30e54c260558ebfcead5ead5f458",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba32213a_cfc9d35a",
        "filename": "content/child/service_worker/web_service_worker_registration_impl.h",
        "patchSetId": 6
      },
      "lineNbr": 116,
      "author": {
        "id": 1161621
      },
      "writtenOn": "2017-10-10T14:09:09Z",
      "side": 1,
      "message": "After all the rebinding mechanism is unusual and tricky, it\u0027s not a good pattern. I\u0027ve come up with another idea: make WebSWRegistrationImpl lifetime be tied with SWRegistrationHandle to maintain a real 1:1 correspondence between them. Will upload a new patch soon.",
      "parentUuid": "5a6ab425_a4647cee",
      "revId": "650ddd3b033e30e54c260558ebfcead5ead5f458",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "995caa9b_b509d275",
        "filename": "third_party/WebKit/public/platform/modules/serviceworker/service_worker_registration.mojom",
        "patchSetId": 6
      },
      "lineNbr": 48,
      "author": {
        "id": 1125915
      },
      "writtenOn": "2017-10-10T06:17:15Z",
      "side": 1,
      "message": "IIUC, it\u0027s not optional on ps6.",
      "range": {
        "startLine": 48,
        "startChar": 45,
        "endLine": 48,
        "endChar": 46
      },
      "revId": "650ddd3b033e30e54c260558ebfcead5ead5f458",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebd05133_ddeee7c9",
        "filename": "third_party/WebKit/public/platform/modules/serviceworker/service_worker_registration.mojom",
        "patchSetId": 6
      },
      "lineNbr": 48,
      "author": {
        "id": 1161621
      },
      "writtenOn": "2017-10-10T14:09:09Z",
      "side": 1,
      "message": "For almost all cases it should be non-null, the only exception is at here https://cs.chromium.org/chromium/src/content/browser/service_worker/service_worker_provider_host.cc?rcl\u003da60f61d3264412d6e259772d9f3657935afb36f7\u0026l\u003d1124, |handle_id| would be invalid id and both |request| and |host_ptr_info| would be nullptr.",
      "parentUuid": "995caa9b_b509d275",
      "range": {
        "startLine": 48,
        "startChar": 45,
        "endLine": 48,
        "endChar": 46
      },
      "revId": "650ddd3b033e30e54c260558ebfcead5ead5f458",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}