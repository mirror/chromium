{
  "comments": [
    {
      "key": {
        "uuid": "8c01292c_c4b29f0c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1132404
      },
      "writtenOn": "2018-01-12T23:22:37Z",
      "side": 1,
      "message": "please format this better, seems to be all on one line.",
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80cd0120_fd2e8c58",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1259934
      },
      "writtenOn": "2018-01-16T00:38:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8c01292c_c4b29f0c",
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b1bfb699_28515d08",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsComponent.java",
        "patchSetId": 3
      },
      "lineNbr": 88,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-12T16:32:43Z",
      "side": 1,
      "message": "flags should not be needed. It is not calling startActivity anyway.",
      "range": {
        "startLine": 88,
        "startChar": 19,
        "endLine": 88,
        "endChar": 27
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90ab7896_f1ab3f59",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsComponent.java",
        "patchSetId": 3
      },
      "lineNbr": 88,
      "author": {
        "id": 1259934
      },
      "writtenOn": "2018-01-12T21:10:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b1bfb699_28515d08",
      "range": {
        "startLine": 88,
        "startChar": 19,
        "endLine": 88,
        "endChar": 27
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b7f080d_c8ea4c45",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsComponent.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-12T16:32:43Z",
      "side": 1,
      "message": "Is there a reason for not using LocalBroadcastManager?",
      "range": {
        "startLine": 89,
        "startChar": 12,
        "endLine": 89,
        "endChar": 19
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a9ec69f_1f9c888b",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsComponent.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1259934
      },
      "writtenOn": "2018-01-12T21:10:26Z",
      "side": 1,
      "message": "LocalBroadcastManager.getInstance(context) has a different object as we get in launcher activity.",
      "parentUuid": "8b7f080d_c8ea4c45",
      "range": {
        "startLine": 89,
        "startChar": 12,
        "endLine": 89,
        "endChar": 19
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "444361f0_8748bddf",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsFragment.java",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-18T19:23:16Z",
      "side": 1,
      "message": "Isn\u0027t it also done in Activity?\n\nI think you can just remove it here.",
      "range": {
        "startLine": 47,
        "startChar": 8,
        "endLine": 53,
        "endChar": 91
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a77081c_c598ee7d",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsFragment.java",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1259934
      },
      "writtenOn": "2018-01-19T04:21:59Z",
      "side": 1,
      "message": "Yes. It\u0027s to be controlled in host activity.",
      "parentUuid": "444361f0_8748bddf",
      "range": {
        "startLine": 47,
        "startChar": 8,
        "endLine": 53,
        "endChar": 91
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14e5e064_a1c5e5b4",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsFragment.java",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-12T16:32:43Z",
      "side": 1,
      "message": "Whats the difference between this whole function and just \"return ContextUtil.getApplicationContext()\" ?",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 76,
        "endChar": 87
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bab67a5a_e6d7e7f5",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsFragment.java",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1259934
      },
      "writtenOn": "2018-01-12T21:10:26Z",
      "side": 1,
      "message": "super.getContext().createPackageContext() is created by the host activity\u0027s base context, which will pass the main thread of the activity to this context.",
      "parentUuid": "14e5e064_a1c5e5b4",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 76,
        "endChar": 87
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10b067b6_7ba360e3",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsFragment.java",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-18T19:23:16Z",
      "side": 1,
      "message": "Could you point me to source of this information? I wasn\u0027t able to find any.\n\nAlso adding logging seems to indicate the same.\n01-18 20:20:27.878  2350  2350 I cr_CastWebContentFrg: getContext: ContextUtils.getApplicationContext().getMainLooper().getThread() \u003d Thread[main,5,main]\n01-18 20:20:27.878  2350  2350 I cr_CastWebContentFrg: getContext: mPackageContext.getMainLooper().getThread() \u003d Thread[main,5,main]",
      "parentUuid": "bab67a5a_e6d7e7f5",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 76,
        "endChar": 87
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f99cbb77_675a1ce6",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsFragment.java",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1259934
      },
      "writtenOn": "2018-01-19T04:29:12Z",
      "side": 1,
      "message": "Please find it here: https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/app/ContextImpl.java#2028\n\nThe mMainThread will be passed to the newly created context object. I will double think if it is safe to directly use ContextUtils.getApplicationContext(), which is created when creating mediashell application.",
      "parentUuid": "10b067b6_7ba360e3",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 76,
        "endChar": 87
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36a5b243_cc1566d6",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsFragment.java",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "Thanks for link and explanation.\n\nI think we would crash a lot if this is true: most of android UI stuff depends on being run on main thread (aka UI thread).\n\nI think also it is always using the same thread, see (same android directory as in your answer):\n * ActivityThread#main (it is application entry point) - it creates single ActivityThread instance,\n * ActivityThread#getLoadedApk - passes this instance to LoadedApk constructor,\n * LoadedApk#makeApplication - uses ActivityThread as mainThread argument to ContextImpl#createAppContext.\n\nAlso: call to createPackageContext would most likely never get to creating new context as one of first lines in ActivityThread#getLoadedApk (called from ContextImpl#createPackageContext) is looking for instance of existing context in its cache.\n\nThis makes this function equivalent to:\n  if (mPackageContext \u003d\u003d null) mPackageContext \u003d ContextUtils.getApplicationContext();\n  return mPackageContext;",
      "parentUuid": "f99cbb77_675a1ce6",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 76,
        "endChar": 87
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7617d258_63f88d17",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "shouldn\u0027t it be app context?\n\n(this most likely doesn\u0027t crash as LocalBroadcastManager.getInstance was most likely called before with correct context and it will use only context value from first call).\n\nI think it is worth fixing as we shouldn\u0027t be using activity as a context. I think it would be cleaner if code here used Activity when host activity is needed and context when it needs just context (possibly appContext).\n\nAnyway: I think it doesn\u0027t crash, but you are doing great work building this fragment. I think if you have time it would be nice to make it a bit more future-proof at the same time.\n\nI\u0027ve added \"context\" comment in places where I think we could use this explicit appContext.",
      "range": {
        "startLine": 100,
        "startChar": 46,
        "endLine": 100,
        "endChar": 57
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d71756e0_cac44f0b",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 113,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "I think it should be also enabled in fragment mode.",
      "range": {
        "startLine": 113,
        "startChar": 13,
        "endLine": 113,
        "endChar": 28
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4257b6de_c4e9c42d",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 119,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context",
      "range": {
        "startLine": 119,
        "startChar": 42,
        "endLine": 119,
        "endChar": 53
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d3124dc_7b5acec8",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 123,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "correct context needed.",
      "range": {
        "startLine": 123,
        "startChar": 46,
        "endLine": 123,
        "endChar": 57
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea29975c_263bfede",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 137,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context",
      "range": {
        "startLine": 137,
        "startChar": 42,
        "endLine": 137,
        "endChar": 53
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8de442bd_be112d05",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 154,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context",
      "range": {
        "startLine": 154,
        "startChar": 42,
        "endLine": 154,
        "endChar": 53
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f3da1f2_5ceef291",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 175,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "Can we switch that to local broadcast? It doesn\u0027t need to go to other processes.",
      "range": {
        "startLine": 175,
        "startChar": 24,
        "endLine": 175,
        "endChar": 35
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a53858d5_07318b9d",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 199,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context?",
      "range": {
        "startLine": 199,
        "startChar": 59,
        "endLine": 199,
        "endChar": 70
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc9c0fa0_36060adc",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 242,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context?",
      "range": {
        "startLine": 242,
        "startChar": 55,
        "endLine": 242,
        "endChar": 66
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "572bca52_e221e37c",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 295,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context",
      "range": {
        "startLine": 295,
        "startChar": 46,
        "endLine": 295,
        "endChar": 57
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2ba29aa_423cabae",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 300,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context",
      "range": {
        "startLine": 300,
        "startChar": 46,
        "endLine": 300,
        "endChar": 57
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "149b1efa_7297a96c",
        "filename": "chromecast/browser/android/apk/src/org/chromium/chromecast/shell/CastWebContentsSurfaceHelper.java",
        "patchSetId": 3
      },
      "lineNbr": 305,
      "author": {
        "id": 1206742
      },
      "writtenOn": "2018-01-19T10:21:00Z",
      "side": 1,
      "message": "context",
      "range": {
        "startLine": 305,
        "startChar": 46,
        "endLine": 305,
        "endChar": 57
      },
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62b30eb4_afaa2568",
        "filename": "chromecast/browser/android/cast_web_contents_surface_helper.h",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 1132404
      },
      "writtenOn": "2018-01-12T23:22:37Z",
      "side": 1,
      "message": "nit, no need for \u0027explicit\u0027",
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61a725c9_d519e706",
        "filename": "chromecast/browser/android/cast_web_contents_surface_helper.h",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 1259934
      },
      "writtenOn": "2018-01-16T00:38:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "62b30eb4_afaa2568",
      "revId": "848967293f8d9e0115ff9262f8461c18bbdbbf34",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}