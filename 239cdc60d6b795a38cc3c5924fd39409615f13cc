{
  "comments": [
    {
      "key": {
        "uuid": "48be78a7_2a2d13cf",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-12-08T19:25:25Z",
      "side": 1,
      "message": "Can we just do needs_blur !\u003d is_wallpaper_blurred_ ?",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b3ee579_243a4f9f",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 330,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2017-12-08T21:15:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "48be78a7_2a2d13cf",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "85a6bb27_f14197b2",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 345,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-12-08T19:25:25Z",
      "side": 1,
      "message": "I think we need to move everything to the if block, since we only want to notify observers when there\u0027s indeed a change.",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d92fc00a_bb5a7975",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 345,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2017-12-08T21:15:30Z",
      "side": 1,
      "message": "Is it fine to do it once like or do I need move into if block?",
      "parentUuid": "85a6bb27_f14197b2",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2f1a782_3ca0469b",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 345,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-12-08T21:56:33Z",
      "side": 1,
      "message": "Sorry I misread the code. I meant it should be inside the \u0027if (needs_blur !\u003d is_wallpaper_blurred_)\u0027 block but it\u0027s already within it. So maybe it\u0027s better to use your original patch.. Sorry about that.",
      "parentUuid": "d92fc00a_bb5a7975",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aeee54a2_9cd10ea9",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 345,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2017-12-09T02:15:30Z",
      "side": 1,
      "message": "No problem! Done.",
      "parentUuid": "a2f1a782_3ca0469b",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b21e7ea_63a73f82",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 695,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-12-08T19:25:25Z",
      "side": 1,
      "message": "It seems that\n\nsession_controller-\u003eIsUserSessionBlocked() ||\nsession_controller-\u003eIsUnlocking()\n\nis the same with\n\nSessionState state \u003d Shell::Get()-\u003esession_controller()-\u003eGetSessionState();\nstate !\u003d SessionState::ACTIVE \u0026\u0026\nstate !\u003d SessionState::LOGGED_IN_NOT_ACTIVE\n\nIf so can we directly check session state, so that you don\u0027t need to add an is_unlocking getter?\n\nAnd my previous code had a useless part: when |is_unlocking| is set to true, OnSessionStateChanged() is not called, so there\u0027s no signal to let wallpaper_controller know that and remove blur immediately. It will wait until SessionState actually changed to ACTIVE anyway..\n\nSo I believe this CL actually makes blur removal earlier than before (though maybe not noticeable), since it removes blur right after the lock animation finishes, and doesn\u0027t wait until session state changes. If this is not intended, then we can even simplify |PrepareWallpaperForLockScreenChange(bool locked)| to something like |PrepareWallpaperForPreLock()| without taking a parameter, as a one-time blur setter, because we don\u0027t need to rely on it to remove blur. It\u0027s up to you..",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47586dae_99387376",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 695,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2017-12-08T21:15:30Z",
      "side": 1,
      "message": "1. We need blur removal for cancellable animation started with power button. If user lifts finger before going to lock screen we would stay with blurred wallpaper. Also it is needed to delay removal as explained in the next paragraph.\n\n2. It is not correct that this cl removes blur earlier. There are 2 parts of the animation: hiding lock screen animation and showing the non lock UI. Session state changes between those animations. Blur is removed now after the second animation finishes. It is later than it used to be and also noticeable to the user therefore.\nSo I cannot remove the check for |is_unlocking|.\n\nWDYT?",
      "parentUuid": "4b21e7ea_63a73f82",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06e658db_1574f8c6",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 695,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-12-08T21:56:33Z",
      "side": 1,
      "message": "I see. Thanks! After offline discussion, after views-based login is available, we may consider letting login/lock screen completely control the timing of blur and dimming, instead of the wallpaper controller.",
      "parentUuid": "47586dae_99387376",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c506b049_a3f9aa41",
        "filename": "ash/wallpaper/wallpaper_controller.cc",
        "patchSetId": 8
      },
      "lineNbr": 695,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2017-12-09T02:15:30Z",
      "side": 1,
      "message": "Yea. Definitely refactoring of the whole blur/dim logic would be nice.\nThank you!",
      "parentUuid": "06e658db_1574f8c6",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1e3d552_14937698",
        "filename": "ash/wallpaper/wallpaper_controller.h",
        "patchSetId": 8
      },
      "lineNbr": 162,
      "author": {
        "id": 1179965
      },
      "writtenOn": "2017-12-08T19:25:25Z",
      "side": 1,
      "message": "Maybe add crbug.com/775591 back to the comments?",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba4b5d8c_8e69e957",
        "filename": "ash/wallpaper/wallpaper_controller.h",
        "patchSetId": 8
      },
      "lineNbr": 162,
      "author": {
        "id": 1248360
      },
      "writtenOn": "2017-12-08T21:15:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d1e3d552_14937698",
      "revId": "239cdc60d6b795a38cc3c5924fd39409615f13cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}