{
  "comments": [
    {
      "key": {
        "uuid": "4daefab0_5364af53",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-12-19T18:39:21Z",
      "side": 1,
      "message": "@VisibleForTesting?",
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52745fea_c40c00da",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1209769
      },
      "writtenOn": "2017-12-19T20:24:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4daefab0_5364af53",
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fa45c0c_dac356b7",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-12-19T18:39:21Z",
      "side": 1,
      "message": "Just to be on the safe side, create the Handler with ThreadUtils.getUiThreadLooper()?",
      "range": {
        "startLine": 100,
        "startChar": 41,
        "endLine": 100,
        "endChar": 50
      },
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9452efaa_a6309489",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1209769
      },
      "writtenOn": "2017-12-19T20:24:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5fa45c0c_dac356b7",
      "range": {
        "startLine": 100,
        "startChar": 41,
        "endLine": 100,
        "endChar": 50
      },
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a9346ac_40e41541",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 149,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-12-19T18:39:21Z",
      "side": 1,
      "message": "Hm, suppressing promos doesn\u0027t affect existing promos, but the suppression expiring will? I think we could simplify the implementation by a good amount if we didn\u0027t require that. (And it would only make a difference if the SigninPromo stays around for more than 24h)",
      "range": {
        "startLine": 148,
        "startChar": 81,
        "endLine": 149,
        "endChar": 55
      },
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "215ac356_14416fdf",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 149,
      "author": {
        "id": 1209769
      },
      "writtenOn": "2017-12-19T20:24:09Z",
      "side": 1,
      "message": "This can make a difference if SignInPromo is created shortly before suppression period ends. I agree that checking it in constructor only would make things much easier.\nWhile reading the code in this file, I\u0027ve noticed something else related to suppression status checks - please see my next comment. We can decide about this one later.",
      "parentUuid": "9a9346ac_40e41541",
      "range": {
        "startLine": 148,
        "startChar": 81,
        "endLine": 149,
        "endChar": 55
      },
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4ba8d7a_14247dc6",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 149,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-12-20T11:01:27Z",
      "side": 1,
      "message": "\u003e This can make a difference if SignInPromo is created shortly before suppression period ends.\n\nHm, true. I guess it ultimately boils down to a product decision... But if we do the more complicated thing, there are a few more issues (see my other comment):",
      "parentUuid": "215ac356_14416fdf",
      "range": {
        "startLine": 148,
        "startChar": 81,
        "endLine": 149,
        "endChar": 55
      },
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bbefe64_12a43e8c",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1209769
      },
      "writtenOn": "2017-12-19T20:24:09Z",
      "side": 1,
      "message": "According to this comment, checking suppression value in constructor is not enough. This is strange, because I\u0027ve checked my CL manually and it indeed suppresses signin promos in NTP after refusing signin in NTP. Is the comment outdated or was I just lucky?\nIf NTP can be created before FRE is completed, then I have to listen to shared preference that stores suppression status.",
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31169dd5_9230e440",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-12-20T11:01:27Z",
      "side": 1,
      "message": "+Nicolas, who wrote that code\n\nIt\u0027s entirely possible that this dates back from when we used to show the FRE over an NTP and we don\u0027t do that now anymore.",
      "parentUuid": "0bbefe64_12a43e8c",
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7681dc97_5f335742",
        "filename": "chrome/android/java/src/org/chromium/chrome/browser/ntp/cards/SignInPromo.java",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1209769
      },
      "writtenOn": "2017-12-20T11:32:19Z",
      "side": 1,
      "message": "Thanks! Waiting for details from Nicolas.",
      "parentUuid": "31169dd5_9230e440",
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d8bf8da_6e7a9f53",
        "filename": "chrome/android/junit/src/org/chromium/chrome/browser/ntp/cards/NewTabPageAdapterTest.java",
        "patchSetId": 1
      },
      "lineNbr": 997,
      "author": {
        "id": 1209769
      },
      "writtenOn": "2017-12-19T15:49:04Z",
      "side": 1,
      "message": "I didn\u0027t use SignInPromo.temporarilySuppressPromos() here, because the rest of the test has to use shared preference anyway.",
      "range": {
        "startLine": 996,
        "startChar": 0,
        "endLine": 997,
        "endChar": 44
      },
      "revId": "eeb81907937f3651005ad5ec59700e92686f9e86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}