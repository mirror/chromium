{
  "comments": [
    {
      "key": {
        "uuid": "b7e88786_e883a7ce",
        "filename": "third_party/WebKit/Source/core/html/HTMLInputElement.cpp",
        "patchSetId": 1
      },
      "lineNbr": 438,
      "author": {
        "id": 1116047
      },
      "writtenOn": "2017-08-09T02:20:26Z",
      "side": 1,
      "message": "I think we don\u0027t need to add UpdatePlaceholderText() and UpdatePlaceholderVisibility(). UA Shadow DOM is re-created in this function, and input_type_view_-\u003eUpdateView() updates placeholder state.",
      "revId": "b1c029f8ac41617c90c7225d3c408c4911b63283",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "105333dd_dcf5bca8",
        "filename": "third_party/WebKit/Source/core/html/HTMLInputElement.cpp",
        "patchSetId": 1
      },
      "lineNbr": 438,
      "author": {
        "id": 1115751
      },
      "writtenOn": "2017-08-09T07:31:52Z",
      "side": 1,
      "message": "I first tried to just call PseudoStateChanged here, but that required two animation frames to update :placeholder-shown which would cause compat problems, I think. So what happens here without UpdatePlaceholder* is:\n\nFirst frame:\n\n* Updating style causes style invalidation of :placeholder-shown, but the shadow DOM is not created, placeholder visibility is not updated, so the style changes will not take effect\n* Layout tree building constructs the shadow DOM and attaches the layout objects, placeholder visibility is updated, and PseudoStateChanged is yet again called for kPseudoPlaceholderShown.\n* Painting without proper :placeholder-shown style.\n\nSecond frame:\n\n* The PseudoStateChanged from the previous frame invalidates style, and this time properly since the placeholder visibility was updated in the previous frame.\n* Painting with proper :placeholder-shown style.\n\n\nIf there is a better place to update the shadow dom and placeholder visibility, we can move the code, but it has to happen before the next style invalidation/recalc in order to work.",
      "parentUuid": "b7e88786_e883a7ce",
      "revId": "b1c029f8ac41617c90c7225d3c408c4911b63283",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77ec4e53_9feca88b",
        "filename": "third_party/WebKit/Source/core/html/HTMLInputElement.cpp",
        "patchSetId": 1
      },
      "lineNbr": 438,
      "author": {
        "id": 1116047
      },
      "writtenOn": "2017-08-09T07:47:14Z",
      "side": 1,
      "message": "Oh, I understand the situation!\n:placeholder-shown matching replies on HTMLInputElement::is_placeholder_visible_, and we need to do some extra work to update it.\n\nThis code is ok. Adding a comment would be helpful.",
      "parentUuid": "105333dd_dcf5bca8",
      "revId": "b1c029f8ac41617c90c7225d3c408c4911b63283",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}