{
  "comments": [
    {
      "key": {
        "uuid": "5eda7cf2_de7f5e88",
        "filename": "content/network/network_change_manager_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 40,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-03T14:44:34Z",
      "side": 1,
      "message": "This looks thread unsafe, can we add a DCHECK that we\u0027re on the right thread here?  What about the other functions in this class?",
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ec5c63e_01f71cf9",
        "filename": "content/network/network_change_manager_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 40,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-10-03T20:33:20Z",
      "side": 1,
      "message": "These few are mojo APIs. I think they are fine? I followed other examples like Randy\u0027s cookie_manager_impl.cc",
      "parentUuid": "5eda7cf2_de7f5e88",
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dab3cd63_a3c2cfbf",
        "filename": "content/network/network_change_manager_impl.cc",
        "patchSetId": 12
      },
      "lineNbr": 40,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-04T13:52:11Z",
      "side": 1,
      "message": "I\u0027d add sequence checks.  They\u0027re cheap and easy, and debugging a corrupt vector could be awful. NetworkChangeNotifier has been plagued by use on multiple threads; I don\u0027t want this API suffering any of that.",
      "parentUuid": "1ec5c63e_01f71cf9",
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1733149e_17d9406a",
        "filename": "content/network/network_change_manager_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 54,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-03T14:44:34Z",
      "side": 1,
      "message": "I love this explicit ownership.",
      "range": {
        "startLine": 54,
        "startChar": 71,
        "endLine": 54,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59c46677_be1c9f59",
        "filename": "content/network/network_change_manager_impl.h",
        "patchSetId": 12
      },
      "lineNbr": 54,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-10-03T20:33:20Z",
      "side": 1,
      "message": "My reviewers are happy, I am happy :)",
      "parentUuid": "1733149e_17d9406a",
      "range": {
        "startLine": 54,
        "startChar": 71,
        "endLine": 54,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "594e9e53_3d008ab7",
        "filename": "content/public/common/network_change_manager.mojom",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-03T14:44:34Z",
      "side": 1,
      "message": "can we add static asserts to verify every one of these is the same as net::ConnectionType?  (I assume not in this file, but some C++ file.)",
      "range": {
        "startLine": 7,
        "startChar": 61,
        "endLine": 7,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bb8fbde_ec53b93a",
        "filename": "content/public/common/network_change_manager.mojom",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-10-03T20:33:20Z",
      "side": 1,
      "message": "Done. Talked offline. Because mojo consumers will depend on mojo types and the translation code should be able to catch that. I also added a unit test.",
      "parentUuid": "594e9e53_3d008ab7",
      "range": {
        "startLine": 7,
        "startChar": 61,
        "endLine": 7,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2af29665_b95e0ba8",
        "filename": "content/public/common/network_change_manager.mojom",
        "patchSetId": 12
      },
      "lineNbr": 24,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-03T14:44:34Z",
      "side": 1,
      "message": "Can we link to the comment in network_change_notifier.h?",
      "range": {
        "startLine": 24,
        "startChar": 40,
        "endLine": 24,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c184d797_ee6b2b68",
        "filename": "content/public/common/network_change_manager.mojom",
        "patchSetId": 12
      },
      "lineNbr": 24,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-10-03T20:33:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2af29665_b95e0ba8",
      "range": {
        "startLine": 24,
        "startChar": 40,
        "endLine": 24,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf13f04f_357ac06d",
        "filename": "content/public/common/network_connection_tracker.h",
        "patchSetId": 12
      },
      "lineNbr": 46,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-03T14:44:34Z",
      "side": 1,
      "message": "Why isn\u0027t this method thread-safe?  When used on different threads at exactly the same time it should return the same value.  I think the type of a device\u0027s default network connection is inherently potentially stale, unless you\u0027re checking on the same thread as the system\u0027s connectivity service.",
      "range": {
        "startLine": 46,
        "startChar": 52,
        "endLine": 46,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e27ac52_4e5caea3",
        "filename": "content/public/common/network_connection_tracker.h",
        "patchSetId": 12
      },
      "lineNbr": 46,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-10-03T20:33:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bf13f04f_357ac06d",
      "range": {
        "startLine": 46,
        "startChar": 52,
        "endLine": 46,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b103fff5_71b3f009",
        "filename": "content/public/common/network_connection_tracker.h",
        "patchSetId": 12
      },
      "lineNbr": 47,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-03T14:44:34Z",
      "side": 1,
      "message": "any particular reason this isn\u0027t a simple getter with name get_connection_type and inlined?",
      "range": {
        "startLine": 47,
        "startChar": 50,
        "endLine": 47,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf886f19_00dca57a",
        "filename": "content/public/common/network_connection_tracker.h",
        "patchSetId": 12
      },
      "lineNbr": 47,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-10-03T20:33:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b103fff5_71b3f009",
      "range": {
        "startLine": 47,
        "startChar": 50,
        "endLine": 47,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a62ccd9_fd95d55b",
        "filename": "content/public/common/network_connection_tracker.h",
        "patchSetId": 12
      },
      "lineNbr": 67,
      "author": {
        "id": 1002888
      },
      "writtenOn": "2017-10-03T14:44:34Z",
      "side": 1,
      "message": "should this be volatile as it\u0027s read and written on different threads?",
      "range": {
        "startLine": 67,
        "startChar": 41,
        "endLine": 67,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88b63627_9637e6c1",
        "filename": "content/public/common/network_connection_tracker.h",
        "patchSetId": 12
      },
      "lineNbr": 67,
      "author": {
        "id": 1120845
      },
      "writtenOn": "2017-10-03T20:33:20Z",
      "side": 1,
      "message": "I am not sure if we should use \"volatile\" keyword here. We already specified that the connection_type() might be stale.\n The variable is written on one thread, though read on many threads.",
      "parentUuid": "1a62ccd9_fd95d55b",
      "range": {
        "startLine": 67,
        "startChar": 41,
        "endLine": 67,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5a33a7b_37be5d55",
        "filename": "content/public/common/network_connection_tracker.h",
        "patchSetId": 12
      },
      "lineNbr": 67,
      "author": {
        "id": 1115968
      },
      "writtenOn": "2017-10-03T20:44:00Z",
      "side": 1,
      "message": "He\u0027s right about volatile, nice catch Paul!  Just make this an Atomic32, and use (nobarrier) atomic methods to get/set it.  Volatile tells the compiler that the value may change on another thread without warning.  Atomic operations (Which use the volatile keyword, internally) also mean the value should be read in one go (e.g., some old systems could theoretically write memory 16 bits at a time or something, and could end up with half the value - no systems we run on actually do that anymore, though).\n\nThis will also prevent TSAN from complaining about accessing this on multiple threads without threading primitives protecting it.",
      "parentUuid": "88b63627_9637e6c1",
      "range": {
        "startLine": 67,
        "startChar": 41,
        "endLine": 67,
        "endChar": 0
      },
      "revId": "6a3fb5a9b68a4040dd2070b3f406cbcb17aae837",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}