{
  "comments": [
    {
      "key": {
        "uuid": "7beb27b1_37c95281",
        "filename": "chrome/browser/extensions/extension_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 976,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-09-19T01:46:43Z",
      "side": 1,
      "message": "extension sets were intended to be mutually exclusive; we probably shouldn\u0027t require and extension to be in multiple sets.",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cdf53049_98707480",
        "filename": "chrome/browser/extensions/extension_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 976,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-09-20T21:59:05Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "7beb27b1_37c95281",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3e79e85_a164bfce",
        "filename": "chrome/browser/extensions/extension_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 1362,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-09-19T01:46:43Z",
      "side": 1,
      "message": "This seems super subtle.  We need to know the inner logic of ExtensionRegistrar in order to know that RemoveExtension() deactivates the extension.",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f28858b8_07fd9de4",
        "filename": "chrome/browser/extensions/extension_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 1362,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-09-20T21:59:05Z",
      "side": 1,
      "message": "I think it\u0027s reasonable to assume RemoveExtension would deactivate an extension, so I don\u0027t want RemoveExtension to CHECK that the extension is already deactivated. We could call DeactivateExtension first, but that changes the behavior (it would get added to the disabled registry, then removed, possibly triggering observers that weren\u0027t being triggered before).\n\nHow about renaming to DeactivateAndRemoveExtension, to remove any confusion without unnecessarily moving the extension to the disabled list before removing it?",
      "parentUuid": "f3e79e85_a164bfce",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ade6a05_65d1a4bb",
        "filename": "chrome/browser/extensions/extension_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 1404,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-09-19T01:46:43Z",
      "side": 1,
      "message": "Why this change?",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7c8a876_729aeecb",
        "filename": "chrome/browser/extensions/extension_service.cc",
        "patchSetId": 3
      },
      "lineNbr": 1404,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-09-20T21:59:05Z",
      "side": 1,
      "message": "Some premature cleanup I shouldn\u0027t have kept -- reverting",
      "parentUuid": "4ade6a05_65d1a4bb",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02797ee4_8b0e1836",
        "filename": "extensions/browser/extension_registrar.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-09-19T01:46:43Z",
      "side": 1,
      "message": "I find it very confusing that we use totally different syntax than in the registry - how do we know what state extensions are expected to be in?  What\u0027s the motivation for the deviation?",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d02f945_422e47ff",
        "filename": "extensions/browser/extension_registrar.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-09-20T21:59:05Z",
      "side": 1,
      "message": "LoadExtension is incredibly confusing -- we use it to mean:\n\n1. read an extension from somewhere on disk in one of several ways and create an inert Extension object\n2. mark an extension enabled and notify the rest of the system about it so the hooks are set up to actually \"run\" it\n\nThe registry uses \"load\" in the first sense, so let\u0027s not call the 2nd sense \"loading\" as well.\n\nWe could use EnableExtension/DisableExtension, but these functions do more work than just adding the extension to ExtensionRegistry\u0027s enabled/disabled lists. There are also cases where we deactivate an extension without disabling it at all (terminated extensions), right? So re-using these terms seems more confusing than helpful.\n\nActivate, Deactivate and Remove are the best I could come up with, but feel free to suggest others.",
      "parentUuid": "02797ee4_8b0e1836",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe7e2cbe_7dcb0583",
        "filename": "extensions/browser/extension_registrar.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-09-21T01:00:55Z",
      "side": 1,
      "message": "Also, the next CL will move ExtensionService::EnableExtension here, so ActivateExtension will become a private implementation detail. Callers won\u0027t need to differentiate between activating/deactivating and enabling/disabling extensions, nor will ExtensionService manually update the enabled or disabled registry.\n\nI\u0027ll write up a design doc for you to review as that should make the overarching change (and hopefully improvement) clearer.",
      "parentUuid": "9d02f945_422e47ff",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f504230b_91f734b4",
        "filename": "extensions/browser/extension_registrar.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-09-21T15:14:50Z",
      "side": 1,
      "message": "\u003e LoadExtension is incredibly confusing -- we use it to mean:\nYes, LoadExtension is overloaded.  I think ActivateExtension (or similar) makes sense for the second case, because we\u0027re basically saying \"make this extension alive\".\n\n\u003e The registry uses \"load\" in the first sense, so let\u0027s not call the 2nd sense \"loading\" as well.\n\nWhich registry?  ExtensionRegistry uses \"loaded\" in the second sense, not the first - it triggers OnLoaded/OnUnloaded when the extension is added/removed from the enabled set, corresponding to when it\u0027s \"active\".\n\n\u003e We could use EnableExtension/DisableExtension, but these functions do more work than just adding the extension to ExtensionRegistry\u0027s enabled/disabled lists. There are also cases where we deactivate an extension without disabling it at all (terminated extensions), right? So re-using these terms seems more confusing than helpful.\n\nI\u0027m not sure I agree.  I think that we can reuse the same terminology as the registry and make activation/deactivation an internal detail of the registrar.  For instance,\n\n// Adds extension to the enabled set and activates it.\nEnableExtension()\n// Adds extension to the disabled set and deactivates it.\nDisableExtension()\n// Adds extension to the terminated set and deactivates it.\nTerminateExtension()\n// Deactivates the extension and removes it from all sets.\nRemoveExtension()\n\nThis way, we match terminology, and I think it\u0027s reasonably clear what each does.  Additionally, it ensures that we don\u0027t have enabled extensions that are deactivated, disabled extensions that are activated, etc.\n\nI agree that there are cases when we deactivate an extension without disabling it, as you said, but IMO that\u0027s a reason *not* to expose the method as \"deactivate\" :)",
      "parentUuid": "fe7e2cbe_7dcb0583",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "849e8f9c_a1cae3dd",
        "filename": "extensions/browser/extension_registrar.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-09-21T23:26:36Z",
      "side": 1,
      "message": "\u003e \u003e LoadExtension is incredibly confusing -- we use it to mean:\n\u003e Yes, LoadExtension is overloaded.  I think ActivateExtension (or similar) makes sense for the second case, because we\u0027re basically saying \"make this extension alive\".\n\u003e \n\u003e \u003e The registry uses \"load\" in the first sense, so let\u0027s not call the 2nd sense \"loading\" as well.\n\u003e \n\u003e Which registry?  ExtensionRegistry uses \"loaded\" in the second sense, not the first - it triggers OnLoaded/OnUnloaded when the extension is added/removed from the enabled set, corresponding to when it\u0027s \"active\".\n\nAh, you\u0027re right, it conflates \"loaded\" with \"enabled\". And I guess that makes sense from the perspective of the browser. But from the extension system\u0027s perspective loading and enabling are two different things. \n\n\u003e \n\u003e \u003e We could use EnableExtension/DisableExtension, but these functions do more work than just adding the extension to ExtensionRegistry\u0027s enabled/disabled lists. There are also cases where we deactivate an extension without disabling it at all (terminated extensions), right? So re-using these terms seems more confusing than helpful.\n\u003e \n\u003e I\u0027m not sure I agree.  I think that we can reuse the same terminology as the registry and make activation/deactivation an internal detail of the registrar.  For instance,\n\u003e \n\u003e // Adds extension to the enabled set and activates it.\n\u003e EnableExtension()\n\u003e // Adds extension to the disabled set and deactivates it.\n\u003e DisableExtension()\n\u003e // Adds extension to the terminated set and deactivates it.\n\u003e TerminateExtension()\n\u003e // Deactivates the extension and removes it from all sets.\n\u003e RemoveExtension()\n\u003e \n\u003e This way, we match terminology, and I think it\u0027s reasonably clear what each does.  Additionally, it ensures that we don\u0027t have enabled extensions that are deactivated, disabled extensions that are activated, etc.\n\nI\u0027m OK with this.\n\n\u003e \n\u003e I agree that there are cases when we deactivate an extension without disabling it, as you said, but IMO that\u0027s a reason *not* to expose the method as \"deactivate\" :)",
      "parentUuid": "f504230b_91f734b4",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3e0b7a6_bddbff24",
        "filename": "extensions/browser/extension_registrar.h",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1115745
      },
      "writtenOn": "2017-09-19T01:46:43Z",
      "side": 1,
      "message": "Add notes on lifetime.",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab8676bd_9f35eecc",
        "filename": "extensions/browser/extension_registrar.h",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1003321
      },
      "writtenOn": "2017-09-20T21:59:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a3e0b7a6_bddbff24",
      "revId": "8329a974ea6287a1ac5b583c1ff766071baf84cd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}