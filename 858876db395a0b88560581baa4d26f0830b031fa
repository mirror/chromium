{
  "comments": [
    {
      "key": {
        "uuid": "f8087774_01c695aa",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 97,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T19:26:11Z",
      "side": 1,
      "message": "This comment needs to be fixed.",
      "range": {
        "startLine": 97,
        "startChar": 2,
        "endLine": 97,
        "endChar": 76
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22d41b58_256324d9",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 97,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-07-13T20:11:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f8087774_01c695aa",
      "range": {
        "startLine": 97,
        "startChar": 2,
        "endLine": 97,
        "endChar": 76
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c0495d2f_96c484fe",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 99,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T19:26:11Z",
      "side": 1,
      "message": "You always get the first global scope. Is this what you want?",
      "range": {
        "startLine": 99,
        "startChar": 9,
        "endLine": 99,
        "endChar": 33
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcadd392_0360485f",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 99,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-07-13T20:11:31Z",
      "side": 1,
      "message": "No. In this CL, my intention is to make sure that the architecture change is good and makes all bots happy. In a follow up CL, I will change the logic here. For example, we can switch to another global scope every 60 frames or so. Does that make sense.",
      "parentUuid": "c0495d2f_96c484fe",
      "range": {
        "startLine": 99,
        "startChar": 9,
        "endLine": 99,
        "endChar": 33
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16551f36_b50bf37e",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 99,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T20:31:14Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "bcadd392_0360485f",
      "range": {
        "startLine": 99,
        "startChar": 9,
        "endLine": 99,
        "endChar": 33
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f1783718_197dbe02",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 140,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T19:26:11Z",
      "side": 1,
      "message": "What if addModule() called 3 times? Then how many global scope do you have here?",
      "range": {
        "startLine": 140,
        "startChar": 4,
        "endLine": 140,
        "endChar": 60
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e788ddf1_a9ae8086",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 140,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-07-13T20:11:31Z",
      "side": 1,
      "message": "Not sure what do you mean here? Right now NeedsToCreateGlobalScope() function will make sure that the number of global scope is \u003c\u003d 2.",
      "parentUuid": "f1783718_197dbe02",
      "range": {
        "startLine": 140,
        "startChar": 4,
        "endLine": 140,
        "endChar": 60
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "302b07f9_06e30b75",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.cpp",
        "patchSetId": 12
      },
      "lineNbr": 140,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T20:31:14Z",
      "side": 1,
      "message": "Got it. Now I saw the change in PaintWorklet.",
      "parentUuid": "e788ddf1_a9ae8086",
      "range": {
        "startLine": 140,
        "startChar": 4,
        "endLine": 140,
        "endChar": 60
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1da1f1ab_4ce9a74b",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.h",
        "patchSetId": 12
      },
      "lineNbr": 68,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T19:26:11Z",
      "side": 1,
      "message": "Perhaps we can make it optional with \"\u003d 1\". However, I prefer to make this change specific to PaintWorklet if possible.",
      "range": {
        "startLine": 68,
        "startChar": 6,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a1357a7_f4de7216",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.h",
        "patchSetId": 12
      },
      "lineNbr": 68,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-07-13T20:11:31Z",
      "side": 1,
      "message": "The idea is up to debate. I see two options:\n1. Pass a parameter like what it is now. (I can give it a default value).\n2. Keep a static instance count in PaintWorkletGlobalScope class.\nBoth majidvp@ and flackr@ seem to favor the second one.",
      "parentUuid": "1da1f1ab_4ce9a74b",
      "range": {
        "startLine": 68,
        "startChar": 6,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6b7badf_c9849d42",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.h",
        "patchSetId": 12
      },
      "lineNbr": 68,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T20:31:14Z",
      "side": 1,
      "message": "Understood. I agree with the second one as well for AudioWorklet.",
      "parentUuid": "6a1357a7_f4de7216",
      "range": {
        "startLine": 68,
        "startChar": 6,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a5950e7_5a65c091",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.h",
        "patchSetId": 12
      },
      "lineNbr": 68,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-07-14T12:12:26Z",
      "side": 1,
      "message": "Err, my mistake. Both flackr@ and majidvp@ seems to like the first idea better.",
      "parentUuid": "f6b7badf_c9849d42",
      "range": {
        "startLine": 68,
        "startChar": 6,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce452759_fd55b61d",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.h",
        "patchSetId": 12
      },
      "lineNbr": 68,
      "author": {
        "id": 1125304
      },
      "writtenOn": "2017-07-14T16:32:32Z",
      "side": 1,
      "message": "Right, I would have preferred to avoid an internal static variable if we can.\n\nBut now thinking about it more, it seems the right way to think about this is\nnot a count but rather a \"unique id\" per scope. In which case I can see how it\nis better to have the GlobalScope constructor be in charge of generating an \nuid for itself rather that receiving it from the worklet. The fact that these\nid\u0027s are sequential is just incidental.\n\nIn that light, I also suggest changing the name to be id_ rather than count\nand going with 2 as well.",
      "parentUuid": "7a5950e7_5a65c091",
      "range": {
        "startLine": 68,
        "startChar": 6,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b280c9ed_a9226b5c",
        "filename": "third_party/WebKit/Source/core/workers/Worklet.h",
        "patchSetId": 12
      },
      "lineNbr": 68,
      "author": {
        "id": 1148154
      },
      "writtenOn": "2017-07-14T19:46:25Z",
      "side": 1,
      "message": "OK, I will wait for the feedback from flackr@ and ikilpatrick@.",
      "parentUuid": "ce452759_fd55b61d",
      "range": {
        "startLine": 68,
        "startChar": 6,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd8357af_49485ba1",
        "filename": "third_party/WebKit/Source/modules/webaudio/AudioWorklet.h",
        "patchSetId": 12
      },
      "lineNbr": 31,
      "author": {
        "id": 1130280
      },
      "writtenOn": "2017-07-13T19:26:11Z",
      "side": 1,
      "message": "As I stated, AudioWorkle always creates 1 global scope per context. So it does not need this argument.",
      "range": {
        "startLine": 31,
        "startChar": 6,
        "endLine": 31,
        "endChar": 37
      },
      "revId": "858876db395a0b88560581baa4d26f0830b031fa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}