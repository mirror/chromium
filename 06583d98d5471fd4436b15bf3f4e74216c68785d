{
  "comments": [
    {
      "key": {
        "uuid": "a2e00dbb_3d8f81d3",
        "filename": "chrome/browser/ui/cocoa/autofill/autofill_popup_base_view_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 231,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-07-18T13:26:48Z",
      "side": 1,
      "message": "Did you investigate having this in a method called showPopup in AutofillPopupViewCocoa? \n\nin AutofillPopupViewCocoa:\n- (void)showPopup {\n  [super showPopup]; // Calls AutofillPopupBaseViewCocoa\u0027s showPopup.\n\n  // Lines 230-237 of your current code go here.\n}\n\nThis would avoid the base_view having to know about the touch bar. If you are worried about having access to the NSWindow in AutofillPopupViewCocoa, I believe you can get it from \n\n[controller_-\u003econtainer_view() window]",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6411fc3_3081890b",
        "filename": "chrome/browser/ui/cocoa/autofill/autofill_popup_base_view_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 231,
      "author": {
        "id": 1135976
      },
      "writtenOn": "2017-07-18T20:33:49Z",
      "side": 1,
      "message": "I actually wanted the AutofillPopupBaseViewCocoa to handle the touch bar in case the other subclasses also want to support it. However, now that you pointed it out, that is a bit overhead. I\u0027ll move it to AutofillPopupViewCocoa.",
      "parentUuid": "a2e00dbb_3d8f81d3",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56423ef9_067c823c",
        "filename": "chrome/browser/ui/cocoa/autofill/autofill_popup_view_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 419,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-07-18T13:26:48Z",
      "side": 1,
      "message": "I appreciate the comments in this function, but the code remains difficult to grasp because of the needed knowledge in Cocoa/Touchbar. Feel free to include even more comments so that the next reader has a good understanding of the subtleties.\n\nExample:\n\n// Not setting |imageHugsTitle| will cause \u003cX\u003e, which we do not want.\nbutton.imageHugsTitle \u003d YES;",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec337df9_8cbbec4f",
        "filename": "chrome/browser/ui/cocoa/autofill/autofill_popup_view_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 419,
      "author": {
        "id": 1135976
      },
      "writtenOn": "2017-07-18T20:33:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "56423ef9_067c823c",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b196d08a_04c2c5dd",
        "filename": "chrome/browser/ui/cocoa/autofill/autofill_popup_view_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 423,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-07-18T13:26:48Z",
      "side": 1,
      "message": "Feel free to use/add a color in autofill_popup_base_view_cocoa: https://cs.chromium.org/chromium/src/chrome/browser/ui/cocoa/autofill/autofill_popup_base_view_cocoa.h?q\u003dautofill_popup_base_view\u0026dr\u003dC\u0026l\u003d21",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e89e000_43a9da09",
        "filename": "chrome/browser/ui/cocoa/autofill/autofill_popup_view_cocoa.mm",
        "patchSetId": 5
      },
      "lineNbr": 423,
      "author": {
        "id": 1135976
      },
      "writtenOn": "2017-07-18T20:33:49Z",
      "side": 1,
      "message": "Done. I added it in autofill_popup_view_cocoa",
      "parentUuid": "b196d08a_04c2c5dd",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "666afa38_c33fb0c7",
        "filename": "chrome/browser/ui/cocoa/tab_contents/tab_contents_controller.h",
        "patchSetId": 5
      },
      "lineNbr": 50,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-07-18T13:26:48Z",
      "side": 1,
      "message": "This doesn\u0027t feel like a natural place to put this controller. Did you consult with c/b/ui/cocoa owners about the best location for this? \n\nPerhaps it could live in BrowserWindowController alongside other similar controllers? But I would ask an owner first. Sorry that I can\u0027t give more precise advice. https://cs.chromium.org/chromium/src/chrome/browser/ui/cocoa/browser_window_controller.mm?rcl\u003d0238418b07cbe9ea31f40cb3804e7ebea141ab43\u0026l\u003d536",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fb908c5_e4777447",
        "filename": "chrome/browser/ui/cocoa/tab_contents/tab_contents_controller.h",
        "patchSetId": 5
      },
      "lineNbr": 50,
      "author": {
        "id": 1135976
      },
      "writtenOn": "2017-07-18T20:33:49Z",
      "side": 1,
      "message": "No worries! The reason why this isn\u0027t placed in the BWC is because the NSTouchBarDelegate protocol was disabled in it due to a bug. Thanks to that, the system won\u0027t discover the touch bar if it\u0027s placed there\n\nTo determine which touch bar should be shown, the system traverses up the responder chain. This may seem like a weird place, but the touch bar is placed here so that it\u0027ll displayed when the web contents are focused. Note that WebTextfieldTouchBarController currently only provides a touch bar for credit card autofill. Once this is in, I\u0027ll be adding more touch bar stuff for it (like text suggestions).\n\nI can\u0027t put the touch bar with the RenderWidgetHostViewCocoa, which the touch bar is for, but I can put it here. This location lets us cleanly display the default Chrome touch bar when this isn\u0027t focused, or if there\u0027s no touch bar provided by the web contents. Let me know if you have any questions!",
      "parentUuid": "666afa38_c33fb0c7",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7b78e2e_be2e364d",
        "filename": "chrome/browser/ui/cocoa/tab_contents/tab_contents_controller.h",
        "patchSetId": 5
      },
      "lineNbr": 50,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-07-19T02:54:58Z",
      "side": 1,
      "message": "Thanks for the explanation. Will the touchbar only show if the CC popup is shown (and disappear when the popup disappears)? I think it\u0027s the right product need.",
      "parentUuid": "4fb908c5_e4777447",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6fe96d3_44a1647b",
        "filename": "chrome/browser/ui/cocoa/tab_contents/tab_contents_controller.h",
        "patchSetId": 5
      },
      "lineNbr": 50,
      "author": {
        "id": 1135976
      },
      "writtenOn": "2017-07-19T18:31:08Z",
      "side": 1,
      "message": "Yes.",
      "parentUuid": "d7b78e2e_be2e364d",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a76fea7_793d3008",
        "filename": "chrome/common/chrome_features.h",
        "patchSetId": 5
      },
      "lineNbr": 61,
      "author": {
        "id": 1003016
      },
      "writtenOn": "2017-07-18T13:26:48Z",
      "side": 1,
      "message": "feel free to put this in autofill_experiments.h",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06c7cbe2_990a55fb",
        "filename": "chrome/common/chrome_features.h",
        "patchSetId": 5
      },
      "lineNbr": 61,
      "author": {
        "id": 1135976
      },
      "writtenOn": "2017-07-18T20:33:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6a76fea7_793d3008",
      "revId": "06583d98d5471fd4436b15bf3f4e74216c68785d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}