{
  "comments": [
    {
      "key": {
        "uuid": "a625ff21_e7c25208",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "Better to have a targeted bug for this.\n\nThis looks similar to FirstPartyOrigin::IsThirdParty(), are you worried that using it here will negatively impact subresource_filter\u0027s cache?",
      "range": {
        "startLine": 74,
        "startChar": 8,
        "endLine": 74,
        "endChar": 24
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cbc63cda_5f85ce29",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "We are not depending on subresource filter. Both subresource filter and DNR depend on url pattern index. Hence it might be possible to move the caching one layer down to url pattern index, but this should be fine for now. \n\nI am not sure if this is actually a problem without having any performance measurement, so think a TODO should suffice for now.",
      "parentUuid": "a625ff21_e7c25208",
      "range": {
        "startLine": 74,
        "startChar": 8,
        "endLine": 74,
        "endChar": 24
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6ffb1b4_8b053a79",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "Add a quick comment about the creation sequence.",
      "range": {
        "startLine": 88,
        "startChar": 2,
        "endLine": 88,
        "endChar": 42
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4feb90c2_0b407254",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e6ffb1b4_8b053a79",
      "range": {
        "startLine": 88,
        "startChar": 2,
        "endLine": 88,
        "endChar": 42
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b26dd9a7_461ba7c8",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 101,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "Is it correct to prevent calling AddRuleset with same extension id?",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 101,
        "endChar": 56
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08ad46d9_d1cd78c9",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 101,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "This should not happen generally. We\u0027ll reach here via OnExtensionLoaded notification on the UI thread. So some scenarios where this can happen are:- \n- Duplicate loaded notifications. \n- An earlier remove ruleset failed on extension unload (This could happen if PostTask failed for some reason, which only probably happens during shutdown?)\n\nSo I felt it was safer to not DCHECK that this is not called with the same extension id.",
      "parentUuid": "b26dd9a7_461ba7c8",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 101,
        "endChar": 56
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "171c9186_d1c18ae2",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 102,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "Are you referring to WebCacheManager::ClearRendererCache()? You can add a crbug ref here to add a test for this and answer the question.",
      "range": {
        "startLine": 102,
        "startChar": 2,
        "endLine": 102,
        "endChar": 49
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40c79ce3_46d93b21",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.cc",
        "patchSetId": 6
      },
      "lineNbr": 102,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "Yes, so I investigated and it is necessary. Will try and add a browser test once we start evaluating network requests using DNR.",
      "parentUuid": "171c9186_d1c18ae2",
      "range": {
        "startLine": 102,
        "startChar": 2,
        "endLine": 102,
        "endChar": 49
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91207378_2a43007c",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "and destroyed",
      "range": {
        "startLine": 27,
        "startChar": 46,
        "endLine": 27,
        "endChar": 54
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1854adac_a1803a1c",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "91207378_2a43007c",
      "range": {
        "startLine": 27,
        "startChar": 46,
        "endLine": 27,
        "endChar": 54
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8707934_ce27aff1",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "s/Adds/Sets? calling this multiple times on same extension id would replace the former ruleset, right?",
      "range": {
        "startLine": 33,
        "startChar": 5,
        "endLine": 33,
        "endChar": 9
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f8822bc_57d804b7",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d8707934_ce27aff1",
      "range": {
        "startLine": 33,
        "startChar": 5,
        "endLine": 33,
        "endChar": 9
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dfcd1717_01b85d50",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 41,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "nit: swap the param order, |request| is the primary param, so naturally fits better as first arg.",
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc6c4a89_71f5bcbf",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 41,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dfcd1717_01b85d50",
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e55c7c3f_061764d2",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "Remove this comment as it doesn\u0027t seem to be right. We assign this on construction and hold it for the lifetime of |this|.",
      "range": {
        "startLine": 50,
        "startChar": 5,
        "endLine": 50,
        "endChar": 18
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8dabce97_81d19fa0",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "It\u0027s a weak pointer in the sense that we don\u0027t own info_map. Is it confusing since it can be confused with WeakPtr? Have rephrased.",
      "parentUuid": "e55c7c3f_061764d2",
      "range": {
        "startLine": 50,
        "startChar": 5,
        "endLine": 50,
        "endChar": 18
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fa0c24c_175cc0b1",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 51,
      "author": {
        "id": 1001727
      },
      "writtenOn": "2017-10-24T19:59:49Z",
      "side": 1,
      "message": "const InfoMap* const info_map_;",
      "range": {
        "startLine": 51,
        "startChar": 2,
        "endLine": 51,
        "endChar": 26
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08220f8a_9bc17d76",
        "filename": "extensions/browser/api/declarative_net_request/ruleset_manager.h",
        "patchSetId": 6
      },
      "lineNbr": 51,
      "author": {
        "id": 1161815
      },
      "writtenOn": "2017-10-24T22:22:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5fa0c24c_175cc0b1",
      "range": {
        "startLine": 51,
        "startChar": 2,
        "endLine": 51,
        "endChar": 26
      },
      "revId": "d61dae5b068442e1262e9befbcb0dffcd8bb224d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}