{
  "comments": [
    {
      "key": {
        "uuid": "cf1db5b7_8d8d042e",
        "filename": "chrome/browser/notifications/notification_permission_context.cc",
        "patchSetId": 5
      },
      "lineNbr": 223,
      "author": {
        "id": 1000788
      },
      "writtenOn": "2017-07-14T15:20:32Z",
      "side": 1,
      "message": "Move this above the IsOffTheRecord check. Incognito must be indistinguishable from non-incognito, so if regular immediately responds in iframes, then incognito must also do so and with the same value (rather than having a random delay, which is what happens with the current ordering).",
      "range": {
        "startLine": 223,
        "startChar": 5,
        "endLine": 223,
        "endChar": 6
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a44e850_591bf18b",
        "filename": "chrome/browser/notifications/notification_permission_context.cc",
        "patchSetId": 5
      },
      "lineNbr": 223,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-07-14T16:10:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cf1db5b7_8d8d042e",
      "range": {
        "startLine": 223,
        "startChar": 5,
        "endLine": 223,
        "endChar": 6
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96877643_e6c7b841",
        "filename": "chrome/browser/notifications/notification_permission_context.cc",
        "patchSetId": 5
      },
      "lineNbr": 224,
      "author": {
        "id": 1000788
      },
      "writtenOn": "2017-07-14T15:20:32Z",
      "side": 1,
      "message": "Shouldn\u0027t this be ASK? (see my reply to Dominick\u0027s comment)",
      "range": {
        "startLine": 224,
        "startChar": 17,
        "endLine": 224,
        "endChar": 38
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8cf0b912_46b0113b",
        "filename": "chrome/browser/notifications/notification_permission_context.cc",
        "patchSetId": 5
      },
      "lineNbr": 224,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-07-14T16:10:03Z",
      "side": 1,
      "message": "Developers *cannot* request permission, so no, it\u0027d be denied by default.",
      "parentUuid": "96877643_e6c7b841",
      "range": {
        "startLine": 224,
        "startChar": 17,
        "endLine": 224,
        "endChar": 38
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8e40938_6ea2bef4",
        "filename": "chrome/browser/notifications/notification_permission_context_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 177,
      "author": {
        "id": 1000788
      },
      "writtenOn": "2017-07-14T15:20:32Z",
      "side": 1,
      "message": "Shouldn\u0027t this be ASK?",
      "range": {
        "startLine": 177,
        "startChar": 20,
        "endLine": 177,
        "endChar": 41
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "458125b6_c9fd41ac",
        "filename": "chrome/browser/notifications/notification_permission_context_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 177,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-07-14T16:10:03Z",
      "side": 1,
      "message": "No. DecidePermission needs to make a decision. It decides no.",
      "parentUuid": "d8e40938_6ea2bef4",
      "range": {
        "startLine": 177,
        "startChar": 20,
        "endLine": 177,
        "endChar": 41
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7ea99a_e15f5d78",
        "filename": "chrome/browser/notifications/notification_permission_context_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 197,
      "author": {
        "id": 1000788
      },
      "writtenOn": "2017-07-14T15:20:32Z",
      "side": 1,
      "message": "Nit: Should we explicitly test that requesting/deciding permission doesn\u0027t change the permission (from block to ask/allow)?",
      "range": {
        "startLine": 197,
        "startChar": 57,
        "endLine": 197,
        "endChar": 63
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7e9616c_39c6232b",
        "filename": "chrome/browser/notifications/notification_permission_context_unittest.cc",
        "patchSetId": 5
      },
      "lineNbr": 197,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-07-14T16:10:03Z",
      "side": 1,
      "message": "That\u0027s the EXPECT on line 178, right?",
      "parentUuid": "5f7ea99a_e15f5d78",
      "range": {
        "startLine": 197,
        "startChar": 57,
        "endLine": 197,
        "endChar": 63
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20a18177_1feab086",
        "filename": "third_party/WebKit/Source/modules/notifications/Notification.cpp",
        "patchSetId": 5
      },
      "lineNbr": 381,
      "author": {
        "id": 1000788
      },
      "writtenOn": "2017-07-14T15:20:32Z",
      "side": 1,
      "message": "I think Dominick\u0027s proposal of returning DENIED when the state is really ASK would cause more confusion that it would resolve:\n\nDENIED is either misleading (since both developers and the specs expect there to be a single consistent permission state per origin), or unhelpful (since developers must now postMessage to another tab/SW in order to find the true value).\n\nBy contrast, ASK is actionable: developers can prompt in another tab, or open a popup window, or simply set a flag reminding themselves to prompt next time the user is in a top-level context.",
      "range": {
        "startLine": 381,
        "startChar": 49,
        "endLine": 381,
        "endChar": 55
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46514a6d_422024f2",
        "filename": "third_party/WebKit/Source/modules/notifications/Notification.cpp",
        "patchSetId": 5
      },
      "lineNbr": 381,
      "author": {
        "id": 1002032
      },
      "writtenOn": "2017-07-14T16:10:03Z",
      "side": 1,
      "message": "I disagree - `ask` implies they can ask for permission, which we shouldn\u0027t tell them when they really can\u0027t.\n\nHowever, John feels strongly, so let\u0027s move this to a follow-up CL so that we can get this in for the weekend builds :).",
      "parentUuid": "20a18177_1feab086",
      "range": {
        "startLine": 381,
        "startChar": 49,
        "endLine": 381,
        "endChar": 55
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcb9d4dc_da74205e",
        "filename": "third_party/WebKit/Source/modules/notifications/Notification.cpp",
        "patchSetId": 5
      },
      "lineNbr": 381,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-07-16T23:26:56Z",
      "side": 1,
      "message": "\u003e since both developers and the specs expect there to be a single consistent permission state per origin\n\nI disagree as well. For a given origin permission may be allowed or denied in various realms and it\u0027s very important that developers be able to distinguish which of those realms it is allowed in. A practical reason is that we encourage websites to display particular UI when they are going to prompt. If they can\u0027t tell whether or not a call to \"request\" is going to prompt, it\u0027s going to result in a bad user experience.\n\nCould you point to where you see the spec say there should be a single consistent permission state per origin? The permission state is a per-realm value. In the spec this is reflected by the fact that retrieving the current permission state for a particular environment settings object and not by origin (see https://w3c.github.io/permissions/#reading-current-states).",
      "parentUuid": "46514a6d_422024f2",
      "range": {
        "startLine": 381,
        "startChar": 49,
        "endLine": 381,
        "endChar": 55
      },
      "revId": "09ee1ac138bbf7527ee6051519535fda0014288f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}