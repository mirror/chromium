{
  "comments": [
    {
      "key": {
        "uuid": "788d4614_1815e8a0",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 500,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-04T03:02:04Z",
      "side": 1,
      "message": "Should we also test refreshing (or even just navigating to the same page)?",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2263dc29_b07e1859",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 500,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2017-12-04T13:19:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "788d4614_1815e8a0",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "546d90a7_b0723de4",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 537,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-05T03:28:23Z",
      "side": 1,
      "message": "nit: GetActiveWebContents()?",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f62dc9a_40659570",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 537,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2017-12-12T19:23:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "546d90a7_b0723de4",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "740b9196_2e916796",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 538,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-04T03:02:04Z",
      "side": 1,
      "message": "What\u0027s the main reason for the redirect? \n\nRather than using this class and the redirect bits, could we just call NavigateIframeToURL ?",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9da5955_8ac951ea",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 538,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2017-12-04T13:19:32Z",
      "side": 1,
      "message": "The redirect was to let OpenPageInfoBubble() complete before navigating the iframe, but doing it synchronously from here achieves that more effectively.\n\nAlso, TIL NavigateIframeToURL - thanks :)",
      "parentUuid": "740b9196_2e916796",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c2d47530_a3e69e1b",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 538,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2017-12-04T14:58:32Z",
      "side": 1,
      "message": "Ah, I tried this, but it doesn\u0027t actually work: iframes are loaded asynchronously, so in some runs of the test on the bots, the NavigateIframeToURL() call was happening before the iframe was loaded and ready to be navigated. NavigateToURL() only waits for the main frame load to be ready. So, I think it\u0027s safer after all for the navigation to be kicked off by the iframe itself, since that will inherently only happen when the iframe is ready to go.",
      "parentUuid": "e9da5955_8ac951ea",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc62017b_0b48fbee",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 538,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-05T03:28:23Z",
      "side": 1,
      "message": "\u003e The redirect was to let OpenPageInfoBubble() complete \n\nOther tests in here use it synchronously so I\u0027m assuming we don\u0027t need to wait for it to be open?\n\n\u003e Ah, I tried this, but it doesn\u0027t actually work:\n\nHmm, I\u0027m not quite sure what you mean. NavigateToURL() should complete synchronously and at that point the iframe should be ready to be navigated. It\u0027s true that the page within the iframe is not guaranteed to be loaded at that point but that shouldn\u0027t matter because we\u0027re navigating the iframe manually with NavigateIframeToURL.\n\nIt would be good to dig into the problem a bit because I\u0027ve seen this pattern a bunch and used it myself so I\u0027m curious as to what the problem is. Does it help to remove the src attribute from the \u003ciframe\u003e in subframe.html?",
      "parentUuid": "c2d47530_a3e69e1b",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30d1c8ec_dbb86953",
        "filename": "chrome/browser/ui/views/page_info/page_info_bubble_view_browsertest.cc",
        "patchSetId": 2
      },
      "lineNbr": 538,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2017-12-12T19:23:04Z",
      "side": 1,
      "message": "Hmmmm. Well, let\u0027s see :) I can\u0027t reproduce the failure locally even with my system under load, but it does seem to show up pretty reliably on the bots, so I\u0027ll try without the iframe src attribute a few times and see what happens. I don\u0027t understand exactly what\u0027s wrong, though, or how to debug it without a local repro.",
      "parentUuid": "cc62017b_0b48fbee",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "41c4ad32_a2df49a2",
        "filename": "chrome/browser/ui/views/page_info/testdata/empty0.html",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000602
      },
      "writtenOn": "2017-12-04T03:02:04Z",
      "side": 1,
      "message": "nit: may be good to put a valid html document here? (and in the other empty html files?)",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a678674_5319a60e",
        "filename": "chrome/browser/ui/views/page_info/testdata/empty0.html",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2017-12-04T13:19:32Z",
      "side": 1,
      "message": "I\u0027m not sure that it matters (?) but it can\u0027t hurt, so, done.",
      "parentUuid": "41c4ad32_a2df49a2",
      "revId": "4596680e50dfda99fca7ca1efccc665648b3362e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}