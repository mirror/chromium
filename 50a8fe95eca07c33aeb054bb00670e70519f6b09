{
  "comments": [
    {
      "key": {
        "uuid": "e28e47e3_1a770840",
        "filename": "ash/wm/power_button_controller.cc",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-28T20:52:28Z",
      "side": 1,
      "message": "just to check, are there any other cases where we set this pref that we don\u0027t want to break here?",
      "revId": "50a8fe95eca07c33aeb054bb00670e70519f6b09",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "785706e4_443847c8",
        "filename": "ash/wm/power_button_controller.cc",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 1147616
      },
      "writtenOn": "2017-08-28T20:55:47Z",
      "side": 1,
      "message": "this pref is only used for tablet power button. So it shouldn\u0027t have other broken places.",
      "parentUuid": "e28e47e3_1a770840",
      "revId": "50a8fe95eca07c33aeb054bb00670e70519f6b09",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3758c79b_a8438103",
        "filename": "ash/wm/power_button_controller.cc",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-28T21:03:59Z",
      "side": 1,
      "message": "i don\u0027t remember the history here; why is there a pref? if we just want to restore the state when chrome is restarted, can\u0027t we just use the backlights-forced-off state that we get from powerd?",
      "parentUuid": "785706e4_443847c8",
      "revId": "50a8fe95eca07c33aeb054bb00670e70519f6b09",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf977474_ff3e09f2",
        "filename": "ash/wm/power_button_controller.cc",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 1147616
      },
      "writtenOn": "2017-08-28T21:12:26Z",
      "side": 1,
      "message": "CL is here: https://codereview.chromium.org/2533373002/\nBecause we have both user preference and local preference for touchscreen. User preference is used for debug short cut. The combination determines the final state of touchscreen.",
      "parentUuid": "3758c79b_a8438103",
      "revId": "50a8fe95eca07c33aeb054bb00670e70519f6b09",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7b04bde_250bf9ac",
        "filename": "ash/wm/power_button_controller.cc",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 1000042
      },
      "writtenOn": "2017-08-28T21:33:39Z",
      "side": 1,
      "message": "i\u0027m okay with this change going in if it fixes the issue, but the existing code seems fragile. in the non-forced path, are we dependent on TabletPowerButtonController to enable the touchscreen? TPBC doesn\u0027t get created until we receive accelerometer data, so it seems like the touchscreen could also get stuck in a disabled state if the accelerometer isn\u0027t sending data for some reason.\n\nin the longer term, it feels to me like we shouldn\u0027t be storing the touchscreen state in Local State. to determine the initial state, why don\u0027t we instead use the result of GetBacklightsForcedOff \u0026\u0026 the value of the user pref?\n\ninstead of making ShellDelegate write to Local State, can it instead have a bool member keeping track of the power-button-determined state? then we shouldn\u0027t need to worry about using a stale state after rebooting, right?",
      "parentUuid": "cf977474_ff3e09f2",
      "revId": "50a8fe95eca07c33aeb054bb00670e70519f6b09",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}