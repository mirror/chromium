{
  "comments": [
    {
      "key": {
        "uuid": "19bd3501_a5f81772",
        "filename": "chrome/browser/media/router/presentation_receiver_window.cc",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-11-08T17:30:09Z",
      "side": 1,
      "message": "You can use a static local for this too :)",
      "range": {
        "startLine": 26,
        "startChar": 49,
        "endLine": 26,
        "endChar": 68
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d626adb4_b2b3a7aa",
        "filename": "chrome/browser/media/router/presentation_receiver_window.cc",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2017-11-09T19:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "19bd3501_a5f81772",
      "range": {
        "startLine": 26,
        "startChar": 49,
        "endLine": 26,
        "endChar": 68
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55e7c59b_92f35a92",
        "filename": "chrome/browser/media/router/presentation_receiver_window.cc",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-11-08T17:30:09Z",
      "side": 1,
      "message": "This is in chrome/, why can\u0027t you just DCHECK_CURRENTLY_ON(BrowserThread::UI)?",
      "range": {
        "startLine": 32,
        "startChar": 23,
        "endLine": 32,
        "endChar": 59
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c80881d_d24a824f",
        "filename": "chrome/browser/media/router/presentation_receiver_window.cc",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2017-11-09T19:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "55e7c59b_92f35a92",
      "range": {
        "startLine": 32,
        "startChar": 23,
        "endLine": 32,
        "endChar": 59
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45942501_bf10dbce",
        "filename": "chrome/browser/media/router/presentation_receiver_window.h",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-11-08T17:30:09Z",
      "side": 1,
      "message": "What is the actual contract of this method? It deletes the profile, but so does a plain `delete profile`. Is it just that it also removes the profile from the set of tracked profiles? Could we just have it do only that?",
      "range": {
        "startLine": 31,
        "startChar": 14,
        "endLine": 31,
        "endChar": 27
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "021f3842_91173b64",
        "filename": "chrome/browser/media/router/presentation_receiver_window.h",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2017-11-09T19:31:11Z",
      "side": 1,
      "message": "The profiles used by this class are owned by it and so can\u0027t follow the normal destruction path for OTR profiles.  This method keeps the set of tracked profiles up-to-date so IsPresentationReceiverWindowProfile() will be accurate, which is in turn used by ~Browser to decide which destruction path to take.  I\u0027m not sure I understand the objection here?",
      "parentUuid": "45942501_bf10dbce",
      "range": {
        "startLine": 31,
        "startChar": 14,
        "endLine": 31,
        "endChar": 27
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41a8b757_cf7d5115",
        "filename": "chrome/browser/media/router/presentation_receiver_window.h",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1001606
      },
      "writtenOn": "2017-11-10T17:04:04Z",
      "side": 1,
      "message": "\u003e The profiles used by this class are owned by it and so can\u0027t follow the normal destruction path for OTR profiles. \n\nRight, I think that\u0027s your problem right there :) OTR profiles are owned by their parent profile, so if you want to have an OTR profile that is deleted somewhere else, you\u0027re violating / changing the contract of Profile. Now, I will fully admit that the ownership story in Profile / OTRProfile is kind of muddled, but that doesn\u0027t mean we should make it worse.\n\nMaybe we should just bite the bullet and allow others to delete OTR profiles instead of pretending they\u0027re owned by the original profile (which even in the regular case is somewhat debatable, because they\u0027re de-facto owned by the Browser, and in this case just outright wrong). Tell you what, I\u0027ll try to come up with a CL that lets OTRProfile be deleted, so this CL can just call do that without needing to track profiles or modify profile destruction. I would probably even be okay with this with a TODO added, but you might have to change some things to address Scott\u0027s comment anyway, right?\n\n\u003e This method keeps the set of tracked profiles up-to-date so IsPresentationReceiverWindowProfile() will be accurate, which is in turn used by ~Browser to decide which destruction path to take.  I\u0027m not sure I understand the objection here?",
      "parentUuid": "021f3842_91173b64",
      "range": {
        "startLine": 31,
        "startChar": 14,
        "endLine": 31,
        "endChar": 27
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c0e317f_1138cc80",
        "filename": "chrome/browser/profiles/profile_destroyer.cc",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1002076
      },
      "writtenOn": "2017-11-08T04:25:54Z",
      "side": 1,
      "message": "style nit: Try to eliminate negation in the if-condition whenever you have \"then\" and \"else\" clauses. Also, add braces, given there are multiple LOC in the condition expression. Meaning, this should be:\n\n      if (media_router::PresentationReceiverWindow::\n              IsPresentationReceiverWindowProfile(profile)) {\n        media_router::PresentationReceiverWindow::DeleteProfile(profile);\n      } else {\n        profile-\u003eGetOriginalProfile()-\u003eDestroyOffTheRecordProfile();\n      }",
      "range": {
        "startLine": 67,
        "startChar": 6,
        "endLine": 71,
        "endChar": 73
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4bdf5799_0e7d82e7",
        "filename": "chrome/browser/profiles/profile_destroyer.cc",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2017-11-09T19:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c0e317f_1138cc80",
      "range": {
        "startLine": 67,
        "startChar": 6,
        "endLine": 71,
        "endChar": 73
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "69d2ad53_75a58b50",
        "filename": "chrome/browser/profiles/profile_destroyer.cc",
        "patchSetId": 4
      },
      "lineNbr": 174,
      "author": {
        "id": 1002076
      },
      "writtenOn": "2017-11-08T04:25:54Z",
      "side": 1,
      "message": "ditto: eliminate if-condition negation here.",
      "range": {
        "startLine": 173,
        "startChar": 2,
        "endLine": 174,
        "endChar": 56
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec443daa_e1ed0bf6",
        "filename": "chrome/browser/profiles/profile_destroyer.cc",
        "patchSetId": 4
      },
      "lineNbr": 174,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2017-11-09T19:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "69d2ad53_75a58b50",
      "range": {
        "startLine": 173,
        "startChar": 2,
        "endLine": 174,
        "endChar": 56
      },
      "revId": "961c571532ab761150a094f3751c6b59420d365d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}