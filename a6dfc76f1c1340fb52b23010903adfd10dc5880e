{
  "comments": [
    {
      "key": {
        "uuid": "7ce7d261_62bd0bf6",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1112850
      },
      "writtenOn": "2017-08-15T20:27:22Z",
      "side": 1,
      "message": "Should we also ignore subframe here? I think a subframe\u0027s navigation does not affect favicon/title?",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41a322ff_2ad2686f",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-15T23:09:58Z",
      "side": 1,
      "message": "We don\u0027t need to check in web contents observer. In general, if a sub-frame change should be ignored then it won\u0027t be sent to WebContents from RenderFrameHost.\n\nFor title/favicon cases here, only main frame change will be sent to WebContents, and then WebContentsObserver. That\u0027s also why we don\u0027t plumb the signals in RenderFrameHost, because sub-frame update is ignored.",
      "parentUuid": "7ce7d261_62bd0bf6",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8488d594_9e734ffc",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1115989
      },
      "writtenOn": "2017-08-15T23:20:32Z",
      "side": 1,
      "message": "The Did*Navigation signals are still sent for sub-frames, so you\u0027ll end up with situations where the first_time_favicon_updated_ gets incorrectly cleared due to a sub-frame navigation happening, and hence the next favicon update gets ignored.",
      "parentUuid": "41a322ff_2ad2686f",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "92090a1d_324d9cf0",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-16T00:04:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8488d594_9e734ffc",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "666215a8_334b82a6",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1115989
      },
      "writtenOn": "2017-08-15T20:41:05Z",
      "side": 1,
      "message": "This seems a little fragile; is there some other part of the loading state you can inspect to see if you should care about this? I.e. if navigation has finished (DidFinishNavigation called on the main frame). \"as part of loading process\" is a little vague too.",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11e7142d_387632b0",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-15T23:09:58Z",
      "side": 1,
      "message": "I am not sure your question. Why do you think it\u0027s fragile? We ignore the title update first time because it\u0027s considered as default title of the web sites from HTML, we only want to get notified when there\u0027s title update from the previous title.",
      "parentUuid": "666215a8_334b82a6",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b5819e8_36af34e3",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1115989
      },
      "writtenOn": "2017-08-15T23:20:32Z",
      "side": 1,
      "message": "What if the HTML has no \u003ctitle\u003e tag? Does this still get called? And if it does, what if there\u0027s JS that runs and sets this title during pageload, and never happens after; does it still get called twice? The code is assuming the former is true, that the latter (if true) is a title change we care about in this context, and that both are behaviors that we can rely on in the webcontents API and won\u0027t change.\n\nI would assume what we actually care about is pages that update their title after OnDocumentLoad or something like that?",
      "parentUuid": "11e7142d_387632b0",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5eb40761_db27c649",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-16T00:04:23Z",
      "side": 1,
      "message": "mmmmm, from the doc it looks like we just want to ignore the first time that a title/favicon is updated.\n\nyes, you are right, if there\u0027s no \u003ctitle\u003e tag and no JS code setting title, then this method won\u0027t be called. But if there\u0027s JS set the title before the \u003ctitle\u003e tag is found, then \u003ctitle\u003e tag will be ignored, it won\u0027t get called twice.\n\nThis code doesn\u0027t handle case where title is empty even the tab finishes loading, and after some amount of time in background, a title is set.",
      "parentUuid": "3b5819e8_36af34e3",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73d6a7d9_046dfca4",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1112850
      },
      "writtenOn": "2017-08-16T17:14:27Z",
      "side": 1,
      "message": "In the end, it comes to the definition of the heuristic. I suspect we actually want to know when JS code change the title, even if there is no \u003ctitle\u003e tag?",
      "parentUuid": "5eb40761_db27c649",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f5ae88d_b622a081",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-16T17:56:12Z",
      "side": 1,
      "message": "Oystein, I know what you mean :) You mean we should only care about title/favicon change when the page is finished loading, right? I think we can check one of the following methods:\n\n1. DidStopLoading\n2. DocumentOnLoadCompletedInMainFrame, which use the OnLoad event\n3. DocumentLoadedInFrame, which will be called when dom content load end event is fired\n4. DidFinishLoad, which combines 1 and 2.\n\nWDYT?",
      "parentUuid": "73d6a7d9_046dfca4",
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de62ff30_f92af8ce",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 152,
      "author": {
        "id": 1112850
      },
      "writtenOn": "2017-08-15T20:27:22Z",
      "side": 1,
      "message": "nit: remove those two lines as it is already explained in .h file.",
      "range": {
        "startLine": 151,
        "startChar": 0,
        "endLine": 152,
        "endChar": 13
      },
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b034a3a6_43a1b97d",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.cc",
        "patchSetId": 3
      },
      "lineNbr": 152,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-15T23:09:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "de62ff30_f92af8ce",
      "range": {
        "startLine": 151,
        "startChar": 0,
        "endLine": 152,
        "endChar": 13
      },
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1145999_1bc225df",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.h",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 1112850
      },
      "writtenOn": "2017-08-15T20:27:22Z",
      "side": 1,
      "message": "I would suggest to change \"updated\" to \"set\" for those 2 variables.\n\nYour UMA is called \"...FirstFaviconUpdated\". And here you are ignoring the \"first\" update. I understand that you want to record the first change from the default favicon/title. So it is better to use a different word here. I propose to define:\n- favicon/title is \"set\" to some default value for most pages.\n- favicon/title can be \"updated\" to some other value later.",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 66,
        "endChar": 41
      },
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d5e363a_eeae540f",
        "filename": "chrome/browser/resource_coordinator/resource_coordinator_web_contents_observer.h",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 1211219
      },
      "writtenOn": "2017-08-15T23:09:58Z",
      "side": 1,
      "message": "Done\nThanks, I like this clarification",
      "parentUuid": "d1145999_1bc225df",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 66,
        "endChar": 41
      },
      "revId": "a6dfc76f1c1340fb52b23010903adfd10dc5880e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}