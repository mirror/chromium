{
  "comments": [
    {
      "key": {
        "uuid": "bcfd0a88_a8bf9a93",
        "filename": "third_party/WebKit/Source/bindings/modules/v8/wasm/WasmResponseExtensions.cpp",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2018-01-22T12:35:20Z",
      "side": 1,
      "message": "The promise is rejected in the next microtask, not during AbortCompilation, right?\n\nThen why do we need to check IsScriptForbidden in AbortCompilation?",
      "revId": "09c3d33975b82bbea1f3e51e40bca2c0d15e4288",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab5be8fc_72dc617a",
        "filename": "third_party/WebKit/Source/bindings/modules/v8/wasm/WasmResponseExtensions.cpp",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1141154
      },
      "writtenOn": "2018-01-22T12:47:44Z",
      "side": 1,
      "message": "There is a direct sequence of calls from here to Promise::Reject(), which eventually causes the execution of JavaScript code within the context of this function. It could be that the JavaScript code just creates a new microtask and does not execute the reject callback immediately, but I am not sure about that.",
      "parentUuid": "bcfd0a88_a8bf9a93",
      "revId": "09c3d33975b82bbea1f3e51e40bca2c0d15e4288",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d41f177f_ffd4000c",
        "filename": "third_party/WebKit/Source/bindings/modules/v8/wasm/WasmResponseExtensions.cpp",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1115916
      },
      "writtenOn": "2018-01-22T13:58:49Z",
      "side": 1,
      "message": "Hmm... I\u0027m not sure if we really need to worry about the case.\n\nIIUC the point of the ScriptForbiddenScope is that no arbitrary script is executed during the scope. I *guess* it\u0027s fine to call Promise::Reject.\n\nAdam: Do you have any thoughts on this?",
      "parentUuid": "ab5be8fc_72dc617a",
      "revId": "09c3d33975b82bbea1f3e51e40bca2c0d15e4288",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50259efd_8f2c9597",
        "filename": "third_party/WebKit/Source/bindings/modules/v8/wasm/WasmResponseExtensions.cpp",
        "patchSetId": 2
      },
      "lineNbr": 107,
      "author": {
        "id": 1125279
      },
      "writtenOn": "2018-01-19T15:46:44Z",
      "side": 1,
      "message": "I think it would be preferable to not overload the abort reason with semantics, and instead have the intention explicitly stated through API. Perhaps we can have a \"bool reject_promise \u003d true\" parameter to Abort?",
      "revId": "09c3d33975b82bbea1f3e51e40bca2c0d15e4288",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e448a4f_fd52c50f",
        "filename": "third_party/WebKit/Source/bindings/modules/v8/wasm/WasmResponseExtensions.cpp",
        "patchSetId": 2
      },
      "lineNbr": 107,
      "author": {
        "id": 1141154
      },
      "writtenOn": "2018-01-19T16:02:40Z",
      "side": 1,
      "message": "Hmm, the reason for doing it this way is that it does not require an API change. The API change means that we cannot back-merge it. I\u0027m not sure if this is a strong reason though.\n\nMoreover, it\u0027s not clear that we overload the abort reason here. If there is no abort reason, then there is also nothing to throw, which is exactly what is happening.",
      "parentUuid": "50259efd_8f2c9597",
      "revId": "09c3d33975b82bbea1f3e51e40bca2c0d15e4288",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af7d395d_4d4eb0be",
        "filename": "third_party/WebKit/Source/bindings/modules/v8/wasm/WasmResponseExtensions.cpp",
        "patchSetId": 2
      },
      "lineNbr": 107,
      "author": {
        "id": 1141154
      },
      "writtenOn": "2018-01-22T08:55:26Z",
      "side": 1,
      "message": "I think the best way to do this is to make this change as it is now so that we can backmerge it, and then do the change as you suggest it in a later CL.",
      "parentUuid": "6e448a4f_fd52c50f",
      "revId": "09c3d33975b82bbea1f3e51e40bca2c0d15e4288",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}