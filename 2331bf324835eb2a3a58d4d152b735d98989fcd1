{
  "comments": [
    {
      "key": {
        "uuid": "45b1591a_bd703f1d",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1001384
      },
      "writtenOn": "2017-07-07T13:03:59Z",
      "side": 1,
      "message": "Nit: No longer used.",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d3e4927_e24531e5",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T07:33:16Z",
      "side": 1,
      "message": "Ack. Again Bind() is needed to address another comment.",
      "parentUuid": "45b1591a_bd703f1d",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5bc01209_7801f7ab",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1001384
      },
      "writtenOn": "2017-07-07T13:03:59Z",
      "side": 1,
      "message": "Nit: No longer used.",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05942374_77f42cec",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T07:33:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5bc01209_7801f7ab",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90bd2ade_44d41b13",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1001384
      },
      "writtenOn": "2017-07-07T13:03:59Z",
      "side": 1,
      "message": "Nit: No longer used.",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59038906_c7d10a6b",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T07:33:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "90bd2ade_44d41b13",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc5eb302_db0031cf",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 202,
      "author": {
        "id": 1001384
      },
      "writtenOn": "2017-07-07T13:03:59Z",
      "side": 1,
      "message": "Nit: const.",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "295568d1_bf16d4e2",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 202,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T07:33:16Z",
      "side": 1,
      "message": "Ack. Now, it needs to be mutable.",
      "parentUuid": "dc5eb302_db0031cf",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "815fbcd1_ee5038f7",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 203,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-07-10T04:01:47Z",
      "side": 1,
      "message": "Just directly call FakeCryptohomeClient::GetStubSystemSalt().\n\nPlease don\u0027t add any new code which uses the deprecated blocking version method.",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9696a4c2_74d4587a",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 203,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T07:33:16Z",
      "side": 1,
      "message": "Hmm, I couldn\u0027t find comment that it is deprecated. Could you point it me?\n\nGetStubSystemSalt won\u0027t work for the case. Instead, replaced by async call + RunLoop.",
      "parentUuid": "815fbcd1_ee5038f7",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83d66fee_ef6cf8e1",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 203,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-07-10T07:52:26Z",
      "side": 1,
      "message": "Sorry, wrong function name.\nWhat I tried to say was CryptohomeClient::GetStubSanitizedUsername().\n\ncrbug.com/126674 has been there for long to remove all blocking version methods, but unfortunately we haven\u0027t seen much progress.\nAlso, blocking version methods of crypthome client are impelemnted with BlockingMethodCaller whose class comment says you should avoid using it.",
      "parentUuid": "9696a4c2_74d4587a",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e097620_39843fed",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 203,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T09:08:31Z",
      "side": 1,
      "message": "As for GetStubSanitizedUsername(), because it is the implementation details of the fake, if we can avoid it easily, it\u0027s better not to depend on it.\nI believe, this RunLoop approach is common in chrome, and encapsulated enough so it should be better.\n\n\u003e BlockingMethodCaller.\n\n(off topic) Wow, 5 years old bug! Actually I didn\u0027t depend on it, because it is fake :-P.\nAnyway, if these blocking methods are deprecated, it\u0027s better to note so to public interface/methods, IMHO. Whether we use the BlockingMethodCaller or not, and deprecating the public method are independent, in precise?",
      "parentUuid": "83d66fee_ef6cf8e1",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "48bcd10f_a9dee91c",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 203,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-07-10T09:50:18Z",
      "side": 1,
      "message": "\u003e As for GetStubSanitizedUsername(), because it is the implementation details of the fake, if we can avoid it easily, it\u0027s better not to depend on it.\n\nReturning GetStubSanitizedUsername()\u0027s result is part of FakeCryptohomeClient\u0027s interface contract (for some mysterious reason, this funcdtion is in CryptohomeClient and its function comment is in cryptohome_client.h, though).\n\nYou are making the test code unnecessarily complicated.\n\n\u003e  it\u0027s better to note so to public interface/methods,\n\nI agree. What was unfortunate was that no one bothered to add comments.\nI thought if there are two functions with the same functionality, it should be immediately clear for everyone that the synchronous version is being deprecated, but maybe I\u0027m relying too much on people.",
      "parentUuid": "5e097620_39843fed",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30b57500_b6bed715",
        "filename": "chrome/browser/chromeos/policy/user_cloud_policy_store_chromeos_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 203,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T11:35:57Z",
      "side": 1,
      "message": "\u003e Returning GetStubSanitizedUsername()\u0027s result is part of FakeCryptohomeClient\u0027s interface contract (for some mysterious reason, this funcdtion is in CryptohomeClient and its function comment is in cryptohome_client.h, though).\n\nWhether it is a part of interface or just implementation details is unclear to me.\nI just believe as you said so.\n\n\u003e You are making the test code unnecessarily complicated.\n\nI had disagreed, unless GetStubSanitizedUsername()\u0027s result is a part of fake interface.\n\n\u003e I thought if there are two functions with the same functionality, it should be immediately clear for everyone that the synchronous version is being deprecated, but maybe I\u0027m relying too much on people.\n\nI see. For coming review, specifically ones for dbus newbees like me :-), I\u0027d appreciate if you remove such assumptions based on dbus/ directory specific knowledge. I\u0027m happy to follow your guidance, but initially not know the history.",
      "parentUuid": "48bcd10f_a9dee91c",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e144d14a_54dd0e02",
        "filename": "chromeos/dbus/fake_cryptohome_client.cc",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-07-10T04:01:47Z",
      "side": 1,
      "message": "std::string()",
      "range": {
        "startLine": 153,
        "startChar": 71,
        "endLine": 153,
        "endChar": 73
      },
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d705ccef_2d6e92b5",
        "filename": "chromeos/dbus/fake_cryptohome_client.cc",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T07:33:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e144d14a_54dd0e02",
      "range": {
        "startLine": 153,
        "startChar": 71,
        "endLine": 153,
        "endChar": 73
      },
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ebad1fe_13aa7f8b",
        "filename": "chromeos/dbus/fake_cryptohome_client.h",
        "patchSetId": 1
      },
      "lineNbr": 228,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-07-10T04:01:47Z",
      "side": 1,
      "message": "I find this behavior difficult to understand as the salt\u0027s emptiness is cryptohomed\u0027s implementation detail which has almost nothing to do with chrome.\n\nHow about using an existing flag (e.g. service_is_available_) or adding a new one to explicitly control the fake\u0027s behavior?",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6ef605f_bc04fe79",
        "filename": "chromeos/dbus/fake_cryptohome_client.h",
        "patchSetId": 1
      },
      "lineNbr": 228,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T07:33:16Z",
      "side": 1,
      "message": "Ok, let\u0027s introduce another bool, then.\nNote: ServiceIsAvailable is for controlling the dbus connection emulation, so it looks not for this case.",
      "parentUuid": "6ebad1fe_13aa7f8b",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf0eac8c_fea97cf7",
        "filename": "chromeos/dbus/fake_cryptohome_client.h",
        "patchSetId": 1
      },
      "lineNbr": 228,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-07-10T07:52:26Z",
      "side": 1,
      "message": "I don\u0027t think it\u0027s a good idea to have an is_ready boolean for each method.\nI introduced service_is_available_ in https://codereview.chromium.org/34303002 and I don\u0027t see any harm in using it also for controlling the behavior of GetSanitizedUsername().",
      "parentUuid": "e6ef605f_bc04fe79",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f5bc752_24c31793",
        "filename": "chromeos/dbus/fake_cryptohome_client.h",
        "patchSetId": 1
      },
      "lineNbr": 228,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T09:08:31Z",
      "side": 1,
      "message": "\u003e I don\u0027t think it\u0027s a good idea to have an is_ready boolean for each method.\n\nThat\u0027s why I tried to follow the real implementation details ;-).\n\nSo..., I\u0027m confused.\nIs it a flag to control whether the service itself is ready or not, isn\u0027t it?\nLooks like the situation we need here is, the service is ready, but sanitization is somehow failing...???\n\nBTW, I couldn\u0027t find document what happens/should happen when calling async CryptohomeClient methods while initialization is not yet completed. Immediate fail? Or pending until the initialization is done?\nIs it by design? Or current implementation details?",
      "parentUuid": "cf0eac8c_fea97cf7",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5908c426_59093eb7",
        "filename": "chromeos/dbus/fake_cryptohome_client.h",
        "patchSetId": 1
      },
      "lineNbr": 228,
      "author": {
        "id": 1000169
      },
      "writtenOn": "2017-07-10T09:50:18Z",
      "side": 1,
      "message": "\u003e Looks like the situation we need here is, the service is ready, but sanitization is somehow failing...???\n\nWhat we need is CryptohomeClient returning D-Bus error.\n\n\u003e BTW, I couldn\u0027t find document what happens/should happen when calling async CryptohomeClient methods while initialization is not yet completed. Immediate fail?\n\nChrome cannot call D-Bus methods before the service acquires the name ownership, so it results in immediate failure.\n\nThese documents are good read to get familiar with D-Bus concepts.\n- https://dbus.freedesktop.org/doc/dbus-specification.html\n- https://chromium.googlesource.com/chromiumos/docs/+/master/dbus_best_practices.md",
      "parentUuid": "8f5bc752_24c31793",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2b7f7a3_394bc43b",
        "filename": "chromeos/dbus/fake_cryptohome_client.h",
        "patchSetId": 1
      },
      "lineNbr": 228,
      "author": {
        "id": 1115919
      },
      "writtenOn": "2017-07-10T11:35:57Z",
      "side": 1,
      "message": "Done.\n\nThank you for pointers and offline discussion.\nNow I believe I understood your design decisions.\nIt\u0027s nice if there\u0027s some documentation about it as the interface is well encapsulated.\n\nAlso,\n\n\u003e adding a new one to explicitly control the fake\u0027s behavior?\n\nplease do not suggest an option which you will disagree.",
      "parentUuid": "5908c426_59093eb7",
      "revId": "2331bf324835eb2a3a58d4d152b735d98989fcd1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}