{
  "comments": [
    {
      "key": {
        "uuid": "937497bf_e143f3ad",
        "filename": "content/browser/frame_host/navigation_handle_impl.cc",
        "patchSetId": 47
      },
      "lineNbr": 520,
      "author": {
        "id": 1115881
      },
      "writtenOn": "2017-09-15T14:07:48Z",
      "side": 1,
      "message": "In the public file you say that this can only be called after the response has been processed, yet this is not enforced here with a DCHECK.",
      "revId": "26ae6fb2097c253d67fc67cc4b61cdc0ea68688f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc74673b_20efcf57",
        "filename": "content/browser/frame_host/navigation_handle_impl.cc",
        "patchSetId": 47
      },
      "lineNbr": 520,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-09-15T14:48:09Z",
      "side": 1,
      "message": "Thanks! I\u0027m happy to add a DCHECK and would prefer it, but as a consumer of this API in DidFinishNavigation, I couldn\u0027t figure out how to tell if it the given NavigationHandle had reached the expected state. Is there an API on NavigationHandle that would tell me that the navigation has progressed enough to know if it\u0027s a download, so I can be certain I won\u0027t trigger the DCHECK when I call it? Would checking to see if HTTP response headers are non-null be the right way to tell that we\u0027d started processing the response, or is there a different way to do it?",
      "parentUuid": "937497bf_e143f3ad",
      "revId": "26ae6fb2097c253d67fc67cc4b61cdc0ea68688f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ed63795_b5cf2e20",
        "filename": "content/browser/frame_host/navigation_handle_impl.cc",
        "patchSetId": 47
      },
      "lineNbr": 520,
      "author": {
        "id": 1115881
      },
      "writtenOn": "2017-09-19T12:06:12Z",
      "side": 1,
      "message": "I\u0027m not saying that we should necessarily put a DCHECK there - just that if we say in a comment that it shouldn\u0027t be called before A, this should be enforced in a DCHECK. In practice this does mean that you can\u0027t call it from DidFinishNavigation in the current interface. Another option could be not to return a boolean but an enum value, for example:\nenum class IsDownload {\nTRUE,\nFALSE,\nUNKNOWN\n} (note: a bool* or Optional\u003cbool\u003e work as well).\n\nand only set it to yes or no when we know for sure what the status of the navigation is. This allow the function to be called at any time.",
      "parentUuid": "dc74673b_20efcf57",
      "revId": "26ae6fb2097c253d67fc67cc4b61cdc0ea68688f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae95cadb_628db898",
        "filename": "content/browser/frame_host/navigation_handle_impl.cc",
        "patchSetId": 47
      },
      "lineNbr": 520,
      "author": {
        "id": 1136769
      },
      "writtenOn": "2017-09-22T14:03:08Z",
      "side": 1,
      "message": "Thanks! I like Optional\u003cbool\u003e for cases like this. I\u0027ll make that change, thanks!",
      "parentUuid": "9ed63795_b5cf2e20",
      "revId": "26ae6fb2097c253d67fc67cc4b61cdc0ea68688f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fba8ff5_3ce1dbab",
        "filename": "content/public/browser/navigation_handle.h",
        "patchSetId": 47
      },
      "lineNbr": 244,
      "author": {
        "id": 1115881
      },
      "writtenOn": "2017-09-15T14:07:48Z",
      "side": 1,
      "message": "Reaching DidFinishNavigation does not mean that the response was processed.",
      "revId": "26ae6fb2097c253d67fc67cc4b61cdc0ea68688f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}