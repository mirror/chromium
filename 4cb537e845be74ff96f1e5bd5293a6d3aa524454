{
  "comments": [
    {
      "key": {
        "uuid": "45251bfd_df3861e1",
        "filename": "components/offline_pages/core/prefetch/prefetch_dispatcher_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 158,
      "author": {
        "id": 1115887
      },
      "writtenOn": "2017-09-05T22:59:49Z",
      "side": 1,
      "message": "I think this should be done exactly as Cleanup - say call downloader-\u003eDownloadArchivesWhenReady(), then inside PrefetchDownloaderImpl::OnDownloadServiceReady, after check for Cleanup, check a second bool and call a new method on Dispatcher, DownloadArchive(). That one will create and post the task. Or it will call DownloadArchives() right away if the service is already up.\n\nIn other words, it\u0027d be the same schema for that second task.",
      "revId": "4cb537e845be74ff96f1e5bd5293a6d3aa524454",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c52d0c9f_fee7d325",
        "filename": "components/offline_pages/core/prefetch/prefetch_dispatcher_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 158,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-09-05T23:04:43Z",
      "side": 1,
      "message": "Should this even be in a conditional?  We should always download the archives ready for download.\n\nThe download service will queue requests until it is initialized.\n\nThen if cleanup enables more downloads it should call QueueActionTasks.",
      "parentUuid": "45251bfd_df3861e1",
      "revId": "4cb537e845be74ff96f1e5bd5293a6d3aa524454",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed34aeca_0e978720",
        "filename": "components/offline_pages/core/prefetch/prefetch_dispatcher_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 158,
      "author": {
        "id": 1115887
      },
      "writtenOn": "2017-09-05T23:24:36Z",
      "side": 1,
      "message": "I think Jian is removing the queue of started downloads with this patch as well. \nWithout queue, it\u0027s a bit simpler and will work similar to Cleanup reconciling task - they both need to wait and they will wait in the same manner...",
      "parentUuid": "c52d0c9f_fee7d325",
      "revId": "4cb537e845be74ff96f1e5bd5293a6d3aa524454",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7e360592_c3ddaa68",
        "filename": "components/offline_pages/core/prefetch/prefetch_dispatcher_impl.h",
        "patchSetId": 6
      },
      "lineNbr": 86,
      "author": {
        "id": 1115887
      },
      "writtenOn": "2017-09-05T22:59:49Z",
      "side": 1,
      "message": "There are 3 spaces no in front of those, should be 2. Also may shift the stuff above, there are 2 functions with wrong indenting.",
      "revId": "4cb537e845be74ff96f1e5bd5293a6d3aa524454",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3542e911_9049020e",
        "filename": "components/offline_pages/core/prefetch/prefetch_downloader_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 68,
      "author": {
        "id": 1002700
      },
      "writtenOn": "2017-09-05T23:04:43Z",
      "side": 1,
      "message": "Why do we need this DCHECK?  The download service will queue this request.",
      "revId": "4cb537e845be74ff96f1e5bd5293a6d3aa524454",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6974cabd_59185ee8",
        "filename": "components/offline_pages/core/prefetch/prefetch_downloader_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 138,
      "author": {
        "id": 1115887
      },
      "writtenOn": "2017-09-05T22:59:49Z",
      "side": 1,
      "message": "Should there be:\n download_service_started_ \u003d false; \nhere? When do we expect this callback? Can OnDownloadServiceReady come after that again?\nIt is not clear what \"Nothing can be done\" means in this context...",
      "revId": "4cb537e845be74ff96f1e5bd5293a6d3aa524454",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}