{
  "comments": [
    {
      "key": {
        "uuid": "ed646bf6_7c5f1fb7",
        "filename": "components/favicon/core/large_icon_service.cc",
        "patchSetId": 1
      },
      "lineNbr": 213,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-18T14:59:57Z",
      "side": 1,
      "message": "I think that we can simplify this if() statement to:\n\nif (!db_result.is_valid() || kKnownUnrelatedHostSuffixes.count(page_host) \u003d\u003d 0)\n\nWe don\u0027t care if a random site uses the facebook favicon.",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "debf2075_7bf11fe7",
        "filename": "components/favicon/core/large_icon_service.cc",
        "patchSetId": 1
      },
      "lineNbr": 213,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-19T13:56:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed646bf6_7c5f1fb7",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "114532ad_b42f8512",
        "filename": "components/favicon/core/large_icon_service.cc",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-18T09:58:18Z",
      "side": 1,
      "message": "I tested this out\n\nThis will return false positives. For instance, the facebook.com icon is on the fbcdn.net domain and the gmail.com icon is on the gstatic.com domain\n\nI think that kKnownUnrelatedHostSuffixes should be a std::map from the page URL domain to the expected icon URL domain",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5839b3be_2e30448a",
        "filename": "components/favicon/core/large_icon_service.cc",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-18T10:38:27Z",
      "side": 1,
      "message": "I would like to avoid maintaining a map because it\u0027s very subject to change over time.\n\nWhen you mention false positives, you refer to bucket 0 (i.e. OK), right?\n\nThis is I think fine, because they\u0027re just suspicious, and we can\u0027t reliably tell if they\u0027re an issue or not. Nevertheless, observing a diff in this bucket during A/B testing would indicate there is an issue.",
      "parentUuid": "114532ad_b42f8512",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c3fb831_837897ab",
        "filename": "components/favicon/core/large_icon_service.cc",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-18T14:59:57Z",
      "side": 1,
      "message": "amazon.com has its touch icon at https://images-na.ssl-images-amazon.com/\ntwitter.com has its touch icon at https://abs-0.twimg.com\nyahoo.com has its touch icon at https://s.yimg.com/\nespn.com has its touch icon at http://a.espncdn.com/\n\nMy concern is that if facebook shows up with the twitter icon on the NTP we will not count this towards the \"1\" bucket.",
      "parentUuid": "5839b3be_2e30448a",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a970ee80_e47ea2bc",
        "filename": "components/favicon/core/large_icon_service.cc",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-18T15:15:50Z",
      "side": 1,
      "message": "Ok, so we\u0027re talking about false negatives.\n\nSince the issue is broader than I thought, I think an approach with a map makes sense, without making the assumption that amazon\u0027s icon must be hosted in ssl-images-amazon.com/.\n\nWhat do you think about the following proposal: have a hostname canonicalization map that will transform ssl-images-amazon.com/ into amazon.com. The rest of the logic could remain roughly the same. WDYT?",
      "parentUuid": "1c3fb831_837897ab",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9bfc0cf_ac88c177",
        "filename": "components/favicon/core/large_icon_service.cc",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-19T13:56:51Z",
      "side": 1,
      "message": "Done, PTAL after heavy rewrite. I ended up implementing something slightly more sophisticated.",
      "parentUuid": "a970ee80_e47ea2bc",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80e18adb_a5c6f15c",
        "filename": "components/favicon/core/large_icon_service_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 556,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-18T09:58:18Z",
      "side": 1,
      "message": "Can you rename these constants so that they have more semantic meaning?\n\nFor instance:\nkNonBlacklistedPageUrl1\nkNonBlacklistedPageUrl2\nkBlacklistedPageUrl1\nkBlacklistedPageUrl2",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3033e635_2ce1dd76",
        "filename": "components/favicon/core/large_icon_service_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 556,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-18T10:38:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "80e18adb_a5c6f15c",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68637e80_78b38037",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 1
      },
      "lineNbr": 24238,
      "author": {
        "id": 1176654
      },
      "writtenOn": "2017-10-18T09:58:18Z",
      "side": 1,
      "message": "The histogram comment is a bit misleading. LargeIconService is used by callers other than the NTP. For instance, I think that the bookmarks page on Android uses the LargeIconService too",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8b09492_7ac1adbb",
        "filename": "tools/metrics/histograms/histograms.xml",
        "patchSetId": 1
      },
      "lineNbr": 24238,
      "author": {
        "id": 1176649
      },
      "writtenOn": "2017-10-18T10:38:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68637e80_78b38037",
      "revId": "89699e5909d456217ae365dc18caba7bc794f526",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}