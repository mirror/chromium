{
  "comments": [
    {
      "key": {
        "uuid": "5bc45486_ee02947a",
        "filename": "third_party/WebKit/Source/core/css/CSSComputedStyleDeclaration.h",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1115751
      },
      "writtenOn": "2017-08-28T21:39:27Z",
      "side": 1,
      "message": "I think the fact that StyledNode() returns the element itself if we do getComputedStyle(elm, \"::before\") and there is no generated content is wrong. Firefox is able to return a green color and \u0027auto\u0027 as width here:\n\n\u003c!DOCTYPE html\u003e\n\u003cstyle\u003e\n  #t1::before { color: green }\n\u003c/style\u003e\n\u003cdiv id\u003d\"t1\"\u003e\u003c/div\u003e\n\u003cscript\u003e\n  console.log(getComputedStyle(t1, \"::before\").width);\n  console.log(getComputedStyle(t1, \"::before\").color);\n\u003c/script\u003e\n\nShould we have created a pseudo element just for the purpose of querying the computed style instead?",
      "revId": "08b9105a9e26e28f61a00e25f1db692ca3873438",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b0ee752_c4947f65",
        "filename": "third_party/WebKit/Source/core/css/CSSComputedStyleDeclaration.h",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1115751
      },
      "writtenOn": "2017-08-28T21:42:57Z",
      "side": 1,
      "message": "The CSSOM spec says:\n\n\"In this specification the ::before and ::after pseudo-elements are assumed to exist for all elements even if no box is generated for them.\"",
      "parentUuid": "5bc45486_ee02947a",
      "revId": "08b9105a9e26e28f61a00e25f1db692ca3873438",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "107d5c52_590ba41d",
        "filename": "third_party/WebKit/Source/core/css/CSSComputedStyleDeclaration.h",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1212729
      },
      "writtenOn": "2017-08-28T21:53:50Z",
      "side": 1,
      "message": "I don\u0027t understand what you\u0027re proposing, we already have that behavior (with this patch). See the ComputeComputedStyle method, which reads:\n\n  return styled_node-\u003eEnsureComputedStyle(styled_node-\u003eIsPseudoElement()\n                                              ? kPseudoIdNone\n                                              : pseudo_element_specifier_);\n\nSo we compute a pseudo-element style if needed for the pseudo (returning the correct value for the color property). We were just incorrectly using `styled_node-\u003eGetLayoutObject()` for layout-dependent properties.",
      "parentUuid": "8b0ee752_c4947f65",
      "revId": "08b9105a9e26e28f61a00e25f1db692ca3873438",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0495c8fd_a927f29d",
        "filename": "third_party/WebKit/Source/core/css/CSSComputedStyleDeclaration.h",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1115751
      },
      "writtenOn": "2017-08-28T22:06:55Z",
      "side": 1,
      "message": "Right, I see that now. So StyledNode() is the pseudo element when it\u0027s actually generated, but the actual element when we have no content property. That\u0027s a bit confusing. I guess we do so to avoid having to deal with creating a pseudo element when querying computed style for one when it\u0027s not generating content.",
      "parentUuid": "107d5c52_590ba41d",
      "revId": "08b9105a9e26e28f61a00e25f1db692ca3873438",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}