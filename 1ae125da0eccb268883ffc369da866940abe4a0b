{
  "comments": [
    {
      "key": {
        "uuid": "5f29d114_04859d96",
        "filename": "chrome/browser/metrics/ukm_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 99,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2018-01-12T15:50:26Z",
      "side": 1,
      "message": "Instead of arbitrarily returning 0 for these scenarios, how about making a has_client_id() function and checking that before calling client_id()? And this function can EXPECT_TRUE(has_client_id());",
      "range": {
        "startLine": 99,
        "startChar": 15,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "1ae125da0eccb268883ffc369da866940abe4a0b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d109f9e9_419eb284",
        "filename": "chrome/browser/metrics/ukm_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 99,
      "author": {
        "id": 1117419
      },
      "writtenOn": "2018-01-12T16:25:39Z",
      "side": 1,
      "message": "I could also just dcheck here if it\u0027s called when there is none.  Practically, the call should never be made at all.",
      "parentUuid": "5f29d114_04859d96",
      "range": {
        "startLine": 99,
        "startChar": 15,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "1ae125da0eccb268883ffc369da866940abe4a0b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f49686a6_1ca196af",
        "filename": "chrome/browser/metrics/ukm_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 99,
      "author": {
        "id": 1117419
      },
      "writtenOn": "2018-01-15T20:39:54Z",
      "side": 1,
      "message": "Seems that several tests call here when client_id hasn\u0027t yet been set.  Will require some investigation to correct that -- best on a different CL so as to not hold up this and follow-on CLs.",
      "parentUuid": "d109f9e9_419eb284",
      "range": {
        "startLine": 99,
        "startChar": 15,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "1ae125da0eccb268883ffc369da866940abe4a0b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a07ade4_cc4cd607",
        "filename": "chrome/browser/metrics/ukm_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 99,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2018-01-15T22:27:18Z",
      "side": 1,
      "message": "Okay, maybe add a TODO for now?",
      "parentUuid": "f49686a6_1ca196af",
      "range": {
        "startLine": 99,
        "startChar": 15,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "1ae125da0eccb268883ffc369da866940abe4a0b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc5c7dea_66785d49",
        "filename": "chrome/browser/metrics/ukm_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 104,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2018-01-12T15:50:26Z",
      "side": 1,
      "message": "Do we need the Sleep() call? I think RunUntilIdle() should run any posted tasks.\n\nWhat\u0027s the reason for the posted task to be delayed?",
      "range": {
        "startLine": 104,
        "startChar": 34,
        "endLine": 104,
        "endChar": 38
      },
      "revId": "1ae125da0eccb268883ffc369da866940abe4a0b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc5d3515_fe8f54fe",
        "filename": "chrome/browser/metrics/ukm_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 104,
      "author": {
        "id": 1117419
      },
      "writtenOn": "2018-01-12T16:25:39Z",
      "side": 1,
      "message": "A delayed task still leaves the loop \"idle\".  Only ready-to-run tasks are guaranteed to execute before this call returns.\n\nThe task is delayed, according to its comment, to \"start recording before doing expensive initialization work.\"",
      "parentUuid": "bc5c7dea_66785d49",
      "range": {
        "startLine": 104,
        "startChar": 34,
        "endLine": 104,
        "endChar": 38
      },
      "revId": "1ae125da0eccb268883ffc369da866940abe4a0b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce46d4e0_d66d41fe",
        "filename": "chrome/browser/metrics/ukm_browsertest.cc",
        "patchSetId": 6
      },
      "lineNbr": 104,
      "author": {
        "id": 1103654
      },
      "writtenOn": "2018-01-15T22:27:18Z",
      "side": 1,
      "message": "I see. It looks like that code was copied from the MetricsService structure, which actually does some expensive work in its init task. Looking at the UKM code, I don\u0027t think the following are expensive:\n\n client_id_ \u003d LoadOrGenerateClientId(pref_service_);\n session_id_ \u003d LoadSessionId(pref_service_);\n report_count_ \u003d 0;\n\nI think we should just simplify that code to do those inline.",
      "parentUuid": "bc5d3515_fe8f54fe",
      "range": {
        "startLine": 104,
        "startChar": 34,
        "endLine": 104,
        "endChar": 38
      },
      "revId": "1ae125da0eccb268883ffc369da866940abe4a0b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}