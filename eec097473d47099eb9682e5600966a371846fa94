{
  "comments": [
    {
      "key": {
        "uuid": "ea63700a_ec756d64",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "Generally we prefer not to coordinate the positions of UI by passing rects, and instead use named layout guides. Rects are better than views, however; in any case, if you use a rect, it should be in UIWindow coordinates (and documented as such).",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 37,
        "endChar": 50
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d836183_cf0fd0cf",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "It is a common pattern on ios to pass rects which are in view coordinates: \n - UIPopoverPresentationController has sourceView and sourceRect\n - UIDocumentInteractionController has presentation API which take view and rect\n\nIn this case I pass rect in view\u0027s coordinate space because UIDocumentInteractionController needs those (updated comment). However in general I\u0027m curious why you said \"it should be in UIWindow coordinates\"? Is it a common New Architecture pattern to use window coordinates?\n\nAfter getting more context, do you still think that using named layout guides is a better approach here. This is the actual implementation for the callback: \ncrrev.com/c/chromium/src/+/841462/10/ios/chrome/browser/ui/download/download_manager_coordinator.mm#123",
      "parentUuid": "ea63700a_ec756d64",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 37,
        "endChar": 50
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba7121d1_42834508",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-18T16:27:20Z",
      "side": 1,
      "message": "Yes, I think named guides are better. \n\nOne problem with passing rects is that the API has to define which view\u0027s coordinates the rect is in. The advantage of using UIWindow coordinates is that it doesn\u0027t require either end of the API to make any assumptions about what views are available at the other end. For example, if the delegate handling this call isn\u0027t going to be directly presenting the OpenIn menu, it will need to make sure that whatever object is going to handle it can perform the coordinate conversion. This means either an intermediate coordinate conversion needs to be done, or (worse) the originating view also needs to be passed. The fact that UIKit uses this pattern doesn\u0027t justify it, and I\u0027m pretty sure all of the rect-based UIKit APIs predate autolayout.\n\nAnother problem is that rects that indicate the position of a view can go stale very easily (if the view rotates, for example). \n\nLayout guides solve these and other problems. We define a named guide and maintain it in the UI layer. It updates via autolayout. It can be converted to a rect if needed for legacy code. There\u0027s no need to pass UI-layer information around in the controller/coordinator layer.",
      "parentUuid": "2d836183_cf0fd0cf",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 37,
        "endChar": 50
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "356144f2_1284d16d",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-18T23:20:06Z",
      "side": 1,
      "message": "\u003e Layout guides solve these and other problems. We define a named guide and maintain it in the UI layer. It updates via autolayout. It can be converted to a rect if needed for legacy code. There\u0027s no need to pass UI-layer information around in the controller/coordinator layer.\n\nUsing named layout guide makes download_manager_view_controller depend on BVC code (which has adds a named layout guide). I tried rewriting presentation using named layout guides and I ended up with more code, which was also coupled with BVC.\n\nI do understand that you may want to have consistency in codebase and use UILayoutGuide everywhere. How about I use UILayoutGuide, but will call AddNamedGuide inside view controller instead of BVC and will pass UILayoutGuide in callback? I\u0027ve made the change in this CL to make sure that my proposal is clear.",
      "parentUuid": "ba7121d1_42834508",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 37,
        "endChar": 50
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a363f8ca_99189129",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-15T16:00:18Z",
      "side": 1,
      "message": "nit: it looks like in most of Objective-C files the memory management policy for properties is explicit; please add \"copy\"/\"strong\"/\"assign\" as necessary for consistency with the rest of the project",
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18785bf0_e6fe63b1",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "Thanks for catching. This should be |copy| per Style Guide (http://go/objc-style#Setters_copy_NSStrings)\n\nAs for strong/assign, I would prefer to omit them. AFAIK, prior to ARC |assign| was a default for all properties. Under ARC |strong| is default for Objective-C pointers, and |assign| is default for everything else. So I would apply the same logic here as for |readwrite|, which is default and explicitly typing will simply clutter the interface. WDYT?",
      "parentUuid": "a363f8ca_99189129",
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f3fa8aa_77cbfd9f",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1116027
      },
      "writtenOn": "2018-01-15T16:00:18Z",
      "side": 1,
      "message": "nit: \"readwrite\" is the default, and usually omitted, remove (it is omitted from other properties)",
      "range": {
        "startLine": 50,
        "startChar": 21,
        "endLine": 50,
        "endChar": 30
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59511b81_cd04906e",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4f3fa8aa_77cbfd9f",
      "range": {
        "startLine": 50,
        "startChar": 21,
        "endLine": 50,
        "endChar": 30
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "722e5e63_54a663d5",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "I don\u0027t usually expect to see subviews or controls as part of the public API of a view controller. Conceptually nothing should depend on the view controller\u0027s appearance or what controls it presents the user.",
      "range": {
        "startLine": 59,
        "startChar": 1,
        "endLine": 59,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "986b4df5_e287b81f",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "From Unit testing best practices:\n\"It can also be valuable on fields representing UI elements, which are visible to the user and part of a class\u0027s contract, but not normally exposed via its API.\"\nhttp://go/unit-test-practices#public-apis\n\nI plan to have unit tests which verify the correctness of labels, and tap on buttons to test delegate callbacks. It is possible to use accessibility labels to achieve the same results, but exposing UI elements is cleaner. WDYT?",
      "parentUuid": "722e5e63_54a663d5",
      "range": {
        "startLine": 59,
        "startChar": 1,
        "endLine": 59,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "011fb6f8_9d597f77",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-18T16:27:20Z",
      "side": 1,
      "message": "That\u0027s fine, but a testing category seems appropriate.",
      "parentUuid": "986b4df5_e287b81f",
      "range": {
        "startLine": 59,
        "startChar": 1,
        "endLine": 59,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d51c57b_a032180b",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-18T23:20:06Z",
      "side": 1,
      "message": "Testing categories look like backdoors for me (which is discouraged by http://go/unit-test-practices#public-apis). API should be either public or private. And tests should only test public APIs.\n\nBut I do see a value in a separate category, which I added and named UIElements",
      "parentUuid": "011fb6f8_9d597f77",
      "range": {
        "startLine": 59,
        "startChar": 1,
        "endLine": 59,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f9b9b23_d71bd31d",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "element",
      "range": {
        "startLine": 19,
        "startChar": 30,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cbdf4307_59601f28",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6f9b9b23_d71bd31d",
      "range": {
        "startLine": 19,
        "startChar": 30,
        "endLine": 19,
        "endChar": 37
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d24f596_ec8865dc",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 55,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "Dot notation for properties?",
      "range": {
        "startLine": 55,
        "startChar": 25,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb467d3c_d4ffc54f",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 55,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "These are not properties, they just methods (so per Style Guide dot notation should not be used). I was thinking to make them properties (so I can use dot notation), but decided that I don\u0027t want to add more code. I do not have a strong opinion and can totally add properties and use dot syntax here.",
      "parentUuid": "0d24f596_ec8865dc",
      "range": {
        "startLine": 55,
        "startChar": 25,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ec3fbfd_7e8c0fd4",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 55,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-18T16:27:20Z",
      "side": 1,
      "message": "statusLabel and actionButton are properties.\n\nMy general feeling is that things that look like properties should be properties.",
      "parentUuid": "fb467d3c_d4ffc54f",
      "range": {
        "startLine": 55,
        "startChar": 25,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2de6ed42_2540097b",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 55,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-18T23:20:06Z",
      "side": 1,
      "message": "Oh, right. Changed everything to properties and dot syntax.",
      "parentUuid": "0ec3fbfd_7e8c0fd4",
      "range": {
        "startLine": 55,
        "startChar": 25,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75ee356e_c15762c5",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "The preferred mechanism for sizing/positioning view controllers is to leave that up to the embedding view controller. Ideally in a case like this where the content size is driven by the size of a subview, the view controller\u0027s view should have an appropriate -intrinsicContentSize property.\n\nIt might be useful to have a simple UIView subclass with a writeable -intrinsicContentSize property.",
      "range": {
        "startLine": 71,
        "startChar": 5,
        "endLine": 71,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dcbd35b_a7893bc6",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "The embedding view controller is BVC, so is the suggestion to set these constraints in BVC?",
      "parentUuid": "75ee356e_c15762c5",
      "range": {
        "startLine": 71,
        "startChar": 5,
        "endLine": 71,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90bd8749_4395e570",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-18T16:27:20Z",
      "side": 1,
      "message": "Or in some object the BVC owns. Look at how other contained view controllers are handled.",
      "parentUuid": "9dcbd35b_a7893bc6",
      "range": {
        "startLine": 71,
        "startChar": 5,
        "endLine": 71,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6546c256_e6f8c447",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-18T23:20:06Z",
      "side": 1,
      "message": "I removed view.leftAnchor and view.rightAnchor constraints. Seems like presenter takes care of those. \n\nCreating UIView subclass just so we can override intrinsicContentSize seems like a hack to me. Is there a reason why you don\u0027t want to keep view.heightAnchor constraint? I think embedding view controller should not have the knowledge about toolbar size.",
      "parentUuid": "90bd8749_4395e570",
      "range": {
        "startLine": 71,
        "startChar": 5,
        "endLine": 71,
        "endChar": 9
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e7cc0c8_eb7a86df",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 80,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "nit: left/right or leading/trailing work the same here, but as a reviewer I have to carefully check each left or right constraint to make sure it shouldn\u0027t actually be leading/trailing. So I\u0027d recommend always using leading/trailing, and only using left/right when the constraint really needs to be RTL-invariant (and then supplying a clear comment to that effect).",
      "range": {
        "startLine": 80,
        "startChar": 12,
        "endLine": 80,
        "endChar": 22
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d0c29df_00c3d947",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 80,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e7cc0c8_eb7a86df",
      "range": {
        "startLine": 80,
        "startChar": 12,
        "endLine": 80,
        "endChar": 22
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "800f1a38_710f9960",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 83,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "This shouldn\u0027t be needed, as the shadow should have an inherent content size.",
      "range": {
        "startLine": 83,
        "startChar": 12,
        "endLine": 83,
        "endChar": 24
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e27eccb_6a6247dd",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 83,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-18T23:20:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "800f1a38_710f9960",
      "range": {
        "startLine": 83,
        "startChar": 12,
        "endLine": 83,
        "endChar": 24
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "997ecf35_9897a44a",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 87,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "If the background is just going to be white, we should suet set self.view.backgroundColor instead of adding another view.",
      "range": {
        "startLine": 87,
        "startChar": 10,
        "endLine": 87,
        "endChar": 20
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a8ff657_a7ed0288",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 87,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "Background is white, but shadow image has alpha and there should be a web page under it (not white background). I don\u0027t quite understand why Toolbar does not use stretchable image for shadow (and uses @\"infobar_shadow\" as it is), but in this view controller I wanted to use existing image resources. If you have a different suggestion for drawing the shadow, I will be happy to follow it.",
      "parentUuid": "997ecf35_9897a44a",
      "range": {
        "startLine": 87,
        "startChar": 10,
        "endLine": 87,
        "endChar": 20
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82cbf7bc_1dcb6c8c",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 92,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "If |shadow|\u0027s image has an alpha of less than 1.0, then the background (however it is implemented) should extend under the image.",
      "range": {
        "startLine": 92,
        "startChar": 26,
        "endLine": 92,
        "endChar": 56
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "748524e1_1e83ffd6",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 92,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "shadow\u0027s alpha is less than 1.0. For that reason the background should not be under the image, because background is opaque and image is not. Did I misunderstand your comment?",
      "parentUuid": "82cbf7bc_1dcb6c8c",
      "range": {
        "startLine": 92,
        "startChar": 26,
        "endLine": 92,
        "endChar": 56
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0bf2bbb_c5c8ad4d",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "Buttons also have intrinsic content sizes, so you shouldn\u0027t need these constraints.\n\n(Generally I\u0027ve found the best approach with constraints is to start with fewer constraints than you think you need, and then add more as necessary. It\u0027s much easier to fix a system with too few constraints than one with too many).",
      "range": {
        "startLine": 99,
        "startChar": 17,
        "endLine": 99,
        "endChar": 28
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4272240_c3bef8c2",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "Removing these constraints breaks the layout of Action button (button shrinks) and sizeToFit call does not help. Do you know how to tell actionButton, that its width should not be flexible?",
      "parentUuid": "a0bf2bbb_c5c8ad4d",
      "range": {
        "startLine": 99,
        "startChar": 17,
        "endLine": 99,
        "endChar": 28
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "257ee170_912b42b8",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 102,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "UIViews have a layout margins guide for positioning content a useful amount of space inside the edges of a view. This is worth using because on iOS11, it interacts with safe area insets. \n\nI\u0027ll have to check how/if we\u0027re doing this elsewhere but I think the way to approach this is to do this on iOS 10:\n\nself.layoutMargins \u003d UIEdgeInsetsMake(kElementMargin, kElementMargin, kElementMargin, kElementMargin);\n\nand this on iOS 11:\n\nself.directionalLayoutMargins \u003d NSDirectionalEdgeInsetsMake(kElementMargin, kElementMargin, kElementMargin, kElementMargin);\n\nand then in constraints (in both iOS10 and 11) do this:\n\n[something.trailingAnchor constraintEqualToAnchor:view.layoutMarginsGuide.trailingAnchor]\n\non iOS 11, if the margins we supply aren\u0027t enough to keep content inside the safe area, UIKit should adjust layoutMarginsGuide so it works correctly. But I haven\u0027t verified this.",
      "range": {
        "startLine": 102,
        "startChar": 61,
        "endLine": 102,
        "endChar": 75
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d95e598b_ebf78032",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 102,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "This does not work. There is no trailing margin for close button after making suggested change.",
      "parentUuid": "257ee170_912b42b8",
      "range": {
        "startLine": 102,
        "startChar": 61,
        "endLine": 102,
        "endChar": 75
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b34c3be5_ac674194",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 159,
      "author": {
        "id": 1115958
      },
      "writtenOn": "2018-01-15T14:46:24Z",
      "side": 1,
      "message": "Seems like this should be declared as a property, as the others are.",
      "range": {
        "startLine": 159,
        "startChar": 16,
        "endLine": 159,
        "endChar": 22
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20267179_44483acf",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 159,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-16T18:54:44Z",
      "side": 1,
      "message": "See the comment above. Can change if you feel strongly.",
      "parentUuid": "b34c3be5_ac674194",
      "range": {
        "startLine": 159,
        "startChar": 16,
        "endLine": 159,
        "endChar": 22
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e105b289_e5282e94",
        "filename": "ios/chrome/browser/ui/download/download_manager_view_controller.mm",
        "patchSetId": 3
      },
      "lineNbr": 159,
      "author": {
        "id": 1123009
      },
      "writtenOn": "2018-01-18T23:20:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "20267179_44483acf",
      "range": {
        "startLine": 159,
        "startChar": 16,
        "endLine": 159,
        "endChar": 22
      },
      "revId": "eec097473d47099eb9682e5600966a371846fa94",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}