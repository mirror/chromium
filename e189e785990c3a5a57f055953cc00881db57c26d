{
  "comments": [
    {
      "key": {
        "uuid": "75ae0cba_c0473c9f",
        "filename": "third_party/WebKit/LayoutTests/paint/filters/clip-under-filter-expected.png",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-15T16:11:14Z",
      "side": 1,
      "message": "The difference is at the top and left edge. The new result has one more pixel on the edges maybe because of different rounding methods of blink and skia filter rect mapping.",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f50e728_258feaa5",
        "filename": "third_party/WebKit/LayoutTests/paint/invalidation/filter-invalidation-after-display-expected.txt",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-15T16:11:14Z",
      "side": 1,
      "message": "This is because of different rounding methods of blink and skia filter rect mapping. Because the new rect is slightly larger, the change is safe.",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcf7da1a_6d18e330",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-15T16:11:14Z",
      "side": 1,
      "message": "Without this change, when we map a layer with filter to an ancestor layer, the filter effect will be applied twice which fails svg/custom/cross-referenced-resources.html.",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4ebc8f2_56637c77",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-16T04:43:09Z",
      "side": 1,
      "message": "Why should it apply to the root layer? Is it an issue of specifying an ancestor property\ntree state that is not outside the effect?",
      "parentUuid": "fcf7da1a_6d18e330",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89cb4115_1827aad9",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-16T05:34:06Z",
      "side": 1,
      "message": "This is to keep the original behavior that is tested in the original PaintLayerClipperTest.Filter. It tests that a layer having a filter gets clip rects in its own space. The test says:\n  // The background rect is used to clip stacking context (layer) output.\n  // In this case, nothing is above us, thus the infinite rect. However we do\n  // clip to the layer\u0027s after-filter visual rect as an optimization.\n\nWithout the above \"context.root_layer \u003d\u003d \u0026layer_\" the test would be broken because background_rect would be infinity. I\u0027m not sure if we should keep the tested behavior.",
      "parentUuid": "c4ebc8f2_56637c77",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d12ed9fc_f7e704c5",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-16T05:59:13Z",
      "side": 1,
      "message": "Why infinity? I would expect it to be somefinite value, since it is always initialized\nto something above.\n\nAlso, the comment is correct that it really is an optimization, so it can get bigger without\ncorrectness problems.",
      "parentUuid": "89cb4115_1827aad9",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9407bf0_0a68c096",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-25T19:19:32Z",
      "side": 1,
      "message": "I still don\u0027t see why we need this line of code. Does svg/custom/cross-referenced-resources.html\nlook visibly incorrect without it?",
      "parentUuid": "d12ed9fc_f7e704c5",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37bed7a3_5f506ec8",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-25T19:29:45Z",
      "side": 1,
      "message": "Without this line, filter geometry effect may be applied twice (the first in line 544, the second in GeometryMapper). svg/custom/cross-referenced-resources.html will fail with corrupted rendering.\n\nWithout context.root_layer \u003d\u003d \u0026layer_, PaintLayerClipperTest.Filter will fail because it expects the filter effect to be applied when a layer with filter is getting clip rects in its own space (i.e. the test expects the \"optimization\"). GeometryMapper won\u0027t apply an effect that is the same in the source state and the target state.",
      "parentUuid": "c9407bf0_0a68c096",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "517e7ec4_989b9408",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-25T19:56:33Z",
      "side": 1,
      "message": "\u003e Without context.root_layer \u003d\u003d \u0026layer_, PaintLayerClipperTest.Filter will fail because it expects the filter effect to be applied when a layer with filter is getting clip rects in its own space (i.e. the test expects the \"optimization\"). GeometryMapper won\u0027t apply an effect that is the same in the source state and the target state.\n\nYou can adjust that test.",
      "parentUuid": "37bed7a3_5f506ec8",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b047ad02_537c3f8e",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-25T21:56:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "517e7ec4_989b9408",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2864a4e_2815e135",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipper.cpp",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-25T22:07:50Z",
      "side": 1,
      "message": "Actually, now I realize it is necessary. e.g. a filter under non-composited 2D transform\nwill need to expand its rect to avoid clipping out the content during paint.\nSorry for the churn, could you put it back? :)",
      "parentUuid": "b047ad02_537c3f8e",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b06cd83_575b9c3d",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipperTest.cpp",
        "patchSetId": 4
      },
      "lineNbr": 498,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-16T04:43:09Z",
      "side": 1,
      "message": "What is special about SVG filters in this case?",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3430cc3_04fc88fe",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipperTest.cpp",
        "patchSetId": 4
      },
      "lineNbr": 498,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-16T05:34:06Z",
      "side": 1,
      "message": "It\u0027s special because it contains an feOffset filter which moves the source rect instead of expanding it like the normal CSS filters. Actually I doubt the correctness of foreground_rect. It looks to me that the correct value should be (0,0 300x300) which is the original overflow clip of the svg root.\n\nSee another example:\n  \u003csvg id\u003d\u0027target\u0027 width\u003d\u0027100\u0027 height\u003d\u0027100\u0027 filter\u003d\u0027url(#filter)\u0027\u003e\n    \u003cfilter height\u003d\"300%\" id\u003d\u0027filter\u0027\u003e\n      \u003cfeOffset dy\u003d\u0027100\u0027/\u003e\n    \u003c/filter\u003e\n    \u003crect width\u003d\u0027100\u0027 height\u003d\u0027100\u0027 fill\u003d\u0027green\u0027/\u003e\n  \u003c/svg\u003e\n\nThe current code will give an empty foreground_rect which means no contents should be visible, but the whole contents is visible. I think we should get (0,0 100x100). Will look into this to see if it is an existing bug.",
      "parentUuid": "6b06cd83_575b9c3d",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0dc64ad1_55e396c9",
        "filename": "third_party/WebKit/Source/core/paint/PaintLayerClipperTest.cpp",
        "patchSetId": 4
      },
      "lineNbr": 498,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-23T20:22:09Z",
      "side": 1,
      "message": "I removed this test case in the latest patch set because I don\u0027t quite understand how svg filter works especially about the filter bounds.",
      "parentUuid": "f3430cc3_04fc88fe",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c46c287_84a6b5ac",
        "filename": "third_party/WebKit/Source/core/paint/PaintPropertyTreeBuilder.cpp",
        "patchSetId": 4
      },
      "lineNbr": 727,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-16T04:43:09Z",
      "side": 1,
      "message": "Add a unittest example in PaintPropertyTreeBuilderTest that depends\non paint offset being correct.",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3d05ffa_053376b7",
        "filename": "third_party/WebKit/Source/core/paint/PaintPropertyTreeBuilder.cpp",
        "patchSetId": 4
      },
      "lineNbr": 727,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-16T05:34:06Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1c46c287_84a6b5ac",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b21438b_95708072",
        "filename": "third_party/WebKit/Source/core/paint/PaintPropertyTreeBuilder.cpp",
        "patchSetId": 4
      },
      "lineNbr": 727,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-23T20:22:09Z",
      "side": 1,
      "message": "Added check for paint offset in all existing PaintPropertyTreeBuilderTest cases testing filters.",
      "parentUuid": "c3d05ffa_053376b7",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0df177cd_658ca2d9",
        "filename": "third_party/WebKit/Source/platform/graphics/filters/FEComposite.cpp",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1115878
      },
      "writtenOn": "2017-09-16T04:43:09Z",
      "side": 1,
      "message": "spurious",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d51dc8aa_3d3c0d91",
        "filename": "third_party/WebKit/Source/platform/graphics/filters/FEComposite.cpp",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1002481
      },
      "writtenOn": "2017-09-23T20:22:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0df177cd_658ca2d9",
      "revId": "e189e785990c3a5a57f055953cc00881db57c26d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}