{
  "comments": [
    {
      "key": {
        "uuid": "1d27b56f_0ee9a6af",
        "filename": "chrome/browser/notifications/system_notification_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 25,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-31T01:05:58Z",
      "side": 1,
      "message": "So, I am largely thinking out loud here, but this is my concern for Mash:\n\na) chrome starts the ash process which starts up quickly and requests a notification via mojo to chrome (e.g. \"chrome os was updated\").\nb) mojo services are started before profile_manager() is initialized (this may or may not be true today, I don\u0027t actually know, but may also change in the future).\nc) this class is lazily initialized and gets called before profile_manager() is created, or before some code that is usually initialized before LoadProfileByPath() normally gets called.\n\nI may be overly paranoid here, maybe that could never happen?\n\nI guess that adding a notification handler that was initialized before the initial profile load would be bad for multiple reasons, so now that I think about it more I agree that this is a non issue.\n\nKeeping the above just for reference, but sorry for the noise.",
      "revId": "542286d820819572c578d218e587a639b725e4e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f7574a6_581c488d",
        "filename": "chrome/browser/notifications/system_notification_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 25,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-31T01:17:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1d27b56f_0ee9a6af",
      "revId": "542286d820819572c578d218e587a639b725e4e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a720cb0_8d1e95e2",
        "filename": "chrome/browser/notifications/system_notification_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-31T01:05:58Z",
      "side": 1,
      "message": "It\u0027s possible that |profile| exists but DoDisplayNotification has not been called so notification_id is still in pending_notifications_. We should just check if the notification is in pending_notifications_ and erase it / return in that case.",
      "revId": "542286d820819572c578d218e587a639b725e4e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c21a4744_35bd2f41",
        "filename": "chrome/browser/notifications/system_notification_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 1115907
      },
      "writtenOn": "2018-01-31T01:17:59Z",
      "side": 1,
      "message": "Is that possible though? If the profile exists we should have already run the loaded callback.",
      "parentUuid": "2a720cb0_8d1e95e2",
      "revId": "542286d820819572c578d218e587a639b725e4e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18591878_eb2d3d27",
        "filename": "chrome/browser/notifications/system_notification_helper.cc",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-31T01:29:15Z",
      "side": 1,
      "message": "a) Currently ProfileManager::CreateProfileAsync invokes callback.Run directly, so you\u0027re right, for now. If someone changes that to post the callback so that it is always called asynchronously (I tend to prefer that model) the behavior would change. (The header just says that |callback| will be invoked asynchronously).\nb) If the profile didn\u0027t exist when Display() was called, it might exist when Close() is called but DoDisplayNotification() wasn\u0027t called yet.\n\nIt\u0027s definitely an edge case, but startup can be slow with a lot happening in the initial \"frames\".",
      "parentUuid": "c21a4744_35bd2f41",
      "revId": "542286d820819572c578d218e587a639b725e4e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f9dd247_059be4c0",
        "filename": "chrome/browser/notifications/system_notification_helper.h",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1000191
      },
      "writtenOn": "2018-01-31T01:05:58Z",
      "side": 1,
      "message": "Can this just be file local?",
      "revId": "542286d820819572c578d218e587a639b725e4e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}