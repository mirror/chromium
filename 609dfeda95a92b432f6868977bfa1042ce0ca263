{
  "comments": [
    {
      "key": {
        "uuid": "2c3cfa0e_846852f2",
        "filename": "content/browser/loader/cross_site_document_blocking_explainer.md",
        "patchSetId": 6
      },
      "lineNbr": 35,
      "author": {
        "id": 1264433
      },
      "writtenOn": "2018-02-05T17:04:48Z",
      "side": 1,
      "message": "This is likely too nitpicky, but from a web developer\u0027s point of view it\u0027s fairly difficult to think of JSON resources as \"documents\". In my mind a document maps more closely to how it\u0027s defined in the DOM spec https://www.w3.org/TR/html52/dom.html#documents and HTML (https://www.w3.org/TR/html52/infrastructure.html#infrastructure-terminology), i.e. it\u0027s renderable, has a DOM, etc., none of which is true for JSON.\n\nHowever, I\u0027m not sure how to resolve this and keep your document vs. resource narrative intact, so perhaps you should just ignore this and go with the terminology you already have.",
      "range": {
        "startLine": 35,
        "startChar": 40,
        "endLine": 35,
        "endChar": 50
      },
      "revId": "609dfeda95a92b432f6868977bfa1042ce0ca263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5a836e0_2a99eae0",
        "filename": "content/browser/loader/cross_site_document_blocking_explainer.md",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1130134
      },
      "writtenOn": "2018-02-02T21:10:57Z",
      "side": 1,
      "message": "Domenic, I can see how you might be unhappy with the current wording.  FWIW, an earlier patchset said simply \"Avoid breaking existing websites (e.g. by unintentionally blocking *resources* they depend on).\".\n\nAt any rate, IMHO getting the rest of the document right (how XSDB should work, which MIME types it should pay attention to, how it is or is not compatible with existing website) is more important than wordsmithing the goals.  I think we are all on the same page - we do not want to break existing websites (although the actual impact of XSDB has not been quantified yet and each of us might have different thresholds for acceptable level of breakage).",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 50,
        "endChar": 43
      },
      "revId": "609dfeda95a92b432f6868977bfa1042ce0ca263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c1893c3_903ed8c6",
        "filename": "content/browser/loader/cross_site_document_blocking_explainer.md",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1264433
      },
      "writtenOn": "2018-02-05T17:04:48Z",
      "side": 1,
      "message": "Yes, this seems like a good idea, especially for resources that were already blocked by XSDB.\n\nWithout blocking headers, one risk is for endpoints which 302 redirect to (unauthenticated) capability URLs. For example, if example.org/myimage returns a 302 with Location: images.example.org/abc123...789xyz.png then the attacker could gain access to the secret URL and obtain the data.\n\nOne question is if Fetch safelisting would prevent exposing \"Location\" but if my reading of https://fetch.spec.whatwg.org/#cors-safelisted-request-header is correct this should be the case by default (if there is no Access-Control-Expose-Headers).",
      "range": {
        "startLine": 62,
        "startChar": 25,
        "endLine": 63,
        "endChar": 67
      },
      "revId": "609dfeda95a92b432f6868977bfa1042ce0ca263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67fcb5ba_9aec7020",
        "filename": "content/browser/loader/cross_site_document_blocking_explainer.md",
        "patchSetId": 6
      },
      "lineNbr": 163,
      "author": {
        "id": 1264433
      },
      "writtenOn": "2018-02-05T17:04:48Z",
      "side": 1,
      "message": "Nit: all-caps here and below.",
      "range": {
        "startLine": 163,
        "startChar": 17,
        "endLine": 163,
        "endChar": 21
      },
      "revId": "609dfeda95a92b432f6868977bfa1042ce0ca263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e1ee2b9_23ee6759",
        "filename": "content/browser/loader/cross_site_document_blocking_explainer.md",
        "patchSetId": 6
      },
      "lineNbr": 168,
      "author": {
        "id": 1264433
      },
      "writtenOn": "2018-02-05T17:04:48Z",
      "side": 1,
      "message": "My guess is that it is indeed too aggressive. Basically, I\u0027d expect that there are many resources without a Content-Type or with an arbitrary incorrect C-T value which are loaded cross-origin. I\u0027m speculating, but I think this could cause a fair amount of breakage.",
      "range": {
        "startLine": 168,
        "startChar": 25,
        "endLine": 168,
        "endChar": 79
      },
      "revId": "609dfeda95a92b432f6868977bfa1042ce0ca263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0aea956d_cb6f3361",
        "filename": "content/browser/loader/cross_site_document_blocking_explainer.md",
        "patchSetId": 6
      },
      "lineNbr": 282,
      "author": {
        "id": 1264433
      },
      "writtenOn": "2018-02-05T17:04:48Z",
      "side": 1,
      "message": "I wonder if this could be abused as a cross-origin information leak. For example, if evil.com loads victim.com/resource as a \u003cscript\u003e, then it will be able to infer if XSDB kicked in based on the absence of a JS error. Since XSDB kicks in based on the C-T, the attacker might be able to distinguish between response with a MIME type that triggers XSDB (document) vs. one with a MIME ignored by XSDB (resource) even if the actual responses both trigger JS parsing errors (and thus would be indistinguishable without XSDB).\n\nOne plausible example is a URL which returns resources which the attacker cannot directly observe cross-origin, but which, under certain conditions (e.g. depending on whether the user is logged in), shows an HTML error page. It\u0027s not a very compelling scenario, but might be worth thinking about more and/or documenting somewhere.",
      "range": {
        "startLine": 281,
        "startChar": 18,
        "endLine": 282,
        "endChar": 56
      },
      "revId": "609dfeda95a92b432f6868977bfa1042ce0ca263",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}