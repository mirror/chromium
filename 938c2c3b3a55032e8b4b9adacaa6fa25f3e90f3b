{
  "comments": [
    {
      "key": {
        "uuid": "b9fd5b74_425f50dd",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1160859
      },
      "writtenOn": "2017-08-15T21:00:22Z",
      "side": 1,
      "message": "does this need to be public, it seems to only be used internally.",
      "range": {
        "startLine": 24,
        "startChar": 23,
        "endLine": 24,
        "endChar": 31
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68a66ae9_ae556974",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b9fd5b74_425f50dd",
      "range": {
        "startLine": 24,
        "startChar": 23,
        "endLine": 24,
        "endChar": 31
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b97efae_beaf02f2",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1160859
      },
      "writtenOn": "2017-08-15T21:00:22Z",
      "side": 1,
      "message": "did you consider having the Compute step just happen in the constructor? especially as you have an .IsValid() method that could be called after construction. I wonder why you didn\u0027t go this route?",
      "range": {
        "startLine": 31,
        "startChar": 7,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1853162_0c01c72a",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-15T22:27:42Z",
      "side": 1,
      "message": "In usage the number of items to compare is known. So we can preallocate\n\nstd::vector\u003cBinaryDataHistoray\u003e(number of stuff);\n\nThen initialize items in place. This simplifies the code.\n\nA more flexible approach is to grow our BinaryDataHistory. Then we can choose among\n- std::vector\u003cstd::unique_ptr\u003cBinaryDataHistory\u003e\u003e\n- std::vector\u003cbase::Optoinal\u003cBinaryDataHistory\u003e\u003e\n- std::deque\u003cBinaryDataHistory\u003e  (no copying needed).\n\nI don\u0027t think we need the flexibility, so going with the simplest method. Let me know if you want to see that changed.",
      "parentUuid": "1b97efae_beaf02f2",
      "range": {
        "startLine": 31,
        "startChar": 7,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39e95d35_bba82ca1",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1160859
      },
      "writtenOn": "2017-08-15T22:36:37Z",
      "side": 1,
      "message": "sorry I don\u0027t understand - compute is only called once because it does a DCHECK that histogram_ is empty - so what preallocation is needed for what? Also, Distance requires that both objects have a non-empty histogram_ and thus requires Compute to be called on both before calling Distance.\n\nI must admit your reply completely confused me. I\u0027m just saying move the code currently in Compute() into the constructor. Can you explain when you would want to construct the object and not immediately call Compute?",
      "parentUuid": "d1853162_0c01c72a",
      "range": {
        "startLine": 31,
        "startChar": 7,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a767102_38a3c035",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1218025
      },
      "writtenOn": "2017-08-16T00:17:56Z",
      "side": 1,
      "message": "Since compute takes |region| as arguments, doing the work in constructor implies passing |region| as parameter to constructor, and have no default constructor. However, having a default constructor in BinaryDataHistogram is required for the following:\nstd::vector\u003cBinaryDaraHistogram\u003e bou(n);\nElements are then \u0027initialized\u0027 by calling compute() on them. This happens in unittests and elsewhere. \nAn alternative is to have constructor take |region|, and use push_back along with reserve() instead of relying on default constructor.",
      "parentUuid": "39e95d35_bba82ca1",
      "range": {
        "startLine": 31,
        "startChar": 7,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46116695_4f10eb1e",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-16T04:44:01Z",
      "side": 1,
      "message": "Sorry for being unclear; I have the caller code in mind, so understandably my comments are cryptic!  Sending you link to the caller code via chat.",
      "parentUuid": "0a767102_38a3c035",
      "range": {
        "startLine": 31,
        "startChar": 7,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ce001ed_885bb561",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1001928
      },
      "writtenOn": "2017-08-16T04:48:47Z",
      "side": 1,
      "message": "Also, in general I\u0027d rather not do too much work in constructors, after being bitten by the bug where calling virtual functions from constructor leads to crash.",
      "parentUuid": "46116695_4f10eb1e",
      "range": {
        "startLine": 31,
        "startChar": 7,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29ec0e0f_2c194c1a",
        "filename": "chrome/installer/zucchini/binary_data_histogram.h",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1160859
      },
      "writtenOn": "2017-08-16T16:25:42Z",
      "side": 1,
      "message": "okay that makes sense, I did not realize you would be creating vectors of this, for some reason I could not grok that from your reply yesterday :) lgtm",
      "parentUuid": "6ce001ed_885bb561",
      "range": {
        "startLine": 31,
        "startChar": 7,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "938c2c3b3a55032e8b4b9adacaa6fa25f3e90f3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}