{
  "comments": [
    {
      "key": {
        "uuid": "de02d22b_9cc5e56c",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2018-01-26T19:27:05Z",
      "side": 1,
      "message": "hmm, actually this doesn\u0027t hold\n\nI meant it to DCHECK that these things are not called after HostDestroyedOnUIThread, which is ok. However, it may not hold if renderer takes a while to get launched or something, so WaitAfterVSyncOnUIThread or SetFrameFutureOnUIThread can be called before BindFilterOnUIThread actually succeeds.\n\nI think we need separate bools for these two different things. And maybe rename BindFilterOnUIThread to TryBindFilterOnUIThread, and make it return a bool? Whatever makes sense I guess",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0c86625_a3c40f02",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2018-01-26T21:11:49Z",
      "side": 1,
      "message": "It should hold here.. because remote_closed_ is true until the filter is actually attached.",
      "parentUuid": "de02d22b_9cc5e56c",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ac5368b_4eb93af4",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2018-01-26T22:09:50Z",
      "side": 1,
      "message": "\u003e It should hold here.. because remote_closed_ is true until the filter is actually attached.\n\noh, good point :)",
      "parentUuid": "d0c86625_a3c40f02",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f3f8042_1c7bbeef",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2018-01-26T19:27:05Z",
      "side": 1,
      "message": "sorry, my suggestion on the last PS was wrong. the problem with UnregisterHost here is that if there is a legit reply UnregistereHost, the renderer is going to be incorrectly killed\n\nI think Bridge here needs to keep track of whether it has any pending replies, and only call UnregisterHost on the filter after all of them have been signals",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b93664a9_598be649",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2018-01-26T21:11:49Z",
      "side": 1,
      "message": "Why would something like a frame future be used after the view that produced that is ultimately destroyed that seems really odd and is ultimately a race anyways.  Because if you told something to draw and then destroy the thing doing the drawing you don\u0027t know when it is going to return.",
      "parentUuid": "2f3f8042_1c7bbeef",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3f567e5_482d99b8",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2018-01-26T22:09:50Z",
      "side": 1,
      "message": "\u003e Why would something like a frame future be used after the view that produced that is ultimately destroyed that seems really odd and is ultimately a race anyways.  Because if you told something to draw and then destroy the thing doing the drawing you don\u0027t know when it is going to return.\n\nUhh, webview teardown here is actually async on the UI thread. Meaning the frame might actually still be used, even after Host is deleted on the UI thread.\n\nBut that\u0027s not the important point here. The important point is that this race can cause the renderer thread to be killed incorrectly, which is a way bigger deal than displaying an empty frame during teardown.",
      "parentUuid": "b93664a9_598be649",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bc378dd_80c92ea8",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1123071
      },
      "writtenOn": "2018-01-26T22:17:37Z",
      "side": 1,
      "message": "So what you are saying is that I shouldn\u0027t call UnregisterHost if frame_futures is non empty but wait until I get the channel error/closing message.",
      "parentUuid": "c3f567e5_482d99b8",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "677137b1_d07471fb",
        "filename": "content/browser/android/synchronous_compositor_host_bridge.cc",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1002725
      },
      "writtenOn": "2018-01-26T22:24:35Z",
      "side": 1,
      "message": "\u003e So what you are saying is that I shouldn\u0027t call UnregisterHost if frame_futures is non empty but wait until I get the channel error/closing message.\n\nOr a legit reply arrives (webview is limited to a single renderer process, so single webview shutting down doesn\u0027t mean renderer process is shutting down too)",
      "parentUuid": "5bc378dd_80c92ea8",
      "revId": "fd944c715e0a0d8e904f48dac9e0250e908a2001",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}